{"version":3,"file":"static/js/60.c499123d.chunk.js","mappings":"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","sources":["../node_modules/babel-runtime/core-js/get-iterator.js","../node_modules/babel-runtime/core-js/is-iterable.js","../node_modules/babel-runtime/core-js/number/is-safe-integer.js","../node_modules/babel-runtime/core-js/object/assign.js","../node_modules/babel-runtime/core-js/object/create.js","../node_modules/babel-runtime/core-js/object/get-own-property-names.js","../node_modules/babel-runtime/core-js/object/keys.js","../node_modules/babel-runtime/core-js/object/set-prototype-of.js","../node_modules/babel-runtime/core-js/symbol.js","../node_modules/babel-runtime/core-js/symbol/iterator.js","../node_modules/babel-runtime/helpers/classCallCheck.js","../node_modules/babel-runtime/helpers/extends.js","../node_modules/babel-runtime/helpers/inherits.js","../node_modules/babel-runtime/helpers/objectWithoutProperties.js","../node_modules/babel-runtime/helpers/possibleConstructorReturn.js","../node_modules/babel-runtime/helpers/slicedToArray.js","../node_modules/babel-runtime/helpers/typeof.js","../node_modules/babel-runtime/node_modules/core-js/library/fn/get-iterator.js","../node_modules/babel-runtime/node_modules/core-js/library/fn/is-iterable.js","../node_modules/babel-runtime/node_modules/core-js/library/fn/number/is-safe-integer.js","../node_modules/babel-runtime/node_modules/core-js/library/fn/object/assign.js","../node_modules/babel-runtime/node_modules/core-js/library/fn/object/create.js","../node_modules/babel-runtime/node_modules/core-js/library/fn/object/get-own-property-names.js","../node_modules/babel-runtime/node_modules/core-js/library/fn/object/keys.js","../node_modules/babel-runtime/node_modules/core-js/library/fn/object/set-prototype-of.js","../node_modules/babel-runtime/node_modules/core-js/library/fn/symbol/index.js","../node_modules/babel-runtime/node_modules/core-js/library/fn/symbol/iterator.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_a-function.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_add-to-unscopables.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_an-object.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_array-includes.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_classof.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_cof.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_core.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_ctx.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_defined.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_descriptors.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_dom-create.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_enum-bug-keys.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_enum-keys.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_export.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_fails.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_global.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_has.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_hide.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_html.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_ie8-dom-define.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_iobject.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_is-array.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_is-integer.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_is-object.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_iter-create.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_iter-define.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_iter-step.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_iterators.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_library.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_meta.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_object-assign.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_object-create.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_object-dp.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_object-dps.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_object-gopd.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_object-gopn-ext.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_object-gopn.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_object-gops.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_object-gpo.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_object-keys-internal.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_object-keys.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_object-pie.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_object-sap.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_property-desc.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_redefine.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_set-proto.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_set-to-string-tag.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_shared-key.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_shared.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_string-at.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_to-absolute-index.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_to-integer.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_to-iobject.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_to-length.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_to-object.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_to-primitive.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_uid.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_wks-define.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_wks-ext.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/_wks.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/core.get-iterator-method.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/core.get-iterator.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/core.is-iterable.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/es6.array.iterator.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/es6.number.is-safe-integer.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/es6.object.assign.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/es6.object.create.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/es6.object.get-own-property-names.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/es6.object.keys.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/es6.object.set-prototype-of.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/es6.string.iterator.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/es6.symbol.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/es7.symbol.async-iterator.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/es7.symbol.observable.js","../node_modules/babel-runtime/node_modules/core-js/library/modules/web.dom.iterable.js","../node_modules/base16/lib/apathy.js","../node_modules/base16/lib/ashes.js","../node_modules/base16/lib/atelier-dune.js","../node_modules/base16/lib/atelier-forest.js","../node_modules/base16/lib/atelier-heath.js","../node_modules/base16/lib/atelier-lakeside.js","../node_modules/base16/lib/atelier-seaside.js","../node_modules/base16/lib/bespin.js","../node_modules/base16/lib/brewer.js","../node_modules/base16/lib/bright.js","../node_modules/base16/lib/chalk.js","../node_modules/base16/lib/codeschool.js","../node_modules/base16/lib/colors.js","../node_modules/base16/lib/default.js","../node_modules/base16/lib/eighties.js","../node_modules/base16/lib/embers.js","../node_modules/base16/lib/flat.js","../node_modules/base16/lib/google.js","../node_modules/base16/lib/grayscale.js","../node_modules/base16/lib/greenscreen.js","../node_modules/base16/lib/harmonic.js","../node_modules/base16/lib/hopscotch.js","../node_modules/base16/lib/index.js","../node_modules/base16/lib/isotope.js","../node_modules/base16/lib/marrakesh.js","../node_modules/base16/lib/mocha.js","../node_modules/base16/lib/monokai.js","../node_modules/base16/lib/ocean.js","../node_modules/base16/lib/paraiso.js","../node_modules/base16/lib/pop.js","../node_modules/base16/lib/railscasts.js","../node_modules/base16/lib/shapeshifter.js","../node_modules/base16/lib/solarized.js","../node_modules/base16/lib/summerfruit.js","../node_modules/base16/lib/threezerotwofour.js","../node_modules/base16/lib/tomorrow.js","../node_modules/base16/lib/tube.js","../node_modules/base16/lib/twilight.js","../node_modules/zrender/lib/svg/core.js","../node_modules/zrender/lib/core/arrayDiff.js","../node_modules/zrender/lib/svg/graphic.js","../node_modules/zrender/lib/svg/helper/Definable.js","../node_modules/zrender/lib/svg/helper/GradientManager.js","../node_modules/zrender/lib/svg/helper/PatternManager.js","../node_modules/zrender/lib/svg/helper/ClippathManager.js","../node_modules/zrender/lib/svg/helper/ShadowManager.js","../node_modules/zrender/lib/svg/Painter.js","../node_modules/echarts/lib/chart/pie/pieLayout.js","../node_modules/echarts/lib/processor/dataFilter.js","../node_modules/echarts/lib/chart/pie/labelLayout.js","../node_modules/echarts/lib/chart/helper/pieHelper.js","../node_modules/echarts/lib/chart/pie/PieView.js","../node_modules/echarts/lib/chart/helper/createSeriesDataSimply.js","../node_modules/echarts/lib/visual/LegendVisualProvider.js","../node_modules/echarts/lib/chart/pie/PieSeries.js","../node_modules/echarts/lib/chart/radar/radarLayout.js","../node_modules/echarts/lib/chart/radar/backwardCompat.js","../node_modules/echarts/lib/chart/radar/RadarView.js","../node_modules/echarts/lib/chart/radar/RadarSeries.js","../node_modules/echarts/lib/coord/radar/RadarModel.js","../node_modules/echarts/lib/component/radar/RadarView.js","../node_modules/echarts/lib/coord/radar/IndicatorAxis.js","../node_modules/echarts/lib/coord/radar/Radar.js","../node_modules/echarts/lib/component/radar/install.js","../node_modules/echarts/lib/component/helper/interactionMutex.js","../node_modules/echarts/lib/component/helper/RoamController.js","../node_modules/echarts/lib/component/helper/roamHelper.js","../node_modules/echarts/lib/component/helper/cursorHelper.js","../node_modules/echarts/lib/component/helper/MapDraw.js","../node_modules/echarts/lib/chart/map/MapView.js","../node_modules/echarts/lib/chart/map/MapSeries.js","../node_modules/echarts/lib/chart/map/mapDataStatistic.js","../node_modules/echarts/lib/chart/map/mapSymbolLayout.js","../node_modules/echarts/lib/coord/View.js","../node_modules/echarts/lib/coord/geo/Geo.js","../node_modules/echarts/lib/coord/geo/geoCreator.js","../node_modules/echarts/lib/coord/geo/GeoModel.js","../node_modules/echarts/lib/action/roamHelper.js","../node_modules/echarts/lib/component/geo/GeoView.js","../node_modules/echarts/lib/component/geo/install.js","../node_modules/echarts/lib/chart/tree/layoutHelper.js","../node_modules/echarts/lib/chart/tree/TreeView.js","../node_modules/echarts/lib/data/helper/linkSeriesData.js","../node_modules/echarts/lib/data/Tree.js","../node_modules/echarts/lib/chart/helper/treeHelper.js","../node_modules/echarts/lib/chart/tree/TreeSeries.js","../node_modules/echarts/lib/chart/tree/traversalHelper.js","../node_modules/echarts/lib/chart/tree/treeLayout.js","../node_modules/echarts/lib/chart/tree/treeVisual.js","../node_modules/echarts/lib/chart/treemap/treemapAction.js","../node_modules/echarts/lib/chart/helper/enableAriaDecalForTree.js","../node_modules/echarts/lib/chart/treemap/TreemapSeries.js","../node_modules/echarts/lib/chart/treemap/Breadcrumb.js","../node_modules/echarts/lib/util/animation.js","../node_modules/echarts/lib/chart/treemap/TreemapView.js","../node_modules/echarts/lib/visual/VisualMapping.js","../node_modules/echarts/lib/chart/treemap/treemapVisual.js","../node_modules/echarts/lib/chart/treemap/treemapLayout.js","../node_modules/echarts/lib/chart/graph/categoryFilter.js","../node_modules/echarts/lib/chart/graph/categoryVisual.js","../node_modules/echarts/lib/chart/graph/edgeVisual.js","../node_modules/echarts/lib/chart/helper/multipleGraphEdgeHelper.js","../node_modules/echarts/lib/chart/graph/simpleLayoutHelper.js","../node_modules/echarts/lib/chart/graph/simpleLayout.js","../node_modules/echarts/lib/chart/graph/graphHelper.js","../node_modules/echarts/lib/chart/graph/circularLayoutHelper.js","../node_modules/echarts/lib/chart/graph/circularLayout.js","../node_modules/echarts/lib/chart/graph/forceHelper.js","../node_modules/echarts/lib/chart/graph/forceLayout.js","../node_modules/echarts/lib/chart/graph/createView.js","../node_modules/echarts/lib/chart/helper/LinePath.js","../node_modules/echarts/lib/chart/helper/Line.js","../node_modules/echarts/lib/chart/helper/LineDraw.js","../node_modules/echarts/lib/chart/graph/adjustEdge.js","../node_modules/echarts/lib/chart/graph/GraphView.js","../node_modules/echarts/lib/data/Graph.js","../node_modules/echarts/lib/chart/helper/createGraphFromNodeEdge.js","../node_modules/echarts/lib/chart/graph/GraphSeries.js","../node_modules/echarts/lib/chart/graph/install.js","../node_modules/echarts/lib/chart/gauge/PointerPath.js","../node_modules/echarts/lib/chart/gauge/GaugeView.js","../node_modules/echarts/lib/chart/gauge/GaugeSeries.js","../node_modules/echarts/lib/chart/funnel/FunnelView.js","../node_modules/echarts/lib/chart/funnel/FunnelSeries.js","../node_modules/echarts/lib/chart/funnel/funnelLayout.js","../node_modules/echarts/lib/chart/parallel/ParallelView.js","../node_modules/echarts/lib/chart/parallel/ParallelSeries.js","../node_modules/echarts/lib/chart/parallel/parallelVisual.js","../node_modules/echarts/lib/coord/parallel/parallelPreprocessor.js","../node_modules/echarts/lib/component/parallel/ParallelView.js","../node_modules/echarts/lib/coord/parallel/ParallelModel.js","../node_modules/echarts/lib/coord/parallel/ParallelAxis.js","../node_modules/echarts/lib/component/helper/sliderMove.js","../node_modules/echarts/lib/coord/parallel/Parallel.js","../node_modules/echarts/lib/coord/parallel/parallelCreator.js","../node_modules/echarts/lib/coord/parallel/AxisModel.js","../node_modules/echarts/lib/component/helper/BrushController.js","../node_modules/echarts/lib/component/helper/brushHelper.js","../node_modules/echarts/lib/component/axis/ParallelAxisView.js","../node_modules/echarts/lib/component/axis/parallelAxisAction.js","../node_modules/echarts/lib/component/parallel/install.js","../node_modules/echarts/lib/chart/sankey/SankeyView.js","../node_modules/echarts/lib/chart/sankey/SankeySeries.js","../node_modules/echarts/lib/chart/sankey/sankeyLayout.js","../node_modules/echarts/lib/chart/sankey/sankeyVisual.js","../node_modules/echarts/lib/chart/helper/whiskerBoxCommon.js","../node_modules/echarts/lib/chart/boxplot/BoxplotSeries.js","../node_modules/echarts/lib/chart/boxplot/BoxplotView.js","../node_modules/echarts/lib/chart/boxplot/boxplotVisual.js","../node_modules/echarts/lib/chart/boxplot/boxplotLayout.js","../node_modules/echarts/lib/chart/boxplot/boxplotTransform.js","../node_modules/echarts/lib/chart/boxplot/prepareBoxplotData.js","../node_modules/echarts/lib/chart/candlestick/CandlestickView.js","../node_modules/echarts/lib/chart/candlestick/CandlestickSeries.js","../node_modules/echarts/lib/chart/candlestick/preprocessor.js","../node_modules/echarts/lib/chart/candlestick/candlestickVisual.js","../node_modules/echarts/lib/chart/candlestick/candlestickLayout.js","../node_modules/echarts/lib/chart/helper/EffectSymbol.js","../node_modules/echarts/lib/chart/effectScatter/EffectScatterView.js","../node_modules/echarts/lib/chart/effectScatter/EffectScatterSeries.js","../node_modules/echarts/lib/chart/helper/EffectLine.js","../node_modules/echarts/lib/chart/helper/Polyline.js","../node_modules/echarts/lib/chart/helper/EffectPolyline.js","../node_modules/echarts/lib/chart/helper/LargeLineDraw.js","../node_modules/echarts/lib/chart/lines/linesLayout.js","../node_modules/echarts/lib/chart/lines/LinesView.js","../node_modules/echarts/lib/chart/lines/LinesSeries.js","../node_modules/echarts/lib/chart/lines/linesVisual.js","../node_modules/echarts/lib/chart/heatmap/HeatmapLayer.js","../node_modules/echarts/lib/chart/heatmap/HeatmapView.js","../node_modules/echarts/lib/chart/heatmap/HeatmapSeries.js","../node_modules/echarts/lib/chart/bar/PictorialBarView.js","../node_modules/echarts/lib/chart/bar/PictorialBarSeries.js","../node_modules/echarts/lib/chart/themeRiver/ThemeRiverView.js","../node_modules/echarts/lib/chart/themeRiver/ThemeRiverSeries.js","../node_modules/echarts/lib/chart/themeRiver/themeRiverLayout.js","../node_modules/echarts/lib/chart/sunburst/SunburstPiece.js","../node_modules/echarts/lib/chart/sunburst/sunburstAction.js","../node_modules/echarts/lib/chart/sunburst/SunburstView.js","../node_modules/echarts/lib/chart/sunburst/SunburstSeries.js","../node_modules/echarts/lib/chart/sunburst/sunburstLayout.js","../node_modules/echarts/lib/chart/sunburst/sunburstVisual.js","../node_modules/echarts/lib/chart/custom/CustomSeries.js","../node_modules/echarts/lib/coord/cartesian/prepareCustom.js","../node_modules/echarts/lib/coord/geo/prepareCustom.js","../node_modules/echarts/lib/coord/single/prepareCustom.js","../node_modules/echarts/lib/coord/polar/prepareCustom.js","../node_modules/echarts/lib/util/styleCompat.js","../node_modules/echarts/lib/chart/custom/prepare.js","../node_modules/echarts/lib/chart/custom/CustomView.js","../node_modules/echarts/lib/coord/calendar/prepareCustom.js","../node_modules/echarts/lib/component/axisPointer/PolarAxisPointer.js","../node_modules/echarts/lib/coord/polar/PolarModel.js","../node_modules/echarts/lib/coord/polar/AxisModel.js","../node_modules/echarts/lib/coord/polar/RadiusAxis.js","../node_modules/echarts/lib/coord/polar/AngleAxis.js","../node_modules/echarts/lib/coord/polar/Polar.js","../node_modules/echarts/lib/coord/polar/polarCreator.js","../node_modules/echarts/lib/component/axis/AngleAxisView.js","../node_modules/echarts/lib/component/axis/RadiusAxisView.js","../node_modules/echarts/lib/layout/barPolar.js","../node_modules/echarts/lib/component/polar/install.js","../node_modules/echarts/lib/coord/single/singleAxisHelper.js","../node_modules/echarts/lib/component/axis/SingleAxisView.js","../node_modules/echarts/lib/coord/single/AxisModel.js","../node_modules/echarts/lib/coord/single/SingleAxis.js","../node_modules/echarts/lib/coord/single/Single.js","../node_modules/echarts/lib/coord/single/singleCreator.js","../node_modules/echarts/lib/component/axisPointer/SingleAxisPointer.js","../node_modules/echarts/lib/component/singleAxis/install.js","../node_modules/echarts/lib/coord/calendar/CalendarModel.js","../node_modules/echarts/lib/component/calendar/CalendarView.js","../node_modules/echarts/lib/coord/calendar/Calendar.js","../node_modules/echarts/lib/component/graphic/install.js","../node_modules/echarts/lib/component/dataZoom/helper.js","../node_modules/echarts/lib/component/dataZoom/DataZoomModel.js","../node_modules/echarts/lib/component/dataZoom/SelectZoomModel.js","../node_modules/echarts/lib/component/dataZoom/DataZoomView.js","../node_modules/echarts/lib/component/dataZoom/SelectZoomView.js","../node_modules/echarts/lib/component/dataZoom/AxisProxy.js","../node_modules/echarts/lib/component/dataZoom/dataZoomProcessor.js","../node_modules/echarts/lib/component/dataZoom/installCommon.js","../node_modules/echarts/lib/component/dataZoom/dataZoomAction.js","../node_modules/echarts/lib/component/dataZoom/installDataZoomSelect.js","../node_modules/echarts/lib/component/toolbox/featureManager.js","../node_modules/echarts/lib/component/toolbox/ToolboxModel.js","../node_modules/echarts/lib/component/helper/listComponent.js","../node_modules/echarts/lib/component/toolbox/ToolboxView.js","../node_modules/echarts/lib/component/toolbox/feature/SaveAsImage.js","../node_modules/echarts/lib/component/toolbox/feature/MagicType.js","../node_modules/echarts/lib/component/toolbox/feature/DataView.js","../node_modules/echarts/lib/component/dataZoom/history.js","../node_modules/echarts/lib/component/toolbox/feature/Restore.js","../node_modules/echarts/lib/component/helper/BrushTargetManager.js","../node_modules/echarts/lib/component/toolbox/feature/DataZoom.js","../node_modules/echarts/lib/component/brush/preprocessor.js","../node_modules/echarts/lib/visual/visualSolution.js","../node_modules/echarts/lib/component/brush/selector.js","../node_modules/echarts/lib/component/brush/visualEncoding.js","../node_modules/echarts/lib/component/brush/BrushView.js","../node_modules/echarts/lib/component/brush/BrushModel.js","../node_modules/echarts/lib/component/toolbox/feature/Brush.js","../node_modules/echarts/lib/component/timeline/TimelineModel.js","../node_modules/echarts/lib/component/timeline/SliderTimelineModel.js","../node_modules/echarts/lib/component/timeline/TimelineView.js","../node_modules/echarts/lib/component/timeline/TimelineAxis.js","../node_modules/echarts/lib/component/timeline/SliderTimelineView.js","../node_modules/echarts/lib/component/timeline/preprocessor.js","../node_modules/echarts/lib/component/marker/checkMarkerInSeries.js","../node_modules/echarts/lib/component/marker/MarkerModel.js","../node_modules/echarts/lib/component/marker/MarkPointModel.js","../node_modules/echarts/lib/component/marker/markerHelper.js","../node_modules/echarts/lib/component/marker/MarkerView.js","../node_modules/echarts/lib/component/marker/MarkPointView.js","../node_modules/echarts/lib/component/marker/MarkLineModel.js","../node_modules/echarts/lib/component/marker/MarkLineView.js","../node_modules/echarts/lib/component/marker/MarkAreaModel.js","../node_modules/echarts/lib/component/marker/MarkAreaView.js","../node_modules/echarts/lib/component/legend/LegendModel.js","../node_modules/echarts/lib/component/legend/LegendView.js","../node_modules/echarts/lib/component/legend/legendFilter.js","../node_modules/echarts/lib/component/legend/legendAction.js","../node_modules/echarts/lib/component/legend/installLegendPlain.js","../node_modules/echarts/lib/component/legend/ScrollableLegendModel.js","../node_modules/echarts/lib/component/legend/ScrollableLegendView.js","../node_modules/echarts/lib/component/legend/installLegendScroll.js","../node_modules/echarts/lib/component/legend/scrollableLegendAction.js","../node_modules/echarts/lib/component/dataZoom/InsideZoomModel.js","../node_modules/echarts/lib/component/dataZoom/roams.js","../node_modules/echarts/lib/component/dataZoom/InsideZoomView.js","../node_modules/echarts/lib/component/dataZoom/installDataZoomInside.js","../node_modules/echarts/lib/component/dataZoom/SliderZoomModel.js","../node_modules/echarts/lib/component/dataZoom/SliderZoomView.js","../node_modules/echarts/lib/component/dataZoom/installDataZoomSlider.js","../node_modules/echarts/lib/visual/visualDefault.js","../node_modules/echarts/lib/component/visualMap/VisualMapModel.js","../node_modules/echarts/lib/component/visualMap/ContinuousModel.js","../node_modules/echarts/lib/component/visualMap/VisualMapView.js","../node_modules/echarts/lib/component/visualMap/helper.js","../node_modules/echarts/lib/component/visualMap/ContinuousView.js","../node_modules/echarts/lib/component/visualMap/visualMapAction.js","../node_modules/echarts/lib/component/visualMap/visualEncoding.js","../node_modules/echarts/lib/component/visualMap/preprocessor.js","../node_modules/echarts/lib/component/visualMap/installCommon.js","../node_modules/echarts/lib/component/visualMap/installVisualMapContinuous.js","../node_modules/echarts/lib/component/visualMap/PiecewiseModel.js","../node_modules/echarts/lib/component/visualMap/PiecewiseView.js","../node_modules/echarts/lib/component/visualMap/installVisualMapPiecewise.js","../node_modules/echarts/lib/visual/aria.js","../node_modules/echarts/lib/component/aria/preprocessor.js","../node_modules/echarts/lib/util/conditionalExpression.js","../node_modules/echarts/lib/component/transform/filterTransform.js","../node_modules/echarts/lib/component/transform/sortTransform.js","../node_modules/zrender/lib/tool/convertPath.js","../node_modules/zrender/lib/tool/dividePath.js","../node_modules/zrender/lib/tool/morphPath.js","../node_modules/echarts/lib/animation/morphTransitionHelper.js","../node_modules/echarts/lib/animation/universalTransition.js","../node_modules/echarts/index.js","../node_modules/echarts/lib/renderer/installSVGRenderer.js","../node_modules/echarts/lib/chart/pie/install.js","../node_modules/echarts/lib/processor/negativeDataFilter.js","../node_modules/echarts/lib/chart/radar/install.js","../node_modules/echarts/lib/chart/map/install.js","../node_modules/echarts/lib/chart/tree/install.js","../node_modules/echarts/lib/chart/tree/treeAction.js","../node_modules/echarts/lib/chart/treemap/install.js","../node_modules/echarts/lib/chart/gauge/install.js","../node_modules/echarts/lib/chart/funnel/install.js","../node_modules/echarts/lib/chart/parallel/install.js","../node_modules/echarts/lib/chart/sankey/install.js","../node_modules/echarts/lib/chart/boxplot/install.js","../node_modules/echarts/lib/chart/candlestick/install.js","../node_modules/echarts/lib/chart/effectScatter/install.js","../node_modules/echarts/lib/chart/lines/install.js","../node_modules/echarts/lib/chart/heatmap/install.js","../node_modules/echarts/lib/chart/bar/installPictorialBar.js","../node_modules/echarts/lib/chart/themeRiver/install.js","../node_modules/echarts/lib/chart/sunburst/install.js","../node_modules/echarts/lib/chart/custom/install.js","../node_modules/echarts/lib/component/grid/install.js","../node_modules/echarts/lib/component/calendar/install.js","../node_modules/echarts/lib/component/toolbox/install.js","../node_modules/echarts/lib/component/brush/install.js","../node_modules/echarts/lib/component/timeline/install.js","../node_modules/echarts/lib/component/timeline/timelineAction.js","../node_modules/echarts/lib/component/marker/installMarkPoint.js","../node_modules/echarts/lib/component/marker/installMarkLine.js","../node_modules/echarts/lib/component/marker/installMarkArea.js","../node_modules/echarts/lib/component/legend/install.js","../node_modules/echarts/lib/component/dataZoom/install.js","../node_modules/echarts/lib/component/visualMap/install.js","../node_modules/echarts/lib/component/aria/install.js","../node_modules/echarts/lib/component/transform/install.js","../node_modules/echarts-for-react/esm/helper/pick.js","../node_modules/echarts-for-react/esm/helper/is-function.js","../node_modules/echarts-for-react/esm/index.js","../node_modules/echarts-for-react/esm/core.js","../node_modules/echarts-for-react/esm/helper/is-string.js","../node_modules/echarts/lib/chart/bar/BaseBarSeries.js","../node_modules/echarts/lib/chart/bar/BarSeries.js","../node_modules/echarts/lib/label/sectorLabel.js","../node_modules/echarts/lib/chart/bar/BarView.js","../node_modules/echarts/lib/chart/bar/install.js","../node_modules/echarts/lib/chart/helper/Symbol.js","../node_modules/echarts/lib/chart/helper/SymbolDraw.js","../node_modules/echarts/lib/chart/helper/createClipPathFromCoordSys.js","../node_modules/echarts/lib/chart/helper/labelHelper.js","../node_modules/echarts/lib/chart/line/LineSeries.js","../node_modules/echarts/lib/chart/line/helper.js","../node_modules/echarts/lib/chart/line/LineView.js","../node_modules/echarts/lib/chart/line/lineAnimationDiff.js","../node_modules/echarts/lib/chart/line/install.js","../node_modules/echarts/lib/chart/line/poly.js","../node_modules/echarts/lib/chart/scatter.js","../node_modules/echarts/lib/chart/scatter/ScatterSeries.js","../node_modules/echarts/lib/chart/helper/LargeSymbolDraw.js","../node_modules/echarts/lib/chart/scatter/ScatterView.js","../node_modules/echarts/lib/chart/scatter/install.js","../node_modules/echarts/lib/component/axis/AxisBuilder.js","../node_modules/echarts/lib/component/axis/AxisView.js","../node_modules/echarts/lib/component/axis/axisSplitHelper.js","../node_modules/echarts/lib/component/axisPointer/BaseAxisPointer.js","../node_modules/echarts/lib/component/axisPointer/findPointFromSeries.js","../node_modules/echarts/lib/component/axisPointer/globalListener.js","../node_modules/echarts/lib/component/axisPointer/CartesianAxisPointer.js","../node_modules/echarts/lib/component/axisPointer/AxisPointerModel.js","../node_modules/echarts/lib/component/axisPointer/AxisPointerView.js","../node_modules/echarts/lib/component/axisPointer/axisTrigger.js","../node_modules/echarts/lib/component/axisPointer/install.js","../node_modules/echarts/lib/component/axisPointer/modelHelper.js","../node_modules/echarts/lib/component/axisPointer/viewHelper.js","../node_modules/echarts/lib/coord/cartesian/GridModel.js","../node_modules/echarts/lib/coord/cartesian/AxisModel.js","../node_modules/echarts/lib/coord/cartesian/Cartesian.js","../node_modules/echarts/lib/coord/cartesian/Cartesian2D.js","../node_modules/echarts/lib/coord/cartesian/Axis2D.js","../node_modules/echarts/lib/coord/cartesian/Grid.js","../node_modules/echarts/lib/component/axis/CartesianAxisView.js","../node_modules/echarts/lib/component/grid/installSimple.js","../node_modules/echarts/lib/component/title.js","../node_modules/echarts/lib/component/title/install.js","../node_modules/echarts/lib/component/tooltip.js","../node_modules/echarts/lib/component/tooltip/TooltipModel.js","../node_modules/echarts/lib/component/tooltip/helper.js","../node_modules/echarts/lib/component/tooltip/TooltipHTMLContent.js","../node_modules/echarts/lib/component/tooltip/TooltipRichContent.js","../node_modules/echarts/lib/component/tooltip/TooltipView.js","../node_modules/echarts/lib/component/tooltip/install.js","../node_modules/echarts/lib/coord/CoordinateSystem.js","../node_modules/echarts/lib/coord/axisDefault.js","../node_modules/echarts/lib/coord/axisCommonTypes.js","../node_modules/echarts/lib/coord/axisModelCreator.js","../node_modules/echarts/lib/coord/cartesian/cartesianAxisHelper.js","../node_modules/echarts/lib/layout/points.js","../node_modules/echarts/lib/processor/dataSample.js","../node_modules/echarts/lib/util/shape/sausage.js","../node_modules/echarts/lib/util/vendor.js","../node_modules/fast-deep-equal/index.js","../node_modules/lodash.curry/index.js","../node_modules/lodash.flow/index.js","../node_modules/office-ui-fabric-react/lib/components/Toggle/Toggle.base.js","../node_modules/office-ui-fabric-react/lib/components/Toggle/Toggle.js","../node_modules/office-ui-fabric-react/lib/components/Toggle/Toggle.styles.js","../node_modules/pure-color/convert/hsl2rgb.js","../node_modules/pure-color/convert/rgb2hex.js","../node_modules/pure-color/parse/extractComponents.js","../node_modules/pure-color/parse/hex.js","../node_modules/pure-color/parse/hsl.js","../node_modules/pure-color/parse/index.js","../node_modules/pure-color/parse/rgb.js","../node_modules/pure-color/util/clamp.js","../node_modules/react-base16-styling/lib/colorConverters.js","../node_modules/react-base16-styling/lib/index.js","../node_modules/react-json-tree/lib/ItemRange.js","../node_modules/react-json-tree/lib/JSONArrayNode.js","../node_modules/react-json-tree/lib/JSONArrow.js","../node_modules/react-json-tree/lib/JSONIterableNode.js","../node_modules/react-json-tree/lib/JSONNestedNode.js","../node_modules/react-json-tree/lib/JSONNode.js","../node_modules/react-json-tree/lib/JSONObjectNode.js","../node_modules/react-json-tree/lib/JSONValueNode.js","../node_modules/react-json-tree/lib/createStylingFromTheme.js","../node_modules/react-json-tree/lib/getCollectionEntries.js","../node_modules/react-json-tree/lib/index.js","../node_modules/react-json-tree/lib/objType.js","../node_modules/react-json-tree/lib/themes/solarized.js","../node_modules/size-sensor/lib/constant.js","../node_modules/size-sensor/lib/debounce.js","../node_modules/size-sensor/lib/id.js","../node_modules/size-sensor/lib/index.js","../node_modules/size-sensor/lib/sensorPool.js","../node_modules/size-sensor/lib/sensors/index.js","../node_modules/size-sensor/lib/sensors/object.js","../node_modules/size-sensor/lib/sensors/resizeObserver.js"],"sourcesContent":["module.exports = {\n  \"default\": require(\"core-js/library/fn/get-iterator\"),\n  __esModule: true\n};","module.exports = {\n  \"default\": require(\"core-js/library/fn/is-iterable\"),\n  __esModule: true\n};","module.exports = {\n  \"default\": require(\"core-js/library/fn/number/is-safe-integer\"),\n  __esModule: true\n};","module.exports = {\n  \"default\": require(\"core-js/library/fn/object/assign\"),\n  __esModule: true\n};","module.exports = {\n  \"default\": require(\"core-js/library/fn/object/create\"),\n  __esModule: true\n};","module.exports = {\n  \"default\": require(\"core-js/library/fn/object/get-own-property-names\"),\n  __esModule: true\n};","module.exports = {\n  \"default\": require(\"core-js/library/fn/object/keys\"),\n  __esModule: true\n};","module.exports = {\n  \"default\": require(\"core-js/library/fn/object/set-prototype-of\"),\n  __esModule: true\n};","module.exports = {\n  \"default\": require(\"core-js/library/fn/symbol\"),\n  __esModule: true\n};","module.exports = {\n  \"default\": require(\"core-js/library/fn/symbol/iterator\"),\n  __esModule: true\n};","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};","\"use strict\";\n\nexports.__esModule = true;\n\nvar _assign = require(\"../core-js/object/assign\");\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nexports.default = _assign2.default || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};","\"use strict\";\n\nexports.__esModule = true;\n\nvar _setPrototypeOf = require(\"../core-js/object/set-prototype-of\");\n\nvar _setPrototypeOf2 = _interopRequireDefault(_setPrototypeOf);\n\nvar _create = require(\"../core-js/object/create\");\n\nvar _create2 = _interopRequireDefault(_create);\n\nvar _typeof2 = require(\"../helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nexports.default = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(superClass)));\n  }\n\n  subClass.prototype = (0, _create2.default)(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf2.default ? (0, _setPrototypeOf2.default)(subClass, superClass) : subClass.__proto__ = superClass;\n};","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n};","\"use strict\";\n\nexports.__esModule = true;\n\nvar _typeof2 = require(\"../helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nexports.default = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && ((typeof call === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(call)) === \"object\" || typeof call === \"function\") ? call : self;\n};","\"use strict\";\n\nexports.__esModule = true;\n\nvar _isIterable2 = require(\"../core-js/is-iterable\");\n\nvar _isIterable3 = _interopRequireDefault(_isIterable2);\n\nvar _getIterator2 = require(\"../core-js/get-iterator\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nexports.default = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = (0, _getIterator3.default)(arr), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if ((0, _isIterable3.default)(Object(arr))) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();","\"use strict\";\n\nexports.__esModule = true;\n\nvar _iterator = require(\"../core-js/symbol/iterator\");\n\nvar _iterator2 = _interopRequireDefault(_iterator);\n\nvar _symbol = require(\"../core-js/symbol\");\n\nvar _symbol2 = _interopRequireDefault(_symbol);\n\nvar _typeof = typeof _symbol2.default === \"function\" && typeof _iterator2.default === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj;\n};\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nexports.default = typeof _symbol2.default === \"function\" && _typeof(_iterator2.default) === \"symbol\" ? function (obj) {\n  return typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n} : function (obj) {\n  return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n};","require('../modules/web.dom.iterable');\n\nrequire('../modules/es6.string.iterator');\n\nmodule.exports = require('../modules/core.get-iterator');","require('../modules/web.dom.iterable');\n\nrequire('../modules/es6.string.iterator');\n\nmodule.exports = require('../modules/core.is-iterable');","require('../../modules/es6.number.is-safe-integer');\n\nmodule.exports = require('../../modules/_core').Number.isSafeInteger;","require('../../modules/es6.object.assign');\n\nmodule.exports = require('../../modules/_core').Object.assign;","require('../../modules/es6.object.create');\n\nvar $Object = require('../../modules/_core').Object;\n\nmodule.exports = function create(P, D) {\n  return $Object.create(P, D);\n};","require('../../modules/es6.object.get-own-property-names');\n\nvar $Object = require('../../modules/_core').Object;\n\nmodule.exports = function getOwnPropertyNames(it) {\n  return $Object.getOwnPropertyNames(it);\n};","require('../../modules/es6.object.keys');\n\nmodule.exports = require('../../modules/_core').Object.keys;","require('../../modules/es6.object.set-prototype-of');\n\nmodule.exports = require('../../modules/_core').Object.setPrototypeOf;","require('../../modules/es6.symbol');\n\nrequire('../../modules/es6.object.to-string');\n\nrequire('../../modules/es7.symbol.async-iterator');\n\nrequire('../../modules/es7.symbol.observable');\n\nmodule.exports = require('../../modules/_core').Symbol;","require('../../modules/es6.string.iterator');\n\nrequire('../../modules/web.dom.iterable');\n\nmodule.exports = require('../../modules/_wks-ext').f('iterator');","module.exports = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};","module.exports = function () {\n  /* empty */\n};","var isObject = require('./_is-object');\n\nmodule.exports = function (it) {\n  if (!isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject');\n\nvar toLength = require('./_to-length');\n\nvar toAbsoluteIndex = require('./_to-absolute-index');\n\nmodule.exports = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value; // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++]; // eslint-disable-next-line no-self-compare\n\n      if (value != value) return true; // Array#indexOf ignores holes, Array#includes - not\n    } else for (; length > index; index++) {\n      if (IS_INCLUDES || index in O) {\n        if (O[index] === el) return IS_INCLUDES || index || 0;\n      }\n    }\n    return !IS_INCLUDES && -1;\n  };\n};","// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = require('./_cof');\n\nvar TAG = require('./_wks')('toStringTag'); // ES3 wrong here\n\n\nvar ARG = cof(function () {\n  return arguments;\n}()) == 'Arguments'; // fallback for IE11 Script Access Denied error\n\nvar tryGet = function tryGet(it, key) {\n  try {\n    return it[key];\n  } catch (e) {\n    /* empty */\n  }\n};\n\nmodule.exports = function (it) {\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null' // @@toStringTag case\n  : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T // builtinTag case\n  : ARG ? cof(O) // ES3 arguments fallback\n  : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};","var core = module.exports = {\n  version: '2.6.12'\n};\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef","// optional / simple context binding\nvar aFunction = require('./_a-function');\n\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n\n  switch (length) {\n    case 1:\n      return function (a) {\n        return fn.call(that, a);\n      };\n\n    case 2:\n      return function (a, b) {\n        return fn.call(that, a, b);\n      };\n\n    case 3:\n      return function (a, b, c) {\n        return fn.call(that, a, b, c);\n      };\n  }\n\n  return function\n    /* ...args */\n  () {\n    return fn.apply(that, arguments);\n  };\n};","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function () {\n  return Object.defineProperty({}, 'a', {\n    get: function get() {\n      return 7;\n    }\n  }).a != 7;\n});","var isObject = require('./_is-object');\n\nvar document = require('./_global').document; // typeof document.createElement is 'object' in old IE\n\n\nvar is = isObject(document) && isObject(document.createElement);\n\nmodule.exports = function (it) {\n  return is ? document.createElement(it) : {};\n};","// IE 8- don't enum bug keys\nmodule.exports = 'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'.split(',');","// all enumerable object keys, includes symbols\nvar getKeys = require('./_object-keys');\n\nvar gOPS = require('./_object-gops');\n\nvar pIE = require('./_object-pie');\n\nmodule.exports = function (it) {\n  var result = getKeys(it);\n  var getSymbols = gOPS.f;\n\n  if (getSymbols) {\n    var symbols = getSymbols(it);\n    var isEnum = pIE.f;\n    var i = 0;\n    var key;\n\n    while (symbols.length > i) {\n      if (isEnum.call(it, key = symbols[i++])) result.push(key);\n    }\n  }\n\n  return result;\n};","var global = require('./_global');\n\nvar core = require('./_core');\n\nvar ctx = require('./_ctx');\n\nvar hide = require('./_hide');\n\nvar has = require('./_has');\n\nvar PROTOTYPE = 'prototype';\n\nvar $export = function $export(type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var IS_WRAP = type & $export.W;\n  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});\n  var expProto = exports[PROTOTYPE];\n  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE];\n  var key, own, out;\n  if (IS_GLOBAL) source = name;\n\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if (own && has(exports, key)) continue; // export native or passed\n\n    out = own ? target[key] : source[key]; // prevent global pollution for namespaces\n\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key] // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global) // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? function (C) {\n      var F = function F(a, b, c) {\n        if (this instanceof C) {\n          switch (arguments.length) {\n            case 0:\n              return new C();\n\n            case 1:\n              return new C(a);\n\n            case 2:\n              return new C(a, b);\n          }\n\n          return new C(a, b, c);\n        }\n\n        return C.apply(this, arguments);\n      };\n\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F; // make static versions for prototype methods\n    }(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out; // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n\n    if (IS_PROTO) {\n      (exports.virtual || (exports.virtual = {}))[key] = out; // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n\n      if (type & $export.R && expProto && !expProto[key]) hide(expProto, key, out);\n    }\n  }\n}; // type bitmap\n\n\n$export.F = 1; // forced\n\n$export.G = 2; // global\n\n$export.S = 4; // static\n\n$export.P = 8; // proto\n\n$export.B = 16; // bind\n\n$export.W = 32; // wrap\n\n$export.U = 64; // safe\n\n$export.R = 128; // real proto method for `library`\n\nmodule.exports = $export;","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math ? window : typeof self != 'undefined' && self.Math == Math ? self // eslint-disable-next-line no-new-func\n: Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef","var hasOwnProperty = {}.hasOwnProperty;\n\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};","var dP = require('./_object-dp');\n\nvar createDesc = require('./_property-desc');\n\nmodule.exports = require('./_descriptors') ? function (object, key, value) {\n  return dP.f(object, key, createDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};","var document = require('./_global').document;\n\nmodule.exports = document && document.documentElement;","module.exports = !require('./_descriptors') && !require('./_fails')(function () {\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', {\n    get: function get() {\n      return 7;\n    }\n  }).a != 7;\n});","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof'); // eslint-disable-next-line no-prototype-builtins\n\n\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};","// 7.2.2 IsArray(argument)\nvar cof = require('./_cof');\n\nmodule.exports = Array.isArray || function isArray(arg) {\n  return cof(arg) == 'Array';\n};","// 20.1.2.3 Number.isInteger(number)\nvar isObject = require('./_is-object');\n\nvar floor = Math.floor;\n\nmodule.exports = function isInteger(it) {\n  return !isObject(it) && isFinite(it) && floor(it) === it;\n};","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};","'use strict';\n\nvar create = require('./_object-create');\n\nvar descriptor = require('./_property-desc');\n\nvar setToStringTag = require('./_set-to-string-tag');\n\nvar IteratorPrototype = {}; // 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\n\nrequire('./_hide')(IteratorPrototype, require('./_wks')('iterator'), function () {\n  return this;\n});\n\nmodule.exports = function (Constructor, NAME, next) {\n  Constructor.prototype = create(IteratorPrototype, {\n    next: descriptor(1, next)\n  });\n  setToStringTag(Constructor, NAME + ' Iterator');\n};","'use strict';\n\nvar LIBRARY = require('./_library');\n\nvar $export = require('./_export');\n\nvar redefine = require('./_redefine');\n\nvar hide = require('./_hide');\n\nvar Iterators = require('./_iterators');\n\nvar $iterCreate = require('./_iter-create');\n\nvar setToStringTag = require('./_set-to-string-tag');\n\nvar getPrototypeOf = require('./_object-gpo');\n\nvar ITERATOR = require('./_wks')('iterator');\n\nvar BUGGY = !([].keys && 'next' in [].keys()); // Safari has buggy iterators w/o `next`\n\nvar FF_ITERATOR = '@@iterator';\nvar KEYS = 'keys';\nvar VALUES = 'values';\n\nvar returnThis = function returnThis() {\n  return this;\n};\n\nmodule.exports = function (Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED) {\n  $iterCreate(Constructor, NAME, next);\n\n  var getMethod = function getMethod(kind) {\n    if (!BUGGY && kind in proto) return proto[kind];\n\n    switch (kind) {\n      case KEYS:\n        return function keys() {\n          return new Constructor(this, kind);\n        };\n\n      case VALUES:\n        return function values() {\n          return new Constructor(this, kind);\n        };\n    }\n\n    return function entries() {\n      return new Constructor(this, kind);\n    };\n  };\n\n  var TAG = NAME + ' Iterator';\n  var DEF_VALUES = DEFAULT == VALUES;\n  var VALUES_BUG = false;\n  var proto = Base.prototype;\n  var $native = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT];\n  var $default = $native || getMethod(DEFAULT);\n  var $entries = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined;\n  var $anyNative = NAME == 'Array' ? proto.entries || $native : $native;\n  var methods, key, IteratorPrototype; // Fix native\n\n  if ($anyNative) {\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base()));\n\n    if (IteratorPrototype !== Object.prototype && IteratorPrototype.next) {\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true); // fix for some old engines\n\n      if (!LIBRARY && typeof IteratorPrototype[ITERATOR] != 'function') hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  } // fix Array#{values, @@iterator}.name in V8 / FF\n\n\n  if (DEF_VALUES && $native && $native.name !== VALUES) {\n    VALUES_BUG = true;\n\n    $default = function values() {\n      return $native.call(this);\n    };\n  } // Define iterator\n\n\n  if ((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])) {\n    hide(proto, ITERATOR, $default);\n  } // Plug for library\n\n\n  Iterators[NAME] = $default;\n  Iterators[TAG] = returnThis;\n\n  if (DEFAULT) {\n    methods = {\n      values: DEF_VALUES ? $default : getMethod(VALUES),\n      keys: IS_SET ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if (FORCED) for (key in methods) {\n      if (!(key in proto)) redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n\n  return methods;\n};","module.exports = function (done, value) {\n  return {\n    value: value,\n    done: !!done\n  };\n};","module.exports = {};","module.exports = true;","var META = require('./_uid')('meta');\n\nvar isObject = require('./_is-object');\n\nvar has = require('./_has');\n\nvar setDesc = require('./_object-dp').f;\n\nvar id = 0;\n\nvar isExtensible = Object.isExtensible || function () {\n  return true;\n};\n\nvar FREEZE = !require('./_fails')(function () {\n  return isExtensible(Object.preventExtensions({}));\n});\n\nvar setMeta = function setMeta(it) {\n  setDesc(it, META, {\n    value: {\n      i: 'O' + ++id,\n      // object ID\n      w: {} // weak collections IDs\n\n    }\n  });\n};\n\nvar fastKey = function fastKey(it, create) {\n  // return primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F'; // not necessary to add metadata\n\n    if (!create) return 'E'; // add missing metadata\n\n    setMeta(it); // return object ID\n  }\n\n  return it[META].i;\n};\n\nvar getWeak = function getWeak(it, create) {\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true; // not necessary to add metadata\n\n    if (!create) return false; // add missing metadata\n\n    setMeta(it); // return hash weak collections IDs\n  }\n\n  return it[META].w;\n}; // add metadata on freeze-family methods calling\n\n\nvar onFreeze = function onFreeze(it) {\n  if (FREEZE && meta.NEED && isExtensible(it) && !has(it, META)) setMeta(it);\n  return it;\n};\n\nvar meta = module.exports = {\n  KEY: META,\n  NEED: false,\n  fastKey: fastKey,\n  getWeak: getWeak,\n  onFreeze: onFreeze\n};","'use strict'; // 19.1.2.1 Object.assign(target, source, ...)\n\nvar DESCRIPTORS = require('./_descriptors');\n\nvar getKeys = require('./_object-keys');\n\nvar gOPS = require('./_object-gops');\n\nvar pIE = require('./_object-pie');\n\nvar toObject = require('./_to-object');\n\nvar IObject = require('./_iobject');\n\nvar $assign = Object.assign; // should work with symbols and should have deterministic property order (V8 bug)\n\nmodule.exports = !$assign || require('./_fails')(function () {\n  var A = {};\n  var B = {}; // eslint-disable-next-line no-undef\n\n  var S = Symbol();\n  var K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function (k) {\n    B[k] = k;\n  });\n  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;\n}) ? function assign(target, source) {\n  // eslint-disable-line no-unused-vars\n  var T = toObject(target);\n  var aLen = arguments.length;\n  var index = 1;\n  var getSymbols = gOPS.f;\n  var isEnum = pIE.f;\n\n  while (aLen > index) {\n    var S = IObject(arguments[index++]);\n    var keys = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n\n    while (length > j) {\n      key = keys[j++];\n      if (!DESCRIPTORS || isEnum.call(S, key)) T[key] = S[key];\n    }\n  }\n\n  return T;\n} : $assign;","// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject = require('./_an-object');\n\nvar dPs = require('./_object-dps');\n\nvar enumBugKeys = require('./_enum-bug-keys');\n\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\n\nvar Empty = function Empty() {\n  /* empty */\n};\n\nvar PROTOTYPE = 'prototype'; // Create object with fake `null` prototype: use iframe Object with cleared prototype\n\nvar _createDict = function createDict() {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = require('./_dom-create')('iframe');\n\n  var i = enumBugKeys.length;\n  var lt = '<';\n  var gt = '>';\n  var iframeDocument;\n  iframe.style.display = 'none';\n\n  require('./_html').appendChild(iframe);\n\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  _createDict = iframeDocument.F;\n\n  while (i--) {\n    delete _createDict[PROTOTYPE][enumBugKeys[i]];\n  }\n\n  return _createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n\n  if (O !== null) {\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty();\n    Empty[PROTOTYPE] = null; // add \"__proto__\" for Object.getPrototypeOf polyfill\n\n    result[IE_PROTO] = O;\n  } else result = _createDict();\n\n  return Properties === undefined ? result : dPs(result, Properties);\n};","var anObject = require('./_an-object');\n\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\n\nvar toPrimitive = require('./_to-primitive');\n\nvar dP = Object.defineProperty;\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return dP(O, P, Attributes);\n  } catch (e) {\n    /* empty */\n  }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};","var dP = require('./_object-dp');\n\nvar anObject = require('./_an-object');\n\nvar getKeys = require('./_object-keys');\n\nmodule.exports = require('./_descriptors') ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = getKeys(Properties);\n  var length = keys.length;\n  var i = 0;\n  var P;\n\n  while (length > i) {\n    dP.f(O, P = keys[i++], Properties[P]);\n  }\n\n  return O;\n};","var pIE = require('./_object-pie');\n\nvar createDesc = require('./_property-desc');\n\nvar toIObject = require('./_to-iobject');\n\nvar toPrimitive = require('./_to-primitive');\n\nvar has = require('./_has');\n\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\n\nvar gOPD = Object.getOwnPropertyDescriptor;\nexports.f = require('./_descriptors') ? gOPD : function getOwnPropertyDescriptor(O, P) {\n  O = toIObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return gOPD(O, P);\n  } catch (e) {\n    /* empty */\n  }\n  if (has(O, P)) return createDesc(!pIE.f.call(O, P), O[P]);\n};","// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = require('./_to-iobject');\n\nvar gOPN = require('./_object-gopn').f;\n\nvar toString = {}.toString;\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function getWindowNames(it) {\n  try {\n    return gOPN(it);\n  } catch (e) {\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.f = function getOwnPropertyNames(it) {\n  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));\n};","// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\nvar $keys = require('./_object-keys-internal');\n\nvar hiddenKeys = require('./_enum-bug-keys').concat('length', 'prototype');\n\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return $keys(O, hiddenKeys);\n};","exports.f = Object.getOwnPropertySymbols;","// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\nvar has = require('./_has');\n\nvar toObject = require('./_to-object');\n\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\n\nvar ObjectProto = Object.prototype;\n\nmodule.exports = Object.getPrototypeOf || function (O) {\n  O = toObject(O);\n  if (has(O, IE_PROTO)) return O[IE_PROTO];\n\n  if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n    return O.constructor.prototype;\n  }\n\n  return O instanceof Object ? ObjectProto : null;\n};","var has = require('./_has');\n\nvar toIObject = require('./_to-iobject');\n\nvar arrayIndexOf = require('./_array-includes')(false);\n\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\n\nmodule.exports = function (object, names) {\n  var O = toIObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n\n  for (key in O) {\n    if (key != IE_PROTO) has(O, key) && result.push(key);\n  } // Don't enum bug & hidden keys\n\n\n  while (names.length > i) {\n    if (has(O, key = names[i++])) {\n      ~arrayIndexOf(result, key) || result.push(key);\n    }\n  }\n\n  return result;\n};","// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys = require('./_object-keys-internal');\n\nvar enumBugKeys = require('./_enum-bug-keys');\n\nmodule.exports = Object.keys || function keys(O) {\n  return $keys(O, enumBugKeys);\n};","exports.f = {}.propertyIsEnumerable;","// most Object methods by ES6 should accept primitives\nvar $export = require('./_export');\n\nvar core = require('./_core');\n\nvar fails = require('./_fails');\n\nmodule.exports = function (KEY, exec) {\n  var fn = (core.Object || {})[KEY] || Object[KEY];\n  var exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function () {\n    fn(1);\n  }), 'Object', exp);\n};","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};","module.exports = require('./_hide');","// Works with __proto__ only. Old v8 can't work with null proto objects.\n\n/* eslint-disable no-proto */\nvar isObject = require('./_is-object');\n\nvar anObject = require('./_an-object');\n\nvar check = function check(O, proto) {\n  anObject(O);\n  if (!isObject(proto) && proto !== null) throw TypeError(proto + \": can't set as prototype!\");\n};\n\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n  function (test, buggy, set) {\n    try {\n      set = require('./_ctx')(Function.call, require('./_object-gopd').f(Object.prototype, '__proto__').set, 2);\n      set(test, []);\n      buggy = !(test instanceof Array);\n    } catch (e) {\n      buggy = true;\n    }\n\n    return function setPrototypeOf(O, proto) {\n      check(O, proto);\n      if (buggy) O.__proto__ = proto;else set(O, proto);\n      return O;\n    };\n  }({}, false) : undefined),\n  check: check\n};","var def = require('./_object-dp').f;\n\nvar has = require('./_has');\n\nvar TAG = require('./_wks')('toStringTag');\n\nmodule.exports = function (it, tag, stat) {\n  if (it && !has(it = stat ? it : it.prototype, TAG)) def(it, TAG, {\n    configurable: true,\n    value: tag\n  });\n};","var shared = require('./_shared')('keys');\n\nvar uid = require('./_uid');\n\nmodule.exports = function (key) {\n  return shared[key] || (shared[key] = uid(key));\n};","var core = require('./_core');\n\nvar global = require('./_global');\n\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || (global[SHARED] = {});\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: core.version,\n  mode: require('./_library') ? 'pure' : 'global',\n  copyright: ' 2020 Denis Pushkarev (zloirock.ru)'\n});","var toInteger = require('./_to-integer');\n\nvar defined = require('./_defined'); // true  -> String#at\n// false -> String#codePointAt\n\n\nmodule.exports = function (TO_STRING) {\n  return function (that, pos) {\n    var s = String(defined(that));\n    var i = toInteger(pos);\n    var l = s.length;\n    var a, b;\n    if (i < 0 || i >= l) return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff ? TO_STRING ? s.charAt(i) : a : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};","var toInteger = require('./_to-integer');\n\nvar max = Math.max;\nvar min = Math.min;\n\nmodule.exports = function (index, length) {\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};","// 7.1.4 ToInteger\nvar ceil = Math.ceil;\nvar floor = Math.floor;\n\nmodule.exports = function (it) {\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject');\n\nvar defined = require('./_defined');\n\nmodule.exports = function (it) {\n  return IObject(defined(it));\n};","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer');\n\nvar min = Math.min;\n\nmodule.exports = function (it) {\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\n\nmodule.exports = function (it) {\n  return Object(defined(it));\n};","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object'); // instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\n\n\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};","var id = 0;\nvar px = Math.random();\n\nmodule.exports = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};","var global = require('./_global');\n\nvar core = require('./_core');\n\nvar LIBRARY = require('./_library');\n\nvar wksExt = require('./_wks-ext');\n\nvar defineProperty = require('./_object-dp').f;\n\nmodule.exports = function (name) {\n  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});\n  if (name.charAt(0) != '_' && !(name in $Symbol)) defineProperty($Symbol, name, {\n    value: wksExt.f(name)\n  });\n};","exports.f = require('./_wks');","var store = require('./_shared')('wks');\n\nvar uid = require('./_uid');\n\nvar Symbol = require('./_global').Symbol;\n\nvar USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function (name) {\n  return store[name] || (store[name] = USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;","var classof = require('./_classof');\n\nvar ITERATOR = require('./_wks')('iterator');\n\nvar Iterators = require('./_iterators');\n\nmodule.exports = require('./_core').getIteratorMethod = function (it) {\n  if (it != undefined) return it[ITERATOR] || it['@@iterator'] || Iterators[classof(it)];\n};","var anObject = require('./_an-object');\n\nvar get = require('./core.get-iterator-method');\n\nmodule.exports = require('./_core').getIterator = function (it) {\n  var iterFn = get(it);\n  if (typeof iterFn != 'function') throw TypeError(it + ' is not iterable!');\n  return anObject(iterFn.call(it));\n};","var classof = require('./_classof');\n\nvar ITERATOR = require('./_wks')('iterator');\n\nvar Iterators = require('./_iterators');\n\nmodule.exports = require('./_core').isIterable = function (it) {\n  var O = Object(it);\n  return O[ITERATOR] !== undefined || '@@iterator' in O // eslint-disable-next-line no-prototype-builtins\n  || Iterators.hasOwnProperty(classof(O));\n};","'use strict';\n\nvar addToUnscopables = require('./_add-to-unscopables');\n\nvar step = require('./_iter-step');\n\nvar Iterators = require('./_iterators');\n\nvar toIObject = require('./_to-iobject'); // 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\n\n\nmodule.exports = require('./_iter-define')(Array, 'Array', function (iterated, kind) {\n  this._t = toIObject(iterated); // target\n\n  this._i = 0; // next index\n\n  this._k = kind; // kind\n  // 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var kind = this._k;\n  var index = this._i++;\n\n  if (!O || index >= O.length) {\n    this._t = undefined;\n    return step(1);\n  }\n\n  if (kind == 'keys') return step(0, index);\n  if (kind == 'values') return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values'); // argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\n\nIterators.Arguments = Iterators.Array;\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');","// 20.1.2.5 Number.isSafeInteger(number)\nvar $export = require('./_export');\n\nvar isInteger = require('./_is-integer');\n\nvar abs = Math.abs;\n$export($export.S, 'Number', {\n  isSafeInteger: function isSafeInteger(number) {\n    return isInteger(number) && abs(number) <= 0x1fffffffffffff;\n  }\n});","// 19.1.3.1 Object.assign(target, source)\nvar $export = require('./_export');\n\n$export($export.S + $export.F, 'Object', {\n  assign: require('./_object-assign')\n});","var $export = require('./_export'); // 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\n\n\n$export($export.S, 'Object', {\n  create: require('./_object-create')\n});","// 19.1.2.7 Object.getOwnPropertyNames(O)\nrequire('./_object-sap')('getOwnPropertyNames', function () {\n  return require('./_object-gopn-ext').f;\n});","// 19.1.2.14 Object.keys(O)\nvar toObject = require('./_to-object');\n\nvar $keys = require('./_object-keys');\n\nrequire('./_object-sap')('keys', function () {\n  return function keys(it) {\n    return $keys(toObject(it));\n  };\n});","// 19.1.3.19 Object.setPrototypeOf(O, proto)\nvar $export = require('./_export');\n\n$export($export.S, 'Object', {\n  setPrototypeOf: require('./_set-proto').set\n});","'use strict';\n\nvar $at = require('./_string-at')(true); // 21.1.3.27 String.prototype[@@iterator]()\n\n\nrequire('./_iter-define')(String, 'String', function (iterated) {\n  this._t = String(iterated); // target\n\n  this._i = 0; // next index\n  // 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var index = this._i;\n  var point;\n  if (index >= O.length) return {\n    value: undefined,\n    done: true\n  };\n  point = $at(O, index);\n  this._i += point.length;\n  return {\n    value: point,\n    done: false\n  };\n});","'use strict'; // ECMAScript 6 symbols shim\n\nvar global = require('./_global');\n\nvar has = require('./_has');\n\nvar DESCRIPTORS = require('./_descriptors');\n\nvar $export = require('./_export');\n\nvar redefine = require('./_redefine');\n\nvar META = require('./_meta').KEY;\n\nvar $fails = require('./_fails');\n\nvar shared = require('./_shared');\n\nvar setToStringTag = require('./_set-to-string-tag');\n\nvar uid = require('./_uid');\n\nvar wks = require('./_wks');\n\nvar wksExt = require('./_wks-ext');\n\nvar wksDefine = require('./_wks-define');\n\nvar enumKeys = require('./_enum-keys');\n\nvar isArray = require('./_is-array');\n\nvar anObject = require('./_an-object');\n\nvar isObject = require('./_is-object');\n\nvar toObject = require('./_to-object');\n\nvar toIObject = require('./_to-iobject');\n\nvar toPrimitive = require('./_to-primitive');\n\nvar createDesc = require('./_property-desc');\n\nvar _create = require('./_object-create');\n\nvar gOPNExt = require('./_object-gopn-ext');\n\nvar $GOPD = require('./_object-gopd');\n\nvar $GOPS = require('./_object-gops');\n\nvar $DP = require('./_object-dp');\n\nvar $keys = require('./_object-keys');\n\nvar gOPD = $GOPD.f;\nvar dP = $DP.f;\nvar gOPN = gOPNExt.f;\nvar $Symbol = global.Symbol;\nvar $JSON = global.JSON;\n\nvar _stringify = $JSON && $JSON.stringify;\n\nvar PROTOTYPE = 'prototype';\nvar HIDDEN = wks('_hidden');\nvar TO_PRIMITIVE = wks('toPrimitive');\nvar isEnum = {}.propertyIsEnumerable;\nvar SymbolRegistry = shared('symbol-registry');\nvar AllSymbols = shared('symbols');\nvar OPSymbols = shared('op-symbols');\nvar ObjectProto = Object[PROTOTYPE];\nvar USE_NATIVE = typeof $Symbol == 'function' && !!$GOPS.f;\nvar QObject = global.QObject; // Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\n\nvar setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild; // fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\n\nvar setSymbolDesc = DESCRIPTORS && $fails(function () {\n  return _create(dP({}, 'a', {\n    get: function get() {\n      return dP(this, 'a', {\n        value: 7\n      }).a;\n    }\n  })).a != 7;\n}) ? function (it, key, D) {\n  var protoDesc = gOPD(ObjectProto, key);\n  if (protoDesc) delete ObjectProto[key];\n  dP(it, key, D);\n  if (protoDesc && it !== ObjectProto) dP(ObjectProto, key, protoDesc);\n} : dP;\n\nvar wrap = function wrap(tag) {\n  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);\n\n  sym._k = tag;\n  return sym;\n};\n\nvar isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  return it instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(it, key, D) {\n  if (it === ObjectProto) $defineProperty(OPSymbols, key, D);\n  anObject(it);\n  key = toPrimitive(key, true);\n  anObject(D);\n\n  if (has(AllSymbols, key)) {\n    if (!D.enumerable) {\n      if (!has(it, HIDDEN)) dP(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if (has(it, HIDDEN) && it[HIDDEN][key]) it[HIDDEN][key] = false;\n      D = _create(D, {\n        enumerable: createDesc(0, false)\n      });\n    }\n\n    return setSymbolDesc(it, key, D);\n  }\n\n  return dP(it, key, D);\n};\n\nvar $defineProperties = function defineProperties(it, P) {\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P));\n  var i = 0;\n  var l = keys.length;\n  var key;\n\n  while (l > i) {\n    $defineProperty(it, key = keys[i++], P[key]);\n  }\n\n  return it;\n};\n\nvar $create = function create(it, P) {\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\n\nvar $propertyIsEnumerable = function propertyIsEnumerable(key) {\n  var E = isEnum.call(this, key = toPrimitive(key, true));\n  if (this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return false;\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;\n};\n\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key) {\n  it = toIObject(it);\n  key = toPrimitive(key, true);\n  if (it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return;\n  var D = gOPD(it, key);\n  if (D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key])) D.enumerable = true;\n  return D;\n};\n\nvar $getOwnPropertyNames = function getOwnPropertyNames(it) {\n  var names = gOPN(toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n\n  while (names.length > i) {\n    if (!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META) result.push(key);\n  }\n\n  return result;\n};\n\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it) {\n  var IS_OP = it === ObjectProto;\n  var names = gOPN(IS_OP ? OPSymbols : toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n\n  while (names.length > i) {\n    if (has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true)) result.push(AllSymbols[key]);\n  }\n\n  return result;\n}; // 19.4.1.1 Symbol([description])\n\n\nif (!USE_NATIVE) {\n  $Symbol = function Symbol() {\n    if (this instanceof $Symbol) throw TypeError('Symbol is not a constructor!');\n    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);\n\n    var $set = function $set(value) {\n      if (this === ObjectProto) $set.call(OPSymbols, value);\n      if (has(this, HIDDEN) && has(this[HIDDEN], tag)) this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    };\n\n    if (DESCRIPTORS && setter) setSymbolDesc(ObjectProto, tag, {\n      configurable: true,\n      set: $set\n    });\n    return wrap(tag);\n  };\n\n  redefine($Symbol[PROTOTYPE], 'toString', function toString() {\n    return this._k;\n  });\n  $GOPD.f = $getOwnPropertyDescriptor;\n  $DP.f = $defineProperty;\n  require('./_object-gopn').f = gOPNExt.f = $getOwnPropertyNames;\n  require('./_object-pie').f = $propertyIsEnumerable;\n  $GOPS.f = $getOwnPropertySymbols;\n\n  if (DESCRIPTORS && !require('./_library')) {\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n\n  wksExt.f = function (name) {\n    return wrap(wks(name));\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, {\n  Symbol: $Symbol\n});\n\nfor (var es6Symbols = // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14\n'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'.split(','), j = 0; es6Symbols.length > j;) {\n  wks(es6Symbols[j++]);\n}\n\nfor (var wellKnownSymbols = $keys(wks.store), k = 0; wellKnownSymbols.length > k;) {\n  wksDefine(wellKnownSymbols[k++]);\n}\n\n$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function _for(key) {\n    return has(SymbolRegistry, key += '') ? SymbolRegistry[key] : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(sym) {\n    if (!isSymbol(sym)) throw TypeError(sym + ' is not a symbol!');\n\n    for (var key in SymbolRegistry) {\n      if (SymbolRegistry[key] === sym) return key;\n    }\n  },\n  useSetter: function useSetter() {\n    setter = true;\n  },\n  useSimple: function useSimple() {\n    setter = false;\n  }\n});\n$export($export.S + $export.F * !USE_NATIVE, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n}); // Chrome 38 and 39 `Object.getOwnPropertySymbols` fails on primitives\n// https://bugs.chromium.org/p/v8/issues/detail?id=3443\n\nvar FAILS_ON_PRIMITIVES = $fails(function () {\n  $GOPS.f(1);\n});\n$export($export.S + $export.F * FAILS_ON_PRIMITIVES, 'Object', {\n  getOwnPropertySymbols: function getOwnPropertySymbols(it) {\n    return $GOPS.f(toObject(it));\n  }\n}); // 24.3.2 JSON.stringify(value [, replacer [, space]])\n\n$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function () {\n  var S = $Symbol(); // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n\n  return _stringify([S]) != '[null]' || _stringify({\n    a: S\n  }) != '{}' || _stringify(Object(S)) != '{}';\n})), 'JSON', {\n  stringify: function stringify(it) {\n    var args = [it];\n    var i = 1;\n    var replacer, $replacer;\n\n    while (arguments.length > i) {\n      args.push(arguments[i++]);\n    }\n\n    $replacer = replacer = args[1];\n    if (!isObject(replacer) && it === undefined || isSymbol(it)) return; // IE8 returns string on undefined\n\n    if (!isArray(replacer)) replacer = function replacer(key, value) {\n      if (typeof $replacer == 'function') value = $replacer.call(this, key, value);\n      if (!isSymbol(value)) return value;\n    };\n    args[1] = replacer;\n    return _stringify.apply($JSON, args);\n  }\n}); // 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\n\n$Symbol[PROTOTYPE][TO_PRIMITIVE] || require('./_hide')($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf); // 19.4.3.5 Symbol.prototype[@@toStringTag]\n\nsetToStringTag($Symbol, 'Symbol'); // 20.2.1.9 Math[@@toStringTag]\n\nsetToStringTag(Math, 'Math', true); // 24.3.3 JSON[@@toStringTag]\n\nsetToStringTag(global.JSON, 'JSON', true);","require('./_wks-define')('asyncIterator');","require('./_wks-define')('observable');","require('./es6.array.iterator');\n\nvar global = require('./_global');\n\nvar hide = require('./_hide');\n\nvar Iterators = require('./_iterators');\n\nvar TO_STRING_TAG = require('./_wks')('toStringTag');\n\nvar DOMIterables = ('CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,' + 'DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,' + 'MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,' + 'SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,' + 'TextTrackList,TouchList').split(',');\n\nfor (var i = 0; i < DOMIterables.length; i++) {\n  var NAME = DOMIterables[i];\n  var Collection = global[NAME];\n  var proto = Collection && Collection.prototype;\n  if (proto && !proto[TO_STRING_TAG]) hide(proto, TO_STRING_TAG, NAME);\n  Iterators[NAME] = Iterators.Array;\n}","'use strict';\n\nexports.__esModule = true;\nexports['default'] = {\n  scheme: 'apathy',\n  author: 'jannik siebert (https://github.com/janniks)',\n  base00: '#031A16',\n  base01: '#0B342D',\n  base02: '#184E45',\n  base03: '#2B685E',\n  base04: '#5F9C92',\n  base05: '#81B5AC',\n  base06: '#A7CEC8',\n  base07: '#D2E7E4',\n  base08: '#3E9688',\n  base09: '#3E7996',\n  base0A: '#3E4C96',\n  base0B: '#883E96',\n  base0C: '#963E4C',\n  base0D: '#96883E',\n  base0E: '#4C963E',\n  base0F: '#3E965B'\n};\nmodule.exports = exports['default'];","'use strict';\n\nexports.__esModule = true;\nexports['default'] = {\n  scheme: 'ashes',\n  author: 'jannik siebert (https://github.com/janniks)',\n  base00: '#1C2023',\n  base01: '#393F45',\n  base02: '#565E65',\n  base03: '#747C84',\n  base04: '#ADB3BA',\n  base05: '#C7CCD1',\n  base06: '#DFE2E5',\n  base07: '#F3F4F5',\n  base08: '#C7AE95',\n  base09: '#C7C795',\n  base0A: '#AEC795',\n  base0B: '#95C7AE',\n  base0C: '#95AEC7',\n  base0D: '#AE95C7',\n  base0E: '#C795AE',\n  base0F: '#C79595'\n};\nmodule.exports = exports['default'];","'use strict';\n\nexports.__esModule = true;\nexports['default'] = {\n  scheme: 'atelier dune',\n  author: 'bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/dune)',\n  base00: '#20201d',\n  base01: '#292824',\n  base02: '#6e6b5e',\n  base03: '#7d7a68',\n  base04: '#999580',\n  base05: '#a6a28c',\n  base06: '#e8e4cf',\n  base07: '#fefbec',\n  base08: '#d73737',\n  base09: '#b65611',\n  base0A: '#cfb017',\n  base0B: '#60ac39',\n  base0C: '#1fad83',\n  base0D: '#6684e1',\n  base0E: '#b854d4',\n  base0F: '#d43552'\n};\nmodule.exports = exports['default'];","'use strict';\n\nexports.__esModule = true;\nexports['default'] = {\n  scheme: 'atelier forest',\n  author: 'bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/forest)',\n  base00: '#1b1918',\n  base01: '#2c2421',\n  base02: '#68615e',\n  base03: '#766e6b',\n  base04: '#9c9491',\n  base05: '#a8a19f',\n  base06: '#e6e2e0',\n  base07: '#f1efee',\n  base08: '#f22c40',\n  base09: '#df5320',\n  base0A: '#d5911a',\n  base0B: '#5ab738',\n  base0C: '#00ad9c',\n  base0D: '#407ee7',\n  base0E: '#6666ea',\n  base0F: '#c33ff3'\n};\nmodule.exports = exports['default'];","'use strict';\n\nexports.__esModule = true;\nexports['default'] = {\n  scheme: 'atelier heath',\n  author: 'bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/heath)',\n  base00: '#1b181b',\n  base01: '#292329',\n  base02: '#695d69',\n  base03: '#776977',\n  base04: '#9e8f9e',\n  base05: '#ab9bab',\n  base06: '#d8cad8',\n  base07: '#f7f3f7',\n  base08: '#ca402b',\n  base09: '#a65926',\n  base0A: '#bb8a35',\n  base0B: '#379a37',\n  base0C: '#159393',\n  base0D: '#516aec',\n  base0E: '#7b59c0',\n  base0F: '#cc33cc'\n};\nmodule.exports = exports['default'];","'use strict';\n\nexports.__esModule = true;\nexports['default'] = {\n  scheme: 'atelier lakeside',\n  author: 'bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/lakeside/)',\n  base00: '#161b1d',\n  base01: '#1f292e',\n  base02: '#516d7b',\n  base03: '#5a7b8c',\n  base04: '#7195a8',\n  base05: '#7ea2b4',\n  base06: '#c1e4f6',\n  base07: '#ebf8ff',\n  base08: '#d22d72',\n  base09: '#935c25',\n  base0A: '#8a8a0f',\n  base0B: '#568c3b',\n  base0C: '#2d8f6f',\n  base0D: '#257fad',\n  base0E: '#5d5db1',\n  base0F: '#b72dd2'\n};\nmodule.exports = exports['default'];","'use strict';\n\nexports.__esModule = true;\nexports['default'] = {\n  scheme: 'atelier seaside',\n  author: 'bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/seaside/)',\n  base00: '#131513',\n  base01: '#242924',\n  base02: '#5e6e5e',\n  base03: '#687d68',\n  base04: '#809980',\n  base05: '#8ca68c',\n  base06: '#cfe8cf',\n  base07: '#f0fff0',\n  base08: '#e6193c',\n  base09: '#87711d',\n  base0A: '#c3c322',\n  base0B: '#29a329',\n  base0C: '#1999b3',\n  base0D: '#3d62f5',\n  base0E: '#ad2bee',\n  base0F: '#e619c3'\n};\nmodule.exports = exports['default'];","'use strict';\n\nexports.__esModule = true;\nexports['default'] = {\n  scheme: 'bespin',\n  author: 'jan t. sott',\n  base00: '#28211c',\n  base01: '#36312e',\n  base02: '#5e5d5c',\n  base03: '#666666',\n  base04: '#797977',\n  base05: '#8a8986',\n  base06: '#9d9b97',\n  base07: '#baae9e',\n  base08: '#cf6a4c',\n  base09: '#cf7d34',\n  base0A: '#f9ee98',\n  base0B: '#54be0d',\n  base0C: '#afc4db',\n  base0D: '#5ea6ea',\n  base0E: '#9b859d',\n  base0F: '#937121'\n};\nmodule.exports = exports['default'];","'use strict';\n\nexports.__esModule = true;\nexports['default'] = {\n  scheme: 'brewer',\n  author: 'timothe poisot (http://github.com/tpoisot)',\n  base00: '#0c0d0e',\n  base01: '#2e2f30',\n  base02: '#515253',\n  base03: '#737475',\n  base04: '#959697',\n  base05: '#b7b8b9',\n  base06: '#dadbdc',\n  base07: '#fcfdfe',\n  base08: '#e31a1c',\n  base09: '#e6550d',\n  base0A: '#dca060',\n  base0B: '#31a354',\n  base0C: '#80b1d3',\n  base0D: '#3182bd',\n  base0E: '#756bb1',\n  base0F: '#b15928'\n};\nmodule.exports = exports['default'];","'use strict';\n\nexports.__esModule = true;\nexports['default'] = {\n  scheme: 'bright',\n  author: 'chris kempson (http://chriskempson.com)',\n  base00: '#000000',\n  base01: '#303030',\n  base02: '#505050',\n  base03: '#b0b0b0',\n  base04: '#d0d0d0',\n  base05: '#e0e0e0',\n  base06: '#f5f5f5',\n  base07: '#ffffff',\n  base08: '#fb0120',\n  base09: '#fc6d24',\n  base0A: '#fda331',\n  base0B: '#a1c659',\n  base0C: '#76c7b7',\n  base0D: '#6fb3d2',\n  base0E: '#d381c3',\n  base0F: '#be643c'\n};\nmodule.exports = exports['default'];","'use strict';\n\nexports.__esModule = true;\nexports['default'] = {\n  scheme: 'chalk',\n  author: 'chris kempson (http://chriskempson.com)',\n  base00: '#151515',\n  base01: '#202020',\n  base02: '#303030',\n  base03: '#505050',\n  base04: '#b0b0b0',\n  base05: '#d0d0d0',\n  base06: '#e0e0e0',\n  base07: '#f5f5f5',\n  base08: '#fb9fb1',\n  base09: '#eda987',\n  base0A: '#ddb26f',\n  base0B: '#acc267',\n  base0C: '#12cfc0',\n  base0D: '#6fc2ef',\n  base0E: '#e1a3ee',\n  base0F: '#deaf8f'\n};\nmodule.exports = exports['default'];","'use strict';\n\nexports.__esModule = true;\nexports['default'] = {\n  scheme: 'codeschool',\n  author: 'brettof86',\n  base00: '#232c31',\n  base01: '#1c3657',\n  base02: '#2a343a',\n  base03: '#3f4944',\n  base04: '#84898c',\n  base05: '#9ea7a6',\n  base06: '#a7cfa3',\n  base07: '#b5d8f6',\n  base08: '#2a5491',\n  base09: '#43820d',\n  base0A: '#a03b1e',\n  base0B: '#237986',\n  base0C: '#b02f30',\n  base0D: '#484d79',\n  base0E: '#c59820',\n  base0F: '#c98344'\n};\nmodule.exports = exports['default'];","'use strict';\n\nexports.__esModule = true;\nexports['default'] = {\n  scheme: 'colors',\n  author: 'mrmrs (http://clrs.cc)',\n  base00: '#111111',\n  base01: '#333333',\n  base02: '#555555',\n  base03: '#777777',\n  base04: '#999999',\n  base05: '#bbbbbb',\n  base06: '#dddddd',\n  base07: '#ffffff',\n  base08: '#ff4136',\n  base09: '#ff851b',\n  base0A: '#ffdc00',\n  base0B: '#2ecc40',\n  base0C: '#7fdbff',\n  base0D: '#0074d9',\n  base0E: '#b10dc9',\n  base0F: '#85144b'\n};\nmodule.exports = exports['default'];","'use strict';\n\nexports.__esModule = true;\nexports['default'] = {\n  scheme: 'default',\n  author: 'chris kempson (http://chriskempson.com)',\n  base00: '#181818',\n  base01: '#282828',\n  base02: '#383838',\n  base03: '#585858',\n  base04: '#b8b8b8',\n  base05: '#d8d8d8',\n  base06: '#e8e8e8',\n  base07: '#f8f8f8',\n  base08: '#ab4642',\n  base09: '#dc9656',\n  base0A: '#f7ca88',\n  base0B: '#a1b56c',\n  base0C: '#86c1b9',\n  base0D: '#7cafc2',\n  base0E: '#ba8baf',\n  base0F: '#a16946'\n};\nmodule.exports = exports['default'];","'use strict';\n\nexports.__esModule = true;\nexports['default'] = {\n  scheme: 'eighties',\n  author: 'chris kempson (http://chriskempson.com)',\n  base00: '#2d2d2d',\n  base01: '#393939',\n  base02: '#515151',\n  base03: '#747369',\n  base04: '#a09f93',\n  base05: '#d3d0c8',\n  base06: '#e8e6df',\n  base07: '#f2f0ec',\n  base08: '#f2777a',\n  base09: '#f99157',\n  base0A: '#ffcc66',\n  base0B: '#99cc99',\n  base0C: '#66cccc',\n  base0D: '#6699cc',\n  base0E: '#cc99cc',\n  base0F: '#d27b53'\n};\nmodule.exports = exports['default'];","'use strict';\n\nexports.__esModule = true;\nexports['default'] = {\n  scheme: 'embers',\n  author: 'jannik siebert (https://github.com/janniks)',\n  base00: '#16130F',\n  base01: '#2C2620',\n  base02: '#433B32',\n  base03: '#5A5047',\n  base04: '#8A8075',\n  base05: '#A39A90',\n  base06: '#BEB6AE',\n  base07: '#DBD6D1',\n  base08: '#826D57',\n  base09: '#828257',\n  base0A: '#6D8257',\n  base0B: '#57826D',\n  base0C: '#576D82',\n  base0D: '#6D5782',\n  base0E: '#82576D',\n  base0F: '#825757'\n};\nmodule.exports = exports['default'];","'use strict';\n\nexports.__esModule = true;\nexports['default'] = {\n  scheme: 'flat',\n  author: 'chris kempson (http://chriskempson.com)',\n  base00: '#2C3E50',\n  base01: '#34495E',\n  base02: '#7F8C8D',\n  base03: '#95A5A6',\n  base04: '#BDC3C7',\n  base05: '#e0e0e0',\n  base06: '#f5f5f5',\n  base07: '#ECF0F1',\n  base08: '#E74C3C',\n  base09: '#E67E22',\n  base0A: '#F1C40F',\n  base0B: '#2ECC71',\n  base0C: '#1ABC9C',\n  base0D: '#3498DB',\n  base0E: '#9B59B6',\n  base0F: '#be643c'\n};\nmodule.exports = exports['default'];","'use strict';\n\nexports.__esModule = true;\nexports['default'] = {\n  scheme: 'google',\n  author: 'seth wright (http://sethawright.com)',\n  base00: '#1d1f21',\n  base01: '#282a2e',\n  base02: '#373b41',\n  base03: '#969896',\n  base04: '#b4b7b4',\n  base05: '#c5c8c6',\n  base06: '#e0e0e0',\n  base07: '#ffffff',\n  base08: '#CC342B',\n  base09: '#F96A38',\n  base0A: '#FBA922',\n  base0B: '#198844',\n  base0C: '#3971ED',\n  base0D: '#3971ED',\n  base0E: '#A36AC7',\n  base0F: '#3971ED'\n};\nmodule.exports = exports['default'];","'use strict';\n\nexports.__esModule = true;\nexports['default'] = {\n  scheme: 'grayscale',\n  author: 'alexandre gavioli (https://github.com/alexx2/)',\n  base00: '#101010',\n  base01: '#252525',\n  base02: '#464646',\n  base03: '#525252',\n  base04: '#ababab',\n  base05: '#b9b9b9',\n  base06: '#e3e3e3',\n  base07: '#f7f7f7',\n  base08: '#7c7c7c',\n  base09: '#999999',\n  base0A: '#a0a0a0',\n  base0B: '#8e8e8e',\n  base0C: '#868686',\n  base0D: '#686868',\n  base0E: '#747474',\n  base0F: '#5e5e5e'\n};\nmodule.exports = exports['default'];","'use strict';\n\nexports.__esModule = true;\nexports['default'] = {\n  scheme: 'green screen',\n  author: 'chris kempson (http://chriskempson.com)',\n  base00: '#001100',\n  base01: '#003300',\n  base02: '#005500',\n  base03: '#007700',\n  base04: '#009900',\n  base05: '#00bb00',\n  base06: '#00dd00',\n  base07: '#00ff00',\n  base08: '#007700',\n  base09: '#009900',\n  base0A: '#007700',\n  base0B: '#00bb00',\n  base0C: '#005500',\n  base0D: '#009900',\n  base0E: '#00bb00',\n  base0F: '#005500'\n};\nmodule.exports = exports['default'];","'use strict';\n\nexports.__esModule = true;\nexports['default'] = {\n  scheme: 'harmonic16',\n  author: 'jannik siebert (https://github.com/janniks)',\n  base00: '#0b1c2c',\n  base01: '#223b54',\n  base02: '#405c79',\n  base03: '#627e99',\n  base04: '#aabcce',\n  base05: '#cbd6e2',\n  base06: '#e5ebf1',\n  base07: '#f7f9fb',\n  base08: '#bf8b56',\n  base09: '#bfbf56',\n  base0A: '#8bbf56',\n  base0B: '#56bf8b',\n  base0C: '#568bbf',\n  base0D: '#8b56bf',\n  base0E: '#bf568b',\n  base0F: '#bf5656'\n};\nmodule.exports = exports['default'];","'use strict';\n\nexports.__esModule = true;\nexports['default'] = {\n  scheme: 'hopscotch',\n  author: 'jan t. sott',\n  base00: '#322931',\n  base01: '#433b42',\n  base02: '#5c545b',\n  base03: '#797379',\n  base04: '#989498',\n  base05: '#b9b5b8',\n  base06: '#d5d3d5',\n  base07: '#ffffff',\n  base08: '#dd464c',\n  base09: '#fd8b19',\n  base0A: '#fdcc59',\n  base0B: '#8fc13e',\n  base0C: '#149b93',\n  base0D: '#1290bf',\n  base0E: '#c85e7c',\n  base0F: '#b33508'\n};\nmodule.exports = exports['default'];","'use strict';\n\nexports.__esModule = true;\n\nfunction _interopRequire(obj) {\n  return obj && obj.__esModule ? obj['default'] : obj;\n}\n\nvar _threezerotwofour = require('./threezerotwofour');\n\nexports.threezerotwofour = _interopRequire(_threezerotwofour);\n\nvar _apathy = require('./apathy');\n\nexports.apathy = _interopRequire(_apathy);\n\nvar _ashes = require('./ashes');\n\nexports.ashes = _interopRequire(_ashes);\n\nvar _atelierDune = require('./atelier-dune');\n\nexports.atelierDune = _interopRequire(_atelierDune);\n\nvar _atelierForest = require('./atelier-forest');\n\nexports.atelierForest = _interopRequire(_atelierForest);\n\nvar _atelierHeath = require('./atelier-heath');\n\nexports.atelierHeath = _interopRequire(_atelierHeath);\n\nvar _atelierLakeside = require('./atelier-lakeside');\n\nexports.atelierLakeside = _interopRequire(_atelierLakeside);\n\nvar _atelierSeaside = require('./atelier-seaside');\n\nexports.atelierSeaside = _interopRequire(_atelierSeaside);\n\nvar _bespin = require('./bespin');\n\nexports.bespin = _interopRequire(_bespin);\n\nvar _brewer = require('./brewer');\n\nexports.brewer = _interopRequire(_brewer);\n\nvar _bright = require('./bright');\n\nexports.bright = _interopRequire(_bright);\n\nvar _chalk = require('./chalk');\n\nexports.chalk = _interopRequire(_chalk);\n\nvar _codeschool = require('./codeschool');\n\nexports.codeschool = _interopRequire(_codeschool);\n\nvar _colors = require('./colors');\n\nexports.colors = _interopRequire(_colors);\n\nvar _default = require('./default');\n\nexports['default'] = _interopRequire(_default);\n\nvar _eighties = require('./eighties');\n\nexports.eighties = _interopRequire(_eighties);\n\nvar _embers = require('./embers');\n\nexports.embers = _interopRequire(_embers);\n\nvar _flat = require('./flat');\n\nexports.flat = _interopRequire(_flat);\n\nvar _google = require('./google');\n\nexports.google = _interopRequire(_google);\n\nvar _grayscale = require('./grayscale');\n\nexports.grayscale = _interopRequire(_grayscale);\n\nvar _greenscreen = require('./greenscreen');\n\nexports.greenscreen = _interopRequire(_greenscreen);\n\nvar _harmonic = require('./harmonic');\n\nexports.harmonic = _interopRequire(_harmonic);\n\nvar _hopscotch = require('./hopscotch');\n\nexports.hopscotch = _interopRequire(_hopscotch);\n\nvar _isotope = require('./isotope');\n\nexports.isotope = _interopRequire(_isotope);\n\nvar _marrakesh = require('./marrakesh');\n\nexports.marrakesh = _interopRequire(_marrakesh);\n\nvar _mocha = require('./mocha');\n\nexports.mocha = _interopRequire(_mocha);\n\nvar _monokai = require('./monokai');\n\nexports.monokai = _interopRequire(_monokai);\n\nvar _ocean = require('./ocean');\n\nexports.ocean = _interopRequire(_ocean);\n\nvar _paraiso = require('./paraiso');\n\nexports.paraiso = _interopRequire(_paraiso);\n\nvar _pop = require('./pop');\n\nexports.pop = _interopRequire(_pop);\n\nvar _railscasts = require('./railscasts');\n\nexports.railscasts = _interopRequire(_railscasts);\n\nvar _shapeshifter = require('./shapeshifter');\n\nexports.shapeshifter = _interopRequire(_shapeshifter);\n\nvar _solarized = require('./solarized');\n\nexports.solarized = _interopRequire(_solarized);\n\nvar _summerfruit = require('./summerfruit');\n\nexports.summerfruit = _interopRequire(_summerfruit);\n\nvar _tomorrow = require('./tomorrow');\n\nexports.tomorrow = _interopRequire(_tomorrow);\n\nvar _tube = require('./tube');\n\nexports.tube = _interopRequire(_tube);\n\nvar _twilight = require('./twilight');\n\nexports.twilight = _interopRequire(_twilight);","'use strict';\n\nexports.__esModule = true;\nexports['default'] = {\n  scheme: 'isotope',\n  author: 'jan t. sott',\n  base00: '#000000',\n  base01: '#404040',\n  base02: '#606060',\n  base03: '#808080',\n  base04: '#c0c0c0',\n  base05: '#d0d0d0',\n  base06: '#e0e0e0',\n  base07: '#ffffff',\n  base08: '#ff0000',\n  base09: '#ff9900',\n  base0A: '#ff0099',\n  base0B: '#33ff00',\n  base0C: '#00ffff',\n  base0D: '#0066ff',\n  base0E: '#cc00ff',\n  base0F: '#3300ff'\n};\nmodule.exports = exports['default'];","'use strict';\n\nexports.__esModule = true;\nexports['default'] = {\n  scheme: 'marrakesh',\n  author: 'alexandre gavioli (http://github.com/alexx2/)',\n  base00: '#201602',\n  base01: '#302e00',\n  base02: '#5f5b17',\n  base03: '#6c6823',\n  base04: '#86813b',\n  base05: '#948e48',\n  base06: '#ccc37a',\n  base07: '#faf0a5',\n  base08: '#c35359',\n  base09: '#b36144',\n  base0A: '#a88339',\n  base0B: '#18974e',\n  base0C: '#75a738',\n  base0D: '#477ca1',\n  base0E: '#8868b3',\n  base0F: '#b3588e'\n};\nmodule.exports = exports['default'];","'use strict';\n\nexports.__esModule = true;\nexports['default'] = {\n  scheme: 'mocha',\n  author: 'chris kempson (http://chriskempson.com)',\n  base00: '#3B3228',\n  base01: '#534636',\n  base02: '#645240',\n  base03: '#7e705a',\n  base04: '#b8afad',\n  base05: '#d0c8c6',\n  base06: '#e9e1dd',\n  base07: '#f5eeeb',\n  base08: '#cb6077',\n  base09: '#d28b71',\n  base0A: '#f4bc87',\n  base0B: '#beb55b',\n  base0C: '#7bbda4',\n  base0D: '#8ab3b5',\n  base0E: '#a89bb9',\n  base0F: '#bb9584'\n};\nmodule.exports = exports['default'];","'use strict';\n\nexports.__esModule = true;\nexports['default'] = {\n  scheme: 'monokai',\n  author: 'wimer hazenberg (http://www.monokai.nl)',\n  base00: '#272822',\n  base01: '#383830',\n  base02: '#49483e',\n  base03: '#75715e',\n  base04: '#a59f85',\n  base05: '#f8f8f2',\n  base06: '#f5f4f1',\n  base07: '#f9f8f5',\n  base08: '#f92672',\n  base09: '#fd971f',\n  base0A: '#f4bf75',\n  base0B: '#a6e22e',\n  base0C: '#a1efe4',\n  base0D: '#66d9ef',\n  base0E: '#ae81ff',\n  base0F: '#cc6633'\n};\nmodule.exports = exports['default'];","'use strict';\n\nexports.__esModule = true;\nexports['default'] = {\n  scheme: 'ocean',\n  author: 'chris kempson (http://chriskempson.com)',\n  base00: '#2b303b',\n  base01: '#343d46',\n  base02: '#4f5b66',\n  base03: '#65737e',\n  base04: '#a7adba',\n  base05: '#c0c5ce',\n  base06: '#dfe1e8',\n  base07: '#eff1f5',\n  base08: '#bf616a',\n  base09: '#d08770',\n  base0A: '#ebcb8b',\n  base0B: '#a3be8c',\n  base0C: '#96b5b4',\n  base0D: '#8fa1b3',\n  base0E: '#b48ead',\n  base0F: '#ab7967'\n};\nmodule.exports = exports['default'];","'use strict';\n\nexports.__esModule = true;\nexports['default'] = {\n  scheme: 'paraiso',\n  author: 'jan t. sott',\n  base00: '#2f1e2e',\n  base01: '#41323f',\n  base02: '#4f424c',\n  base03: '#776e71',\n  base04: '#8d8687',\n  base05: '#a39e9b',\n  base06: '#b9b6b0',\n  base07: '#e7e9db',\n  base08: '#ef6155',\n  base09: '#f99b15',\n  base0A: '#fec418',\n  base0B: '#48b685',\n  base0C: '#5bc4bf',\n  base0D: '#06b6ef',\n  base0E: '#815ba4',\n  base0F: '#e96ba8'\n};\nmodule.exports = exports['default'];","'use strict';\n\nexports.__esModule = true;\nexports['default'] = {\n  scheme: 'pop',\n  author: 'chris kempson (http://chriskempson.com)',\n  base00: '#000000',\n  base01: '#202020',\n  base02: '#303030',\n  base03: '#505050',\n  base04: '#b0b0b0',\n  base05: '#d0d0d0',\n  base06: '#e0e0e0',\n  base07: '#ffffff',\n  base08: '#eb008a',\n  base09: '#f29333',\n  base0A: '#f8ca12',\n  base0B: '#37b349',\n  base0C: '#00aabb',\n  base0D: '#0e5a94',\n  base0E: '#b31e8d',\n  base0F: '#7a2d00'\n};\nmodule.exports = exports['default'];","'use strict';\n\nexports.__esModule = true;\nexports['default'] = {\n  scheme: 'railscasts',\n  author: 'ryan bates (http://railscasts.com)',\n  base00: '#2b2b2b',\n  base01: '#272935',\n  base02: '#3a4055',\n  base03: '#5a647e',\n  base04: '#d4cfc9',\n  base05: '#e6e1dc',\n  base06: '#f4f1ed',\n  base07: '#f9f7f3',\n  base08: '#da4939',\n  base09: '#cc7833',\n  base0A: '#ffc66d',\n  base0B: '#a5c261',\n  base0C: '#519f50',\n  base0D: '#6d9cbe',\n  base0E: '#b6b3eb',\n  base0F: '#bc9458'\n};\nmodule.exports = exports['default'];","'use strict';\n\nexports.__esModule = true;\nexports['default'] = {\n  scheme: 'shapeshifter',\n  author: 'tyler benziger (http://tybenz.com)',\n  base00: '#000000',\n  base01: '#040404',\n  base02: '#102015',\n  base03: '#343434',\n  base04: '#555555',\n  base05: '#ababab',\n  base06: '#e0e0e0',\n  base07: '#f9f9f9',\n  base08: '#e92f2f',\n  base09: '#e09448',\n  base0A: '#dddd13',\n  base0B: '#0ed839',\n  base0C: '#23edda',\n  base0D: '#3b48e3',\n  base0E: '#f996e2',\n  base0F: '#69542d'\n};\nmodule.exports = exports['default'];","'use strict';\n\nexports.__esModule = true;\nexports['default'] = {\n  scheme: 'solarized',\n  author: 'ethan schoonover (http://ethanschoonover.com/solarized)',\n  base00: '#002b36',\n  base01: '#073642',\n  base02: '#586e75',\n  base03: '#657b83',\n  base04: '#839496',\n  base05: '#93a1a1',\n  base06: '#eee8d5',\n  base07: '#fdf6e3',\n  base08: '#dc322f',\n  base09: '#cb4b16',\n  base0A: '#b58900',\n  base0B: '#859900',\n  base0C: '#2aa198',\n  base0D: '#268bd2',\n  base0E: '#6c71c4',\n  base0F: '#d33682'\n};\nmodule.exports = exports['default'];","'use strict';\n\nexports.__esModule = true;\nexports['default'] = {\n  scheme: 'summerfruit',\n  author: 'christopher corley (http://cscorley.github.io/)',\n  base00: '#151515',\n  base01: '#202020',\n  base02: '#303030',\n  base03: '#505050',\n  base04: '#B0B0B0',\n  base05: '#D0D0D0',\n  base06: '#E0E0E0',\n  base07: '#FFFFFF',\n  base08: '#FF0086',\n  base09: '#FD8900',\n  base0A: '#ABA800',\n  base0B: '#00C918',\n  base0C: '#1faaaa',\n  base0D: '#3777E6',\n  base0E: '#AD00A1',\n  base0F: '#cc6633'\n};\nmodule.exports = exports['default'];","'use strict';\n\nexports.__esModule = true;\nexports['default'] = {\n  scheme: 'threezerotwofour',\n  author: 'jan t. sott (http://github.com/idleberg)',\n  base00: '#090300',\n  base01: '#3a3432',\n  base02: '#4a4543',\n  base03: '#5c5855',\n  base04: '#807d7c',\n  base05: '#a5a2a2',\n  base06: '#d6d5d4',\n  base07: '#f7f7f7',\n  base08: '#db2d20',\n  base09: '#e8bbd0',\n  base0A: '#fded02',\n  base0B: '#01a252',\n  base0C: '#b5e4f4',\n  base0D: '#01a0e4',\n  base0E: '#a16a94',\n  base0F: '#cdab53'\n};\nmodule.exports = exports['default'];","'use strict';\n\nexports.__esModule = true;\nexports['default'] = {\n  scheme: 'tomorrow',\n  author: 'chris kempson (http://chriskempson.com)',\n  base00: '#1d1f21',\n  base01: '#282a2e',\n  base02: '#373b41',\n  base03: '#969896',\n  base04: '#b4b7b4',\n  base05: '#c5c8c6',\n  base06: '#e0e0e0',\n  base07: '#ffffff',\n  base08: '#cc6666',\n  base09: '#de935f',\n  base0A: '#f0c674',\n  base0B: '#b5bd68',\n  base0C: '#8abeb7',\n  base0D: '#81a2be',\n  base0E: '#b294bb',\n  base0F: '#a3685a'\n};\nmodule.exports = exports['default'];","'use strict';\n\nexports.__esModule = true;\nexports['default'] = {\n  scheme: 'london tube',\n  author: 'jan t. sott',\n  base00: '#231f20',\n  base01: '#1c3f95',\n  base02: '#5a5758',\n  base03: '#737171',\n  base04: '#959ca1',\n  base05: '#d9d8d8',\n  base06: '#e7e7e8',\n  base07: '#ffffff',\n  base08: '#ee2e24',\n  base09: '#f386a1',\n  base0A: '#ffd204',\n  base0B: '#00853e',\n  base0C: '#85cebc',\n  base0D: '#009ddc',\n  base0E: '#98005d',\n  base0F: '#b06110'\n};\nmodule.exports = exports['default'];","'use strict';\n\nexports.__esModule = true;\nexports['default'] = {\n  scheme: 'twilight',\n  author: 'david hart (http://hart-dev.com)',\n  base00: '#1e1e1e',\n  base01: '#323537',\n  base02: '#464b50',\n  base03: '#5f5a60',\n  base04: '#838184',\n  base05: '#a7a7a7',\n  base06: '#c3c3c3',\n  base07: '#ffffff',\n  base08: '#cf6a4c',\n  base09: '#cda869',\n  base0A: '#f9ee98',\n  base0B: '#8f9d6a',\n  base0C: '#afc4db',\n  base0D: '#7587a6',\n  base0E: '#9b859d',\n  base0F: '#9b703f'\n};\nmodule.exports = exports['default'];","import { parse } from '../tool/color';\nexport function createElement(name) {\n  return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\nexport function normalizeColor(color) {\n  var opacity;\n\n  if (!color || color === 'transparent') {\n    color = 'none';\n  } else if (typeof color === 'string' && color.indexOf('rgba') > -1) {\n    var arr = parse(color);\n\n    if (arr) {\n      color = 'rgb(' + arr[0] + ',' + arr[1] + ',' + arr[2] + ')';\n      opacity = arr[3];\n    }\n  }\n\n  return {\n    color: color,\n    opacity: opacity == null ? 1 : opacity\n  };\n}","function diff(oldArr, newArr, equals) {\n  if (!equals) {\n    equals = function equals(a, b) {\n      return a === b;\n    };\n  }\n\n  oldArr = oldArr.slice();\n  newArr = newArr.slice();\n  var newLen = newArr.length;\n  var oldLen = oldArr.length;\n  var editLength = 1;\n  var maxEditLength = newLen + oldLen;\n  var bestPath = [{\n    newPos: -1,\n    components: []\n  }];\n  var oldPos = extractCommon(bestPath[0], newArr, oldArr, 0, equals);\n\n  if (bestPath[0].newPos + 1 >= newLen && oldPos + 1 >= oldLen) {\n    var indices = [];\n\n    for (var i = 0; i < newArr.length; i++) {\n      indices.push(i);\n    }\n\n    return [{\n      indices: indices,\n      count: newArr.length,\n      added: false,\n      removed: false\n    }];\n  }\n\n  function execEditLength() {\n    for (var diagonalPath = -1 * editLength; diagonalPath <= editLength; diagonalPath += 2) {\n      var basePath;\n      var addPath = bestPath[diagonalPath - 1];\n      var removePath = bestPath[diagonalPath + 1];\n      var oldPos = (removePath ? removePath.newPos : 0) - diagonalPath;\n\n      if (addPath) {\n        bestPath[diagonalPath - 1] = undefined;\n      }\n\n      var canAdd = addPath && addPath.newPos + 1 < newLen;\n      var canRemove = removePath && 0 <= oldPos && oldPos < oldLen;\n\n      if (!canAdd && !canRemove) {\n        bestPath[diagonalPath] = undefined;\n        continue;\n      }\n\n      if (!canAdd || canRemove && addPath.newPos < removePath.newPos) {\n        basePath = clonePath(removePath);\n        pushComponent(basePath.components, false, true);\n      } else {\n        basePath = addPath;\n        basePath.newPos++;\n        pushComponent(basePath.components, true, false);\n      }\n\n      oldPos = extractCommon(basePath, newArr, oldArr, diagonalPath, equals);\n\n      if (basePath.newPos + 1 >= newLen && oldPos + 1 >= oldLen) {\n        return buildValues(basePath.components);\n      } else {\n        bestPath[diagonalPath] = basePath;\n      }\n    }\n\n    editLength++;\n  }\n\n  while (editLength <= maxEditLength) {\n    var ret = execEditLength();\n\n    if (ret) {\n      return ret;\n    }\n  }\n}\n\nfunction extractCommon(basePath, newArr, oldArr, diagonalPath, equals) {\n  var newLen = newArr.length;\n  var oldLen = oldArr.length;\n  var newPos = basePath.newPos;\n  var oldPos = newPos - diagonalPath;\n  var commonCount = 0;\n\n  while (newPos + 1 < newLen && oldPos + 1 < oldLen && equals(newArr[newPos + 1], oldArr[oldPos + 1])) {\n    newPos++;\n    oldPos++;\n    commonCount++;\n  }\n\n  if (commonCount) {\n    basePath.components.push({\n      count: commonCount,\n      added: false,\n      removed: false,\n      indices: []\n    });\n  }\n\n  basePath.newPos = newPos;\n  return oldPos;\n}\n\nfunction pushComponent(components, added, removed) {\n  var last = components[components.length - 1];\n\n  if (last && last.added === added && last.removed === removed) {\n    components[components.length - 1] = {\n      count: last.count + 1,\n      added: added,\n      removed: removed,\n      indices: []\n    };\n  } else {\n    components.push({\n      count: 1,\n      added: added,\n      removed: removed,\n      indices: []\n    });\n  }\n}\n\nfunction buildValues(components) {\n  var componentPos = 0;\n  var componentLen = components.length;\n  var newPos = 0;\n  var oldPos = 0;\n\n  for (; componentPos < componentLen; componentPos++) {\n    var component = components[componentPos];\n\n    if (!component.removed) {\n      var indices = [];\n\n      for (var i = newPos; i < newPos + component.count; i++) {\n        indices.push(i);\n      }\n\n      component.indices = indices;\n      newPos += component.count;\n\n      if (!component.added) {\n        oldPos += component.count;\n      }\n    } else {\n      for (var i = oldPos; i < oldPos + component.count; i++) {\n        component.indices.push(i);\n      }\n\n      oldPos += component.count;\n    }\n  }\n\n  return components;\n}\n\nfunction clonePath(path) {\n  return {\n    newPos: path.newPos,\n    components: path.components.slice(0)\n  };\n}\n\nexport default function arrayDiff(oldArr, newArr, equal) {\n  return diff(oldArr, newArr, equal);\n}","import { createElement, normalizeColor } from './core';\nimport ZRImage from '../graphic/Image';\nimport { DEFAULT_FONT, getLineHeight } from '../contain/text';\nimport { map } from '../core/util';\nimport { normalizeLineDash } from '../graphic/helper/dashStyle';\nvar NONE = 'none';\nvar mathRound = Math.round;\nvar mathSin = Math.sin;\nvar mathCos = Math.cos;\nvar PI = Math.PI;\nvar PI2 = Math.PI * 2;\nvar degree = 180 / PI;\nvar EPSILON = 1e-4;\n\nfunction round3(val) {\n  return mathRound(val * 1e3) / 1e3;\n}\n\nfunction round4(val) {\n  return mathRound(val * 1e4) / 1e4;\n}\n\nfunction isAroundZero(val) {\n  return val < EPSILON && val > -EPSILON;\n}\n\nfunction pathHasFill(style) {\n  var fill = style.fill;\n  return fill != null && fill !== NONE;\n}\n\nfunction pathHasStroke(style) {\n  var stroke = style.stroke;\n  return stroke != null && stroke !== NONE;\n}\n\nfunction setTransform(svgEl, m) {\n  if (m) {\n    attr(svgEl, 'transform', 'matrix(' + round3(m[0]) + ',' + round3(m[1]) + ',' + round3(m[2]) + ',' + round3(m[3]) + ',' + round4(m[4]) + ',' + round4(m[5]) + ')');\n  }\n}\n\nfunction attr(el, key, val) {\n  if (!val || val.type !== 'linear' && val.type !== 'radial') {\n    el.setAttribute(key, val);\n  }\n}\n\nfunction attrXLink(el, key, val) {\n  el.setAttributeNS('http://www.w3.org/1999/xlink', key, val);\n}\n\nfunction attrXML(el, key, val) {\n  el.setAttributeNS('http://www.w3.org/XML/1998/namespace', key, val);\n}\n\nfunction bindStyle(svgEl, style, el) {\n  var opacity = style.opacity == null ? 1 : style.opacity;\n\n  if (el instanceof ZRImage) {\n    attr(svgEl, 'opacity', opacity + '');\n    return;\n  }\n\n  if (pathHasFill(style)) {\n    var fill = normalizeColor(style.fill);\n    attr(svgEl, 'fill', fill.color);\n    attr(svgEl, 'fill-opacity', (style.fillOpacity != null ? style.fillOpacity * fill.opacity * opacity : fill.opacity * opacity) + '');\n  } else {\n    attr(svgEl, 'fill', NONE);\n  }\n\n  if (pathHasStroke(style)) {\n    var stroke = normalizeColor(style.stroke);\n    attr(svgEl, 'stroke', stroke.color);\n    var strokeWidth = style.lineWidth;\n    var strokeScale_1 = style.strokeNoScale ? el.getLineScale() : 1;\n    attr(svgEl, 'stroke-width', (strokeScale_1 ? strokeWidth / strokeScale_1 : 0) + '');\n    attr(svgEl, 'paint-order', style.strokeFirst ? 'stroke' : 'fill');\n    attr(svgEl, 'stroke-opacity', (style.strokeOpacity != null ? style.strokeOpacity * stroke.opacity * opacity : stroke.opacity * opacity) + '');\n    var lineDash = style.lineDash && strokeWidth > 0 && normalizeLineDash(style.lineDash, strokeWidth);\n\n    if (lineDash) {\n      var lineDashOffset = style.lineDashOffset;\n\n      if (strokeScale_1 && strokeScale_1 !== 1) {\n        lineDash = map(lineDash, function (rawVal) {\n          return rawVal / strokeScale_1;\n        });\n\n        if (lineDashOffset) {\n          lineDashOffset /= strokeScale_1;\n          lineDashOffset = mathRound(lineDashOffset);\n        }\n      }\n\n      attr(svgEl, 'stroke-dasharray', lineDash.join(','));\n      attr(svgEl, 'stroke-dashoffset', (lineDashOffset || 0) + '');\n    } else {\n      attr(svgEl, 'stroke-dasharray', NONE);\n    }\n\n    style.lineCap && attr(svgEl, 'stroke-linecap', style.lineCap);\n    style.lineJoin && attr(svgEl, 'stroke-linejoin', style.lineJoin);\n    style.miterLimit && attr(svgEl, 'stroke-miterlimit', style.miterLimit + '');\n  } else {\n    attr(svgEl, 'stroke', NONE);\n  }\n}\n\nvar SVGPathRebuilder = function () {\n  function SVGPathRebuilder() {}\n\n  SVGPathRebuilder.prototype.reset = function () {\n    this._d = [];\n    this._str = '';\n  };\n\n  SVGPathRebuilder.prototype.moveTo = function (x, y) {\n    this._add('M', x, y);\n  };\n\n  SVGPathRebuilder.prototype.lineTo = function (x, y) {\n    this._add('L', x, y);\n  };\n\n  SVGPathRebuilder.prototype.bezierCurveTo = function (x, y, x2, y2, x3, y3) {\n    this._add('C', x, y, x2, y2, x3, y3);\n  };\n\n  SVGPathRebuilder.prototype.quadraticCurveTo = function (x, y, x2, y2) {\n    this._add('Q', x, y, x2, y2);\n  };\n\n  SVGPathRebuilder.prototype.arc = function (cx, cy, r, startAngle, endAngle, anticlockwise) {\n    this.ellipse(cx, cy, r, r, 0, startAngle, endAngle, anticlockwise);\n  };\n\n  SVGPathRebuilder.prototype.ellipse = function (cx, cy, rx, ry, psi, startAngle, endAngle, anticlockwise) {\n    var firstCmd = this._d.length === 0;\n    var dTheta = endAngle - startAngle;\n    var clockwise = !anticlockwise;\n    var dThetaPositive = Math.abs(dTheta);\n    var isCircle = isAroundZero(dThetaPositive - PI2) || (clockwise ? dTheta >= PI2 : -dTheta >= PI2);\n    var unifiedTheta = dTheta > 0 ? dTheta % PI2 : dTheta % PI2 + PI2;\n    var large = false;\n\n    if (isCircle) {\n      large = true;\n    } else if (isAroundZero(dThetaPositive)) {\n      large = false;\n    } else {\n      large = unifiedTheta >= PI === !!clockwise;\n    }\n\n    var x0 = round4(cx + rx * mathCos(startAngle));\n    var y0 = round4(cy + ry * mathSin(startAngle));\n\n    if (isCircle) {\n      if (clockwise) {\n        dTheta = PI2 - 1e-4;\n      } else {\n        dTheta = -PI2 + 1e-4;\n      }\n\n      large = true;\n\n      if (firstCmd) {\n        this._d.push('M', x0, y0);\n      }\n    }\n\n    var x = round4(cx + rx * mathCos(startAngle + dTheta));\n    var y = round4(cy + ry * mathSin(startAngle + dTheta));\n\n    if (isNaN(x0) || isNaN(y0) || isNaN(rx) || isNaN(ry) || isNaN(psi) || isNaN(degree) || isNaN(x) || isNaN(y)) {\n      return '';\n    }\n\n    this._d.push('A', round4(rx), round4(ry), mathRound(psi * degree), +large, +clockwise, x, y);\n  };\n\n  SVGPathRebuilder.prototype.rect = function (x, y, w, h) {\n    this._add('M', x, y);\n\n    this._add('L', x + w, y);\n\n    this._add('L', x + w, y + h);\n\n    this._add('L', x, y + h);\n\n    this._add('L', x, y);\n\n    this._add('Z');\n  };\n\n  SVGPathRebuilder.prototype.closePath = function () {\n    if (this._d.length > 0) {\n      this._add('Z');\n    }\n  };\n\n  SVGPathRebuilder.prototype._add = function (cmd, a, b, c, d, e, f, g, h) {\n    this._d.push(cmd);\n\n    for (var i = 1; i < arguments.length; i++) {\n      var val = arguments[i];\n\n      if (isNaN(val)) {\n        this._invalid = true;\n        return;\n      }\n\n      this._d.push(round4(val));\n    }\n  };\n\n  SVGPathRebuilder.prototype.generateStr = function () {\n    this._str = this._invalid ? '' : this._d.join(' ');\n    this._d = [];\n  };\n\n  SVGPathRebuilder.prototype.getStr = function () {\n    return this._str;\n  };\n\n  return SVGPathRebuilder;\n}();\n\nvar svgPath = {\n  brush: function brush(el) {\n    var style = el.style;\n    var svgEl = el.__svgEl;\n\n    if (!svgEl) {\n      svgEl = createElement('path');\n      el.__svgEl = svgEl;\n    }\n\n    if (!el.path) {\n      el.createPathProxy();\n    }\n\n    var path = el.path;\n\n    if (el.shapeChanged()) {\n      path.beginPath();\n      el.buildPath(path, el.shape);\n      el.pathUpdated();\n    }\n\n    var pathVersion = path.getVersion();\n    var elExt = el;\n    var svgPathBuilder = elExt.__svgPathBuilder;\n\n    if (elExt.__svgPathVersion !== pathVersion || !svgPathBuilder || el.style.strokePercent < 1) {\n      if (!svgPathBuilder) {\n        svgPathBuilder = elExt.__svgPathBuilder = new SVGPathRebuilder();\n      }\n\n      svgPathBuilder.reset();\n      path.rebuildPath(svgPathBuilder, el.style.strokePercent);\n      svgPathBuilder.generateStr();\n      elExt.__svgPathVersion = pathVersion;\n    }\n\n    attr(svgEl, 'd', svgPathBuilder.getStr());\n    bindStyle(svgEl, style, el);\n    setTransform(svgEl, el.transform);\n  }\n};\nexport { svgPath as path };\nvar svgImage = {\n  brush: function brush(el) {\n    var style = el.style;\n    var image = style.image;\n\n    if (image instanceof HTMLImageElement) {\n      image = image.src;\n    } else if (image instanceof HTMLCanvasElement) {\n      image = image.toDataURL();\n    }\n\n    if (!image) {\n      return;\n    }\n\n    var x = style.x || 0;\n    var y = style.y || 0;\n    var dw = style.width;\n    var dh = style.height;\n    var svgEl = el.__svgEl;\n\n    if (!svgEl) {\n      svgEl = createElement('image');\n      el.__svgEl = svgEl;\n    }\n\n    if (image !== el.__imageSrc) {\n      attrXLink(svgEl, 'href', image);\n      el.__imageSrc = image;\n    }\n\n    attr(svgEl, 'width', dw + '');\n    attr(svgEl, 'height', dh + '');\n    attr(svgEl, 'x', x + '');\n    attr(svgEl, 'y', y + '');\n    bindStyle(svgEl, style, el);\n    setTransform(svgEl, el.transform);\n  }\n};\nexport { svgImage as image };\nvar TEXT_ALIGN_TO_ANCHOR = {\n  left: 'start',\n  right: 'end',\n  center: 'middle',\n  middle: 'middle'\n};\n\nfunction adjustTextY(y, lineHeight, textBaseline) {\n  if (textBaseline === 'top') {\n    y += lineHeight / 2;\n  } else if (textBaseline === 'bottom') {\n    y -= lineHeight / 2;\n  }\n\n  return y;\n}\n\nvar svgText = {\n  brush: function brush(el) {\n    var style = el.style;\n    var text = style.text;\n    text != null && (text += '');\n\n    if (!text || isNaN(style.x) || isNaN(style.y)) {\n      return;\n    }\n\n    var textSvgEl = el.__svgEl;\n\n    if (!textSvgEl) {\n      textSvgEl = createElement('text');\n      attrXML(textSvgEl, 'xml:space', 'preserve');\n      el.__svgEl = textSvgEl;\n    }\n\n    var font = style.font || DEFAULT_FONT;\n    var textSvgElStyle = textSvgEl.style;\n    textSvgElStyle.font = font;\n    textSvgEl.textContent = text;\n    bindStyle(textSvgEl, style, el);\n    setTransform(textSvgEl, el.transform);\n    var x = style.x || 0;\n    var y = adjustTextY(style.y || 0, getLineHeight(font), style.textBaseline);\n    var textAlign = TEXT_ALIGN_TO_ANCHOR[style.textAlign] || style.textAlign;\n    attr(textSvgEl, 'dominant-baseline', 'central');\n    attr(textSvgEl, 'text-anchor', textAlign);\n    attr(textSvgEl, 'x', x + '');\n    attr(textSvgEl, 'y', y + '');\n  }\n};\nexport { svgText as text };","import { createElement } from '../core';\nimport * as zrUtil from '../../core/util';\nimport Path from '../../graphic/Path';\nimport ZRImage from '../../graphic/Image';\nimport TSpan from '../../graphic/TSpan';\nimport { path as svgPath, image as svgImage, text as svgText } from '../graphic';\nvar MARK_UNUSED = '0';\nvar MARK_USED = '1';\n\nvar Definable = function () {\n  function Definable(zrId, svgRoot, tagNames, markLabel, domName) {\n    this.nextId = 0;\n    this._domName = '_dom';\n    this.createElement = createElement;\n    this._zrId = zrId;\n    this._svgRoot = svgRoot;\n    this._tagNames = typeof tagNames === 'string' ? [tagNames] : tagNames;\n    this._markLabel = markLabel;\n\n    if (domName) {\n      this._domName = domName;\n    }\n  }\n\n  Definable.prototype.getDefs = function (isForceCreating) {\n    var svgRoot = this._svgRoot;\n\n    var defs = this._svgRoot.getElementsByTagName('defs');\n\n    if (defs.length === 0) {\n      if (isForceCreating) {\n        var defs_1 = svgRoot.insertBefore(this.createElement('defs'), svgRoot.firstChild);\n\n        if (!defs_1.contains) {\n          defs_1.contains = function (el) {\n            var children = defs_1.children;\n\n            if (!children) {\n              return false;\n            }\n\n            for (var i = children.length - 1; i >= 0; --i) {\n              if (children[i] === el) {\n                return true;\n              }\n            }\n\n            return false;\n          };\n        }\n\n        return defs_1;\n      } else {\n        return null;\n      }\n    } else {\n      return defs[0];\n    }\n  };\n\n  Definable.prototype.doUpdate = function (target, onUpdate) {\n    if (!target) {\n      return;\n    }\n\n    var defs = this.getDefs(false);\n\n    if (target[this._domName] && defs.contains(target[this._domName])) {\n      if (typeof onUpdate === 'function') {\n        onUpdate(target);\n      }\n    } else {\n      var dom = this.add(target);\n\n      if (dom) {\n        target[this._domName] = dom;\n      }\n    }\n  };\n\n  Definable.prototype.add = function (target) {\n    return null;\n  };\n\n  Definable.prototype.addDom = function (dom) {\n    var defs = this.getDefs(true);\n\n    if (dom.parentNode !== defs) {\n      defs.appendChild(dom);\n    }\n  };\n\n  Definable.prototype.removeDom = function (target) {\n    var defs = this.getDefs(false);\n\n    if (defs && target[this._domName]) {\n      defs.removeChild(target[this._domName]);\n      target[this._domName] = null;\n    }\n  };\n\n  Definable.prototype.getDoms = function () {\n    var defs = this.getDefs(false);\n\n    if (!defs) {\n      return [];\n    }\n\n    var doms = [];\n    zrUtil.each(this._tagNames, function (tagName) {\n      var tags = defs.getElementsByTagName(tagName);\n\n      for (var i = 0; i < tags.length; i++) {\n        doms.push(tags[i]);\n      }\n    });\n    return doms;\n  };\n\n  Definable.prototype.markAllUnused = function () {\n    var doms = this.getDoms();\n    var that = this;\n    zrUtil.each(doms, function (dom) {\n      dom[that._markLabel] = MARK_UNUSED;\n    });\n  };\n\n  Definable.prototype.markDomUsed = function (dom) {\n    dom && (dom[this._markLabel] = MARK_USED);\n  };\n\n  ;\n\n  Definable.prototype.markDomUnused = function (dom) {\n    dom && (dom[this._markLabel] = MARK_UNUSED);\n  };\n\n  ;\n\n  Definable.prototype.isDomUnused = function (dom) {\n    return dom && dom[this._markLabel] !== MARK_USED;\n  };\n\n  Definable.prototype.removeUnused = function () {\n    var _this = this;\n\n    var defs = this.getDefs(false);\n\n    if (!defs) {\n      return;\n    }\n\n    var doms = this.getDoms();\n    zrUtil.each(doms, function (dom) {\n      if (_this.isDomUnused(dom)) {\n        defs.removeChild(dom);\n      }\n    });\n  };\n\n  Definable.prototype.getSvgProxy = function (displayable) {\n    if (displayable instanceof Path) {\n      return svgPath;\n    } else if (displayable instanceof ZRImage) {\n      return svgImage;\n    } else if (displayable instanceof TSpan) {\n      return svgText;\n    } else {\n      return svgPath;\n    }\n  };\n\n  Definable.prototype.getSvgElement = function (displayable) {\n    return displayable.__svgEl;\n  };\n\n  return Definable;\n}();\n\nexport default Definable;","import { __extends } from \"tslib\";\nimport Definable from './Definable';\nimport * as zrUtil from '../../core/util';\nimport * as colorTool from '../../tool/color';\n\nfunction isLinearGradient(value) {\n  return value.type === 'linear';\n}\n\nfunction isRadialGradient(value) {\n  return value.type === 'radial';\n}\n\nfunction isGradient(value) {\n  return value && (value.type === 'linear' || value.type === 'radial');\n}\n\nvar GradientManager = function (_super) {\n  __extends(GradientManager, _super);\n\n  function GradientManager(zrId, svgRoot) {\n    return _super.call(this, zrId, svgRoot, ['linearGradient', 'radialGradient'], '__gradient_in_use__') || this;\n  }\n\n  GradientManager.prototype.addWithoutUpdate = function (svgElement, displayable) {\n    if (displayable && displayable.style) {\n      var that_1 = this;\n      zrUtil.each(['fill', 'stroke'], function (fillOrStroke) {\n        var value = displayable.style[fillOrStroke];\n\n        if (isGradient(value)) {\n          var gradient = value;\n          var defs = that_1.getDefs(true);\n          var dom = void 0;\n\n          if (gradient.__dom) {\n            dom = gradient.__dom;\n\n            if (!defs.contains(gradient.__dom)) {\n              that_1.addDom(dom);\n            }\n          } else {\n            dom = that_1.add(gradient);\n          }\n\n          that_1.markUsed(displayable);\n          var id = dom.getAttribute('id');\n          svgElement.setAttribute(fillOrStroke, 'url(#' + id + ')');\n        }\n      });\n    }\n  };\n\n  GradientManager.prototype.add = function (gradient) {\n    var dom;\n\n    if (isLinearGradient(gradient)) {\n      dom = this.createElement('linearGradient');\n    } else if (isRadialGradient(gradient)) {\n      dom = this.createElement('radialGradient');\n    } else {\n      zrUtil.logError('Illegal gradient type.');\n      return null;\n    }\n\n    gradient.id = gradient.id || this.nextId++;\n    dom.setAttribute('id', 'zr' + this._zrId + '-gradient-' + gradient.id);\n    this.updateDom(gradient, dom);\n    this.addDom(dom);\n    return dom;\n  };\n\n  GradientManager.prototype.update = function (gradient) {\n    if (!isGradient(gradient)) {\n      return;\n    }\n\n    var that = this;\n    this.doUpdate(gradient, function () {\n      var dom = gradient.__dom;\n\n      if (!dom) {\n        return;\n      }\n\n      var tagName = dom.tagName;\n      var type = gradient.type;\n\n      if (type === 'linear' && tagName === 'linearGradient' || type === 'radial' && tagName === 'radialGradient') {\n        that.updateDom(gradient, gradient.__dom);\n      } else {\n        that.removeDom(gradient);\n        that.add(gradient);\n      }\n    });\n  };\n\n  GradientManager.prototype.updateDom = function (gradient, dom) {\n    if (isLinearGradient(gradient)) {\n      dom.setAttribute('x1', gradient.x + '');\n      dom.setAttribute('y1', gradient.y + '');\n      dom.setAttribute('x2', gradient.x2 + '');\n      dom.setAttribute('y2', gradient.y2 + '');\n    } else if (isRadialGradient(gradient)) {\n      dom.setAttribute('cx', gradient.x + '');\n      dom.setAttribute('cy', gradient.y + '');\n      dom.setAttribute('r', gradient.r + '');\n    } else {\n      zrUtil.logError('Illegal gradient type.');\n      return;\n    }\n\n    if (gradient.global) {\n      dom.setAttribute('gradientUnits', 'userSpaceOnUse');\n    } else {\n      dom.setAttribute('gradientUnits', 'objectBoundingBox');\n    }\n\n    dom.innerHTML = '';\n    var colors = gradient.colorStops;\n\n    for (var i = 0, len = colors.length; i < len; ++i) {\n      var stop_1 = this.createElement('stop');\n      stop_1.setAttribute('offset', colors[i].offset * 100 + '%');\n      var color = colors[i].color;\n\n      if (color.indexOf('rgba') > -1) {\n        var opacity = colorTool.parse(color)[3];\n        var hex = colorTool.toHex(color);\n        stop_1.setAttribute('stop-color', '#' + hex);\n        stop_1.setAttribute('stop-opacity', opacity + '');\n      } else {\n        stop_1.setAttribute('stop-color', colors[i].color);\n      }\n\n      dom.appendChild(stop_1);\n    }\n\n    gradient.__dom = dom;\n  };\n\n  GradientManager.prototype.markUsed = function (displayable) {\n    if (displayable.style) {\n      var gradient = displayable.style.fill;\n\n      if (gradient && gradient.__dom) {\n        _super.prototype.markDomUsed.call(this, gradient.__dom);\n      }\n\n      gradient = displayable.style.stroke;\n\n      if (gradient && gradient.__dom) {\n        _super.prototype.markDomUsed.call(this, gradient.__dom);\n      }\n    }\n  };\n\n  return GradientManager;\n}(Definable);\n\nexport default GradientManager;","import { __extends } from \"tslib\";\nimport Definable from './Definable';\nimport * as zrUtil from '../../core/util';\nimport { createOrUpdateImage } from '../../graphic/helper/image';\nimport WeakMap from '../../core/WeakMap';\n\nfunction isPattern(value) {\n  return value && (!!value.image || !!value.svgElement);\n}\n\nvar patternDomMap = new WeakMap();\n\nvar PatternManager = function (_super) {\n  __extends(PatternManager, _super);\n\n  function PatternManager(zrId, svgRoot) {\n    return _super.call(this, zrId, svgRoot, ['pattern'], '__pattern_in_use__') || this;\n  }\n\n  PatternManager.prototype.addWithoutUpdate = function (svgElement, displayable) {\n    if (displayable && displayable.style) {\n      var that_1 = this;\n      zrUtil.each(['fill', 'stroke'], function (fillOrStroke) {\n        var pattern = displayable.style[fillOrStroke];\n\n        if (isPattern(pattern)) {\n          var defs = that_1.getDefs(true);\n          var dom = patternDomMap.get(pattern);\n\n          if (dom) {\n            if (!defs.contains(dom)) {\n              that_1.addDom(dom);\n            }\n          } else {\n            dom = that_1.add(pattern);\n          }\n\n          that_1.markUsed(displayable);\n          var id = dom.getAttribute('id');\n          svgElement.setAttribute(fillOrStroke, 'url(#' + id + ')');\n        }\n      });\n    }\n  };\n\n  PatternManager.prototype.add = function (pattern) {\n    if (!isPattern(pattern)) {\n      return;\n    }\n\n    var dom = this.createElement('pattern');\n    pattern.id = pattern.id == null ? this.nextId++ : pattern.id;\n    dom.setAttribute('id', 'zr' + this._zrId + '-pattern-' + pattern.id);\n    dom.setAttribute('x', '0');\n    dom.setAttribute('y', '0');\n    dom.setAttribute('patternUnits', 'userSpaceOnUse');\n    this.updateDom(pattern, dom);\n    this.addDom(dom);\n    return dom;\n  };\n\n  PatternManager.prototype.update = function (pattern) {\n    if (!isPattern(pattern)) {\n      return;\n    }\n\n    var that = this;\n    this.doUpdate(pattern, function () {\n      var dom = patternDomMap.get(pattern);\n      that.updateDom(pattern, dom);\n    });\n  };\n\n  PatternManager.prototype.updateDom = function (pattern, patternDom) {\n    var svgElement = pattern.svgElement;\n\n    if (svgElement instanceof SVGElement) {\n      if (svgElement.parentNode !== patternDom) {\n        patternDom.innerHTML = '';\n        patternDom.appendChild(svgElement);\n        patternDom.setAttribute('width', pattern.svgWidth + '');\n        patternDom.setAttribute('height', pattern.svgHeight + '');\n      }\n    } else {\n      var img = void 0;\n      var prevImage = patternDom.getElementsByTagName('image');\n\n      if (prevImage.length) {\n        if (pattern.image) {\n          img = prevImage[0];\n        } else {\n          patternDom.removeChild(prevImage[0]);\n          return;\n        }\n      } else if (pattern.image) {\n        img = this.createElement('image');\n      }\n\n      if (img) {\n        var imageSrc = void 0;\n        var patternImage = pattern.image;\n\n        if (typeof patternImage === 'string') {\n          imageSrc = patternImage;\n        } else if (patternImage instanceof HTMLImageElement) {\n          imageSrc = patternImage.src;\n        } else if (patternImage instanceof HTMLCanvasElement) {\n          imageSrc = patternImage.toDataURL();\n        }\n\n        if (imageSrc) {\n          img.setAttribute('href', imageSrc);\n          img.setAttribute('x', '0');\n          img.setAttribute('y', '0');\n          var hostEl = {\n            dirty: function dirty() {}\n          };\n          var createdImage = createOrUpdateImage(imageSrc, img, hostEl, function (img) {\n            patternDom.setAttribute('width', img.width + '');\n            patternDom.setAttribute('height', img.height + '');\n          });\n\n          if (createdImage && createdImage.width && createdImage.height) {\n            patternDom.setAttribute('width', createdImage.width + '');\n            patternDom.setAttribute('height', createdImage.height + '');\n          }\n\n          patternDom.appendChild(img);\n        }\n      }\n    }\n\n    var x = pattern.x || 0;\n    var y = pattern.y || 0;\n    var rotation = (pattern.rotation || 0) / Math.PI * 180;\n    var scaleX = pattern.scaleX || 1;\n    var scaleY = pattern.scaleY || 1;\n    var transform = \"translate(\" + x + \", \" + y + \") rotate(\" + rotation + \") scale(\" + scaleX + \", \" + scaleY + \")\";\n    patternDom.setAttribute('patternTransform', transform);\n    patternDomMap.set(pattern, patternDom);\n  };\n\n  PatternManager.prototype.markUsed = function (displayable) {\n    if (displayable.style) {\n      if (isPattern(displayable.style.fill)) {\n        _super.prototype.markDomUsed.call(this, patternDomMap.get(displayable.style.fill));\n      }\n\n      if (isPattern(displayable.style.stroke)) {\n        _super.prototype.markDomUsed.call(this, patternDomMap.get(displayable.style.stroke));\n      }\n    }\n  };\n\n  return PatternManager;\n}(Definable);\n\nexport default PatternManager;","import { __extends } from \"tslib\";\nimport Definable from './Definable';\nimport * as zrUtil from '../../core/util';\nimport { isClipPathChanged } from '../../canvas/helper';\n\nfunction generateClipPathsKey(clipPaths) {\n  var key = [];\n\n  if (clipPaths) {\n    for (var i = 0; i < clipPaths.length; i++) {\n      var clipPath = clipPaths[i];\n      key.push(clipPath.id);\n    }\n  }\n\n  return key.join(',');\n}\n\nexport function hasClipPath(displayable) {\n  var clipPaths = displayable.__clipPaths;\n  return clipPaths && clipPaths.length > 0;\n}\n\nvar ClippathManager = function (_super) {\n  __extends(ClippathManager, _super);\n\n  function ClippathManager(zrId, svgRoot) {\n    var _this = _super.call(this, zrId, svgRoot, 'clipPath', '__clippath_in_use__') || this;\n\n    _this._refGroups = {};\n    _this._keyDuplicateCount = {};\n    return _this;\n  }\n\n  ClippathManager.prototype.markAllUnused = function () {\n    _super.prototype.markAllUnused.call(this);\n\n    var refGroups = this._refGroups;\n\n    for (var key in refGroups) {\n      if (refGroups.hasOwnProperty(key)) {\n        this.markDomUnused(refGroups[key]);\n      }\n    }\n\n    this._keyDuplicateCount = {};\n  };\n\n  ClippathManager.prototype._getClipPathGroup = function (displayable, prevDisplayable) {\n    if (!hasClipPath(displayable)) {\n      return;\n    }\n\n    var clipPaths = displayable.__clipPaths;\n    var keyDuplicateCount = this._keyDuplicateCount;\n    var clipPathKey = generateClipPathsKey(clipPaths);\n\n    if (isClipPathChanged(clipPaths, prevDisplayable && prevDisplayable.__clipPaths)) {\n      keyDuplicateCount[clipPathKey] = keyDuplicateCount[clipPathKey] || 0;\n      keyDuplicateCount[clipPathKey] && (clipPathKey += '-' + keyDuplicateCount[clipPathKey]);\n      keyDuplicateCount[clipPathKey]++;\n    }\n\n    return this._refGroups[clipPathKey] || (this._refGroups[clipPathKey] = this.createElement('g'));\n  };\n\n  ClippathManager.prototype.update = function (displayable, prevDisplayable) {\n    var clipGroup = this._getClipPathGroup(displayable, prevDisplayable);\n\n    if (clipGroup) {\n      this.markDomUsed(clipGroup);\n      this.updateDom(clipGroup, displayable.__clipPaths);\n    }\n\n    return clipGroup;\n  };\n\n  ;\n\n  ClippathManager.prototype.updateDom = function (parentEl, clipPaths) {\n    if (clipPaths && clipPaths.length > 0) {\n      var defs = this.getDefs(true);\n      var clipPath = clipPaths[0];\n      var clipPathEl = void 0;\n      var id = void 0;\n\n      if (clipPath._dom) {\n        id = clipPath._dom.getAttribute('id');\n        clipPathEl = clipPath._dom;\n\n        if (!defs.contains(clipPathEl)) {\n          defs.appendChild(clipPathEl);\n        }\n      } else {\n        id = 'zr' + this._zrId + '-clip-' + this.nextId;\n        ++this.nextId;\n        clipPathEl = this.createElement('clipPath');\n        clipPathEl.setAttribute('id', id);\n        defs.appendChild(clipPathEl);\n        clipPath._dom = clipPathEl;\n      }\n\n      var svgProxy = this.getSvgProxy(clipPath);\n      svgProxy.brush(clipPath);\n      var pathEl = this.getSvgElement(clipPath);\n      clipPathEl.innerHTML = '';\n      clipPathEl.appendChild(pathEl);\n      parentEl.setAttribute('clip-path', 'url(#' + id + ')');\n\n      if (clipPaths.length > 1) {\n        this.updateDom(clipPathEl, clipPaths.slice(1));\n      }\n    } else {\n      if (parentEl) {\n        parentEl.setAttribute('clip-path', 'none');\n      }\n    }\n  };\n\n  ;\n\n  ClippathManager.prototype.markUsed = function (displayable) {\n    var _this = this;\n\n    if (displayable.__clipPaths) {\n      zrUtil.each(displayable.__clipPaths, function (clipPath) {\n        if (clipPath._dom) {\n          _super.prototype.markDomUsed.call(_this, clipPath._dom);\n        }\n      });\n    }\n  };\n\n  ;\n\n  ClippathManager.prototype.removeUnused = function () {\n    _super.prototype.removeUnused.call(this);\n\n    var newRefGroupsMap = {};\n    var refGroups = this._refGroups;\n\n    for (var key in refGroups) {\n      if (refGroups.hasOwnProperty(key)) {\n        var group = refGroups[key];\n\n        if (!this.isDomUnused(group)) {\n          newRefGroupsMap[key] = group;\n        } else if (group.parentNode) {\n          group.parentNode.removeChild(group);\n        }\n      }\n    }\n\n    this._refGroups = newRefGroupsMap;\n  };\n\n  return ClippathManager;\n}(Definable);\n\nexport default ClippathManager;","import { __extends } from \"tslib\";\nimport Definable from './Definable';\nimport { normalizeColor } from '../core';\n\nvar ShadowManager = function (_super) {\n  __extends(ShadowManager, _super);\n\n  function ShadowManager(zrId, svgRoot) {\n    var _this = _super.call(this, zrId, svgRoot, ['filter'], '__filter_in_use__', '_shadowDom') || this;\n\n    _this._shadowDomMap = {};\n    _this._shadowDomPool = [];\n    return _this;\n  }\n\n  ShadowManager.prototype._getFromPool = function () {\n    var shadowDom = this._shadowDomPool.pop();\n\n    if (!shadowDom) {\n      shadowDom = this.createElement('filter');\n      shadowDom.setAttribute('id', 'zr' + this._zrId + '-shadow-' + this.nextId++);\n      var domChild = this.createElement('feDropShadow');\n      shadowDom.appendChild(domChild);\n      this.addDom(shadowDom);\n    }\n\n    return shadowDom;\n  };\n\n  ShadowManager.prototype.update = function (svgElement, displayable) {\n    var style = displayable.style;\n\n    if (hasShadow(style)) {\n      var shadowKey = getShadowKey(displayable);\n      var shadowDom = displayable._shadowDom = this._shadowDomMap[shadowKey];\n\n      if (!shadowDom) {\n        shadowDom = this._getFromPool();\n        this._shadowDomMap[shadowKey] = shadowDom;\n      }\n\n      this.updateDom(svgElement, displayable, shadowDom);\n    } else {\n      this.remove(svgElement, displayable);\n    }\n  };\n\n  ShadowManager.prototype.remove = function (svgElement, displayable) {\n    if (displayable._shadowDom != null) {\n      displayable._shadowDom = null;\n      svgElement.removeAttribute('filter');\n    }\n  };\n\n  ShadowManager.prototype.updateDom = function (svgElement, displayable, shadowDom) {\n    var domChild = shadowDom.children[0];\n    var style = displayable.style;\n    var globalScale = displayable.getGlobalScale();\n    var scaleX = globalScale[0];\n    var scaleY = globalScale[1];\n\n    if (!scaleX || !scaleY) {\n      return;\n    }\n\n    var offsetX = style.shadowOffsetX || 0;\n    var offsetY = style.shadowOffsetY || 0;\n    var blur = style.shadowBlur;\n    var normalizedColor = normalizeColor(style.shadowColor);\n    domChild.setAttribute('dx', offsetX / scaleX + '');\n    domChild.setAttribute('dy', offsetY / scaleY + '');\n    domChild.setAttribute('flood-color', normalizedColor.color);\n    domChild.setAttribute('flood-opacity', normalizedColor.opacity + '');\n    var stdDx = blur / 2 / scaleX;\n    var stdDy = blur / 2 / scaleY;\n    var stdDeviation = stdDx + ' ' + stdDy;\n    domChild.setAttribute('stdDeviation', stdDeviation);\n    shadowDom.setAttribute('x', '-100%');\n    shadowDom.setAttribute('y', '-100%');\n    shadowDom.setAttribute('width', '300%');\n    shadowDom.setAttribute('height', '300%');\n    displayable._shadowDom = shadowDom;\n    var id = shadowDom.getAttribute('id');\n    svgElement.setAttribute('filter', 'url(#' + id + ')');\n  };\n\n  ShadowManager.prototype.removeUnused = function () {\n    var defs = this.getDefs(false);\n\n    if (!defs) {\n      return;\n    }\n\n    var shadowDomsPool = this._shadowDomPool;\n    var shadowDomMap = this._shadowDomMap;\n\n    for (var key in shadowDomMap) {\n      if (shadowDomMap.hasOwnProperty(key)) {\n        shadowDomsPool.push(shadowDomMap[key]);\n      }\n    }\n\n    this._shadowDomMap = {};\n  };\n\n  return ShadowManager;\n}(Definable);\n\nexport default ShadowManager;\n\nfunction hasShadow(style) {\n  return style && (style.shadowBlur || style.shadowOffsetX || style.shadowOffsetY);\n}\n\nfunction getShadowKey(displayable) {\n  var style = displayable.style;\n  var globalScale = displayable.getGlobalScale();\n  return [style.shadowColor, (style.shadowBlur || 0).toFixed(2), (style.shadowOffsetX || 0).toFixed(2), (style.shadowOffsetY || 0).toFixed(2), globalScale[0], globalScale[1]].join(',');\n}","import { createElement, normalizeColor } from './core';\nimport * as util from '../core/util';\nimport Path from '../graphic/Path';\nimport ZRImage from '../graphic/Image';\nimport TSpan from '../graphic/TSpan';\nimport arrayDiff from '../core/arrayDiff';\nimport GradientManager from './helper/GradientManager';\nimport PatternManager from './helper/PatternManager';\nimport ClippathManager, { hasClipPath } from './helper/ClippathManager';\nimport ShadowManager from './helper/ShadowManager';\nimport { path as svgPath, image as svgImage, text as svgText } from './graphic';\n\nfunction parseInt10(val) {\n  return parseInt(val, 10);\n}\n\nfunction getSvgProxy(el) {\n  if (el instanceof Path) {\n    return svgPath;\n  } else if (el instanceof ZRImage) {\n    return svgImage;\n  } else if (el instanceof TSpan) {\n    return svgText;\n  } else {\n    return svgPath;\n  }\n}\n\nfunction checkParentAvailable(parent, child) {\n  return child && parent && child.parentNode !== parent;\n}\n\nfunction insertAfter(parent, child, prevSibling) {\n  if (checkParentAvailable(parent, child) && prevSibling) {\n    var nextSibling = prevSibling.nextSibling;\n    nextSibling ? parent.insertBefore(child, nextSibling) : parent.appendChild(child);\n  }\n}\n\nfunction prepend(parent, child) {\n  if (checkParentAvailable(parent, child)) {\n    var firstChild = parent.firstChild;\n    firstChild ? parent.insertBefore(child, firstChild) : parent.appendChild(child);\n  }\n}\n\nfunction remove(parent, child) {\n  if (child && parent && child.parentNode === parent) {\n    parent.removeChild(child);\n  }\n}\n\nfunction removeFromMyParent(child) {\n  if (child && child.parentNode) {\n    child.parentNode.removeChild(child);\n  }\n}\n\nfunction getSvgElement(displayable) {\n  return displayable.__svgEl;\n}\n\nvar SVGPainter = function () {\n  function SVGPainter(root, storage, opts, zrId) {\n    this.type = 'svg';\n    this.refreshHover = createMethodNotSupport('refreshHover');\n    this.pathToImage = createMethodNotSupport('pathToImage');\n    this.configLayer = createMethodNotSupport('configLayer');\n    this.root = root;\n    this.storage = storage;\n    this._opts = opts = util.extend({}, opts || {});\n    var svgDom = createElement('svg');\n    svgDom.setAttributeNS('http://www.w3.org/2000/xmlns/', 'xmlns', 'http://www.w3.org/2000/svg');\n    svgDom.setAttributeNS('http://www.w3.org/2000/xmlns/', 'xmlns:xlink', 'http://www.w3.org/1999/xlink');\n    svgDom.setAttribute('version', '1.1');\n    svgDom.setAttribute('baseProfile', 'full');\n    svgDom.style.cssText = 'user-select:none;position:absolute;left:0;top:0;';\n    var bgRoot = createElement('g');\n    svgDom.appendChild(bgRoot);\n    var svgRoot = createElement('g');\n    svgDom.appendChild(svgRoot);\n    this._gradientManager = new GradientManager(zrId, svgRoot);\n    this._patternManager = new PatternManager(zrId, svgRoot);\n    this._clipPathManager = new ClippathManager(zrId, svgRoot);\n    this._shadowManager = new ShadowManager(zrId, svgRoot);\n    var viewport = document.createElement('div');\n    viewport.style.cssText = 'overflow:hidden;position:relative';\n    this._svgDom = svgDom;\n    this._svgRoot = svgRoot;\n    this._backgroundRoot = bgRoot;\n    this._viewport = viewport;\n    root.appendChild(viewport);\n    viewport.appendChild(svgDom);\n    this.resize(opts.width, opts.height);\n    this._visibleList = [];\n  }\n\n  SVGPainter.prototype.getType = function () {\n    return 'svg';\n  };\n\n  SVGPainter.prototype.getViewportRoot = function () {\n    return this._viewport;\n  };\n\n  SVGPainter.prototype.getSvgDom = function () {\n    return this._svgDom;\n  };\n\n  SVGPainter.prototype.getSvgRoot = function () {\n    return this._svgRoot;\n  };\n\n  SVGPainter.prototype.getViewportRootOffset = function () {\n    var viewportRoot = this.getViewportRoot();\n\n    if (viewportRoot) {\n      return {\n        offsetLeft: viewportRoot.offsetLeft || 0,\n        offsetTop: viewportRoot.offsetTop || 0\n      };\n    }\n  };\n\n  SVGPainter.prototype.refresh = function () {\n    var list = this.storage.getDisplayList(true);\n\n    this._paintList(list);\n  };\n\n  SVGPainter.prototype.setBackgroundColor = function (backgroundColor) {\n    if (this._backgroundRoot && this._backgroundNode) {\n      this._backgroundRoot.removeChild(this._backgroundNode);\n    }\n\n    var bgNode = createElement('rect');\n    bgNode.setAttribute('width', this.getWidth());\n    bgNode.setAttribute('height', this.getHeight());\n    bgNode.setAttribute('x', 0);\n    bgNode.setAttribute('y', 0);\n    bgNode.setAttribute('id', 0);\n\n    var _a = normalizeColor(backgroundColor),\n        color = _a.color,\n        opacity = _a.opacity;\n\n    bgNode.setAttribute('fill', color);\n    bgNode.setAttribute('fill-opacity', opacity);\n\n    this._backgroundRoot.appendChild(bgNode);\n\n    this._backgroundNode = bgNode;\n  };\n\n  SVGPainter.prototype.createSVGElement = function (tag) {\n    return createElement(tag);\n  };\n\n  SVGPainter.prototype.paintOne = function (el) {\n    var svgProxy = getSvgProxy(el);\n    svgProxy && svgProxy.brush(el);\n    return getSvgElement(el);\n  };\n\n  SVGPainter.prototype._paintList = function (list) {\n    var gradientManager = this._gradientManager;\n    var patternManager = this._patternManager;\n    var clipPathManager = this._clipPathManager;\n    var shadowManager = this._shadowManager;\n    gradientManager.markAllUnused();\n    patternManager.markAllUnused();\n    clipPathManager.markAllUnused();\n    shadowManager.markAllUnused();\n    var svgRoot = this._svgRoot;\n    var visibleList = this._visibleList;\n    var listLen = list.length;\n    var newVisibleList = [];\n\n    for (var i = 0; i < listLen; i++) {\n      var displayable = list[i];\n      var svgProxy = getSvgProxy(displayable);\n      var svgElement = getSvgElement(displayable);\n\n      if (!displayable.invisible) {\n        if (displayable.__dirty || !svgElement) {\n          svgProxy && svgProxy.brush(displayable);\n          svgElement = getSvgElement(displayable);\n\n          if (svgElement && displayable.style) {\n            gradientManager.update(displayable.style.fill);\n            gradientManager.update(displayable.style.stroke);\n            patternManager.update(displayable.style.fill);\n            patternManager.update(displayable.style.stroke);\n            shadowManager.update(svgElement, displayable);\n          }\n\n          displayable.__dirty = 0;\n        }\n\n        if (svgElement) {\n          newVisibleList.push(displayable);\n        }\n      }\n    }\n\n    var diff = arrayDiff(visibleList, newVisibleList);\n    var prevSvgElement;\n    var topPrevSvgElement;\n\n    for (var i = 0; i < diff.length; i++) {\n      var item = diff[i];\n\n      if (item.removed) {\n        for (var k = 0; k < item.count; k++) {\n          var displayable = visibleList[item.indices[k]];\n          var svgElement = getSvgElement(displayable);\n          hasClipPath(displayable) ? removeFromMyParent(svgElement) : remove(svgRoot, svgElement);\n        }\n      }\n    }\n\n    var prevDisplayable;\n    var currentClipGroup;\n\n    for (var i = 0; i < diff.length; i++) {\n      var item = diff[i];\n\n      if (item.removed) {\n        continue;\n      }\n\n      for (var k = 0; k < item.count; k++) {\n        var displayable = newVisibleList[item.indices[k]];\n        var clipGroup = clipPathManager.update(displayable, prevDisplayable);\n\n        if (clipGroup !== currentClipGroup) {\n          prevSvgElement = topPrevSvgElement;\n\n          if (clipGroup) {\n            prevSvgElement ? insertAfter(svgRoot, clipGroup, prevSvgElement) : prepend(svgRoot, clipGroup);\n            topPrevSvgElement = clipGroup;\n            prevSvgElement = null;\n          }\n\n          currentClipGroup = clipGroup;\n        }\n\n        var svgElement = getSvgElement(displayable);\n        prevSvgElement ? insertAfter(currentClipGroup || svgRoot, svgElement, prevSvgElement) : prepend(currentClipGroup || svgRoot, svgElement);\n        prevSvgElement = svgElement || prevSvgElement;\n\n        if (!currentClipGroup) {\n          topPrevSvgElement = prevSvgElement;\n        }\n\n        gradientManager.markUsed(displayable);\n        gradientManager.addWithoutUpdate(svgElement, displayable);\n        patternManager.markUsed(displayable);\n        patternManager.addWithoutUpdate(svgElement, displayable);\n        clipPathManager.markUsed(displayable);\n        prevDisplayable = displayable;\n      }\n    }\n\n    gradientManager.removeUnused();\n    patternManager.removeUnused();\n    clipPathManager.removeUnused();\n    shadowManager.removeUnused();\n    this._visibleList = newVisibleList;\n  };\n\n  SVGPainter.prototype.resize = function (width, height) {\n    var viewport = this._viewport;\n    viewport.style.display = 'none';\n    var opts = this._opts;\n    width != null && (opts.width = width);\n    height != null && (opts.height = height);\n    width = this._getSize(0);\n    height = this._getSize(1);\n    viewport.style.display = '';\n\n    if (this._width !== width || this._height !== height) {\n      this._width = width;\n      this._height = height;\n      var viewportStyle = viewport.style;\n      viewportStyle.width = width + 'px';\n      viewportStyle.height = height + 'px';\n      var svgRoot = this._svgDom;\n      svgRoot.setAttribute('width', width + '');\n      svgRoot.setAttribute('height', height + '');\n    }\n\n    if (this._backgroundNode) {\n      this._backgroundNode.setAttribute('width', width);\n\n      this._backgroundNode.setAttribute('height', height);\n    }\n  };\n\n  SVGPainter.prototype.getWidth = function () {\n    return this._width;\n  };\n\n  SVGPainter.prototype.getHeight = function () {\n    return this._height;\n  };\n\n  SVGPainter.prototype._getSize = function (whIdx) {\n    var opts = this._opts;\n    var wh = ['width', 'height'][whIdx];\n    var cwh = ['clientWidth', 'clientHeight'][whIdx];\n    var plt = ['paddingLeft', 'paddingTop'][whIdx];\n    var prb = ['paddingRight', 'paddingBottom'][whIdx];\n\n    if (opts[wh] != null && opts[wh] !== 'auto') {\n      return parseFloat(opts[wh]);\n    }\n\n    var root = this.root;\n    var stl = document.defaultView.getComputedStyle(root);\n    return (root[cwh] || parseInt10(stl[wh]) || parseInt10(root.style[wh])) - (parseInt10(stl[plt]) || 0) - (parseInt10(stl[prb]) || 0) | 0;\n  };\n\n  SVGPainter.prototype.dispose = function () {\n    this.root.innerHTML = '';\n    this._svgRoot = this._backgroundRoot = this._svgDom = this._backgroundNode = this._viewport = this.storage = null;\n  };\n\n  SVGPainter.prototype.clear = function () {\n    var viewportNode = this._viewport;\n\n    if (viewportNode && viewportNode.parentNode) {\n      viewportNode.parentNode.removeChild(viewportNode);\n    }\n  };\n\n  SVGPainter.prototype.toDataURL = function () {\n    this.refresh();\n    var svgDom = this._svgDom;\n    var outerHTML = svgDom.outerHTML || (svgDom.parentNode && svgDom.parentNode).innerHTML;\n    var html = encodeURIComponent(outerHTML.replace(/></g, '>\\n\\r<'));\n    return 'data:image/svg+xml;charset=UTF-8,' + html;\n  };\n\n  return SVGPainter;\n}();\n\nfunction createMethodNotSupport(method) {\n  return function () {\n    util.logError('In SVG mode painter not support method \"' + method + '\"');\n  };\n}\n\nexport default SVGPainter;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { parsePercent, linearMap } from '../../util/number';\nimport * as layout from '../../util/layout';\nimport * as zrUtil from 'zrender/lib/core/util';\nvar PI2 = Math.PI * 2;\nvar RADIAN = Math.PI / 180;\n\nfunction getViewRect(seriesModel, api) {\n  return layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n}\n\nexport function getBasicPieLayout(seriesModel, api) {\n  var viewRect = getViewRect(seriesModel, api);\n  var center = seriesModel.get('center');\n  var radius = seriesModel.get('radius');\n\n  if (!zrUtil.isArray(radius)) {\n    radius = [0, radius];\n  }\n\n  if (!zrUtil.isArray(center)) {\n    center = [center, center];\n  }\n\n  var width = parsePercent(viewRect.width, api.getWidth());\n  var height = parsePercent(viewRect.height, api.getHeight());\n  var size = Math.min(width, height);\n  var cx = parsePercent(center[0], width) + viewRect.x;\n  var cy = parsePercent(center[1], height) + viewRect.y;\n  var r0 = parsePercent(radius[0], size / 2);\n  var r = parsePercent(radius[1], size / 2);\n  return {\n    cx: cx,\n    cy: cy,\n    r0: r0,\n    r: r\n  };\n}\nexport default function pieLayout(seriesType, ecModel, api) {\n  ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n    var data = seriesModel.getData();\n    var valueDim = data.mapDimension('value');\n    var viewRect = getViewRect(seriesModel, api);\n\n    var _a = getBasicPieLayout(seriesModel, api),\n        cx = _a.cx,\n        cy = _a.cy,\n        r = _a.r,\n        r0 = _a.r0;\n\n    var startAngle = -seriesModel.get('startAngle') * RADIAN;\n    var minAngle = seriesModel.get('minAngle') * RADIAN;\n    var validDataCount = 0;\n    data.each(valueDim, function (value) {\n      !isNaN(value) && validDataCount++;\n    });\n    var sum = data.getSum(valueDim); // Sum may be 0\n\n    var unitRadian = Math.PI / (sum || validDataCount) * 2;\n    var clockwise = seriesModel.get('clockwise');\n    var roseType = seriesModel.get('roseType');\n    var stillShowZeroSum = seriesModel.get('stillShowZeroSum'); // [0...max]\n\n    var extent = data.getDataExtent(valueDim);\n    extent[0] = 0; // In the case some sector angle is smaller than minAngle\n\n    var restAngle = PI2;\n    var valueSumLargerThanMinAngle = 0;\n    var currentAngle = startAngle;\n    var dir = clockwise ? 1 : -1;\n    data.setLayout({\n      viewRect: viewRect,\n      r: r\n    });\n    data.each(valueDim, function (value, idx) {\n      var angle;\n\n      if (isNaN(value)) {\n        data.setItemLayout(idx, {\n          angle: NaN,\n          startAngle: NaN,\n          endAngle: NaN,\n          clockwise: clockwise,\n          cx: cx,\n          cy: cy,\n          r0: r0,\n          r: roseType ? NaN : r\n        });\n        return;\n      } // FIXME  2.0  roseType  area \n\n\n      if (roseType !== 'area') {\n        angle = sum === 0 && stillShowZeroSum ? unitRadian : value * unitRadian;\n      } else {\n        angle = PI2 / validDataCount;\n      }\n\n      if (angle < minAngle) {\n        angle = minAngle;\n        restAngle -= minAngle;\n      } else {\n        valueSumLargerThanMinAngle += value;\n      }\n\n      var endAngle = currentAngle + dir * angle;\n      data.setItemLayout(idx, {\n        angle: angle,\n        startAngle: currentAngle,\n        endAngle: endAngle,\n        clockwise: clockwise,\n        cx: cx,\n        cy: cy,\n        r0: r0,\n        r: roseType ? linearMap(value, extent, [r0, r]) : r\n      });\n      currentAngle = endAngle;\n    }); // Some sector is constrained by minAngle\n    // Rest sectors needs recalculate angle\n\n    if (restAngle < PI2 && validDataCount) {\n      // Average the angle if rest angle is not enough after all angles is\n      // Constrained by minAngle\n      if (restAngle <= 1e-3) {\n        var angle_1 = PI2 / validDataCount;\n        data.each(valueDim, function (value, idx) {\n          if (!isNaN(value)) {\n            var layout_1 = data.getItemLayout(idx);\n            layout_1.angle = angle_1;\n            layout_1.startAngle = startAngle + dir * idx * angle_1;\n            layout_1.endAngle = startAngle + dir * (idx + 1) * angle_1;\n          }\n        });\n      } else {\n        unitRadian = restAngle / valueSumLargerThanMinAngle;\n        currentAngle = startAngle;\n        data.each(valueDim, function (value, idx) {\n          if (!isNaN(value)) {\n            var layout_2 = data.getItemLayout(idx);\n            var angle = layout_2.angle === minAngle ? minAngle : value * unitRadian;\n            layout_2.startAngle = currentAngle;\n            layout_2.endAngle = currentAngle + dir * angle;\n            currentAngle += dir * angle;\n          }\n        });\n      }\n    }\n  });\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport default function dataFilter(seriesType) {\n  return {\n    seriesType: seriesType,\n    reset: function reset(seriesModel, ecModel) {\n      var legendModels = ecModel.findComponents({\n        mainType: 'legend'\n      });\n\n      if (!legendModels || !legendModels.length) {\n        return;\n      }\n\n      var data = seriesModel.getData();\n      data.filterSelf(function (idx) {\n        var name = data.getName(idx); // If in any legend component the status is not selected.\n\n        for (var i = 0; i < legendModels.length; i++) {\n          // @ts-ignore FIXME: LegendModel\n          if (!legendModels[i].isSelected(name)) {\n            return false;\n          }\n        }\n\n        return true;\n      });\n    }\n  };\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// FIXME emphasis label position is not same with normal label position\nimport { parsePercent } from '../../util/number';\nimport { Point } from '../../util/graphic';\nimport { each } from 'zrender/lib/core/util';\nimport { limitTurnAngle, limitSurfaceAngle } from '../../label/labelGuideHelper';\nimport { shiftLayoutOnY } from '../../label/labelLayoutHelper';\nvar RADIAN = Math.PI / 180;\n\nfunction adjustSingleSide(list, cx, cy, r, dir, viewWidth, viewHeight, viewLeft, viewTop, farthestX) {\n  if (list.length < 2) {\n    return;\n  }\n\n  ;\n\n  function recalculateXOnSemiToAlignOnEllipseCurve(semi) {\n    var rB = semi.rB;\n    var rB2 = rB * rB;\n\n    for (var i = 0; i < semi.list.length; i++) {\n      var item = semi.list[i];\n      var dy = Math.abs(item.label.y - cy); // horizontal r is always same with original r because x is not changed.\n\n      var rA = r + item.len;\n      var rA2 = rA * rA; // Use ellipse implicit function to calculate x\n\n      var dx = Math.sqrt((1 - Math.abs(dy * dy / rB2)) * rA2);\n      item.label.x = cx + (dx + item.len2) * dir;\n    }\n  } // Adjust X based on the shifted y. Make tight labels aligned on an ellipse curve.\n\n\n  function recalculateX(items) {\n    // Extremes of\n    var topSemi = {\n      list: [],\n      maxY: 0\n    };\n    var bottomSemi = {\n      list: [],\n      maxY: 0\n    };\n\n    for (var i = 0; i < items.length; i++) {\n      if (items[i].labelAlignTo !== 'none') {\n        continue;\n      }\n\n      var item = items[i];\n      var semi = item.label.y > cy ? bottomSemi : topSemi;\n      var dy = Math.abs(item.label.y - cy);\n\n      if (dy > semi.maxY) {\n        var dx = item.label.x - cx - item.len2 * dir; // horizontal r is always same with original r because x is not changed.\n\n        var rA = r + item.len; // Canculate rB based on the topest / bottemest label.\n\n        var rB = Math.abs(dx) < rA ? Math.sqrt(dy * dy / (1 - dx * dx / rA / rA)) : rA;\n        semi.rB = rB;\n        semi.maxY = dy;\n      }\n\n      semi.list.push(item);\n    }\n\n    recalculateXOnSemiToAlignOnEllipseCurve(topSemi);\n    recalculateXOnSemiToAlignOnEllipseCurve(bottomSemi);\n  }\n\n  var len = list.length;\n\n  for (var i = 0; i < len; i++) {\n    if (list[i].position === 'outer' && list[i].labelAlignTo === 'labelLine') {\n      var dx = list[i].label.x - farthestX;\n      list[i].linePoints[1][0] += dx;\n      list[i].label.x = farthestX;\n    }\n  }\n\n  if (shiftLayoutOnY(list, viewTop, viewTop + viewHeight)) {\n    recalculateX(list);\n  }\n}\n\nfunction avoidOverlap(labelLayoutList, cx, cy, r, viewWidth, viewHeight, viewLeft, viewTop) {\n  var leftList = [];\n  var rightList = [];\n  var leftmostX = Number.MAX_VALUE;\n  var rightmostX = -Number.MAX_VALUE;\n\n  for (var i = 0; i < labelLayoutList.length; i++) {\n    var label = labelLayoutList[i].label;\n\n    if (isPositionCenter(labelLayoutList[i])) {\n      continue;\n    }\n\n    if (label.x < cx) {\n      leftmostX = Math.min(leftmostX, label.x);\n      leftList.push(labelLayoutList[i]);\n    } else {\n      rightmostX = Math.max(rightmostX, label.x);\n      rightList.push(labelLayoutList[i]);\n    }\n  }\n\n  adjustSingleSide(rightList, cx, cy, r, 1, viewWidth, viewHeight, viewLeft, viewTop, rightmostX);\n  adjustSingleSide(leftList, cx, cy, r, -1, viewWidth, viewHeight, viewLeft, viewTop, leftmostX);\n\n  for (var i = 0; i < labelLayoutList.length; i++) {\n    var layout = labelLayoutList[i];\n    var label = layout.label;\n\n    if (isPositionCenter(layout)) {\n      continue;\n    }\n\n    var linePoints = layout.linePoints;\n\n    if (linePoints) {\n      var isAlignToEdge = layout.labelAlignTo === 'edge';\n      var realTextWidth = layout.rect.width;\n      var targetTextWidth = void 0;\n\n      if (isAlignToEdge) {\n        if (label.x < cx) {\n          targetTextWidth = linePoints[2][0] - layout.labelDistance - viewLeft - layout.edgeDistance;\n        } else {\n          targetTextWidth = viewLeft + viewWidth - layout.edgeDistance - linePoints[2][0] - layout.labelDistance;\n        }\n      } else {\n        if (label.x < cx) {\n          targetTextWidth = label.x - viewLeft - layout.bleedMargin;\n        } else {\n          targetTextWidth = viewLeft + viewWidth - label.x - layout.bleedMargin;\n        }\n      }\n\n      if (targetTextWidth < layout.rect.width) {\n        // TODOTODO\n        // layout.text = textContain.truncateText(layout.text, targetTextWidth, layout.font);\n        layout.label.style.width = targetTextWidth;\n\n        if (layout.labelAlignTo === 'edge') {\n          realTextWidth = targetTextWidth; // realTextWidth = textContain.getWidth(layout.text, layout.font);\n        }\n      }\n\n      var dist = linePoints[1][0] - linePoints[2][0];\n\n      if (isAlignToEdge) {\n        if (label.x < cx) {\n          linePoints[2][0] = viewLeft + layout.edgeDistance + realTextWidth + layout.labelDistance;\n        } else {\n          linePoints[2][0] = viewLeft + viewWidth - layout.edgeDistance - realTextWidth - layout.labelDistance;\n        }\n      } else {\n        if (label.x < cx) {\n          linePoints[2][0] = label.x + layout.labelDistance;\n        } else {\n          linePoints[2][0] = label.x - layout.labelDistance;\n        }\n\n        linePoints[1][0] = linePoints[2][0] + dist;\n      }\n\n      linePoints[1][1] = linePoints[2][1] = label.y;\n    }\n  }\n}\n\nfunction isPositionCenter(sectorShape) {\n  // Not change x for center label\n  return sectorShape.position === 'center';\n}\n\nexport default function pieLabelLayout(seriesModel) {\n  var data = seriesModel.getData();\n  var labelLayoutList = [];\n  var cx;\n  var cy;\n  var hasLabelRotate = false;\n  var minShowLabelRadian = (seriesModel.get('minShowLabelAngle') || 0) * RADIAN;\n  var viewRect = data.getLayout('viewRect');\n  var r = data.getLayout('r');\n  var viewWidth = viewRect.width;\n  var viewLeft = viewRect.x;\n  var viewTop = viewRect.y;\n  var viewHeight = viewRect.height;\n\n  function setNotShow(el) {\n    el.ignore = true;\n  }\n\n  function isLabelShown(label) {\n    if (!label.ignore) {\n      return true;\n    }\n\n    for (var key in label.states) {\n      if (label.states[key].ignore === false) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  data.each(function (idx) {\n    var sector = data.getItemGraphicEl(idx);\n    var sectorShape = sector.shape;\n    var label = sector.getTextContent();\n    var labelLine = sector.getTextGuideLine();\n    var itemModel = data.getItemModel(idx);\n    var labelModel = itemModel.getModel('label'); // Use position in normal or emphasis\n\n    var labelPosition = labelModel.get('position') || itemModel.get(['emphasis', 'label', 'position']);\n    var labelDistance = labelModel.get('distanceToLabelLine');\n    var labelAlignTo = labelModel.get('alignTo');\n    var edgeDistance = parsePercent(labelModel.get('edgeDistance'), viewWidth);\n    var bleedMargin = labelModel.get('bleedMargin');\n    var labelLineModel = itemModel.getModel('labelLine');\n    var labelLineLen = labelLineModel.get('length');\n    labelLineLen = parsePercent(labelLineLen, viewWidth);\n    var labelLineLen2 = labelLineModel.get('length2');\n    labelLineLen2 = parsePercent(labelLineLen2, viewWidth);\n\n    if (Math.abs(sectorShape.endAngle - sectorShape.startAngle) < minShowLabelRadian) {\n      each(label.states, setNotShow);\n      label.ignore = true;\n      return;\n    }\n\n    if (!isLabelShown(label)) {\n      return;\n    }\n\n    var midAngle = (sectorShape.startAngle + sectorShape.endAngle) / 2;\n    var nx = Math.cos(midAngle);\n    var ny = Math.sin(midAngle);\n    var textX;\n    var textY;\n    var linePoints;\n    var textAlign;\n    cx = sectorShape.cx;\n    cy = sectorShape.cy;\n    var isLabelInside = labelPosition === 'inside' || labelPosition === 'inner';\n\n    if (labelPosition === 'center') {\n      textX = sectorShape.cx;\n      textY = sectorShape.cy;\n      textAlign = 'center';\n    } else {\n      var x1 = (isLabelInside ? (sectorShape.r + sectorShape.r0) / 2 * nx : sectorShape.r * nx) + cx;\n      var y1 = (isLabelInside ? (sectorShape.r + sectorShape.r0) / 2 * ny : sectorShape.r * ny) + cy;\n      textX = x1 + nx * 3;\n      textY = y1 + ny * 3;\n\n      if (!isLabelInside) {\n        // For roseType\n        var x2 = x1 + nx * (labelLineLen + r - sectorShape.r);\n        var y2 = y1 + ny * (labelLineLen + r - sectorShape.r);\n        var x3 = x2 + (nx < 0 ? -1 : 1) * labelLineLen2;\n        var y3 = y2;\n\n        if (labelAlignTo === 'edge') {\n          // Adjust textX because text align of edge is opposite\n          textX = nx < 0 ? viewLeft + edgeDistance : viewLeft + viewWidth - edgeDistance;\n        } else {\n          textX = x3 + (nx < 0 ? -labelDistance : labelDistance);\n        }\n\n        textY = y3;\n        linePoints = [[x1, y1], [x2, y2], [x3, y3]];\n      }\n\n      textAlign = isLabelInside ? 'center' : labelAlignTo === 'edge' ? nx > 0 ? 'right' : 'left' : nx > 0 ? 'left' : 'right';\n    }\n\n    var labelRotate;\n    var rotate = labelModel.get('rotate');\n\n    if (typeof rotate === 'number') {\n      labelRotate = rotate * (Math.PI / 180);\n    } else if (labelPosition === 'center') {\n      labelRotate = 0;\n    } else {\n      var radialAngle = nx < 0 ? -midAngle + Math.PI : -midAngle;\n\n      if (rotate === 'radial' || rotate === true) {\n        labelRotate = radialAngle;\n      } else if (rotate === 'tangential' && labelPosition !== 'outside' && labelPosition !== 'outer') {\n        labelRotate = radialAngle + Math.PI / 2;\n\n        if (labelRotate > Math.PI / 2) {\n          labelRotate -= Math.PI;\n        }\n      } else {\n        labelRotate = 0;\n      }\n    }\n\n    hasLabelRotate = !!labelRotate;\n    label.x = textX;\n    label.y = textY;\n    label.rotation = labelRotate;\n    label.setStyle({\n      verticalAlign: 'middle'\n    }); // Not sectorShape the inside label\n\n    if (!isLabelInside) {\n      var textRect = label.getBoundingRect().clone();\n      textRect.applyTransform(label.getComputedTransform()); // Text has a default 1px stroke. Exclude this.\n\n      var margin = (label.style.margin || 0) + 2.1;\n      textRect.y -= margin / 2;\n      textRect.height += margin;\n      labelLayoutList.push({\n        label: label,\n        labelLine: labelLine,\n        position: labelPosition,\n        len: labelLineLen,\n        len2: labelLineLen2,\n        minTurnAngle: labelLineModel.get('minTurnAngle'),\n        maxSurfaceAngle: labelLineModel.get('maxSurfaceAngle'),\n        surfaceNormal: new Point(nx, ny),\n        linePoints: linePoints,\n        textAlign: textAlign,\n        labelDistance: labelDistance,\n        labelAlignTo: labelAlignTo,\n        edgeDistance: edgeDistance,\n        bleedMargin: bleedMargin,\n        rect: textRect\n      });\n    } else {\n      label.setStyle({\n        align: textAlign\n      });\n      var selectState = label.states.select;\n\n      if (selectState) {\n        selectState.x += label.x;\n        selectState.y += label.y;\n      }\n    }\n\n    sector.setTextConfig({\n      inside: isLabelInside\n    });\n  });\n\n  if (!hasLabelRotate && seriesModel.get('avoidLabelOverlap')) {\n    avoidOverlap(labelLayoutList, cx, cy, r, viewWidth, viewHeight, viewLeft, viewTop);\n  }\n\n  for (var i = 0; i < labelLayoutList.length; i++) {\n    var layout = labelLayoutList[i];\n    var label = layout.label;\n    var labelLine = layout.labelLine;\n    var notShowLabel = isNaN(label.x) || isNaN(label.y);\n\n    if (label) {\n      label.setStyle({\n        align: layout.textAlign\n      });\n\n      if (notShowLabel) {\n        each(label.states, setNotShow);\n        label.ignore = true;\n      }\n\n      var selectState = label.states.select;\n\n      if (selectState) {\n        selectState.x += label.x;\n        selectState.y += label.y;\n      }\n    }\n\n    if (labelLine) {\n      var linePoints = layout.linePoints;\n\n      if (notShowLabel || !linePoints) {\n        each(labelLine.states, setNotShow);\n        labelLine.ignore = true;\n      } else {\n        limitTurnAngle(linePoints, layout.minTurnAngle);\n        limitSurfaceAngle(linePoints, layout.surfaceNormal, layout.maxSurfaceAngle);\n        labelLine.setShape({\n          points: linePoints\n        }); // Set the anchor to the midpoint of sector\n\n        label.__hostTarget.textGuideLineConfig = {\n          anchor: new Point(linePoints[0][0], linePoints[0][1])\n        };\n      }\n    }\n  }\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isArray } from 'zrender/lib/core/util';\nimport { parsePercent } from 'zrender/lib/contain/text';\nexport function getSectorCornerRadius(model, shape, zeroIfNull) {\n  var cornerRadius = model.get('borderRadius');\n\n  if (cornerRadius == null) {\n    return zeroIfNull ? {\n      innerCornerRadius: 0,\n      cornerRadius: 0\n    } : null;\n  }\n\n  if (!isArray(cornerRadius)) {\n    cornerRadius = [cornerRadius, cornerRadius];\n  }\n\n  return {\n    innerCornerRadius: parsePercent(cornerRadius[0], shape.r0),\n    cornerRadius: parsePercent(cornerRadius[1], shape.r)\n  };\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __assign, __extends } from \"tslib\";\nimport { extend, retrieve3 } from 'zrender/lib/core/util';\nimport * as graphic from '../../util/graphic';\nimport { setStatesStylesFromModel, enableHoverEmphasis } from '../../util/states';\nimport ChartView from '../../view/Chart';\nimport labelLayout from './labelLayout';\nimport { setLabelLineStyle, getLabelLineStatesModels } from '../../label/labelGuideHelper';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle';\nimport { getSectorCornerRadius } from '../helper/pieHelper';\nimport { saveOldStyle } from '../../animation/basicTrasition';\nimport { getBasicPieLayout } from './pieLayout';\n/**\n * Piece of pie including Sector, Label, LabelLine\n */\n\nvar PiePiece =\n/** @class */\nfunction (_super) {\n  __extends(PiePiece, _super);\n\n  function PiePiece(data, idx, startAngle) {\n    var _this = _super.call(this) || this;\n\n    _this.z2 = 2;\n    var text = new graphic.Text();\n\n    _this.setTextContent(text);\n\n    _this.updateData(data, idx, startAngle, true);\n\n    return _this;\n  }\n\n  PiePiece.prototype.updateData = function (data, idx, startAngle, firstCreate) {\n    var sector = this;\n    var seriesModel = data.hostModel;\n    var itemModel = data.getItemModel(idx);\n    var emphasisModel = itemModel.getModel('emphasis');\n    var layout = data.getItemLayout(idx); // cornerRadius & innerCornerRadius doesn't exist in the item layout. Use `0` if null value is specified.\n    // see `setItemLayout` in `pieLayout.ts`.\n\n    var sectorShape = extend(getSectorCornerRadius(itemModel.getModel('itemStyle'), layout, true), layout); // Ignore NaN data.\n\n    if (isNaN(sectorShape.startAngle)) {\n      // Use NaN shape to avoid drawing shape.\n      sector.setShape(sectorShape);\n      return;\n    }\n\n    if (firstCreate) {\n      sector.setShape(sectorShape);\n      var animationType = seriesModel.getShallow('animationType');\n\n      if (animationType === 'scale') {\n        sector.shape.r = layout.r0;\n        graphic.initProps(sector, {\n          shape: {\n            r: layout.r\n          }\n        }, seriesModel, idx);\n      } // Expansion\n      else {\n        if (startAngle != null) {\n          sector.setShape({\n            startAngle: startAngle,\n            endAngle: startAngle\n          });\n          graphic.initProps(sector, {\n            shape: {\n              startAngle: layout.startAngle,\n              endAngle: layout.endAngle\n            }\n          }, seriesModel, idx);\n        } else {\n          sector.shape.endAngle = layout.startAngle;\n          graphic.updateProps(sector, {\n            shape: {\n              endAngle: layout.endAngle\n            }\n          }, seriesModel, idx);\n        }\n      }\n    } else {\n      saveOldStyle(sector); // Transition animation from the old shape\n\n      graphic.updateProps(sector, {\n        shape: sectorShape\n      }, seriesModel, idx);\n    }\n\n    sector.useStyle(data.getItemVisual(idx, 'style'));\n    setStatesStylesFromModel(sector, itemModel);\n    var midAngle = (layout.startAngle + layout.endAngle) / 2;\n    var offset = seriesModel.get('selectedOffset');\n    var dx = Math.cos(midAngle) * offset;\n    var dy = Math.sin(midAngle) * offset;\n    var cursorStyle = itemModel.getShallow('cursor');\n    cursorStyle && sector.attr('cursor', cursorStyle);\n\n    this._updateLabel(seriesModel, data, idx);\n\n    sector.ensureState('emphasis').shape = __assign({\n      r: layout.r + (emphasisModel.get('scale') ? emphasisModel.get('scaleSize') || 0 : 0)\n    }, getSectorCornerRadius(emphasisModel.getModel('itemStyle'), layout));\n    extend(sector.ensureState('select'), {\n      x: dx,\n      y: dy,\n      shape: getSectorCornerRadius(itemModel.getModel(['select', 'itemStyle']), layout)\n    });\n    extend(sector.ensureState('blur'), {\n      shape: getSectorCornerRadius(itemModel.getModel(['blur', 'itemStyle']), layout)\n    });\n    var labelLine = sector.getTextGuideLine();\n    var labelText = sector.getTextContent();\n    labelLine && extend(labelLine.ensureState('select'), {\n      x: dx,\n      y: dy\n    }); // TODO: needs dx, dy in zrender?\n\n    extend(labelText.ensureState('select'), {\n      x: dx,\n      y: dy\n    });\n    enableHoverEmphasis(this, emphasisModel.get('focus'), emphasisModel.get('blurScope'));\n  };\n\n  PiePiece.prototype._updateLabel = function (seriesModel, data, idx) {\n    var sector = this;\n    var itemModel = data.getItemModel(idx);\n    var labelLineModel = itemModel.getModel('labelLine');\n    var style = data.getItemVisual(idx, 'style');\n    var visualColor = style && style.fill;\n    var visualOpacity = style && style.opacity;\n    setLabelStyle(sector, getLabelStatesModels(itemModel), {\n      labelFetcher: data.hostModel,\n      labelDataIndex: idx,\n      inheritColor: visualColor,\n      defaultOpacity: visualOpacity,\n      defaultText: seriesModel.getFormattedLabel(idx, 'normal') || data.getName(idx)\n    });\n    var labelText = sector.getTextContent(); // Set textConfig on sector.\n\n    sector.setTextConfig({\n      // reset position, rotation\n      position: null,\n      rotation: null\n    }); // Make sure update style on labelText after setLabelStyle.\n    // Because setLabelStyle will replace a new style on it.\n\n    labelText.attr({\n      z2: 10\n    });\n    var labelPosition = seriesModel.get(['label', 'position']);\n\n    if (labelPosition !== 'outside' && labelPosition !== 'outer') {\n      sector.removeTextGuideLine();\n    } else {\n      var polyline = this.getTextGuideLine();\n\n      if (!polyline) {\n        polyline = new graphic.Polyline();\n        this.setTextGuideLine(polyline);\n      } // Default use item visual color\n\n\n      setLabelLineStyle(this, getLabelLineStatesModels(itemModel), {\n        stroke: visualColor,\n        opacity: retrieve3(labelLineModel.get(['lineStyle', 'opacity']), visualOpacity, 1)\n      });\n    }\n  };\n\n  return PiePiece;\n}(graphic.Sector); // Pie view\n\n\nvar PieView =\n/** @class */\nfunction (_super) {\n  __extends(PieView, _super);\n\n  function PieView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.ignoreLabelLineUpdate = true;\n    return _this;\n  }\n\n  PieView.prototype.init = function () {\n    var sectorGroup = new graphic.Group();\n    this._sectorGroup = sectorGroup;\n  };\n\n  PieView.prototype.render = function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var group = this.group;\n    var startAngle; // First render\n\n    if (!oldData && data.count() > 0) {\n      var shape = data.getItemLayout(0);\n\n      for (var s = 1; isNaN(shape && shape.startAngle) && s < data.count(); ++s) {\n        shape = data.getItemLayout(s);\n      }\n\n      if (shape) {\n        startAngle = shape.startAngle;\n      }\n    } // remove empty-circle if it exists\n\n\n    if (this._emptyCircleSector) {\n      group.remove(this._emptyCircleSector);\n    } // when all data are filtered, show lightgray empty circle\n\n\n    if (data.count() === 0 && seriesModel.get('showEmptyCircle')) {\n      var sector = new graphic.Sector({\n        shape: getBasicPieLayout(seriesModel, api)\n      });\n      sector.useStyle(seriesModel.getModel('emptyCircleStyle').getItemStyle());\n      this._emptyCircleSector = sector;\n      group.add(sector);\n    }\n\n    data.diff(oldData).add(function (idx) {\n      var piePiece = new PiePiece(data, idx, startAngle);\n      data.setItemGraphicEl(idx, piePiece);\n      group.add(piePiece);\n    }).update(function (newIdx, oldIdx) {\n      var piePiece = oldData.getItemGraphicEl(oldIdx);\n      piePiece.updateData(data, newIdx, startAngle);\n      piePiece.off('click');\n      group.add(piePiece);\n      data.setItemGraphicEl(newIdx, piePiece);\n    }).remove(function (idx) {\n      var piePiece = oldData.getItemGraphicEl(idx);\n      graphic.removeElementWithFadeOut(piePiece, seriesModel, idx);\n    }).execute();\n    labelLayout(seriesModel); // Always use initial animation.\n\n    if (seriesModel.get('animationTypeUpdate') !== 'expansion') {\n      this._data = data;\n    }\n  };\n\n  PieView.prototype.dispose = function () {};\n\n  PieView.prototype.containPoint = function (point, seriesModel) {\n    var data = seriesModel.getData();\n    var itemLayout = data.getItemLayout(0);\n\n    if (itemLayout) {\n      var dx = point[0] - itemLayout.cx;\n      var dy = point[1] - itemLayout.cy;\n      var radius = Math.sqrt(dx * dx + dy * dy);\n      return radius <= itemLayout.r && radius >= itemLayout.r0;\n    }\n  };\n\n  PieView.type = 'pie';\n  return PieView;\n}(ChartView);\n\nexport default PieView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport prepareSeriesDataSchema from '../../data/helper/createDimensions';\nimport SeriesData from '../../data/SeriesData';\nimport { extend, isArray } from 'zrender/lib/core/util';\n/**\n * [Usage]:\n * (1)\n * createListSimply(seriesModel, ['value']);\n * (2)\n * createListSimply(seriesModel, {\n *     coordDimensions: ['value'],\n *     dimensionsCount: 5\n * });\n */\n\nexport default function createSeriesDataSimply(seriesModel, opt, nameList) {\n  opt = isArray(opt) && {\n    coordDimensions: opt\n  } || extend({\n    encodeDefine: seriesModel.getEncode()\n  }, opt);\n  var source = seriesModel.getSource();\n  var dimensions = prepareSeriesDataSchema(source, opt).dimensions;\n  var list = new SeriesData(dimensions, seriesModel);\n  list.initData(source, nameList);\n  return list;\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * LegendVisualProvider is an bridge that pick encoded color from data and\n * provide to the legend component.\n */\nvar LegendVisualProvider =\n/** @class */\nfunction () {\n  function LegendVisualProvider( // Function to get data after filtered. It stores all the encoding info\n  getDataWithEncodedVisual, // Function to get raw data before filtered.\n  getRawData) {\n    this._getDataWithEncodedVisual = getDataWithEncodedVisual;\n    this._getRawData = getRawData;\n  }\n\n  LegendVisualProvider.prototype.getAllNames = function () {\n    var rawData = this._getRawData(); // We find the name from the raw data. In case it's filtered by the legend component.\n    // Normally, the name can be found in rawData, but can't be found in filtered data will display as gray.\n\n\n    return rawData.mapArray(rawData.getName);\n  };\n\n  LegendVisualProvider.prototype.containName = function (name) {\n    var rawData = this._getRawData();\n\n    return rawData.indexOfName(name) >= 0;\n  };\n\n  LegendVisualProvider.prototype.indexOfName = function (name) {\n    // Only get data when necessary.\n    // Because LegendVisualProvider constructor may be new in the stage that data is not prepared yet.\n    // Invoking Series#getData immediately will throw an error.\n    var dataWithEncodedVisual = this._getDataWithEncodedVisual();\n\n    return dataWithEncodedVisual.indexOfName(name);\n  };\n\n  LegendVisualProvider.prototype.getItemVisual = function (dataIndex, key) {\n    // Get encoded visual properties from final filtered data.\n    var dataWithEncodedVisual = this._getDataWithEncodedVisual();\n\n    return dataWithEncodedVisual.getItemVisual(dataIndex, key);\n  };\n\n  return LegendVisualProvider;\n}();\n\nexport default LegendVisualProvider;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport createSeriesDataSimply from '../helper/createSeriesDataSimply';\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as modelUtil from '../../util/model';\nimport { getPercentWithPrecision } from '../../util/number';\nimport { makeSeriesEncodeForNameBased } from '../../data/helper/sourceHelper';\nimport LegendVisualProvider from '../../visual/LegendVisualProvider';\nimport SeriesModel from '../../model/Series';\n\nvar PieSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(PieSeriesModel, _super);\n\n  function PieSeriesModel() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\n   * @overwrite\n   */\n\n\n  PieSeriesModel.prototype.init = function (option) {\n    _super.prototype.init.apply(this, arguments); // Enable legend selection for each data item\n    // Use a function instead of direct access because data reference may changed\n\n\n    this.legendVisualProvider = new LegendVisualProvider(zrUtil.bind(this.getData, this), zrUtil.bind(this.getRawData, this));\n\n    this._defaultLabelLine(option);\n  };\n  /**\n   * @overwrite\n   */\n\n\n  PieSeriesModel.prototype.mergeOption = function () {\n    _super.prototype.mergeOption.apply(this, arguments);\n  };\n  /**\n   * @overwrite\n   */\n\n\n  PieSeriesModel.prototype.getInitialData = function () {\n    return createSeriesDataSimply(this, {\n      coordDimensions: ['value'],\n      encodeDefaulter: zrUtil.curry(makeSeriesEncodeForNameBased, this)\n    });\n  };\n  /**\n   * @overwrite\n   */\n\n\n  PieSeriesModel.prototype.getDataParams = function (dataIndex) {\n    var data = this.getData();\n\n    var params = _super.prototype.getDataParams.call(this, dataIndex); // FIXME toFixed?\n\n\n    var valueList = [];\n    data.each(data.mapDimension('value'), function (value) {\n      valueList.push(value);\n    });\n    params.percent = getPercentWithPrecision(valueList, dataIndex, data.hostModel.get('percentPrecision'));\n    params.$vars.push('percent');\n    return params;\n  };\n\n  PieSeriesModel.prototype._defaultLabelLine = function (option) {\n    // Extend labelLine emphasis\n    modelUtil.defaultEmphasis(option, 'labelLine', ['show']);\n    var labelLineNormalOpt = option.labelLine;\n    var labelLineEmphasisOpt = option.emphasis.labelLine; // Not show label line if `label.normal.show = false`\n\n    labelLineNormalOpt.show = labelLineNormalOpt.show && option.label.show;\n    labelLineEmphasisOpt.show = labelLineEmphasisOpt.show && option.emphasis.label.show;\n  };\n\n  PieSeriesModel.type = 'series.pie';\n  PieSeriesModel.defaultOption = {\n    zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    colorBy: 'data',\n    // \n    center: ['50%', '50%'],\n    radius: [0, '75%'],\n    // \n    clockwise: true,\n    startAngle: 90,\n    // 0\n    minAngle: 0,\n    // If the angle of a sector less than `minShowLabelAngle`,\n    // the label will not be displayed.\n    minShowLabelAngle: 0,\n    // \n    selectedOffset: 10,\n    // singlemultiple\n    // selectedMode: false,\n    // 'radius' | 'area'\n    // roseType: null,\n    percentPrecision: 2,\n    // If still show when all data zero.\n    stillShowZeroSum: true,\n    // cursor: null,\n    left: 0,\n    top: 0,\n    right: 0,\n    bottom: 0,\n    width: null,\n    height: null,\n    label: {\n      // color: 'inherit',\n      // If rotate around circle\n      rotate: 0,\n      show: true,\n      overflow: 'truncate',\n      // 'outer', 'inside', 'center'\n      position: 'outer',\n      // 'none', 'labelLine', 'edge'. Works only when position is 'outer'\n      alignTo: 'none',\n      // Closest distance between label and chart edge.\n      // Works only position is 'outer' and alignTo is 'edge'.\n      edgeDistance: '25%',\n      // Works only position is 'outer' and alignTo is not 'edge'.\n      bleedMargin: 10,\n      // Distance between text and label line.\n      distanceToLabelLine: 5 // formatter: Tooltip.formatter\n      // TEXTSTYLE\n      // distance: positioninnerlabel()\n\n    },\n    // Enabled when label.normal.position is 'outer'\n    labelLine: {\n      show: true,\n      // \n      length: 15,\n      // \n      length2: 15,\n      smooth: false,\n      minTurnAngle: 90,\n      maxSurfaceAngle: 90,\n      lineStyle: {\n        // color: ,\n        width: 1,\n        type: 'solid'\n      }\n    },\n    itemStyle: {\n      borderWidth: 1,\n      borderJoin: 'round'\n    },\n    showEmptyCircle: true,\n    emptyCircleStyle: {\n      color: 'lightgray',\n      opacity: 1\n    },\n    labelLayout: {\n      // Hide the overlapped label.\n      hideOverlap: true\n    },\n    emphasis: {\n      scale: true,\n      scaleSize: 5\n    },\n    // If use strategy to avoid label overlapping\n    avoidLabelOverlap: true,\n    // Animation type. Valid values: expansion, scale\n    animationType: 'expansion',\n    animationDuration: 1000,\n    // Animation type when update. Valid values: transition, expansion\n    animationTypeUpdate: 'transition',\n    animationEasingUpdate: 'cubicInOut',\n    animationDurationUpdate: 500,\n    animationEasing: 'cubicInOut'\n  };\n  return PieSeriesModel;\n}(SeriesModel);\n\nexport default PieSeriesModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nexport default function radarLayout(ecModel) {\n  ecModel.eachSeriesByType('radar', function (seriesModel) {\n    var data = seriesModel.getData();\n    var points = [];\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (!coordSys) {\n      return;\n    }\n\n    var axes = coordSys.getIndicatorAxes();\n    zrUtil.each(axes, function (axis, axisIndex) {\n      data.each(data.mapDimension(axes[axisIndex].dim), function (val, dataIndex) {\n        points[dataIndex] = points[dataIndex] || [];\n        var point = coordSys.dataToPoint(val, axisIndex);\n        points[dataIndex][axisIndex] = isValidPoint(point) ? point : getValueMissingPoint(coordSys);\n      });\n    }); // Close polygon\n\n    data.each(function (idx) {\n      // TODO\n      // Is it appropriate to connect to the next data when some data is missing?\n      // Or, should trade it like `connectNull` in line chart?\n      var firstPoint = zrUtil.find(points[idx], function (point) {\n        return isValidPoint(point);\n      }) || getValueMissingPoint(coordSys); // Copy the first actual point to the end of the array\n\n      points[idx].push(firstPoint.slice());\n      data.setItemLayout(idx, points[idx]);\n    });\n  });\n}\n\nfunction isValidPoint(point) {\n  return !isNaN(point[0]) && !isNaN(point[1]);\n}\n\nfunction getValueMissingPoint(coordSys) {\n  // It is error-prone to input [NaN, NaN] into polygon, polygon.\n  // (probably cause problem when refreshing or animating)\n  return [coordSys.cx, coordSys.cy];\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// @ts-nocheck\n// Backward compat for radar chart in 2\nimport * as zrUtil from 'zrender/lib/core/util';\nexport default function radarBackwardCompat(option) {\n  var polarOptArr = option.polar;\n\n  if (polarOptArr) {\n    if (!zrUtil.isArray(polarOptArr)) {\n      polarOptArr = [polarOptArr];\n    }\n\n    var polarNotRadar_1 = [];\n    zrUtil.each(polarOptArr, function (polarOpt, idx) {\n      if (polarOpt.indicator) {\n        if (polarOpt.type && !polarOpt.shape) {\n          polarOpt.shape = polarOpt.type;\n        }\n\n        option.radar = option.radar || [];\n\n        if (!zrUtil.isArray(option.radar)) {\n          option.radar = [option.radar];\n        }\n\n        option.radar.push(polarOpt);\n      } else {\n        polarNotRadar_1.push(polarOpt);\n      }\n    });\n    option.polar = polarNotRadar_1;\n  }\n\n  zrUtil.each(option.series, function (seriesOpt) {\n    if (seriesOpt && seriesOpt.type === 'radar' && seriesOpt.polarIndex) {\n      seriesOpt.radarIndex = seriesOpt.polarIndex;\n    }\n  });\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic';\nimport { setStatesStylesFromModel, enableHoverEmphasis } from '../../util/states';\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as symbolUtil from '../../util/symbol';\nimport ChartView from '../../view/Chart';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle';\nimport ZRImage from 'zrender/lib/graphic/Image';\nimport { saveOldStyle } from '../../animation/basicTrasition';\n\nvar RadarView =\n/** @class */\nfunction (_super) {\n  __extends(RadarView, _super);\n\n  function RadarView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = RadarView.type;\n    return _this;\n  }\n\n  RadarView.prototype.render = function (seriesModel, ecModel, api) {\n    var polar = seriesModel.coordinateSystem;\n    var group = this.group;\n    var data = seriesModel.getData();\n    var oldData = this._data;\n\n    function createSymbol(data, idx) {\n      var symbolType = data.getItemVisual(idx, 'symbol') || 'circle';\n\n      if (symbolType === 'none') {\n        return;\n      }\n\n      var symbolSize = symbolUtil.normalizeSymbolSize(data.getItemVisual(idx, 'symbolSize'));\n      var symbolPath = symbolUtil.createSymbol(symbolType, -1, -1, 2, 2);\n      var symbolRotate = data.getItemVisual(idx, 'symbolRotate') || 0;\n      symbolPath.attr({\n        style: {\n          strokeNoScale: true\n        },\n        z2: 100,\n        scaleX: symbolSize[0] / 2,\n        scaleY: symbolSize[1] / 2,\n        rotation: symbolRotate * Math.PI / 180 || 0\n      });\n      return symbolPath;\n    }\n\n    function updateSymbols(oldPoints, newPoints, symbolGroup, data, idx, isInit) {\n      // Simply rerender all\n      symbolGroup.removeAll();\n\n      for (var i = 0; i < newPoints.length - 1; i++) {\n        var symbolPath = createSymbol(data, idx);\n\n        if (symbolPath) {\n          symbolPath.__dimIdx = i;\n\n          if (oldPoints[i]) {\n            symbolPath.setPosition(oldPoints[i]);\n            graphic[isInit ? 'initProps' : 'updateProps'](symbolPath, {\n              x: newPoints[i][0],\n              y: newPoints[i][1]\n            }, seriesModel, idx);\n          } else {\n            symbolPath.setPosition(newPoints[i]);\n          }\n\n          symbolGroup.add(symbolPath);\n        }\n      }\n    }\n\n    function getInitialPoints(points) {\n      return zrUtil.map(points, function (pt) {\n        return [polar.cx, polar.cy];\n      });\n    }\n\n    data.diff(oldData).add(function (idx) {\n      var points = data.getItemLayout(idx);\n\n      if (!points) {\n        return;\n      }\n\n      var polygon = new graphic.Polygon();\n      var polyline = new graphic.Polyline();\n      var target = {\n        shape: {\n          points: points\n        }\n      };\n      polygon.shape.points = getInitialPoints(points);\n      polyline.shape.points = getInitialPoints(points);\n      graphic.initProps(polygon, target, seriesModel, idx);\n      graphic.initProps(polyline, target, seriesModel, idx);\n      var itemGroup = new graphic.Group();\n      var symbolGroup = new graphic.Group();\n      itemGroup.add(polyline);\n      itemGroup.add(polygon);\n      itemGroup.add(symbolGroup);\n      updateSymbols(polyline.shape.points, points, symbolGroup, data, idx, true);\n      data.setItemGraphicEl(idx, itemGroup);\n    }).update(function (newIdx, oldIdx) {\n      var itemGroup = oldData.getItemGraphicEl(oldIdx);\n      var polyline = itemGroup.childAt(0);\n      var polygon = itemGroup.childAt(1);\n      var symbolGroup = itemGroup.childAt(2);\n      var target = {\n        shape: {\n          points: data.getItemLayout(newIdx)\n        }\n      };\n\n      if (!target.shape.points) {\n        return;\n      }\n\n      updateSymbols(polyline.shape.points, target.shape.points, symbolGroup, data, newIdx, false);\n      saveOldStyle(polygon);\n      saveOldStyle(polyline);\n      graphic.updateProps(polyline, target, seriesModel);\n      graphic.updateProps(polygon, target, seriesModel);\n      data.setItemGraphicEl(newIdx, itemGroup);\n    }).remove(function (idx) {\n      group.remove(oldData.getItemGraphicEl(idx));\n    }).execute();\n    data.eachItemGraphicEl(function (itemGroup, idx) {\n      var itemModel = data.getItemModel(idx);\n      var polyline = itemGroup.childAt(0);\n      var polygon = itemGroup.childAt(1);\n      var symbolGroup = itemGroup.childAt(2); // Radar uses the visual encoded from itemStyle.\n\n      var itemStyle = data.getItemVisual(idx, 'style');\n      var color = itemStyle.fill;\n      group.add(itemGroup);\n      polyline.useStyle(zrUtil.defaults(itemModel.getModel('lineStyle').getLineStyle(), {\n        fill: 'none',\n        stroke: color\n      }));\n      setStatesStylesFromModel(polyline, itemModel, 'lineStyle');\n      setStatesStylesFromModel(polygon, itemModel, 'areaStyle');\n      var areaStyleModel = itemModel.getModel('areaStyle');\n      var polygonIgnore = areaStyleModel.isEmpty() && areaStyleModel.parentModel.isEmpty();\n      polygon.ignore = polygonIgnore;\n      zrUtil.each(['emphasis', 'select', 'blur'], function (stateName) {\n        var stateModel = itemModel.getModel([stateName, 'areaStyle']);\n        var stateIgnore = stateModel.isEmpty() && stateModel.parentModel.isEmpty(); // Won't be ignore if normal state is not ignore.\n\n        polygon.ensureState(stateName).ignore = stateIgnore && polygonIgnore;\n      });\n      polygon.useStyle(zrUtil.defaults(areaStyleModel.getAreaStyle(), {\n        fill: color,\n        opacity: 0.7,\n        decal: itemStyle.decal\n      }));\n      var emphasisModel = itemModel.getModel('emphasis');\n      var itemHoverStyle = emphasisModel.getModel('itemStyle').getItemStyle();\n      symbolGroup.eachChild(function (symbolPath) {\n        if (symbolPath instanceof ZRImage) {\n          var pathStyle = symbolPath.style;\n          symbolPath.useStyle(zrUtil.extend({\n            // TODO other properties like x, y ?\n            image: pathStyle.image,\n            x: pathStyle.x,\n            y: pathStyle.y,\n            width: pathStyle.width,\n            height: pathStyle.height\n          }, itemStyle));\n        } else {\n          symbolPath.useStyle(itemStyle);\n          symbolPath.setColor(color);\n          symbolPath.style.strokeNoScale = true;\n        }\n\n        var pathEmphasisState = symbolPath.ensureState('emphasis');\n        pathEmphasisState.style = zrUtil.clone(itemHoverStyle);\n        var defaultText = data.getStore().get(data.getDimensionIndex(symbolPath.__dimIdx), idx);\n        (defaultText == null || isNaN(defaultText)) && (defaultText = '');\n        setLabelStyle(symbolPath, getLabelStatesModels(itemModel), {\n          labelFetcher: data.hostModel,\n          labelDataIndex: idx,\n          labelDimIndex: symbolPath.__dimIdx,\n          defaultText: defaultText,\n          inheritColor: color,\n          defaultOpacity: itemStyle.opacity\n        });\n      });\n      enableHoverEmphasis(itemGroup, emphasisModel.get('focus'), emphasisModel.get('blurScope'));\n    });\n    this._data = data;\n  };\n\n  RadarView.prototype.remove = function () {\n    this.group.removeAll();\n    this._data = null;\n  };\n\n  RadarView.type = 'radar';\n  return RadarView;\n}(ChartView);\n\nexport default RadarView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series';\nimport createSeriesDataSimply from '../helper/createSeriesDataSimply';\nimport * as zrUtil from 'zrender/lib/core/util';\nimport LegendVisualProvider from '../../visual/LegendVisualProvider';\nimport { createTooltipMarkup, retrieveVisualColorForTooltipMarker } from '../../component/tooltip/tooltipMarkup';\n\nvar RadarSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(RadarSeriesModel, _super);\n\n  function RadarSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = RadarSeriesModel.type;\n    _this.hasSymbolVisual = true;\n    return _this;\n  } // Overwrite\n\n\n  RadarSeriesModel.prototype.init = function (option) {\n    _super.prototype.init.apply(this, arguments); // Enable legend selection for each data item\n    // Use a function instead of direct access because data reference may changed\n\n\n    this.legendVisualProvider = new LegendVisualProvider(zrUtil.bind(this.getData, this), zrUtil.bind(this.getRawData, this));\n  };\n\n  RadarSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesDataSimply(this, {\n      generateCoord: 'indicator_',\n      generateCoordCount: Infinity\n    });\n  };\n\n  RadarSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    var data = this.getData();\n    var coordSys = this.coordinateSystem;\n    var indicatorAxes = coordSys.getIndicatorAxes();\n    var name = this.getData().getName(dataIndex);\n    var nameToDisplay = name === '' ? this.name : name;\n    var markerColor = retrieveVisualColorForTooltipMarker(this, dataIndex);\n    return createTooltipMarkup('section', {\n      header: nameToDisplay,\n      sortBlocks: true,\n      blocks: zrUtil.map(indicatorAxes, function (axis) {\n        var val = data.get(data.mapDimension(axis.dim), dataIndex);\n        return createTooltipMarkup('nameValue', {\n          markerType: 'subItem',\n          markerColor: markerColor,\n          name: axis.name,\n          value: val,\n          sortParam: val\n        });\n      })\n    });\n  };\n\n  RadarSeriesModel.prototype.getTooltipPosition = function (dataIndex) {\n    if (dataIndex != null) {\n      var data_1 = this.getData();\n      var coordSys = this.coordinateSystem;\n      var values = data_1.getValues(zrUtil.map(coordSys.dimensions, function (dim) {\n        return data_1.mapDimension(dim);\n      }), dataIndex);\n\n      for (var i = 0, len = values.length; i < len; i++) {\n        if (!isNaN(values[i])) {\n          var indicatorAxes = coordSys.getIndicatorAxes();\n          return coordSys.coordToPoint(indicatorAxes[i].dataToCoord(values[i]), i);\n        }\n      }\n    }\n  };\n\n  RadarSeriesModel.type = 'series.radar';\n  RadarSeriesModel.dependencies = ['radar'];\n  RadarSeriesModel.defaultOption = {\n    zlevel: 0,\n    z: 2,\n    colorBy: 'data',\n    coordinateSystem: 'radar',\n    legendHoverLink: true,\n    radarIndex: 0,\n    lineStyle: {\n      width: 2,\n      type: 'solid',\n      join: 'round'\n    },\n    label: {\n      position: 'top'\n    },\n    // areaStyle: {\n    // },\n    // itemStyle: {}\n    symbolSize: 8 // symbolRotate: null\n\n  };\n  return RadarSeriesModel;\n}(SeriesModel);\n\nexport default RadarSeriesModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport axisDefault from '../axisDefault';\nimport Model from '../../model/Model';\nimport { AxisModelCommonMixin } from '../axisModelCommonMixin';\nimport ComponentModel from '../../model/Component';\nvar valueAxisDefault = axisDefault.value;\n\nfunction defaultsShow(opt, show) {\n  return zrUtil.defaults({\n    show: show\n  }, opt);\n}\n\nvar RadarModel =\n/** @class */\nfunction (_super) {\n  __extends(RadarModel, _super);\n\n  function RadarModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = RadarModel.type;\n    return _this;\n  }\n\n  RadarModel.prototype.optionUpdated = function () {\n    var boundaryGap = this.get('boundaryGap');\n    var splitNumber = this.get('splitNumber');\n    var scale = this.get('scale');\n    var axisLine = this.get('axisLine');\n    var axisTick = this.get('axisTick'); // let axisType = this.get('axisType');\n\n    var axisLabel = this.get('axisLabel');\n    var nameTextStyle = this.get('axisName');\n    var showName = this.get(['axisName', 'show']);\n    var nameFormatter = this.get(['axisName', 'formatter']);\n    var nameGap = this.get('axisNameGap');\n    var triggerEvent = this.get('triggerEvent');\n    var indicatorModels = zrUtil.map(this.get('indicator') || [], function (indicatorOpt) {\n      // PENDING\n      if (indicatorOpt.max != null && indicatorOpt.max > 0 && !indicatorOpt.min) {\n        indicatorOpt.min = 0;\n      } else if (indicatorOpt.min != null && indicatorOpt.min < 0 && !indicatorOpt.max) {\n        indicatorOpt.max = 0;\n      }\n\n      var iNameTextStyle = nameTextStyle;\n\n      if (indicatorOpt.color != null) {\n        iNameTextStyle = zrUtil.defaults({\n          color: indicatorOpt.color\n        }, nameTextStyle);\n      } // Use same configuration\n\n\n      var innerIndicatorOpt = zrUtil.merge(zrUtil.clone(indicatorOpt), {\n        boundaryGap: boundaryGap,\n        splitNumber: splitNumber,\n        scale: scale,\n        axisLine: axisLine,\n        axisTick: axisTick,\n        // axisType: axisType,\n        axisLabel: axisLabel,\n        // Compatible with 2 and use text\n        name: indicatorOpt.text,\n        nameLocation: 'end',\n        nameGap: nameGap,\n        // min: 0,\n        nameTextStyle: iNameTextStyle,\n        triggerEvent: triggerEvent\n      }, false);\n\n      if (!showName) {\n        innerIndicatorOpt.name = '';\n      }\n\n      if (typeof nameFormatter === 'string') {\n        var indName = innerIndicatorOpt.name;\n        innerIndicatorOpt.name = nameFormatter.replace('{value}', indName != null ? indName : '');\n      } else if (typeof nameFormatter === 'function') {\n        innerIndicatorOpt.name = nameFormatter(innerIndicatorOpt.name, innerIndicatorOpt);\n      }\n\n      var model = new Model(innerIndicatorOpt, null, this.ecModel);\n      zrUtil.mixin(model, AxisModelCommonMixin.prototype); // For triggerEvent.\n\n      model.mainType = 'radar';\n      model.componentIndex = this.componentIndex;\n      return model;\n    }, this);\n    this._indicatorModels = indicatorModels;\n  };\n\n  RadarModel.prototype.getIndicatorModels = function () {\n    return this._indicatorModels;\n  };\n\n  RadarModel.type = 'radar';\n  RadarModel.defaultOption = {\n    zlevel: 0,\n    z: 0,\n    center: ['50%', '50%'],\n    radius: '75%',\n    startAngle: 90,\n    axisName: {\n      show: true // formatter: null\n      // textStyle: {}\n\n    },\n    boundaryGap: [0, 0],\n    splitNumber: 5,\n    axisNameGap: 15,\n    scale: false,\n    // Polygon or circle\n    shape: 'polygon',\n    axisLine: zrUtil.merge({\n      lineStyle: {\n        color: '#bbb'\n      }\n    }, valueAxisDefault.axisLine),\n    axisLabel: defaultsShow(valueAxisDefault.axisLabel, false),\n    axisTick: defaultsShow(valueAxisDefault.axisTick, false),\n    // axisType: 'value',\n    splitLine: defaultsShow(valueAxisDefault.splitLine, true),\n    splitArea: defaultsShow(valueAxisDefault.splitArea, true),\n    // {text, min, max}\n    indicator: []\n  };\n  return RadarModel;\n}(ComponentModel);\n\nexport default RadarModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport AxisBuilder from '../axis/AxisBuilder';\nimport * as graphic from '../../util/graphic';\nimport ComponentView from '../../view/Component';\nvar axisBuilderAttrs = ['axisLine', 'axisTickLabel', 'axisName'];\n\nvar RadarView =\n/** @class */\nfunction (_super) {\n  __extends(RadarView, _super);\n\n  function RadarView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = RadarView.type;\n    return _this;\n  }\n\n  RadarView.prototype.render = function (radarModel, ecModel, api) {\n    var group = this.group;\n    group.removeAll();\n\n    this._buildAxes(radarModel);\n\n    this._buildSplitLineAndArea(radarModel);\n  };\n\n  RadarView.prototype._buildAxes = function (radarModel) {\n    var radar = radarModel.coordinateSystem;\n    var indicatorAxes = radar.getIndicatorAxes();\n    var axisBuilders = zrUtil.map(indicatorAxes, function (indicatorAxis) {\n      var axisBuilder = new AxisBuilder(indicatorAxis.model, {\n        position: [radar.cx, radar.cy],\n        rotation: indicatorAxis.angle,\n        labelDirection: -1,\n        tickDirection: -1,\n        nameDirection: 1\n      });\n      return axisBuilder;\n    });\n    zrUtil.each(axisBuilders, function (axisBuilder) {\n      zrUtil.each(axisBuilderAttrs, axisBuilder.add, axisBuilder);\n      this.group.add(axisBuilder.getGroup());\n    }, this);\n  };\n\n  RadarView.prototype._buildSplitLineAndArea = function (radarModel) {\n    var radar = radarModel.coordinateSystem;\n    var indicatorAxes = radar.getIndicatorAxes();\n\n    if (!indicatorAxes.length) {\n      return;\n    }\n\n    var shape = radarModel.get('shape');\n    var splitLineModel = radarModel.getModel('splitLine');\n    var splitAreaModel = radarModel.getModel('splitArea');\n    var lineStyleModel = splitLineModel.getModel('lineStyle');\n    var areaStyleModel = splitAreaModel.getModel('areaStyle');\n    var showSplitLine = splitLineModel.get('show');\n    var showSplitArea = splitAreaModel.get('show');\n    var splitLineColors = lineStyleModel.get('color');\n    var splitAreaColors = areaStyleModel.get('color');\n    var splitLineColorsArr = zrUtil.isArray(splitLineColors) ? splitLineColors : [splitLineColors];\n    var splitAreaColorsArr = zrUtil.isArray(splitAreaColors) ? splitAreaColors : [splitAreaColors];\n    var splitLines = [];\n    var splitAreas = [];\n\n    function getColorIndex(areaOrLine, areaOrLineColorList, idx) {\n      var colorIndex = idx % areaOrLineColorList.length;\n      areaOrLine[colorIndex] = areaOrLine[colorIndex] || [];\n      return colorIndex;\n    }\n\n    if (shape === 'circle') {\n      var ticksRadius = indicatorAxes[0].getTicksCoords();\n      var cx = radar.cx;\n      var cy = radar.cy;\n\n      for (var i = 0; i < ticksRadius.length; i++) {\n        if (showSplitLine) {\n          var colorIndex = getColorIndex(splitLines, splitLineColorsArr, i);\n          splitLines[colorIndex].push(new graphic.Circle({\n            shape: {\n              cx: cx,\n              cy: cy,\n              r: ticksRadius[i].coord\n            }\n          }));\n        }\n\n        if (showSplitArea && i < ticksRadius.length - 1) {\n          var colorIndex = getColorIndex(splitAreas, splitAreaColorsArr, i);\n          splitAreas[colorIndex].push(new graphic.Ring({\n            shape: {\n              cx: cx,\n              cy: cy,\n              r0: ticksRadius[i].coord,\n              r: ticksRadius[i + 1].coord\n            }\n          }));\n        }\n      }\n    } // Polyyon\n    else {\n      var realSplitNumber_1;\n      var axesTicksPoints = zrUtil.map(indicatorAxes, function (indicatorAxis, idx) {\n        var ticksCoords = indicatorAxis.getTicksCoords();\n        realSplitNumber_1 = realSplitNumber_1 == null ? ticksCoords.length - 1 : Math.min(ticksCoords.length - 1, realSplitNumber_1);\n        return zrUtil.map(ticksCoords, function (tickCoord) {\n          return radar.coordToPoint(tickCoord.coord, idx);\n        });\n      });\n      var prevPoints = [];\n\n      for (var i = 0; i <= realSplitNumber_1; i++) {\n        var points = [];\n\n        for (var j = 0; j < indicatorAxes.length; j++) {\n          points.push(axesTicksPoints[j][i]);\n        } // Close\n\n\n        if (points[0]) {\n          points.push(points[0].slice());\n        } else {\n          if (process.env.NODE_ENV !== 'production') {\n            console.error('Can\\'t draw value axis ' + i);\n          }\n        }\n\n        if (showSplitLine) {\n          var colorIndex = getColorIndex(splitLines, splitLineColorsArr, i);\n          splitLines[colorIndex].push(new graphic.Polyline({\n            shape: {\n              points: points\n            }\n          }));\n        }\n\n        if (showSplitArea && prevPoints) {\n          var colorIndex = getColorIndex(splitAreas, splitAreaColorsArr, i - 1);\n          splitAreas[colorIndex].push(new graphic.Polygon({\n            shape: {\n              points: points.concat(prevPoints)\n            }\n          }));\n        }\n\n        prevPoints = points.slice().reverse();\n      }\n    }\n\n    var lineStyle = lineStyleModel.getLineStyle();\n    var areaStyle = areaStyleModel.getAreaStyle(); // Add splitArea before splitLine\n\n    zrUtil.each(splitAreas, function (splitAreas, idx) {\n      this.group.add(graphic.mergePath(splitAreas, {\n        style: zrUtil.defaults({\n          stroke: 'none',\n          fill: splitAreaColorsArr[idx % splitAreaColorsArr.length]\n        }, areaStyle),\n        silent: true\n      }));\n    }, this);\n    zrUtil.each(splitLines, function (splitLines, idx) {\n      this.group.add(graphic.mergePath(splitLines, {\n        style: zrUtil.defaults({\n          fill: 'none',\n          stroke: splitLineColorsArr[idx % splitLineColorsArr.length]\n        }, lineStyle),\n        silent: true\n      }));\n    }, this);\n  };\n\n  RadarView.type = 'radar';\n  return RadarView;\n}(ComponentView);\n\nexport default RadarView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Axis from '../Axis';\n\nvar IndicatorAxis =\n/** @class */\nfunction (_super) {\n  __extends(IndicatorAxis, _super);\n\n  function IndicatorAxis(dim, scale, radiusExtent) {\n    var _this = _super.call(this, dim, scale, radiusExtent) || this;\n\n    _this.type = 'value';\n    _this.angle = 0;\n    _this.name = '';\n    return _this;\n  }\n\n  return IndicatorAxis;\n}(Axis);\n\nexport default IndicatorAxis;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// TODO clockwise\nimport IndicatorAxis from './IndicatorAxis';\nimport IntervalScale from '../../scale/Interval';\nimport * as numberUtil from '../../util/number';\nimport { getScaleExtent, niceScaleExtent } from '../axisHelper';\nimport { parseAxisModelMinMax } from '../scaleRawExtentInfo';\nimport { map, each } from 'zrender/lib/core/util';\n\nvar Radar =\n/** @class */\nfunction () {\n  function Radar(radarModel, ecModel, api) {\n    /**\n     *\n     * Radar dimensions\n     */\n    this.dimensions = [];\n    this._model = radarModel;\n    this._indicatorAxes = map(radarModel.getIndicatorModels(), function (indicatorModel, idx) {\n      var dim = 'indicator_' + idx;\n      var indicatorAxis = new IndicatorAxis(dim, new IntervalScale() // (indicatorModel.get('axisType') === 'log') ? new LogScale() : new IntervalScale()\n      );\n      indicatorAxis.name = indicatorModel.get('name'); // Inject model and axis\n\n      indicatorAxis.model = indicatorModel;\n      indicatorModel.axis = indicatorAxis;\n      this.dimensions.push(dim);\n      return indicatorAxis;\n    }, this);\n    this.resize(radarModel, api);\n  }\n\n  Radar.prototype.getIndicatorAxes = function () {\n    return this._indicatorAxes;\n  };\n\n  Radar.prototype.dataToPoint = function (value, indicatorIndex) {\n    var indicatorAxis = this._indicatorAxes[indicatorIndex];\n    return this.coordToPoint(indicatorAxis.dataToCoord(value), indicatorIndex);\n  }; // TODO: API should be coordToPoint([coord, indicatorIndex])\n\n\n  Radar.prototype.coordToPoint = function (coord, indicatorIndex) {\n    var indicatorAxis = this._indicatorAxes[indicatorIndex];\n    var angle = indicatorAxis.angle;\n    var x = this.cx + coord * Math.cos(angle);\n    var y = this.cy - coord * Math.sin(angle);\n    return [x, y];\n  };\n\n  Radar.prototype.pointToData = function (pt) {\n    var dx = pt[0] - this.cx;\n    var dy = pt[1] - this.cy;\n    var radius = Math.sqrt(dx * dx + dy * dy);\n    dx /= radius;\n    dy /= radius;\n    var radian = Math.atan2(-dy, dx); // Find the closest angle\n    // FIXME index can calculated directly\n\n    var minRadianDiff = Infinity;\n    var closestAxis;\n    var closestAxisIdx = -1;\n\n    for (var i = 0; i < this._indicatorAxes.length; i++) {\n      var indicatorAxis = this._indicatorAxes[i];\n      var diff = Math.abs(radian - indicatorAxis.angle);\n\n      if (diff < minRadianDiff) {\n        closestAxis = indicatorAxis;\n        closestAxisIdx = i;\n        minRadianDiff = diff;\n      }\n    }\n\n    return [closestAxisIdx, +(closestAxis && closestAxis.coordToData(radius))];\n  };\n\n  Radar.prototype.resize = function (radarModel, api) {\n    var center = radarModel.get('center');\n    var viewWidth = api.getWidth();\n    var viewHeight = api.getHeight();\n    var viewSize = Math.min(viewWidth, viewHeight) / 2;\n    this.cx = numberUtil.parsePercent(center[0], viewWidth);\n    this.cy = numberUtil.parsePercent(center[1], viewHeight);\n    this.startAngle = radarModel.get('startAngle') * Math.PI / 180; // radius may be single value like `20`, `'80%'`, or array like `[10, '80%']`\n\n    var radius = radarModel.get('radius');\n\n    if (typeof radius === 'string' || typeof radius === 'number') {\n      radius = [0, radius];\n    }\n\n    this.r0 = numberUtil.parsePercent(radius[0], viewSize);\n    this.r = numberUtil.parsePercent(radius[1], viewSize);\n    each(this._indicatorAxes, function (indicatorAxis, idx) {\n      indicatorAxis.setExtent(this.r0, this.r);\n      var angle = this.startAngle + idx * Math.PI * 2 / this._indicatorAxes.length; // Normalize to [-PI, PI]\n\n      angle = Math.atan2(Math.sin(angle), Math.cos(angle));\n      indicatorAxis.angle = angle;\n    }, this);\n  };\n\n  Radar.prototype.update = function (ecModel, api) {\n    var indicatorAxes = this._indicatorAxes;\n    var radarModel = this._model;\n    each(indicatorAxes, function (indicatorAxis) {\n      indicatorAxis.scale.setExtent(Infinity, -Infinity);\n    });\n    ecModel.eachSeriesByType('radar', function (radarSeries, idx) {\n      if (radarSeries.get('coordinateSystem') !== 'radar' // @ts-ignore\n      || ecModel.getComponent('radar', radarSeries.get('radarIndex')) !== radarModel) {\n        return;\n      }\n\n      var data = radarSeries.getData();\n      each(indicatorAxes, function (indicatorAxis) {\n        indicatorAxis.scale.unionExtentFromData(data, data.mapDimension(indicatorAxis.dim));\n      });\n    }, this);\n    var splitNumber = radarModel.get('splitNumber');\n\n    function increaseInterval(interval) {\n      var exp10 = Math.pow(10, Math.floor(Math.log(interval) / Math.LN10)); // Increase interval\n\n      var f = interval / exp10;\n\n      if (f === 2) {\n        f = 5;\n      } else {\n        // f is 2 or 5\n        f *= 2;\n      }\n\n      return f * exp10;\n    } // Force all the axis fixing the maxSplitNumber.\n\n\n    each(indicatorAxes, function (indicatorAxis, idx) {\n      var rawExtent = getScaleExtent(indicatorAxis.scale, indicatorAxis.model).extent;\n      niceScaleExtent(indicatorAxis.scale, indicatorAxis.model);\n      var axisModel = indicatorAxis.model;\n      var scale = indicatorAxis.scale;\n      var fixedMin = parseAxisModelMinMax(scale, axisModel.get('min', true));\n      var fixedMax = parseAxisModelMinMax(scale, axisModel.get('max', true));\n      var interval = scale.getInterval();\n\n      if (fixedMin != null && fixedMax != null) {\n        // User set min, max, divide to get new interval\n        scale.setExtent(+fixedMin, +fixedMax);\n        scale.setInterval((fixedMax - fixedMin) / splitNumber);\n      } else if (fixedMin != null) {\n        var max = void 0; // User set min, expand extent on the other side\n\n        do {\n          max = fixedMin + interval * splitNumber;\n          scale.setExtent(+fixedMin, max); // Interval must been set after extent\n          // FIXME\n\n          scale.setInterval(interval);\n          interval = increaseInterval(interval);\n        } while (max < rawExtent[1] && isFinite(max) && isFinite(rawExtent[1]));\n      } else if (fixedMax != null) {\n        var min = void 0; // User set min, expand extent on the other side\n\n        do {\n          min = fixedMax - interval * splitNumber;\n          scale.setExtent(min, +fixedMax);\n          scale.setInterval(interval);\n          interval = increaseInterval(interval);\n        } while (min > rawExtent[0] && isFinite(min) && isFinite(rawExtent[0]));\n      } else {\n        var nicedSplitNumber = scale.getTicks().length - 1;\n\n        if (nicedSplitNumber > splitNumber) {\n          interval = increaseInterval(interval);\n        } // TODO\n\n\n        var max = Math.ceil(rawExtent[1] / interval) * interval;\n        var min = numberUtil.round(max - interval * splitNumber);\n        scale.setExtent(min, max);\n        scale.setInterval(interval);\n      }\n    });\n  };\n\n  Radar.prototype.convertToPixel = function (ecModel, finder, value) {\n    console.warn('Not implemented.');\n    return null;\n  };\n\n  Radar.prototype.convertFromPixel = function (ecModel, finder, pixel) {\n    console.warn('Not implemented.');\n    return null;\n  };\n\n  Radar.prototype.containPoint = function (point) {\n    console.warn('Not implemented.');\n    return false;\n  };\n\n  Radar.create = function (ecModel, api) {\n    var radarList = [];\n    ecModel.eachComponent('radar', function (radarModel) {\n      var radar = new Radar(radarModel, ecModel, api);\n      radarList.push(radar);\n      radarModel.coordinateSystem = radar;\n    });\n    ecModel.eachSeriesByType('radar', function (radarSeries) {\n      if (radarSeries.get('coordinateSystem') === 'radar') {\n        // Inject coordinate system\n        // @ts-ignore\n        radarSeries.coordinateSystem = radarList[radarSeries.get('radarIndex') || 0];\n      }\n    });\n    return radarList;\n  };\n  /**\n   * Radar dimensions is based on the data\n   */\n\n\n  Radar.dimensions = [];\n  return Radar;\n}();\n\nexport default Radar;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport RadarModel from '../../coord/radar/RadarModel';\nimport RadarView from './RadarView';\nimport Radar from '../../coord/radar/Radar';\nexport function install(registers) {\n  registers.registerCoordinateSystem('radar', Radar);\n  registers.registerComponentModel(RadarModel);\n  registers.registerComponentView(RadarView);\n  registers.registerVisual({\n    seriesType: 'radar',\n    reset: function reset(seriesModel) {\n      var data = seriesModel.getData(); // itemVisual symbol is for selected data\n\n      data.each(function (idx) {\n        data.setItemVisual(idx, 'legendIcon', 'roundRect');\n      }); // visual is for unselected data\n\n      data.setVisual('legendIcon', 'roundRect');\n    }\n  });\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// @ts-nocheck\nimport * as echarts from '../../core/echarts';\nvar ATTR = '\\0_ec_interaction_mutex';\nexport function take(zr, resourceKey, userKey) {\n  var store = getStore(zr);\n  store[resourceKey] = userKey;\n}\nexport function release(zr, resourceKey, userKey) {\n  var store = getStore(zr);\n  var uKey = store[resourceKey];\n\n  if (uKey === userKey) {\n    store[resourceKey] = null;\n  }\n}\nexport function isTaken(zr, resourceKey) {\n  return !!getStore(zr)[resourceKey];\n}\n\nfunction getStore(zr) {\n  return zr[ATTR] || (zr[ATTR] = {});\n}\n/**\n * payload: {\n *     type: 'takeGlobalCursor',\n *     key: 'dataZoomSelect', or 'brush', or ...,\n *         If no userKey, release global cursor.\n * }\n */\n// TODO: SELF REGISTERED.\n\n\necharts.registerAction({\n  type: 'takeGlobalCursor',\n  event: 'globalCursorTaken',\n  update: 'update'\n}, function () {});","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Eventful from 'zrender/lib/core/Eventful';\nimport * as eventTool from 'zrender/lib/core/event';\nimport * as interactionMutex from './interactionMutex';\nimport { isString, bind, defaults, clone } from 'zrender/lib/core/util';\n;\n\nvar RoamController =\n/** @class */\nfunction (_super) {\n  __extends(RoamController, _super);\n\n  function RoamController(zr) {\n    var _this = _super.call(this) || this;\n\n    _this._zr = zr; // Avoid two roamController bind the same handler\n\n    var mousedownHandler = bind(_this._mousedownHandler, _this);\n    var mousemoveHandler = bind(_this._mousemoveHandler, _this);\n    var mouseupHandler = bind(_this._mouseupHandler, _this);\n    var mousewheelHandler = bind(_this._mousewheelHandler, _this);\n    var pinchHandler = bind(_this._pinchHandler, _this);\n    /**\n     * Notice: only enable needed types. For example, if 'zoom'\n     * is not needed, 'zoom' should not be enabled, otherwise\n     * default mousewheel behaviour (scroll page) will be disabled.\n     */\n\n    _this.enable = function (controlType, opt) {\n      // Disable previous first\n      this.disable();\n      this._opt = defaults(clone(opt) || {}, {\n        zoomOnMouseWheel: true,\n        moveOnMouseMove: true,\n        // By default, wheel do not trigger move.\n        moveOnMouseWheel: false,\n        preventDefaultMouseMove: true\n      });\n\n      if (controlType == null) {\n        controlType = true;\n      }\n\n      if (controlType === true || controlType === 'move' || controlType === 'pan') {\n        zr.on('mousedown', mousedownHandler);\n        zr.on('mousemove', mousemoveHandler);\n        zr.on('mouseup', mouseupHandler);\n      }\n\n      if (controlType === true || controlType === 'scale' || controlType === 'zoom') {\n        zr.on('mousewheel', mousewheelHandler);\n        zr.on('pinch', pinchHandler);\n      }\n    };\n\n    _this.disable = function () {\n      zr.off('mousedown', mousedownHandler);\n      zr.off('mousemove', mousemoveHandler);\n      zr.off('mouseup', mouseupHandler);\n      zr.off('mousewheel', mousewheelHandler);\n      zr.off('pinch', pinchHandler);\n    };\n\n    return _this;\n  }\n\n  RoamController.prototype.isDragging = function () {\n    return this._dragging;\n  };\n\n  RoamController.prototype.isPinching = function () {\n    return this._pinching;\n  };\n\n  RoamController.prototype.setPointerChecker = function (pointerChecker) {\n    this.pointerChecker = pointerChecker;\n  };\n\n  RoamController.prototype.dispose = function () {\n    this.disable();\n  };\n\n  RoamController.prototype._mousedownHandler = function (e) {\n    if (eventTool.isMiddleOrRightButtonOnMouseUpDown(e) || e.target && e.target.draggable) {\n      return;\n    }\n\n    var x = e.offsetX;\n    var y = e.offsetY; // Only check on mosedown, but not mousemove.\n    // Mouse can be out of target when mouse moving.\n\n    if (this.pointerChecker && this.pointerChecker(e, x, y)) {\n      this._x = x;\n      this._y = y;\n      this._dragging = true;\n    }\n  };\n\n  RoamController.prototype._mousemoveHandler = function (e) {\n    if (!this._dragging || !isAvailableBehavior('moveOnMouseMove', e, this._opt) || e.gestureEvent === 'pinch' || interactionMutex.isTaken(this._zr, 'globalPan')) {\n      return;\n    }\n\n    var x = e.offsetX;\n    var y = e.offsetY;\n    var oldX = this._x;\n    var oldY = this._y;\n    var dx = x - oldX;\n    var dy = y - oldY;\n    this._x = x;\n    this._y = y;\n    this._opt.preventDefaultMouseMove && eventTool.stop(e.event);\n    trigger(this, 'pan', 'moveOnMouseMove', e, {\n      dx: dx,\n      dy: dy,\n      oldX: oldX,\n      oldY: oldY,\n      newX: x,\n      newY: y,\n      isAvailableBehavior: null\n    });\n  };\n\n  RoamController.prototype._mouseupHandler = function (e) {\n    if (!eventTool.isMiddleOrRightButtonOnMouseUpDown(e)) {\n      this._dragging = false;\n    }\n  };\n\n  RoamController.prototype._mousewheelHandler = function (e) {\n    var shouldZoom = isAvailableBehavior('zoomOnMouseWheel', e, this._opt);\n    var shouldMove = isAvailableBehavior('moveOnMouseWheel', e, this._opt);\n    var wheelDelta = e.wheelDelta;\n    var absWheelDeltaDelta = Math.abs(wheelDelta);\n    var originX = e.offsetX;\n    var originY = e.offsetY; // wheelDelta maybe -0 in chrome mac.\n\n    if (wheelDelta === 0 || !shouldZoom && !shouldMove) {\n      return;\n    } // If both `shouldZoom` and `shouldMove` is true, trigger\n    // their event both, and the final behavior is determined\n    // by event listener themselves.\n\n\n    if (shouldZoom) {\n      // Convenience:\n      // Mac and VM Windows on Mac: scroll up: zoom out.\n      // Windows: scroll up: zoom in.\n      // FIXME: Should do more test in different environment.\n      // wheelDelta is too complicated in difference nvironment\n      // (https://developer.mozilla.org/en-US/docs/Web/Events/mousewheel),\n      // although it has been normallized by zrender.\n      // wheelDelta of mouse wheel is bigger than touch pad.\n      var factor = absWheelDeltaDelta > 3 ? 1.4 : absWheelDeltaDelta > 1 ? 1.2 : 1.1;\n      var scale = wheelDelta > 0 ? factor : 1 / factor;\n      checkPointerAndTrigger(this, 'zoom', 'zoomOnMouseWheel', e, {\n        scale: scale,\n        originX: originX,\n        originY: originY,\n        isAvailableBehavior: null\n      });\n    }\n\n    if (shouldMove) {\n      // FIXME: Should do more test in different environment.\n      var absDelta = Math.abs(wheelDelta); // wheelDelta of mouse wheel is bigger than touch pad.\n\n      var scrollDelta = (wheelDelta > 0 ? 1 : -1) * (absDelta > 3 ? 0.4 : absDelta > 1 ? 0.15 : 0.05);\n      checkPointerAndTrigger(this, 'scrollMove', 'moveOnMouseWheel', e, {\n        scrollDelta: scrollDelta,\n        originX: originX,\n        originY: originY,\n        isAvailableBehavior: null\n      });\n    }\n  };\n\n  RoamController.prototype._pinchHandler = function (e) {\n    if (interactionMutex.isTaken(this._zr, 'globalPan')) {\n      return;\n    }\n\n    var scale = e.pinchScale > 1 ? 1.1 : 1 / 1.1;\n    checkPointerAndTrigger(this, 'zoom', null, e, {\n      scale: scale,\n      originX: e.pinchX,\n      originY: e.pinchY,\n      isAvailableBehavior: null\n    });\n  };\n\n  return RoamController;\n}(Eventful);\n\nfunction checkPointerAndTrigger(controller, eventName, behaviorToCheck, e, contollerEvent) {\n  if (controller.pointerChecker && controller.pointerChecker(e, contollerEvent.originX, contollerEvent.originY)) {\n    // When mouse is out of roamController rect,\n    // default befavoius should not be be disabled, otherwise\n    // page sliding is disabled, contrary to expectation.\n    eventTool.stop(e.event);\n    trigger(controller, eventName, behaviorToCheck, e, contollerEvent);\n  }\n}\n\nfunction trigger(controller, eventName, behaviorToCheck, e, contollerEvent) {\n  // Also provide behavior checker for event listener, for some case that\n  // multiple components share one listener.\n  contollerEvent.isAvailableBehavior = bind(isAvailableBehavior, null, behaviorToCheck, e); // TODO should not have type issue.\n\n  controller.trigger(eventName, contollerEvent);\n} // settings: {\n//     zoomOnMouseWheel\n//     moveOnMouseMove\n//     moveOnMouseWheel\n// }\n// The value can be: true / false / 'shift' / 'ctrl' / 'alt'.\n\n\nfunction isAvailableBehavior(behaviorToCheck, e, settings) {\n  var setting = settings[behaviorToCheck];\n  return !behaviorToCheck || setting && (!isString(setting) || e.event[setting + 'Key']);\n}\n\nexport default RoamController;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * For geo and graph.\n */\nexport function updateViewOnPan(controllerHost, dx, dy) {\n  var target = controllerHost.target;\n  target.x += dx;\n  target.y += dy;\n  target.dirty();\n}\n/**\n * For geo and graph.\n */\n\nexport function updateViewOnZoom(controllerHost, zoomDelta, zoomX, zoomY) {\n  var target = controllerHost.target;\n  var zoomLimit = controllerHost.zoomLimit;\n  var newZoom = controllerHost.zoom = controllerHost.zoom || 1;\n  newZoom *= zoomDelta;\n\n  if (zoomLimit) {\n    var zoomMin = zoomLimit.min || 0;\n    var zoomMax = zoomLimit.max || Infinity;\n    newZoom = Math.max(Math.min(zoomMax, newZoom), zoomMin);\n  }\n\n  var zoomScale = newZoom / controllerHost.zoom;\n  controllerHost.zoom = newZoom; // Keep the mouse center when scaling\n\n  target.x -= (zoomX - target.x) * (zoomScale - 1);\n  target.y -= (zoomY - target.y) * (zoomScale - 1);\n  target.scaleX *= zoomScale;\n  target.scaleY *= zoomScale;\n  target.dirty();\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar IRRELEVANT_EXCLUDES = {\n  'axisPointer': 1,\n  'tooltip': 1,\n  'brush': 1\n};\n/**\n * Avoid that: mouse click on a elements that is over geo or graph,\n * but roam is triggered.\n */\n\nexport function onIrrelevantElement(e, api, targetCoordSysModel) {\n  var model = api.getComponentByElement(e.topTarget); // If model is axisModel, it works only if it is injected with coordinateSystem.\n\n  var coordSys = model && model.coordinateSystem;\n  return model && model !== targetCoordSysModel && !IRRELEVANT_EXCLUDES.hasOwnProperty(model.mainType) && coordSys && coordSys.model !== targetCoordSysModel;\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport RoamController from './RoamController';\nimport * as roamHelper from '../../component/helper/roamHelper';\nimport { onIrrelevantElement } from '../../component/helper/cursorHelper';\nimport * as graphic from '../../util/graphic';\nimport { enableHoverEmphasis, enableComponentHighDownFeatures, setDefaultStateProxy } from '../../util/states';\nimport geoSourceManager from '../../coord/geo/geoSourceManager';\nimport { getUID } from '../../util/component';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle';\nimport { getECData } from '../../util/innerStore';\nimport { createOrUpdatePatternFromDecal } from '../../util/decal';\nimport Displayable from 'zrender/lib/graphic/Displayable';\nimport { makeInner } from '../../util/model';\n/**\n * Only these tags enable use `itemStyle` if they are named in SVG.\n * Other tags like <text> <tspan> <image> might not suitable for `itemStyle`.\n * They will not be considered to be styled until some requirements come.\n */\n\nvar OPTION_STYLE_ENABLED_TAGS = ['rect', 'circle', 'line', 'ellipse', 'polygon', 'polyline', 'path'];\nvar OPTION_STYLE_ENABLED_TAG_MAP = zrUtil.createHashMap(OPTION_STYLE_ENABLED_TAGS);\nvar STATE_TRIGGER_TAG_MAP = zrUtil.createHashMap(OPTION_STYLE_ENABLED_TAGS.concat(['g']));\nvar LABEL_HOST_MAP = zrUtil.createHashMap(OPTION_STYLE_ENABLED_TAGS.concat(['g']));\nvar mapLabelRaw = makeInner();\n\nfunction getFixedItemStyle(model) {\n  var itemStyle = model.getItemStyle();\n  var areaColor = model.get('areaColor'); // If user want the color not to be changed when hover,\n  // they should both set areaColor and color to be null.\n\n  if (areaColor != null) {\n    itemStyle.fill = areaColor;\n  }\n\n  return itemStyle;\n}\n\nvar MapDraw =\n/** @class */\nfunction () {\n  function MapDraw(api) {\n    var group = new graphic.Group();\n    this.uid = getUID('ec_map_draw');\n    this._controller = new RoamController(api.getZr());\n    this._controllerHost = {\n      target: group\n    };\n    this.group = group;\n    group.add(this._regionsGroup = new graphic.Group());\n    group.add(this._svgGroup = new graphic.Group());\n  }\n\n  MapDraw.prototype.draw = function (mapOrGeoModel, ecModel, api, fromView, payload) {\n    var isGeo = mapOrGeoModel.mainType === 'geo'; // Map series has data. GEO model that controlled by map series\n    // will be assigned with map data. Other GEO model has no data.\n\n    var data = mapOrGeoModel.getData && mapOrGeoModel.getData();\n    isGeo && ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'map'\n    }, function (mapSeries) {\n      if (!data && mapSeries.getHostGeoModel() === mapOrGeoModel) {\n        data = mapSeries.getData();\n      }\n    });\n    var geo = mapOrGeoModel.coordinateSystem;\n    var regionsGroup = this._regionsGroup;\n    var group = this.group;\n    var transformInfo = geo.getTransformInfo();\n    var transformInfoRaw = transformInfo.raw;\n    var transformInfoRoam = transformInfo.roam; // No animation when first draw or in action\n\n    var isFirstDraw = !regionsGroup.childAt(0) || payload;\n\n    if (isFirstDraw) {\n      group.x = transformInfoRoam.x;\n      group.y = transformInfoRoam.y;\n      group.scaleX = transformInfoRoam.scaleX;\n      group.scaleY = transformInfoRoam.scaleY;\n      group.dirty();\n    } else {\n      graphic.updateProps(group, transformInfoRoam, mapOrGeoModel);\n    }\n\n    var isVisualEncodedByVisualMap = data && data.getVisual('visualMeta') && data.getVisual('visualMeta').length > 0;\n    var viewBuildCtx = {\n      api: api,\n      geo: geo,\n      mapOrGeoModel: mapOrGeoModel,\n      data: data,\n      isVisualEncodedByVisualMap: isVisualEncodedByVisualMap,\n      isGeo: isGeo,\n      transformInfoRaw: transformInfoRaw\n    };\n\n    if (geo.resourceType === 'geoJSON') {\n      this._buildGeoJSON(viewBuildCtx);\n    } else if (geo.resourceType === 'geoSVG') {\n      this._buildSVG(viewBuildCtx);\n    }\n\n    this._updateController(mapOrGeoModel, ecModel, api);\n\n    this._updateMapSelectHandler(mapOrGeoModel, regionsGroup, api, fromView);\n  };\n\n  MapDraw.prototype._buildGeoJSON = function (viewBuildCtx) {\n    var regionsGroupByName = this._regionsGroupByName = zrUtil.createHashMap();\n    var regionsInfoByName = zrUtil.createHashMap();\n    var regionsGroup = this._regionsGroup;\n    var transformInfoRaw = viewBuildCtx.transformInfoRaw;\n    var mapOrGeoModel = viewBuildCtx.mapOrGeoModel;\n    var data = viewBuildCtx.data;\n\n    var transformPoint = function transformPoint(point) {\n      return [point[0] * transformInfoRaw.scaleX + transformInfoRaw.x, point[1] * transformInfoRaw.scaleY + transformInfoRaw.y];\n    };\n\n    regionsGroup.removeAll(); // Only when the resource is GeoJSON, there is `geo.regions`.\n\n    zrUtil.each(viewBuildCtx.geo.regions, function (region) {\n      var regionName = region.name; // Consider in GeoJson properties.name may be duplicated, for example,\n      // there is multiple region named \"United Kindom\" or \"France\" (so many\n      // colonies). And it is not appropriate to merge them in geo, which\n      // will make them share the same label and bring trouble in label\n      // location calculation.\n\n      var regionGroup = regionsGroupByName.get(regionName);\n\n      var _a = regionsInfoByName.get(regionName) || {},\n          dataIdx = _a.dataIdx,\n          regionModel = _a.regionModel;\n\n      if (!regionGroup) {\n        regionGroup = regionsGroupByName.set(regionName, new graphic.Group());\n        regionsGroup.add(regionGroup);\n        dataIdx = data ? data.indexOfName(regionName) : null;\n        regionModel = viewBuildCtx.isGeo ? mapOrGeoModel.getRegionModel(regionName) : data ? data.getItemModel(dataIdx) : null;\n        regionsInfoByName.set(regionName, {\n          dataIdx: dataIdx,\n          regionModel: regionModel\n        });\n      }\n\n      var compoundPath = new graphic.CompoundPath({\n        segmentIgnoreThreshold: 1,\n        shape: {\n          paths: []\n        }\n      });\n      regionGroup.add(compoundPath);\n      zrUtil.each(region.geometries, function (geometry) {\n        if (geometry.type !== 'polygon') {\n          return;\n        }\n\n        var points = [];\n\n        for (var i = 0; i < geometry.exterior.length; ++i) {\n          points.push(transformPoint(geometry.exterior[i]));\n        }\n\n        compoundPath.shape.paths.push(new graphic.Polygon({\n          segmentIgnoreThreshold: 1,\n          shape: {\n            points: points\n          }\n        }));\n\n        for (var i = 0; i < (geometry.interiors ? geometry.interiors.length : 0); ++i) {\n          var interior = geometry.interiors[i];\n          var points_1 = [];\n\n          for (var j = 0; j < interior.length; ++j) {\n            points_1.push(transformPoint(interior[j]));\n          }\n\n          compoundPath.shape.paths.push(new graphic.Polygon({\n            segmentIgnoreThreshold: 1,\n            shape: {\n              points: points_1\n            }\n          }));\n        }\n      });\n      applyOptionStyleForRegion(viewBuildCtx, compoundPath, dataIdx, regionModel);\n\n      if (compoundPath instanceof Displayable) {\n        compoundPath.culling = true;\n      }\n\n      var centerPt = transformPoint(region.getCenter());\n      resetLabelForRegion(viewBuildCtx, compoundPath, regionName, regionModel, mapOrGeoModel, dataIdx, centerPt);\n    }); // Ensure children have been added to `regionGroup` before calling them.\n\n    regionsGroupByName.each(function (regionGroup, regionName) {\n      var _a = regionsInfoByName.get(regionName),\n          dataIdx = _a.dataIdx,\n          regionModel = _a.regionModel;\n\n      resetEventTriggerForRegion(viewBuildCtx, regionGroup, regionName, regionModel, mapOrGeoModel, dataIdx);\n      resetTooltipForRegion(viewBuildCtx, regionGroup, regionName, regionModel, mapOrGeoModel);\n      resetStateTriggerForRegion(viewBuildCtx, regionGroup, regionName, regionModel, mapOrGeoModel);\n    }, this);\n  };\n\n  MapDraw.prototype._buildSVG = function (viewBuildCtx) {\n    var mapName = viewBuildCtx.geo.map;\n    var transformInfoRaw = viewBuildCtx.transformInfoRaw;\n    this._svgGroup.x = transformInfoRaw.x;\n    this._svgGroup.y = transformInfoRaw.y;\n    this._svgGroup.scaleX = transformInfoRaw.scaleX;\n    this._svgGroup.scaleY = transformInfoRaw.scaleY;\n\n    if (this._svgResourceChanged(mapName)) {\n      this._freeSVG();\n\n      this._useSVG(mapName);\n    }\n\n    var svgDispatcherMap = this._svgDispatcherMap = zrUtil.createHashMap();\n    var focusSelf = false;\n    zrUtil.each(this._svgGraphicRecord.named, function (namedItem) {\n      // Note that we also allow different elements have the same name.\n      // For example, a glyph of a city and the label of the city have\n      // the same name and their tooltip info can be defined in a single\n      // region option.\n      var regionName = namedItem.name;\n      var mapOrGeoModel = viewBuildCtx.mapOrGeoModel;\n      var data = viewBuildCtx.data;\n      var svgNodeTagLower = namedItem.svgNodeTagLower;\n      var el = namedItem.el;\n      var dataIdx = data ? data.indexOfName(regionName) : null;\n      var regionModel = mapOrGeoModel.getRegionModel(regionName);\n\n      if (OPTION_STYLE_ENABLED_TAG_MAP.get(svgNodeTagLower) != null && el instanceof Displayable) {\n        applyOptionStyleForRegion(viewBuildCtx, el, dataIdx, regionModel);\n      }\n\n      if (el instanceof Displayable) {\n        el.culling = true;\n      } // We do not know how the SVG like so we'd better not to change z2.\n      // Otherwise it might bring some unexpected result. For example,\n      // an area hovered that make some inner city can not be clicked.\n\n\n      el.z2EmphasisLift = 0; // If self named:\n\n      if (!namedItem.namedFrom) {\n        // label should batter to be displayed based on the center of <g>\n        // if it is named rather than displayed on each child.\n        if (LABEL_HOST_MAP.get(svgNodeTagLower) != null) {\n          resetLabelForRegion(viewBuildCtx, el, regionName, regionModel, mapOrGeoModel, dataIdx, null);\n        }\n\n        resetEventTriggerForRegion(viewBuildCtx, el, regionName, regionModel, mapOrGeoModel, dataIdx);\n        resetTooltipForRegion(viewBuildCtx, el, regionName, regionModel, mapOrGeoModel);\n\n        if (STATE_TRIGGER_TAG_MAP.get(svgNodeTagLower) != null) {\n          var focus_1 = resetStateTriggerForRegion(viewBuildCtx, el, regionName, regionModel, mapOrGeoModel);\n\n          if (focus_1 === 'self') {\n            focusSelf = true;\n          }\n\n          var els = svgDispatcherMap.get(regionName) || svgDispatcherMap.set(regionName, []);\n          els.push(el);\n        }\n      }\n    }, this);\n\n    this._enableBlurEntireSVG(focusSelf, viewBuildCtx);\n  };\n\n  MapDraw.prototype._enableBlurEntireSVG = function (focusSelf, viewBuildCtx) {\n    // It's a little complicated to support blurring the entire geoSVG in series-map.\n    // So do not suport it until some requirements come.\n    // At present, in series-map, only regions can be blurred.\n    if (focusSelf && viewBuildCtx.isGeo) {\n      var blurStyle = viewBuildCtx.mapOrGeoModel.getModel(['blur', 'itemStyle']).getItemStyle(); // Only suport `opacity` here. Because not sure that other props are suitable for\n      // all of the elements generated by SVG (especially for Text/TSpan/Image/... ).\n\n      var opacity_1 = blurStyle.opacity;\n\n      this._svgGraphicRecord.root.traverse(function (el) {\n        if (!el.isGroup) {\n          // PENDING: clear those settings to SVG elements when `_freeSVG`.\n          // (Currently it happen not to be needed.)\n          setDefaultStateProxy(el);\n          var style = el.ensureState('blur').style || {}; // Do not overwrite the region style that already set from region option.\n\n          if (style.opacity == null && opacity_1 != null) {\n            style.opacity = opacity_1;\n          } // If `ensureState('blur').style = {}`, there will be default opacity.\n          // Enable `stateTransition` (animation).\n\n\n          el.ensureState('emphasis');\n        }\n      });\n    }\n  };\n\n  MapDraw.prototype.remove = function () {\n    this._regionsGroup.removeAll();\n\n    this._regionsGroupByName = null;\n\n    this._svgGroup.removeAll();\n\n    this._freeSVG();\n\n    this._controller.dispose();\n\n    this._controllerHost = null;\n  };\n\n  MapDraw.prototype.findHighDownDispatchers = function (name, geoModel) {\n    if (name == null) {\n      return [];\n    }\n\n    var geo = geoModel.coordinateSystem;\n\n    if (geo.resourceType === 'geoJSON') {\n      var regionsGroupByName = this._regionsGroupByName;\n\n      if (regionsGroupByName) {\n        var regionGroup = regionsGroupByName.get(name);\n        return regionGroup ? [regionGroup] : [];\n      }\n    } else if (geo.resourceType === 'geoSVG') {\n      return this._svgDispatcherMap && this._svgDispatcherMap.get(name) || [];\n    }\n  };\n\n  MapDraw.prototype._svgResourceChanged = function (mapName) {\n    return this._svgMapName !== mapName;\n  };\n\n  MapDraw.prototype._useSVG = function (mapName) {\n    var resource = geoSourceManager.getGeoResource(mapName);\n\n    if (resource && resource.type === 'geoSVG') {\n      var svgGraphic = resource.useGraphic(this.uid);\n\n      this._svgGroup.add(svgGraphic.root);\n\n      this._svgGraphicRecord = svgGraphic;\n      this._svgMapName = mapName;\n    }\n  };\n\n  MapDraw.prototype._freeSVG = function () {\n    var mapName = this._svgMapName;\n\n    if (mapName == null) {\n      return;\n    }\n\n    var resource = geoSourceManager.getGeoResource(mapName);\n\n    if (resource && resource.type === 'geoSVG') {\n      resource.freeGraphic(this.uid);\n    }\n\n    this._svgGraphicRecord = null;\n    this._svgDispatcherMap = null;\n\n    this._svgGroup.removeAll();\n\n    this._svgMapName = null;\n  };\n\n  MapDraw.prototype._updateController = function (mapOrGeoModel, ecModel, api) {\n    var geo = mapOrGeoModel.coordinateSystem;\n    var controller = this._controller;\n    var controllerHost = this._controllerHost; // @ts-ignore FIXME:TS\n\n    controllerHost.zoomLimit = mapOrGeoModel.get('scaleLimit');\n    controllerHost.zoom = geo.getZoom(); // roamType is will be set default true if it is null\n    // @ts-ignore FIXME:TS\n\n    controller.enable(mapOrGeoModel.get('roam') || false);\n    var mainType = mapOrGeoModel.mainType;\n\n    function makeActionBase() {\n      var action = {\n        type: 'geoRoam',\n        componentType: mainType\n      };\n      action[mainType + 'Id'] = mapOrGeoModel.id;\n      return action;\n    }\n\n    controller.off('pan').on('pan', function (e) {\n      this._mouseDownFlag = false;\n      roamHelper.updateViewOnPan(controllerHost, e.dx, e.dy);\n      api.dispatchAction(zrUtil.extend(makeActionBase(), {\n        dx: e.dx,\n        dy: e.dy\n      }));\n    }, this);\n    controller.off('zoom').on('zoom', function (e) {\n      this._mouseDownFlag = false;\n      roamHelper.updateViewOnZoom(controllerHost, e.scale, e.originX, e.originY);\n      api.dispatchAction(zrUtil.extend(makeActionBase(), {\n        zoom: e.scale,\n        originX: e.originX,\n        originY: e.originY\n      }));\n    }, this);\n    controller.setPointerChecker(function (e, x, y) {\n      return geo.containPoint([x, y]) && !onIrrelevantElement(e, api, mapOrGeoModel);\n    });\n  };\n  /**\n   * FIXME: this is a temporarily workaround.\n   * When `geoRoam` the elements need to be reset in `MapView['render']`, because the props like\n   * `ignore` might have been modified by `LabelManager`, and `LabelManager#addLabelsOfSeries`\n   * will subsequently cache `defaultAttr` like `ignore`. If do not do this reset, the modified\n   * props will have no chance to be restored.\n   * Note: this reset should be after `clearStates` in `renderSeries` becuase `useStates` in\n   * `renderSeries` will cache the modified `ignore` to `el._normalState`.\n   * TODO:\n   * Use clone/immutable in `LabelManager`?\n   */\n\n\n  MapDraw.prototype.resetForLabelLayout = function () {\n    this.group.traverse(function (el) {\n      var label = el.getTextContent();\n\n      if (label) {\n        label.ignore = mapLabelRaw(label).ignore;\n      }\n    });\n  };\n\n  MapDraw.prototype._updateMapSelectHandler = function (mapOrGeoModel, regionsGroup, api, fromView) {\n    var mapDraw = this;\n    regionsGroup.off('mousedown');\n    regionsGroup.off('click'); // @ts-ignore FIXME:TS resolve type conflict\n\n    if (mapOrGeoModel.get('selectedMode')) {\n      regionsGroup.on('mousedown', function () {\n        mapDraw._mouseDownFlag = true;\n      });\n      regionsGroup.on('click', function (e) {\n        if (!mapDraw._mouseDownFlag) {\n          return;\n        }\n\n        mapDraw._mouseDownFlag = false;\n      });\n    }\n  };\n\n  return MapDraw;\n}();\n\n;\n\nfunction applyOptionStyleForRegion(viewBuildCtx, el, dataIndex, regionModel) {\n  // All of the path are using `itemStyle`, becuase\n  // (1) Some SVG also use fill on polyline (The different between\n  // polyline and polygon is \"open\" or \"close\" but not fill or not).\n  // (2) For the common props like opacity, if some use itemStyle\n  // and some use `lineStyle`, it might confuse users.\n  // (3) Most SVG use <path>, where can not detect wether draw a \"line\"\n  // or a filled shape, so use `itemStyle` for <path>.\n  var normalStyleModel = regionModel.getModel('itemStyle');\n  var emphasisStyleModel = regionModel.getModel(['emphasis', 'itemStyle']);\n  var blurStyleModel = regionModel.getModel(['blur', 'itemStyle']);\n  var selectStyleModel = regionModel.getModel(['select', 'itemStyle']); // NOTE: DONT use 'style' in visual when drawing map.\n  // This component is used for drawing underlying map for both geo component and map series.\n\n  var normalStyle = getFixedItemStyle(normalStyleModel);\n  var emphasisStyle = getFixedItemStyle(emphasisStyleModel);\n  var selectStyle = getFixedItemStyle(selectStyleModel);\n  var blurStyle = getFixedItemStyle(blurStyleModel); // Update the itemStyle if has data visual\n\n  var data = viewBuildCtx.data;\n\n  if (data) {\n    // Only visual color of each item will be used. It can be encoded by visualMap\n    // But visual color of series is used in symbol drawing\n    // Visual color for each series is for the symbol draw\n    var style = data.getItemVisual(dataIndex, 'style');\n    var decal = data.getItemVisual(dataIndex, 'decal');\n\n    if (viewBuildCtx.isVisualEncodedByVisualMap && style.fill) {\n      normalStyle.fill = style.fill;\n    }\n\n    if (decal) {\n      normalStyle.decal = createOrUpdatePatternFromDecal(decal, viewBuildCtx.api);\n    }\n  } // SVG text, tspan and image can be named but not supporeted\n  // to be styled by region option yet.\n\n\n  el.setStyle(normalStyle);\n  el.style.strokeNoScale = true;\n  el.ensureState('emphasis').style = emphasisStyle;\n  el.ensureState('select').style = selectStyle;\n  el.ensureState('blur').style = blurStyle; // Enable blur\n\n  setDefaultStateProxy(el);\n}\n\nfunction resetLabelForRegion(viewBuildCtx, el, regionName, regionModel, mapOrGeoModel, // Exist only if `viewBuildCtx.data` exists.\ndataIdx, // If labelXY not provided, use `textConfig.position: 'inside'`\nlabelXY) {\n  var data = viewBuildCtx.data;\n  var isGeo = viewBuildCtx.isGeo;\n  var isDataNaN = data && isNaN(data.get(data.mapDimension('value'), dataIdx));\n  var itemLayout = data && data.getItemLayout(dataIdx); // In the following cases label will be drawn\n  // 1. In map series and data value is NaN\n  // 2. In geo component\n  // 3. Region has no series legendIcon, which will be add a showLabel flag in mapSymbolLayout\n\n  if (isGeo || isDataNaN || itemLayout && itemLayout.showLabel) {\n    var query = !isGeo ? dataIdx : regionName;\n    var labelFetcher = void 0; // Consider dataIdx not found.\n\n    if (!data || dataIdx >= 0) {\n      labelFetcher = mapOrGeoModel;\n    }\n\n    var specifiedTextOpt = labelXY ? {\n      normal: {\n        align: 'center',\n        verticalAlign: 'middle'\n      }\n    } : null; // Caveat: must be called after `setDefaultStateProxy(el);` called.\n    // because textContent will be assign with `el.stateProxy` inside.\n\n    setLabelStyle(el, getLabelStatesModels(regionModel), {\n      labelFetcher: labelFetcher,\n      labelDataIndex: query,\n      defaultText: regionName\n    }, specifiedTextOpt);\n    var textEl = el.getTextContent();\n\n    if (textEl) {\n      mapLabelRaw(textEl).ignore = textEl.ignore;\n\n      if (el.textConfig && labelXY) {\n        // Compute a relative offset based on the el bounding rect.\n        var rect = el.getBoundingRect().clone(); // Need to make sure the percent position base on the same rect in normal and\n        // emphasis state. Otherwise if using boundingRect of el, but the emphasis state\n        // has borderWidth (even 0.5px), the text position will be changed obviously\n        // if the position is very big like ['1234%', '1345%'].\n\n        el.textConfig.layoutRect = rect;\n        el.textConfig.position = [(labelXY[0] - rect.x) / rect.width * 100 + '%', (labelXY[1] - rect.y) / rect.height * 100 + '%'];\n      }\n    } // PENDING:\n    // If labelLayout is enabled (test/label-layout.html), el.dataIndex should be specified.\n    // But el.dataIndex is also used to determine whether user event should be triggered,\n    // where el.seriesIndex or el.dataModel must be specified. At present for a single el\n    // there is not case that \"only label layout enabled but user event disabled\", so here\n    // we depends `resetEventTriggerForRegion` to do the job of setting `el.dataIndex`.\n\n\n    el.disableLabelAnimation = true;\n  } else {\n    el.removeTextContent();\n    el.removeTextConfig();\n    el.disableLabelAnimation = null;\n  }\n}\n\nfunction resetEventTriggerForRegion(viewBuildCtx, eventTrigger, regionName, regionModel, mapOrGeoModel, // Exist only if `viewBuildCtx.data` exists.\ndataIdx) {\n  // setItemGraphicEl, setHoverStyle after all polygons and labels\n  // are added to the rigionGroup\n  if (viewBuildCtx.data) {\n    // FIXME: when series-map use a SVG map, and there are duplicated name specified\n    // on different SVG elements, after `data.setItemGraphicEl(...)`:\n    // (1) all of them will be mounted with `dataIndex`, `seriesIndex`, so that tooltip\n    // can be triggered only mouse hover. That's correct.\n    // (2) only the last element will be kept in `data`, so that if trigger tooltip\n    // by `dispatchAction`, only the last one can be found and triggered. That might be\n    // not correct. We will fix it in future if anyone demanding that.\n    viewBuildCtx.data.setItemGraphicEl(dataIdx, eventTrigger);\n  } // series-map will not trigger \"geoselectchange\" no matter it is\n  // based on a declared geo component. Becuause series-map will\n  // trigger \"selectchange\". If it trigger both the two events,\n  // If users call `chart.dispatchAction({type: 'toggleSelect'})`,\n  // it not easy to also fire event \"geoselectchanged\".\n  else {\n    // Package custom mouse event for geo component\n    getECData(eventTrigger).eventData = {\n      componentType: 'geo',\n      componentIndex: mapOrGeoModel.componentIndex,\n      geoIndex: mapOrGeoModel.componentIndex,\n      name: regionName,\n      region: regionModel && regionModel.option || {}\n    };\n  }\n}\n\nfunction resetTooltipForRegion(viewBuildCtx, el, regionName, regionModel, mapOrGeoModel) {\n  if (!viewBuildCtx.data) {\n    graphic.setTooltipConfig({\n      el: el,\n      componentModel: mapOrGeoModel,\n      itemName: regionName,\n      // @ts-ignore FIXME:TS fix the \"compatible with each other\"?\n      itemTooltipOption: regionModel.get('tooltip')\n    });\n  }\n}\n\nfunction resetStateTriggerForRegion(viewBuildCtx, el, regionName, regionModel, mapOrGeoModel) {\n  // @ts-ignore FIXME:TS fix the \"compatible with each other\"?\n  el.highDownSilentOnTouch = !!mapOrGeoModel.get('selectedMode'); // @ts-ignore FIXME:TS fix the \"compatible with each other\"?\n\n  var emphasisModel = regionModel.getModel('emphasis');\n  var focus = emphasisModel.get('focus');\n  enableHoverEmphasis(el, focus, emphasisModel.get('blurScope'));\n\n  if (viewBuildCtx.isGeo) {\n    enableComponentHighDownFeatures(el, mapOrGeoModel, regionName);\n  }\n\n  return focus;\n}\n\nexport default MapDraw; // @ts-ignore FIXME:TS fix the \"compatible with each other\"?","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic';\nimport MapDraw from '../../component/helper/MapDraw';\nimport ChartView from '../../view/Chart';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle';\nimport { setStatesFlag, Z2_EMPHASIS_LIFT } from '../../util/states';\n\nvar MapView =\n/** @class */\nfunction (_super) {\n  __extends(MapView, _super);\n\n  function MapView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = MapView.type;\n    return _this;\n  }\n\n  MapView.prototype.render = function (mapModel, ecModel, api, payload) {\n    // Not render if it is an toggleSelect action from self\n    if (payload && payload.type === 'mapToggleSelect' && payload.from === this.uid) {\n      return;\n    }\n\n    var group = this.group;\n    group.removeAll();\n\n    if (mapModel.getHostGeoModel()) {\n      return;\n    }\n\n    if (this._mapDraw && payload && payload.type === 'geoRoam') {\n      this._mapDraw.resetForLabelLayout();\n    } // Not update map if it is an roam action from self\n\n\n    if (!(payload && payload.type === 'geoRoam' && payload.componentType === 'series' && payload.seriesId === mapModel.id)) {\n      if (mapModel.needsDrawMap) {\n        var mapDraw = this._mapDraw || new MapDraw(api);\n        group.add(mapDraw.group);\n        mapDraw.draw(mapModel, ecModel, api, this, payload);\n        this._mapDraw = mapDraw;\n      } else {\n        // Remove drawed map\n        this._mapDraw && this._mapDraw.remove();\n        this._mapDraw = null;\n      }\n    } else {\n      var mapDraw = this._mapDraw;\n      mapDraw && group.add(mapDraw.group);\n    }\n\n    mapModel.get('showLegendSymbol') && ecModel.getComponent('legend') && this._renderSymbols(mapModel, ecModel, api);\n  };\n\n  MapView.prototype.remove = function () {\n    this._mapDraw && this._mapDraw.remove();\n    this._mapDraw = null;\n    this.group.removeAll();\n  };\n\n  MapView.prototype.dispose = function () {\n    this._mapDraw && this._mapDraw.remove();\n    this._mapDraw = null;\n  };\n\n  MapView.prototype._renderSymbols = function (mapModel, ecModel, api) {\n    var originalData = mapModel.originalData;\n    var group = this.group;\n    originalData.each(originalData.mapDimension('value'), function (value, originalDataIndex) {\n      if (isNaN(value)) {\n        return;\n      }\n\n      var layout = originalData.getItemLayout(originalDataIndex);\n\n      if (!layout || !layout.point) {\n        // Not exists in map\n        return;\n      }\n\n      var point = layout.point;\n      var offset = layout.offset;\n      var circle = new graphic.Circle({\n        style: {\n          // Because the special of map draw.\n          // Which needs statistic of multiple series and draw on one map.\n          // And each series also need a symbol with legend color\n          //\n          // Layout and visual are put one the different data\n          // TODO\n          fill: mapModel.getData().getVisual('style').fill\n        },\n        shape: {\n          cx: point[0] + offset * 9,\n          cy: point[1],\n          r: 3\n        },\n        silent: true,\n        // Do not overlap the first series, on which labels are displayed.\n        z2: 8 + (!offset ? Z2_EMPHASIS_LIFT + 1 : 0)\n      }); // Only the series that has the first value on the same region is in charge of rendering the label.\n      // But consider the case:\n      // series: [\n      //     {id: 'X', type: 'map', map: 'm', {data: [{name: 'A', value: 11}, {name: 'B', {value: 22}]},\n      //     {id: 'Y', type: 'map', map: 'm', {data: [{name: 'A', value: 21}, {name: 'C', {value: 33}]}\n      // ]\n      // The offset `0` of item `A` is at series `X`, but of item `C` is at series `Y`.\n      // For backward compatibility, we follow the rule that render label `A` by the\n      // settings on series `X` but render label `C` by the settings on series `Y`.\n\n      if (!offset) {\n        var fullData = mapModel.mainSeries.getData();\n        var name_1 = originalData.getName(originalDataIndex);\n        var fullIndex_1 = fullData.indexOfName(name_1);\n        var itemModel = originalData.getItemModel(originalDataIndex);\n        var labelModel = itemModel.getModel('label');\n        var regionGroup = fullData.getItemGraphicEl(fullIndex_1); // `getFormattedLabel` needs to use `getData` inside. Here\n        // `mapModel.getData()` is shallow cloned from `mainSeries.getData()`.\n        // FIXME\n        // If this is not the `mainSeries`, the item model (like label formatter)\n        // set on original data item will never get. But it has been working\n        // like that from the begining, and this scenario is rarely encountered.\n        // So it won't be fixed until have to.\n\n        setLabelStyle(circle, getLabelStatesModels(itemModel), {\n          labelFetcher: {\n            getFormattedLabel: function getFormattedLabel(idx, state) {\n              return mapModel.getFormattedLabel(fullIndex_1, state);\n            }\n          }\n        });\n        circle.disableLabelAnimation = true;\n\n        if (!labelModel.get('position')) {\n          circle.setTextConfig({\n            position: 'bottom'\n          });\n        }\n\n        regionGroup.onHoverStateChange = function (toState) {\n          setStatesFlag(circle, toState);\n        };\n      }\n\n      group.add(circle);\n    });\n  };\n\n  MapView.type = 'map';\n  return MapView;\n}(ChartView);\n\nexport default MapView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport createSeriesDataSimply from '../helper/createSeriesDataSimply';\nimport SeriesModel from '../../model/Series';\nimport geoSourceManager from '../../coord/geo/geoSourceManager';\nimport { makeSeriesEncodeForNameBased } from '../../data/helper/sourceHelper';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup';\nimport { createSymbol } from '../../util/symbol';\n\nvar MapSeries =\n/** @class */\nfunction (_super) {\n  __extends(MapSeries, _super);\n\n  function MapSeries() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = MapSeries.type; // Only first map series of same mapType will drawMap.\n\n    _this.needsDrawMap = false; // Group of all map series with same mapType\n\n    _this.seriesGroup = [];\n\n    _this.getTooltipPosition = function (dataIndex) {\n      if (dataIndex != null) {\n        var name_1 = this.getData().getName(dataIndex);\n        var geo = this.coordinateSystem;\n        var region = geo.getRegion(name_1);\n        return region && geo.dataToPoint(region.getCenter());\n      }\n    };\n\n    return _this;\n  }\n\n  MapSeries.prototype.getInitialData = function (option) {\n    var data = createSeriesDataSimply(this, {\n      coordDimensions: ['value'],\n      encodeDefaulter: zrUtil.curry(makeSeriesEncodeForNameBased, this)\n    });\n    var dataNameMap = zrUtil.createHashMap();\n    var toAppendNames = [];\n\n    for (var i = 0, len = data.count(); i < len; i++) {\n      var name_2 = data.getName(i);\n      dataNameMap.set(name_2, true);\n    }\n\n    var geoSource = geoSourceManager.load(this.getMapType(), this.option.nameMap, this.option.nameProperty);\n    zrUtil.each(geoSource.regions, function (region) {\n      var name = region.name;\n\n      if (!dataNameMap.get(name)) {\n        toAppendNames.push(name);\n      }\n    }); // Complete data with missing regions. The consequent processes (like visual\n    // map and render) can not be performed without a \"full data\". For example,\n    // find `dataIndex` by name.\n\n    data.appendValues([], toAppendNames);\n    return data;\n  };\n  /**\n   * If no host geo model, return null, which means using a\n   * inner exclusive geo model.\n   */\n\n\n  MapSeries.prototype.getHostGeoModel = function () {\n    var geoIndex = this.option.geoIndex;\n    return geoIndex != null ? this.ecModel.getComponent('geo', geoIndex) : null;\n  };\n\n  MapSeries.prototype.getMapType = function () {\n    return (this.getHostGeoModel() || this).option.map;\n  }; // _fillOption(option, mapName) {\n  // Shallow clone\n  // option = zrUtil.extend({}, option);\n  // option.data = geoCreator.getFilledRegions(option.data, mapName, option.nameMap);\n  // return option;\n  // }\n\n\n  MapSeries.prototype.getRawValue = function (dataIndex) {\n    // Use value stored in data instead because it is calculated from multiple series\n    // FIXME Provide all value of multiple series ?\n    var data = this.getData();\n    return data.get(data.mapDimension('value'), dataIndex);\n  };\n  /**\n   * Get model of region\n   */\n\n\n  MapSeries.prototype.getRegionModel = function (regionName) {\n    var data = this.getData();\n    return data.getItemModel(data.indexOfName(regionName));\n  };\n  /**\n   * Map tooltip formatter\n   */\n\n\n  MapSeries.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    // FIXME orignalData and data is a bit confusing\n    var data = this.getData();\n    var value = this.getRawValue(dataIndex);\n    var name = data.getName(dataIndex);\n    var seriesGroup = this.seriesGroup;\n    var seriesNames = [];\n\n    for (var i = 0; i < seriesGroup.length; i++) {\n      var otherIndex = seriesGroup[i].originalData.indexOfName(name);\n      var valueDim = data.mapDimension('value');\n\n      if (!isNaN(seriesGroup[i].originalData.get(valueDim, otherIndex))) {\n        seriesNames.push(seriesGroup[i].name);\n      }\n    }\n\n    return createTooltipMarkup('section', {\n      header: seriesNames.join(', '),\n      noHeader: !seriesNames.length,\n      blocks: [createTooltipMarkup('nameValue', {\n        name: name,\n        value: value\n      })]\n    });\n  };\n\n  MapSeries.prototype.setZoom = function (zoom) {\n    this.option.zoom = zoom;\n  };\n\n  MapSeries.prototype.setCenter = function (center) {\n    this.option.center = center;\n  };\n\n  MapSeries.prototype.getLegendIcon = function (opt) {\n    var iconType = opt.icon || 'roundRect';\n    var icon = createSymbol(iconType, 0, 0, opt.itemWidth, opt.itemHeight, opt.itemStyle.fill);\n    icon.setStyle(opt.itemStyle); // Map do not use itemStyle.borderWidth as border width\n\n    icon.style.stroke = 'none'; // No rotation because no series visual symbol for map\n\n    if (iconType.indexOf('empty') > -1) {\n      icon.style.stroke = icon.style.fill;\n      icon.style.fill = '#fff';\n      icon.style.lineWidth = 2;\n    }\n\n    return icon;\n  };\n\n  MapSeries.type = 'series.map';\n  MapSeries.dependencies = ['geo'];\n  MapSeries.layoutMode = 'box';\n  MapSeries.defaultOption = {\n    // \n    zlevel: 0,\n    // \n    z: 2,\n    coordinateSystem: 'geo',\n    // map should be explicitly specified since ec3.\n    map: '',\n    // If `geoIndex` is not specified, a exclusive geo will be\n    // created. Otherwise use the specified geo component, and\n    // `map` and `mapType` are ignored.\n    // geoIndex: 0,\n    // 'center' | 'left' | 'right' | 'x%' | {number}\n    left: 'center',\n    // 'center' | 'top' | 'bottom' | 'x%' | {number}\n    top: 'center',\n    // right\n    // bottom\n    // width:\n    // height\n    // Aspect is width / height. Inited to be geoJson bbox aspect\n    // This parameter is used for scale this aspect\n    // Default value:\n    // for geoSVG source: 1,\n    // for geoJSON source: 0.75.\n    aspectScale: null,\n    ///// Layout with center and size\n    // If you wan't to put map in a fixed size box with right aspect ratio\n    // This two properties may more conveninet\n    // layoutCenter: [50%, 50%]\n    // layoutSize: 100\n    showLegendSymbol: true,\n    // Define left-top, right-bottom coords to control view\n    // For example, [ [180, 90], [-180, -90] ],\n    // higher priority than center and zoom\n    boundingCoords: null,\n    // Default on center of map\n    center: null,\n    zoom: 1,\n    scaleLimit: null,\n    selectedMode: true,\n    label: {\n      show: false,\n      color: '#000'\n    },\n    // scaleLimit: null,\n    itemStyle: {\n      borderWidth: 0.5,\n      borderColor: '#444',\n      areaColor: '#eee'\n    },\n    emphasis: {\n      label: {\n        show: true,\n        color: 'rgb(100,0,0)'\n      },\n      itemStyle: {\n        areaColor: 'rgba(255,215,0,0.8)'\n      }\n    },\n    select: {\n      label: {\n        show: true,\n        color: 'rgb(100,0,0)'\n      },\n      itemStyle: {\n        color: 'rgba(255,215,0,0.8)'\n      }\n    },\n    nameProperty: 'name'\n  };\n  return MapSeries;\n}(SeriesModel);\n\nexport default MapSeries;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util'; // FIXME \n\nfunction dataStatistics(datas, statisticType) {\n  var dataNameMap = {};\n  zrUtil.each(datas, function (data) {\n    data.each(data.mapDimension('value'), function (value, idx) {\n      // Add prefix to avoid conflict with Object.prototype.\n      var mapKey = 'ec-' + data.getName(idx);\n      dataNameMap[mapKey] = dataNameMap[mapKey] || [];\n\n      if (!isNaN(value)) {\n        dataNameMap[mapKey].push(value);\n      }\n    });\n  });\n  return datas[0].map(datas[0].mapDimension('value'), function (value, idx) {\n    var mapKey = 'ec-' + datas[0].getName(idx);\n    var sum = 0;\n    var min = Infinity;\n    var max = -Infinity;\n    var len = dataNameMap[mapKey].length;\n\n    for (var i = 0; i < len; i++) {\n      min = Math.min(min, dataNameMap[mapKey][i]);\n      max = Math.max(max, dataNameMap[mapKey][i]);\n      sum += dataNameMap[mapKey][i];\n    }\n\n    var result;\n\n    if (statisticType === 'min') {\n      result = min;\n    } else if (statisticType === 'max') {\n      result = max;\n    } else if (statisticType === 'average') {\n      result = sum / len;\n    } else {\n      result = sum;\n    }\n\n    return len === 0 ? NaN : result;\n  });\n}\n\nexport default function mapDataStatistic(ecModel) {\n  var seriesGroups = {};\n  ecModel.eachSeriesByType('map', function (seriesModel) {\n    var hostGeoModel = seriesModel.getHostGeoModel();\n    var key = hostGeoModel ? 'o' + hostGeoModel.id : 'i' + seriesModel.getMapType();\n    (seriesGroups[key] = seriesGroups[key] || []).push(seriesModel);\n  });\n  zrUtil.each(seriesGroups, function (seriesList, key) {\n    var data = dataStatistics(zrUtil.map(seriesList, function (seriesModel) {\n      return seriesModel.getData();\n    }), seriesList[0].get('mapValueCalculation'));\n\n    for (var i = 0; i < seriesList.length; i++) {\n      seriesList[i].originalData = seriesList[i].getData();\n    } // FIXME Put where?\n\n\n    for (var i = 0; i < seriesList.length; i++) {\n      seriesList[i].seriesGroup = seriesList;\n      seriesList[i].needsDrawMap = i === 0 && !seriesList[i].getHostGeoModel();\n      seriesList[i].setData(data.cloneShallow());\n      seriesList[i].mainSeries = seriesList[0];\n    }\n  });\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nexport default function mapSymbolLayout(ecModel) {\n  var processedMapType = {};\n  ecModel.eachSeriesByType('map', function (mapSeries) {\n    var mapType = mapSeries.getMapType();\n\n    if (mapSeries.getHostGeoModel() || processedMapType[mapType]) {\n      return;\n    }\n\n    var mapSymbolOffsets = {};\n    zrUtil.each(mapSeries.seriesGroup, function (subMapSeries) {\n      var geo = subMapSeries.coordinateSystem;\n      var data = subMapSeries.originalData;\n\n      if (subMapSeries.get('showLegendSymbol') && ecModel.getComponent('legend')) {\n        data.each(data.mapDimension('value'), function (value, idx) {\n          var name = data.getName(idx);\n          var region = geo.getRegion(name); // If input series.data is [11, 22, '-'/null/undefined, 44],\n          // it will be filled with NaN: [11, 22, NaN, 44] and NaN will\n          // not be drawn. So here must validate if value is NaN.\n\n          if (!region || isNaN(value)) {\n            return;\n          }\n\n          var offset = mapSymbolOffsets[name] || 0;\n          var point = geo.dataToPoint(region.getCenter());\n          mapSymbolOffsets[name] = offset + 1;\n          data.setItemLayout(idx, {\n            point: point,\n            offset: offset\n          });\n        });\n      }\n    }); // Show label of those region not has legendIcon (which is offset 0)\n\n    var data = mapSeries.getData();\n    data.each(function (idx) {\n      var name = data.getName(idx);\n      var layout = data.getItemLayout(idx) || {};\n      layout.showLabel = !mapSymbolOffsets[name];\n      data.setItemLayout(idx, layout);\n    });\n    processedMapType[mapType] = true;\n  });\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/**\n * Simple view coordinate system\n * Mapping given x, y to transformd view x, y\n */\n\nimport * as vector from 'zrender/lib/core/vector';\nimport * as matrix from 'zrender/lib/core/matrix';\nimport BoundingRect from 'zrender/lib/core/BoundingRect';\nimport Transformable from 'zrender/lib/core/Transformable';\nvar v2ApplyTransform = vector.applyTransform;\n\nvar View =\n/** @class */\nfunction (_super) {\n  __extends(View, _super);\n\n  function View(name) {\n    var _this = _super.call(this) || this;\n\n    _this.type = 'view';\n    _this.dimensions = ['x', 'y'];\n    /**\n     * Represents the transform brought by roam/zoom.\n     * If `View['_viewRect']` applies roam transform,\n     * we can get the final displayed rect.\n     */\n\n    _this._roamTransformable = new Transformable();\n    /**\n     * Represents the transform from `View['_rect']` to `View['_viewRect']`.\n     */\n\n    _this._rawTransformable = new Transformable();\n    _this.name = name;\n    return _this;\n  }\n\n  View.prototype.setBoundingRect = function (x, y, width, height) {\n    this._rect = new BoundingRect(x, y, width, height);\n    return this._rect;\n  };\n  /**\n   * @return {module:zrender/core/BoundingRect}\n   */\n\n\n  View.prototype.getBoundingRect = function () {\n    return this._rect;\n  };\n\n  View.prototype.setViewRect = function (x, y, width, height) {\n    this._transformTo(x, y, width, height);\n\n    this._viewRect = new BoundingRect(x, y, width, height);\n  };\n  /**\n   * Transformed to particular position and size\n   */\n\n\n  View.prototype._transformTo = function (x, y, width, height) {\n    var rect = this.getBoundingRect();\n    var rawTransform = this._rawTransformable;\n    rawTransform.transform = rect.calculateTransform(new BoundingRect(x, y, width, height));\n    var rawParent = rawTransform.parent;\n    rawTransform.parent = null;\n    rawTransform.decomposeTransform();\n    rawTransform.parent = rawParent;\n\n    this._updateTransform();\n  };\n  /**\n   * Set center of view\n   */\n\n\n  View.prototype.setCenter = function (centerCoord) {\n    if (!centerCoord) {\n      return;\n    }\n\n    this._center = centerCoord;\n\n    this._updateCenterAndZoom();\n  };\n\n  View.prototype.setZoom = function (zoom) {\n    zoom = zoom || 1;\n    var zoomLimit = this.zoomLimit;\n\n    if (zoomLimit) {\n      if (zoomLimit.max != null) {\n        zoom = Math.min(zoomLimit.max, zoom);\n      }\n\n      if (zoomLimit.min != null) {\n        zoom = Math.max(zoomLimit.min, zoom);\n      }\n    }\n\n    this._zoom = zoom;\n\n    this._updateCenterAndZoom();\n  };\n  /**\n   * Get default center without roam\n   */\n\n\n  View.prototype.getDefaultCenter = function () {\n    // Rect before any transform\n    var rawRect = this.getBoundingRect();\n    var cx = rawRect.x + rawRect.width / 2;\n    var cy = rawRect.y + rawRect.height / 2;\n    return [cx, cy];\n  };\n\n  View.prototype.getCenter = function () {\n    return this._center || this.getDefaultCenter();\n  };\n\n  View.prototype.getZoom = function () {\n    return this._zoom || 1;\n  };\n\n  View.prototype.getRoamTransform = function () {\n    return this._roamTransformable.getLocalTransform();\n  };\n  /**\n   * Remove roam\n   */\n\n\n  View.prototype._updateCenterAndZoom = function () {\n    // Must update after view transform updated\n    var rawTransformMatrix = this._rawTransformable.getLocalTransform();\n\n    var roamTransform = this._roamTransformable;\n    var defaultCenter = this.getDefaultCenter();\n    var center = this.getCenter();\n    var zoom = this.getZoom();\n    center = vector.applyTransform([], center, rawTransformMatrix);\n    defaultCenter = vector.applyTransform([], defaultCenter, rawTransformMatrix);\n    roamTransform.originX = center[0];\n    roamTransform.originY = center[1];\n    roamTransform.x = defaultCenter[0] - center[0];\n    roamTransform.y = defaultCenter[1] - center[1];\n    roamTransform.scaleX = roamTransform.scaleY = zoom;\n\n    this._updateTransform();\n  };\n  /**\n   * Update transform props on `this` based on the current\n   * `this._roamTransformable` and `this._rawTransformable`.\n   */\n\n\n  View.prototype._updateTransform = function () {\n    var roamTransformable = this._roamTransformable;\n    var rawTransformable = this._rawTransformable;\n    rawTransformable.parent = roamTransformable;\n    roamTransformable.updateTransform();\n    rawTransformable.updateTransform();\n    matrix.copy(this.transform || (this.transform = []), rawTransformable.transform || matrix.create());\n    this._rawTransform = rawTransformable.getLocalTransform();\n    this.invTransform = this.invTransform || [];\n    matrix.invert(this.invTransform, this.transform);\n    this.decomposeTransform();\n  };\n\n  View.prototype.getTransformInfo = function () {\n    var rawTransformable = this._rawTransformable;\n    var roamTransformable = this._roamTransformable; // Becuase roamTransformabel has `originX/originY` modified,\n    // but the caller of `getTransformInfo` can not handle `originX/originY`,\n    // so need to recalcualte them.\n\n    var dummyTransformable = new Transformable();\n    dummyTransformable.transform = roamTransformable.transform;\n    dummyTransformable.decomposeTransform();\n    return {\n      roam: {\n        x: dummyTransformable.x,\n        y: dummyTransformable.y,\n        scaleX: dummyTransformable.scaleX,\n        scaleY: dummyTransformable.scaleY\n      },\n      raw: {\n        x: rawTransformable.x,\n        y: rawTransformable.y,\n        scaleX: rawTransformable.scaleX,\n        scaleY: rawTransformable.scaleY\n      }\n    };\n  };\n\n  View.prototype.getViewRect = function () {\n    return this._viewRect;\n  };\n  /**\n   * Get view rect after roam transform\n   */\n\n\n  View.prototype.getViewRectAfterRoam = function () {\n    var rect = this.getBoundingRect().clone();\n    rect.applyTransform(this.transform);\n    return rect;\n  };\n  /**\n   * Convert a single (lon, lat) data item to (x, y) point.\n   */\n\n\n  View.prototype.dataToPoint = function (data, noRoam, out) {\n    var transform = noRoam ? this._rawTransform : this.transform;\n    out = out || [];\n    return transform ? v2ApplyTransform(out, data, transform) : vector.copy(out, data);\n  };\n  /**\n   * Convert a (x, y) point to (lon, lat) data\n   */\n\n\n  View.prototype.pointToData = function (point) {\n    var invTransform = this.invTransform;\n    return invTransform ? v2ApplyTransform([], point, invTransform) : [point[0], point[1]];\n  };\n\n  View.prototype.convertToPixel = function (ecModel, finder, value) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? coordSys.dataToPoint(value) : null;\n  };\n\n  View.prototype.convertFromPixel = function (ecModel, finder, pixel) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? coordSys.pointToData(pixel) : null;\n  };\n  /**\n   * @implements\n   */\n\n\n  View.prototype.containPoint = function (point) {\n    return this.getViewRectAfterRoam().contain(point[0], point[1]);\n  };\n\n  View.dimensions = ['x', 'y'];\n  return View;\n}(Transformable);\n\nfunction getCoordSys(finder) {\n  var seriesModel = finder.seriesModel;\n  return seriesModel ? seriesModel.coordinateSystem : null; // e.g., graph.\n}\n\nexport default View;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport BoundingRect from 'zrender/lib/core/BoundingRect';\nimport View from '../View';\nimport geoSourceManager from './geoSourceManager';\nimport { SINGLE_REFERRING } from '../../util/model';\nvar GEO_DEFAULT_PARAMS = {\n  'geoJSON': {\n    aspectScale: 0.75,\n    invertLongitute: true\n  },\n  'geoSVG': {\n    aspectScale: 1,\n    invertLongitute: false\n  }\n};\nexport var geo2DDimensions = ['lng', 'lat'];\n\nvar Geo =\n/** @class */\nfunction (_super) {\n  __extends(Geo, _super);\n\n  function Geo(name, map, opt) {\n    var _this = _super.call(this, name) || this;\n\n    _this.dimensions = geo2DDimensions;\n    _this.type = 'geo'; // Only store specified name coord via `addGeoCoord`.\n\n    _this._nameCoordMap = zrUtil.createHashMap();\n    _this.map = map;\n    var source = geoSourceManager.load(map, opt.nameMap, opt.nameProperty);\n    var resource = geoSourceManager.getGeoResource(map);\n    _this.resourceType = resource ? resource.type : null;\n    var defaultParmas = GEO_DEFAULT_PARAMS[resource.type];\n    _this._regionsMap = source.regionsMap;\n    _this._invertLongitute = defaultParmas.invertLongitute;\n    _this.regions = source.regions;\n    _this.aspectScale = zrUtil.retrieve2(opt.aspectScale, defaultParmas.aspectScale);\n    var boundingRect = source.boundingRect;\n\n    _this.setBoundingRect(boundingRect.x, boundingRect.y, boundingRect.width, boundingRect.height);\n\n    return _this;\n  }\n  /**\n   * Whether contain the given [lng, lat] coord.\n   */\n  // Never used yet.\n  // containCoord(coord: number[]) {\n  //     const regions = this.regions;\n  //     for (let i = 0; i < regions.length; i++) {\n  //         const region = regions[i];\n  //         if (region.type === 'geoJSON' && (region as GeoJSONRegion).contain(coord)) {\n  //             return true;\n  //         }\n  //     }\n  //     return false;\n  // }\n\n\n  Geo.prototype._transformTo = function (x, y, width, height) {\n    var rect = this.getBoundingRect();\n    var invertLongitute = this._invertLongitute;\n    rect = rect.clone();\n\n    if (invertLongitute) {\n      // Longitute is inverted\n      rect.y = -rect.y - rect.height;\n    }\n\n    var rawTransformable = this._rawTransformable;\n    rawTransformable.transform = rect.calculateTransform(new BoundingRect(x, y, width, height));\n    var rawParent = rawTransformable.parent;\n    rawTransformable.parent = null;\n    rawTransformable.decomposeTransform();\n    rawTransformable.parent = rawParent;\n\n    if (invertLongitute) {\n      rawTransformable.scaleY = -rawTransformable.scaleY;\n    }\n\n    this._updateTransform();\n  };\n\n  Geo.prototype.getRegion = function (name) {\n    return this._regionsMap.get(name);\n  };\n\n  Geo.prototype.getRegionByCoord = function (coord) {\n    var regions = this.regions;\n\n    for (var i = 0; i < regions.length; i++) {\n      var region = regions[i];\n\n      if (region.type === 'geoJSON' && region.contain(coord)) {\n        return regions[i];\n      }\n    }\n  };\n  /**\n   * Add geoCoord for indexing by name\n   */\n\n\n  Geo.prototype.addGeoCoord = function (name, geoCoord) {\n    this._nameCoordMap.set(name, geoCoord);\n  };\n  /**\n   * Get geoCoord by name\n   */\n\n\n  Geo.prototype.getGeoCoord = function (name) {\n    var region = this._regionsMap.get(name); // calcualte center only on demand.\n\n\n    return this._nameCoordMap.get(name) || region && region.getCenter();\n  };\n\n  Geo.prototype.dataToPoint = function (data, noRoam, out) {\n    if (typeof data === 'string') {\n      // Map area name to geoCoord\n      data = this.getGeoCoord(data);\n    }\n\n    if (data) {\n      return View.prototype.dataToPoint.call(this, data, noRoam, out);\n    }\n  };\n\n  Geo.prototype.convertToPixel = function (ecModel, finder, value) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? coordSys.dataToPoint(value) : null;\n  };\n\n  Geo.prototype.convertFromPixel = function (ecModel, finder, pixel) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? coordSys.pointToData(pixel) : null;\n  };\n\n  return Geo;\n}(View);\n\n;\nzrUtil.mixin(Geo, View);\n\nfunction getCoordSys(finder) {\n  var geoModel = finder.geoModel;\n  var seriesModel = finder.seriesModel;\n  return geoModel ? geoModel.coordinateSystem : seriesModel ? seriesModel.coordinateSystem // For map series.\n  || (seriesModel.getReferringComponents('geo', SINGLE_REFERRING).models[0] || {}).coordinateSystem : null;\n}\n\nexport default Geo;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport Geo, { geo2DDimensions } from './Geo';\nimport * as layout from '../../util/layout';\nimport * as numberUtil from '../../util/number';\nimport geoSourceManager from './geoSourceManager';\n/**\n * Resize method bound to the geo\n */\n\nfunction resizeGeo(geoModel, api) {\n  var boundingCoords = geoModel.get('boundingCoords');\n\n  if (boundingCoords != null) {\n    var leftTop = boundingCoords[0];\n    var rightBottom = boundingCoords[1];\n\n    if (isNaN(leftTop[0]) || isNaN(leftTop[1]) || isNaN(rightBottom[0]) || isNaN(rightBottom[1])) {\n      if (process.env.NODE_ENV !== 'production') {\n        console.error('Invalid boundingCoords');\n      }\n    } else {\n      this.setBoundingRect(leftTop[0], leftTop[1], rightBottom[0] - leftTop[0], rightBottom[1] - leftTop[1]);\n    }\n  }\n\n  var rect = this.getBoundingRect();\n  var centerOption = geoModel.get('layoutCenter');\n  var sizeOption = geoModel.get('layoutSize');\n  var viewWidth = api.getWidth();\n  var viewHeight = api.getHeight();\n  var aspect = rect.width / rect.height * this.aspectScale;\n  var useCenterAndSize = false;\n  var center;\n  var size;\n\n  if (centerOption && sizeOption) {\n    center = [numberUtil.parsePercent(centerOption[0], viewWidth), numberUtil.parsePercent(centerOption[1], viewHeight)];\n    size = numberUtil.parsePercent(sizeOption, Math.min(viewWidth, viewHeight));\n\n    if (!isNaN(center[0]) && !isNaN(center[1]) && !isNaN(size)) {\n      useCenterAndSize = true;\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        console.warn('Given layoutCenter or layoutSize data are invalid. Use left/top/width/height instead.');\n      }\n    }\n  }\n\n  var viewRect;\n\n  if (useCenterAndSize) {\n    viewRect = {};\n\n    if (aspect > 1) {\n      // Width is same with size\n      viewRect.width = size;\n      viewRect.height = size / aspect;\n    } else {\n      viewRect.height = size;\n      viewRect.width = size * aspect;\n    }\n\n    viewRect.y = center[1] - viewRect.height / 2;\n    viewRect.x = center[0] - viewRect.width / 2;\n  } else {\n    // Use left/top/width/height\n    var boxLayoutOption = geoModel.getBoxLayoutParams();\n    boxLayoutOption.aspect = aspect;\n    viewRect = layout.getLayoutRect(boxLayoutOption, {\n      width: viewWidth,\n      height: viewHeight\n    });\n  }\n\n  this.setViewRect(viewRect.x, viewRect.y, viewRect.width, viewRect.height);\n  this.setCenter(geoModel.get('center'));\n  this.setZoom(geoModel.get('zoom'));\n} // Back compat for ECharts2, where the coord map is set on map series:\n// {type: 'map', geoCoord: {'cityA': [116.46,39.92], 'cityA': [119.12,24.61]}},\n\n\nfunction setGeoCoords(geo, model) {\n  zrUtil.each(model.get('geoCoord'), function (geoCoord, name) {\n    geo.addGeoCoord(name, geoCoord);\n  });\n}\n\nvar GeoCreator =\n/** @class */\nfunction () {\n  function GeoCreator() {\n    // For deciding which dimensions to use when creating list data\n    this.dimensions = geo2DDimensions;\n  }\n\n  GeoCreator.prototype.create = function (ecModel, api) {\n    var geoList = []; // FIXME Create each time may be slow\n\n    ecModel.eachComponent('geo', function (geoModel, idx) {\n      var name = geoModel.get('map');\n      var geo = new Geo(name + idx, name, {\n        nameMap: geoModel.get('nameMap'),\n        nameProperty: geoModel.get('nameProperty'),\n        aspectScale: geoModel.get('aspectScale')\n      });\n      geo.zoomLimit = geoModel.get('scaleLimit');\n      geoList.push(geo); // setGeoCoords(geo, geoModel);\n\n      geoModel.coordinateSystem = geo;\n      geo.model = geoModel; // Inject resize method\n\n      geo.resize = resizeGeo;\n      geo.resize(geoModel, api);\n    });\n    ecModel.eachSeries(function (seriesModel) {\n      var coordSys = seriesModel.get('coordinateSystem');\n\n      if (coordSys === 'geo') {\n        var geoIndex = seriesModel.get('geoIndex') || 0;\n        seriesModel.coordinateSystem = geoList[geoIndex];\n      }\n    }); // If has map series\n\n    var mapModelGroupBySeries = {};\n    ecModel.eachSeriesByType('map', function (seriesModel) {\n      if (!seriesModel.getHostGeoModel()) {\n        var mapType = seriesModel.getMapType();\n        mapModelGroupBySeries[mapType] = mapModelGroupBySeries[mapType] || [];\n        mapModelGroupBySeries[mapType].push(seriesModel);\n      }\n    });\n    zrUtil.each(mapModelGroupBySeries, function (mapSeries, mapType) {\n      var nameMapList = zrUtil.map(mapSeries, function (singleMapSeries) {\n        return singleMapSeries.get('nameMap');\n      });\n      var geo = new Geo(mapType, mapType, {\n        nameMap: zrUtil.mergeAll(nameMapList),\n        nameProperty: mapSeries[0].get('nameProperty'),\n        aspectScale: mapSeries[0].get('aspectScale')\n      });\n      geo.zoomLimit = zrUtil.retrieve.apply(null, zrUtil.map(mapSeries, function (singleMapSeries) {\n        return singleMapSeries.get('scaleLimit');\n      }));\n      geoList.push(geo); // Inject resize method\n\n      geo.resize = resizeGeo;\n      geo.resize(mapSeries[0], api);\n      zrUtil.each(mapSeries, function (singleMapSeries) {\n        singleMapSeries.coordinateSystem = geo;\n        setGeoCoords(geo, singleMapSeries);\n      });\n    });\n    return geoList;\n  };\n  /**\n   * Fill given regions array\n   */\n\n\n  GeoCreator.prototype.getFilledRegions = function (originRegionArr, mapName, nameMap, nameProperty) {\n    // Not use the original\n    var regionsArr = (originRegionArr || []).slice();\n    var dataNameMap = zrUtil.createHashMap();\n\n    for (var i = 0; i < regionsArr.length; i++) {\n      dataNameMap.set(regionsArr[i].name, regionsArr[i]);\n    }\n\n    var source = geoSourceManager.load(mapName, nameMap, nameProperty);\n    zrUtil.each(source.regions, function (region) {\n      var name = region.name;\n      !dataNameMap.get(name) && regionsArr.push({\n        name: name\n      });\n    });\n    return regionsArr;\n  };\n\n  return GeoCreator;\n}();\n\nvar geoCreator = new GeoCreator();\nexport default geoCreator;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as modelUtil from '../../util/model';\nimport ComponentModel from '../../model/Component';\nimport Model from '../../model/Model';\nimport geoCreator from './geoCreator';\nimport geoSourceManager from './geoSourceManager';\n;\n\nvar GeoModel =\n/** @class */\nfunction (_super) {\n  __extends(GeoModel, _super);\n\n  function GeoModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = GeoModel.type;\n    return _this;\n  }\n\n  GeoModel.prototype.init = function (option, parentModel, ecModel) {\n    var source = geoSourceManager.getGeoResource(option.map);\n\n    if (source && source.type === 'geoJSON') {\n      var itemStyle = option.itemStyle = option.itemStyle || {};\n\n      if (!('color' in itemStyle)) {\n        itemStyle.color = '#eee';\n      }\n    }\n\n    this.mergeDefaultAndTheme(option, ecModel); // Default label emphasis `show`\n\n    modelUtil.defaultEmphasis(option, 'label', ['show']);\n  };\n\n  GeoModel.prototype.optionUpdated = function () {\n    var _this = this;\n\n    var option = this.option;\n    option.regions = geoCreator.getFilledRegions(option.regions, option.map, option.nameMap, option.nameProperty);\n    var selectedMap = {};\n    this._optionModelMap = zrUtil.reduce(option.regions || [], function (optionModelMap, regionOpt) {\n      var regionName = regionOpt.name;\n\n      if (regionName) {\n        optionModelMap.set(regionName, new Model(regionOpt, _this, _this.ecModel));\n\n        if (regionOpt.selected) {\n          selectedMap[regionName] = true;\n        }\n      }\n\n      return optionModelMap;\n    }, zrUtil.createHashMap());\n\n    if (!option.selectedMap) {\n      option.selectedMap = selectedMap;\n    }\n  };\n  /**\n   * Get model of region.\n   */\n\n\n  GeoModel.prototype.getRegionModel = function (name) {\n    return this._optionModelMap.get(name) || new Model(null, this, this.ecModel);\n  };\n  /**\n   * Format label\n   * @param name Region name\n   */\n\n\n  GeoModel.prototype.getFormattedLabel = function (name, status) {\n    var regionModel = this.getRegionModel(name);\n    var formatter = status === 'normal' ? regionModel.get(['label', 'formatter']) : regionModel.get(['emphasis', 'label', 'formatter']);\n    var params = {\n      name: name\n    };\n\n    if (typeof formatter === 'function') {\n      params.status = status;\n      return formatter(params);\n    } else if (typeof formatter === 'string') {\n      return formatter.replace('{a}', name != null ? name : '');\n    }\n  };\n\n  GeoModel.prototype.setZoom = function (zoom) {\n    this.option.zoom = zoom;\n  };\n\n  GeoModel.prototype.setCenter = function (center) {\n    this.option.center = center;\n  }; // PENGING If selectedMode is null ?\n\n\n  GeoModel.prototype.select = function (name) {\n    var option = this.option;\n    var selectedMode = option.selectedMode;\n\n    if (!selectedMode) {\n      return;\n    }\n\n    if (selectedMode !== 'multiple') {\n      option.selectedMap = null;\n    }\n\n    var selectedMap = option.selectedMap || (option.selectedMap = {});\n    selectedMap[name] = true;\n  };\n\n  GeoModel.prototype.unSelect = function (name) {\n    var selectedMap = this.option.selectedMap;\n\n    if (selectedMap) {\n      selectedMap[name] = false;\n    }\n  };\n\n  GeoModel.prototype.toggleSelected = function (name) {\n    this[this.isSelected(name) ? 'unSelect' : 'select'](name);\n  };\n\n  GeoModel.prototype.isSelected = function (name) {\n    var selectedMap = this.option.selectedMap;\n    return !!(selectedMap && selectedMap[name]);\n  };\n\n  GeoModel.type = 'geo';\n  GeoModel.layoutMode = 'box';\n  GeoModel.defaultOption = {\n    zlevel: 0,\n    z: 0,\n    show: true,\n    left: 'center',\n    top: 'center',\n    // Default value:\n    // for geoSVG source: 1,\n    // for geoJSON source: 0.75.\n    aspectScale: null,\n    ///// Layout with center and size\n    // If you wan't to put map in a fixed size box with right aspect ratio\n    // This two properties may more conveninet\n    // layoutCenter: [50%, 50%]\n    // layoutSize: 100\n    silent: false,\n    // Map type\n    map: '',\n    // Define left-top, right-bottom coords to control view\n    // For example, [ [180, 90], [-180, -90] ]\n    boundingCoords: null,\n    // Default on center of map\n    center: null,\n    zoom: 1,\n    scaleLimit: null,\n    // selectedMode: false\n    label: {\n      show: false,\n      color: '#000'\n    },\n    itemStyle: {\n      borderWidth: 0.5,\n      borderColor: '#444' // Default color:\n      // + geoJSON: #eee\n      // + geoSVG: null (use SVG original `fill`)\n      // color: '#eee'\n\n    },\n    emphasis: {\n      label: {\n        show: true,\n        color: 'rgb(100,0,0)'\n      },\n      itemStyle: {\n        color: 'rgba(255,215,0,0.8)'\n      }\n    },\n    select: {\n      label: {\n        show: true,\n        color: 'rgb(100,0,0)'\n      },\n      itemStyle: {\n        color: 'rgba(255,215,0,0.8)'\n      }\n    },\n    regions: [] // tooltip: {\n    //     show: false\n    // }\n\n  };\n  return GeoModel;\n}(ComponentModel);\n\nexport default GeoModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport function updateCenterAndZoom(view, payload, zoomLimit) {\n  var previousZoom = view.getZoom();\n  var center = view.getCenter();\n  var zoom = payload.zoom;\n  var point = view.dataToPoint(center);\n\n  if (payload.dx != null && payload.dy != null) {\n    point[0] -= payload.dx;\n    point[1] -= payload.dy;\n    view.setCenter(view.pointToData(point));\n  }\n\n  if (zoom != null) {\n    if (zoomLimit) {\n      var zoomMin = zoomLimit.min || 0;\n      var zoomMax = zoomLimit.max || Infinity;\n      zoom = Math.max(Math.min(previousZoom * zoom, zoomMax), zoomMin) / previousZoom;\n    } // Zoom on given point(originX, originY)\n\n\n    view.scaleX *= zoom;\n    view.scaleY *= zoom;\n    var fixX = (payload.originX - view.x) * (zoom - 1);\n    var fixY = (payload.originY - view.y) * (zoom - 1);\n    view.x -= fixX;\n    view.y -= fixY;\n    view.updateTransform(); // Get the new center\n\n    view.setCenter(view.pointToData(point));\n    view.setZoom(zoom * previousZoom);\n  }\n\n  return {\n    center: view.getCenter(),\n    zoom: view.getZoom()\n  };\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport MapDraw from '../helper/MapDraw';\nimport ComponentView from '../../view/Component';\nimport { getECData } from '../../util/innerStore';\nimport { findEventDispatcher } from '../../util/event';\n\nvar GeoView =\n/** @class */\nfunction (_super) {\n  __extends(GeoView, _super);\n\n  function GeoView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = GeoView.type;\n    _this.focusBlurEnabled = true;\n    return _this;\n  }\n\n  GeoView.prototype.init = function (ecModel, api) {\n    this._api = api;\n  };\n\n  GeoView.prototype.render = function (geoModel, ecModel, api, payload) {\n    this._model = geoModel;\n\n    if (!geoModel.get('show')) {\n      this._mapDraw && this._mapDraw.remove();\n      this._mapDraw = null;\n      return;\n    }\n\n    if (!this._mapDraw) {\n      this._mapDraw = new MapDraw(api);\n    }\n\n    var mapDraw = this._mapDraw;\n    mapDraw.draw(geoModel, ecModel, api, this, payload);\n    mapDraw.group.on('click', this._handleRegionClick, this);\n    mapDraw.group.silent = geoModel.get('silent');\n    this.group.add(mapDraw.group);\n    this.updateSelectStatus(geoModel, ecModel, api);\n  };\n\n  GeoView.prototype._handleRegionClick = function (e) {\n    var eventData;\n    findEventDispatcher(e.target, function (current) {\n      return (eventData = getECData(current).eventData) != null;\n    }, true);\n\n    if (eventData) {\n      this._api.dispatchAction({\n        type: 'geoToggleSelect',\n        geoId: this._model.id,\n        name: eventData.name\n      });\n    }\n  };\n\n  GeoView.prototype.updateSelectStatus = function (model, ecModel, api) {\n    var _this = this;\n\n    this._mapDraw.group.traverse(function (node) {\n      var eventData = getECData(node).eventData;\n\n      if (eventData) {\n        _this._model.isSelected(eventData.name) ? api.enterSelect(node) : api.leaveSelect(node); // No need to traverse children.\n\n        return true;\n      }\n    });\n  };\n\n  GeoView.prototype.findHighDownDispatchers = function (name) {\n    return this._mapDraw && this._mapDraw.findHighDownDispatchers(name, this._model);\n  };\n\n  GeoView.prototype.dispose = function () {\n    this._mapDraw && this._mapDraw.remove();\n  };\n\n  GeoView.type = 'geo';\n  return GeoView;\n}(ComponentView);\n\nexport default GeoView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport GeoModel from '../../coord/geo/GeoModel';\nimport geoCreator from '../../coord/geo/geoCreator';\nimport { each } from 'zrender/lib/core/util';\nimport { updateCenterAndZoom } from '../../action/roamHelper';\nimport GeoView from './GeoView';\nexport function install(registers) {\n  registers.registerCoordinateSystem('geo', geoCreator);\n  registers.registerComponentModel(GeoModel);\n  registers.registerComponentView(GeoView);\n\n  function makeAction(method, actionInfo) {\n    actionInfo.update = 'geo:updateSelectStatus';\n    registers.registerAction(actionInfo, function (payload, ecModel) {\n      var selected = {};\n      var allSelected = [];\n      ecModel.eachComponent({\n        mainType: 'geo',\n        query: payload\n      }, function (geoModel) {\n        geoModel[method](payload.name);\n        var geo = geoModel.coordinateSystem;\n        each(geo.regions, function (region) {\n          selected[region.name] = geoModel.isSelected(region.name) || false;\n        }); // Notice: there might be duplicated name in different regions.\n\n        var names = [];\n        each(selected, function (v, name) {\n          selected[name] && names.push(name);\n        });\n        allSelected.push({\n          geoIndex: geoModel.componentIndex,\n          // Use singular, the same naming convention as the event `selectchanged`.\n          name: names\n        });\n      });\n      return {\n        selected: selected,\n        allSelected: allSelected,\n        name: payload.name\n      };\n    });\n  }\n\n  makeAction('toggleSelected', {\n    type: 'geoToggleSelect',\n    event: 'geoselectchanged'\n  });\n  makeAction('select', {\n    type: 'geoSelect',\n    event: 'geoselected'\n  });\n  makeAction('unSelect', {\n    type: 'geoUnSelect',\n    event: 'geounselected'\n  });\n  /**\n   * @payload\n   * @property {string} [componentType=series]\n   * @property {number} [dx]\n   * @property {number} [dy]\n   * @property {number} [zoom]\n   * @property {number} [originX]\n   * @property {number} [originY]\n   */\n\n  registers.registerAction({\n    type: 'geoRoam',\n    event: 'geoRoam',\n    update: 'updateTransform'\n  }, function (payload, ecModel) {\n    var componentType = payload.componentType || 'series';\n    ecModel.eachComponent({\n      mainType: componentType,\n      query: payload\n    }, function (componentModel) {\n      var geo = componentModel.coordinateSystem;\n\n      if (geo.type !== 'geo') {\n        return;\n      }\n\n      var res = updateCenterAndZoom(geo, payload, componentModel.get('scaleLimit'));\n      componentModel.setCenter && componentModel.setCenter(res.center);\n      componentModel.setZoom && componentModel.setZoom(res.zoom); // All map series with same `map` use the same geo coordinate system\n      // So the center and zoom must be in sync. Include the series not selected by legend\n\n      if (componentType === 'series') {\n        each(componentModel.seriesGroup, function (seriesModel) {\n          seriesModel.setCenter(res.center);\n          seriesModel.setZoom(res.zoom);\n        });\n      }\n    });\n  });\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* A third-party license is embeded for some of the code in this file:\n* The tree layoutHelper implementation was originally copied from\n* \"d3.js\"(https://github.com/d3/d3-hierarchy) with\n* some modifications made for this project.\n* (see more details in the comment of the specific method below.)\n* The use of the source code of this file is also subject to the terms\n* and consitions of the licence of \"d3.js\" (BSD-3Clause, see\n* </licenses/LICENSE-d3>).\n*/\n\n/**\n * @file The layout algorithm of node-link tree diagrams. Here we using Reingold-Tilford algorithm to drawing\n *       the tree.\n */\nimport * as layout from '../../util/layout';\n/**\n * Initialize all computational message for following algorithm.\n */\n\nexport function init(inRoot) {\n  var root = inRoot;\n  root.hierNode = {\n    defaultAncestor: null,\n    ancestor: root,\n    prelim: 0,\n    modifier: 0,\n    change: 0,\n    shift: 0,\n    i: 0,\n    thread: null\n  };\n  var nodes = [root];\n  var node;\n  var children;\n\n  while (node = nodes.pop()) {\n    // jshint ignore:line\n    children = node.children;\n\n    if (node.isExpand && children.length) {\n      var n = children.length;\n\n      for (var i = n - 1; i >= 0; i--) {\n        var child = children[i];\n        child.hierNode = {\n          defaultAncestor: null,\n          ancestor: child,\n          prelim: 0,\n          modifier: 0,\n          change: 0,\n          shift: 0,\n          i: i,\n          thread: null\n        };\n        nodes.push(child);\n      }\n    }\n  }\n}\n/**\n * The implementation of this function was originally copied from \"d3.js\"\n * <https://github.com/d3/d3-hierarchy/blob/4c1f038f2725d6eae2e49b61d01456400694bac4/src/tree.js>\n * with some modifications made for this program.\n * See the license statement at the head of this file.\n *\n * Computes a preliminary x coordinate for node. Before that, this function is\n * applied recursively to the children of node, as well as the function\n * apportion(). After spacing out the children by calling executeShifts(), the\n * node is placed to the midpoint of its outermost children.\n */\n\nexport function firstWalk(node, separation) {\n  var children = node.isExpand ? node.children : [];\n  var siblings = node.parentNode.children;\n  var subtreeW = node.hierNode.i ? siblings[node.hierNode.i - 1] : null;\n\n  if (children.length) {\n    executeShifts(node);\n    var midPoint = (children[0].hierNode.prelim + children[children.length - 1].hierNode.prelim) / 2;\n\n    if (subtreeW) {\n      node.hierNode.prelim = subtreeW.hierNode.prelim + separation(node, subtreeW);\n      node.hierNode.modifier = node.hierNode.prelim - midPoint;\n    } else {\n      node.hierNode.prelim = midPoint;\n    }\n  } else if (subtreeW) {\n    node.hierNode.prelim = subtreeW.hierNode.prelim + separation(node, subtreeW);\n  }\n\n  node.parentNode.hierNode.defaultAncestor = apportion(node, subtreeW, node.parentNode.hierNode.defaultAncestor || siblings[0], separation);\n}\n/**\n * The implementation of this function was originally copied from \"d3.js\"\n * <https://github.com/d3/d3-hierarchy/blob/4c1f038f2725d6eae2e49b61d01456400694bac4/src/tree.js>\n * with some modifications made for this program.\n * See the license statement at the head of this file.\n *\n * Computes all real x-coordinates by summing up the modifiers recursively.\n */\n\nexport function secondWalk(node) {\n  var nodeX = node.hierNode.prelim + node.parentNode.hierNode.modifier;\n  node.setLayout({\n    x: nodeX\n  }, true);\n  node.hierNode.modifier += node.parentNode.hierNode.modifier;\n}\nexport function separation(cb) {\n  return arguments.length ? cb : defaultSeparation;\n}\n/**\n * Transform the common coordinate to radial coordinate.\n */\n\nexport function radialCoordinate(rad, r) {\n  rad -= Math.PI / 2;\n  return {\n    x: r * Math.cos(rad),\n    y: r * Math.sin(rad)\n  };\n}\n/**\n * Get the layout position of the whole view.\n */\n\nexport function getViewRect(seriesModel, api) {\n  return layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n}\n/**\n * All other shifts, applied to the smaller subtrees between w- and w+, are\n * performed by this function.\n *\n * The implementation of this function was originally copied from \"d3.js\"\n * <https://github.com/d3/d3-hierarchy/blob/4c1f038f2725d6eae2e49b61d01456400694bac4/src/tree.js>\n * with some modifications made for this program.\n * See the license statement at the head of this file.\n */\n\nfunction executeShifts(node) {\n  var children = node.children;\n  var n = children.length;\n  var shift = 0;\n  var change = 0;\n\n  while (--n >= 0) {\n    var child = children[n];\n    child.hierNode.prelim += shift;\n    child.hierNode.modifier += shift;\n    change += child.hierNode.change;\n    shift += child.hierNode.shift + change;\n  }\n}\n/**\n * The implementation of this function was originally copied from \"d3.js\"\n * <https://github.com/d3/d3-hierarchy/blob/4c1f038f2725d6eae2e49b61d01456400694bac4/src/tree.js>\n * with some modifications made for this program.\n * See the license statement at the head of this file.\n *\n * The core of the algorithm. Here, a new subtree is combined with the\n * previous subtrees. Threads are used to traverse the inside and outside\n * contours of the left and right subtree up to the highest common level.\n * Whenever two nodes of the inside contours conflict, we compute the left\n * one of the greatest uncommon ancestors using the function nextAncestor()\n * and call moveSubtree() to shift the subtree and prepare the shifts of\n * smaller subtrees. Finally, we add a new thread (if necessary).\n */\n\n\nfunction apportion(subtreeV, subtreeW, ancestor, separation) {\n  if (subtreeW) {\n    var nodeOutRight = subtreeV;\n    var nodeInRight = subtreeV;\n    var nodeOutLeft = nodeInRight.parentNode.children[0];\n    var nodeInLeft = subtreeW;\n    var sumOutRight = nodeOutRight.hierNode.modifier;\n    var sumInRight = nodeInRight.hierNode.modifier;\n    var sumOutLeft = nodeOutLeft.hierNode.modifier;\n    var sumInLeft = nodeInLeft.hierNode.modifier;\n\n    while (nodeInLeft = nextRight(nodeInLeft), nodeInRight = nextLeft(nodeInRight), nodeInLeft && nodeInRight) {\n      nodeOutRight = nextRight(nodeOutRight);\n      nodeOutLeft = nextLeft(nodeOutLeft);\n      nodeOutRight.hierNode.ancestor = subtreeV;\n      var shift = nodeInLeft.hierNode.prelim + sumInLeft - nodeInRight.hierNode.prelim - sumInRight + separation(nodeInLeft, nodeInRight);\n\n      if (shift > 0) {\n        moveSubtree(nextAncestor(nodeInLeft, subtreeV, ancestor), subtreeV, shift);\n        sumInRight += shift;\n        sumOutRight += shift;\n      }\n\n      sumInLeft += nodeInLeft.hierNode.modifier;\n      sumInRight += nodeInRight.hierNode.modifier;\n      sumOutRight += nodeOutRight.hierNode.modifier;\n      sumOutLeft += nodeOutLeft.hierNode.modifier;\n    }\n\n    if (nodeInLeft && !nextRight(nodeOutRight)) {\n      nodeOutRight.hierNode.thread = nodeInLeft;\n      nodeOutRight.hierNode.modifier += sumInLeft - sumOutRight;\n    }\n\n    if (nodeInRight && !nextLeft(nodeOutLeft)) {\n      nodeOutLeft.hierNode.thread = nodeInRight;\n      nodeOutLeft.hierNode.modifier += sumInRight - sumOutLeft;\n      ancestor = subtreeV;\n    }\n  }\n\n  return ancestor;\n}\n/**\n * This function is used to traverse the right contour of a subtree.\n * It returns the rightmost child of node or the thread of node. The function\n * returns null if and only if node is on the highest depth of its subtree.\n */\n\n\nfunction nextRight(node) {\n  var children = node.children;\n  return children.length && node.isExpand ? children[children.length - 1] : node.hierNode.thread;\n}\n/**\n * This function is used to traverse the left contour of a subtree (or a subforest).\n * It returns the leftmost child of node or the thread of node. The function\n * returns null if and only if node is on the highest depth of its subtree.\n */\n\n\nfunction nextLeft(node) {\n  var children = node.children;\n  return children.length && node.isExpand ? children[0] : node.hierNode.thread;\n}\n/**\n * If nodeInLefts ancestor is a sibling of node, returns nodeInLefts ancestor.\n * Otherwise, returns the specified ancestor.\n */\n\n\nfunction nextAncestor(nodeInLeft, node, ancestor) {\n  return nodeInLeft.hierNode.ancestor.parentNode === node.parentNode ? nodeInLeft.hierNode.ancestor : ancestor;\n}\n/**\n * The implementation of this function was originally copied from \"d3.js\"\n * <https://github.com/d3/d3-hierarchy/blob/4c1f038f2725d6eae2e49b61d01456400694bac4/src/tree.js>\n * with some modifications made for this program.\n * See the license statement at the head of this file.\n *\n * Shifts the current subtree rooted at wr.\n * This is done by increasing prelim(w+) and modifier(w+) by shift.\n */\n\n\nfunction moveSubtree(wl, wr, shift) {\n  var change = shift / (wr.hierNode.i - wl.hierNode.i);\n  wr.hierNode.change -= change;\n  wr.hierNode.shift += shift;\n  wr.hierNode.modifier += shift;\n  wr.hierNode.prelim += shift;\n  wl.hierNode.change += change;\n}\n/**\n * The implementation of this function was originally copied from \"d3.js\"\n * <https://github.com/d3/d3-hierarchy/blob/4c1f038f2725d6eae2e49b61d01456400694bac4/src/tree.js>\n * with some modifications made for this program.\n * See the license statement at the head of this file.\n */\n\n\nfunction defaultSeparation(node1, node2) {\n  return node1.parentNode === node2.parentNode ? 1 : 2;\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as graphic from '../../util/graphic';\nimport { getECData } from '../../util/innerStore';\nimport SymbolClz from '../helper/Symbol';\nimport { radialCoordinate } from './layoutHelper';\nimport * as bbox from 'zrender/lib/core/bbox';\nimport View from '../../coord/View';\nimport * as roamHelper from '../../component/helper/roamHelper';\nimport RoamController from '../../component/helper/RoamController';\nimport { onIrrelevantElement } from '../../component/helper/cursorHelper';\nimport { parsePercent } from '../../util/number';\nimport ChartView from '../../view/Chart';\nimport Path from 'zrender/lib/graphic/Path';\nimport { setStatesStylesFromModel, setStatesFlag, setDefaultStateProxy, HOVER_STATE_BLUR } from '../../util/states';\n\nvar TreeEdgeShape =\n/** @class */\nfunction () {\n  function TreeEdgeShape() {\n    this.parentPoint = [];\n    this.childPoints = [];\n  }\n\n  return TreeEdgeShape;\n}();\n\nvar TreePath =\n/** @class */\nfunction (_super) {\n  __extends(TreePath, _super);\n\n  function TreePath(opts) {\n    return _super.call(this, opts) || this;\n  }\n\n  TreePath.prototype.getDefaultStyle = function () {\n    return {\n      stroke: '#000',\n      fill: null\n    };\n  };\n\n  TreePath.prototype.getDefaultShape = function () {\n    return new TreeEdgeShape();\n  };\n\n  TreePath.prototype.buildPath = function (ctx, shape) {\n    var childPoints = shape.childPoints;\n    var childLen = childPoints.length;\n    var parentPoint = shape.parentPoint;\n    var firstChildPos = childPoints[0];\n    var lastChildPos = childPoints[childLen - 1];\n\n    if (childLen === 1) {\n      ctx.moveTo(parentPoint[0], parentPoint[1]);\n      ctx.lineTo(firstChildPos[0], firstChildPos[1]);\n      return;\n    }\n\n    var orient = shape.orient;\n    var forkDim = orient === 'TB' || orient === 'BT' ? 0 : 1;\n    var otherDim = 1 - forkDim;\n    var forkPosition = parsePercent(shape.forkPosition, 1);\n    var tmpPoint = [];\n    tmpPoint[forkDim] = parentPoint[forkDim];\n    tmpPoint[otherDim] = parentPoint[otherDim] + (lastChildPos[otherDim] - parentPoint[otherDim]) * forkPosition;\n    ctx.moveTo(parentPoint[0], parentPoint[1]);\n    ctx.lineTo(tmpPoint[0], tmpPoint[1]);\n    ctx.moveTo(firstChildPos[0], firstChildPos[1]);\n    tmpPoint[forkDim] = firstChildPos[forkDim];\n    ctx.lineTo(tmpPoint[0], tmpPoint[1]);\n    tmpPoint[forkDim] = lastChildPos[forkDim];\n    ctx.lineTo(tmpPoint[0], tmpPoint[1]);\n    ctx.lineTo(lastChildPos[0], lastChildPos[1]);\n\n    for (var i = 1; i < childLen - 1; i++) {\n      var point = childPoints[i];\n      ctx.moveTo(point[0], point[1]);\n      tmpPoint[forkDim] = point[forkDim];\n      ctx.lineTo(tmpPoint[0], tmpPoint[1]);\n    }\n  };\n\n  return TreePath;\n}(Path);\n\nvar TreeView =\n/** @class */\nfunction (_super) {\n  __extends(TreeView, _super);\n\n  function TreeView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = TreeView.type;\n    _this._mainGroup = new graphic.Group();\n    return _this;\n  }\n\n  TreeView.prototype.init = function (ecModel, api) {\n    this._controller = new RoamController(api.getZr());\n    this._controllerHost = {\n      target: this.group\n    };\n    this.group.add(this._mainGroup);\n  };\n\n  TreeView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var layoutInfo = seriesModel.layoutInfo;\n    var group = this._mainGroup;\n    var layout = seriesModel.get('layout');\n\n    if (layout === 'radial') {\n      group.x = layoutInfo.x + layoutInfo.width / 2;\n      group.y = layoutInfo.y + layoutInfo.height / 2;\n    } else {\n      group.x = layoutInfo.x;\n      group.y = layoutInfo.y;\n    }\n\n    this._updateViewCoordSys(seriesModel);\n\n    this._updateController(seriesModel, ecModel, api);\n\n    var oldData = this._data;\n    data.diff(oldData).add(function (newIdx) {\n      if (symbolNeedsDraw(data, newIdx)) {\n        // Create node and edge\n        updateNode(data, newIdx, null, group, seriesModel);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var symbolEl = oldData.getItemGraphicEl(oldIdx);\n\n      if (!symbolNeedsDraw(data, newIdx)) {\n        symbolEl && removeNode(oldData, oldIdx, symbolEl, group, seriesModel);\n        return;\n      } // Update node and edge\n\n\n      updateNode(data, newIdx, symbolEl, group, seriesModel);\n    }).remove(function (oldIdx) {\n      var symbolEl = oldData.getItemGraphicEl(oldIdx); // When remove a collapsed node of subtree, since the collapsed\n      // node haven't been initialized with a symbol element,\n      // you can't found it's symbol element through index.\n      // so if we want to remove the symbol element we should insure\n      // that the symbol element is not null.\n\n      if (symbolEl) {\n        removeNode(oldData, oldIdx, symbolEl, group, seriesModel);\n      }\n    }).execute();\n    this._nodeScaleRatio = seriesModel.get('nodeScaleRatio');\n\n    this._updateNodeAndLinkScale(seriesModel);\n\n    if (seriesModel.get('expandAndCollapse') === true) {\n      data.eachItemGraphicEl(function (el, dataIndex) {\n        el.off('click').on('click', function () {\n          api.dispatchAction({\n            type: 'treeExpandAndCollapse',\n            seriesId: seriesModel.id,\n            dataIndex: dataIndex\n          });\n        });\n      });\n    }\n\n    this._data = data;\n  };\n\n  TreeView.prototype._updateViewCoordSys = function (seriesModel) {\n    var data = seriesModel.getData();\n    var points = [];\n    data.each(function (idx) {\n      var layout = data.getItemLayout(idx);\n\n      if (layout && !isNaN(layout.x) && !isNaN(layout.y)) {\n        points.push([+layout.x, +layout.y]);\n      }\n    });\n    var min = [];\n    var max = [];\n    bbox.fromPoints(points, min, max); // If don't Store min max when collapse the root node after roam,\n    // the root node will disappear.\n\n    var oldMin = this._min;\n    var oldMax = this._max; // If width or height is 0\n\n    if (max[0] - min[0] === 0) {\n      min[0] = oldMin ? oldMin[0] : min[0] - 1;\n      max[0] = oldMax ? oldMax[0] : max[0] + 1;\n    }\n\n    if (max[1] - min[1] === 0) {\n      min[1] = oldMin ? oldMin[1] : min[1] - 1;\n      max[1] = oldMax ? oldMax[1] : max[1] + 1;\n    }\n\n    var viewCoordSys = seriesModel.coordinateSystem = new View();\n    viewCoordSys.zoomLimit = seriesModel.get('scaleLimit');\n    viewCoordSys.setBoundingRect(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n    viewCoordSys.setCenter(seriesModel.get('center'));\n    viewCoordSys.setZoom(seriesModel.get('zoom')); // Here we use viewCoordSys just for computing the 'position' and 'scale' of the group\n\n    this.group.attr({\n      x: viewCoordSys.x,\n      y: viewCoordSys.y,\n      scaleX: viewCoordSys.scaleX,\n      scaleY: viewCoordSys.scaleY\n    });\n    this._min = min;\n    this._max = max;\n  };\n\n  TreeView.prototype._updateController = function (seriesModel, ecModel, api) {\n    var _this = this;\n\n    var controller = this._controller;\n    var controllerHost = this._controllerHost;\n    var group = this.group;\n    controller.setPointerChecker(function (e, x, y) {\n      var rect = group.getBoundingRect();\n      rect.applyTransform(group.transform);\n      return rect.contain(x, y) && !onIrrelevantElement(e, api, seriesModel);\n    });\n    controller.enable(seriesModel.get('roam'));\n    controllerHost.zoomLimit = seriesModel.get('scaleLimit');\n    controllerHost.zoom = seriesModel.coordinateSystem.getZoom();\n    controller.off('pan').off('zoom').on('pan', function (e) {\n      roamHelper.updateViewOnPan(controllerHost, e.dx, e.dy);\n      api.dispatchAction({\n        seriesId: seriesModel.id,\n        type: 'treeRoam',\n        dx: e.dx,\n        dy: e.dy\n      });\n    }).on('zoom', function (e) {\n      roamHelper.updateViewOnZoom(controllerHost, e.scale, e.originX, e.originY);\n      api.dispatchAction({\n        seriesId: seriesModel.id,\n        type: 'treeRoam',\n        zoom: e.scale,\n        originX: e.originX,\n        originY: e.originY\n      });\n\n      _this._updateNodeAndLinkScale(seriesModel); // Only update label layout on zoom\n\n\n      api.updateLabelLayout();\n    });\n  };\n\n  TreeView.prototype._updateNodeAndLinkScale = function (seriesModel) {\n    var data = seriesModel.getData();\n\n    var nodeScale = this._getNodeGlobalScale(seriesModel);\n\n    data.eachItemGraphicEl(function (el, idx) {\n      el.setSymbolScale(nodeScale);\n    });\n  };\n\n  TreeView.prototype._getNodeGlobalScale = function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (coordSys.type !== 'view') {\n      return 1;\n    }\n\n    var nodeScaleRatio = this._nodeScaleRatio;\n    var groupZoom = coordSys.scaleX || 1; // Scale node when zoom changes\n\n    var roamZoom = coordSys.getZoom();\n    var nodeScale = (roamZoom - 1) * nodeScaleRatio + 1;\n    return nodeScale / groupZoom;\n  };\n\n  TreeView.prototype.dispose = function () {\n    this._controller && this._controller.dispose();\n    this._controllerHost = null;\n  };\n\n  TreeView.prototype.remove = function () {\n    this._mainGroup.removeAll();\n\n    this._data = null;\n  };\n\n  TreeView.type = 'tree';\n  return TreeView;\n}(ChartView);\n\nfunction symbolNeedsDraw(data, dataIndex) {\n  var layout = data.getItemLayout(dataIndex);\n  return layout && !isNaN(layout.x) && !isNaN(layout.y);\n}\n\nfunction updateNode(data, dataIndex, symbolEl, group, seriesModel) {\n  var isInit = !symbolEl;\n  var node = data.tree.getNodeByDataIndex(dataIndex);\n  var itemModel = node.getModel();\n  var visualColor = node.getVisual('style').fill;\n  var symbolInnerColor = node.isExpand === false && node.children.length !== 0 ? visualColor : '#fff';\n  var virtualRoot = data.tree.root;\n  var source = node.parentNode === virtualRoot ? node : node.parentNode || node;\n  var sourceSymbolEl = data.getItemGraphicEl(source.dataIndex);\n  var sourceLayout = source.getLayout();\n  var sourceOldLayout = sourceSymbolEl ? {\n    x: sourceSymbolEl.__oldX,\n    y: sourceSymbolEl.__oldY,\n    rawX: sourceSymbolEl.__radialOldRawX,\n    rawY: sourceSymbolEl.__radialOldRawY\n  } : sourceLayout;\n  var targetLayout = node.getLayout();\n\n  if (isInit) {\n    symbolEl = new SymbolClz(data, dataIndex, null, {\n      symbolInnerColor: symbolInnerColor,\n      useNameLabel: true\n    });\n    symbolEl.x = sourceOldLayout.x;\n    symbolEl.y = sourceOldLayout.y;\n  } else {\n    symbolEl.updateData(data, dataIndex, null, {\n      symbolInnerColor: symbolInnerColor,\n      useNameLabel: true\n    });\n  }\n\n  symbolEl.__radialOldRawX = symbolEl.__radialRawX;\n  symbolEl.__radialOldRawY = symbolEl.__radialRawY;\n  symbolEl.__radialRawX = targetLayout.rawX;\n  symbolEl.__radialRawY = targetLayout.rawY;\n  group.add(symbolEl);\n  data.setItemGraphicEl(dataIndex, symbolEl);\n  symbolEl.__oldX = symbolEl.x;\n  symbolEl.__oldY = symbolEl.y;\n  graphic.updateProps(symbolEl, {\n    x: targetLayout.x,\n    y: targetLayout.y\n  }, seriesModel);\n  var symbolPath = symbolEl.getSymbolPath();\n\n  if (seriesModel.get('layout') === 'radial') {\n    var realRoot = virtualRoot.children[0];\n    var rootLayout = realRoot.getLayout();\n    var length_1 = realRoot.children.length;\n    var rad = void 0;\n    var isLeft = void 0;\n\n    if (targetLayout.x === rootLayout.x && node.isExpand === true) {\n      var center = {\n        x: (realRoot.children[0].getLayout().x + realRoot.children[length_1 - 1].getLayout().x) / 2,\n        y: (realRoot.children[0].getLayout().y + realRoot.children[length_1 - 1].getLayout().y) / 2\n      };\n      rad = Math.atan2(center.y - rootLayout.y, center.x - rootLayout.x);\n\n      if (rad < 0) {\n        rad = Math.PI * 2 + rad;\n      }\n\n      isLeft = center.x < rootLayout.x;\n\n      if (isLeft) {\n        rad = rad - Math.PI;\n      }\n    } else {\n      rad = Math.atan2(targetLayout.y - rootLayout.y, targetLayout.x - rootLayout.x);\n\n      if (rad < 0) {\n        rad = Math.PI * 2 + rad;\n      }\n\n      if (node.children.length === 0 || node.children.length !== 0 && node.isExpand === false) {\n        isLeft = targetLayout.x < rootLayout.x;\n\n        if (isLeft) {\n          rad = rad - Math.PI;\n        }\n      } else {\n        isLeft = targetLayout.x > rootLayout.x;\n\n        if (!isLeft) {\n          rad = rad - Math.PI;\n        }\n      }\n    }\n\n    var textPosition = isLeft ? 'left' : 'right';\n    var normalLabelModel = itemModel.getModel('label');\n    var rotate = normalLabelModel.get('rotate');\n    var labelRotateRadian = rotate * (Math.PI / 180);\n    var textContent = symbolPath.getTextContent();\n\n    if (textContent) {\n      symbolPath.setTextConfig({\n        position: normalLabelModel.get('position') || textPosition,\n        rotation: rotate == null ? -rad : labelRotateRadian,\n        origin: 'center'\n      });\n      textContent.setStyle('verticalAlign', 'middle');\n    }\n  } // Handle status\n\n\n  var focus = itemModel.get(['emphasis', 'focus']);\n  var focusDataIndices = focus === 'ancestor' ? node.getAncestorsIndices() : focus === 'descendant' ? node.getDescendantIndices() : null;\n\n  if (focusDataIndices) {\n    // Modify the focus to data indices.\n    getECData(symbolEl).focus = focusDataIndices;\n  }\n\n  drawEdge(seriesModel, node, virtualRoot, symbolEl, sourceOldLayout, sourceLayout, targetLayout, group);\n\n  if (symbolEl.__edge) {\n    symbolEl.onHoverStateChange = function (toState) {\n      if (toState !== 'blur') {\n        // NOTE: Ensure the parent elements will been blurred firstly.\n        // According to the return of getAncestorsIndices and getDescendantIndices\n        // TODO: A bit tricky.\n        var parentEl = node.parentNode && data.getItemGraphicEl(node.parentNode.dataIndex);\n\n        if (!(parentEl && parentEl.hoverState === HOVER_STATE_BLUR)) {\n          setStatesFlag(symbolEl.__edge, toState);\n        }\n      }\n    };\n  }\n}\n\nfunction drawEdge(seriesModel, node, virtualRoot, symbolEl, sourceOldLayout, sourceLayout, targetLayout, group) {\n  var itemModel = node.getModel();\n  var edgeShape = seriesModel.get('edgeShape');\n  var layout = seriesModel.get('layout');\n  var orient = seriesModel.getOrient();\n  var curvature = seriesModel.get(['lineStyle', 'curveness']);\n  var edgeForkPosition = seriesModel.get('edgeForkPosition');\n  var lineStyle = itemModel.getModel('lineStyle').getLineStyle();\n  var edge = symbolEl.__edge;\n\n  if (edgeShape === 'curve') {\n    if (node.parentNode && node.parentNode !== virtualRoot) {\n      if (!edge) {\n        edge = symbolEl.__edge = new graphic.BezierCurve({\n          shape: getEdgeShape(layout, orient, curvature, sourceOldLayout, sourceOldLayout)\n        });\n      }\n\n      graphic.updateProps(edge, {\n        shape: getEdgeShape(layout, orient, curvature, sourceLayout, targetLayout)\n      }, seriesModel);\n    }\n  } else if (edgeShape === 'polyline') {\n    if (layout === 'orthogonal') {\n      if (node !== virtualRoot && node.children && node.children.length !== 0 && node.isExpand === true) {\n        var children = node.children;\n        var childPoints = [];\n\n        for (var i = 0; i < children.length; i++) {\n          var childLayout = children[i].getLayout();\n          childPoints.push([childLayout.x, childLayout.y]);\n        }\n\n        if (!edge) {\n          edge = symbolEl.__edge = new TreePath({\n            shape: {\n              parentPoint: [targetLayout.x, targetLayout.y],\n              childPoints: [[targetLayout.x, targetLayout.y]],\n              orient: orient,\n              forkPosition: edgeForkPosition\n            }\n          });\n        }\n\n        graphic.updateProps(edge, {\n          shape: {\n            parentPoint: [targetLayout.x, targetLayout.y],\n            childPoints: childPoints\n          }\n        }, seriesModel);\n      }\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        throw new Error('The polyline edgeShape can only be used in orthogonal layout');\n      }\n    }\n  }\n\n  if (edge) {\n    edge.useStyle(zrUtil.defaults({\n      strokeNoScale: true,\n      fill: null\n    }, lineStyle));\n    setStatesStylesFromModel(edge, itemModel, 'lineStyle');\n    setDefaultStateProxy(edge);\n    group.add(edge);\n  }\n}\n\nfunction removeNodeEdge(node, data, group, seriesModel, removeAnimationOpt) {\n  var virtualRoot = data.tree.root;\n\n  var _a = getSourceNode(virtualRoot, node),\n      source = _a.source,\n      sourceLayout = _a.sourceLayout;\n\n  var symbolEl = data.getItemGraphicEl(node.dataIndex);\n\n  if (!symbolEl) {\n    return;\n  }\n\n  var sourceSymbolEl = data.getItemGraphicEl(source.dataIndex);\n  var sourceEdge = sourceSymbolEl.__edge; // 1. when expand the sub tree, delete the children node should delete the edge of\n  // the source at the same time. because the polyline edge shape is only owned by the source.\n  // 2.when the node is the only children of the source, delete the node should delete the edge of\n  // the source at the same time. the same reason as above.\n\n  var edge = symbolEl.__edge || (source.isExpand === false || source.children.length === 1 ? sourceEdge : undefined);\n  var edgeShape = seriesModel.get('edgeShape');\n  var layoutOpt = seriesModel.get('layout');\n  var orient = seriesModel.get('orient');\n  var curvature = seriesModel.get(['lineStyle', 'curveness']);\n\n  if (edge) {\n    if (edgeShape === 'curve') {\n      graphic.removeElement(edge, {\n        shape: getEdgeShape(layoutOpt, orient, curvature, sourceLayout, sourceLayout),\n        style: {\n          opacity: 0\n        }\n      }, seriesModel, {\n        cb: function cb() {\n          group.remove(edge);\n        },\n        removeOpt: removeAnimationOpt\n      });\n    } else if (edgeShape === 'polyline' && seriesModel.get('layout') === 'orthogonal') {\n      graphic.removeElement(edge, {\n        shape: {\n          parentPoint: [sourceLayout.x, sourceLayout.y],\n          childPoints: [[sourceLayout.x, sourceLayout.y]]\n        },\n        style: {\n          opacity: 0\n        }\n      }, seriesModel, {\n        cb: function cb() {\n          group.remove(edge);\n        },\n        removeOpt: removeAnimationOpt\n      });\n    }\n  }\n}\n\nfunction getSourceNode(virtualRoot, node) {\n  var source = node.parentNode === virtualRoot ? node : node.parentNode || node;\n  var sourceLayout;\n\n  while (sourceLayout = source.getLayout(), sourceLayout == null) {\n    source = source.parentNode === virtualRoot ? source : source.parentNode || source;\n  }\n\n  return {\n    source: source,\n    sourceLayout: sourceLayout\n  };\n}\n\nfunction removeNode(data, dataIndex, symbolEl, group, seriesModel) {\n  var node = data.tree.getNodeByDataIndex(dataIndex);\n  var virtualRoot = data.tree.root;\n  var sourceLayout = getSourceNode(virtualRoot, node).sourceLayout; // Use same duration and easing with update to have more consistent animation.\n\n  var removeAnimationOpt = {\n    duration: seriesModel.get('animationDurationUpdate'),\n    easing: seriesModel.get('animationEasingUpdate')\n  };\n  graphic.removeElement(symbolEl, {\n    x: sourceLayout.x + 1,\n    y: sourceLayout.y + 1\n  }, seriesModel, {\n    cb: function cb() {\n      group.remove(symbolEl);\n      data.setItemGraphicEl(dataIndex, null);\n    },\n    removeOpt: removeAnimationOpt\n  });\n  symbolEl.fadeOut(null, {\n    fadeLabel: true,\n    animation: removeAnimationOpt\n  }); // remove edge as parent node\n\n  node.children.forEach(function (childNode) {\n    removeNodeEdge(childNode, data, group, seriesModel, removeAnimationOpt);\n  }); // remove edge as child node\n\n  removeNodeEdge(node, data, group, seriesModel, removeAnimationOpt);\n}\n\nfunction getEdgeShape(layoutOpt, orient, curvature, sourceLayout, targetLayout) {\n  var cpx1;\n  var cpy1;\n  var cpx2;\n  var cpy2;\n  var x1;\n  var x2;\n  var y1;\n  var y2;\n\n  if (layoutOpt === 'radial') {\n    x1 = sourceLayout.rawX;\n    y1 = sourceLayout.rawY;\n    x2 = targetLayout.rawX;\n    y2 = targetLayout.rawY;\n    var radialCoor1 = radialCoordinate(x1, y1);\n    var radialCoor2 = radialCoordinate(x1, y1 + (y2 - y1) * curvature);\n    var radialCoor3 = radialCoordinate(x2, y2 + (y1 - y2) * curvature);\n    var radialCoor4 = radialCoordinate(x2, y2);\n    return {\n      x1: radialCoor1.x || 0,\n      y1: radialCoor1.y || 0,\n      x2: radialCoor4.x || 0,\n      y2: radialCoor4.y || 0,\n      cpx1: radialCoor2.x || 0,\n      cpy1: radialCoor2.y || 0,\n      cpx2: radialCoor3.x || 0,\n      cpy2: radialCoor3.y || 0\n    };\n  } else {\n    x1 = sourceLayout.x;\n    y1 = sourceLayout.y;\n    x2 = targetLayout.x;\n    y2 = targetLayout.y;\n\n    if (orient === 'LR' || orient === 'RL') {\n      cpx1 = x1 + (x2 - x1) * curvature;\n      cpy1 = y1;\n      cpx2 = x2 + (x1 - x2) * curvature;\n      cpy2 = y2;\n    }\n\n    if (orient === 'TB' || orient === 'BT') {\n      cpx1 = x1;\n      cpy1 = y1 + (y2 - y1) * curvature;\n      cpx2 = x2;\n      cpy2 = y2 + (y1 - y2) * curvature;\n    }\n  }\n\n  return {\n    x1: x1,\n    y1: y1,\n    x2: x2,\n    y2: y2,\n    cpx1: cpx1,\n    cpy1: cpy1,\n    cpx2: cpx2,\n    cpy2: cpy2\n  };\n}\n\nexport default TreeView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Link lists and struct (graph or tree)\n */\nimport { curry, each, assert, extend, map, keys } from 'zrender/lib/core/util';\nimport { makeInner } from '../../util/model';\nvar inner = makeInner();\n\nfunction linkSeriesData(opt) {\n  var mainData = opt.mainData;\n  var datas = opt.datas;\n\n  if (!datas) {\n    datas = {\n      main: mainData\n    };\n    opt.datasAttr = {\n      main: 'data'\n    };\n  }\n\n  opt.datas = opt.mainData = null;\n  linkAll(mainData, datas, opt); // Porxy data original methods.\n\n  each(datas, function (data) {\n    each(mainData.TRANSFERABLE_METHODS, function (methodName) {\n      data.wrapMethod(methodName, curry(transferInjection, opt));\n    });\n  }); // Beyond transfer, additional features should be added to `cloneShallow`.\n\n  mainData.wrapMethod('cloneShallow', curry(cloneShallowInjection, opt)); // Only mainData trigger change, because struct.update may trigger\n  // another changable methods, which may bring about dead lock.\n\n  each(mainData.CHANGABLE_METHODS, function (methodName) {\n    mainData.wrapMethod(methodName, curry(changeInjection, opt));\n  }); // Make sure datas contains mainData.\n\n  assert(datas[mainData.dataType] === mainData);\n}\n\nfunction transferInjection(opt, res) {\n  if (isMainData(this)) {\n    // Transfer datas to new main data.\n    var datas = extend({}, inner(this).datas);\n    datas[this.dataType] = res;\n    linkAll(res, datas, opt);\n  } else {\n    // Modify the reference in main data to point newData.\n    linkSingle(res, this.dataType, inner(this).mainData, opt);\n  }\n\n  return res;\n}\n\nfunction changeInjection(opt, res) {\n  opt.struct && opt.struct.update();\n  return res;\n}\n\nfunction cloneShallowInjection(opt, res) {\n  // cloneShallow, which brings about some fragilities, may be inappropriate\n  // to be exposed as an API. So for implementation simplicity we can make\n  // the restriction that cloneShallow of not-mainData should not be invoked\n  // outside, but only be invoked here.\n  each(inner(res).datas, function (data, dataType) {\n    data !== res && linkSingle(data.cloneShallow(), dataType, res, opt);\n  });\n  return res;\n}\n/**\n * Supplement method to List.\n *\n * @public\n * @param [dataType] If not specified, return mainData.\n */\n\n\nfunction getLinkedData(dataType) {\n  var mainData = inner(this).mainData;\n  return dataType == null || mainData == null ? mainData : inner(mainData).datas[dataType];\n}\n/**\n * Get list of all linked data\n */\n\n\nfunction getLinkedDataAll() {\n  var mainData = inner(this).mainData;\n  return mainData == null ? [{\n    data: mainData\n  }] : map(keys(inner(mainData).datas), function (type) {\n    return {\n      type: type,\n      data: inner(mainData).datas[type]\n    };\n  });\n}\n\nfunction isMainData(data) {\n  return inner(data).mainData === data;\n}\n\nfunction linkAll(mainData, datas, opt) {\n  inner(mainData).datas = {};\n  each(datas, function (data, dataType) {\n    linkSingle(data, dataType, mainData, opt);\n  });\n}\n\nfunction linkSingle(data, dataType, mainData, opt) {\n  inner(mainData).datas[dataType] = data;\n  inner(data).mainData = mainData;\n  data.dataType = dataType;\n\n  if (opt.struct) {\n    data[opt.structAttr] = opt.struct;\n    opt.struct[opt.datasAttr[dataType]] = data;\n  } // Supplement method.\n\n\n  data.getLinkedData = getLinkedData;\n  data.getLinkedDataAll = getLinkedDataAll;\n}\n\nexport default linkSeriesData;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Tree data structure\n */\nimport * as zrUtil from 'zrender/lib/core/util';\nimport linkSeriesData from './helper/linkSeriesData';\nimport SeriesData from './SeriesData';\nimport prepareSeriesDataSchema from './helper/createDimensions';\nimport { convertOptionIdName } from '../util/model';\n\nvar TreeNode =\n/** @class */\nfunction () {\n  function TreeNode(name, hostTree) {\n    this.depth = 0;\n    this.height = 0;\n    /**\n     * Reference to list item.\n     * Do not persistent dataIndex outside,\n     * besause it may be changed by list.\n     * If dataIndex -1,\n     * this node is logical deleted (filtered) in list.\n     */\n\n    this.dataIndex = -1;\n    this.children = [];\n    this.viewChildren = [];\n    this.isExpand = false;\n    this.name = name || '';\n    this.hostTree = hostTree;\n  }\n  /**\n   * The node is removed.\n   */\n\n\n  TreeNode.prototype.isRemoved = function () {\n    return this.dataIndex < 0;\n  };\n\n  TreeNode.prototype.eachNode = function (options, cb, context) {\n    if (typeof options === 'function') {\n      context = cb;\n      cb = options;\n      options = null;\n    }\n\n    options = options || {};\n\n    if (zrUtil.isString(options)) {\n      options = {\n        order: options\n      };\n    }\n\n    var order = options.order || 'preorder';\n    var children = this[options.attr || 'children'];\n    var suppressVisitSub;\n    order === 'preorder' && (suppressVisitSub = cb.call(context, this));\n\n    for (var i = 0; !suppressVisitSub && i < children.length; i++) {\n      children[i].eachNode(options, cb, context);\n    }\n\n    order === 'postorder' && cb.call(context, this);\n  };\n  /**\n   * Update depth and height of this subtree.\n   */\n\n\n  TreeNode.prototype.updateDepthAndHeight = function (depth) {\n    var height = 0;\n    this.depth = depth;\n\n    for (var i = 0; i < this.children.length; i++) {\n      var child = this.children[i];\n      child.updateDepthAndHeight(depth + 1);\n\n      if (child.height > height) {\n        height = child.height;\n      }\n    }\n\n    this.height = height + 1;\n  };\n\n  TreeNode.prototype.getNodeById = function (id) {\n    if (this.getId() === id) {\n      return this;\n    }\n\n    for (var i = 0, children = this.children, len = children.length; i < len; i++) {\n      var res = children[i].getNodeById(id);\n\n      if (res) {\n        return res;\n      }\n    }\n  };\n\n  TreeNode.prototype.contains = function (node) {\n    if (node === this) {\n      return true;\n    }\n\n    for (var i = 0, children = this.children, len = children.length; i < len; i++) {\n      var res = children[i].contains(node);\n\n      if (res) {\n        return res;\n      }\n    }\n  };\n  /**\n   * @param includeSelf Default false.\n   * @return order: [root, child, grandchild, ...]\n   */\n\n\n  TreeNode.prototype.getAncestors = function (includeSelf) {\n    var ancestors = [];\n    var node = includeSelf ? this : this.parentNode;\n\n    while (node) {\n      ancestors.push(node);\n      node = node.parentNode;\n    }\n\n    ancestors.reverse();\n    return ancestors;\n  };\n\n  TreeNode.prototype.getAncestorsIndices = function () {\n    var indices = [];\n    var currNode = this;\n\n    while (currNode) {\n      indices.push(currNode.dataIndex);\n      currNode = currNode.parentNode;\n    }\n\n    indices.reverse();\n    return indices;\n  };\n\n  TreeNode.prototype.getDescendantIndices = function () {\n    var indices = [];\n    this.eachNode(function (childNode) {\n      indices.push(childNode.dataIndex);\n    });\n    return indices;\n  };\n\n  TreeNode.prototype.getValue = function (dimension) {\n    var data = this.hostTree.data;\n    return data.getStore().get(data.getDimensionIndex(dimension || 'value'), this.dataIndex);\n  };\n\n  TreeNode.prototype.setLayout = function (layout, merge) {\n    this.dataIndex >= 0 && this.hostTree.data.setItemLayout(this.dataIndex, layout, merge);\n  };\n  /**\n   * @return {Object} layout\n   */\n\n\n  TreeNode.prototype.getLayout = function () {\n    return this.hostTree.data.getItemLayout(this.dataIndex);\n  }; // @depcrecated\n  // getModel<T = unknown, S extends keyof T = keyof T>(path: S): Model<T[S]>\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  TreeNode.prototype.getModel = function (path) {\n    if (this.dataIndex < 0) {\n      return;\n    }\n\n    var hostTree = this.hostTree;\n    var itemModel = hostTree.data.getItemModel(this.dataIndex);\n    return itemModel.getModel(path);\n  }; // TODO: TYPE More specific model\n\n\n  TreeNode.prototype.getLevelModel = function () {\n    return (this.hostTree.levelModels || [])[this.depth];\n  };\n\n  TreeNode.prototype.setVisual = function (key, value) {\n    this.dataIndex >= 0 && this.hostTree.data.setItemVisual(this.dataIndex, key, value);\n  };\n  /**\n   * Get item visual\n   * FIXME: make return type better\n   */\n\n\n  TreeNode.prototype.getVisual = function (key) {\n    return this.hostTree.data.getItemVisual(this.dataIndex, key);\n  };\n\n  TreeNode.prototype.getRawIndex = function () {\n    return this.hostTree.data.getRawIndex(this.dataIndex);\n  };\n\n  TreeNode.prototype.getId = function () {\n    return this.hostTree.data.getId(this.dataIndex);\n  };\n  /**\n   * index in parent's children\n   */\n\n\n  TreeNode.prototype.getChildIndex = function () {\n    if (this.parentNode) {\n      var children = this.parentNode.children;\n\n      for (var i = 0; i < children.length; ++i) {\n        if (children[i] === this) {\n          return i;\n        }\n      }\n\n      return -1;\n    }\n\n    return -1;\n  };\n  /**\n   * if this is an ancestor of another node\n   *\n   * @param node another node\n   * @return if is ancestor\n   */\n\n\n  TreeNode.prototype.isAncestorOf = function (node) {\n    var parent = node.parentNode;\n\n    while (parent) {\n      if (parent === this) {\n        return true;\n      }\n\n      parent = parent.parentNode;\n    }\n\n    return false;\n  };\n  /**\n   * if this is an descendant of another node\n   *\n   * @param node another node\n   * @return if is descendant\n   */\n\n\n  TreeNode.prototype.isDescendantOf = function (node) {\n    return node !== this && node.isAncestorOf(this);\n  };\n\n  return TreeNode;\n}();\n\nexport { TreeNode };\n;\n\nvar Tree =\n/** @class */\nfunction () {\n  function Tree(hostModel) {\n    this.type = 'tree';\n    this._nodes = [];\n    this.hostModel = hostModel;\n  }\n\n  Tree.prototype.eachNode = function (options, cb, context) {\n    this.root.eachNode(options, cb, context);\n  };\n\n  Tree.prototype.getNodeByDataIndex = function (dataIndex) {\n    var rawIndex = this.data.getRawIndex(dataIndex);\n    return this._nodes[rawIndex];\n  };\n\n  Tree.prototype.getNodeById = function (name) {\n    return this.root.getNodeById(name);\n  };\n  /**\n   * Update item available by list,\n   * when list has been performed options like 'filterSelf' or 'map'.\n   */\n\n\n  Tree.prototype.update = function () {\n    var data = this.data;\n    var nodes = this._nodes;\n\n    for (var i = 0, len = nodes.length; i < len; i++) {\n      nodes[i].dataIndex = -1;\n    }\n\n    for (var i = 0, len = data.count(); i < len; i++) {\n      nodes[data.getRawIndex(i)].dataIndex = i;\n    }\n  };\n  /**\n   * Clear all layouts\n   */\n\n\n  Tree.prototype.clearLayouts = function () {\n    this.data.clearItemLayouts();\n  };\n  /**\n   * data node format:\n   * {\n   *     name: ...\n   *     value: ...\n   *     children: [\n   *         {\n   *             name: ...\n   *             value: ...\n   *             children: ...\n   *         },\n   *         ...\n   *     ]\n   * }\n   */\n\n\n  Tree.createTree = function (dataRoot, hostModel, beforeLink) {\n    var tree = new Tree(hostModel);\n    var listData = [];\n    var dimMax = 1;\n    buildHierarchy(dataRoot);\n\n    function buildHierarchy(dataNode, parentNode) {\n      var value = dataNode.value;\n      dimMax = Math.max(dimMax, zrUtil.isArray(value) ? value.length : 1);\n      listData.push(dataNode);\n      var node = new TreeNode(convertOptionIdName(dataNode.name, ''), tree);\n      parentNode ? addChild(node, parentNode) : tree.root = node;\n\n      tree._nodes.push(node);\n\n      var children = dataNode.children;\n\n      if (children) {\n        for (var i = 0; i < children.length; i++) {\n          buildHierarchy(children[i], node);\n        }\n      }\n    }\n\n    tree.root.updateDepthAndHeight(0);\n    var dimensions = prepareSeriesDataSchema(listData, {\n      coordDimensions: ['value'],\n      dimensionsCount: dimMax\n    }).dimensions;\n    var list = new SeriesData(dimensions, hostModel);\n    list.initData(listData);\n    beforeLink && beforeLink(list);\n    linkSeriesData({\n      mainData: list,\n      struct: tree,\n      structAttr: 'tree'\n    });\n    tree.update();\n    return tree;\n  };\n\n  return Tree;\n}();\n/**\n * It is needed to consider the mess of 'list', 'hostModel' when creating a TreeNote,\n * so this function is not ready and not necessary to be public.\n */\n\n\nfunction addChild(child, node) {\n  var children = node.children;\n\n  if (child.parentNode === node) {\n    return;\n  }\n\n  children.push(child);\n  child.parentNode = node;\n}\n\nexport default Tree;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nexport function retrieveTargetInfo(payload, validPayloadTypes, seriesModel) {\n  if (payload && zrUtil.indexOf(validPayloadTypes, payload.type) >= 0) {\n    var root = seriesModel.getData().tree.root;\n    var targetNode = payload.targetNode;\n\n    if (typeof targetNode === 'string') {\n      targetNode = root.getNodeById(targetNode);\n    }\n\n    if (targetNode && root.contains(targetNode)) {\n      return {\n        node: targetNode\n      };\n    }\n\n    var targetNodeId = payload.targetNodeId;\n\n    if (targetNodeId != null && (targetNode = root.getNodeById(targetNodeId))) {\n      return {\n        node: targetNode\n      };\n    }\n  }\n} // Not includes the given node at the last item.\n\nexport function getPathToRoot(node) {\n  var path = [];\n\n  while (node) {\n    node = node.parentNode;\n    node && path.push(node);\n  }\n\n  return path.reverse();\n}\nexport function aboveViewRoot(viewRoot, node) {\n  var viewPath = getPathToRoot(viewRoot);\n  return zrUtil.indexOf(viewPath, node) >= 0;\n} // From root to the input node (the input node will be included).\n\nexport function wrapTreePathInfo(node, seriesModel) {\n  var treePathInfo = [];\n\n  while (node) {\n    var nodeDataIndex = node.dataIndex;\n    treePathInfo.push({\n      name: node.name,\n      dataIndex: nodeDataIndex,\n      value: seriesModel.getRawValue(nodeDataIndex)\n    });\n    node = node.parentNode;\n  }\n\n  treePathInfo.reverse();\n  return treePathInfo;\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series';\nimport Tree from '../../data/Tree';\nimport Model from '../../model/Model';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup';\nimport { wrapTreePathInfo } from '../helper/treeHelper';\n\nvar TreeSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(TreeSeriesModel, _super);\n\n  function TreeSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.hasSymbolVisual = true; // Do it self.\n\n    _this.ignoreStyleOnData = true;\n    return _this;\n  }\n  /**\n   * Init a tree data structure from data in option series\n   */\n\n\n  TreeSeriesModel.prototype.getInitialData = function (option) {\n    //create an virtual root\n    var root = {\n      name: option.name,\n      children: option.data\n    };\n    var leaves = option.leaves || {};\n    var leavesModel = new Model(leaves, this, this.ecModel);\n    var tree = Tree.createTree(root, this, beforeLink);\n\n    function beforeLink(nodeData) {\n      nodeData.wrapMethod('getItemModel', function (model, idx) {\n        var node = tree.getNodeByDataIndex(idx);\n\n        if (!(node && node.children.length && node.isExpand)) {\n          model.parentModel = leavesModel;\n        }\n\n        return model;\n      });\n    }\n\n    var treeDepth = 0;\n    tree.eachNode('preorder', function (node) {\n      if (node.depth > treeDepth) {\n        treeDepth = node.depth;\n      }\n    });\n    var expandAndCollapse = option.expandAndCollapse;\n    var expandTreeDepth = expandAndCollapse && option.initialTreeDepth >= 0 ? option.initialTreeDepth : treeDepth;\n    tree.root.eachNode('preorder', function (node) {\n      var item = node.hostTree.data.getRawDataItem(node.dataIndex); // Add item.collapsed != null, because users can collapse node original in the series.data.\n\n      node.isExpand = item && item.collapsed != null ? !item.collapsed : node.depth <= expandTreeDepth;\n    });\n    return tree.data;\n  };\n  /**\n   * Make the configuration 'orient' backward compatibly, with 'horizontal = LR', 'vertical = TB'.\n   * @returns {string} orient\n   */\n\n\n  TreeSeriesModel.prototype.getOrient = function () {\n    var orient = this.get('orient');\n\n    if (orient === 'horizontal') {\n      orient = 'LR';\n    } else if (orient === 'vertical') {\n      orient = 'TB';\n    }\n\n    return orient;\n  };\n\n  TreeSeriesModel.prototype.setZoom = function (zoom) {\n    this.option.zoom = zoom;\n  };\n\n  TreeSeriesModel.prototype.setCenter = function (center) {\n    this.option.center = center;\n  };\n\n  TreeSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    var tree = this.getData().tree;\n    var realRoot = tree.root.children[0];\n    var node = tree.getNodeByDataIndex(dataIndex);\n    var value = node.getValue();\n    var name = node.name;\n\n    while (node && node !== realRoot) {\n      name = node.parentNode.name + '.' + name;\n      node = node.parentNode;\n    }\n\n    return createTooltipMarkup('nameValue', {\n      name: name,\n      value: value,\n      noValue: isNaN(value) || value == null\n    });\n  }; // Add tree path to tooltip param\n\n\n  TreeSeriesModel.prototype.getDataParams = function (dataIndex) {\n    var params = _super.prototype.getDataParams.apply(this, arguments);\n\n    var node = this.getData().tree.getNodeByDataIndex(dataIndex);\n    params.treeAncestors = wrapTreePathInfo(node, this);\n    return params;\n  };\n\n  TreeSeriesModel.type = 'series.tree'; // can support the position parameters 'left', 'top','right','bottom', 'width',\n  // 'height' in the setOption() with 'merge' mode normal.\n\n  TreeSeriesModel.layoutMode = 'box';\n  TreeSeriesModel.defaultOption = {\n    zlevel: 0,\n    z: 2,\n    coordinateSystem: 'view',\n    // the position of the whole view\n    left: '12%',\n    top: '12%',\n    right: '12%',\n    bottom: '12%',\n    // the layout of the tree, two value can be selected, 'orthogonal' or 'radial'\n    layout: 'orthogonal',\n    // value can be 'polyline'\n    edgeShape: 'curve',\n    edgeForkPosition: '50%',\n    // true | false | 'move' | 'scale', see module:component/helper/RoamController.\n    roam: false,\n    // Symbol size scale ratio in roam\n    nodeScaleRatio: 0.4,\n    // Default on center of graph\n    center: null,\n    zoom: 1,\n    orient: 'LR',\n    symbol: 'emptyCircle',\n    symbolSize: 7,\n    expandAndCollapse: true,\n    initialTreeDepth: 2,\n    lineStyle: {\n      color: '#ccc',\n      width: 1.5,\n      curveness: 0.5\n    },\n    itemStyle: {\n      color: 'lightsteelblue',\n      // borderColor: '#c23531',\n      borderWidth: 1.5\n    },\n    label: {\n      show: true\n    },\n    animationEasing: 'linear',\n    animationDuration: 700,\n    animationDurationUpdate: 500\n  };\n  return TreeSeriesModel;\n}(SeriesModel);\n\nexport default TreeSeriesModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Traverse the tree from bottom to top and do something\n */\nfunction eachAfter(root, callback, separation) {\n  var nodes = [root];\n  var next = [];\n  var node;\n\n  while (node = nodes.pop()) {\n    // jshint ignore:line\n    next.push(node);\n\n    if (node.isExpand) {\n      var children = node.children;\n\n      if (children.length) {\n        for (var i = 0; i < children.length; i++) {\n          nodes.push(children[i]);\n        }\n      }\n    }\n  }\n\n  while (node = next.pop()) {\n    // jshint ignore:line\n    callback(node, separation);\n  }\n}\n/**\n * Traverse the tree from top to bottom and do something\n */\n\n\nfunction eachBefore(root, callback) {\n  var nodes = [root];\n  var node;\n\n  while (node = nodes.pop()) {\n    // jshint ignore:line\n    callback(node);\n\n    if (node.isExpand) {\n      var children = node.children;\n\n      if (children.length) {\n        for (var i = children.length - 1; i >= 0; i--) {\n          nodes.push(children[i]);\n        }\n      }\n    }\n  }\n}\n\nexport { eachAfter, eachBefore };","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { eachAfter, eachBefore } from './traversalHelper';\nimport { init, firstWalk, secondWalk, separation as sep, radialCoordinate, getViewRect } from './layoutHelper';\nexport default function treeLayout(ecModel, api) {\n  ecModel.eachSeriesByType('tree', function (seriesModel) {\n    commonLayout(seriesModel, api);\n  });\n}\n\nfunction commonLayout(seriesModel, api) {\n  var layoutInfo = getViewRect(seriesModel, api);\n  seriesModel.layoutInfo = layoutInfo;\n  var layout = seriesModel.get('layout');\n  var width = 0;\n  var height = 0;\n  var separation = null;\n\n  if (layout === 'radial') {\n    width = 2 * Math.PI;\n    height = Math.min(layoutInfo.height, layoutInfo.width) / 2;\n    separation = sep(function (node1, node2) {\n      return (node1.parentNode === node2.parentNode ? 1 : 2) / node1.depth;\n    });\n  } else {\n    width = layoutInfo.width;\n    height = layoutInfo.height;\n    separation = sep();\n  }\n\n  var virtualRoot = seriesModel.getData().tree.root;\n  var realRoot = virtualRoot.children[0];\n\n  if (realRoot) {\n    init(virtualRoot);\n    eachAfter(realRoot, firstWalk, separation);\n    virtualRoot.hierNode.modifier = -realRoot.hierNode.prelim;\n    eachBefore(realRoot, secondWalk);\n    var left_1 = realRoot;\n    var right_1 = realRoot;\n    var bottom_1 = realRoot;\n    eachBefore(realRoot, function (node) {\n      var x = node.getLayout().x;\n\n      if (x < left_1.getLayout().x) {\n        left_1 = node;\n      }\n\n      if (x > right_1.getLayout().x) {\n        right_1 = node;\n      }\n\n      if (node.depth > bottom_1.depth) {\n        bottom_1 = node;\n      }\n    });\n    var delta = left_1 === right_1 ? 1 : separation(left_1, right_1) / 2;\n    var tx_1 = delta - left_1.getLayout().x;\n    var kx_1 = 0;\n    var ky_1 = 0;\n    var coorX_1 = 0;\n    var coorY_1 = 0;\n\n    if (layout === 'radial') {\n      kx_1 = width / (right_1.getLayout().x + delta + tx_1); // here we use (node.depth - 1), bucause the real root's depth is 1\n\n      ky_1 = height / (bottom_1.depth - 1 || 1);\n      eachBefore(realRoot, function (node) {\n        coorX_1 = (node.getLayout().x + tx_1) * kx_1;\n        coorY_1 = (node.depth - 1) * ky_1;\n        var finalCoor = radialCoordinate(coorX_1, coorY_1);\n        node.setLayout({\n          x: finalCoor.x,\n          y: finalCoor.y,\n          rawX: coorX_1,\n          rawY: coorY_1\n        }, true);\n      });\n    } else {\n      var orient_1 = seriesModel.getOrient();\n\n      if (orient_1 === 'RL' || orient_1 === 'LR') {\n        ky_1 = height / (right_1.getLayout().x + delta + tx_1);\n        kx_1 = width / (bottom_1.depth - 1 || 1);\n        eachBefore(realRoot, function (node) {\n          coorY_1 = (node.getLayout().x + tx_1) * ky_1;\n          coorX_1 = orient_1 === 'LR' ? (node.depth - 1) * kx_1 : width - (node.depth - 1) * kx_1;\n          node.setLayout({\n            x: coorX_1,\n            y: coorY_1\n          }, true);\n        });\n      } else if (orient_1 === 'TB' || orient_1 === 'BT') {\n        kx_1 = width / (right_1.getLayout().x + delta + tx_1);\n        ky_1 = height / (bottom_1.depth - 1 || 1);\n        eachBefore(realRoot, function (node) {\n          coorX_1 = (node.getLayout().x + tx_1) * kx_1;\n          coorY_1 = orient_1 === 'TB' ? (node.depth - 1) * ky_1 : height - (node.depth - 1) * ky_1;\n          node.setLayout({\n            x: coorX_1,\n            y: coorY_1\n          }, true);\n        });\n      }\n    }\n  }\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { extend } from 'zrender/lib/core/util';\nexport default function treeVisual(ecModel) {\n  ecModel.eachSeriesByType('tree', function (seriesModel) {\n    var data = seriesModel.getData();\n    var tree = data.tree;\n    tree.eachNode(function (node) {\n      var model = node.getModel(); // TODO Optimize\n\n      var style = model.getModel('itemStyle').getItemStyle();\n      var existsStyle = data.ensureUniqueItemVisual(node.dataIndex, 'style');\n      extend(existsStyle, style);\n    });\n  });\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as helper from '../helper/treeHelper';\n\nvar noop = function noop() {};\n\nvar actionTypes = ['treemapZoomToNode', 'treemapRender', 'treemapMove'];\nexport function installTreemapAction(registers) {\n  for (var i = 0; i < actionTypes.length; i++) {\n    registers.registerAction({\n      type: actionTypes[i],\n      update: 'updateView'\n    }, noop);\n  }\n\n  registers.registerAction({\n    type: 'treemapRootToNode',\n    update: 'updateView'\n  }, function (payload, ecModel) {\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'treemap',\n      query: payload\n    }, handleRootToNode);\n\n    function handleRootToNode(model, index) {\n      var types = ['treemapZoomToNode', 'treemapRootToNode'];\n      var targetInfo = helper.retrieveTargetInfo(payload, types, model);\n\n      if (targetInfo) {\n        var originViewRoot = model.getViewRoot();\n\n        if (originViewRoot) {\n          payload.direction = helper.aboveViewRoot(originViewRoot, targetInfo.node) ? 'rollUp' : 'drillDown';\n        }\n\n        model.resetViewRoot(targetInfo.node);\n      }\n    }\n  });\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { getDecalFromPalette } from '../../model/mixin/palette';\nexport default function enableAriaDecalForTree(seriesModel) {\n  var data = seriesModel.getData();\n  var tree = data.tree;\n  var decalPaletteScope = {};\n  tree.eachNode(function (node) {\n    // Use decal of level 1 node\n    var current = node;\n\n    while (current && current.depth > 1) {\n      current = current.parentNode;\n    }\n\n    var decal = getDecalFromPalette(seriesModel.ecModel, current.name || current.dataIndex + '', decalPaletteScope);\n    node.setVisual('decal', decal);\n  });\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport SeriesModel from '../../model/Series';\nimport Tree from '../../data/Tree';\nimport Model from '../../model/Model';\nimport { wrapTreePathInfo } from '../helper/treeHelper';\nimport { normalizeToArray } from '../../util/model';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup';\nimport enableAriaDecalForTree from '../helper/enableAriaDecalForTree';\n\nvar TreemapSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(TreemapSeriesModel, _super);\n\n  function TreemapSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = TreemapSeriesModel.type;\n    _this.preventUsingHoverLayer = true;\n    return _this;\n  }\n  /**\n   * @override\n   */\n\n\n  TreemapSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    // Create a virtual root.\n    var root = {\n      name: option.name,\n      children: option.data\n    };\n    completeTreeValue(root);\n    var levels = option.levels || []; // Used in \"visual priority\" in `treemapVisual.js`.\n    // This way is a little tricky, must satisfy the precondition:\n    //   1. There is no `treeNode.getModel('itemStyle.xxx')` used.\n    //   2. The `Model.prototype.getModel()` will not use any clone-like way.\n\n    var designatedVisualItemStyle = this.designatedVisualItemStyle = {};\n    var designatedVisualModel = new Model({\n      itemStyle: designatedVisualItemStyle\n    }, this, ecModel);\n    levels = option.levels = setDefault(levels, ecModel);\n    var levelModels = zrUtil.map(levels || [], function (levelDefine) {\n      return new Model(levelDefine, designatedVisualModel, ecModel);\n    }, this); // Make sure always a new tree is created when setOption,\n    // in TreemapView, we check whether oldTree === newTree\n    // to choose mappings approach among old shapes and new shapes.\n\n    var tree = Tree.createTree(root, this, beforeLink);\n\n    function beforeLink(nodeData) {\n      nodeData.wrapMethod('getItemModel', function (model, idx) {\n        var node = tree.getNodeByDataIndex(idx);\n        var levelModel = node ? levelModels[node.depth] : null; // If no levelModel, we also need `designatedVisualModel`.\n\n        model.parentModel = levelModel || designatedVisualModel;\n        return model;\n      });\n    }\n\n    return tree.data;\n  };\n\n  TreemapSeriesModel.prototype.optionUpdated = function () {\n    this.resetViewRoot();\n  };\n  /**\n   * @override\n   * @param {number} dataIndex\n   * @param {boolean} [mutipleSeries=false]\n   */\n\n\n  TreemapSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    var data = this.getData();\n    var value = this.getRawValue(dataIndex);\n    var name = data.getName(dataIndex);\n    return createTooltipMarkup('nameValue', {\n      name: name,\n      value: value\n    });\n  };\n  /**\n   * Add tree path to tooltip param\n   *\n   * @override\n   * @param {number} dataIndex\n   * @return {Object}\n   */\n\n\n  TreemapSeriesModel.prototype.getDataParams = function (dataIndex) {\n    var params = _super.prototype.getDataParams.apply(this, arguments);\n\n    var node = this.getData().tree.getNodeByDataIndex(dataIndex);\n    params.treeAncestors = wrapTreePathInfo(node, this); // compatitable the previous code.\n\n    params.treePathInfo = params.treeAncestors;\n    return params;\n  };\n  /**\n   * @public\n   * @param {Object} layoutInfo {\n   *                                x: containerGroup x\n   *                                y: containerGroup y\n   *                                width: containerGroup width\n   *                                height: containerGroup height\n   *                            }\n   */\n\n\n  TreemapSeriesModel.prototype.setLayoutInfo = function (layoutInfo) {\n    /**\n     * @readOnly\n     * @type {Object}\n     */\n    this.layoutInfo = this.layoutInfo || {};\n    zrUtil.extend(this.layoutInfo, layoutInfo);\n  };\n  /**\n   * @param  {string} id\n   * @return {number} index\n   */\n\n\n  TreemapSeriesModel.prototype.mapIdToIndex = function (id) {\n    // A feature is implemented:\n    // index is monotone increasing with the sequence of\n    // input id at the first time.\n    // This feature can make sure that each data item and its\n    // mapped color have the same index between data list and\n    // color list at the beginning, which is useful for user\n    // to adjust data-color mapping.\n\n    /**\n     * @private\n     * @type {Object}\n     */\n    var idIndexMap = this._idIndexMap;\n\n    if (!idIndexMap) {\n      idIndexMap = this._idIndexMap = zrUtil.createHashMap();\n      /**\n       * @private\n       * @type {number}\n       */\n\n      this._idIndexMapCount = 0;\n    }\n\n    var index = idIndexMap.get(id);\n\n    if (index == null) {\n      idIndexMap.set(id, index = this._idIndexMapCount++);\n    }\n\n    return index;\n  };\n\n  TreemapSeriesModel.prototype.getViewRoot = function () {\n    return this._viewRoot;\n  };\n\n  TreemapSeriesModel.prototype.resetViewRoot = function (viewRoot) {\n    viewRoot ? this._viewRoot = viewRoot : viewRoot = this._viewRoot;\n    var root = this.getRawData().tree.root;\n\n    if (!viewRoot || viewRoot !== root && !root.contains(viewRoot)) {\n      this._viewRoot = root;\n    }\n  };\n\n  TreemapSeriesModel.prototype.enableAriaDecal = function () {\n    enableAriaDecalForTree(this);\n  };\n\n  TreemapSeriesModel.type = 'series.treemap';\n  TreemapSeriesModel.layoutMode = 'box';\n  TreemapSeriesModel.defaultOption = {\n    // Disable progressive rendering\n    progressive: 0,\n    // size: ['80%', '80%'],            // deprecated, compatible with ec2.\n    left: 'center',\n    top: 'middle',\n    width: '80%',\n    height: '80%',\n    sort: true,\n    clipWindow: 'origin',\n    squareRatio: 0.5 * (1 + Math.sqrt(5)),\n    leafDepth: null,\n    drillDownIcon: '',\n    // to align specialized icon. \n    zoomToNodeRatio: 0.32 * 0.32,\n    roam: true,\n    nodeClick: 'zoomToNode',\n    animation: true,\n    animationDurationUpdate: 900,\n    animationEasing: 'quinticInOut',\n    breadcrumb: {\n      show: true,\n      height: 22,\n      left: 'center',\n      top: 'bottom',\n      // right\n      // bottom\n      emptyItemWidth: 25,\n      itemStyle: {\n        color: 'rgba(0,0,0,0.7)',\n        textStyle: {\n          color: '#fff'\n        }\n      }\n    },\n    label: {\n      show: true,\n      // Do not use textDistance, for ellipsis rect just the same as treemap node rect.\n      distance: 0,\n      padding: 5,\n      position: 'inside',\n      // formatter: null,\n      color: '#fff',\n      overflow: 'truncate' // align\n      // verticalAlign\n\n    },\n    upperLabel: {\n      show: false,\n      position: [0, '50%'],\n      height: 20,\n      // formatter: null,\n      // color: '#fff',\n      overflow: 'truncate',\n      // align: null,\n      verticalAlign: 'middle'\n    },\n    itemStyle: {\n      color: null,\n      colorAlpha: null,\n      colorSaturation: null,\n      borderWidth: 0,\n      gapWidth: 0,\n      borderColor: '#fff',\n      borderColorSaturation: null // If specified, borderColor will be ineffective, and the\n      // border color is evaluated by color of current node and\n      // borderColorSaturation.\n\n    },\n    emphasis: {\n      upperLabel: {\n        show: true,\n        position: [0, '50%'],\n        ellipsis: true,\n        verticalAlign: 'middle'\n      }\n    },\n    visualDimension: 0,\n    visualMin: null,\n    visualMax: null,\n    color: [],\n    // level[n].color (if necessary).\n    // + Specify color list of each level. level[0].color would be global\n    // color list if not specified. (see method `setDefault`).\n    // + But set as a empty array to forbid fetch color from global palette\n    // when using nodeModel.get('color'), otherwise nodes on deep level\n    // will always has color palette set and are not able to inherit color\n    // from parent node.\n    // + TreemapSeries.color can not be set as 'none', otherwise effect\n    // legend color fetching (see seriesColor.js).\n    colorAlpha: null,\n    colorSaturation: null,\n    colorMappingBy: 'index',\n    visibleMin: 10,\n    // be rendered. Only works when sort is 'asc' or 'desc'.\n    childrenVisibleMin: null,\n    // grandchildren will not show.\n    // Why grandchildren? If not grandchildren but children,\n    // some siblings show children and some not,\n    // the appearance may be mess and not consistent,\n    levels: [] // Each item: {\n    //     visibleMin, itemStyle, visualDimension, label\n    // }\n    // data: {\n    //      value: [],\n    //      children: [],\n    //      link: 'http://xxx.xxx.xxx',\n    //      target: 'blank' or 'self'\n    // }\n\n  };\n  return TreemapSeriesModel;\n}(SeriesModel);\n/**\n * @param {Object} dataNode\n */\n\n\nfunction completeTreeValue(dataNode) {\n  // Postorder travel tree.\n  // If value of none-leaf node is not set,\n  // calculate it by suming up the value of all children.\n  var sum = 0;\n  zrUtil.each(dataNode.children, function (child) {\n    completeTreeValue(child);\n    var childValue = child.value;\n    zrUtil.isArray(childValue) && (childValue = childValue[0]);\n    sum += childValue;\n  });\n  var thisValue = dataNode.value;\n\n  if (zrUtil.isArray(thisValue)) {\n    thisValue = thisValue[0];\n  }\n\n  if (thisValue == null || isNaN(thisValue)) {\n    thisValue = sum;\n  } // Value should not less than 0.\n\n\n  if (thisValue < 0) {\n    thisValue = 0;\n  }\n\n  zrUtil.isArray(dataNode.value) ? dataNode.value[0] = thisValue : dataNode.value = thisValue;\n}\n/**\n * set default to level configuration\n */\n\n\nfunction setDefault(levels, ecModel) {\n  var globalColorList = normalizeToArray(ecModel.get('color'));\n  var globalDecalList = normalizeToArray(ecModel.get(['aria', 'decal', 'decals']));\n\n  if (!globalColorList) {\n    return;\n  }\n\n  levels = levels || [];\n  var hasColorDefine;\n  var hasDecalDefine;\n  zrUtil.each(levels, function (levelDefine) {\n    var model = new Model(levelDefine);\n    var modelColor = model.get('color');\n    var modelDecal = model.get('decal');\n\n    if (model.get(['itemStyle', 'color']) || modelColor && modelColor !== 'none') {\n      hasColorDefine = true;\n    }\n\n    if (model.get(['itemStyle', 'decal']) || modelDecal && modelDecal !== 'none') {\n      hasDecalDefine = true;\n    }\n  });\n  var level0 = levels[0] || (levels[0] = {});\n\n  if (!hasColorDefine) {\n    level0.color = globalColorList.slice();\n  }\n\n  if (!hasDecalDefine && globalDecalList) {\n    level0.decal = globalDecalList.slice();\n  }\n\n  return levels;\n}\n\nexport default TreemapSeriesModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as graphic from '../../util/graphic';\nimport { getECData } from '../../util/innerStore';\nimport * as layout from '../../util/layout';\nimport { wrapTreePathInfo } from '../helper/treeHelper';\nimport { curry, defaults } from 'zrender/lib/core/util';\nimport { convertOptionIdName } from '../../util/model';\nimport { Z2_EMPHASIS_LIFT } from '../../util/states';\nvar TEXT_PADDING = 8;\nvar ITEM_GAP = 8;\nvar ARRAY_LENGTH = 5;\n\nvar Breadcrumb =\n/** @class */\nfunction () {\n  function Breadcrumb(containerGroup) {\n    this.group = new graphic.Group();\n    containerGroup.add(this.group);\n  }\n\n  Breadcrumb.prototype.render = function (seriesModel, api, targetNode, onSelect) {\n    var model = seriesModel.getModel('breadcrumb');\n    var thisGroup = this.group;\n    thisGroup.removeAll();\n\n    if (!model.get('show') || !targetNode) {\n      return;\n    }\n\n    var normalStyleModel = model.getModel('itemStyle'); // let emphasisStyleModel = model.getModel('emphasis.itemStyle');\n\n    var textStyleModel = normalStyleModel.getModel('textStyle');\n    var layoutParam = {\n      pos: {\n        left: model.get('left'),\n        right: model.get('right'),\n        top: model.get('top'),\n        bottom: model.get('bottom')\n      },\n      box: {\n        width: api.getWidth(),\n        height: api.getHeight()\n      },\n      emptyItemWidth: model.get('emptyItemWidth'),\n      totalWidth: 0,\n      renderList: []\n    };\n\n    this._prepare(targetNode, layoutParam, textStyleModel);\n\n    this._renderContent(seriesModel, layoutParam, normalStyleModel, textStyleModel, onSelect);\n\n    layout.positionElement(thisGroup, layoutParam.pos, layoutParam.box);\n  };\n  /**\n   * Prepare render list and total width\n   * @private\n   */\n\n\n  Breadcrumb.prototype._prepare = function (targetNode, layoutParam, textStyleModel) {\n    for (var node = targetNode; node; node = node.parentNode) {\n      var text = convertOptionIdName(node.getModel().get('name'), '');\n      var textRect = textStyleModel.getTextRect(text);\n      var itemWidth = Math.max(textRect.width + TEXT_PADDING * 2, layoutParam.emptyItemWidth);\n      layoutParam.totalWidth += itemWidth + ITEM_GAP;\n      layoutParam.renderList.push({\n        node: node,\n        text: text,\n        width: itemWidth\n      });\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  Breadcrumb.prototype._renderContent = function (seriesModel, layoutParam, normalStyleModel, textStyleModel, onSelect) {\n    // Start rendering.\n    var lastX = 0;\n    var emptyItemWidth = layoutParam.emptyItemWidth;\n    var height = seriesModel.get(['breadcrumb', 'height']);\n    var availableSize = layout.getAvailableSize(layoutParam.pos, layoutParam.box);\n    var totalWidth = layoutParam.totalWidth;\n    var renderList = layoutParam.renderList;\n\n    for (var i = renderList.length - 1; i >= 0; i--) {\n      var item = renderList[i];\n      var itemNode = item.node;\n      var itemWidth = item.width;\n      var text = item.text; // Hdie text and shorten width if necessary.\n\n      if (totalWidth > availableSize.width) {\n        totalWidth -= itemWidth - emptyItemWidth;\n        itemWidth = emptyItemWidth;\n        text = null;\n      }\n\n      var el = new graphic.Polygon({\n        shape: {\n          points: makeItemPoints(lastX, 0, itemWidth, height, i === renderList.length - 1, i === 0)\n        },\n        style: defaults(normalStyleModel.getItemStyle(), {\n          lineJoin: 'bevel'\n        }),\n        textContent: new graphic.Text({\n          style: {\n            text: text,\n            fill: textStyleModel.getTextColor(),\n            font: textStyleModel.getFont()\n          }\n        }),\n        textConfig: {\n          position: 'inside'\n        },\n        z2: Z2_EMPHASIS_LIFT * 1e4,\n        onclick: curry(onSelect, itemNode)\n      });\n      el.disableLabelAnimation = true;\n      this.group.add(el);\n      packEventData(el, seriesModel, itemNode);\n      lastX += itemWidth + ITEM_GAP;\n    }\n  };\n\n  Breadcrumb.prototype.remove = function () {\n    this.group.removeAll();\n  };\n\n  return Breadcrumb;\n}();\n\nfunction makeItemPoints(x, y, itemWidth, itemHeight, head, tail) {\n  var points = [[head ? x : x - ARRAY_LENGTH, y], [x + itemWidth, y], [x + itemWidth, y + itemHeight], [head ? x : x - ARRAY_LENGTH, y + itemHeight]];\n  !tail && points.splice(2, 0, [x + itemWidth + ARRAY_LENGTH, y + itemHeight / 2]);\n  !head && points.push([x, y + itemHeight / 2]);\n  return points;\n} // Package custom mouse event.\n\n\nfunction packEventData(el, seriesModel, itemNode) {\n  getECData(el).eventData = {\n    componentType: 'series',\n    componentSubType: 'treemap',\n    componentIndex: seriesModel.componentIndex,\n    seriesIndex: seriesModel.seriesIndex,\n    seriesName: seriesModel.name,\n    seriesType: 'treemap',\n    selfType: 'breadcrumb',\n    nodeData: {\n      dataIndex: itemNode && itemNode.dataIndex,\n      name: itemNode && itemNode.name\n    },\n    treePathInfo: itemNode && wrapTreePathInfo(itemNode, seriesModel)\n  };\n}\n\nexport default Breadcrumb;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Animate multiple elements with a single done-callback.\n *\n * @example\n *  animation\n *      .createWrap()\n *      .add(el1, {x: 10, y: 10})\n *      .add(el2, {shape: {width: 500}, style: {fill: 'red'}}, 400)\n *      .done(function () { // done })\n *      .start('cubicOut');\n */\nvar AnimationWrap =\n/** @class */\nfunction () {\n  function AnimationWrap() {\n    this._storage = [];\n    this._elExistsMap = {};\n  }\n  /**\n   * Caution: a el can only be added once, otherwise 'done'\n   * might not be called. This method checks this (by el.id),\n   * suppresses adding and returns false when existing el found.\n   *\n   * @return Whether adding succeeded.\n   */\n\n\n  AnimationWrap.prototype.add = function (el, target, duration, delay, easing) {\n    if (this._elExistsMap[el.id]) {\n      return false;\n    }\n\n    this._elExistsMap[el.id] = true;\n\n    this._storage.push({\n      el: el,\n      target: target,\n      duration: duration,\n      delay: delay,\n      easing: easing\n    });\n\n    return true;\n  };\n  /**\n   * Only execute when animation done/aborted.\n   */\n\n\n  AnimationWrap.prototype.finished = function (callback) {\n    this._finishedCallback = callback;\n    return this;\n  };\n  /**\n   * Will stop exist animation firstly.\n   */\n\n\n  AnimationWrap.prototype.start = function () {\n    var _this = this;\n\n    var count = this._storage.length;\n\n    var checkTerminate = function checkTerminate() {\n      count--;\n\n      if (count <= 0) {\n        // Guard.\n        _this._storage.length = 0;\n        _this._elExistsMap = {};\n        _this._finishedCallback && _this._finishedCallback();\n      }\n    };\n\n    for (var i = 0, len = this._storage.length; i < len; i++) {\n      var item = this._storage[i];\n      item.el.animateTo(item.target, {\n        duration: item.duration,\n        delay: item.delay,\n        easing: item.easing,\n        setToFinal: true,\n        done: checkTerminate,\n        aborted: checkTerminate\n      });\n    }\n\n    return this;\n  };\n\n  return AnimationWrap;\n}();\n\nexport function createWrap() {\n  return new AnimationWrap();\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { bind, each, indexOf, curry, extend, normalizeCssArray, isFunction } from 'zrender/lib/core/util';\nimport * as graphic from '../../util/graphic';\nimport { getECData } from '../../util/innerStore';\nimport { isHighDownDispatcher, setAsHighDownDispatcher, setDefaultStateProxy, enableHoverFocus, Z2_EMPHASIS_LIFT } from '../../util/states';\nimport DataDiffer from '../../data/DataDiffer';\nimport * as helper from '../helper/treeHelper';\nimport Breadcrumb from './Breadcrumb';\nimport RoamController from '../../component/helper/RoamController';\nimport BoundingRect from 'zrender/lib/core/BoundingRect';\nimport * as matrix from 'zrender/lib/core/matrix';\nimport * as animationUtil from '../../util/animation';\nimport makeStyleMapper from '../../model/mixin/makeStyleMapper';\nimport ChartView from '../../view/Chart';\nimport Displayable from 'zrender/lib/graphic/Displayable';\nimport { makeInner, convertOptionIdName } from '../../util/model';\nimport { windowOpen } from '../../util/format';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle';\nvar Group = graphic.Group;\nvar Rect = graphic.Rect;\nvar DRAG_THRESHOLD = 3;\nvar PATH_LABEL_NOAMAL = 'label';\nvar PATH_UPPERLABEL_NORMAL = 'upperLabel'; // Should larger than emphasis states lift z\n\nvar Z2_BASE = Z2_EMPHASIS_LIFT * 10; // Should bigger than every z2.\n\nvar Z2_BG = Z2_EMPHASIS_LIFT * 2;\nvar Z2_CONTENT = Z2_EMPHASIS_LIFT * 3;\nvar getStateItemStyle = makeStyleMapper([['fill', 'color'], // `borderColor` and `borderWidth` has been occupied,\n// so use `stroke` to indicate the stroke of the rect.\n['stroke', 'strokeColor'], ['lineWidth', 'strokeWidth'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['shadowColor'] // Option decal is in `DecalObject` but style.decal is in `PatternObject`.\n// So do not transfer decal directly.\n]);\n\nvar getItemStyleNormal = function getItemStyleNormal(model) {\n  // Normal style props should include emphasis style props.\n  var itemStyle = getStateItemStyle(model); // Clear styles set by emphasis.\n\n  itemStyle.stroke = itemStyle.fill = itemStyle.lineWidth = null;\n  return itemStyle;\n};\n\nvar inner = makeInner();\n\nvar TreemapView =\n/** @class */\nfunction (_super) {\n  __extends(TreemapView, _super);\n\n  function TreemapView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = TreemapView.type;\n    _this._state = 'ready';\n    _this._storage = createStorage();\n    return _this;\n  }\n  /**\n   * @override\n   */\n\n\n  TreemapView.prototype.render = function (seriesModel, ecModel, api, payload) {\n    var models = ecModel.findComponents({\n      mainType: 'series',\n      subType: 'treemap',\n      query: payload\n    });\n\n    if (indexOf(models, seriesModel) < 0) {\n      return;\n    }\n\n    this.seriesModel = seriesModel;\n    this.api = api;\n    this.ecModel = ecModel;\n    var types = ['treemapZoomToNode', 'treemapRootToNode'];\n    var targetInfo = helper.retrieveTargetInfo(payload, types, seriesModel);\n    var payloadType = payload && payload.type;\n    var layoutInfo = seriesModel.layoutInfo;\n    var isInit = !this._oldTree;\n    var thisStorage = this._storage; // Mark new root when action is treemapRootToNode.\n\n    var reRoot = payloadType === 'treemapRootToNode' && targetInfo && thisStorage ? {\n      rootNodeGroup: thisStorage.nodeGroup[targetInfo.node.getRawIndex()],\n      direction: payload.direction\n    } : null;\n\n    var containerGroup = this._giveContainerGroup(layoutInfo);\n\n    var hasAnimation = seriesModel.get('animation');\n\n    var renderResult = this._doRender(containerGroup, seriesModel, reRoot);\n\n    hasAnimation && !isInit && (!payloadType || payloadType === 'treemapZoomToNode' || payloadType === 'treemapRootToNode') ? this._doAnimation(containerGroup, renderResult, seriesModel, reRoot) : renderResult.renderFinally();\n\n    this._resetController(api);\n\n    this._renderBreadcrumb(seriesModel, api, targetInfo);\n  };\n\n  TreemapView.prototype._giveContainerGroup = function (layoutInfo) {\n    var containerGroup = this._containerGroup;\n\n    if (!containerGroup) {\n      // FIXME\n      // containerGroupclipclip\n      containerGroup = this._containerGroup = new Group();\n\n      this._initEvents(containerGroup);\n\n      this.group.add(containerGroup);\n    }\n\n    containerGroup.x = layoutInfo.x;\n    containerGroup.y = layoutInfo.y;\n    return containerGroup;\n  };\n\n  TreemapView.prototype._doRender = function (containerGroup, seriesModel, reRoot) {\n    var thisTree = seriesModel.getData().tree;\n    var oldTree = this._oldTree; // Clear last shape records.\n\n    var lastsForAnimation = createStorage();\n    var thisStorage = createStorage();\n    var oldStorage = this._storage;\n    var willInvisibleEls = [];\n\n    function doRenderNode(thisNode, oldNode, parentGroup, depth) {\n      return renderNode(seriesModel, thisStorage, oldStorage, reRoot, lastsForAnimation, willInvisibleEls, thisNode, oldNode, parentGroup, depth);\n    } // Notice: when thisTree and oldTree are the same tree (see list.cloneShallow),\n    // the oldTree is actually losted, so we can not find all of the old graphic\n    // elements from tree. So we use this stragegy: make element storage, move\n    // from old storage to new storage, clear old storage.\n\n\n    dualTravel(thisTree.root ? [thisTree.root] : [], oldTree && oldTree.root ? [oldTree.root] : [], containerGroup, thisTree === oldTree || !oldTree, 0); // Process all removing.\n\n    var willDeleteEls = clearStorage(oldStorage);\n    this._oldTree = thisTree;\n    this._storage = thisStorage;\n    return {\n      lastsForAnimation: lastsForAnimation,\n      willDeleteEls: willDeleteEls,\n      renderFinally: renderFinally\n    };\n\n    function dualTravel(thisViewChildren, oldViewChildren, parentGroup, sameTree, depth) {\n      // When 'render' is triggered by action,\n      // 'this' and 'old' may be the same tree,\n      // we use rawIndex in that case.\n      if (sameTree) {\n        oldViewChildren = thisViewChildren;\n        each(thisViewChildren, function (child, index) {\n          !child.isRemoved() && processNode(index, index);\n        });\n      } // Diff hierarchically (diff only in each subtree, but not whole).\n      // because, consistency of view is important.\n      else {\n        new DataDiffer(oldViewChildren, thisViewChildren, getKey, getKey).add(processNode).update(processNode).remove(curry(processNode, null)).execute();\n      }\n\n      function getKey(node) {\n        // Identify by name or raw index.\n        return node.getId();\n      }\n\n      function processNode(newIndex, oldIndex) {\n        var thisNode = newIndex != null ? thisViewChildren[newIndex] : null;\n        var oldNode = oldIndex != null ? oldViewChildren[oldIndex] : null;\n        var group = doRenderNode(thisNode, oldNode, parentGroup, depth);\n        group && dualTravel(thisNode && thisNode.viewChildren || [], oldNode && oldNode.viewChildren || [], group, sameTree, depth + 1);\n      }\n    }\n\n    function clearStorage(storage) {\n      var willDeleteEls = createStorage();\n      storage && each(storage, function (store, storageName) {\n        var delEls = willDeleteEls[storageName];\n        each(store, function (el) {\n          el && (delEls.push(el), inner(el).willDelete = true);\n        });\n      });\n      return willDeleteEls;\n    }\n\n    function renderFinally() {\n      each(willDeleteEls, function (els) {\n        each(els, function (el) {\n          el.parent && el.parent.remove(el);\n        });\n      });\n      each(willInvisibleEls, function (el) {\n        el.invisible = true; // Setting invisible is for optimizing, so no need to set dirty,\n        // just mark as invisible.\n\n        el.dirty();\n      });\n    }\n  };\n\n  TreemapView.prototype._doAnimation = function (containerGroup, renderResult, seriesModel, reRoot) {\n    var durationOption = seriesModel.get('animationDurationUpdate');\n    var easingOption = seriesModel.get('animationEasing'); // TODO: do not support function until necessary.\n\n    var duration = (isFunction(durationOption) ? 0 : durationOption) || 0;\n    var easing = (isFunction(easingOption) ? null : easingOption) || 'cubicOut';\n    var animationWrap = animationUtil.createWrap(); // Make delete animations.\n\n    each(renderResult.willDeleteEls, function (store, storageName) {\n      each(store, function (el, rawIndex) {\n        if (el.invisible) {\n          return;\n        }\n\n        var parent = el.parent; // Always has parent, and parent is nodeGroup.\n\n        var target;\n        var innerStore = inner(parent);\n\n        if (reRoot && reRoot.direction === 'drillDown') {\n          target = parent === reRoot.rootNodeGroup // This is the content element of view root.\n          // Only `content` will enter this branch, because\n          // `background` and `nodeGroup` will not be deleted.\n          ? {\n            shape: {\n              x: 0,\n              y: 0,\n              width: innerStore.nodeWidth,\n              height: innerStore.nodeHeight\n            },\n            style: {\n              opacity: 0\n            }\n          } // Others.\n          : {\n            style: {\n              opacity: 0\n            }\n          };\n        } else {\n          var targetX = 0;\n          var targetY = 0;\n\n          if (!innerStore.willDelete) {\n            // Let node animate to right-bottom corner, cooperating with fadeout,\n            // which is appropriate for user understanding.\n            // Divided by 2 for reRoot rolling up effect.\n            targetX = innerStore.nodeWidth / 2;\n            targetY = innerStore.nodeHeight / 2;\n          }\n\n          target = storageName === 'nodeGroup' ? {\n            x: targetX,\n            y: targetY,\n            style: {\n              opacity: 0\n            }\n          } : {\n            shape: {\n              x: targetX,\n              y: targetY,\n              width: 0,\n              height: 0\n            },\n            style: {\n              opacity: 0\n            }\n          };\n        } // TODO: do not support delay until necessary.\n\n\n        target && animationWrap.add(el, target, duration, 0, easing);\n      });\n    }); // Make other animations\n\n    each(this._storage, function (store, storageName) {\n      each(store, function (el, rawIndex) {\n        var last = renderResult.lastsForAnimation[storageName][rawIndex];\n        var target = {};\n\n        if (!last) {\n          return;\n        }\n\n        if (el instanceof graphic.Group) {\n          if (last.oldX != null) {\n            target.x = el.x;\n            target.y = el.y;\n            el.x = last.oldX;\n            el.y = last.oldY;\n          }\n        } else {\n          if (last.oldShape) {\n            target.shape = extend({}, el.shape);\n            el.setShape(last.oldShape);\n          }\n\n          if (last.fadein) {\n            el.setStyle('opacity', 0);\n            target.style = {\n              opacity: 1\n            };\n          } // When animation is stopped for succedent animation starting,\n          // el.style.opacity might not be 1\n          else if (el.style.opacity !== 1) {\n            target.style = {\n              opacity: 1\n            };\n          }\n        }\n\n        animationWrap.add(el, target, duration, 0, easing);\n      });\n    }, this);\n    this._state = 'animating';\n    animationWrap.finished(bind(function () {\n      this._state = 'ready';\n      renderResult.renderFinally();\n    }, this)).start();\n  };\n\n  TreemapView.prototype._resetController = function (api) {\n    var controller = this._controller; // Init controller.\n\n    if (!controller) {\n      controller = this._controller = new RoamController(api.getZr());\n      controller.enable(this.seriesModel.get('roam'));\n      controller.on('pan', bind(this._onPan, this));\n      controller.on('zoom', bind(this._onZoom, this));\n    }\n\n    var rect = new BoundingRect(0, 0, api.getWidth(), api.getHeight());\n    controller.setPointerChecker(function (e, x, y) {\n      return rect.contain(x, y);\n    });\n  };\n\n  TreemapView.prototype._clearController = function () {\n    var controller = this._controller;\n\n    if (controller) {\n      controller.dispose();\n      controller = null;\n    }\n  };\n\n  TreemapView.prototype._onPan = function (e) {\n    if (this._state !== 'animating' && (Math.abs(e.dx) > DRAG_THRESHOLD || Math.abs(e.dy) > DRAG_THRESHOLD)) {\n      // These param must not be cached.\n      var root = this.seriesModel.getData().tree.root;\n\n      if (!root) {\n        return;\n      }\n\n      var rootLayout = root.getLayout();\n\n      if (!rootLayout) {\n        return;\n      }\n\n      this.api.dispatchAction({\n        type: 'treemapMove',\n        from: this.uid,\n        seriesId: this.seriesModel.id,\n        rootRect: {\n          x: rootLayout.x + e.dx,\n          y: rootLayout.y + e.dy,\n          width: rootLayout.width,\n          height: rootLayout.height\n        }\n      });\n    }\n  };\n\n  TreemapView.prototype._onZoom = function (e) {\n    var mouseX = e.originX;\n    var mouseY = e.originY;\n\n    if (this._state !== 'animating') {\n      // These param must not be cached.\n      var root = this.seriesModel.getData().tree.root;\n\n      if (!root) {\n        return;\n      }\n\n      var rootLayout = root.getLayout();\n\n      if (!rootLayout) {\n        return;\n      }\n\n      var rect = new BoundingRect(rootLayout.x, rootLayout.y, rootLayout.width, rootLayout.height);\n      var layoutInfo = this.seriesModel.layoutInfo; // Transform mouse coord from global to containerGroup.\n\n      mouseX -= layoutInfo.x;\n      mouseY -= layoutInfo.y; // Scale root bounding rect.\n\n      var m = matrix.create();\n      matrix.translate(m, m, [-mouseX, -mouseY]);\n      matrix.scale(m, m, [e.scale, e.scale]);\n      matrix.translate(m, m, [mouseX, mouseY]);\n      rect.applyTransform(m);\n      this.api.dispatchAction({\n        type: 'treemapRender',\n        from: this.uid,\n        seriesId: this.seriesModel.id,\n        rootRect: {\n          x: rect.x,\n          y: rect.y,\n          width: rect.width,\n          height: rect.height\n        }\n      });\n    }\n  };\n\n  TreemapView.prototype._initEvents = function (containerGroup) {\n    var _this = this;\n\n    containerGroup.on('click', function (e) {\n      if (_this._state !== 'ready') {\n        return;\n      }\n\n      var nodeClick = _this.seriesModel.get('nodeClick', true);\n\n      if (!nodeClick) {\n        return;\n      }\n\n      var targetInfo = _this.findTarget(e.offsetX, e.offsetY);\n\n      if (!targetInfo) {\n        return;\n      }\n\n      var node = targetInfo.node;\n\n      if (node.getLayout().isLeafRoot) {\n        _this._rootToNode(targetInfo);\n      } else {\n        if (nodeClick === 'zoomToNode') {\n          _this._zoomToNode(targetInfo);\n        } else if (nodeClick === 'link') {\n          var itemModel = node.hostTree.data.getItemModel(node.dataIndex);\n          var link = itemModel.get('link', true);\n          var linkTarget = itemModel.get('target', true) || 'blank';\n          link && windowOpen(link, linkTarget);\n        }\n      }\n    }, this);\n  };\n\n  TreemapView.prototype._renderBreadcrumb = function (seriesModel, api, targetInfo) {\n    var _this = this;\n\n    if (!targetInfo) {\n      targetInfo = seriesModel.get('leafDepth', true) != null ? {\n        node: seriesModel.getViewRoot()\n      } // FIXME\n      // better way?\n      // Find breadcrumb tail on center of containerGroup.\n      : this.findTarget(api.getWidth() / 2, api.getHeight() / 2);\n\n      if (!targetInfo) {\n        targetInfo = {\n          node: seriesModel.getData().tree.root\n        };\n      }\n    }\n\n    (this._breadcrumb || (this._breadcrumb = new Breadcrumb(this.group))).render(seriesModel, api, targetInfo.node, function (node) {\n      if (_this._state !== 'animating') {\n        helper.aboveViewRoot(seriesModel.getViewRoot(), node) ? _this._rootToNode({\n          node: node\n        }) : _this._zoomToNode({\n          node: node\n        });\n      }\n    });\n  };\n  /**\n   * @override\n   */\n\n\n  TreemapView.prototype.remove = function () {\n    this._clearController();\n\n    this._containerGroup && this._containerGroup.removeAll();\n    this._storage = createStorage();\n    this._state = 'ready';\n    this._breadcrumb && this._breadcrumb.remove();\n  };\n\n  TreemapView.prototype.dispose = function () {\n    this._clearController();\n  };\n\n  TreemapView.prototype._zoomToNode = function (targetInfo) {\n    this.api.dispatchAction({\n      type: 'treemapZoomToNode',\n      from: this.uid,\n      seriesId: this.seriesModel.id,\n      targetNode: targetInfo.node\n    });\n  };\n\n  TreemapView.prototype._rootToNode = function (targetInfo) {\n    this.api.dispatchAction({\n      type: 'treemapRootToNode',\n      from: this.uid,\n      seriesId: this.seriesModel.id,\n      targetNode: targetInfo.node\n    });\n  };\n  /**\n   * @public\n   * @param {number} x Global coord x.\n   * @param {number} y Global coord y.\n   * @return {Object} info If not found, return undefined;\n   * @return {number} info.node Target node.\n   * @return {number} info.offsetX x refer to target node.\n   * @return {number} info.offsetY y refer to target node.\n   */\n\n\n  TreemapView.prototype.findTarget = function (x, y) {\n    var targetInfo;\n    var viewRoot = this.seriesModel.getViewRoot();\n    viewRoot.eachNode({\n      attr: 'viewChildren',\n      order: 'preorder'\n    }, function (node) {\n      var bgEl = this._storage.background[node.getRawIndex()]; // If invisible, there might be no element.\n\n\n      if (bgEl) {\n        var point = bgEl.transformCoordToLocal(x, y);\n        var shape = bgEl.shape; // For performance consideration, dont use 'getBoundingRect'.\n\n        if (shape.x <= point[0] && point[0] <= shape.x + shape.width && shape.y <= point[1] && point[1] <= shape.y + shape.height) {\n          targetInfo = {\n            node: node,\n            offsetX: point[0],\n            offsetY: point[1]\n          };\n        } else {\n          return false; // Suppress visit subtree.\n        }\n      }\n    }, this);\n    return targetInfo;\n  };\n\n  TreemapView.type = 'treemap';\n  return TreemapView;\n}(ChartView);\n/**\n * @inner\n */\n\n\nfunction createStorage() {\n  return {\n    nodeGroup: [],\n    background: [],\n    content: []\n  };\n}\n/**\n * @inner\n * @return Return undefined means do not travel further.\n */\n\n\nfunction renderNode(seriesModel, thisStorage, oldStorage, reRoot, lastsForAnimation, willInvisibleEls, thisNode, oldNode, parentGroup, depth) {\n  // Whether under viewRoot.\n  if (!thisNode) {\n    // Deleting nodes will be performed finally. This method just find\n    // element from old storage, or create new element, set them to new\n    // storage, and set styles.\n    return;\n  } // -------------------------------------------------------------------\n  // Start of closure variables available in \"Procedures in renderNode\".\n\n\n  var thisLayout = thisNode.getLayout();\n  var data = seriesModel.getData();\n  var nodeModel = thisNode.getModel(); // Only for enabling highlight/downplay. Clear firstly.\n  // Because some node will not be rendered.\n\n  data.setItemGraphicEl(thisNode.dataIndex, null);\n\n  if (!thisLayout || !thisLayout.isInView) {\n    return;\n  }\n\n  var thisWidth = thisLayout.width;\n  var thisHeight = thisLayout.height;\n  var borderWidth = thisLayout.borderWidth;\n  var thisInvisible = thisLayout.invisible;\n  var thisRawIndex = thisNode.getRawIndex();\n  var oldRawIndex = oldNode && oldNode.getRawIndex();\n  var thisViewChildren = thisNode.viewChildren;\n  var upperHeight = thisLayout.upperHeight;\n  var isParent = thisViewChildren && thisViewChildren.length;\n  var itemStyleNormalModel = nodeModel.getModel('itemStyle');\n  var itemStyleEmphasisModel = nodeModel.getModel(['emphasis', 'itemStyle']);\n  var itemStyleBlurModel = nodeModel.getModel(['blur', 'itemStyle']);\n  var itemStyleSelectModel = nodeModel.getModel(['select', 'itemStyle']);\n  var borderRadius = itemStyleNormalModel.get('borderRadius') || 0; // End of closure ariables available in \"Procedures in renderNode\".\n  // -----------------------------------------------------------------\n  // Node group\n\n  var group = giveGraphic('nodeGroup', Group);\n\n  if (!group) {\n    return;\n  }\n\n  parentGroup.add(group); // x,y are not set when el is above view root.\n\n  group.x = thisLayout.x || 0;\n  group.y = thisLayout.y || 0;\n  group.markRedraw();\n  inner(group).nodeWidth = thisWidth;\n  inner(group).nodeHeight = thisHeight;\n\n  if (thisLayout.isAboveViewRoot) {\n    return group;\n  } // Background\n\n\n  var bg = giveGraphic('background', Rect, depth, Z2_BG);\n  bg && renderBackground(group, bg, isParent && thisLayout.upperLabelHeight);\n  var focus = nodeModel.get(['emphasis', 'focus']);\n  var blurScope = nodeModel.get(['emphasis', 'blurScope']);\n  var focusOrIndices = focus === 'ancestor' ? thisNode.getAncestorsIndices() : focus === 'descendant' ? thisNode.getDescendantIndices() : focus; // No children, render content.\n\n  if (isParent) {\n    // Because of the implementation about \"traverse\" in graphic hover style, we\n    // can not set hover listener on the \"group\" of non-leaf node. Otherwise the\n    // hover event from the descendents will be listenered.\n    if (isHighDownDispatcher(group)) {\n      setAsHighDownDispatcher(group, false);\n    }\n\n    if (bg) {\n      setAsHighDownDispatcher(bg, true); // Only for enabling highlight/downplay.\n\n      data.setItemGraphicEl(thisNode.dataIndex, bg);\n      enableHoverFocus(bg, focusOrIndices, blurScope);\n    }\n  } else {\n    var content = giveGraphic('content', Rect, depth, Z2_CONTENT);\n    content && renderContent(group, content);\n    bg.disableMorphing = true;\n\n    if (bg && isHighDownDispatcher(bg)) {\n      setAsHighDownDispatcher(bg, false);\n    }\n\n    setAsHighDownDispatcher(group, true); // Only for enabling highlight/downplay.\n\n    data.setItemGraphicEl(thisNode.dataIndex, group);\n    enableHoverFocus(group, focusOrIndices, blurScope);\n  }\n\n  return group; // ----------------------------\n  // | Procedures in renderNode |\n  // ----------------------------\n\n  function renderBackground(group, bg, useUpperLabel) {\n    var ecData = getECData(bg); // For tooltip.\n\n    ecData.dataIndex = thisNode.dataIndex;\n    ecData.seriesIndex = seriesModel.seriesIndex;\n    bg.setShape({\n      x: 0,\n      y: 0,\n      width: thisWidth,\n      height: thisHeight,\n      r: borderRadius\n    });\n\n    if (thisInvisible) {\n      // If invisible, do not set visual, otherwise the element will\n      // change immediately before animation. We think it is OK to\n      // remain its origin color when moving out of the view window.\n      processInvisible(bg);\n    } else {\n      bg.invisible = false;\n      var style = thisNode.getVisual('style');\n      var visualBorderColor = style.stroke;\n      var normalStyle = getItemStyleNormal(itemStyleNormalModel);\n      normalStyle.fill = visualBorderColor;\n      var emphasisStyle = getStateItemStyle(itemStyleEmphasisModel);\n      emphasisStyle.fill = itemStyleEmphasisModel.get('borderColor');\n      var blurStyle = getStateItemStyle(itemStyleBlurModel);\n      blurStyle.fill = itemStyleBlurModel.get('borderColor');\n      var selectStyle = getStateItemStyle(itemStyleSelectModel);\n      selectStyle.fill = itemStyleSelectModel.get('borderColor');\n\n      if (useUpperLabel) {\n        var upperLabelWidth = thisWidth - 2 * borderWidth;\n        prepareText( // PENDING: convert ZRColor to ColorString for text.\n        bg, visualBorderColor, style.opacity, {\n          x: borderWidth,\n          y: 0,\n          width: upperLabelWidth,\n          height: upperHeight\n        });\n      } // For old bg.\n      else {\n        bg.removeTextContent();\n      }\n\n      bg.setStyle(normalStyle);\n      bg.ensureState('emphasis').style = emphasisStyle;\n      bg.ensureState('blur').style = blurStyle;\n      bg.ensureState('select').style = selectStyle;\n      setDefaultStateProxy(bg);\n    }\n\n    group.add(bg);\n  }\n\n  function renderContent(group, content) {\n    var ecData = getECData(content); // For tooltip.\n\n    ecData.dataIndex = thisNode.dataIndex;\n    ecData.seriesIndex = seriesModel.seriesIndex;\n    var contentWidth = Math.max(thisWidth - 2 * borderWidth, 0);\n    var contentHeight = Math.max(thisHeight - 2 * borderWidth, 0);\n    content.culling = true;\n    content.setShape({\n      x: borderWidth,\n      y: borderWidth,\n      width: contentWidth,\n      height: contentHeight,\n      r: borderRadius\n    });\n\n    if (thisInvisible) {\n      // If invisible, do not set visual, otherwise the element will\n      // change immediately before animation. We think it is OK to\n      // remain its origin color when moving out of the view window.\n      processInvisible(content);\n    } else {\n      content.invisible = false;\n      var nodeStyle = thisNode.getVisual('style');\n      var visualColor = nodeStyle.fill;\n      var normalStyle = getItemStyleNormal(itemStyleNormalModel);\n      normalStyle.fill = visualColor;\n      normalStyle.decal = nodeStyle.decal;\n      var emphasisStyle = getStateItemStyle(itemStyleEmphasisModel);\n      var blurStyle = getStateItemStyle(itemStyleBlurModel);\n      var selectStyle = getStateItemStyle(itemStyleSelectModel); // PENDING: convert ZRColor to ColorString for text.\n\n      prepareText(content, visualColor, nodeStyle.opacity, null);\n      content.setStyle(normalStyle);\n      content.ensureState('emphasis').style = emphasisStyle;\n      content.ensureState('blur').style = blurStyle;\n      content.ensureState('select').style = selectStyle;\n      setDefaultStateProxy(content);\n    }\n\n    group.add(content);\n  }\n\n  function processInvisible(element) {\n    // Delay invisible setting utill animation finished,\n    // avoid element vanish suddenly before animation.\n    !element.invisible && willInvisibleEls.push(element);\n  }\n\n  function prepareText(rectEl, visualColor, visualOpacity, // Can be null/undefined\n  upperLabelRect) {\n    var normalLabelModel = nodeModel.getModel(upperLabelRect ? PATH_UPPERLABEL_NORMAL : PATH_LABEL_NOAMAL);\n    var defaultText = convertOptionIdName(nodeModel.get('name'), null);\n    var isShow = normalLabelModel.getShallow('show');\n    setLabelStyle(rectEl, getLabelStatesModels(nodeModel, upperLabelRect ? PATH_UPPERLABEL_NORMAL : PATH_LABEL_NOAMAL), {\n      defaultText: isShow ? defaultText : null,\n      inheritColor: visualColor,\n      defaultOpacity: visualOpacity,\n      labelFetcher: seriesModel,\n      labelDataIndex: thisNode.dataIndex\n    });\n    var textEl = rectEl.getTextContent();\n\n    if (!textEl) {\n      return;\n    }\n\n    var textStyle = textEl.style;\n    var textPadding = normalizeCssArray(textStyle.padding || 0);\n\n    if (upperLabelRect) {\n      rectEl.setTextConfig({\n        layoutRect: upperLabelRect\n      });\n      textEl.disableLabelLayout = true;\n    }\n\n    textEl.beforeUpdate = function () {\n      var width = Math.max((upperLabelRect ? upperLabelRect.width : rectEl.shape.width) - textPadding[1] - textPadding[3], 0);\n      var height = Math.max((upperLabelRect ? upperLabelRect.height : rectEl.shape.height) - textPadding[0] - textPadding[2], 0);\n\n      if (textStyle.width !== width || textStyle.height !== height) {\n        textEl.setStyle({\n          width: width,\n          height: height\n        });\n      }\n    };\n\n    textStyle.truncateMinChar = 2;\n    textStyle.lineOverflow = 'truncate';\n    addDrillDownIcon(textStyle, upperLabelRect, thisLayout);\n    var textEmphasisState = textEl.getState('emphasis');\n    addDrillDownIcon(textEmphasisState ? textEmphasisState.style : null, upperLabelRect, thisLayout);\n  }\n\n  function addDrillDownIcon(style, upperLabelRect, thisLayout) {\n    var text = style ? style.text : null;\n\n    if (!upperLabelRect && thisLayout.isLeafRoot && text != null) {\n      var iconChar = seriesModel.get('drillDownIcon', true);\n      style.text = iconChar ? iconChar + ' ' + text : text;\n    }\n  }\n\n  function giveGraphic(storageName, Ctor, depth, z) {\n    var element = oldRawIndex != null && oldStorage[storageName][oldRawIndex];\n    var lasts = lastsForAnimation[storageName];\n\n    if (element) {\n      // Remove from oldStorage\n      oldStorage[storageName][oldRawIndex] = null;\n      prepareAnimationWhenHasOld(lasts, element);\n    } // If invisible and no old element, do not create new element (for optimizing).\n    else if (!thisInvisible) {\n      element = new Ctor();\n\n      if (element instanceof Displayable) {\n        element.z2 = calculateZ2(depth, z);\n      }\n\n      prepareAnimationWhenNoOld(lasts, element);\n    } // Set to thisStorage\n\n\n    return thisStorage[storageName][thisRawIndex] = element;\n  }\n\n  function prepareAnimationWhenHasOld(lasts, element) {\n    var lastCfg = lasts[thisRawIndex] = {};\n\n    if (element instanceof Group) {\n      lastCfg.oldX = element.x;\n      lastCfg.oldY = element.y;\n    } else {\n      lastCfg.oldShape = extend({}, element.shape);\n    }\n  } // If a element is new, we need to find the animation start point carefully,\n  // otherwise it will looks strange when 'zoomToNode'.\n\n\n  function prepareAnimationWhenNoOld(lasts, element) {\n    var lastCfg = lasts[thisRawIndex] = {};\n    var parentNode = thisNode.parentNode;\n    var isGroup = element instanceof graphic.Group;\n\n    if (parentNode && (!reRoot || reRoot.direction === 'drillDown')) {\n      var parentOldX = 0;\n      var parentOldY = 0; // New nodes appear from right-bottom corner in 'zoomToNode' animation.\n      // For convenience, get old bounding rect from background.\n\n      var parentOldBg = lastsForAnimation.background[parentNode.getRawIndex()];\n\n      if (!reRoot && parentOldBg && parentOldBg.oldShape) {\n        parentOldX = parentOldBg.oldShape.width;\n        parentOldY = parentOldBg.oldShape.height;\n      } // When no parent old shape found, its parent is new too,\n      // so we can just use {x:0, y:0}.\n\n\n      if (isGroup) {\n        lastCfg.oldX = 0;\n        lastCfg.oldY = parentOldY;\n      } else {\n        lastCfg.oldShape = {\n          x: parentOldX,\n          y: parentOldY,\n          width: 0,\n          height: 0\n        };\n      }\n    } // Fade in, user can be aware that these nodes are new.\n\n\n    lastCfg.fadein = !isGroup;\n  }\n} // We can not set all backgroud with the same z, Because the behaviour of\n// drill down and roll up differ background creation sequence from tree\n// hierarchy sequence, which cause that lowser background element overlap\n// upper ones. So we calculate z based on depth.\n// Moreover, we try to shrink down z interval to [0, 1] to avoid that\n// treemap with large z overlaps other components.\n\n\nfunction calculateZ2(depth, z2InLevel) {\n  return depth * Z2_BASE + z2InLevel;\n}\n\nexport default TreemapView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as zrColor from 'zrender/lib/tool/color';\nimport { linearMap } from '../util/number';\nvar each = zrUtil.each;\nvar isObject = zrUtil.isObject;\nvar CATEGORY_DEFAULT_VISUAL_INDEX = -1;\n\nvar VisualMapping =\n/** @class */\nfunction () {\n  function VisualMapping(option) {\n    var mappingMethod = option.mappingMethod;\n    var visualType = option.type;\n    var thisOption = this.option = zrUtil.clone(option);\n    this.type = visualType;\n    this.mappingMethod = mappingMethod;\n    this._normalizeData = normalizers[mappingMethod];\n    var visualHandler = VisualMapping.visualHandlers[visualType];\n    this.applyVisual = visualHandler.applyVisual;\n    this.getColorMapper = visualHandler.getColorMapper;\n    this._normalizedToVisual = visualHandler._normalizedToVisual[mappingMethod];\n\n    if (mappingMethod === 'piecewise') {\n      normalizeVisualRange(thisOption);\n      preprocessForPiecewise(thisOption);\n    } else if (mappingMethod === 'category') {\n      thisOption.categories ? preprocessForSpecifiedCategory(thisOption) // categories is ordinal when thisOption.categories not specified,\n      // which need no more preprocess except normalize visual.\n      : normalizeVisualRange(thisOption, true);\n    } else {\n      // mappingMethod === 'linear' or 'fixed'\n      zrUtil.assert(mappingMethod !== 'linear' || thisOption.dataExtent);\n      normalizeVisualRange(thisOption);\n    }\n  }\n\n  VisualMapping.prototype.mapValueToVisual = function (value) {\n    var normalized = this._normalizeData(value);\n\n    return this._normalizedToVisual(normalized, value);\n  };\n\n  VisualMapping.prototype.getNormalizer = function () {\n    return zrUtil.bind(this._normalizeData, this);\n  };\n  /**\n   * List available visual types.\n   *\n   * @public\n   * @return {Array.<string>}\n   */\n\n\n  VisualMapping.listVisualTypes = function () {\n    return zrUtil.keys(VisualMapping.visualHandlers);\n  }; // /**\n  //  * @public\n  //  */\n  // static addVisualHandler(name, handler) {\n  //     visualHandlers[name] = handler;\n  // }\n\n  /**\n   * @public\n   */\n\n\n  VisualMapping.isValidType = function (visualType) {\n    return VisualMapping.visualHandlers.hasOwnProperty(visualType);\n  };\n  /**\n   * Convinent method.\n   * Visual can be Object or Array or primary type.\n   */\n\n\n  VisualMapping.eachVisual = function (visual, callback, context) {\n    if (zrUtil.isObject(visual)) {\n      zrUtil.each(visual, callback, context);\n    } else {\n      callback.call(context, visual);\n    }\n  };\n\n  VisualMapping.mapVisual = function (visual, callback, context) {\n    var isPrimary;\n    var newVisual = zrUtil.isArray(visual) ? [] : zrUtil.isObject(visual) ? {} : (isPrimary = true, null);\n    VisualMapping.eachVisual(visual, function (v, key) {\n      var newVal = callback.call(context, v, key);\n      isPrimary ? newVisual = newVal : newVisual[key] = newVal;\n    });\n    return newVisual;\n  };\n  /**\n   * Retrieve visual properties from given object.\n   */\n\n\n  VisualMapping.retrieveVisuals = function (obj) {\n    var ret = {};\n    var hasVisual;\n    obj && each(VisualMapping.visualHandlers, function (h, visualType) {\n      if (obj.hasOwnProperty(visualType)) {\n        ret[visualType] = obj[visualType];\n        hasVisual = true;\n      }\n    });\n    return hasVisual ? ret : null;\n  };\n  /**\n   * Give order to visual types, considering colorSaturation, colorAlpha depends on color.\n   *\n   * @public\n   * @param {(Object|Array)} visualTypes If Object, like: {color: ..., colorSaturation: ...}\n   *                                     IF Array, like: ['color', 'symbol', 'colorSaturation']\n   * @return {Array.<string>} Sorted visual types.\n   */\n\n\n  VisualMapping.prepareVisualTypes = function (visualTypes) {\n    if (zrUtil.isArray(visualTypes)) {\n      visualTypes = visualTypes.slice();\n    } else if (isObject(visualTypes)) {\n      var types_1 = [];\n      each(visualTypes, function (item, type) {\n        types_1.push(type);\n      });\n      visualTypes = types_1;\n    } else {\n      return [];\n    }\n\n    visualTypes.sort(function (type1, type2) {\n      // color should be front of colorSaturation, colorAlpha, ...\n      // symbol and symbolSize do not matter.\n      return type2 === 'color' && type1 !== 'color' && type1.indexOf('color') === 0 ? 1 : -1;\n    });\n    return visualTypes;\n  };\n  /**\n   * 'color', 'colorSaturation', 'colorAlpha', ... are depends on 'color'.\n   * Other visuals are only depends on themself.\n   */\n\n\n  VisualMapping.dependsOn = function (visualType1, visualType2) {\n    return visualType2 === 'color' ? !!(visualType1 && visualType1.indexOf(visualType2) === 0) : visualType1 === visualType2;\n  };\n  /**\n   * @param value\n   * @param pieceList [{value: ..., interval: [min, max]}, ...]\n   *                         Always from small to big.\n   * @param findClosestWhenOutside Default to be false\n   * @return index\n   */\n\n\n  VisualMapping.findPieceIndex = function (value, pieceList, findClosestWhenOutside) {\n    var possibleI;\n    var abs = Infinity; // value has the higher priority.\n\n    for (var i = 0, len = pieceList.length; i < len; i++) {\n      var pieceValue = pieceList[i].value;\n\n      if (pieceValue != null) {\n        if (pieceValue === value // FIXME\n        // It is supposed to compare value according to value type of dimension,\n        // but currently value type can exactly be string or number.\n        // Compromise for numeric-like string (like '12'), especially\n        // in the case that visualMap.categories is ['22', '33'].\n        || typeof pieceValue === 'string' && pieceValue === value + '') {\n          return i;\n        }\n\n        findClosestWhenOutside && updatePossible(pieceValue, i);\n      }\n    }\n\n    for (var i = 0, len = pieceList.length; i < len; i++) {\n      var piece = pieceList[i];\n      var interval = piece.interval;\n      var close_1 = piece.close;\n\n      if (interval) {\n        if (interval[0] === -Infinity) {\n          if (littleThan(close_1[1], value, interval[1])) {\n            return i;\n          }\n        } else if (interval[1] === Infinity) {\n          if (littleThan(close_1[0], interval[0], value)) {\n            return i;\n          }\n        } else if (littleThan(close_1[0], interval[0], value) && littleThan(close_1[1], value, interval[1])) {\n          return i;\n        }\n\n        findClosestWhenOutside && updatePossible(interval[0], i);\n        findClosestWhenOutside && updatePossible(interval[1], i);\n      }\n    }\n\n    if (findClosestWhenOutside) {\n      return value === Infinity ? pieceList.length - 1 : value === -Infinity ? 0 : possibleI;\n    }\n\n    function updatePossible(val, index) {\n      var newAbs = Math.abs(val - value);\n\n      if (newAbs < abs) {\n        abs = newAbs;\n        possibleI = index;\n      }\n    }\n  };\n\n  VisualMapping.visualHandlers = {\n    color: {\n      applyVisual: makeApplyVisual('color'),\n      getColorMapper: function getColorMapper() {\n        var thisOption = this.option;\n        return zrUtil.bind(thisOption.mappingMethod === 'category' ? function (value, isNormalized) {\n          !isNormalized && (value = this._normalizeData(value));\n          return doMapCategory.call(this, value);\n        } : function (value, isNormalized, out) {\n          // If output rgb array\n          // which will be much faster and useful in pixel manipulation\n          var returnRGBArray = !!out;\n          !isNormalized && (value = this._normalizeData(value));\n          out = zrColor.fastLerp(value, thisOption.parsedVisual, out);\n          return returnRGBArray ? out : zrColor.stringify(out, 'rgba');\n        }, this);\n      },\n      _normalizedToVisual: {\n        linear: function linear(normalized) {\n          return zrColor.stringify(zrColor.fastLerp(normalized, this.option.parsedVisual), 'rgba');\n        },\n        category: doMapCategory,\n        piecewise: function piecewise(normalized, value) {\n          var result = getSpecifiedVisual.call(this, value);\n\n          if (result == null) {\n            result = zrColor.stringify(zrColor.fastLerp(normalized, this.option.parsedVisual), 'rgba');\n          }\n\n          return result;\n        },\n        fixed: doMapFixed\n      }\n    },\n    colorHue: makePartialColorVisualHandler(function (color, value) {\n      return zrColor.modifyHSL(color, value);\n    }),\n    colorSaturation: makePartialColorVisualHandler(function (color, value) {\n      return zrColor.modifyHSL(color, null, value);\n    }),\n    colorLightness: makePartialColorVisualHandler(function (color, value) {\n      return zrColor.modifyHSL(color, null, null, value);\n    }),\n    colorAlpha: makePartialColorVisualHandler(function (color, value) {\n      return zrColor.modifyAlpha(color, value);\n    }),\n    decal: {\n      applyVisual: makeApplyVisual('decal'),\n      _normalizedToVisual: {\n        linear: null,\n        category: doMapCategory,\n        piecewise: null,\n        fixed: null\n      }\n    },\n    opacity: {\n      applyVisual: makeApplyVisual('opacity'),\n      _normalizedToVisual: createNormalizedToNumericVisual([0, 1])\n    },\n    liftZ: {\n      applyVisual: makeApplyVisual('liftZ'),\n      _normalizedToVisual: {\n        linear: doMapFixed,\n        category: doMapFixed,\n        piecewise: doMapFixed,\n        fixed: doMapFixed\n      }\n    },\n    symbol: {\n      applyVisual: function applyVisual(value, getter, setter) {\n        var symbolCfg = this.mapValueToVisual(value);\n        setter('symbol', symbolCfg);\n      },\n      _normalizedToVisual: {\n        linear: doMapToArray,\n        category: doMapCategory,\n        piecewise: function piecewise(normalized, value) {\n          var result = getSpecifiedVisual.call(this, value);\n\n          if (result == null) {\n            result = doMapToArray.call(this, normalized);\n          }\n\n          return result;\n        },\n        fixed: doMapFixed\n      }\n    },\n    symbolSize: {\n      applyVisual: makeApplyVisual('symbolSize'),\n      _normalizedToVisual: createNormalizedToNumericVisual([0, 1])\n    }\n  };\n  return VisualMapping;\n}();\n\nfunction preprocessForPiecewise(thisOption) {\n  var pieceList = thisOption.pieceList;\n  thisOption.hasSpecialVisual = false;\n  zrUtil.each(pieceList, function (piece, index) {\n    piece.originIndex = index; // piece.visual is \"result visual value\" but not\n    // a visual range, so it does not need to be normalized.\n\n    if (piece.visual != null) {\n      thisOption.hasSpecialVisual = true;\n    }\n  });\n}\n\nfunction preprocessForSpecifiedCategory(thisOption) {\n  // Hash categories.\n  var categories = thisOption.categories;\n  var categoryMap = thisOption.categoryMap = {};\n  var visual = thisOption.visual;\n  each(categories, function (cate, index) {\n    categoryMap[cate] = index;\n  }); // Process visual map input.\n\n  if (!zrUtil.isArray(visual)) {\n    var visualArr_1 = [];\n\n    if (zrUtil.isObject(visual)) {\n      each(visual, function (v, cate) {\n        var index = categoryMap[cate];\n        visualArr_1[index != null ? index : CATEGORY_DEFAULT_VISUAL_INDEX] = v;\n      });\n    } else {\n      // Is primary type, represents default visual.\n      visualArr_1[CATEGORY_DEFAULT_VISUAL_INDEX] = visual;\n    }\n\n    visual = setVisualToOption(thisOption, visualArr_1);\n  } // Remove categories that has no visual,\n  // then we can mapping them to CATEGORY_DEFAULT_VISUAL_INDEX.\n\n\n  for (var i = categories.length - 1; i >= 0; i--) {\n    if (visual[i] == null) {\n      delete categoryMap[categories[i]];\n      categories.pop();\n    }\n  }\n}\n\nfunction normalizeVisualRange(thisOption, isCategory) {\n  var visual = thisOption.visual;\n  var visualArr = [];\n\n  if (zrUtil.isObject(visual)) {\n    each(visual, function (v) {\n      visualArr.push(v);\n    });\n  } else if (visual != null) {\n    visualArr.push(visual);\n  }\n\n  var doNotNeedPair = {\n    color: 1,\n    symbol: 1\n  };\n\n  if (!isCategory && visualArr.length === 1 && !doNotNeedPair.hasOwnProperty(thisOption.type)) {\n    // Do not care visualArr.length === 0, which is illegal.\n    visualArr[1] = visualArr[0];\n  }\n\n  setVisualToOption(thisOption, visualArr);\n}\n\nfunction makePartialColorVisualHandler(applyValue) {\n  return {\n    applyVisual: function applyVisual(value, getter, setter) {\n      // Only used in HSL\n      var colorChannel = this.mapValueToVisual(value); // Must not be array value\n\n      setter('color', applyValue(getter('color'), colorChannel));\n    },\n    _normalizedToVisual: createNormalizedToNumericVisual([0, 1])\n  };\n}\n\nfunction doMapToArray(normalized) {\n  var visual = this.option.visual;\n  return visual[Math.round(linearMap(normalized, [0, 1], [0, visual.length - 1], true))] || {}; // TODO {}?\n}\n\nfunction makeApplyVisual(visualType) {\n  return function (value, getter, setter) {\n    setter(visualType, this.mapValueToVisual(value));\n  };\n}\n\nfunction doMapCategory(normalized) {\n  var visual = this.option.visual;\n  return visual[this.option.loop && normalized !== CATEGORY_DEFAULT_VISUAL_INDEX ? normalized % visual.length : normalized];\n}\n\nfunction doMapFixed() {\n  // visual will be convert to array.\n  return this.option.visual[0];\n}\n/**\n * Create mapped to numeric visual\n */\n\n\nfunction createNormalizedToNumericVisual(sourceExtent) {\n  return {\n    linear: function linear(normalized) {\n      return linearMap(normalized, sourceExtent, this.option.visual, true);\n    },\n    category: doMapCategory,\n    piecewise: function piecewise(normalized, value) {\n      var result = getSpecifiedVisual.call(this, value);\n\n      if (result == null) {\n        result = linearMap(normalized, sourceExtent, this.option.visual, true);\n      }\n\n      return result;\n    },\n    fixed: doMapFixed\n  };\n}\n\nfunction getSpecifiedVisual(value) {\n  var thisOption = this.option;\n  var pieceList = thisOption.pieceList;\n\n  if (thisOption.hasSpecialVisual) {\n    var pieceIndex = VisualMapping.findPieceIndex(value, pieceList);\n    var piece = pieceList[pieceIndex];\n\n    if (piece && piece.visual) {\n      return piece.visual[this.type];\n    }\n  }\n}\n\nfunction setVisualToOption(thisOption, visualArr) {\n  thisOption.visual = visualArr;\n\n  if (thisOption.type === 'color') {\n    thisOption.parsedVisual = zrUtil.map(visualArr, function (item) {\n      return zrColor.parse(item);\n    });\n  }\n\n  return visualArr;\n}\n/**\n * Normalizers by mapping methods.\n */\n\n\nvar normalizers = {\n  linear: function linear(value) {\n    return linearMap(value, this.option.dataExtent, [0, 1], true);\n  },\n  piecewise: function piecewise(value) {\n    var pieceList = this.option.pieceList;\n    var pieceIndex = VisualMapping.findPieceIndex(value, pieceList, true);\n\n    if (pieceIndex != null) {\n      return linearMap(pieceIndex, [0, pieceList.length - 1], [0, 1], true);\n    }\n  },\n  category: function category(value) {\n    var index = this.option.categories ? this.option.categoryMap[value] : value; // ordinal value\n\n    return index == null ? CATEGORY_DEFAULT_VISUAL_INDEX : index;\n  },\n  fixed: zrUtil.noop\n};\n\nfunction littleThan(close, a, b) {\n  return close ? a <= b : a < b;\n}\n\nexport default VisualMapping;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport VisualMapping from '../../visual/VisualMapping';\nimport { each, extend, isArray } from 'zrender/lib/core/util';\nimport { modifyHSL, modifyAlpha } from 'zrender/lib/tool/color';\nimport { makeInner } from '../../util/model';\nvar ITEM_STYLE_NORMAL = 'itemStyle';\nvar inner = makeInner();\nexport default {\n  seriesType: 'treemap',\n  reset: function reset(seriesModel) {\n    var tree = seriesModel.getData().tree;\n    var root = tree.root;\n\n    if (root.isRemoved()) {\n      return;\n    }\n\n    travelTree(root, // Visual should calculate from tree root but not view root.\n    {}, seriesModel.getViewRoot().getAncestors(), seriesModel);\n  }\n};\n\nfunction travelTree(node, designatedVisual, viewRootAncestors, seriesModel) {\n  var nodeModel = node.getModel();\n  var nodeLayout = node.getLayout();\n  var data = node.hostTree.data; // Optimize\n\n  if (!nodeLayout || nodeLayout.invisible || !nodeLayout.isInView) {\n    return;\n  }\n\n  var nodeItemStyleModel = nodeModel.getModel(ITEM_STYLE_NORMAL);\n  var visuals = buildVisuals(nodeItemStyleModel, designatedVisual, seriesModel);\n  var existsStyle = data.ensureUniqueItemVisual(node.dataIndex, 'style'); // calculate border color\n\n  var borderColor = nodeItemStyleModel.get('borderColor');\n  var borderColorSaturation = nodeItemStyleModel.get('borderColorSaturation');\n  var thisNodeColor;\n\n  if (borderColorSaturation != null) {\n    // For performance, do not always execute 'calculateColor'.\n    thisNodeColor = calculateColor(visuals);\n    borderColor = calculateBorderColor(borderColorSaturation, thisNodeColor);\n  }\n\n  existsStyle.stroke = borderColor;\n  var viewChildren = node.viewChildren;\n\n  if (!viewChildren || !viewChildren.length) {\n    thisNodeColor = calculateColor(visuals); // Apply visual to this node.\n\n    existsStyle.fill = thisNodeColor;\n  } else {\n    var mapping_1 = buildVisualMapping(node, nodeModel, nodeLayout, nodeItemStyleModel, visuals, viewChildren); // Designate visual to children.\n\n    each(viewChildren, function (child, index) {\n      // If higher than viewRoot, only ancestors of viewRoot is needed to visit.\n      if (child.depth >= viewRootAncestors.length || child === viewRootAncestors[child.depth]) {\n        var childVisual = mapVisual(nodeModel, visuals, child, index, mapping_1, seriesModel);\n        travelTree(child, childVisual, viewRootAncestors, seriesModel);\n      }\n    });\n  }\n}\n\nfunction buildVisuals(nodeItemStyleModel, designatedVisual, seriesModel) {\n  var visuals = extend({}, designatedVisual);\n  var designatedVisualItemStyle = seriesModel.designatedVisualItemStyle;\n  each(['color', 'colorAlpha', 'colorSaturation'], function (visualName) {\n    // Priority: thisNode > thisLevel > parentNodeDesignated > seriesModel\n    designatedVisualItemStyle[visualName] = designatedVisual[visualName];\n    var val = nodeItemStyleModel.get(visualName);\n    designatedVisualItemStyle[visualName] = null;\n    val != null && (visuals[visualName] = val);\n  });\n  return visuals;\n}\n\nfunction calculateColor(visuals) {\n  var color = getValueVisualDefine(visuals, 'color');\n\n  if (color) {\n    var colorAlpha = getValueVisualDefine(visuals, 'colorAlpha');\n    var colorSaturation = getValueVisualDefine(visuals, 'colorSaturation');\n\n    if (colorSaturation) {\n      color = modifyHSL(color, null, null, colorSaturation);\n    }\n\n    if (colorAlpha) {\n      color = modifyAlpha(color, colorAlpha);\n    }\n\n    return color;\n  }\n}\n\nfunction calculateBorderColor(borderColorSaturation, thisNodeColor) {\n  return thisNodeColor != null // Can only be string\n  ? modifyHSL(thisNodeColor, null, null, borderColorSaturation) : null;\n}\n\nfunction getValueVisualDefine(visuals, name) {\n  var value = visuals[name];\n\n  if (value != null && value !== 'none') {\n    return value;\n  }\n}\n\nfunction buildVisualMapping(node, nodeModel, nodeLayout, nodeItemStyleModel, visuals, viewChildren) {\n  if (!viewChildren || !viewChildren.length) {\n    return;\n  }\n\n  var rangeVisual = getRangeVisual(nodeModel, 'color') || visuals.color != null && visuals.color !== 'none' && (getRangeVisual(nodeModel, 'colorAlpha') || getRangeVisual(nodeModel, 'colorSaturation'));\n\n  if (!rangeVisual) {\n    return;\n  }\n\n  var visualMin = nodeModel.get('visualMin');\n  var visualMax = nodeModel.get('visualMax');\n  var dataExtent = nodeLayout.dataExtent.slice();\n  visualMin != null && visualMin < dataExtent[0] && (dataExtent[0] = visualMin);\n  visualMax != null && visualMax > dataExtent[1] && (dataExtent[1] = visualMax);\n  var colorMappingBy = nodeModel.get('colorMappingBy');\n  var opt = {\n    type: rangeVisual.name,\n    dataExtent: dataExtent,\n    visual: rangeVisual.range\n  };\n\n  if (opt.type === 'color' && (colorMappingBy === 'index' || colorMappingBy === 'id')) {\n    opt.mappingMethod = 'category';\n    opt.loop = true; // categories is ordinal, so do not set opt.categories.\n  } else {\n    opt.mappingMethod = 'linear';\n  }\n\n  var mapping = new VisualMapping(opt);\n  inner(mapping).drColorMappingBy = colorMappingBy;\n  return mapping;\n} // Notice: If we dont have the attribute 'colorRange', but only use\n// attribute 'color' to represent both concepts of 'colorRange' and 'color',\n// (It means 'colorRange' when 'color' is Array, means 'color' when not array),\n// this problem will be encountered:\n// If a level-1 node dont have children, and its siblings has children,\n// and colorRange is set on level-1, then the node can not be colored.\n// So we separate 'colorRange' and 'color' to different attributes.\n\n\nfunction getRangeVisual(nodeModel, name) {\n  // 'colorRange', 'colorARange', 'colorSRange'.\n  // If not exsits on this node, fetch from levels and series.\n  var range = nodeModel.get(name);\n  return isArray(range) && range.length ? {\n    name: name,\n    range: range\n  } : null;\n}\n\nfunction mapVisual(nodeModel, visuals, child, index, mapping, seriesModel) {\n  var childVisuals = extend({}, visuals);\n\n  if (mapping) {\n    // Only support color, colorAlpha, colorSaturation.\n    var mappingType = mapping.type;\n    var colorMappingBy = mappingType === 'color' && inner(mapping).drColorMappingBy;\n    var value = colorMappingBy === 'index' ? index : colorMappingBy === 'id' ? seriesModel.mapIdToIndex(child.getId()) : child.getValue(nodeModel.get('visualDimension'));\n    childVisuals[mappingType] = mapping.mapValueToVisual(value);\n  }\n\n  return childVisuals;\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* A third-party license is embeded for some of the code in this file:\n* The treemap layout implementation was originally copied from\n* \"d3.js\" with some modifications made for this project.\n* (See more details in the comment of the method \"squarify\" below.)\n* The use of the source code of this file is also subject to the terms\n* and consitions of the license of \"d3.js\" (BSD-3Clause, see\n* </licenses/LICENSE-d3>).\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport BoundingRect from 'zrender/lib/core/BoundingRect';\nimport { parsePercent, MAX_SAFE_INTEGER } from '../../util/number';\nimport * as layout from '../../util/layout';\nimport * as helper from '../helper/treeHelper';\nvar mathMax = Math.max;\nvar mathMin = Math.min;\nvar retrieveValue = zrUtil.retrieve;\nvar each = zrUtil.each;\nvar PATH_BORDER_WIDTH = ['itemStyle', 'borderWidth'];\nvar PATH_GAP_WIDTH = ['itemStyle', 'gapWidth'];\nvar PATH_UPPER_LABEL_SHOW = ['upperLabel', 'show'];\nvar PATH_UPPER_LABEL_HEIGHT = ['upperLabel', 'height'];\n;\n/**\n * @public\n */\n\nexport default {\n  seriesType: 'treemap',\n  reset: function reset(seriesModel, ecModel, api, payload) {\n    // Layout result in each node:\n    // {x, y, width, height, area, borderWidth}\n    var ecWidth = api.getWidth();\n    var ecHeight = api.getHeight();\n    var seriesOption = seriesModel.option;\n    var layoutInfo = layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n    var size = seriesOption.size || []; // Compatible with ec2.\n\n    var containerWidth = parsePercent(retrieveValue(layoutInfo.width, size[0]), ecWidth);\n    var containerHeight = parsePercent(retrieveValue(layoutInfo.height, size[1]), ecHeight); // Fetch payload info.\n\n    var payloadType = payload && payload.type;\n    var types = ['treemapZoomToNode', 'treemapRootToNode'];\n    var targetInfo = helper.retrieveTargetInfo(payload, types, seriesModel);\n    var rootRect = payloadType === 'treemapRender' || payloadType === 'treemapMove' ? payload.rootRect : null;\n    var viewRoot = seriesModel.getViewRoot();\n    var viewAbovePath = helper.getPathToRoot(viewRoot);\n\n    if (payloadType !== 'treemapMove') {\n      var rootSize = payloadType === 'treemapZoomToNode' ? estimateRootSize(seriesModel, targetInfo, viewRoot, containerWidth, containerHeight) : rootRect ? [rootRect.width, rootRect.height] : [containerWidth, containerHeight];\n      var sort_1 = seriesOption.sort;\n\n      if (sort_1 && sort_1 !== 'asc' && sort_1 !== 'desc') {\n        // Default to be desc order.\n        sort_1 = 'desc';\n      }\n\n      var options = {\n        squareRatio: seriesOption.squareRatio,\n        sort: sort_1,\n        leafDepth: seriesOption.leafDepth\n      }; // layout should be cleared because using updateView but not update.\n\n      viewRoot.hostTree.clearLayouts(); // TODO\n      // optimize: if out of view clip, do not layout.\n      // But take care that if do not render node out of view clip,\n      // how to calculate start po\n\n      var viewRootLayout_1 = {\n        x: 0,\n        y: 0,\n        width: rootSize[0],\n        height: rootSize[1],\n        area: rootSize[0] * rootSize[1]\n      };\n      viewRoot.setLayout(viewRootLayout_1);\n      squarify(viewRoot, options, false, 0); // Supplement layout.\n\n      viewRootLayout_1 = viewRoot.getLayout();\n      each(viewAbovePath, function (node, index) {\n        var childValue = (viewAbovePath[index + 1] || viewRoot).getValue();\n        node.setLayout(zrUtil.extend({\n          dataExtent: [childValue, childValue],\n          borderWidth: 0,\n          upperHeight: 0\n        }, viewRootLayout_1));\n      });\n    }\n\n    var treeRoot = seriesModel.getData().tree.root;\n    treeRoot.setLayout(calculateRootPosition(layoutInfo, rootRect, targetInfo), true);\n    seriesModel.setLayoutInfo(layoutInfo); // FIXME\n    // clipec\n\n    prunning(treeRoot, // Transform to base element coordinate system.\n    new BoundingRect(-layoutInfo.x, -layoutInfo.y, ecWidth, ecHeight), viewAbovePath, viewRoot, 0);\n  }\n};\n/**\n * Layout treemap with squarify algorithm.\n * The original presentation of this algorithm\n * was made by Mark Bruls, Kees Huizing, and Jarke J. van Wijk\n * <https://graphics.ethz.ch/teaching/scivis_common/Literature/squarifiedTreeMaps.pdf>.\n * The implementation of this algorithm was originally copied from \"d3.js\"\n * <https://github.com/d3/d3/blob/9cc9a875e636a1dcf36cc1e07bdf77e1ad6e2c74/src/layout/treemap.js>\n * with some modifications made for this program.\n * See the license statement at the head of this file.\n *\n * @protected\n * @param {module:echarts/data/Tree~TreeNode} node\n * @param {Object} options\n * @param {string} options.sort 'asc' or 'desc'\n * @param {number} options.squareRatio\n * @param {boolean} hideChildren\n * @param {number} depth\n */\n\nfunction squarify(node, options, hideChildren, depth) {\n  var width;\n  var height;\n\n  if (node.isRemoved()) {\n    return;\n  }\n\n  var thisLayout = node.getLayout();\n  width = thisLayout.width;\n  height = thisLayout.height; // Considering border and gap\n\n  var nodeModel = node.getModel();\n  var borderWidth = nodeModel.get(PATH_BORDER_WIDTH);\n  var halfGapWidth = nodeModel.get(PATH_GAP_WIDTH) / 2;\n  var upperLabelHeight = getUpperLabelHeight(nodeModel);\n  var upperHeight = Math.max(borderWidth, upperLabelHeight);\n  var layoutOffset = borderWidth - halfGapWidth;\n  var layoutOffsetUpper = upperHeight - halfGapWidth;\n  node.setLayout({\n    borderWidth: borderWidth,\n    upperHeight: upperHeight,\n    upperLabelHeight: upperLabelHeight\n  }, true);\n  width = mathMax(width - 2 * layoutOffset, 0);\n  height = mathMax(height - layoutOffset - layoutOffsetUpper, 0);\n  var totalArea = width * height;\n  var viewChildren = initChildren(node, nodeModel, totalArea, options, hideChildren, depth);\n\n  if (!viewChildren.length) {\n    return;\n  }\n\n  var rect = {\n    x: layoutOffset,\n    y: layoutOffsetUpper,\n    width: width,\n    height: height\n  };\n  var rowFixedLength = mathMin(width, height);\n  var best = Infinity; // the best row score so far\n\n  var row = [];\n  row.area = 0;\n\n  for (var i = 0, len = viewChildren.length; i < len;) {\n    var child = viewChildren[i];\n    row.push(child);\n    row.area += child.getLayout().area;\n    var score = worst(row, rowFixedLength, options.squareRatio); // continue with this orientation\n\n    if (score <= best) {\n      i++;\n      best = score;\n    } // abort, and try a different orientation\n    else {\n      row.area -= row.pop().getLayout().area;\n      position(row, rowFixedLength, rect, halfGapWidth, false);\n      rowFixedLength = mathMin(rect.width, rect.height);\n      row.length = row.area = 0;\n      best = Infinity;\n    }\n  }\n\n  if (row.length) {\n    position(row, rowFixedLength, rect, halfGapWidth, true);\n  }\n\n  if (!hideChildren) {\n    var childrenVisibleMin = nodeModel.get('childrenVisibleMin');\n\n    if (childrenVisibleMin != null && totalArea < childrenVisibleMin) {\n      hideChildren = true;\n    }\n  }\n\n  for (var i = 0, len = viewChildren.length; i < len; i++) {\n    squarify(viewChildren[i], options, hideChildren, depth + 1);\n  }\n}\n/**\n * Set area to each child, and calculate data extent for visual coding.\n */\n\n\nfunction initChildren(node, nodeModel, totalArea, options, hideChildren, depth) {\n  var viewChildren = node.children || [];\n  var orderBy = options.sort;\n  orderBy !== 'asc' && orderBy !== 'desc' && (orderBy = null);\n  var overLeafDepth = options.leafDepth != null && options.leafDepth <= depth; // leafDepth has higher priority.\n\n  if (hideChildren && !overLeafDepth) {\n    return node.viewChildren = [];\n  } // Sort children, order by desc.\n\n\n  viewChildren = zrUtil.filter(viewChildren, function (child) {\n    return !child.isRemoved();\n  });\n  sort(viewChildren, orderBy);\n  var info = statistic(nodeModel, viewChildren, orderBy);\n\n  if (info.sum === 0) {\n    return node.viewChildren = [];\n  }\n\n  info.sum = filterByThreshold(nodeModel, totalArea, info.sum, orderBy, viewChildren);\n\n  if (info.sum === 0) {\n    return node.viewChildren = [];\n  } // Set area to each child.\n\n\n  for (var i = 0, len = viewChildren.length; i < len; i++) {\n    var area = viewChildren[i].getValue() / info.sum * totalArea; // Do not use setLayout({...}, true), because it is needed to clear last layout.\n\n    viewChildren[i].setLayout({\n      area: area\n    });\n  }\n\n  if (overLeafDepth) {\n    viewChildren.length && node.setLayout({\n      isLeafRoot: true\n    }, true);\n    viewChildren.length = 0;\n  }\n\n  node.viewChildren = viewChildren;\n  node.setLayout({\n    dataExtent: info.dataExtent\n  }, true);\n  return viewChildren;\n}\n/**\n * Consider 'visibleMin'. Modify viewChildren and get new sum.\n */\n\n\nfunction filterByThreshold(nodeModel, totalArea, sum, orderBy, orderedChildren) {\n  // visibleMin is not supported yet when no option.sort.\n  if (!orderBy) {\n    return sum;\n  }\n\n  var visibleMin = nodeModel.get('visibleMin');\n  var len = orderedChildren.length;\n  var deletePoint = len; // Always travel from little value to big value.\n\n  for (var i = len - 1; i >= 0; i--) {\n    var value = orderedChildren[orderBy === 'asc' ? len - i - 1 : i].getValue();\n\n    if (value / sum * totalArea < visibleMin) {\n      deletePoint = i;\n      sum -= value;\n    }\n  }\n\n  orderBy === 'asc' ? orderedChildren.splice(0, len - deletePoint) : orderedChildren.splice(deletePoint, len - deletePoint);\n  return sum;\n}\n/**\n * Sort\n */\n\n\nfunction sort(viewChildren, orderBy) {\n  if (orderBy) {\n    viewChildren.sort(function (a, b) {\n      var diff = orderBy === 'asc' ? a.getValue() - b.getValue() : b.getValue() - a.getValue();\n      return diff === 0 ? orderBy === 'asc' ? a.dataIndex - b.dataIndex : b.dataIndex - a.dataIndex : diff;\n    });\n  }\n\n  return viewChildren;\n}\n/**\n * Statistic\n */\n\n\nfunction statistic(nodeModel, children, orderBy) {\n  // Calculate sum.\n  var sum = 0;\n\n  for (var i = 0, len = children.length; i < len; i++) {\n    sum += children[i].getValue();\n  } // Statistic data extent for latter visual coding.\n  // Notice: data extent should be calculate based on raw children\n  // but not filtered view children, otherwise visual mapping will not\n  // be stable when zoom (where children is filtered by visibleMin).\n\n\n  var dimension = nodeModel.get('visualDimension');\n  var dataExtent; // The same as area dimension.\n\n  if (!children || !children.length) {\n    dataExtent = [NaN, NaN];\n  } else if (dimension === 'value' && orderBy) {\n    dataExtent = [children[children.length - 1].getValue(), children[0].getValue()];\n    orderBy === 'asc' && dataExtent.reverse();\n  } // Other dimension.\n  else {\n    dataExtent = [Infinity, -Infinity];\n    each(children, function (child) {\n      var value = child.getValue(dimension);\n      value < dataExtent[0] && (dataExtent[0] = value);\n      value > dataExtent[1] && (dataExtent[1] = value);\n    });\n  }\n\n  return {\n    sum: sum,\n    dataExtent: dataExtent\n  };\n}\n/**\n * Computes the score for the specified row,\n * as the worst aspect ratio.\n */\n\n\nfunction worst(row, rowFixedLength, ratio) {\n  var areaMax = 0;\n  var areaMin = Infinity;\n\n  for (var i = 0, area = void 0, len = row.length; i < len; i++) {\n    area = row[i].getLayout().area;\n\n    if (area) {\n      area < areaMin && (areaMin = area);\n      area > areaMax && (areaMax = area);\n    }\n  }\n\n  var squareArea = row.area * row.area;\n  var f = rowFixedLength * rowFixedLength * ratio;\n  return squareArea ? mathMax(f * areaMax / squareArea, squareArea / (f * areaMin)) : Infinity;\n}\n/**\n * Positions the specified row of nodes. Modifies `rect`.\n */\n\n\nfunction position(row, rowFixedLength, rect, halfGapWidth, flush) {\n  // When rowFixedLength === rect.width,\n  // it is horizontal subdivision,\n  // rowFixedLength is the width of the subdivision,\n  // rowOtherLength is the height of the subdivision,\n  // and nodes will be positioned from left to right.\n  // wh[idx0WhenH] means: when horizontal,\n  //      wh[idx0WhenH] => wh[0] => 'width'.\n  //      xy[idx1WhenH] => xy[1] => 'y'.\n  var idx0WhenH = rowFixedLength === rect.width ? 0 : 1;\n  var idx1WhenH = 1 - idx0WhenH;\n  var xy = ['x', 'y'];\n  var wh = ['width', 'height'];\n  var last = rect[xy[idx0WhenH]];\n  var rowOtherLength = rowFixedLength ? row.area / rowFixedLength : 0;\n\n  if (flush || rowOtherLength > rect[wh[idx1WhenH]]) {\n    rowOtherLength = rect[wh[idx1WhenH]]; // over+underflow\n  }\n\n  for (var i = 0, rowLen = row.length; i < rowLen; i++) {\n    var node = row[i];\n    var nodeLayout = {};\n    var step = rowOtherLength ? node.getLayout().area / rowOtherLength : 0;\n    var wh1 = nodeLayout[wh[idx1WhenH]] = mathMax(rowOtherLength - 2 * halfGapWidth, 0); // We use Math.max/min to avoid negative width/height when considering gap width.\n\n    var remain = rect[xy[idx0WhenH]] + rect[wh[idx0WhenH]] - last;\n    var modWH = i === rowLen - 1 || remain < step ? remain : step;\n    var wh0 = nodeLayout[wh[idx0WhenH]] = mathMax(modWH - 2 * halfGapWidth, 0);\n    nodeLayout[xy[idx1WhenH]] = rect[xy[idx1WhenH]] + mathMin(halfGapWidth, wh1 / 2);\n    nodeLayout[xy[idx0WhenH]] = last + mathMin(halfGapWidth, wh0 / 2);\n    last += modWH;\n    node.setLayout(nodeLayout, true);\n  }\n\n  rect[xy[idx1WhenH]] += rowOtherLength;\n  rect[wh[idx1WhenH]] -= rowOtherLength;\n} // Return [containerWidth, containerHeight] as default.\n\n\nfunction estimateRootSize(seriesModel, targetInfo, viewRoot, containerWidth, containerHeight) {\n  // If targetInfo.node exists, we zoom to the node,\n  // so estimate whold width and heigth by target node.\n  var currNode = (targetInfo || {}).node;\n  var defaultSize = [containerWidth, containerHeight];\n\n  if (!currNode || currNode === viewRoot) {\n    return defaultSize;\n  }\n\n  var parent;\n  var viewArea = containerWidth * containerHeight;\n  var area = viewArea * seriesModel.option.zoomToNodeRatio;\n\n  while (parent = currNode.parentNode) {\n    // jshint ignore:line\n    var sum = 0;\n    var siblings = parent.children;\n\n    for (var i = 0, len = siblings.length; i < len; i++) {\n      sum += siblings[i].getValue();\n    }\n\n    var currNodeValue = currNode.getValue();\n\n    if (currNodeValue === 0) {\n      return defaultSize;\n    }\n\n    area *= sum / currNodeValue; // Considering border, suppose aspect ratio is 1.\n\n    var parentModel = parent.getModel();\n    var borderWidth = parentModel.get(PATH_BORDER_WIDTH);\n    var upperHeight = Math.max(borderWidth, getUpperLabelHeight(parentModel));\n    area += 4 * borderWidth * borderWidth + (3 * borderWidth + upperHeight) * Math.pow(area, 0.5);\n    area > MAX_SAFE_INTEGER && (area = MAX_SAFE_INTEGER);\n    currNode = parent;\n  }\n\n  area < viewArea && (area = viewArea);\n  var scale = Math.pow(area / viewArea, 0.5);\n  return [containerWidth * scale, containerHeight * scale];\n} // Root postion base on coord of containerGroup\n\n\nfunction calculateRootPosition(layoutInfo, rootRect, targetInfo) {\n  if (rootRect) {\n    return {\n      x: rootRect.x,\n      y: rootRect.y\n    };\n  }\n\n  var defaultPosition = {\n    x: 0,\n    y: 0\n  };\n\n  if (!targetInfo) {\n    return defaultPosition;\n  } // If targetInfo is fetched by 'retrieveTargetInfo',\n  // old tree and new tree are the same tree,\n  // so the node still exists and we can visit it.\n\n\n  var targetNode = targetInfo.node;\n  var layout = targetNode.getLayout();\n\n  if (!layout) {\n    return defaultPosition;\n  } // Transform coord from local to container.\n\n\n  var targetCenter = [layout.width / 2, layout.height / 2];\n  var node = targetNode;\n\n  while (node) {\n    var nodeLayout = node.getLayout();\n    targetCenter[0] += nodeLayout.x;\n    targetCenter[1] += nodeLayout.y;\n    node = node.parentNode;\n  }\n\n  return {\n    x: layoutInfo.width / 2 - targetCenter[0],\n    y: layoutInfo.height / 2 - targetCenter[1]\n  };\n} // Mark nodes visible for prunning when visual coding and rendering.\n// Prunning depends on layout and root position, so we have to do it after layout.\n\n\nfunction prunning(node, clipRect, viewAbovePath, viewRoot, depth) {\n  var nodeLayout = node.getLayout();\n  var nodeInViewAbovePath = viewAbovePath[depth];\n  var isAboveViewRoot = nodeInViewAbovePath && nodeInViewAbovePath === node;\n\n  if (nodeInViewAbovePath && !isAboveViewRoot || depth === viewAbovePath.length && node !== viewRoot) {\n    return;\n  }\n\n  node.setLayout({\n    // isInView means: viewRoot sub tree + viewAbovePath\n    isInView: true,\n    // invisible only means: outside view clip so that the node can not\n    // see but still layout for animation preparation but not render.\n    invisible: !isAboveViewRoot && !clipRect.intersect(nodeLayout),\n    isAboveViewRoot: isAboveViewRoot\n  }, true); // Transform to child coordinate.\n\n  var childClipRect = new BoundingRect(clipRect.x - nodeLayout.x, clipRect.y - nodeLayout.y, clipRect.width, clipRect.height);\n  each(node.viewChildren || [], function (child) {\n    prunning(child, childClipRect, viewAbovePath, viewRoot, depth + 1);\n  });\n}\n\nfunction getUpperLabelHeight(model) {\n  return model.get(PATH_UPPER_LABEL_SHOW) ? model.get(PATH_UPPER_LABEL_HEIGHT) : 0;\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport default function categoryFilter(ecModel) {\n  var legendModels = ecModel.findComponents({\n    mainType: 'legend'\n  });\n\n  if (!legendModels || !legendModels.length) {\n    return;\n  }\n\n  ecModel.eachSeriesByType('graph', function (graphSeries) {\n    var categoriesData = graphSeries.getCategoriesData();\n    var graph = graphSeries.getGraph();\n    var data = graph.data;\n    var categoryNames = categoriesData.mapArray(categoriesData.getName);\n    data.filterSelf(function (idx) {\n      var model = data.getItemModel(idx);\n      var category = model.getShallow('category');\n\n      if (category != null) {\n        if (typeof category === 'number') {\n          category = categoryNames[category];\n        } // If in any legend component the status is not selected.\n\n\n        for (var i = 0; i < legendModels.length; i++) {\n          if (!legendModels[i].isSelected(category)) {\n            return false;\n          }\n        }\n      }\n\n      return true;\n    });\n  });\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { extend } from 'zrender/lib/core/util';\nexport default function categoryVisual(ecModel) {\n  var paletteScope = {};\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    var categoriesData = seriesModel.getCategoriesData();\n    var data = seriesModel.getData();\n    var categoryNameIdxMap = {};\n    categoriesData.each(function (idx) {\n      var name = categoriesData.getName(idx); // Add prefix to avoid conflict with Object.prototype.\n\n      categoryNameIdxMap['ec-' + name] = idx;\n      var itemModel = categoriesData.getItemModel(idx);\n      var style = itemModel.getModel('itemStyle').getItemStyle();\n\n      if (!style.fill) {\n        // Get color from palette.\n        style.fill = seriesModel.getColorFromPalette(name, paletteScope);\n      }\n\n      categoriesData.setItemVisual(idx, 'style', style);\n      var symbolVisualList = ['symbol', 'symbolSize', 'symbolKeepAspect'];\n\n      for (var i = 0; i < symbolVisualList.length; i++) {\n        var symbolVisual = itemModel.getShallow(symbolVisualList[i], true);\n\n        if (symbolVisual != null) {\n          categoriesData.setItemVisual(idx, symbolVisualList[i], symbolVisual);\n        }\n      }\n    }); // Assign category color to visual\n\n    if (categoriesData.count()) {\n      data.each(function (idx) {\n        var model = data.getItemModel(idx);\n        var categoryIdx = model.getShallow('category');\n\n        if (categoryIdx != null) {\n          if (typeof categoryIdx === 'string') {\n            categoryIdx = categoryNameIdxMap['ec-' + categoryIdx];\n          }\n\n          var categoryStyle = categoriesData.getItemVisual(categoryIdx, 'style');\n          var style = data.ensureUniqueItemVisual(idx, 'style');\n          extend(style, categoryStyle);\n          var visualList = ['symbol', 'symbolSize', 'symbolKeepAspect'];\n\n          for (var i = 0; i < visualList.length; i++) {\n            data.setItemVisual(idx, visualList[i], categoriesData.getItemVisual(categoryIdx, visualList[i]));\n          }\n        }\n      });\n    }\n  });\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { extend } from 'zrender/lib/core/util';\n\nfunction normalize(a) {\n  if (!(a instanceof Array)) {\n    a = [a, a];\n  }\n\n  return a;\n}\n\nexport default function graphEdgeVisual(ecModel) {\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    var graph = seriesModel.getGraph();\n    var edgeData = seriesModel.getEdgeData();\n    var symbolType = normalize(seriesModel.get('edgeSymbol'));\n    var symbolSize = normalize(seriesModel.get('edgeSymbolSize')); // const colorQuery = ['lineStyle', 'color'] as const;\n    // const opacityQuery = ['lineStyle', 'opacity'] as const;\n\n    edgeData.setVisual('fromSymbol', symbolType && symbolType[0]);\n    edgeData.setVisual('toSymbol', symbolType && symbolType[1]);\n    edgeData.setVisual('fromSymbolSize', symbolSize && symbolSize[0]);\n    edgeData.setVisual('toSymbolSize', symbolSize && symbolSize[1]);\n    edgeData.setVisual('style', seriesModel.getModel('lineStyle').getLineStyle());\n    edgeData.each(function (idx) {\n      var itemModel = edgeData.getItemModel(idx);\n      var edge = graph.getEdgeByIndex(idx);\n      var symbolType = normalize(itemModel.getShallow('symbol', true));\n      var symbolSize = normalize(itemModel.getShallow('symbolSize', true)); // Edge visual must after node visual\n\n      var style = itemModel.getModel('lineStyle').getLineStyle();\n      var existsStyle = edgeData.ensureUniqueItemVisual(idx, 'style');\n      extend(existsStyle, style);\n\n      switch (existsStyle.stroke) {\n        case 'source':\n          {\n            var nodeStyle = edge.node1.getVisual('style');\n            existsStyle.stroke = nodeStyle && nodeStyle.fill;\n            break;\n          }\n\n        case 'target':\n          {\n            var nodeStyle = edge.node2.getVisual('style');\n            existsStyle.stroke = nodeStyle && nodeStyle.fill;\n            break;\n          }\n      }\n\n      symbolType[0] && edge.setVisual('fromSymbol', symbolType[0]);\n      symbolType[1] && edge.setVisual('toSymbol', symbolType[1]);\n      symbolSize[0] && edge.setVisual('fromSymbolSize', symbolSize[0]);\n      symbolSize[1] && edge.setVisual('toSymbolSize', symbolSize[1]);\n    });\n  });\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// @ts-nocheck\nimport * as zrUtil from 'zrender/lib/core/util';\nvar KEY_DELIMITER = '-->';\n/**\n * params handler\n * @param {module:echarts/model/SeriesModel} seriesModel\n * @returns {*}\n */\n\nvar getAutoCurvenessParams = function getAutoCurvenessParams(seriesModel) {\n  return seriesModel.get('autoCurveness') || null;\n};\n/**\n * Generate a list of edge curvatures, 20 is the default\n * @param {module:echarts/model/SeriesModel} seriesModel\n * @param {number} appendLength\n * @return  20 => [0, -0.2, 0.2, -0.4, 0.4, -0.6, 0.6, -0.8, 0.8, -1, 1, -1.2, 1.2, -1.4, 1.4, -1.6, 1.6, -1.8, 1.8, -2]\n */\n\n\nvar createCurveness = function createCurveness(seriesModel, appendLength) {\n  var autoCurvenessParmas = getAutoCurvenessParams(seriesModel);\n  var length = 20;\n  var curvenessList = []; // handler the function set\n\n  if (typeof autoCurvenessParmas === 'number') {\n    length = autoCurvenessParmas;\n  } else if (zrUtil.isArray(autoCurvenessParmas)) {\n    seriesModel.__curvenessList = autoCurvenessParmas;\n    return;\n  } // append length\n\n\n  if (appendLength > length) {\n    length = appendLength;\n  } // make sure the length is even\n\n\n  var len = length % 2 ? length + 2 : length + 3;\n  curvenessList = [];\n\n  for (var i = 0; i < len; i++) {\n    curvenessList.push((i % 2 ? i + 1 : i) / 10 * (i % 2 ? -1 : 1));\n  }\n\n  seriesModel.__curvenessList = curvenessList;\n};\n/**\n * Create different cache key data in the positive and negative directions, in order to set the curvature later\n * @param {number|string|module:echarts/data/Graph.Node} n1\n * @param {number|string|module:echarts/data/Graph.Node} n2\n * @param {module:echarts/model/SeriesModel} seriesModel\n * @returns {string} key\n */\n\n\nvar getKeyOfEdges = function getKeyOfEdges(n1, n2, seriesModel) {\n  var source = [n1.id, n1.dataIndex].join('.');\n  var target = [n2.id, n2.dataIndex].join('.');\n  return [seriesModel.uid, source, target].join(KEY_DELIMITER);\n};\n/**\n * get opposite key\n * @param {string} key\n * @returns {string}\n */\n\n\nvar getOppositeKey = function getOppositeKey(key) {\n  var keys = key.split(KEY_DELIMITER);\n  return [keys[0], keys[2], keys[1]].join(KEY_DELIMITER);\n};\n/**\n * get edgeMap with key\n * @param edge\n * @param {module:echarts/model/SeriesModel} seriesModel\n */\n\n\nvar getEdgeFromMap = function getEdgeFromMap(edge, seriesModel) {\n  var key = getKeyOfEdges(edge.node1, edge.node2, seriesModel);\n  return seriesModel.__edgeMap[key];\n};\n/**\n * calculate all cases total length\n * @param edge\n * @param seriesModel\n * @returns {number}\n */\n\n\nvar getTotalLengthBetweenNodes = function getTotalLengthBetweenNodes(edge, seriesModel) {\n  var len = getEdgeMapLengthWithKey(getKeyOfEdges(edge.node1, edge.node2, seriesModel), seriesModel);\n  var lenV = getEdgeMapLengthWithKey(getKeyOfEdges(edge.node2, edge.node1, seriesModel), seriesModel);\n  return len + lenV;\n};\n/**\n *\n * @param key\n */\n\n\nvar getEdgeMapLengthWithKey = function getEdgeMapLengthWithKey(key, seriesModel) {\n  var edgeMap = seriesModel.__edgeMap;\n  return edgeMap[key] ? edgeMap[key].length : 0;\n};\n/**\n * Count the number of edges between the same two points, used to obtain the curvature table and the parity of the edge\n * @see /graph/GraphSeries.js@getInitialData\n * @param {module:echarts/model/SeriesModel} seriesModel\n */\n\n\nexport function initCurvenessList(seriesModel) {\n  if (!getAutoCurvenessParams(seriesModel)) {\n    return;\n  }\n\n  seriesModel.__curvenessList = [];\n  seriesModel.__edgeMap = {}; // calc the array of curveness List\n\n  createCurveness(seriesModel);\n}\n/**\n * set edgeMap with key\n * @param {number|string|module:echarts/data/Graph.Node} n1\n * @param {number|string|module:echarts/data/Graph.Node} n2\n * @param {module:echarts/model/SeriesModel} seriesModel\n * @param {number} index\n */\n\nexport function createEdgeMapForCurveness(n1, n2, seriesModel, index) {\n  if (!getAutoCurvenessParams(seriesModel)) {\n    return;\n  }\n\n  var key = getKeyOfEdges(n1, n2, seriesModel);\n  var edgeMap = seriesModel.__edgeMap;\n  var oppositeEdges = edgeMap[getOppositeKey(key)]; // set direction\n\n  if (edgeMap[key] && !oppositeEdges) {\n    edgeMap[key].isForward = true;\n  } else if (oppositeEdges && edgeMap[key]) {\n    oppositeEdges.isForward = true;\n    edgeMap[key].isForward = false;\n  }\n\n  edgeMap[key] = edgeMap[key] || [];\n  edgeMap[key].push(index);\n}\n/**\n * get curvature for edge\n * @param edge\n * @param {module:echarts/model/SeriesModel} seriesModel\n * @param index\n */\n\nexport function getCurvenessForEdge(edge, seriesModel, index, needReverse) {\n  var autoCurvenessParams = getAutoCurvenessParams(seriesModel);\n  var isArrayParam = zrUtil.isArray(autoCurvenessParams);\n\n  if (!autoCurvenessParams) {\n    return null;\n  }\n\n  var edgeArray = getEdgeFromMap(edge, seriesModel);\n\n  if (!edgeArray) {\n    return null;\n  }\n\n  var edgeIndex = -1;\n\n  for (var i = 0; i < edgeArray.length; i++) {\n    if (edgeArray[i] === index) {\n      edgeIndex = i;\n      break;\n    }\n  } // if totalLen is Longer createCurveness\n\n\n  var totalLen = getTotalLengthBetweenNodes(edge, seriesModel);\n  createCurveness(seriesModel, totalLen);\n  edge.lineStyle = edge.lineStyle || {}; // if is opposite edge, must set curvenss to opposite number\n\n  var curKey = getKeyOfEdges(edge.node1, edge.node2, seriesModel);\n  var curvenessList = seriesModel.__curvenessList; // if pass array no need parity\n\n  var parityCorrection = isArrayParam ? 0 : totalLen % 2 ? 0 : 1;\n\n  if (!edgeArray.isForward) {\n    // the opposite edge show outside\n    var oppositeKey = getOppositeKey(curKey);\n    var len = getEdgeMapLengthWithKey(oppositeKey, seriesModel);\n    var resValue = curvenessList[edgeIndex + len + parityCorrection]; // isNeedReverse, simple, force type need reverse the curveness in the junction of the forword and the opposite\n\n    if (needReverse) {\n      // set as array may make the parity handle with the len of opposite\n      if (isArrayParam) {\n        if (autoCurvenessParams && autoCurvenessParams[0] === 0) {\n          return (len + parityCorrection) % 2 ? resValue : -resValue;\n        } else {\n          return ((len % 2 ? 0 : 1) + parityCorrection) % 2 ? resValue : -resValue;\n        }\n      } else {\n        return (len + parityCorrection) % 2 ? resValue : -resValue;\n      }\n    } else {\n      return curvenessList[edgeIndex + len + parityCorrection];\n    }\n  } else {\n    return curvenessList[parityCorrection + edgeIndex];\n  }\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as vec2 from 'zrender/lib/core/vector';\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { getCurvenessForEdge } from '../helper/multipleGraphEdgeHelper';\nexport function simpleLayout(seriesModel) {\n  var coordSys = seriesModel.coordinateSystem;\n\n  if (coordSys && coordSys.type !== 'view') {\n    return;\n  }\n\n  var graph = seriesModel.getGraph();\n  graph.eachNode(function (node) {\n    var model = node.getModel();\n    node.setLayout([+model.get('x'), +model.get('y')]);\n  });\n  simpleLayoutEdge(graph, seriesModel);\n}\nexport function simpleLayoutEdge(graph, seriesModel) {\n  graph.eachEdge(function (edge, index) {\n    var curveness = zrUtil.retrieve3(edge.getModel().get(['lineStyle', 'curveness']), -getCurvenessForEdge(edge, seriesModel, index, true), 0);\n    var p1 = vec2.clone(edge.node1.getLayout());\n    var p2 = vec2.clone(edge.node2.getLayout());\n    var points = [p1, p2];\n\n    if (+curveness) {\n      points.push([(p1[0] + p2[0]) / 2 - (p1[1] - p2[1]) * curveness, (p1[1] + p2[1]) / 2 - (p2[0] - p1[0]) * curveness]);\n    }\n\n    edge.setLayout(points);\n  });\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each } from 'zrender/lib/core/util';\nimport { simpleLayout, simpleLayoutEdge } from './simpleLayoutHelper';\nexport default function graphSimpleLayout(ecModel, api) {\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    var layout = seriesModel.get('layout');\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (coordSys && coordSys.type !== 'view') {\n      var data_1 = seriesModel.getData();\n      var dimensions_1 = [];\n      each(coordSys.dimensions, function (coordDim) {\n        dimensions_1 = dimensions_1.concat(data_1.mapDimensionsAll(coordDim));\n      });\n\n      for (var dataIndex = 0; dataIndex < data_1.count(); dataIndex++) {\n        var value = [];\n        var hasValue = false;\n\n        for (var i = 0; i < dimensions_1.length; i++) {\n          var val = data_1.get(dimensions_1[i], dataIndex);\n\n          if (!isNaN(val)) {\n            hasValue = true;\n          }\n\n          value.push(val);\n        }\n\n        if (hasValue) {\n          data_1.setItemLayout(dataIndex, coordSys.dataToPoint(value));\n        } else {\n          // Also {Array.<number>}, not undefined to avoid if...else... statement\n          data_1.setItemLayout(dataIndex, [NaN, NaN]);\n        }\n      }\n\n      simpleLayoutEdge(data_1.graph, seriesModel);\n    } else if (!layout || layout === 'none') {\n      simpleLayout(seriesModel);\n    }\n  });\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport function getNodeGlobalScale(seriesModel) {\n  var coordSys = seriesModel.coordinateSystem;\n\n  if (coordSys.type !== 'view') {\n    return 1;\n  }\n\n  var nodeScaleRatio = seriesModel.option.nodeScaleRatio;\n  var groupZoom = coordSys.scaleX; // Scale node when zoom changes\n\n  var roamZoom = coordSys.getZoom();\n  var nodeScale = (roamZoom - 1) * nodeScaleRatio + 1;\n  return nodeScale / groupZoom;\n}\nexport function getSymbolSize(node) {\n  var symbolSize = node.getVisual('symbolSize');\n\n  if (symbolSize instanceof Array) {\n    symbolSize = (symbolSize[0] + symbolSize[1]) / 2;\n  }\n\n  return +symbolSize;\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as vec2 from 'zrender/lib/core/vector';\nimport { getSymbolSize, getNodeGlobalScale } from './graphHelper';\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { getCurvenessForEdge } from '../helper/multipleGraphEdgeHelper';\nvar PI = Math.PI;\nvar _symbolRadiansHalf = [];\n/**\n * `basedOn` can be:\n * 'value':\n *     This layout is not accurate and have same bad case. For example,\n *     if the min value is very smaller than the max value, the nodes\n *     with the min value probably overlap even though there is enough\n *     space to layout them. So we only use this approach in the as the\n *     init layout of the force layout.\n *     FIXME\n *     Probably we do not need this method any more but use\n *     `basedOn: 'symbolSize'` in force layout if\n *     delay its init operations to GraphView.\n * 'symbolSize':\n *     This approach work only if all of the symbol size calculated.\n *     That is, the progressive rendering is not applied to graph.\n *     FIXME\n *     If progressive rendering is applied to graph some day,\n *     probably we have to use `basedOn: 'value'`.\n */\n\nexport function circularLayout(seriesModel, basedOn) {\n  var coordSys = seriesModel.coordinateSystem;\n\n  if (coordSys && coordSys.type !== 'view') {\n    return;\n  }\n\n  var rect = coordSys.getBoundingRect();\n  var nodeData = seriesModel.getData();\n  var graph = nodeData.graph;\n  var cx = rect.width / 2 + rect.x;\n  var cy = rect.height / 2 + rect.y;\n  var r = Math.min(rect.width, rect.height) / 2;\n  var count = nodeData.count();\n  nodeData.setLayout({\n    cx: cx,\n    cy: cy\n  });\n\n  if (!count) {\n    return;\n  }\n\n  _layoutNodesBasedOn[basedOn](seriesModel, graph, nodeData, r, cx, cy, count);\n\n  graph.eachEdge(function (edge, index) {\n    var curveness = zrUtil.retrieve3(edge.getModel().get(['lineStyle', 'curveness']), getCurvenessForEdge(edge, seriesModel, index), 0);\n    var p1 = vec2.clone(edge.node1.getLayout());\n    var p2 = vec2.clone(edge.node2.getLayout());\n    var cp1;\n    var x12 = (p1[0] + p2[0]) / 2;\n    var y12 = (p1[1] + p2[1]) / 2;\n\n    if (+curveness) {\n      curveness *= 3;\n      cp1 = [cx * curveness + x12 * (1 - curveness), cy * curveness + y12 * (1 - curveness)];\n    }\n\n    edge.setLayout([p1, p2, cp1]);\n  });\n}\nvar _layoutNodesBasedOn = {\n  value: function value(seriesModel, graph, nodeData, r, cx, cy, count) {\n    var angle = 0;\n    var sum = nodeData.getSum('value');\n    var unitAngle = Math.PI * 2 / (sum || count);\n    graph.eachNode(function (node) {\n      var value = node.getValue('value');\n      var radianHalf = unitAngle * (sum ? value : 1) / 2;\n      angle += radianHalf;\n      node.setLayout([r * Math.cos(angle) + cx, r * Math.sin(angle) + cy]);\n      angle += radianHalf;\n    });\n  },\n  symbolSize: function symbolSize(seriesModel, graph, nodeData, r, cx, cy, count) {\n    var sumRadian = 0;\n    _symbolRadiansHalf.length = count;\n    var nodeScale = getNodeGlobalScale(seriesModel);\n    graph.eachNode(function (node) {\n      var symbolSize = getSymbolSize(node); // Normally this case will not happen, but we still add\n      // some the defensive code (2px is an arbitrary value).\n\n      isNaN(symbolSize) && (symbolSize = 2);\n      symbolSize < 0 && (symbolSize = 0);\n      symbolSize *= nodeScale;\n      var symbolRadianHalf = Math.asin(symbolSize / 2 / r); // when `symbolSize / 2` is bigger than `r`.\n\n      isNaN(symbolRadianHalf) && (symbolRadianHalf = PI / 2);\n      _symbolRadiansHalf[node.dataIndex] = symbolRadianHalf;\n      sumRadian += symbolRadianHalf * 2;\n    });\n    var halfRemainRadian = (2 * PI - sumRadian) / count / 2;\n    var angle = 0;\n    graph.eachNode(function (node) {\n      var radianHalf = halfRemainRadian + _symbolRadiansHalf[node.dataIndex];\n      angle += radianHalf;\n      node.setLayout([r * Math.cos(angle) + cx, r * Math.sin(angle) + cy]);\n      angle += radianHalf;\n    });\n  }\n};","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { circularLayout } from './circularLayoutHelper';\nexport default function graphCircularLayout(ecModel) {\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    if (seriesModel.get('layout') === 'circular') {\n      circularLayout(seriesModel, 'symbolSize');\n    }\n  });\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* A third-party license is embeded for some of the code in this file:\n* Some formulas were originally copied from \"d3.js\" with some\n* modifications made for this project.\n* (See more details in the comment of the method \"step\" below.)\n* The use of the source code of this file is also subject to the terms\n* and consitions of the license of \"d3.js\" (BSD-3Clause, see\n* </licenses/LICENSE-d3>).\n*/\nimport * as vec2 from 'zrender/lib/core/vector';\nvar scaleAndAdd = vec2.scaleAndAdd; // function adjacentNode(n, e) {\n//     return e.n1 === n ? e.n2 : e.n1;\n// }\n\nexport function forceLayout(inNodes, inEdges, opts) {\n  var nodes = inNodes;\n  var edges = inEdges;\n  var rect = opts.rect;\n  var width = rect.width;\n  var height = rect.height;\n  var center = [rect.x + width / 2, rect.y + height / 2]; // let scale = opts.scale || 1;\n\n  var gravity = opts.gravity == null ? 0.1 : opts.gravity; // for (let i = 0; i < edges.length; i++) {\n  //     let e = edges[i];\n  //     let n1 = e.n1;\n  //     let n2 = e.n2;\n  //     n1.edges = n1.edges || [];\n  //     n2.edges = n2.edges || [];\n  //     n1.edges.push(e);\n  //     n2.edges.push(e);\n  // }\n  // Init position\n\n  for (var i = 0; i < nodes.length; i++) {\n    var n = nodes[i];\n\n    if (!n.p) {\n      n.p = vec2.create(width * (Math.random() - 0.5) + center[0], height * (Math.random() - 0.5) + center[1]);\n    }\n\n    n.pp = vec2.clone(n.p);\n    n.edges = null;\n  } // Formula in 'Graph Drawing by Force-directed Placement'\n  // let k = scale * Math.sqrt(width * height / nodes.length);\n  // let k2 = k * k;\n\n\n  var initialFriction = opts.friction == null ? 0.6 : opts.friction;\n  var friction = initialFriction;\n  var beforeStepCallback;\n  var afterStepCallback;\n  return {\n    warmUp: function warmUp() {\n      friction = initialFriction * 0.8;\n    },\n    setFixed: function setFixed(idx) {\n      nodes[idx].fixed = true;\n    },\n    setUnfixed: function setUnfixed(idx) {\n      nodes[idx].fixed = false;\n    },\n\n    /**\n     * Before step hook\n     */\n    beforeStep: function beforeStep(cb) {\n      beforeStepCallback = cb;\n    },\n\n    /**\n     * After step hook\n     */\n    afterStep: function afterStep(cb) {\n      afterStepCallback = cb;\n    },\n\n    /**\n     * Some formulas were originally copied from \"d3.js\"\n     * https://github.com/d3/d3/blob/b516d77fb8566b576088e73410437494717ada26/src/layout/force.js\n     * with some modifications made for this project.\n     * See the license statement at the head of this file.\n     */\n    step: function step(cb) {\n      beforeStepCallback && beforeStepCallback(nodes, edges);\n      var v12 = [];\n      var nLen = nodes.length;\n\n      for (var i = 0; i < edges.length; i++) {\n        var e = edges[i];\n\n        if (e.ignoreForceLayout) {\n          continue;\n        }\n\n        var n1 = e.n1;\n        var n2 = e.n2;\n        vec2.sub(v12, n2.p, n1.p);\n        var d = vec2.len(v12) - e.d;\n        var w = n2.w / (n1.w + n2.w);\n\n        if (isNaN(w)) {\n          w = 0;\n        }\n\n        vec2.normalize(v12, v12);\n        !n1.fixed && scaleAndAdd(n1.p, n1.p, v12, w * d * friction);\n        !n2.fixed && scaleAndAdd(n2.p, n2.p, v12, -(1 - w) * d * friction);\n      } // Gravity\n\n\n      for (var i = 0; i < nLen; i++) {\n        var n = nodes[i];\n\n        if (!n.fixed) {\n          vec2.sub(v12, center, n.p); // let d = vec2.len(v12);\n          // vec2.scale(v12, v12, 1 / d);\n          // let gravityFactor = gravity;\n\n          scaleAndAdd(n.p, n.p, v12, gravity * friction);\n        }\n      } // Repulsive\n      // PENDING\n\n\n      for (var i = 0; i < nLen; i++) {\n        var n1 = nodes[i];\n\n        for (var j = i + 1; j < nLen; j++) {\n          var n2 = nodes[j];\n          vec2.sub(v12, n2.p, n1.p);\n          var d = vec2.len(v12);\n\n          if (d === 0) {\n            // Random repulse\n            vec2.set(v12, Math.random() - 0.5, Math.random() - 0.5);\n            d = 1;\n          }\n\n          var repFact = (n1.rep + n2.rep) / d / d;\n          !n1.fixed && scaleAndAdd(n1.pp, n1.pp, v12, repFact);\n          !n2.fixed && scaleAndAdd(n2.pp, n2.pp, v12, -repFact);\n        }\n      }\n\n      var v = [];\n\n      for (var i = 0; i < nLen; i++) {\n        var n = nodes[i];\n\n        if (!n.fixed) {\n          vec2.sub(v, n.p, n.pp);\n          scaleAndAdd(n.p, n.p, v, friction);\n          vec2.copy(n.pp, n.p);\n        }\n      }\n\n      friction = friction * 0.992;\n      var finished = friction < 0.01;\n      afterStepCallback && afterStepCallback(nodes, edges, finished);\n      cb && cb(finished);\n    }\n  };\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { forceLayout } from './forceHelper';\nimport { simpleLayout } from './simpleLayoutHelper';\nimport { circularLayout } from './circularLayoutHelper';\nimport { linearMap } from '../../util/number';\nimport * as vec2 from 'zrender/lib/core/vector';\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { getCurvenessForEdge } from '../helper/multipleGraphEdgeHelper';\nexport default function graphForceLayout(ecModel) {\n  ecModel.eachSeriesByType('graph', function (graphSeries) {\n    var coordSys = graphSeries.coordinateSystem;\n\n    if (coordSys && coordSys.type !== 'view') {\n      return;\n    }\n\n    if (graphSeries.get('layout') === 'force') {\n      var preservedPoints_1 = graphSeries.preservedPoints || {};\n      var graph_1 = graphSeries.getGraph();\n      var nodeData_1 = graph_1.data;\n      var edgeData = graph_1.edgeData;\n      var forceModel = graphSeries.getModel('force');\n      var initLayout = forceModel.get('initLayout');\n\n      if (graphSeries.preservedPoints) {\n        nodeData_1.each(function (idx) {\n          var id = nodeData_1.getId(idx);\n          nodeData_1.setItemLayout(idx, preservedPoints_1[id] || [NaN, NaN]);\n        });\n      } else if (!initLayout || initLayout === 'none') {\n        simpleLayout(graphSeries);\n      } else if (initLayout === 'circular') {\n        circularLayout(graphSeries, 'value');\n      }\n\n      var nodeDataExtent_1 = nodeData_1.getDataExtent('value');\n      var edgeDataExtent_1 = edgeData.getDataExtent('value'); // let edgeDataExtent = edgeData.getDataExtent('value');\n\n      var repulsion = forceModel.get('repulsion');\n      var edgeLength = forceModel.get('edgeLength');\n      var repulsionArr_1 = zrUtil.isArray(repulsion) ? repulsion : [repulsion, repulsion];\n      var edgeLengthArr_1 = zrUtil.isArray(edgeLength) ? edgeLength : [edgeLength, edgeLength]; // Larger value has smaller length\n\n      edgeLengthArr_1 = [edgeLengthArr_1[1], edgeLengthArr_1[0]];\n      var nodes_1 = nodeData_1.mapArray('value', function (value, idx) {\n        var point = nodeData_1.getItemLayout(idx);\n        var rep = linearMap(value, nodeDataExtent_1, repulsionArr_1);\n\n        if (isNaN(rep)) {\n          rep = (repulsionArr_1[0] + repulsionArr_1[1]) / 2;\n        }\n\n        return {\n          w: rep,\n          rep: rep,\n          fixed: nodeData_1.getItemModel(idx).get('fixed'),\n          p: !point || isNaN(point[0]) || isNaN(point[1]) ? null : point\n        };\n      });\n      var edges = edgeData.mapArray('value', function (value, idx) {\n        var edge = graph_1.getEdgeByIndex(idx);\n        var d = linearMap(value, edgeDataExtent_1, edgeLengthArr_1);\n\n        if (isNaN(d)) {\n          d = (edgeLengthArr_1[0] + edgeLengthArr_1[1]) / 2;\n        }\n\n        var edgeModel = edge.getModel();\n        var curveness = zrUtil.retrieve3(edge.getModel().get(['lineStyle', 'curveness']), -getCurvenessForEdge(edge, graphSeries, idx, true), 0);\n        return {\n          n1: nodes_1[edge.node1.dataIndex],\n          n2: nodes_1[edge.node2.dataIndex],\n          d: d,\n          curveness: curveness,\n          ignoreForceLayout: edgeModel.get('ignoreForceLayout')\n        };\n      }); // let coordSys = graphSeries.coordinateSystem;\n\n      var rect = coordSys.getBoundingRect();\n      var forceInstance = forceLayout(nodes_1, edges, {\n        rect: rect,\n        gravity: forceModel.get('gravity'),\n        friction: forceModel.get('friction')\n      });\n      forceInstance.beforeStep(function (nodes, edges) {\n        for (var i = 0, l = nodes.length; i < l; i++) {\n          if (nodes[i].fixed) {\n            // Write back to layout instance\n            vec2.copy(nodes[i].p, graph_1.getNodeByIndex(i).getLayout());\n          }\n        }\n      });\n      forceInstance.afterStep(function (nodes, edges, stopped) {\n        for (var i = 0, l = nodes.length; i < l; i++) {\n          if (!nodes[i].fixed) {\n            graph_1.getNodeByIndex(i).setLayout(nodes[i].p);\n          }\n\n          preservedPoints_1[nodeData_1.getId(i)] = nodes[i].p;\n        }\n\n        for (var i = 0, l = edges.length; i < l; i++) {\n          var e = edges[i];\n          var edge = graph_1.getEdgeByIndex(i);\n          var p1 = e.n1.p;\n          var p2 = e.n2.p;\n          var points = edge.getLayout();\n          points = points ? points.slice() : [];\n          points[0] = points[0] || [];\n          points[1] = points[1] || [];\n          vec2.copy(points[0], p1);\n          vec2.copy(points[1], p2);\n\n          if (+e.curveness) {\n            points[2] = [(p1[0] + p2[0]) / 2 - (p1[1] - p2[1]) * e.curveness, (p1[1] + p2[1]) / 2 - (p2[0] - p1[0]) * e.curveness];\n          }\n\n          edge.setLayout(points);\n        }\n      });\n      graphSeries.forceLayout = forceInstance;\n      graphSeries.preservedPoints = preservedPoints_1; // Step to get the layout\n\n      forceInstance.step();\n    } else {\n      // Remove prev injected forceLayout instance\n      graphSeries.forceLayout = null;\n    }\n  });\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// FIXME Where to create the simple view coordinate system\nimport View from '../../coord/View';\nimport { getLayoutRect } from '../../util/layout';\nimport * as bbox from 'zrender/lib/core/bbox';\nimport { extend } from 'zrender/lib/core/util';\n\nfunction getViewRect(seriesModel, api, aspect) {\n  var option = extend(seriesModel.getBoxLayoutParams(), {\n    aspect: aspect\n  });\n  return getLayoutRect(option, {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n}\n\nexport default function createViewCoordSys(ecModel, api) {\n  var viewList = [];\n  ecModel.eachSeriesByType('graph', function (seriesModel) {\n    var coordSysType = seriesModel.get('coordinateSystem');\n\n    if (!coordSysType || coordSysType === 'view') {\n      var data_1 = seriesModel.getData();\n      var positions = data_1.mapArray(function (idx) {\n        var itemModel = data_1.getItemModel(idx);\n        return [+itemModel.get('x'), +itemModel.get('y')];\n      });\n      var min = [];\n      var max = [];\n      bbox.fromPoints(positions, min, max); // If width or height is 0\n\n      if (max[0] - min[0] === 0) {\n        max[0] += 1;\n        min[0] -= 1;\n      }\n\n      if (max[1] - min[1] === 0) {\n        max[1] += 1;\n        min[1] -= 1;\n      }\n\n      var aspect = (max[0] - min[0]) / (max[1] - min[1]); // FIXME If get view rect after data processed?\n\n      var viewRect = getViewRect(seriesModel, api, aspect); // Position may be NaN, use view rect instead\n\n      if (isNaN(aspect)) {\n        min = [viewRect.x, viewRect.y];\n        max = [viewRect.x + viewRect.width, viewRect.y + viewRect.height];\n      }\n\n      var bbWidth = max[0] - min[0];\n      var bbHeight = max[1] - min[1];\n      var viewWidth = viewRect.width;\n      var viewHeight = viewRect.height;\n      var viewCoordSys = seriesModel.coordinateSystem = new View();\n      viewCoordSys.zoomLimit = seriesModel.get('scaleLimit');\n      viewCoordSys.setBoundingRect(min[0], min[1], bbWidth, bbHeight);\n      viewCoordSys.setViewRect(viewRect.x, viewRect.y, viewWidth, viewHeight); // Update roam info\n\n      viewCoordSys.setCenter(seriesModel.get('center'));\n      viewCoordSys.setZoom(seriesModel.get('zoom'));\n      viewList.push(viewCoordSys);\n    }\n  });\n  return viewList;\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/**\n * Line path for bezier and straight line draw\n */\n\nimport * as graphic from '../../util/graphic';\nimport * as vec2 from 'zrender/lib/core/vector';\nvar straightLineProto = graphic.Line.prototype;\nvar bezierCurveProto = graphic.BezierCurve.prototype;\n\nvar StraightLineShape =\n/** @class */\nfunction () {\n  function StraightLineShape() {\n    // Start point\n    this.x1 = 0;\n    this.y1 = 0; // End point\n\n    this.x2 = 0;\n    this.y2 = 0;\n    this.percent = 1;\n  }\n\n  return StraightLineShape;\n}();\n\nvar CurveShape =\n/** @class */\nfunction (_super) {\n  __extends(CurveShape, _super);\n\n  function CurveShape() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  return CurveShape;\n}(StraightLineShape);\n\nfunction isStraightLine(shape) {\n  return isNaN(+shape.cpx1) || isNaN(+shape.cpy1);\n}\n\nvar ECLinePath =\n/** @class */\nfunction (_super) {\n  __extends(ECLinePath, _super);\n\n  function ECLinePath(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'ec-line';\n    return _this;\n  }\n\n  ECLinePath.prototype.getDefaultStyle = function () {\n    return {\n      stroke: '#000',\n      fill: null\n    };\n  };\n\n  ECLinePath.prototype.getDefaultShape = function () {\n    return new StraightLineShape();\n  };\n\n  ECLinePath.prototype.buildPath = function (ctx, shape) {\n    if (isStraightLine(shape)) {\n      straightLineProto.buildPath.call(this, ctx, shape);\n    } else {\n      bezierCurveProto.buildPath.call(this, ctx, shape);\n    }\n  };\n\n  ECLinePath.prototype.pointAt = function (t) {\n    if (isStraightLine(this.shape)) {\n      return straightLineProto.pointAt.call(this, t);\n    } else {\n      return bezierCurveProto.pointAt.call(this, t);\n    }\n  };\n\n  ECLinePath.prototype.tangentAt = function (t) {\n    var shape = this.shape;\n    var p = isStraightLine(shape) ? [shape.x2 - shape.x1, shape.y2 - shape.y1] : bezierCurveProto.tangentAt.call(this, t);\n    return vec2.normalize(p, p);\n  };\n\n  return ECLinePath;\n}(graphic.Path);\n\nexport default ECLinePath;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { isArray, each } from 'zrender/lib/core/util';\nimport * as vector from 'zrender/lib/core/vector';\nimport * as symbolUtil from '../../util/symbol';\nimport ECLinePath from './LinePath';\nimport * as graphic from '../../util/graphic';\nimport { enableHoverEmphasis, enterEmphasis, leaveEmphasis, SPECIAL_STATES } from '../../util/states';\nimport { getLabelStatesModels, setLabelStyle } from '../../label/labelStyle';\nimport { round } from '../../util/number';\nvar SYMBOL_CATEGORIES = ['fromSymbol', 'toSymbol'];\n\nfunction makeSymbolTypeKey(symbolCategory) {\n  return '_' + symbolCategory + 'Type';\n}\n/**\n * @inner\n */\n\n\nfunction createSymbol(name, lineData, idx) {\n  var symbolType = lineData.getItemVisual(idx, name);\n\n  if (!symbolType || symbolType === 'none') {\n    return;\n  }\n\n  var symbolSize = lineData.getItemVisual(idx, name + 'Size');\n  var symbolRotate = lineData.getItemVisual(idx, name + 'Rotate');\n  var symbolOffset = lineData.getItemVisual(idx, name + 'Offset');\n  var symbolKeepAspect = lineData.getItemVisual(idx, name + 'KeepAspect');\n  var symbolSizeArr = symbolUtil.normalizeSymbolSize(symbolSize);\n  var symbolOffsetArr = symbolUtil.normalizeSymbolOffset(symbolOffset || 0, symbolSizeArr);\n  var symbolPath = symbolUtil.createSymbol(symbolType, -symbolSizeArr[0] / 2 + symbolOffsetArr[0], -symbolSizeArr[1] / 2 + symbolOffsetArr[1], symbolSizeArr[0], symbolSizeArr[1], null, symbolKeepAspect);\n  symbolPath.__specifiedRotation = symbolRotate == null || isNaN(symbolRotate) ? void 0 : +symbolRotate * Math.PI / 180 || 0;\n  symbolPath.name = name;\n  return symbolPath;\n}\n\nfunction createLine(points) {\n  var line = new ECLinePath({\n    name: 'line',\n    subPixelOptimize: true\n  });\n  setLinePoints(line.shape, points);\n  return line;\n}\n\nfunction setLinePoints(targetShape, points) {\n  targetShape.x1 = points[0][0];\n  targetShape.y1 = points[0][1];\n  targetShape.x2 = points[1][0];\n  targetShape.y2 = points[1][1];\n  targetShape.percent = 1;\n  var cp1 = points[2];\n\n  if (cp1) {\n    targetShape.cpx1 = cp1[0];\n    targetShape.cpy1 = cp1[1];\n  } else {\n    targetShape.cpx1 = NaN;\n    targetShape.cpy1 = NaN;\n  }\n}\n\nvar Line =\n/** @class */\nfunction (_super) {\n  __extends(Line, _super);\n\n  function Line(lineData, idx, seriesScope) {\n    var _this = _super.call(this) || this;\n\n    _this._createLine(lineData, idx, seriesScope);\n\n    return _this;\n  }\n\n  Line.prototype._createLine = function (lineData, idx, seriesScope) {\n    var seriesModel = lineData.hostModel;\n    var linePoints = lineData.getItemLayout(idx);\n    var line = createLine(linePoints);\n    line.shape.percent = 0;\n    graphic.initProps(line, {\n      shape: {\n        percent: 1\n      }\n    }, seriesModel, idx);\n    this.add(line);\n    each(SYMBOL_CATEGORIES, function (symbolCategory) {\n      var symbol = createSymbol(symbolCategory, lineData, idx); // symbols must added after line to make sure\n      // it will be updated after line#update.\n      // Or symbol position and rotation update in line#beforeUpdate will be one frame slow\n\n      this.add(symbol);\n      this[makeSymbolTypeKey(symbolCategory)] = lineData.getItemVisual(idx, symbolCategory);\n    }, this);\n\n    this._updateCommonStl(lineData, idx, seriesScope);\n  }; // TODO More strict on the List type in parameters?\n\n\n  Line.prototype.updateData = function (lineData, idx, seriesScope) {\n    var seriesModel = lineData.hostModel;\n    var line = this.childOfName('line');\n    var linePoints = lineData.getItemLayout(idx);\n    var target = {\n      shape: {}\n    };\n    setLinePoints(target.shape, linePoints);\n    graphic.updateProps(line, target, seriesModel, idx);\n    each(SYMBOL_CATEGORIES, function (symbolCategory) {\n      var symbolType = lineData.getItemVisual(idx, symbolCategory);\n      var key = makeSymbolTypeKey(symbolCategory); // Symbol changed\n\n      if (this[key] !== symbolType) {\n        this.remove(this.childOfName(symbolCategory));\n        var symbol = createSymbol(symbolCategory, lineData, idx);\n        this.add(symbol);\n      }\n\n      this[key] = symbolType;\n    }, this);\n\n    this._updateCommonStl(lineData, idx, seriesScope);\n  };\n\n  ;\n\n  Line.prototype.getLinePath = function () {\n    return this.childAt(0);\n  };\n\n  Line.prototype._updateCommonStl = function (lineData, idx, seriesScope) {\n    var seriesModel = lineData.hostModel;\n    var line = this.childOfName('line');\n    var emphasisLineStyle = seriesScope && seriesScope.emphasisLineStyle;\n    var blurLineStyle = seriesScope && seriesScope.blurLineStyle;\n    var selectLineStyle = seriesScope && seriesScope.selectLineStyle;\n    var labelStatesModels = seriesScope && seriesScope.labelStatesModels; // Optimization for large dataset\n\n    if (!seriesScope || lineData.hasItemOption) {\n      var itemModel = lineData.getItemModel(idx);\n      emphasisLineStyle = itemModel.getModel(['emphasis', 'lineStyle']).getLineStyle();\n      blurLineStyle = itemModel.getModel(['blur', 'lineStyle']).getLineStyle();\n      selectLineStyle = itemModel.getModel(['select', 'lineStyle']).getLineStyle();\n      labelStatesModels = getLabelStatesModels(itemModel);\n    }\n\n    var lineStyle = lineData.getItemVisual(idx, 'style');\n    var visualColor = lineStyle.stroke;\n    line.useStyle(lineStyle);\n    line.style.fill = null;\n    line.style.strokeNoScale = true;\n    line.ensureState('emphasis').style = emphasisLineStyle;\n    line.ensureState('blur').style = blurLineStyle;\n    line.ensureState('select').style = selectLineStyle; // Update symbol\n\n    each(SYMBOL_CATEGORIES, function (symbolCategory) {\n      var symbol = this.childOfName(symbolCategory);\n\n      if (symbol) {\n        // Share opacity and color with line.\n        symbol.setColor(visualColor);\n        symbol.style.opacity = lineStyle.opacity;\n\n        for (var i = 0; i < SPECIAL_STATES.length; i++) {\n          var stateName = SPECIAL_STATES[i];\n          var lineState = line.getState(stateName);\n\n          if (lineState) {\n            var lineStateStyle = lineState.style || {};\n            var state = symbol.ensureState(stateName);\n            var stateStyle = state.style || (state.style = {});\n\n            if (lineStateStyle.stroke != null) {\n              stateStyle[symbol.__isEmptyBrush ? 'stroke' : 'fill'] = lineStateStyle.stroke;\n            }\n\n            if (lineStateStyle.opacity != null) {\n              stateStyle.opacity = lineStateStyle.opacity;\n            }\n          }\n        }\n\n        symbol.markRedraw();\n      }\n    }, this);\n    var rawVal = seriesModel.getRawValue(idx);\n    setLabelStyle(this, labelStatesModels, {\n      labelDataIndex: idx,\n      labelFetcher: {\n        getFormattedLabel: function getFormattedLabel(dataIndex, stateName) {\n          return seriesModel.getFormattedLabel(dataIndex, stateName, lineData.dataType);\n        }\n      },\n      inheritColor: visualColor || '#000',\n      defaultOpacity: lineStyle.opacity,\n      defaultText: (rawVal == null ? lineData.getName(idx) : isFinite(rawVal) ? round(rawVal) : rawVal) + ''\n    });\n    var label = this.getTextContent(); // Always set `textStyle` even if `normalStyle.text` is null, because default\n    // values have to be set on `normalStyle`.\n\n    if (label) {\n      var labelNormalModel = labelStatesModels.normal;\n      label.__align = label.style.align;\n      label.__verticalAlign = label.style.verticalAlign; // 'start', 'middle', 'end'\n\n      label.__position = labelNormalModel.get('position') || 'middle';\n      var distance = labelNormalModel.get('distance');\n\n      if (!isArray(distance)) {\n        distance = [distance, distance];\n      }\n\n      label.__labelDistance = distance;\n    }\n\n    this.setTextConfig({\n      position: null,\n      local: true,\n      inside: false // Can't be inside for stroke element.\n\n    });\n    enableHoverEmphasis(this);\n  };\n\n  Line.prototype.highlight = function () {\n    enterEmphasis(this);\n  };\n\n  Line.prototype.downplay = function () {\n    leaveEmphasis(this);\n  };\n\n  Line.prototype.updateLayout = function (lineData, idx) {\n    this.setLinePoints(lineData.getItemLayout(idx));\n  };\n\n  Line.prototype.setLinePoints = function (points) {\n    var linePath = this.childOfName('line');\n    setLinePoints(linePath.shape, points);\n    linePath.dirty();\n  };\n\n  Line.prototype.beforeUpdate = function () {\n    var lineGroup = this;\n    var symbolFrom = lineGroup.childOfName('fromSymbol');\n    var symbolTo = lineGroup.childOfName('toSymbol');\n    var label = lineGroup.getTextContent(); // Quick reject\n\n    if (!symbolFrom && !symbolTo && (!label || label.ignore)) {\n      return;\n    }\n\n    var invScale = 1;\n    var parentNode = this.parent;\n\n    while (parentNode) {\n      if (parentNode.scaleX) {\n        invScale /= parentNode.scaleX;\n      }\n\n      parentNode = parentNode.parent;\n    }\n\n    var line = lineGroup.childOfName('line'); // If line not changed\n    // FIXME Parent scale changed\n\n    if (!this.__dirty && !line.__dirty) {\n      return;\n    }\n\n    var percent = line.shape.percent;\n    var fromPos = line.pointAt(0);\n    var toPos = line.pointAt(percent);\n    var d = vector.sub([], toPos, fromPos);\n    vector.normalize(d, d);\n\n    function setSymbolRotation(symbol, percent) {\n      // Fix #12388\n      // when symbol is set to be 'arrow' in markLine,\n      // symbolRotate value will be ignored, and compulsively use tangent angle.\n      // rotate by default if symbol rotation is not specified\n      var specifiedRotation = symbol.__specifiedRotation;\n\n      if (specifiedRotation == null) {\n        var tangent = line.tangentAt(percent);\n        symbol.attr('rotation', (percent === 1 ? -1 : 1) * Math.PI / 2 - Math.atan2(tangent[1], tangent[0]));\n      } else {\n        symbol.attr('rotation', specifiedRotation);\n      }\n    }\n\n    if (symbolFrom) {\n      symbolFrom.setPosition(fromPos);\n      setSymbolRotation(symbolFrom, 0);\n      symbolFrom.scaleX = symbolFrom.scaleY = invScale * percent;\n      symbolFrom.markRedraw();\n    }\n\n    if (symbolTo) {\n      symbolTo.setPosition(toPos);\n      setSymbolRotation(symbolTo, 1);\n      symbolTo.scaleX = symbolTo.scaleY = invScale * percent;\n      symbolTo.markRedraw();\n    }\n\n    if (label && !label.ignore) {\n      label.x = label.y = 0;\n      label.originX = label.originY = 0;\n      var textAlign = void 0;\n      var textVerticalAlign = void 0;\n      var distance = label.__labelDistance;\n      var distanceX = distance[0] * invScale;\n      var distanceY = distance[1] * invScale;\n      var halfPercent = percent / 2;\n      var tangent = line.tangentAt(halfPercent);\n      var n = [tangent[1], -tangent[0]];\n      var cp = line.pointAt(halfPercent);\n\n      if (n[1] > 0) {\n        n[0] = -n[0];\n        n[1] = -n[1];\n      }\n\n      var dir = tangent[0] < 0 ? -1 : 1;\n\n      if (label.__position !== 'start' && label.__position !== 'end') {\n        var rotation = -Math.atan2(tangent[1], tangent[0]);\n\n        if (toPos[0] < fromPos[0]) {\n          rotation = Math.PI + rotation;\n        }\n\n        label.rotation = rotation;\n      }\n\n      var dy = void 0;\n\n      switch (label.__position) {\n        case 'insideStartTop':\n        case 'insideMiddleTop':\n        case 'insideEndTop':\n        case 'middle':\n          dy = -distanceY;\n          textVerticalAlign = 'bottom';\n          break;\n\n        case 'insideStartBottom':\n        case 'insideMiddleBottom':\n        case 'insideEndBottom':\n          dy = distanceY;\n          textVerticalAlign = 'top';\n          break;\n\n        default:\n          dy = 0;\n          textVerticalAlign = 'middle';\n      }\n\n      switch (label.__position) {\n        case 'end':\n          label.x = d[0] * distanceX + toPos[0];\n          label.y = d[1] * distanceY + toPos[1];\n          textAlign = d[0] > 0.8 ? 'left' : d[0] < -0.8 ? 'right' : 'center';\n          textVerticalAlign = d[1] > 0.8 ? 'top' : d[1] < -0.8 ? 'bottom' : 'middle';\n          break;\n\n        case 'start':\n          label.x = -d[0] * distanceX + fromPos[0];\n          label.y = -d[1] * distanceY + fromPos[1];\n          textAlign = d[0] > 0.8 ? 'right' : d[0] < -0.8 ? 'left' : 'center';\n          textVerticalAlign = d[1] > 0.8 ? 'bottom' : d[1] < -0.8 ? 'top' : 'middle';\n          break;\n\n        case 'insideStartTop':\n        case 'insideStart':\n        case 'insideStartBottom':\n          label.x = distanceX * dir + fromPos[0];\n          label.y = fromPos[1] + dy;\n          textAlign = tangent[0] < 0 ? 'right' : 'left';\n          label.originX = -distanceX * dir;\n          label.originY = -dy;\n          break;\n\n        case 'insideMiddleTop':\n        case 'insideMiddle':\n        case 'insideMiddleBottom':\n        case 'middle':\n          label.x = cp[0];\n          label.y = cp[1] + dy;\n          textAlign = 'center';\n          label.originY = -dy;\n          break;\n\n        case 'insideEndTop':\n        case 'insideEnd':\n        case 'insideEndBottom':\n          label.x = -distanceX * dir + toPos[0];\n          label.y = toPos[1] + dy;\n          textAlign = tangent[0] >= 0 ? 'right' : 'left';\n          label.originX = distanceX * dir;\n          label.originY = -dy;\n          break;\n      }\n\n      label.scaleX = label.scaleY = invScale;\n      label.setStyle({\n        // Use the user specified text align and baseline first\n        verticalAlign: label.__verticalAlign || textVerticalAlign,\n        align: label.__align || textAlign\n      });\n    }\n  };\n\n  return Line;\n}(graphic.Group);\n\nexport default Line;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as graphic from '../../util/graphic';\nimport LineGroup from './Line';\nimport { getLabelStatesModels } from '../../label/labelStyle';\n\nvar LineDraw =\n/** @class */\nfunction () {\n  function LineDraw(LineCtor) {\n    this.group = new graphic.Group();\n    this._LineCtor = LineCtor || LineGroup;\n  }\n\n  LineDraw.prototype.isPersistent = function () {\n    return true;\n  };\n\n  ;\n\n  LineDraw.prototype.updateData = function (lineData) {\n    var _this = this;\n\n    var lineDraw = this;\n    var group = lineDraw.group;\n    var oldLineData = lineDraw._lineData;\n    lineDraw._lineData = lineData; // There is no oldLineData only when first rendering or switching from\n    // stream mode to normal mode, where previous elements should be removed.\n\n    if (!oldLineData) {\n      group.removeAll();\n    }\n\n    var seriesScope = makeSeriesScope(lineData);\n    lineData.diff(oldLineData).add(function (idx) {\n      _this._doAdd(lineData, idx, seriesScope);\n    }).update(function (newIdx, oldIdx) {\n      _this._doUpdate(oldLineData, lineData, oldIdx, newIdx, seriesScope);\n    }).remove(function (idx) {\n      group.remove(oldLineData.getItemGraphicEl(idx));\n    }).execute();\n  };\n\n  ;\n\n  LineDraw.prototype.updateLayout = function () {\n    var lineData = this._lineData; // Do not support update layout in incremental mode.\n\n    if (!lineData) {\n      return;\n    }\n\n    lineData.eachItemGraphicEl(function (el, idx) {\n      el.updateLayout(lineData, idx);\n    }, this);\n  };\n\n  ;\n\n  LineDraw.prototype.incrementalPrepareUpdate = function (lineData) {\n    this._seriesScope = makeSeriesScope(lineData);\n    this._lineData = null;\n    this.group.removeAll();\n  };\n\n  ;\n\n  LineDraw.prototype.incrementalUpdate = function (taskParams, lineData) {\n    function updateIncrementalAndHover(el) {\n      if (!el.isGroup && !isEffectObject(el)) {\n        el.incremental = true;\n        el.ensureState('emphasis').hoverLayer = true;\n      }\n    }\n\n    for (var idx = taskParams.start; idx < taskParams.end; idx++) {\n      var itemLayout = lineData.getItemLayout(idx);\n\n      if (lineNeedsDraw(itemLayout)) {\n        var el = new this._LineCtor(lineData, idx, this._seriesScope);\n        el.traverse(updateIncrementalAndHover);\n        this.group.add(el);\n        lineData.setItemGraphicEl(idx, el);\n      }\n    }\n  };\n\n  ;\n\n  LineDraw.prototype.remove = function () {\n    this.group.removeAll();\n  };\n\n  ;\n\n  LineDraw.prototype._doAdd = function (lineData, idx, seriesScope) {\n    var itemLayout = lineData.getItemLayout(idx);\n\n    if (!lineNeedsDraw(itemLayout)) {\n      return;\n    }\n\n    var el = new this._LineCtor(lineData, idx, seriesScope);\n    lineData.setItemGraphicEl(idx, el);\n    this.group.add(el);\n  };\n\n  LineDraw.prototype._doUpdate = function (oldLineData, newLineData, oldIdx, newIdx, seriesScope) {\n    var itemEl = oldLineData.getItemGraphicEl(oldIdx);\n\n    if (!lineNeedsDraw(newLineData.getItemLayout(newIdx))) {\n      this.group.remove(itemEl);\n      return;\n    }\n\n    if (!itemEl) {\n      itemEl = new this._LineCtor(newLineData, newIdx, seriesScope);\n    } else {\n      itemEl.updateData(newLineData, newIdx, seriesScope);\n    }\n\n    newLineData.setItemGraphicEl(newIdx, itemEl);\n    this.group.add(itemEl);\n  };\n\n  return LineDraw;\n}();\n\nfunction isEffectObject(el) {\n  return el.animators && el.animators.length > 0;\n}\n\nfunction makeSeriesScope(lineData) {\n  var hostModel = lineData.hostModel;\n  return {\n    lineStyle: hostModel.getModel('lineStyle').getLineStyle(),\n    emphasisLineStyle: hostModel.getModel(['emphasis', 'lineStyle']).getLineStyle(),\n    blurLineStyle: hostModel.getModel(['blur', 'lineStyle']).getLineStyle(),\n    selectLineStyle: hostModel.getModel(['select', 'lineStyle']).getLineStyle(),\n    labelStatesModels: getLabelStatesModels(hostModel)\n  };\n}\n\nfunction isPointNaN(pt) {\n  return isNaN(pt[0]) || isNaN(pt[1]);\n}\n\nfunction lineNeedsDraw(pts) {\n  return !isPointNaN(pts[0]) && !isPointNaN(pts[1]);\n}\n\nexport default LineDraw;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as curveTool from 'zrender/lib/core/curve';\nimport * as vec2 from 'zrender/lib/core/vector';\nimport { getSymbolSize } from './graphHelper';\nvar v1 = [];\nvar v2 = [];\nvar v3 = [];\nvar quadraticAt = curveTool.quadraticAt;\nvar v2DistSquare = vec2.distSquare;\nvar mathAbs = Math.abs;\n\nfunction intersectCurveCircle(curvePoints, center, radius) {\n  var p0 = curvePoints[0];\n  var p1 = curvePoints[1];\n  var p2 = curvePoints[2];\n  var d = Infinity;\n  var t;\n  var radiusSquare = radius * radius;\n  var interval = 0.1;\n\n  for (var _t = 0.1; _t <= 0.9; _t += 0.1) {\n    v1[0] = quadraticAt(p0[0], p1[0], p2[0], _t);\n    v1[1] = quadraticAt(p0[1], p1[1], p2[1], _t);\n    var diff = mathAbs(v2DistSquare(v1, center) - radiusSquare);\n\n    if (diff < d) {\n      d = diff;\n      t = _t;\n    }\n  } // Assume the segment is monotoneFind root through Bisection method\n  // At most 32 iteration\n\n\n  for (var i = 0; i < 32; i++) {\n    // let prev = t - interval;\n    var next = t + interval; // v1[0] = quadraticAt(p0[0], p1[0], p2[0], prev);\n    // v1[1] = quadraticAt(p0[1], p1[1], p2[1], prev);\n\n    v2[0] = quadraticAt(p0[0], p1[0], p2[0], t);\n    v2[1] = quadraticAt(p0[1], p1[1], p2[1], t);\n    v3[0] = quadraticAt(p0[0], p1[0], p2[0], next);\n    v3[1] = quadraticAt(p0[1], p1[1], p2[1], next);\n    var diff = v2DistSquare(v2, center) - radiusSquare;\n\n    if (mathAbs(diff) < 1e-2) {\n      break;\n    } // let prevDiff = v2DistSquare(v1, center) - radiusSquare;\n\n\n    var nextDiff = v2DistSquare(v3, center) - radiusSquare;\n    interval /= 2;\n\n    if (diff < 0) {\n      if (nextDiff >= 0) {\n        t = t + interval;\n      } else {\n        t = t - interval;\n      }\n    } else {\n      if (nextDiff >= 0) {\n        t = t - interval;\n      } else {\n        t = t + interval;\n      }\n    }\n  }\n\n  return t;\n} // Adjust edge to avoid\n\n\nexport default function adjustEdge(graph, scale) {\n  var tmp0 = [];\n  var quadraticSubdivide = curveTool.quadraticSubdivide;\n  var pts = [[], [], []];\n  var pts2 = [[], []];\n  var v = [];\n  scale /= 2;\n  graph.eachEdge(function (edge, idx) {\n    var linePoints = edge.getLayout();\n    var fromSymbol = edge.getVisual('fromSymbol');\n    var toSymbol = edge.getVisual('toSymbol');\n\n    if (!linePoints.__original) {\n      linePoints.__original = [vec2.clone(linePoints[0]), vec2.clone(linePoints[1])];\n\n      if (linePoints[2]) {\n        linePoints.__original.push(vec2.clone(linePoints[2]));\n      }\n    }\n\n    var originalPoints = linePoints.__original; // Quadratic curve\n\n    if (linePoints[2] != null) {\n      vec2.copy(pts[0], originalPoints[0]);\n      vec2.copy(pts[1], originalPoints[2]);\n      vec2.copy(pts[2], originalPoints[1]);\n\n      if (fromSymbol && fromSymbol !== 'none') {\n        var symbolSize = getSymbolSize(edge.node1);\n        var t = intersectCurveCircle(pts, originalPoints[0], symbolSize * scale); // Subdivide and get the second\n\n        quadraticSubdivide(pts[0][0], pts[1][0], pts[2][0], t, tmp0);\n        pts[0][0] = tmp0[3];\n        pts[1][0] = tmp0[4];\n        quadraticSubdivide(pts[0][1], pts[1][1], pts[2][1], t, tmp0);\n        pts[0][1] = tmp0[3];\n        pts[1][1] = tmp0[4];\n      }\n\n      if (toSymbol && toSymbol !== 'none') {\n        var symbolSize = getSymbolSize(edge.node2);\n        var t = intersectCurveCircle(pts, originalPoints[1], symbolSize * scale); // Subdivide and get the first\n\n        quadraticSubdivide(pts[0][0], pts[1][0], pts[2][0], t, tmp0);\n        pts[1][0] = tmp0[1];\n        pts[2][0] = tmp0[2];\n        quadraticSubdivide(pts[0][1], pts[1][1], pts[2][1], t, tmp0);\n        pts[1][1] = tmp0[1];\n        pts[2][1] = tmp0[2];\n      } // Copy back to layout\n\n\n      vec2.copy(linePoints[0], pts[0]);\n      vec2.copy(linePoints[1], pts[2]);\n      vec2.copy(linePoints[2], pts[1]);\n    } // Line\n    else {\n      vec2.copy(pts2[0], originalPoints[0]);\n      vec2.copy(pts2[1], originalPoints[1]);\n      vec2.sub(v, pts2[1], pts2[0]);\n      vec2.normalize(v, v);\n\n      if (fromSymbol && fromSymbol !== 'none') {\n        var symbolSize = getSymbolSize(edge.node1);\n        vec2.scaleAndAdd(pts2[0], pts2[0], v, symbolSize * scale);\n      }\n\n      if (toSymbol && toSymbol !== 'none') {\n        var symbolSize = getSymbolSize(edge.node2);\n        vec2.scaleAndAdd(pts2[1], pts2[1], v, -symbolSize * scale);\n      }\n\n      vec2.copy(linePoints[0], pts2[0]);\n      vec2.copy(linePoints[1], pts2[1]);\n    }\n  });\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport SymbolDraw from '../helper/SymbolDraw';\nimport LineDraw from '../helper/LineDraw';\nimport RoamController from '../../component/helper/RoamController';\nimport * as roamHelper from '../../component/helper/roamHelper';\nimport { onIrrelevantElement } from '../../component/helper/cursorHelper';\nimport * as graphic from '../../util/graphic';\nimport adjustEdge from './adjustEdge';\nimport { getNodeGlobalScale } from './graphHelper';\nimport ChartView from '../../view/Chart';\nimport { getECData } from '../../util/innerStore';\n\nfunction isViewCoordSys(coordSys) {\n  return coordSys.type === 'view';\n}\n\nvar GraphView =\n/** @class */\nfunction (_super) {\n  __extends(GraphView, _super);\n\n  function GraphView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = GraphView.type;\n    return _this;\n  }\n\n  GraphView.prototype.init = function (ecModel, api) {\n    var symbolDraw = new SymbolDraw();\n    var lineDraw = new LineDraw();\n    var group = this.group;\n    this._controller = new RoamController(api.getZr());\n    this._controllerHost = {\n      target: group\n    };\n    group.add(symbolDraw.group);\n    group.add(lineDraw.group);\n    this._symbolDraw = symbolDraw;\n    this._lineDraw = lineDraw;\n    this._firstRender = true;\n  };\n\n  GraphView.prototype.render = function (seriesModel, ecModel, api) {\n    var _this = this;\n\n    var coordSys = seriesModel.coordinateSystem;\n    this._model = seriesModel;\n    var symbolDraw = this._symbolDraw;\n    var lineDraw = this._lineDraw;\n    var group = this.group;\n\n    if (isViewCoordSys(coordSys)) {\n      var groupNewProp = {\n        x: coordSys.x,\n        y: coordSys.y,\n        scaleX: coordSys.scaleX,\n        scaleY: coordSys.scaleY\n      };\n\n      if (this._firstRender) {\n        group.attr(groupNewProp);\n      } else {\n        graphic.updateProps(group, groupNewProp, seriesModel);\n      }\n    } // Fix edge contact point with node\n\n\n    adjustEdge(seriesModel.getGraph(), getNodeGlobalScale(seriesModel));\n    var data = seriesModel.getData();\n    symbolDraw.updateData(data);\n    var edgeData = seriesModel.getEdgeData(); // TODO: TYPE\n\n    lineDraw.updateData(edgeData);\n\n    this._updateNodeAndLinkScale();\n\n    this._updateController(seriesModel, ecModel, api);\n\n    clearTimeout(this._layoutTimeout);\n    var forceLayout = seriesModel.forceLayout;\n    var layoutAnimation = seriesModel.get(['force', 'layoutAnimation']);\n\n    if (forceLayout) {\n      this._startForceLayoutIteration(forceLayout, layoutAnimation);\n    }\n\n    data.graph.eachNode(function (node) {\n      var idx = node.dataIndex;\n      var el = node.getGraphicEl();\n      var itemModel = node.getModel(); // Update draggable\n\n      el.off('drag').off('dragend');\n      var draggable = itemModel.get('draggable');\n\n      if (draggable) {\n        el.on('drag', function () {\n          if (forceLayout) {\n            forceLayout.warmUp();\n            !_this._layouting && _this._startForceLayoutIteration(forceLayout, layoutAnimation);\n            forceLayout.setFixed(idx); // Write position back to layout\n\n            data.setItemLayout(idx, [el.x, el.y]);\n          }\n        }).on('dragend', function () {\n          if (forceLayout) {\n            forceLayout.setUnfixed(idx);\n          }\n        });\n      }\n\n      el.setDraggable(draggable && !!forceLayout);\n      var focus = itemModel.get(['emphasis', 'focus']);\n\n      if (focus === 'adjacency') {\n        getECData(el).focus = node.getAdjacentDataIndices();\n      }\n    });\n    data.graph.eachEdge(function (edge) {\n      var el = edge.getGraphicEl();\n      var focus = edge.getModel().get(['emphasis', 'focus']);\n\n      if (focus === 'adjacency') {\n        getECData(el).focus = {\n          edge: [edge.dataIndex],\n          node: [edge.node1.dataIndex, edge.node2.dataIndex]\n        };\n      }\n    });\n    var circularRotateLabel = seriesModel.get('layout') === 'circular' && seriesModel.get(['circular', 'rotateLabel']);\n    var cx = data.getLayout('cx');\n    var cy = data.getLayout('cy');\n    data.eachItemGraphicEl(function (el, idx) {\n      var itemModel = data.getItemModel(idx);\n      var labelRotate = itemModel.get(['label', 'rotate']) || 0;\n      var symbolPath = el.getSymbolPath();\n\n      if (circularRotateLabel) {\n        var pos = data.getItemLayout(idx);\n        var rad = Math.atan2(pos[1] - cy, pos[0] - cx);\n\n        if (rad < 0) {\n          rad = Math.PI * 2 + rad;\n        }\n\n        var isLeft = pos[0] < cx;\n\n        if (isLeft) {\n          rad = rad - Math.PI;\n        }\n\n        var textPosition = isLeft ? 'left' : 'right';\n        symbolPath.setTextConfig({\n          rotation: -rad,\n          position: textPosition,\n          origin: 'center'\n        });\n        var emphasisState = symbolPath.ensureState('emphasis');\n        zrUtil.extend(emphasisState.textConfig || (emphasisState.textConfig = {}), {\n          position: textPosition\n        });\n      } else {\n        symbolPath.setTextConfig({\n          rotation: labelRotate *= Math.PI / 180\n        });\n      }\n    });\n    this._firstRender = false;\n  };\n\n  GraphView.prototype.dispose = function () {\n    this._controller && this._controller.dispose();\n    this._controllerHost = null;\n  };\n\n  GraphView.prototype._startForceLayoutIteration = function (forceLayout, layoutAnimation) {\n    var self = this;\n\n    (function step() {\n      forceLayout.step(function (stopped) {\n        self.updateLayout(self._model);\n        (self._layouting = !stopped) && (layoutAnimation ? self._layoutTimeout = setTimeout(step, 16) : step());\n      });\n    })();\n  };\n\n  GraphView.prototype._updateController = function (seriesModel, ecModel, api) {\n    var _this = this;\n\n    var controller = this._controller;\n    var controllerHost = this._controllerHost;\n    var group = this.group;\n    controller.setPointerChecker(function (e, x, y) {\n      var rect = group.getBoundingRect();\n      rect.applyTransform(group.transform);\n      return rect.contain(x, y) && !onIrrelevantElement(e, api, seriesModel);\n    });\n\n    if (!isViewCoordSys(seriesModel.coordinateSystem)) {\n      controller.disable();\n      return;\n    }\n\n    controller.enable(seriesModel.get('roam'));\n    controllerHost.zoomLimit = seriesModel.get('scaleLimit');\n    controllerHost.zoom = seriesModel.coordinateSystem.getZoom();\n    controller.off('pan').off('zoom').on('pan', function (e) {\n      roamHelper.updateViewOnPan(controllerHost, e.dx, e.dy);\n      api.dispatchAction({\n        seriesId: seriesModel.id,\n        type: 'graphRoam',\n        dx: e.dx,\n        dy: e.dy\n      });\n    }).on('zoom', function (e) {\n      roamHelper.updateViewOnZoom(controllerHost, e.scale, e.originX, e.originY);\n      api.dispatchAction({\n        seriesId: seriesModel.id,\n        type: 'graphRoam',\n        zoom: e.scale,\n        originX: e.originX,\n        originY: e.originY\n      });\n\n      _this._updateNodeAndLinkScale();\n\n      adjustEdge(seriesModel.getGraph(), getNodeGlobalScale(seriesModel));\n\n      _this._lineDraw.updateLayout(); // Only update label layout on zoom\n\n\n      api.updateLabelLayout();\n    });\n  };\n\n  GraphView.prototype._updateNodeAndLinkScale = function () {\n    var seriesModel = this._model;\n    var data = seriesModel.getData();\n    var nodeScale = getNodeGlobalScale(seriesModel);\n    data.eachItemGraphicEl(function (el, idx) {\n      el.setSymbolScale(nodeScale);\n    });\n  };\n\n  GraphView.prototype.updateLayout = function (seriesModel) {\n    adjustEdge(seriesModel.getGraph(), getNodeGlobalScale(seriesModel));\n\n    this._symbolDraw.updateLayout();\n\n    this._lineDraw.updateLayout();\n  };\n\n  GraphView.prototype.remove = function (ecModel, api) {\n    this._symbolDraw && this._symbolDraw.remove();\n    this._lineDraw && this._lineDraw.remove();\n  };\n\n  GraphView.type = 'graph';\n  return GraphView;\n}(ChartView);\n\nexport default GraphView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util'; // id may be function name of Object, add a prefix to avoid this problem.\n\nfunction generateNodeKey(id) {\n  return '_EC_' + id;\n}\n\nvar Graph =\n/** @class */\nfunction () {\n  function Graph(directed) {\n    this.type = 'graph';\n    this.nodes = [];\n    this.edges = [];\n    this._nodesMap = {};\n    /**\n     * @type {Object.<string, module:echarts/data/Graph.Edge>}\n     * @private\n     */\n\n    this._edgesMap = {};\n    this._directed = directed || false;\n  }\n  /**\n   * If is directed graph\n   */\n\n\n  Graph.prototype.isDirected = function () {\n    return this._directed;\n  };\n\n  ;\n  /**\n   * Add a new node\n   */\n\n  Graph.prototype.addNode = function (id, dataIndex) {\n    id = id == null ? '' + dataIndex : '' + id;\n    var nodesMap = this._nodesMap;\n\n    if (nodesMap[generateNodeKey(id)]) {\n      if (process.env.NODE_ENV !== 'production') {\n        console.error('Graph nodes have duplicate name or id');\n      }\n\n      return;\n    }\n\n    var node = new GraphNode(id, dataIndex);\n    node.hostGraph = this;\n    this.nodes.push(node);\n    nodesMap[generateNodeKey(id)] = node;\n    return node;\n  };\n\n  ;\n  /**\n   * Get node by data index\n   */\n\n  Graph.prototype.getNodeByIndex = function (dataIndex) {\n    var rawIdx = this.data.getRawIndex(dataIndex);\n    return this.nodes[rawIdx];\n  };\n\n  ;\n  /**\n   * Get node by id\n   */\n\n  Graph.prototype.getNodeById = function (id) {\n    return this._nodesMap[generateNodeKey(id)];\n  };\n\n  ;\n  /**\n   * Add a new edge\n   */\n\n  Graph.prototype.addEdge = function (n1, n2, dataIndex) {\n    var nodesMap = this._nodesMap;\n    var edgesMap = this._edgesMap; // PNEDING\n\n    if (typeof n1 === 'number') {\n      n1 = this.nodes[n1];\n    }\n\n    if (typeof n2 === 'number') {\n      n2 = this.nodes[n2];\n    }\n\n    if (!(n1 instanceof GraphNode)) {\n      n1 = nodesMap[generateNodeKey(n1)];\n    }\n\n    if (!(n2 instanceof GraphNode)) {\n      n2 = nodesMap[generateNodeKey(n2)];\n    }\n\n    if (!n1 || !n2) {\n      return;\n    }\n\n    var key = n1.id + '-' + n2.id;\n    var edge = new GraphEdge(n1, n2, dataIndex);\n    edge.hostGraph = this;\n\n    if (this._directed) {\n      n1.outEdges.push(edge);\n      n2.inEdges.push(edge);\n    }\n\n    n1.edges.push(edge);\n\n    if (n1 !== n2) {\n      n2.edges.push(edge);\n    }\n\n    this.edges.push(edge);\n    edgesMap[key] = edge;\n    return edge;\n  };\n\n  ;\n  /**\n   * Get edge by data index\n   */\n\n  Graph.prototype.getEdgeByIndex = function (dataIndex) {\n    var rawIdx = this.edgeData.getRawIndex(dataIndex);\n    return this.edges[rawIdx];\n  };\n\n  ;\n  /**\n   * Get edge by two linked nodes\n   */\n\n  Graph.prototype.getEdge = function (n1, n2) {\n    if (n1 instanceof GraphNode) {\n      n1 = n1.id;\n    }\n\n    if (n2 instanceof GraphNode) {\n      n2 = n2.id;\n    }\n\n    var edgesMap = this._edgesMap;\n\n    if (this._directed) {\n      return edgesMap[n1 + '-' + n2];\n    } else {\n      return edgesMap[n1 + '-' + n2] || edgesMap[n2 + '-' + n1];\n    }\n  };\n\n  ;\n  /**\n   * Iterate all nodes\n   */\n\n  Graph.prototype.eachNode = function (cb, context) {\n    var nodes = this.nodes;\n    var len = nodes.length;\n\n    for (var i = 0; i < len; i++) {\n      if (nodes[i].dataIndex >= 0) {\n        cb.call(context, nodes[i], i);\n      }\n    }\n  };\n\n  ;\n  /**\n   * Iterate all edges\n   */\n\n  Graph.prototype.eachEdge = function (cb, context) {\n    var edges = this.edges;\n    var len = edges.length;\n\n    for (var i = 0; i < len; i++) {\n      if (edges[i].dataIndex >= 0 && edges[i].node1.dataIndex >= 0 && edges[i].node2.dataIndex >= 0) {\n        cb.call(context, edges[i], i);\n      }\n    }\n  };\n\n  ;\n  /**\n   * Breadth first traverse\n   * Return true to stop traversing\n   */\n\n  Graph.prototype.breadthFirstTraverse = function (cb, startNode, direction, context) {\n    if (!(startNode instanceof GraphNode)) {\n      startNode = this._nodesMap[generateNodeKey(startNode)];\n    }\n\n    if (!startNode) {\n      return;\n    }\n\n    var edgeType = direction === 'out' ? 'outEdges' : direction === 'in' ? 'inEdges' : 'edges';\n\n    for (var i = 0; i < this.nodes.length; i++) {\n      this.nodes[i].__visited = false;\n    }\n\n    if (cb.call(context, startNode, null)) {\n      return;\n    }\n\n    var queue = [startNode];\n\n    while (queue.length) {\n      var currentNode = queue.shift();\n      var edges = currentNode[edgeType];\n\n      for (var i = 0; i < edges.length; i++) {\n        var e = edges[i];\n        var otherNode = e.node1 === currentNode ? e.node2 : e.node1;\n\n        if (!otherNode.__visited) {\n          if (cb.call(context, otherNode, currentNode)) {\n            // Stop traversing\n            return;\n          }\n\n          queue.push(otherNode);\n          otherNode.__visited = true;\n        }\n      }\n    }\n  };\n\n  ; // TODO\n  // depthFirstTraverse(\n  //     cb, startNode, direction, context\n  // ) {\n  // };\n  // Filter update\n\n  Graph.prototype.update = function () {\n    var data = this.data;\n    var edgeData = this.edgeData;\n    var nodes = this.nodes;\n    var edges = this.edges;\n\n    for (var i = 0, len = nodes.length; i < len; i++) {\n      nodes[i].dataIndex = -1;\n    }\n\n    for (var i = 0, len = data.count(); i < len; i++) {\n      nodes[data.getRawIndex(i)].dataIndex = i;\n    }\n\n    edgeData.filterSelf(function (idx) {\n      var edge = edges[edgeData.getRawIndex(idx)];\n      return edge.node1.dataIndex >= 0 && edge.node2.dataIndex >= 0;\n    }); // Update edge\n\n    for (var i = 0, len = edges.length; i < len; i++) {\n      edges[i].dataIndex = -1;\n    }\n\n    for (var i = 0, len = edgeData.count(); i < len; i++) {\n      edges[edgeData.getRawIndex(i)].dataIndex = i;\n    }\n  };\n\n  ;\n  /**\n   * @return {module:echarts/data/Graph}\n   */\n\n  Graph.prototype.clone = function () {\n    var graph = new Graph(this._directed);\n    var nodes = this.nodes;\n    var edges = this.edges;\n\n    for (var i = 0; i < nodes.length; i++) {\n      graph.addNode(nodes[i].id, nodes[i].dataIndex);\n    }\n\n    for (var i = 0; i < edges.length; i++) {\n      var e = edges[i];\n      graph.addEdge(e.node1.id, e.node2.id, e.dataIndex);\n    }\n\n    return graph;\n  };\n\n  ;\n  return Graph;\n}();\n\nvar GraphNode =\n/** @class */\nfunction () {\n  function GraphNode(id, dataIndex) {\n    this.inEdges = [];\n    this.outEdges = [];\n    this.edges = [];\n    this.dataIndex = -1;\n    this.id = id == null ? '' : id;\n    this.dataIndex = dataIndex == null ? -1 : dataIndex;\n  }\n  /**\n   * @return {number}\n   */\n\n\n  GraphNode.prototype.degree = function () {\n    return this.edges.length;\n  };\n  /**\n   * @return {number}\n   */\n\n\n  GraphNode.prototype.inDegree = function () {\n    return this.inEdges.length;\n  };\n  /**\n  * @return {number}\n  */\n\n\n  GraphNode.prototype.outDegree = function () {\n    return this.outEdges.length;\n  };\n\n  GraphNode.prototype.getModel = function (path) {\n    if (this.dataIndex < 0) {\n      return;\n    }\n\n    var graph = this.hostGraph;\n    var itemModel = graph.data.getItemModel(this.dataIndex);\n    return itemModel.getModel(path);\n  };\n\n  GraphNode.prototype.getAdjacentDataIndices = function () {\n    var dataIndices = {\n      edge: [],\n      node: []\n    };\n\n    for (var i = 0; i < this.edges.length; i++) {\n      var adjacentEdge = this.edges[i];\n\n      if (adjacentEdge.dataIndex < 0) {\n        continue;\n      }\n\n      dataIndices.edge.push(adjacentEdge.dataIndex);\n      dataIndices.node.push(adjacentEdge.node1.dataIndex, adjacentEdge.node2.dataIndex);\n    }\n\n    return dataIndices;\n  };\n\n  return GraphNode;\n}();\n\nvar GraphEdge =\n/** @class */\nfunction () {\n  function GraphEdge(n1, n2, dataIndex) {\n    this.dataIndex = -1;\n    this.node1 = n1;\n    this.node2 = n2;\n    this.dataIndex = dataIndex == null ? -1 : dataIndex;\n  } // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  GraphEdge.prototype.getModel = function (path) {\n    if (this.dataIndex < 0) {\n      return;\n    }\n\n    var graph = this.hostGraph;\n    var itemModel = graph.edgeData.getItemModel(this.dataIndex);\n    return itemModel.getModel(path);\n  };\n\n  GraphEdge.prototype.getAdjacentDataIndices = function () {\n    return {\n      edge: [this.dataIndex],\n      node: [this.node1.dataIndex, this.node2.dataIndex]\n    };\n  };\n\n  return GraphEdge;\n}();\n\nfunction createGraphDataProxyMixin(hostName, dataName) {\n  return {\n    /**\n     * @param Default 'value'. can be 'a', 'b', 'c', 'd', 'e'.\n     */\n    getValue: function getValue(dimension) {\n      var data = this[hostName][dataName];\n      return data.getStore().get(data.getDimensionIndex(dimension || 'value'), this.dataIndex);\n    },\n    // TODO: TYPE stricter type.\n    setVisual: function setVisual(key, value) {\n      this.dataIndex >= 0 && this[hostName][dataName].setItemVisual(this.dataIndex, key, value);\n    },\n    getVisual: function getVisual(key) {\n      return this[hostName][dataName].getItemVisual(this.dataIndex, key);\n    },\n    setLayout: function setLayout(layout, merge) {\n      this.dataIndex >= 0 && this[hostName][dataName].setItemLayout(this.dataIndex, layout, merge);\n    },\n    getLayout: function getLayout() {\n      return this[hostName][dataName].getItemLayout(this.dataIndex);\n    },\n    getGraphicEl: function getGraphicEl() {\n      return this[hostName][dataName].getItemGraphicEl(this.dataIndex);\n    },\n    getRawIndex: function getRawIndex() {\n      return this[hostName][dataName].getRawIndex(this.dataIndex);\n    }\n  };\n}\n\n;\n;\n;\nzrUtil.mixin(GraphNode, createGraphDataProxyMixin('hostGraph', 'data'));\nzrUtil.mixin(GraphEdge, createGraphDataProxyMixin('hostGraph', 'edgeData'));\nexport default Graph;\nexport { GraphNode, GraphEdge };","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport SeriesData from '../../data/SeriesData';\nimport Graph from '../../data/Graph';\nimport linkSeriesData from '../../data/helper/linkSeriesData';\nimport prepareSeriesDataSchema from '../../data/helper/createDimensions';\nimport CoordinateSystem from '../../core/CoordinateSystem';\nimport createSeriesData from './createSeriesData';\nimport { convertOptionIdName } from '../../util/model';\nexport default function createGraphFromNodeEdge(nodes, edges, seriesModel, directed, beforeLink) {\n  // ??? TODO\n  // support dataset?\n  var graph = new Graph(directed);\n\n  for (var i = 0; i < nodes.length; i++) {\n    graph.addNode(zrUtil.retrieve( // Id, name, dataIndex\n    nodes[i].id, nodes[i].name, i), i);\n  }\n\n  var linkNameList = [];\n  var validEdges = [];\n  var linkCount = 0;\n\n  for (var i = 0; i < edges.length; i++) {\n    var link = edges[i];\n    var source = link.source;\n    var target = link.target; // addEdge may fail when source or target not exists\n\n    if (graph.addEdge(source, target, linkCount)) {\n      validEdges.push(link);\n      linkNameList.push(zrUtil.retrieve(convertOptionIdName(link.id, null), source + ' > ' + target));\n      linkCount++;\n    }\n  }\n\n  var coordSys = seriesModel.get('coordinateSystem');\n  var nodeData;\n\n  if (coordSys === 'cartesian2d' || coordSys === 'polar') {\n    nodeData = createSeriesData(nodes, seriesModel);\n  } else {\n    var coordSysCtor = CoordinateSystem.get(coordSys);\n    var coordDimensions = coordSysCtor ? coordSysCtor.dimensions || [] : []; // FIXME: Some geo do not need `value` dimenson, whereas `calendar` needs\n    // `value` dimension, but graph need `value` dimension. It's better to\n    // uniform this behavior.\n\n    if (zrUtil.indexOf(coordDimensions, 'value') < 0) {\n      coordDimensions.concat(['value']);\n    }\n\n    var dimensions = prepareSeriesDataSchema(nodes, {\n      coordDimensions: coordDimensions,\n      encodeDefine: seriesModel.getEncode()\n    }).dimensions;\n    nodeData = new SeriesData(dimensions, seriesModel);\n    nodeData.initData(nodes);\n  }\n\n  var edgeData = new SeriesData(['value'], seriesModel);\n  edgeData.initData(validEdges, linkNameList);\n  beforeLink && beforeLink(nodeData, edgeData);\n  linkSeriesData({\n    mainData: nodeData,\n    struct: graph,\n    structAttr: 'graph',\n    datas: {\n      node: nodeData,\n      edge: edgeData\n    },\n    datasAttr: {\n      node: 'data',\n      edge: 'edgeData'\n    }\n  }); // Update dataIndex of nodes and edges because invalid edge may be removed\n\n  graph.update();\n  return graph;\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesData from '../../data/SeriesData';\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { defaultEmphasis } from '../../util/model';\nimport Model from '../../model/Model';\nimport createGraphFromNodeEdge from '../helper/createGraphFromNodeEdge';\nimport LegendVisualProvider from '../../visual/LegendVisualProvider';\nimport SeriesModel from '../../model/Series';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup';\nimport { defaultSeriesFormatTooltip } from '../../component/tooltip/seriesFormatTooltip';\nimport { initCurvenessList, createEdgeMapForCurveness } from '../helper/multipleGraphEdgeHelper';\n\nvar GraphSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(GraphSeriesModel, _super);\n\n  function GraphSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = GraphSeriesModel.type;\n    _this.hasSymbolVisual = true;\n    return _this;\n  }\n\n  GraphSeriesModel.prototype.init = function (option) {\n    _super.prototype.init.apply(this, arguments);\n\n    var self = this;\n\n    function getCategoriesData() {\n      return self._categoriesData;\n    } // Provide data for legend select\n\n\n    this.legendVisualProvider = new LegendVisualProvider(getCategoriesData, getCategoriesData);\n    this.fillDataTextStyle(option.edges || option.links);\n\n    this._updateCategoriesData();\n  };\n\n  GraphSeriesModel.prototype.mergeOption = function (option) {\n    _super.prototype.mergeOption.apply(this, arguments);\n\n    this.fillDataTextStyle(option.edges || option.links);\n\n    this._updateCategoriesData();\n  };\n\n  GraphSeriesModel.prototype.mergeDefaultAndTheme = function (option) {\n    _super.prototype.mergeDefaultAndTheme.apply(this, arguments);\n\n    defaultEmphasis(option, 'edgeLabel', ['show']);\n  };\n\n  GraphSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    var edges = option.edges || option.links || [];\n    var nodes = option.data || option.nodes || [];\n    var self = this;\n\n    if (nodes && edges) {\n      // auto curveness\n      initCurvenessList(this);\n      var graph = createGraphFromNodeEdge(nodes, edges, this, true, beforeLink);\n      zrUtil.each(graph.edges, function (edge) {\n        createEdgeMapForCurveness(edge.node1, edge.node2, this, edge.dataIndex);\n      }, this);\n      return graph.data;\n    }\n\n    function beforeLink(nodeData, edgeData) {\n      // Overwrite nodeData.getItemModel to\n      nodeData.wrapMethod('getItemModel', function (model) {\n        var categoriesModels = self._categoriesModels;\n        var categoryIdx = model.getShallow('category');\n        var categoryModel = categoriesModels[categoryIdx];\n\n        if (categoryModel) {\n          categoryModel.parentModel = model.parentModel;\n          model.parentModel = categoryModel;\n        }\n\n        return model;\n      }); // TODO Inherit resolveParentPath by default in Model#getModel?\n\n      var oldGetModel = Model.prototype.getModel;\n\n      function newGetModel(path, parentModel) {\n        var model = oldGetModel.call(this, path, parentModel);\n        model.resolveParentPath = resolveParentPath;\n        return model;\n      }\n\n      edgeData.wrapMethod('getItemModel', function (model) {\n        model.resolveParentPath = resolveParentPath;\n        model.getModel = newGetModel;\n        return model;\n      });\n\n      function resolveParentPath(pathArr) {\n        if (pathArr && (pathArr[0] === 'label' || pathArr[1] === 'label')) {\n          var newPathArr = pathArr.slice();\n\n          if (pathArr[0] === 'label') {\n            newPathArr[0] = 'edgeLabel';\n          } else if (pathArr[1] === 'label') {\n            newPathArr[1] = 'edgeLabel';\n          }\n\n          return newPathArr;\n        }\n\n        return pathArr;\n      }\n    }\n  };\n\n  GraphSeriesModel.prototype.getGraph = function () {\n    return this.getData().graph;\n  };\n\n  GraphSeriesModel.prototype.getEdgeData = function () {\n    return this.getGraph().edgeData;\n  };\n\n  GraphSeriesModel.prototype.getCategoriesData = function () {\n    return this._categoriesData;\n  };\n\n  GraphSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    if (dataType === 'edge') {\n      var nodeData = this.getData();\n      var params = this.getDataParams(dataIndex, dataType);\n      var edge = nodeData.graph.getEdgeByIndex(dataIndex);\n      var sourceName = nodeData.getName(edge.node1.dataIndex);\n      var targetName = nodeData.getName(edge.node2.dataIndex);\n      var nameArr = [];\n      sourceName != null && nameArr.push(sourceName);\n      targetName != null && nameArr.push(targetName);\n      return createTooltipMarkup('nameValue', {\n        name: nameArr.join(' > '),\n        value: params.value,\n        noValue: params.value == null\n      });\n    } // dataType === 'node' or empty\n\n\n    var nodeMarkup = defaultSeriesFormatTooltip({\n      series: this,\n      dataIndex: dataIndex,\n      multipleSeries: multipleSeries\n    });\n    return nodeMarkup;\n  };\n\n  GraphSeriesModel.prototype._updateCategoriesData = function () {\n    var categories = zrUtil.map(this.option.categories || [], function (category) {\n      // Data must has value\n      return category.value != null ? category : zrUtil.extend({\n        value: 0\n      }, category);\n    });\n    var categoriesData = new SeriesData(['value'], this);\n    categoriesData.initData(categories);\n    this._categoriesData = categoriesData;\n    this._categoriesModels = categoriesData.mapArray(function (idx) {\n      return categoriesData.getItemModel(idx);\n    });\n  };\n\n  GraphSeriesModel.prototype.setZoom = function (zoom) {\n    this.option.zoom = zoom;\n  };\n\n  GraphSeriesModel.prototype.setCenter = function (center) {\n    this.option.center = center;\n  };\n\n  GraphSeriesModel.prototype.isAnimationEnabled = function () {\n    return _super.prototype.isAnimationEnabled.call(this) // Not enable animation when do force layout\n    && !(this.get('layout') === 'force' && this.get(['force', 'layoutAnimation']));\n  };\n\n  GraphSeriesModel.type = 'series.graph';\n  GraphSeriesModel.dependencies = ['grid', 'polar', 'geo', 'singleAxis', 'calendar'];\n  GraphSeriesModel.defaultOption = {\n    zlevel: 0,\n    z: 2,\n    coordinateSystem: 'view',\n    // Default option for all coordinate systems\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // polarIndex: 0,\n    // geoIndex: 0,\n    legendHoverLink: true,\n    layout: null,\n    // Configuration of circular layout\n    circular: {\n      rotateLabel: false\n    },\n    // Configuration of force directed layout\n    force: {\n      initLayout: null,\n      // Node repulsion. Can be an array to represent range.\n      repulsion: [0, 50],\n      gravity: 0.1,\n      // Initial friction\n      friction: 0.6,\n      // Edge length. Can be an array to represent range.\n      edgeLength: 30,\n      layoutAnimation: true\n    },\n    left: 'center',\n    top: 'center',\n    // right: null,\n    // bottom: null,\n    // width: '80%',\n    // height: '80%',\n    symbol: 'circle',\n    symbolSize: 10,\n    edgeSymbol: ['none', 'none'],\n    edgeSymbolSize: 10,\n    edgeLabel: {\n      position: 'middle',\n      distance: 5\n    },\n    draggable: false,\n    roam: false,\n    // Default on center of graph\n    center: null,\n    zoom: 1,\n    // Symbol size scale ratio in roam\n    nodeScaleRatio: 0.6,\n    // cursor: null,\n    // categories: [],\n    // data: []\n    // Or\n    // nodes: []\n    //\n    // links: []\n    // Or\n    // edges: []\n    label: {\n      show: false,\n      formatter: '{b}'\n    },\n    itemStyle: {},\n    lineStyle: {\n      color: '#aaa',\n      width: 1,\n      opacity: 0.5\n    },\n    emphasis: {\n      scale: true,\n      label: {\n        show: true\n      }\n    },\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    }\n  };\n  return GraphSeriesModel;\n}(SeriesModel);\n\nexport default GraphSeriesModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport categoryFilter from './categoryFilter';\nimport categoryVisual from './categoryVisual';\nimport edgeVisual from './edgeVisual';\nimport simpleLayout from './simpleLayout';\nimport circularLayout from './circularLayout';\nimport forceLayout from './forceLayout';\nimport createView from './createView';\nimport View from '../../coord/View';\nimport GraphView from './GraphView';\nimport GraphSeriesModel from './GraphSeries';\nimport { updateCenterAndZoom } from '../../action/roamHelper';\nvar actionInfo = {\n  type: 'graphRoam',\n  event: 'graphRoam',\n  update: 'none'\n};\nexport function install(registers) {\n  registers.registerChartView(GraphView);\n  registers.registerSeriesModel(GraphSeriesModel);\n  registers.registerProcessor(categoryFilter);\n  registers.registerVisual(categoryVisual);\n  registers.registerVisual(edgeVisual);\n  registers.registerLayout(simpleLayout);\n  registers.registerLayout(registers.PRIORITY.VISUAL.POST_CHART_LAYOUT, circularLayout);\n  registers.registerLayout(forceLayout);\n  registers.registerCoordinateSystem('graphView', {\n    dimensions: View.dimensions,\n    create: createView\n  }); // Register legacy focus actions\n\n  registers.registerAction({\n    type: 'focusNodeAdjacency',\n    event: 'focusNodeAdjacency',\n    update: 'series:focusNodeAdjacency'\n  }, function () {});\n  registers.registerAction({\n    type: 'unfocusNodeAdjacency',\n    event: 'unfocusNodeAdjacency',\n    update: 'series:unfocusNodeAdjacency'\n  }, function () {}); // Register roam action.\n\n  registers.registerAction(actionInfo, function (payload, ecModel) {\n    ecModel.eachComponent({\n      mainType: 'series',\n      query: payload\n    }, function (seriesModel) {\n      var coordSys = seriesModel.coordinateSystem;\n      var res = updateCenterAndZoom(coordSys, payload);\n      seriesModel.setCenter && seriesModel.setCenter(res.center);\n      seriesModel.setZoom && seriesModel.setZoom(res.zoom);\n    });\n  });\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Path from 'zrender/lib/graphic/Path';\n\nvar PointerShape =\n/** @class */\nfunction () {\n  function PointerShape() {\n    this.angle = 0;\n    this.width = 10;\n    this.r = 10;\n    this.x = 0;\n    this.y = 0;\n  }\n\n  return PointerShape;\n}();\n\nvar PointerPath =\n/** @class */\nfunction (_super) {\n  __extends(PointerPath, _super);\n\n  function PointerPath(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'pointer';\n    return _this;\n  }\n\n  PointerPath.prototype.getDefaultShape = function () {\n    return new PointerShape();\n  };\n\n  PointerPath.prototype.buildPath = function (ctx, shape) {\n    var mathCos = Math.cos;\n    var mathSin = Math.sin;\n    var r = shape.r;\n    var width = shape.width;\n    var angle = shape.angle;\n    var x = shape.x - mathCos(angle) * width * (width >= r / 3 ? 1 : 2);\n    var y = shape.y - mathSin(angle) * width * (width >= r / 3 ? 1 : 2);\n    angle = shape.angle - Math.PI / 2;\n    ctx.moveTo(x, y);\n    ctx.lineTo(shape.x + mathCos(angle) * width, shape.y + mathSin(angle) * width);\n    ctx.lineTo(shape.x + mathCos(shape.angle) * r, shape.y + mathSin(shape.angle) * r);\n    ctx.lineTo(shape.x - mathCos(angle) * width, shape.y - mathSin(angle) * width);\n    ctx.lineTo(x, y);\n  };\n\n  return PointerPath;\n}(Path);\n\nexport default PointerPath;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport PointerPath from './PointerPath';\nimport * as graphic from '../../util/graphic';\nimport { setStatesStylesFromModel, enableHoverEmphasis } from '../../util/states';\nimport { createTextStyle, setLabelValueAnimation, animateLabelValue } from '../../label/labelStyle';\nimport ChartView from '../../view/Chart';\nimport { parsePercent, round, linearMap } from '../../util/number';\nimport Sausage from '../../util/shape/sausage';\nimport { createSymbol } from '../../util/symbol';\nimport ZRImage from 'zrender/lib/graphic/Image';\nimport { extend } from 'zrender/lib/core/util';\nimport { setCommonECData } from '../../util/innerStore';\n\nfunction parsePosition(seriesModel, api) {\n  var center = seriesModel.get('center');\n  var width = api.getWidth();\n  var height = api.getHeight();\n  var size = Math.min(width, height);\n  var cx = parsePercent(center[0], api.getWidth());\n  var cy = parsePercent(center[1], api.getHeight());\n  var r = parsePercent(seriesModel.get('radius'), size / 2);\n  return {\n    cx: cx,\n    cy: cy,\n    r: r\n  };\n}\n\nfunction formatLabel(value, labelFormatter) {\n  var label = value == null ? '' : value + '';\n\n  if (labelFormatter) {\n    if (typeof labelFormatter === 'string') {\n      label = labelFormatter.replace('{value}', label);\n    } else if (typeof labelFormatter === 'function') {\n      label = labelFormatter(value);\n    }\n  }\n\n  return label;\n}\n\nvar PI2 = Math.PI * 2;\n\nvar GaugeView =\n/** @class */\nfunction (_super) {\n  __extends(GaugeView, _super);\n\n  function GaugeView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = GaugeView.type;\n    return _this;\n  }\n\n  GaugeView.prototype.render = function (seriesModel, ecModel, api) {\n    this.group.removeAll();\n    var colorList = seriesModel.get(['axisLine', 'lineStyle', 'color']);\n    var posInfo = parsePosition(seriesModel, api);\n\n    this._renderMain(seriesModel, ecModel, api, colorList, posInfo);\n\n    this._data = seriesModel.getData();\n  };\n\n  GaugeView.prototype.dispose = function () {};\n\n  GaugeView.prototype._renderMain = function (seriesModel, ecModel, api, colorList, posInfo) {\n    var group = this.group;\n    var clockwise = seriesModel.get('clockwise');\n    var startAngle = -seriesModel.get('startAngle') / 180 * Math.PI;\n    var endAngle = -seriesModel.get('endAngle') / 180 * Math.PI;\n    var axisLineModel = seriesModel.getModel('axisLine');\n    var roundCap = axisLineModel.get('roundCap');\n    var MainPath = roundCap ? Sausage : graphic.Sector;\n    var showAxis = axisLineModel.get('show');\n    var lineStyleModel = axisLineModel.getModel('lineStyle');\n    var axisLineWidth = lineStyleModel.get('width');\n    var angleRangeSpan = !((endAngle - startAngle) % PI2) && endAngle !== startAngle ? PI2 : (endAngle - startAngle) % PI2;\n    var prevEndAngle = startAngle;\n\n    for (var i = 0; showAxis && i < colorList.length; i++) {\n      // Clamp\n      var percent = Math.min(Math.max(colorList[i][0], 0), 1);\n      endAngle = startAngle + angleRangeSpan * percent;\n      var sector = new MainPath({\n        shape: {\n          startAngle: prevEndAngle,\n          endAngle: endAngle,\n          cx: posInfo.cx,\n          cy: posInfo.cy,\n          clockwise: clockwise,\n          r0: posInfo.r - axisLineWidth,\n          r: posInfo.r\n        },\n        silent: true\n      });\n      sector.setStyle({\n        fill: colorList[i][1]\n      });\n      sector.setStyle(lineStyleModel.getLineStyle( // Because we use sector to simulate arc\n      // so the properties for stroking are useless\n      ['color', 'width']));\n      group.add(sector);\n      prevEndAngle = endAngle;\n    }\n\n    var getColor = function getColor(percent) {\n      // Less than 0\n      if (percent <= 0) {\n        return colorList[0][1];\n      }\n\n      var i;\n\n      for (i = 0; i < colorList.length; i++) {\n        if (colorList[i][0] >= percent && (i === 0 ? 0 : colorList[i - 1][0]) < percent) {\n          return colorList[i][1];\n        }\n      } // More than 1\n\n\n      return colorList[i - 1][1];\n    };\n\n    if (!clockwise) {\n      var tmp = startAngle;\n      startAngle = endAngle;\n      endAngle = tmp;\n    }\n\n    this._renderTicks(seriesModel, ecModel, api, getColor, posInfo, startAngle, endAngle, clockwise, axisLineWidth);\n\n    this._renderTitleAndDetail(seriesModel, ecModel, api, getColor, posInfo);\n\n    this._renderAnchor(seriesModel, posInfo);\n\n    this._renderPointer(seriesModel, ecModel, api, getColor, posInfo, startAngle, endAngle, clockwise, axisLineWidth);\n  };\n\n  GaugeView.prototype._renderTicks = function (seriesModel, ecModel, api, getColor, posInfo, startAngle, endAngle, clockwise, axisLineWidth) {\n    var group = this.group;\n    var cx = posInfo.cx;\n    var cy = posInfo.cy;\n    var r = posInfo.r;\n    var minVal = +seriesModel.get('min');\n    var maxVal = +seriesModel.get('max');\n    var splitLineModel = seriesModel.getModel('splitLine');\n    var tickModel = seriesModel.getModel('axisTick');\n    var labelModel = seriesModel.getModel('axisLabel');\n    var splitNumber = seriesModel.get('splitNumber');\n    var subSplitNumber = tickModel.get('splitNumber');\n    var splitLineLen = parsePercent(splitLineModel.get('length'), r);\n    var tickLen = parsePercent(tickModel.get('length'), r);\n    var angle = startAngle;\n    var step = (endAngle - startAngle) / splitNumber;\n    var subStep = step / subSplitNumber;\n    var splitLineStyle = splitLineModel.getModel('lineStyle').getLineStyle();\n    var tickLineStyle = tickModel.getModel('lineStyle').getLineStyle();\n    var splitLineDistance = splitLineModel.get('distance');\n    var unitX;\n    var unitY;\n\n    for (var i = 0; i <= splitNumber; i++) {\n      unitX = Math.cos(angle);\n      unitY = Math.sin(angle); // Split line\n\n      if (splitLineModel.get('show')) {\n        var distance = splitLineDistance ? splitLineDistance + axisLineWidth : axisLineWidth;\n        var splitLine = new graphic.Line({\n          shape: {\n            x1: unitX * (r - distance) + cx,\n            y1: unitY * (r - distance) + cy,\n            x2: unitX * (r - splitLineLen - distance) + cx,\n            y2: unitY * (r - splitLineLen - distance) + cy\n          },\n          style: splitLineStyle,\n          silent: true\n        });\n\n        if (splitLineStyle.stroke === 'auto') {\n          splitLine.setStyle({\n            stroke: getColor(i / splitNumber)\n          });\n        }\n\n        group.add(splitLine);\n      } // Label\n\n\n      if (labelModel.get('show')) {\n        var distance = labelModel.get('distance') + splitLineDistance;\n        var label = formatLabel(round(i / splitNumber * (maxVal - minVal) + minVal), labelModel.get('formatter'));\n        var autoColor = getColor(i / splitNumber);\n        group.add(new graphic.Text({\n          style: createTextStyle(labelModel, {\n            text: label,\n            x: unitX * (r - splitLineLen - distance) + cx,\n            y: unitY * (r - splitLineLen - distance) + cy,\n            verticalAlign: unitY < -0.8 ? 'top' : unitY > 0.8 ? 'bottom' : 'middle',\n            align: unitX < -0.4 ? 'left' : unitX > 0.4 ? 'right' : 'center'\n          }, {\n            inheritColor: autoColor\n          }),\n          silent: true\n        }));\n      } // Axis tick\n\n\n      if (tickModel.get('show') && i !== splitNumber) {\n        var distance = tickModel.get('distance');\n        distance = distance ? distance + axisLineWidth : axisLineWidth;\n\n        for (var j = 0; j <= subSplitNumber; j++) {\n          unitX = Math.cos(angle);\n          unitY = Math.sin(angle);\n          var tickLine = new graphic.Line({\n            shape: {\n              x1: unitX * (r - distance) + cx,\n              y1: unitY * (r - distance) + cy,\n              x2: unitX * (r - tickLen - distance) + cx,\n              y2: unitY * (r - tickLen - distance) + cy\n            },\n            silent: true,\n            style: tickLineStyle\n          });\n\n          if (tickLineStyle.stroke === 'auto') {\n            tickLine.setStyle({\n              stroke: getColor((i + j / subSplitNumber) / splitNumber)\n            });\n          }\n\n          group.add(tickLine);\n          angle += subStep;\n        }\n\n        angle -= subStep;\n      } else {\n        angle += step;\n      }\n    }\n  };\n\n  GaugeView.prototype._renderPointer = function (seriesModel, ecModel, api, getColor, posInfo, startAngle, endAngle, clockwise, axisLineWidth) {\n    var group = this.group;\n    var oldData = this._data;\n    var oldProgressData = this._progressEls;\n    var progressList = [];\n    var showPointer = seriesModel.get(['pointer', 'show']);\n    var progressModel = seriesModel.getModel('progress');\n    var showProgress = progressModel.get('show');\n    var data = seriesModel.getData();\n    var valueDim = data.mapDimension('value');\n    var minVal = +seriesModel.get('min');\n    var maxVal = +seriesModel.get('max');\n    var valueExtent = [minVal, maxVal];\n    var angleExtent = [startAngle, endAngle];\n\n    function createPointer(idx, angle) {\n      var itemModel = data.getItemModel(idx);\n      var pointerModel = itemModel.getModel('pointer');\n      var pointerWidth = parsePercent(pointerModel.get('width'), posInfo.r);\n      var pointerLength = parsePercent(pointerModel.get('length'), posInfo.r);\n      var pointerStr = seriesModel.get(['pointer', 'icon']);\n      var pointerOffset = pointerModel.get('offsetCenter');\n      var pointerOffsetX = parsePercent(pointerOffset[0], posInfo.r);\n      var pointerOffsetY = parsePercent(pointerOffset[1], posInfo.r);\n      var pointerKeepAspect = pointerModel.get('keepAspect');\n      var pointer; // not exist icon type will be set 'rect'\n\n      if (pointerStr) {\n        pointer = createSymbol(pointerStr, pointerOffsetX - pointerWidth / 2, pointerOffsetY - pointerLength, pointerWidth, pointerLength, null, pointerKeepAspect);\n      } else {\n        pointer = new PointerPath({\n          shape: {\n            angle: -Math.PI / 2,\n            width: pointerWidth,\n            r: pointerLength,\n            x: pointerOffsetX,\n            y: pointerOffsetY\n          }\n        });\n      }\n\n      pointer.rotation = -(angle + Math.PI / 2);\n      pointer.x = posInfo.cx;\n      pointer.y = posInfo.cy;\n      return pointer;\n    }\n\n    function createProgress(idx, endAngle) {\n      var roundCap = progressModel.get('roundCap');\n      var ProgressPath = roundCap ? Sausage : graphic.Sector;\n      var isOverlap = progressModel.get('overlap');\n      var progressWidth = isOverlap ? progressModel.get('width') : axisLineWidth / data.count();\n      var r0 = isOverlap ? posInfo.r - progressWidth : posInfo.r - (idx + 1) * progressWidth;\n      var r = isOverlap ? posInfo.r : posInfo.r - idx * progressWidth;\n      var progress = new ProgressPath({\n        shape: {\n          startAngle: startAngle,\n          endAngle: endAngle,\n          cx: posInfo.cx,\n          cy: posInfo.cy,\n          clockwise: clockwise,\n          r0: r0,\n          r: r\n        }\n      });\n      isOverlap && (progress.z2 = maxVal - data.get(valueDim, idx) % maxVal);\n      return progress;\n    }\n\n    if (showProgress || showPointer) {\n      data.diff(oldData).add(function (idx) {\n        if (showPointer) {\n          var pointer = createPointer(idx, startAngle);\n          graphic.initProps(pointer, {\n            rotation: -(linearMap(data.get(valueDim, idx), valueExtent, angleExtent, true) + Math.PI / 2)\n          }, seriesModel);\n          group.add(pointer);\n          data.setItemGraphicEl(idx, pointer);\n        }\n\n        if (showProgress) {\n          var progress = createProgress(idx, startAngle);\n          var isClip = progressModel.get('clip');\n          graphic.initProps(progress, {\n            shape: {\n              endAngle: linearMap(data.get(valueDim, idx), valueExtent, angleExtent, isClip)\n            }\n          }, seriesModel);\n          group.add(progress); // Add data index and series index for indexing the data by element\n          // Useful in tooltip\n\n          setCommonECData(seriesModel.seriesIndex, data.dataType, idx, progress);\n          progressList[idx] = progress;\n        }\n      }).update(function (newIdx, oldIdx) {\n        if (showPointer) {\n          var previousPointer = oldData.getItemGraphicEl(oldIdx);\n          var previousRotate = previousPointer ? previousPointer.rotation : startAngle;\n          var pointer = createPointer(newIdx, previousRotate);\n          pointer.rotation = previousRotate;\n          graphic.updateProps(pointer, {\n            rotation: -(linearMap(data.get(valueDim, newIdx), valueExtent, angleExtent, true) + Math.PI / 2)\n          }, seriesModel);\n          group.add(pointer);\n          data.setItemGraphicEl(newIdx, pointer);\n        }\n\n        if (showProgress) {\n          var previousProgress = oldProgressData[oldIdx];\n          var previousEndAngle = previousProgress ? previousProgress.shape.endAngle : startAngle;\n          var progress = createProgress(newIdx, previousEndAngle);\n          var isClip = progressModel.get('clip');\n          graphic.updateProps(progress, {\n            shape: {\n              endAngle: linearMap(data.get(valueDim, newIdx), valueExtent, angleExtent, isClip)\n            }\n          }, seriesModel);\n          group.add(progress); // Add data index and series index for indexing the data by element\n          // Useful in tooltip\n\n          setCommonECData(seriesModel.seriesIndex, data.dataType, newIdx, progress);\n          progressList[newIdx] = progress;\n        }\n      }).execute();\n      data.each(function (idx) {\n        var itemModel = data.getItemModel(idx);\n        var emphasisModel = itemModel.getModel('emphasis');\n\n        if (showPointer) {\n          var pointer = data.getItemGraphicEl(idx);\n          var symbolStyle = data.getItemVisual(idx, 'style');\n          var visualColor = symbolStyle.fill;\n\n          if (pointer instanceof ZRImage) {\n            var pathStyle = pointer.style;\n            pointer.useStyle(extend({\n              image: pathStyle.image,\n              x: pathStyle.x,\n              y: pathStyle.y,\n              width: pathStyle.width,\n              height: pathStyle.height\n            }, symbolStyle));\n          } else {\n            pointer.useStyle(symbolStyle);\n            pointer.type !== 'pointer' && pointer.setColor(visualColor);\n          }\n\n          pointer.setStyle(itemModel.getModel(['pointer', 'itemStyle']).getItemStyle());\n\n          if (pointer.style.fill === 'auto') {\n            pointer.setStyle('fill', getColor(linearMap(data.get(valueDim, idx), valueExtent, [0, 1], true)));\n          }\n\n          pointer.z2EmphasisLift = 0;\n          setStatesStylesFromModel(pointer, itemModel);\n          enableHoverEmphasis(pointer, emphasisModel.get('focus'), emphasisModel.get('blurScope'));\n        }\n\n        if (showProgress) {\n          var progress = progressList[idx];\n          progress.useStyle(data.getItemVisual(idx, 'style'));\n          progress.setStyle(itemModel.getModel(['progress', 'itemStyle']).getItemStyle());\n          progress.z2EmphasisLift = 0;\n          setStatesStylesFromModel(progress, itemModel);\n          enableHoverEmphasis(progress, emphasisModel.get('focus'), emphasisModel.get('blurScope'));\n        }\n      });\n      this._progressEls = progressList;\n    }\n  };\n\n  GaugeView.prototype._renderAnchor = function (seriesModel, posInfo) {\n    var anchorModel = seriesModel.getModel('anchor');\n    var showAnchor = anchorModel.get('show');\n\n    if (showAnchor) {\n      var anchorSize = anchorModel.get('size');\n      var anchorType = anchorModel.get('icon');\n      var offsetCenter = anchorModel.get('offsetCenter');\n      var anchorKeepAspect = anchorModel.get('keepAspect');\n      var anchor = createSymbol(anchorType, posInfo.cx - anchorSize / 2 + parsePercent(offsetCenter[0], posInfo.r), posInfo.cy - anchorSize / 2 + parsePercent(offsetCenter[1], posInfo.r), anchorSize, anchorSize, null, anchorKeepAspect);\n      anchor.z2 = anchorModel.get('showAbove') ? 1 : 0;\n      anchor.setStyle(anchorModel.getModel('itemStyle').getItemStyle());\n      this.group.add(anchor);\n    }\n  };\n\n  GaugeView.prototype._renderTitleAndDetail = function (seriesModel, ecModel, api, getColor, posInfo) {\n    var _this = this;\n\n    var data = seriesModel.getData();\n    var valueDim = data.mapDimension('value');\n    var minVal = +seriesModel.get('min');\n    var maxVal = +seriesModel.get('max');\n    var contentGroup = new graphic.Group();\n    var newTitleEls = [];\n    var newDetailEls = [];\n    var hasAnimation = seriesModel.isAnimationEnabled();\n    var showPointerAbove = seriesModel.get(['pointer', 'showAbove']);\n    data.diff(this._data).add(function (idx) {\n      newTitleEls[idx] = new graphic.Text({\n        silent: true\n      });\n      newDetailEls[idx] = new graphic.Text({\n        silent: true\n      });\n    }).update(function (idx, oldIdx) {\n      newTitleEls[idx] = _this._titleEls[oldIdx];\n      newDetailEls[idx] = _this._detailEls[oldIdx];\n    }).execute();\n    data.each(function (idx) {\n      var itemModel = data.getItemModel(idx);\n      var value = data.get(valueDim, idx);\n      var itemGroup = new graphic.Group();\n      var autoColor = getColor(linearMap(value, [minVal, maxVal], [0, 1], true));\n      var itemTitleModel = itemModel.getModel('title');\n\n      if (itemTitleModel.get('show')) {\n        var titleOffsetCenter = itemTitleModel.get('offsetCenter');\n        var titleX = posInfo.cx + parsePercent(titleOffsetCenter[0], posInfo.r);\n        var titleY = posInfo.cy + parsePercent(titleOffsetCenter[1], posInfo.r);\n        var labelEl = newTitleEls[idx];\n        labelEl.attr({\n          z2: showPointerAbove ? 0 : 2,\n          style: createTextStyle(itemTitleModel, {\n            x: titleX,\n            y: titleY,\n            text: data.getName(idx),\n            align: 'center',\n            verticalAlign: 'middle'\n          }, {\n            inheritColor: autoColor\n          })\n        });\n        itemGroup.add(labelEl);\n      }\n\n      var itemDetailModel = itemModel.getModel('detail');\n\n      if (itemDetailModel.get('show')) {\n        var detailOffsetCenter = itemDetailModel.get('offsetCenter');\n        var detailX = posInfo.cx + parsePercent(detailOffsetCenter[0], posInfo.r);\n        var detailY = posInfo.cy + parsePercent(detailOffsetCenter[1], posInfo.r);\n        var width = parsePercent(itemDetailModel.get('width'), posInfo.r);\n        var height = parsePercent(itemDetailModel.get('height'), posInfo.r);\n        var detailColor = seriesModel.get(['progress', 'show']) ? data.getItemVisual(idx, 'style').fill : autoColor;\n        var labelEl = newDetailEls[idx];\n        var formatter_1 = itemDetailModel.get('formatter');\n        labelEl.attr({\n          z2: showPointerAbove ? 0 : 2,\n          style: createTextStyle(itemDetailModel, {\n            x: detailX,\n            y: detailY,\n            text: formatLabel(value, formatter_1),\n            width: isNaN(width) ? null : width,\n            height: isNaN(height) ? null : height,\n            align: 'center',\n            verticalAlign: 'middle'\n          }, {\n            inheritColor: detailColor\n          })\n        });\n        setLabelValueAnimation(labelEl, {\n          normal: itemDetailModel\n        }, value, function (value) {\n          return formatLabel(value, formatter_1);\n        });\n        hasAnimation && animateLabelValue(labelEl, idx, data, seriesModel, {\n          getFormattedLabel: function getFormattedLabel(labelDataIndex, status, dataType, labelDimIndex, fmt, extendParams) {\n            return formatLabel(extendParams ? extendParams.interpolatedValue : value, formatter_1);\n          }\n        });\n        itemGroup.add(labelEl);\n      }\n\n      contentGroup.add(itemGroup);\n    });\n    this.group.add(contentGroup);\n    this._titleEls = newTitleEls;\n    this._detailEls = newDetailEls;\n  };\n\n  GaugeView.type = 'gauge';\n  return GaugeView;\n}(ChartView);\n\nexport default GaugeView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport createSeriesDataSimply from '../helper/createSeriesDataSimply';\nimport SeriesModel from '../../model/Series';\n\nvar GaugeSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(GaugeSeriesModel, _super);\n\n  function GaugeSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = GaugeSeriesModel.type;\n    _this.visualStyleAccessPath = 'itemStyle';\n    return _this;\n  }\n\n  GaugeSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesDataSimply(this, ['value']);\n  };\n\n  GaugeSeriesModel.type = 'series.gauge';\n  GaugeSeriesModel.defaultOption = {\n    zlevel: 0,\n    z: 2,\n    colorBy: 'data',\n    // \n    center: ['50%', '50%'],\n    legendHoverLink: true,\n    radius: '75%',\n    startAngle: 225,\n    endAngle: -45,\n    clockwise: true,\n    // \n    min: 0,\n    // \n    max: 100,\n    // 10\n    splitNumber: 10,\n    // \n    axisLine: {\n      // show\n      show: true,\n      roundCap: false,\n      lineStyle: {\n        color: [[1, '#E6EBF8']],\n        width: 10\n      }\n    },\n    // \n    progress: {\n      // show\n      show: false,\n      overlap: true,\n      width: 10,\n      roundCap: false,\n      clip: true\n    },\n    // \n    splitLine: {\n      // show\n      show: true,\n      // length\n      length: 10,\n      distance: 10,\n      // lineStylelineStyle\n      lineStyle: {\n        color: '#63677A',\n        width: 3,\n        type: 'solid'\n      }\n    },\n    // \n    axisTick: {\n      // show\n      show: true,\n      // split\n      splitNumber: 5,\n      // length\n      length: 6,\n      distance: 10,\n      // lineStyle\n      lineStyle: {\n        color: '#63677A',\n        width: 1,\n        type: 'solid'\n      }\n    },\n    axisLabel: {\n      show: true,\n      distance: 15,\n      // formatter: null,\n      color: '#464646',\n      fontSize: 12\n    },\n    pointer: {\n      icon: null,\n      offsetCenter: [0, 0],\n      show: true,\n      showAbove: true,\n      length: '60%',\n      width: 6,\n      keepAspect: false\n    },\n    anchor: {\n      show: false,\n      showAbove: false,\n      size: 6,\n      icon: 'circle',\n      offsetCenter: [0, 0],\n      keepAspect: false,\n      itemStyle: {\n        color: '#fff',\n        borderWidth: 0,\n        borderColor: '#5470c6'\n      }\n    },\n    title: {\n      show: true,\n      // x, ypx\n      offsetCenter: [0, '20%'],\n      // TEXTSTYLE\n      color: '#464646',\n      fontSize: 16,\n      valueAnimation: false\n    },\n    detail: {\n      show: true,\n      backgroundColor: 'rgba(0,0,0,0)',\n      borderWidth: 0,\n      borderColor: '#ccc',\n      width: 100,\n      height: null,\n      padding: [5, 10],\n      // x, ypx\n      offsetCenter: [0, '40%'],\n      // formatter: null,\n      // TEXTSTYLE\n      color: '#464646',\n      fontSize: 30,\n      fontWeight: 'bold',\n      lineHeight: 30,\n      valueAnimation: false\n    }\n  };\n  return GaugeSeriesModel;\n}(SeriesModel);\n\nexport default GaugeSeriesModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic';\nimport { setStatesStylesFromModel, enableHoverEmphasis } from '../../util/states';\nimport ChartView from '../../view/Chart';\nimport { setLabelLineStyle, getLabelLineStatesModels } from '../../label/labelGuideHelper';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle';\nimport { saveOldStyle } from '../../animation/basicTrasition';\nvar opacityAccessPath = ['itemStyle', 'opacity'];\n/**\n * Piece of pie including Sector, Label, LabelLine\n */\n\nvar FunnelPiece =\n/** @class */\nfunction (_super) {\n  __extends(FunnelPiece, _super);\n\n  function FunnelPiece(data, idx) {\n    var _this = _super.call(this) || this;\n\n    var polygon = _this;\n    var labelLine = new graphic.Polyline();\n    var text = new graphic.Text();\n    polygon.setTextContent(text);\n\n    _this.setTextGuideLine(labelLine);\n\n    _this.updateData(data, idx, true);\n\n    return _this;\n  }\n\n  FunnelPiece.prototype.updateData = function (data, idx, firstCreate) {\n    var polygon = this;\n    var seriesModel = data.hostModel;\n    var itemModel = data.getItemModel(idx);\n    var layout = data.getItemLayout(idx);\n    var emphasisModel = itemModel.getModel('emphasis');\n    var opacity = itemModel.get(opacityAccessPath);\n    opacity = opacity == null ? 1 : opacity;\n\n    if (!firstCreate) {\n      saveOldStyle(polygon);\n    } // Update common style\n\n\n    polygon.useStyle(data.getItemVisual(idx, 'style'));\n    polygon.style.lineJoin = 'round';\n\n    if (firstCreate) {\n      polygon.setShape({\n        points: layout.points\n      });\n      polygon.style.opacity = 0;\n      graphic.initProps(polygon, {\n        style: {\n          opacity: opacity\n        }\n      }, seriesModel, idx);\n    } else {\n      graphic.updateProps(polygon, {\n        style: {\n          opacity: opacity\n        },\n        shape: {\n          points: layout.points\n        }\n      }, seriesModel, idx);\n    }\n\n    setStatesStylesFromModel(polygon, itemModel);\n\n    this._updateLabel(data, idx);\n\n    enableHoverEmphasis(this, emphasisModel.get('focus'), emphasisModel.get('blurScope'));\n  };\n\n  FunnelPiece.prototype._updateLabel = function (data, idx) {\n    var polygon = this;\n    var labelLine = this.getTextGuideLine();\n    var labelText = polygon.getTextContent();\n    var seriesModel = data.hostModel;\n    var itemModel = data.getItemModel(idx);\n    var layout = data.getItemLayout(idx);\n    var labelLayout = layout.label;\n    var style = data.getItemVisual(idx, 'style');\n    var visualColor = style.fill;\n    setLabelStyle( // position will not be used in setLabelStyle\n    labelText, getLabelStatesModels(itemModel), {\n      labelFetcher: data.hostModel,\n      labelDataIndex: idx,\n      defaultOpacity: style.opacity,\n      defaultText: data.getName(idx)\n    }, {\n      normal: {\n        align: labelLayout.textAlign,\n        verticalAlign: labelLayout.verticalAlign\n      }\n    });\n    polygon.setTextConfig({\n      local: true,\n      inside: !!labelLayout.inside,\n      insideStroke: visualColor,\n      // insideFill: 'auto',\n      outsideFill: visualColor\n    });\n    var linePoints = labelLayout.linePoints;\n    labelLine.setShape({\n      points: linePoints\n    });\n    polygon.textGuideLineConfig = {\n      anchor: linePoints ? new graphic.Point(linePoints[0][0], linePoints[0][1]) : null\n    }; // Make sure update style on labelText after setLabelStyle.\n    // Because setLabelStyle will replace a new style on it.\n\n    graphic.updateProps(labelText, {\n      style: {\n        x: labelLayout.x,\n        y: labelLayout.y\n      }\n    }, seriesModel, idx);\n    labelText.attr({\n      rotation: labelLayout.rotation,\n      originX: labelLayout.x,\n      originY: labelLayout.y,\n      z2: 10\n    });\n    setLabelLineStyle(polygon, getLabelLineStatesModels(itemModel), {\n      // Default use item visual color\n      stroke: visualColor\n    });\n  };\n\n  return FunnelPiece;\n}(graphic.Polygon);\n\nvar FunnelView =\n/** @class */\nfunction (_super) {\n  __extends(FunnelView, _super);\n\n  function FunnelView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = FunnelView.type;\n    _this.ignoreLabelLineUpdate = true;\n    return _this;\n  }\n\n  FunnelView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var group = this.group;\n    data.diff(oldData).add(function (idx) {\n      var funnelPiece = new FunnelPiece(data, idx);\n      data.setItemGraphicEl(idx, funnelPiece);\n      group.add(funnelPiece);\n    }).update(function (newIdx, oldIdx) {\n      var piece = oldData.getItemGraphicEl(oldIdx);\n      piece.updateData(data, newIdx);\n      group.add(piece);\n      data.setItemGraphicEl(newIdx, piece);\n    }).remove(function (idx) {\n      var piece = oldData.getItemGraphicEl(idx);\n      graphic.removeElementWithFadeOut(piece, seriesModel, idx);\n    }).execute();\n    this._data = data;\n  };\n\n  FunnelView.prototype.remove = function () {\n    this.group.removeAll();\n    this._data = null;\n  };\n\n  FunnelView.prototype.dispose = function () {};\n\n  FunnelView.type = 'funnel';\n  return FunnelView;\n}(ChartView);\n\nexport default FunnelView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport createSeriesDataSimply from '../helper/createSeriesDataSimply';\nimport { defaultEmphasis } from '../../util/model';\nimport { makeSeriesEncodeForNameBased } from '../../data/helper/sourceHelper';\nimport LegendVisualProvider from '../../visual/LegendVisualProvider';\nimport SeriesModel from '../../model/Series';\n\nvar FunnelSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(FunnelSeriesModel, _super);\n\n  function FunnelSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = FunnelSeriesModel.type;\n    return _this;\n  }\n\n  FunnelSeriesModel.prototype.init = function (option) {\n    _super.prototype.init.apply(this, arguments); // Enable legend selection for each data item\n    // Use a function instead of direct access because data reference may changed\n\n\n    this.legendVisualProvider = new LegendVisualProvider(zrUtil.bind(this.getData, this), zrUtil.bind(this.getRawData, this)); // Extend labelLine emphasis\n\n    this._defaultLabelLine(option);\n  };\n\n  FunnelSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesDataSimply(this, {\n      coordDimensions: ['value'],\n      encodeDefaulter: zrUtil.curry(makeSeriesEncodeForNameBased, this)\n    });\n  };\n\n  FunnelSeriesModel.prototype._defaultLabelLine = function (option) {\n    // Extend labelLine emphasis\n    defaultEmphasis(option, 'labelLine', ['show']);\n    var labelLineNormalOpt = option.labelLine;\n    var labelLineEmphasisOpt = option.emphasis.labelLine; // Not show label line if `label.normal.show = false`\n\n    labelLineNormalOpt.show = labelLineNormalOpt.show && option.label.show;\n    labelLineEmphasisOpt.show = labelLineEmphasisOpt.show && option.emphasis.label.show;\n  }; // Overwrite\n\n\n  FunnelSeriesModel.prototype.getDataParams = function (dataIndex) {\n    var data = this.getData();\n\n    var params = _super.prototype.getDataParams.call(this, dataIndex);\n\n    var valueDim = data.mapDimension('value');\n    var sum = data.getSum(valueDim); // Percent is 0 if sum is 0\n\n    params.percent = !sum ? 0 : +(data.get(valueDim, dataIndex) / sum * 100).toFixed(2);\n    params.$vars.push('percent');\n    return params;\n  };\n\n  FunnelSeriesModel.type = 'series.funnel';\n  FunnelSeriesModel.defaultOption = {\n    zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    colorBy: 'data',\n    left: 80,\n    top: 60,\n    right: 80,\n    bottom: 60,\n    // width: {totalWidth} - left - right,\n    // height: {totalHeight} - top - bottom,\n    // \n    // min: 0,\n    // max: 100,\n    minSize: '0%',\n    maxSize: '100%',\n    sort: 'descending',\n    orient: 'vertical',\n    gap: 0,\n    funnelAlign: 'center',\n    label: {\n      show: true,\n      position: 'outer' // formatter: Tooltip.formatter\n\n    },\n    labelLine: {\n      show: true,\n      length: 20,\n      lineStyle: {\n        // color: ,\n        width: 1\n      }\n    },\n    itemStyle: {\n      // color: ,\n      borderColor: '#fff',\n      borderWidth: 1\n    },\n    emphasis: {\n      label: {\n        show: true\n      }\n    },\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    }\n  };\n  return FunnelSeriesModel;\n}(SeriesModel);\n\nexport default FunnelSeriesModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as layout from '../../util/layout';\nimport { parsePercent, linearMap } from '../../util/number';\n\nfunction getViewRect(seriesModel, api) {\n  return layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n}\n\nfunction getSortedIndices(data, sort) {\n  var valueDim = data.mapDimension('value');\n  var valueArr = data.mapArray(valueDim, function (val) {\n    return val;\n  });\n  var indices = [];\n  var isAscending = sort === 'ascending';\n\n  for (var i = 0, len = data.count(); i < len; i++) {\n    indices[i] = i;\n  } // Add custom sortable function & none sortable opetion by \"options.sort\"\n\n\n  if (typeof sort === 'function') {\n    indices.sort(sort);\n  } else if (sort !== 'none') {\n    indices.sort(function (a, b) {\n      return isAscending ? valueArr[a] - valueArr[b] : valueArr[b] - valueArr[a];\n    });\n  }\n\n  return indices;\n}\n\nfunction labelLayout(data) {\n  var seriesModel = data.hostModel;\n  var orient = seriesModel.get('orient');\n  data.each(function (idx) {\n    var itemModel = data.getItemModel(idx);\n    var labelModel = itemModel.getModel('label');\n    var labelPosition = labelModel.get('position');\n    var labelLineModel = itemModel.getModel('labelLine');\n    var layout = data.getItemLayout(idx);\n    var points = layout.points;\n    var isLabelInside = labelPosition === 'inner' || labelPosition === 'inside' || labelPosition === 'center' || labelPosition === 'insideLeft' || labelPosition === 'insideRight';\n    var textAlign;\n    var textX;\n    var textY;\n    var linePoints;\n\n    if (isLabelInside) {\n      if (labelPosition === 'insideLeft') {\n        textX = (points[0][0] + points[3][0]) / 2 + 5;\n        textY = (points[0][1] + points[3][1]) / 2;\n        textAlign = 'left';\n      } else if (labelPosition === 'insideRight') {\n        textX = (points[1][0] + points[2][0]) / 2 - 5;\n        textY = (points[1][1] + points[2][1]) / 2;\n        textAlign = 'right';\n      } else {\n        textX = (points[0][0] + points[1][0] + points[2][0] + points[3][0]) / 4;\n        textY = (points[0][1] + points[1][1] + points[2][1] + points[3][1]) / 4;\n        textAlign = 'center';\n      }\n\n      linePoints = [[textX, textY], [textX, textY]];\n    } else {\n      var x1 = void 0;\n      var y1 = void 0;\n      var x2 = void 0;\n      var y2 = void 0;\n      var labelLineLen = labelLineModel.get('length');\n\n      if (process.env.NODE_ENV !== 'production') {\n        if (orient === 'vertical' && ['top', 'bottom'].indexOf(labelPosition) > -1) {\n          labelPosition = 'left';\n          console.warn('Position error: Funnel chart on vertical orient dose not support top and bottom.');\n        }\n\n        if (orient === 'horizontal' && ['left', 'right'].indexOf(labelPosition) > -1) {\n          labelPosition = 'bottom';\n          console.warn('Position error: Funnel chart on horizontal orient dose not support left and right.');\n        }\n      }\n\n      if (labelPosition === 'left') {\n        // Left side\n        x1 = (points[3][0] + points[0][0]) / 2;\n        y1 = (points[3][1] + points[0][1]) / 2;\n        x2 = x1 - labelLineLen;\n        textX = x2 - 5;\n        textAlign = 'right';\n      } else if (labelPosition === 'right') {\n        // Right side\n        x1 = (points[1][0] + points[2][0]) / 2;\n        y1 = (points[1][1] + points[2][1]) / 2;\n        x2 = x1 + labelLineLen;\n        textX = x2 + 5;\n        textAlign = 'left';\n      } else if (labelPosition === 'top') {\n        // Top side\n        x1 = (points[3][0] + points[0][0]) / 2;\n        y1 = (points[3][1] + points[0][1]) / 2;\n        y2 = y1 - labelLineLen;\n        textY = y2 - 5;\n        textAlign = 'center';\n      } else if (labelPosition === 'bottom') {\n        // Bottom side\n        x1 = (points[1][0] + points[2][0]) / 2;\n        y1 = (points[1][1] + points[2][1]) / 2;\n        y2 = y1 + labelLineLen;\n        textY = y2 + 5;\n        textAlign = 'center';\n      } else if (labelPosition === 'rightTop') {\n        // RightTop side\n        x1 = orient === 'horizontal' ? points[3][0] : points[1][0];\n        y1 = orient === 'horizontal' ? points[3][1] : points[1][1];\n\n        if (orient === 'horizontal') {\n          y2 = y1 - labelLineLen;\n          textY = y2 - 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 + labelLineLen;\n          textX = x2 + 5;\n          textAlign = 'top';\n        }\n      } else if (labelPosition === 'rightBottom') {\n        // RightBottom side\n        x1 = points[2][0];\n        y1 = points[2][1];\n\n        if (orient === 'horizontal') {\n          y2 = y1 + labelLineLen;\n          textY = y2 + 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 + labelLineLen;\n          textX = x2 + 5;\n          textAlign = 'bottom';\n        }\n      } else if (labelPosition === 'leftTop') {\n        // LeftTop side\n        x1 = points[0][0];\n        y1 = orient === 'horizontal' ? points[0][1] : points[1][1];\n\n        if (orient === 'horizontal') {\n          y2 = y1 - labelLineLen;\n          textY = y2 - 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 - labelLineLen;\n          textX = x2 - 5;\n          textAlign = 'right';\n        }\n      } else if (labelPosition === 'leftBottom') {\n        // LeftBottom side\n        x1 = orient === 'horizontal' ? points[1][0] : points[3][0];\n        y1 = orient === 'horizontal' ? points[1][1] : points[2][1];\n\n        if (orient === 'horizontal') {\n          y2 = y1 + labelLineLen;\n          textY = y2 + 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 - labelLineLen;\n          textX = x2 - 5;\n          textAlign = 'right';\n        }\n      } else {\n        // Right side or Bottom side\n        x1 = (points[1][0] + points[2][0]) / 2;\n        y1 = (points[1][1] + points[2][1]) / 2;\n\n        if (orient === 'horizontal') {\n          y2 = y1 + labelLineLen;\n          textY = y2 + 5;\n          textAlign = 'center';\n        } else {\n          x2 = x1 + labelLineLen;\n          textX = x2 + 5;\n          textAlign = 'left';\n        }\n      }\n\n      if (orient === 'horizontal') {\n        x2 = x1;\n        textX = x2;\n      } else {\n        y2 = y1;\n        textY = y2;\n      }\n\n      linePoints = [[x1, y1], [x2, y2]];\n    }\n\n    layout.label = {\n      linePoints: linePoints,\n      x: textX,\n      y: textY,\n      verticalAlign: 'middle',\n      textAlign: textAlign,\n      inside: isLabelInside\n    };\n  });\n}\n\nexport default function funnelLayout(ecModel, api) {\n  ecModel.eachSeriesByType('funnel', function (seriesModel) {\n    var data = seriesModel.getData();\n    var valueDim = data.mapDimension('value');\n    var sort = seriesModel.get('sort');\n    var viewRect = getViewRect(seriesModel, api);\n    var orient = seriesModel.get('orient');\n    var viewWidth = viewRect.width;\n    var viewHeight = viewRect.height;\n    var indices = getSortedIndices(data, sort);\n    var x = viewRect.x;\n    var y = viewRect.y;\n    var sizeExtent = orient === 'horizontal' ? [parsePercent(seriesModel.get('minSize'), viewHeight), parsePercent(seriesModel.get('maxSize'), viewHeight)] : [parsePercent(seriesModel.get('minSize'), viewWidth), parsePercent(seriesModel.get('maxSize'), viewWidth)];\n    var dataExtent = data.getDataExtent(valueDim);\n    var min = seriesModel.get('min');\n    var max = seriesModel.get('max');\n\n    if (min == null) {\n      min = Math.min(dataExtent[0], 0);\n    }\n\n    if (max == null) {\n      max = dataExtent[1];\n    }\n\n    var funnelAlign = seriesModel.get('funnelAlign');\n    var gap = seriesModel.get('gap');\n    var viewSize = orient === 'horizontal' ? viewWidth : viewHeight;\n    var itemSize = (viewSize - gap * (data.count() - 1)) / data.count();\n\n    var getLinePoints = function getLinePoints(idx, offset) {\n      // End point index is data.count() and we assign it 0\n      if (orient === 'horizontal') {\n        var val_1 = data.get(valueDim, idx) || 0;\n        var itemHeight = linearMap(val_1, [min, max], sizeExtent, true);\n        var y0 = void 0;\n\n        switch (funnelAlign) {\n          case 'top':\n            y0 = y;\n            break;\n\n          case 'center':\n            y0 = y + (viewHeight - itemHeight) / 2;\n            break;\n\n          case 'bottom':\n            y0 = y + (viewHeight - itemHeight);\n            break;\n        }\n\n        return [[offset, y0], [offset, y0 + itemHeight]];\n      }\n\n      var val = data.get(valueDim, idx) || 0;\n      var itemWidth = linearMap(val, [min, max], sizeExtent, true);\n      var x0;\n\n      switch (funnelAlign) {\n        case 'left':\n          x0 = x;\n          break;\n\n        case 'center':\n          x0 = x + (viewWidth - itemWidth) / 2;\n          break;\n\n        case 'right':\n          x0 = x + viewWidth - itemWidth;\n          break;\n      }\n\n      return [[x0, offset], [x0 + itemWidth, offset]];\n    };\n\n    if (sort === 'ascending') {\n      // From bottom to top\n      itemSize = -itemSize;\n      gap = -gap;\n\n      if (orient === 'horizontal') {\n        x += viewWidth;\n      } else {\n        y += viewHeight;\n      }\n\n      indices = indices.reverse();\n    }\n\n    for (var i = 0; i < indices.length; i++) {\n      var idx = indices[i];\n      var nextIdx = indices[i + 1];\n      var itemModel = data.getItemModel(idx);\n\n      if (orient === 'horizontal') {\n        var width = itemModel.get(['itemStyle', 'width']);\n\n        if (width == null) {\n          width = itemSize;\n        } else {\n          width = parsePercent(width, viewWidth);\n\n          if (sort === 'ascending') {\n            width = -width;\n          }\n        }\n\n        var start = getLinePoints(idx, x);\n        var end = getLinePoints(nextIdx, x + width);\n        x += width + gap;\n        data.setItemLayout(idx, {\n          points: start.concat(end.slice().reverse())\n        });\n      } else {\n        var height = itemModel.get(['itemStyle', 'height']);\n\n        if (height == null) {\n          height = itemSize;\n        } else {\n          height = parsePercent(height, viewHeight);\n\n          if (sort === 'ascending') {\n            height = -height;\n          }\n        }\n\n        var start = getLinePoints(idx, y);\n        var end = getLinePoints(nextIdx, y + height);\n        y += height + gap;\n        data.setItemLayout(idx, {\n          points: start.concat(end.slice().reverse())\n        });\n      }\n    }\n\n    labelLayout(data);\n  });\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic';\nimport { setStatesStylesFromModel, enableHoverEmphasis } from '../../util/states';\nimport ChartView from '../../view/Chart';\nimport { numericToNumber } from '../../util/number';\nimport { eqNaN } from 'zrender/lib/core/util';\nimport { saveOldStyle } from '../../animation/basicTrasition';\nvar DEFAULT_SMOOTH = 0.3;\n\nvar ParallelView =\n/** @class */\nfunction (_super) {\n  __extends(ParallelView, _super);\n\n  function ParallelView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ParallelView.type;\n    _this._dataGroup = new graphic.Group();\n    _this._initialized = false;\n    return _this;\n  }\n\n  ParallelView.prototype.init = function () {\n    this.group.add(this._dataGroup);\n  };\n  /**\n   * @override\n   */\n\n\n  ParallelView.prototype.render = function (seriesModel, ecModel, api, payload) {\n    var dataGroup = this._dataGroup;\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var coordSys = seriesModel.coordinateSystem;\n    var dimensions = coordSys.dimensions;\n    var seriesScope = makeSeriesScope(seriesModel);\n    data.diff(oldData).add(add).update(update).remove(remove).execute();\n\n    function add(newDataIndex) {\n      var line = addEl(data, dataGroup, newDataIndex, dimensions, coordSys);\n      updateElCommon(line, data, newDataIndex, seriesScope);\n    }\n\n    function update(newDataIndex, oldDataIndex) {\n      var line = oldData.getItemGraphicEl(oldDataIndex);\n      var points = createLinePoints(data, newDataIndex, dimensions, coordSys);\n      data.setItemGraphicEl(newDataIndex, line);\n      graphic.updateProps(line, {\n        shape: {\n          points: points\n        }\n      }, seriesModel, newDataIndex);\n      saveOldStyle(line);\n      updateElCommon(line, data, newDataIndex, seriesScope);\n    }\n\n    function remove(oldDataIndex) {\n      var line = oldData.getItemGraphicEl(oldDataIndex);\n      dataGroup.remove(line);\n    } // First create\n\n\n    if (!this._initialized) {\n      this._initialized = true;\n      var clipPath = createGridClipShape(coordSys, seriesModel, function () {\n        // Callback will be invoked immediately if there is no animation\n        setTimeout(function () {\n          dataGroup.removeClipPath();\n        });\n      });\n      dataGroup.setClipPath(clipPath);\n    }\n\n    this._data = data;\n  };\n\n  ParallelView.prototype.incrementalPrepareRender = function (seriesModel, ecModel, api) {\n    this._initialized = true;\n    this._data = null;\n\n    this._dataGroup.removeAll();\n  };\n\n  ParallelView.prototype.incrementalRender = function (taskParams, seriesModel, ecModel) {\n    var data = seriesModel.getData();\n    var coordSys = seriesModel.coordinateSystem;\n    var dimensions = coordSys.dimensions;\n    var seriesScope = makeSeriesScope(seriesModel);\n\n    for (var dataIndex = taskParams.start; dataIndex < taskParams.end; dataIndex++) {\n      var line = addEl(data, this._dataGroup, dataIndex, dimensions, coordSys);\n      line.incremental = true;\n      updateElCommon(line, data, dataIndex, seriesScope);\n    }\n  };\n\n  ParallelView.prototype.remove = function () {\n    this._dataGroup && this._dataGroup.removeAll();\n    this._data = null;\n  };\n\n  ParallelView.type = 'parallel';\n  return ParallelView;\n}(ChartView);\n\nfunction createGridClipShape(coordSys, seriesModel, cb) {\n  var parallelModel = coordSys.model;\n  var rect = coordSys.getRect();\n  var rectEl = new graphic.Rect({\n    shape: {\n      x: rect.x,\n      y: rect.y,\n      width: rect.width,\n      height: rect.height\n    }\n  });\n  var dim = parallelModel.get('layout') === 'horizontal' ? 'width' : 'height';\n  rectEl.setShape(dim, 0);\n  graphic.initProps(rectEl, {\n    shape: {\n      width: rect.width,\n      height: rect.height\n    }\n  }, seriesModel, cb);\n  return rectEl;\n}\n\nfunction createLinePoints(data, dataIndex, dimensions, coordSys) {\n  var points = [];\n\n  for (var i = 0; i < dimensions.length; i++) {\n    var dimName = dimensions[i];\n    var value = data.get(data.mapDimension(dimName), dataIndex);\n\n    if (!isEmptyValue(value, coordSys.getAxis(dimName).type)) {\n      points.push(coordSys.dataToPoint(value, dimName));\n    }\n  }\n\n  return points;\n}\n\nfunction addEl(data, dataGroup, dataIndex, dimensions, coordSys) {\n  var points = createLinePoints(data, dataIndex, dimensions, coordSys);\n  var line = new graphic.Polyline({\n    shape: {\n      points: points\n    },\n    // silent: true,\n    z2: 10\n  });\n  dataGroup.add(line);\n  data.setItemGraphicEl(dataIndex, line);\n  return line;\n}\n\nfunction makeSeriesScope(seriesModel) {\n  var smooth = seriesModel.get('smooth', true);\n  smooth === true && (smooth = DEFAULT_SMOOTH);\n  smooth = numericToNumber(smooth);\n  eqNaN(smooth) && (smooth = 0);\n  return {\n    smooth: smooth\n  };\n}\n\nfunction updateElCommon(el, data, dataIndex, seriesScope) {\n  el.useStyle(data.getItemVisual(dataIndex, 'style'));\n  el.style.fill = null;\n  el.setShape('smooth', seriesScope.smooth);\n  var itemModel = data.getItemModel(dataIndex);\n  var emphasisModel = itemModel.getModel('emphasis');\n  setStatesStylesFromModel(el, itemModel, 'lineStyle');\n  enableHoverEmphasis(el, emphasisModel.get('focus'), emphasisModel.get('blurScope'));\n} // function simpleDiff(oldData, newData, dimensions) {\n//     let oldLen;\n//     if (!oldData\n//         || !oldData.__plProgressive\n//         || (oldLen = oldData.count()) !== newData.count()\n//     ) {\n//         return true;\n//     }\n//     let dimLen = dimensions.length;\n//     for (let i = 0; i < oldLen; i++) {\n//         for (let j = 0; j < dimLen; j++) {\n//             if (oldData.get(dimensions[j], i) !== newData.get(dimensions[j], i)) {\n//                 return true;\n//             }\n//         }\n//     }\n//     return false;\n// }\n// FIXME put in common util?\n\n\nfunction isEmptyValue(val, axisType) {\n  return axisType === 'category' ? val == null : val == null || isNaN(val); // axisType === 'value'\n}\n\nexport default ParallelView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { each, bind } from 'zrender/lib/core/util';\nimport SeriesModel from '../../model/Series';\nimport createSeriesData from '../helper/createSeriesData';\n\nvar ParallelSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(ParallelSeriesModel, _super);\n\n  function ParallelSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ParallelSeriesModel.type;\n    _this.visualStyleAccessPath = 'lineStyle';\n    _this.visualDrawType = 'stroke';\n    return _this;\n  }\n\n  ParallelSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesData(null, this, {\n      useEncodeDefaulter: bind(makeDefaultEncode, null, this)\n    });\n  };\n  /**\n   * User can get data raw indices on 'axisAreaSelected' event received.\n   *\n   * @return Raw indices\n   */\n\n\n  ParallelSeriesModel.prototype.getRawIndicesByActiveState = function (activeState) {\n    var coordSys = this.coordinateSystem;\n    var data = this.getData();\n    var indices = [];\n    coordSys.eachActiveState(data, function (theActiveState, dataIndex) {\n      if (activeState === theActiveState) {\n        indices.push(data.getRawIndex(dataIndex));\n      }\n    });\n    return indices;\n  };\n\n  ParallelSeriesModel.type = 'series.parallel';\n  ParallelSeriesModel.dependencies = ['parallel'];\n  ParallelSeriesModel.defaultOption = {\n    zlevel: 0,\n    z: 2,\n    coordinateSystem: 'parallel',\n    parallelIndex: 0,\n    label: {\n      show: false\n    },\n    inactiveOpacity: 0.05,\n    activeOpacity: 1,\n    lineStyle: {\n      width: 1,\n      opacity: 0.45,\n      type: 'solid'\n    },\n    emphasis: {\n      label: {\n        show: false\n      }\n    },\n    progressive: 500,\n    smooth: false,\n    animationEasing: 'linear'\n  };\n  return ParallelSeriesModel;\n}(SeriesModel);\n\nfunction makeDefaultEncode(seriesModel) {\n  // The mapping of parallelAxis dimension to data dimension can\n  // be specified in parallelAxis.option.dim. For example, if\n  // parallelAxis.option.dim is 'dim3', it mapping to the third\n  // dimension of data. But `data.encode` has higher priority.\n  // Moreover, parallelModel.dimension should not be regarded as data\n  // dimensions. Consider dimensions = ['dim4', 'dim2', 'dim6'];\n  var parallelModel = seriesModel.ecModel.getComponent('parallel', seriesModel.get('parallelIndex'));\n\n  if (!parallelModel) {\n    return;\n  }\n\n  var encodeDefine = {};\n  each(parallelModel.dimensions, function (axisDim) {\n    var dataDimIndex = convertDimNameToNumber(axisDim);\n    encodeDefine[axisDim] = dataDimIndex;\n  });\n  return encodeDefine;\n}\n\nfunction convertDimNameToNumber(dimName) {\n  return +dimName.replace('dim', '');\n}\n\nexport default ParallelSeriesModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar opacityAccessPath = ['lineStyle', 'opacity'];\nvar parallelVisual = {\n  seriesType: 'parallel',\n  reset: function reset(seriesModel, ecModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    var opacityMap = {\n      normal: seriesModel.get(['lineStyle', 'opacity']),\n      active: seriesModel.get('activeOpacity'),\n      inactive: seriesModel.get('inactiveOpacity')\n    };\n    return {\n      progress: function progress(params, data) {\n        coordSys.eachActiveState(data, function (activeState, dataIndex) {\n          var opacity = opacityMap[activeState];\n\n          if (activeState === 'normal' && data.hasItemOption) {\n            var itemOpacity = data.getItemModel(dataIndex).get(opacityAccessPath, true);\n            itemOpacity != null && (opacity = itemOpacity);\n          }\n\n          var existsStyle = data.ensureUniqueItemVisual(dataIndex, 'style');\n          existsStyle.opacity = opacity;\n        }, params.start, params.end);\n      }\n    };\n  }\n};\nexport default parallelVisual;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as modelUtil from '../../util/model';\nexport default function parallelPreprocessor(option) {\n  createParallelIfNeeded(option);\n  mergeAxisOptionFromParallel(option);\n}\n/**\n * Create a parallel coordinate if not exists.\n * @inner\n */\n\nfunction createParallelIfNeeded(option) {\n  if (option.parallel) {\n    return;\n  }\n\n  var hasParallelSeries = false;\n  zrUtil.each(option.series, function (seriesOpt) {\n    if (seriesOpt && seriesOpt.type === 'parallel') {\n      hasParallelSeries = true;\n    }\n  });\n\n  if (hasParallelSeries) {\n    option.parallel = [{}];\n  }\n}\n/**\n * Merge aixs definition from parallel option (if exists) to axis option.\n * @inner\n */\n\n\nfunction mergeAxisOptionFromParallel(option) {\n  var axes = modelUtil.normalizeToArray(option.parallelAxis);\n  zrUtil.each(axes, function (axisOption) {\n    if (!zrUtil.isObject(axisOption)) {\n      return;\n    }\n\n    var parallelIndex = axisOption.parallelIndex || 0;\n    var parallelOption = modelUtil.normalizeToArray(option.parallel)[parallelIndex];\n\n    if (parallelOption && parallelOption.parallelAxisDefault) {\n      zrUtil.merge(axisOption, parallelOption.parallelAxisDefault, false);\n    }\n  });\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentView from '../../view/Component';\nimport { each, bind, extend } from 'zrender/lib/core/util';\nimport { createOrUpdate } from '../../util/throttle';\nvar CLICK_THRESHOLD = 5; // > 4\n\nvar ParallelView =\n/** @class */\nfunction (_super) {\n  __extends(ParallelView, _super);\n\n  function ParallelView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ParallelView.type;\n    return _this;\n  }\n\n  ParallelView.prototype.render = function (parallelModel, ecModel, api) {\n    this._model = parallelModel;\n    this._api = api;\n\n    if (!this._handlers) {\n      this._handlers = {};\n      each(handlers, function (handler, eventName) {\n        api.getZr().on(eventName, this._handlers[eventName] = bind(handler, this));\n      }, this);\n    }\n\n    createOrUpdate(this, '_throttledDispatchExpand', parallelModel.get('axisExpandRate'), 'fixRate');\n  };\n\n  ParallelView.prototype.dispose = function (ecModel, api) {\n    each(this._handlers, function (handler, eventName) {\n      api.getZr().off(eventName, handler);\n    });\n    this._handlers = null;\n  };\n  /**\n   * @internal\n   * @param {Object} [opt] If null, cancle the last action triggering for debounce.\n   */\n\n\n  ParallelView.prototype._throttledDispatchExpand = function (opt) {\n    this._dispatchExpand(opt);\n  };\n  /**\n   * @internal\n   */\n\n\n  ParallelView.prototype._dispatchExpand = function (opt) {\n    opt && this._api.dispatchAction(extend({\n      type: 'parallelAxisExpand'\n    }, opt));\n  };\n\n  ParallelView.type = 'parallel';\n  return ParallelView;\n}(ComponentView);\n\nvar handlers = {\n  mousedown: function mousedown(e) {\n    if (checkTrigger(this, 'click')) {\n      this._mouseDownPoint = [e.offsetX, e.offsetY];\n    }\n  },\n  mouseup: function mouseup(e) {\n    var mouseDownPoint = this._mouseDownPoint;\n\n    if (checkTrigger(this, 'click') && mouseDownPoint) {\n      var point = [e.offsetX, e.offsetY];\n      var dist = Math.pow(mouseDownPoint[0] - point[0], 2) + Math.pow(mouseDownPoint[1] - point[1], 2);\n\n      if (dist > CLICK_THRESHOLD) {\n        return;\n      }\n\n      var result = this._model.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX, e.offsetY]);\n\n      result.behavior !== 'none' && this._dispatchExpand({\n        axisExpandWindow: result.axisExpandWindow\n      });\n    }\n\n    this._mouseDownPoint = null;\n  },\n  mousemove: function mousemove(e) {\n    // Should do nothing when brushing.\n    if (this._mouseDownPoint || !checkTrigger(this, 'mousemove')) {\n      return;\n    }\n\n    var model = this._model;\n    var result = model.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX, e.offsetY]);\n    var behavior = result.behavior;\n    behavior === 'jump' && this._throttledDispatchExpand.debounceNextCall(model.get('axisExpandDebounce'));\n\n    this._throttledDispatchExpand(behavior === 'none' ? null // Cancle the last trigger, in case that mouse slide out of the area quickly.\n    : {\n      axisExpandWindow: result.axisExpandWindow,\n      // Jumping uses animation, and sliding suppresses animation.\n      animation: behavior === 'jump' ? null : {\n        duration: 0 // Disable animation.\n\n      }\n    });\n  }\n};\n\nfunction checkTrigger(view, triggerOn) {\n  var model = view._model;\n  return model.get('axisExpandable') && model.get('axisExpandTriggerOn') === triggerOn;\n}\n\nexport default ParallelView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport ComponentModel from '../../model/Component';\n\nvar ParallelModel =\n/** @class */\nfunction (_super) {\n  __extends(ParallelModel, _super);\n\n  function ParallelModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ParallelModel.type;\n    return _this;\n  }\n\n  ParallelModel.prototype.init = function () {\n    _super.prototype.init.apply(this, arguments);\n\n    this.mergeOption({});\n  };\n\n  ParallelModel.prototype.mergeOption = function (newOption) {\n    var thisOption = this.option;\n    newOption && zrUtil.merge(thisOption, newOption, true);\n\n    this._initDimensions();\n  };\n  /**\n   * Whether series or axis is in this coordinate system.\n   */\n\n\n  ParallelModel.prototype.contains = function (model, ecModel) {\n    var parallelIndex = model.get('parallelIndex');\n    return parallelIndex != null && ecModel.getComponent('parallel', parallelIndex) === this;\n  };\n\n  ParallelModel.prototype.setAxisExpand = function (opt) {\n    zrUtil.each(['axisExpandable', 'axisExpandCenter', 'axisExpandCount', 'axisExpandWidth', 'axisExpandWindow'], function (name) {\n      if (opt.hasOwnProperty(name)) {\n        // @ts-ignore FIXME: why \"never\" inferred in this.option[name]?\n        this.option[name] = opt[name];\n      }\n    }, this);\n  };\n\n  ParallelModel.prototype._initDimensions = function () {\n    var dimensions = this.dimensions = [];\n    var parallelAxisIndex = this.parallelAxisIndex = [];\n    var axisModels = zrUtil.filter(this.ecModel.queryComponents({\n      mainType: 'parallelAxis'\n    }), function (axisModel) {\n      // Can not use this.contains here, because\n      // initialization has not been completed yet.\n      return (axisModel.get('parallelIndex') || 0) === this.componentIndex;\n    }, this);\n    zrUtil.each(axisModels, function (axisModel) {\n      dimensions.push('dim' + axisModel.get('dim'));\n      parallelAxisIndex.push(axisModel.componentIndex);\n    });\n  };\n\n  ParallelModel.type = 'parallel';\n  ParallelModel.dependencies = ['parallelAxis'];\n  ParallelModel.layoutMode = 'box';\n  ParallelModel.defaultOption = {\n    zlevel: 0,\n    z: 0,\n    left: 80,\n    top: 60,\n    right: 80,\n    bottom: 60,\n    // width: {totalWidth} - left - right,\n    // height: {totalHeight} - top - bottom,\n    layout: 'horizontal',\n    // FIXME\n    // naming?\n    axisExpandable: false,\n    axisExpandCenter: null,\n    axisExpandCount: 0,\n    axisExpandWidth: 50,\n    axisExpandRate: 17,\n    axisExpandDebounce: 50,\n    // [out, in, jumpTarget]. In percentage. If use [null, 0.05], null means full.\n    // Do not doc to user until necessary.\n    axisExpandSlideTriggerArea: [-0.15, 0.05, 0.4],\n    axisExpandTriggerOn: 'click',\n    parallelAxisDefault: null\n  };\n  return ParallelModel;\n}(ComponentModel);\n\nexport default ParallelModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Axis from '../Axis';\n\nvar ParallelAxis =\n/** @class */\nfunction (_super) {\n  __extends(ParallelAxis, _super);\n\n  function ParallelAxis(dim, scale, coordExtent, axisType, axisIndex) {\n    var _this = _super.call(this, dim, scale, coordExtent) || this;\n\n    _this.type = axisType || 'value';\n    _this.axisIndex = axisIndex;\n    return _this;\n  }\n\n  ParallelAxis.prototype.isHorizontal = function () {\n    return this.coordinateSystem.getModel().get('layout') !== 'horizontal';\n  };\n\n  return ParallelAxis;\n}(Axis);\n\nexport default ParallelAxis;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Calculate slider move result.\n * Usage:\n * (1) If both handle0 and handle1 are needed to be moved, set minSpan the same as\n * maxSpan and the same as `Math.abs(handleEnd[1] - handleEnds[0])`.\n * (2) If handle0 is forbidden to cross handle1, set minSpan as `0`.\n *\n * @param delta Move length.\n * @param handleEnds handleEnds[0] can be bigger then handleEnds[1].\n *              handleEnds will be modified in this method.\n * @param extent handleEnds is restricted by extent.\n *              extent[0] should less or equals than extent[1].\n * @param handleIndex Can be 'all', means that both move the two handleEnds.\n * @param minSpan The range of dataZoom can not be smaller than that.\n *              If not set, handle0 and cross handle1. If set as a non-negative\n *              number (including `0`), handles will push each other when reaching\n *              the minSpan.\n * @param maxSpan The range of dataZoom can not be larger than that.\n * @return The input handleEnds.\n */\nexport default function sliderMove(delta, handleEnds, extent, handleIndex, minSpan, maxSpan) {\n  delta = delta || 0;\n  var extentSpan = extent[1] - extent[0]; // Notice maxSpan and minSpan can be null/undefined.\n\n  if (minSpan != null) {\n    minSpan = restrict(minSpan, [0, extentSpan]);\n  }\n\n  if (maxSpan != null) {\n    maxSpan = Math.max(maxSpan, minSpan != null ? minSpan : 0);\n  }\n\n  if (handleIndex === 'all') {\n    var handleSpan = Math.abs(handleEnds[1] - handleEnds[0]);\n    handleSpan = restrict(handleSpan, [0, extentSpan]);\n    minSpan = maxSpan = restrict(handleSpan, [minSpan, maxSpan]);\n    handleIndex = 0;\n  }\n\n  handleEnds[0] = restrict(handleEnds[0], extent);\n  handleEnds[1] = restrict(handleEnds[1], extent);\n  var originalDistSign = getSpanSign(handleEnds, handleIndex);\n  handleEnds[handleIndex] += delta; // Restrict in extent.\n\n  var extentMinSpan = minSpan || 0;\n  var realExtent = extent.slice();\n  originalDistSign.sign < 0 ? realExtent[0] += extentMinSpan : realExtent[1] -= extentMinSpan;\n  handleEnds[handleIndex] = restrict(handleEnds[handleIndex], realExtent); // Expand span.\n\n  var currDistSign;\n  currDistSign = getSpanSign(handleEnds, handleIndex);\n\n  if (minSpan != null && (currDistSign.sign !== originalDistSign.sign || currDistSign.span < minSpan)) {\n    // If minSpan exists, 'cross' is forbidden.\n    handleEnds[1 - handleIndex] = handleEnds[handleIndex] + originalDistSign.sign * minSpan;\n  } // Shrink span.\n\n\n  currDistSign = getSpanSign(handleEnds, handleIndex);\n\n  if (maxSpan != null && currDistSign.span > maxSpan) {\n    handleEnds[1 - handleIndex] = handleEnds[handleIndex] + currDistSign.sign * maxSpan;\n  }\n\n  return handleEnds;\n}\n\nfunction getSpanSign(handleEnds, handleIndex) {\n  var dist = handleEnds[handleIndex] - handleEnds[1 - handleIndex]; // If `handleEnds[0] === handleEnds[1]`, always believe that handleEnd[0]\n  // is at left of handleEnds[1] for non-cross case.\n\n  return {\n    span: Math.abs(dist),\n    sign: dist > 0 ? -1 : dist < 0 ? 1 : handleIndex ? -1 : 1\n  };\n}\n\nfunction restrict(value, extend) {\n  return Math.min(extend[1] != null ? extend[1] : Infinity, Math.max(extend[0] != null ? extend[0] : -Infinity, value));\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Parallel Coordinates\n * <https://en.wikipedia.org/wiki/Parallel_coordinates>\n */\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as matrix from 'zrender/lib/core/matrix';\nimport * as layoutUtil from '../../util/layout';\nimport * as axisHelper from '../../coord/axisHelper';\nimport ParallelAxis from './ParallelAxis';\nimport * as graphic from '../../util/graphic';\nimport * as numberUtil from '../../util/number';\nimport sliderMove from '../../component/helper/sliderMove';\nvar each = zrUtil.each;\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nvar mathFloor = Math.floor;\nvar mathCeil = Math.ceil;\nvar round = numberUtil.round;\nvar PI = Math.PI;\n\nvar Parallel =\n/** @class */\nfunction () {\n  function Parallel(parallelModel, ecModel, api) {\n    this.type = 'parallel';\n    /**\n     * key: dimension\n     */\n\n    this._axesMap = zrUtil.createHashMap();\n    /**\n     * key: dimension\n     * value: {position: [], rotation, }\n     */\n\n    this._axesLayout = {};\n    this.dimensions = parallelModel.dimensions;\n    this._model = parallelModel;\n\n    this._init(parallelModel, ecModel, api);\n  }\n\n  Parallel.prototype._init = function (parallelModel, ecModel, api) {\n    var dimensions = parallelModel.dimensions;\n    var parallelAxisIndex = parallelModel.parallelAxisIndex;\n    each(dimensions, function (dim, idx) {\n      var axisIndex = parallelAxisIndex[idx];\n      var axisModel = ecModel.getComponent('parallelAxis', axisIndex);\n\n      var axis = this._axesMap.set(dim, new ParallelAxis(dim, axisHelper.createScaleByModel(axisModel), [0, 0], axisModel.get('type'), axisIndex));\n\n      var isCategory = axis.type === 'category';\n      axis.onBand = isCategory && axisModel.get('boundaryGap');\n      axis.inverse = axisModel.get('inverse'); // Injection\n\n      axisModel.axis = axis;\n      axis.model = axisModel;\n      axis.coordinateSystem = axisModel.coordinateSystem = this;\n    }, this);\n  };\n  /**\n   * Update axis scale after data processed\n   */\n\n\n  Parallel.prototype.update = function (ecModel, api) {\n    this._updateAxesFromSeries(this._model, ecModel);\n  };\n\n  Parallel.prototype.containPoint = function (point) {\n    var layoutInfo = this._makeLayoutInfo();\n\n    var axisBase = layoutInfo.axisBase;\n    var layoutBase = layoutInfo.layoutBase;\n    var pixelDimIndex = layoutInfo.pixelDimIndex;\n    var pAxis = point[1 - pixelDimIndex];\n    var pLayout = point[pixelDimIndex];\n    return pAxis >= axisBase && pAxis <= axisBase + layoutInfo.axisLength && pLayout >= layoutBase && pLayout <= layoutBase + layoutInfo.layoutLength;\n  };\n\n  Parallel.prototype.getModel = function () {\n    return this._model;\n  };\n  /**\n   * Update properties from series\n   */\n\n\n  Parallel.prototype._updateAxesFromSeries = function (parallelModel, ecModel) {\n    ecModel.eachSeries(function (seriesModel) {\n      if (!parallelModel.contains(seriesModel, ecModel)) {\n        return;\n      }\n\n      var data = seriesModel.getData();\n      each(this.dimensions, function (dim) {\n        var axis = this._axesMap.get(dim);\n\n        axis.scale.unionExtentFromData(data, data.mapDimension(dim));\n        axisHelper.niceScaleExtent(axis.scale, axis.model);\n      }, this);\n    }, this);\n  };\n  /**\n   * Resize the parallel coordinate system.\n   */\n\n\n  Parallel.prototype.resize = function (parallelModel, api) {\n    this._rect = layoutUtil.getLayoutRect(parallelModel.getBoxLayoutParams(), {\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n\n    this._layoutAxes();\n  };\n\n  Parallel.prototype.getRect = function () {\n    return this._rect;\n  };\n\n  Parallel.prototype._makeLayoutInfo = function () {\n    var parallelModel = this._model;\n    var rect = this._rect;\n    var xy = ['x', 'y'];\n    var wh = ['width', 'height'];\n    var layout = parallelModel.get('layout');\n    var pixelDimIndex = layout === 'horizontal' ? 0 : 1;\n    var layoutLength = rect[wh[pixelDimIndex]];\n    var layoutExtent = [0, layoutLength];\n    var axisCount = this.dimensions.length;\n    var axisExpandWidth = restrict(parallelModel.get('axisExpandWidth'), layoutExtent);\n    var axisExpandCount = restrict(parallelModel.get('axisExpandCount') || 0, [0, axisCount]);\n    var axisExpandable = parallelModel.get('axisExpandable') && axisCount > 3 && axisCount > axisExpandCount && axisExpandCount > 1 && axisExpandWidth > 0 && layoutLength > 0; // `axisExpandWindow` is According to the coordinates of [0, axisExpandLength],\n    // for sake of consider the case that axisCollapseWidth is 0 (when screen is narrow),\n    // where collapsed axes should be overlapped.\n\n    var axisExpandWindow = parallelModel.get('axisExpandWindow');\n    var winSize;\n\n    if (!axisExpandWindow) {\n      winSize = restrict(axisExpandWidth * (axisExpandCount - 1), layoutExtent);\n      var axisExpandCenter = parallelModel.get('axisExpandCenter') || mathFloor(axisCount / 2);\n      axisExpandWindow = [axisExpandWidth * axisExpandCenter - winSize / 2];\n      axisExpandWindow[1] = axisExpandWindow[0] + winSize;\n    } else {\n      winSize = restrict(axisExpandWindow[1] - axisExpandWindow[0], layoutExtent);\n      axisExpandWindow[1] = axisExpandWindow[0] + winSize;\n    }\n\n    var axisCollapseWidth = (layoutLength - winSize) / (axisCount - axisExpandCount); // Avoid axisCollapseWidth is too small.\n\n    axisCollapseWidth < 3 && (axisCollapseWidth = 0); // Find the first and last indices > ewin[0] and < ewin[1].\n\n    var winInnerIndices = [mathFloor(round(axisExpandWindow[0] / axisExpandWidth, 1)) + 1, mathCeil(round(axisExpandWindow[1] / axisExpandWidth, 1)) - 1]; // Pos in ec coordinates.\n\n    var axisExpandWindow0Pos = axisCollapseWidth / axisExpandWidth * axisExpandWindow[0];\n    return {\n      layout: layout,\n      pixelDimIndex: pixelDimIndex,\n      layoutBase: rect[xy[pixelDimIndex]],\n      layoutLength: layoutLength,\n      axisBase: rect[xy[1 - pixelDimIndex]],\n      axisLength: rect[wh[1 - pixelDimIndex]],\n      axisExpandable: axisExpandable,\n      axisExpandWidth: axisExpandWidth,\n      axisCollapseWidth: axisCollapseWidth,\n      axisExpandWindow: axisExpandWindow,\n      axisCount: axisCount,\n      winInnerIndices: winInnerIndices,\n      axisExpandWindow0Pos: axisExpandWindow0Pos\n    };\n  };\n\n  Parallel.prototype._layoutAxes = function () {\n    var rect = this._rect;\n    var axes = this._axesMap;\n    var dimensions = this.dimensions;\n\n    var layoutInfo = this._makeLayoutInfo();\n\n    var layout = layoutInfo.layout;\n    axes.each(function (axis) {\n      var axisExtent = [0, layoutInfo.axisLength];\n      var idx = axis.inverse ? 1 : 0;\n      axis.setExtent(axisExtent[idx], axisExtent[1 - idx]);\n    });\n    each(dimensions, function (dim, idx) {\n      var posInfo = (layoutInfo.axisExpandable ? layoutAxisWithExpand : layoutAxisWithoutExpand)(idx, layoutInfo);\n      var positionTable = {\n        horizontal: {\n          x: posInfo.position,\n          y: layoutInfo.axisLength\n        },\n        vertical: {\n          x: 0,\n          y: posInfo.position\n        }\n      };\n      var rotationTable = {\n        horizontal: PI / 2,\n        vertical: 0\n      };\n      var position = [positionTable[layout].x + rect.x, positionTable[layout].y + rect.y];\n      var rotation = rotationTable[layout];\n      var transform = matrix.create();\n      matrix.rotate(transform, transform, rotation);\n      matrix.translate(transform, transform, position); // TODO\n      // tick layout info\n      // TODO\n      // update dimensions info based on axis order.\n\n      this._axesLayout[dim] = {\n        position: position,\n        rotation: rotation,\n        transform: transform,\n        axisNameAvailableWidth: posInfo.axisNameAvailableWidth,\n        axisLabelShow: posInfo.axisLabelShow,\n        nameTruncateMaxWidth: posInfo.nameTruncateMaxWidth,\n        tickDirection: 1,\n        labelDirection: 1\n      };\n    }, this);\n  };\n  /**\n   * Get axis by dim.\n   */\n\n\n  Parallel.prototype.getAxis = function (dim) {\n    return this._axesMap.get(dim);\n  };\n  /**\n   * Convert a dim value of a single item of series data to Point.\n   */\n\n\n  Parallel.prototype.dataToPoint = function (value, dim) {\n    return this.axisCoordToPoint(this._axesMap.get(dim).dataToCoord(value), dim);\n  };\n  /**\n   * Travel data for one time, get activeState of each data item.\n   * @param start the start dataIndex that travel from.\n   * @param end the next dataIndex of the last dataIndex will be travel.\n   */\n\n\n  Parallel.prototype.eachActiveState = function (data, callback, start, end) {\n    start == null && (start = 0);\n    end == null && (end = data.count());\n    var axesMap = this._axesMap;\n    var dimensions = this.dimensions;\n    var dataDimensions = [];\n    var axisModels = [];\n    zrUtil.each(dimensions, function (axisDim) {\n      dataDimensions.push(data.mapDimension(axisDim));\n      axisModels.push(axesMap.get(axisDim).model);\n    });\n    var hasActiveSet = this.hasAxisBrushed();\n\n    for (var dataIndex = start; dataIndex < end; dataIndex++) {\n      var activeState = void 0;\n\n      if (!hasActiveSet) {\n        activeState = 'normal';\n      } else {\n        activeState = 'active';\n        var values = data.getValues(dataDimensions, dataIndex);\n\n        for (var j = 0, lenj = dimensions.length; j < lenj; j++) {\n          var state = axisModels[j].getActiveState(values[j]);\n\n          if (state === 'inactive') {\n            activeState = 'inactive';\n            break;\n          }\n        }\n      }\n\n      callback(activeState, dataIndex);\n    }\n  };\n  /**\n   * Whether has any activeSet.\n   */\n\n\n  Parallel.prototype.hasAxisBrushed = function () {\n    var dimensions = this.dimensions;\n    var axesMap = this._axesMap;\n    var hasActiveSet = false;\n\n    for (var j = 0, lenj = dimensions.length; j < lenj; j++) {\n      if (axesMap.get(dimensions[j]).model.getActiveState() !== 'normal') {\n        hasActiveSet = true;\n      }\n    }\n\n    return hasActiveSet;\n  };\n  /**\n   * Convert coords of each axis to Point.\n   *  Return point. For example: [10, 20]\n   */\n\n\n  Parallel.prototype.axisCoordToPoint = function (coord, dim) {\n    var axisLayout = this._axesLayout[dim];\n    return graphic.applyTransform([coord, 0], axisLayout.transform);\n  };\n  /**\n   * Get axis layout.\n   */\n\n\n  Parallel.prototype.getAxisLayout = function (dim) {\n    return zrUtil.clone(this._axesLayout[dim]);\n  };\n  /**\n   * @return {Object} {axisExpandWindow, delta, behavior: 'jump' | 'slide' | 'none'}.\n   */\n\n\n  Parallel.prototype.getSlidedAxisExpandWindow = function (point) {\n    var layoutInfo = this._makeLayoutInfo();\n\n    var pixelDimIndex = layoutInfo.pixelDimIndex;\n    var axisExpandWindow = layoutInfo.axisExpandWindow.slice();\n    var winSize = axisExpandWindow[1] - axisExpandWindow[0];\n    var extent = [0, layoutInfo.axisExpandWidth * (layoutInfo.axisCount - 1)]; // Out of the area of coordinate system.\n\n    if (!this.containPoint(point)) {\n      return {\n        behavior: 'none',\n        axisExpandWindow: axisExpandWindow\n      };\n    } // Conver the point from global to expand coordinates.\n\n\n    var pointCoord = point[pixelDimIndex] - layoutInfo.layoutBase - layoutInfo.axisExpandWindow0Pos; // For dragging operation convenience, the window should not be\n    // slided when mouse is the center area of the window.\n\n    var delta;\n    var behavior = 'slide';\n    var axisCollapseWidth = layoutInfo.axisCollapseWidth;\n\n    var triggerArea = this._model.get('axisExpandSlideTriggerArea'); // But consider touch device, jump is necessary.\n\n\n    var useJump = triggerArea[0] != null;\n\n    if (axisCollapseWidth) {\n      if (useJump && axisCollapseWidth && pointCoord < winSize * triggerArea[0]) {\n        behavior = 'jump';\n        delta = pointCoord - winSize * triggerArea[2];\n      } else if (useJump && axisCollapseWidth && pointCoord > winSize * (1 - triggerArea[0])) {\n        behavior = 'jump';\n        delta = pointCoord - winSize * (1 - triggerArea[2]);\n      } else {\n        (delta = pointCoord - winSize * triggerArea[1]) >= 0 && (delta = pointCoord - winSize * (1 - triggerArea[1])) <= 0 && (delta = 0);\n      }\n\n      delta *= layoutInfo.axisExpandWidth / axisCollapseWidth;\n      delta ? sliderMove(delta, axisExpandWindow, extent, 'all') // Avoid nonsense triger on mousemove.\n      : behavior = 'none';\n    } // When screen is too narrow, make it visible and slidable, although it is hard to interact.\n    else {\n      var winSize2 = axisExpandWindow[1] - axisExpandWindow[0];\n      var pos = extent[1] * pointCoord / winSize2;\n      axisExpandWindow = [mathMax(0, pos - winSize2 / 2)];\n      axisExpandWindow[1] = mathMin(extent[1], axisExpandWindow[0] + winSize2);\n      axisExpandWindow[0] = axisExpandWindow[1] - winSize2;\n    }\n\n    return {\n      axisExpandWindow: axisExpandWindow,\n      behavior: behavior\n    };\n  };\n\n  return Parallel;\n}();\n\nfunction restrict(len, extent) {\n  return mathMin(mathMax(len, extent[0]), extent[1]);\n}\n\nfunction layoutAxisWithoutExpand(axisIndex, layoutInfo) {\n  var step = layoutInfo.layoutLength / (layoutInfo.axisCount - 1);\n  return {\n    position: step * axisIndex,\n    axisNameAvailableWidth: step,\n    axisLabelShow: true\n  };\n}\n\nfunction layoutAxisWithExpand(axisIndex, layoutInfo) {\n  var layoutLength = layoutInfo.layoutLength;\n  var axisExpandWidth = layoutInfo.axisExpandWidth;\n  var axisCount = layoutInfo.axisCount;\n  var axisCollapseWidth = layoutInfo.axisCollapseWidth;\n  var winInnerIndices = layoutInfo.winInnerIndices;\n  var position;\n  var axisNameAvailableWidth = axisCollapseWidth;\n  var axisLabelShow = false;\n  var nameTruncateMaxWidth;\n\n  if (axisIndex < winInnerIndices[0]) {\n    position = axisIndex * axisCollapseWidth;\n    nameTruncateMaxWidth = axisCollapseWidth;\n  } else if (axisIndex <= winInnerIndices[1]) {\n    position = layoutInfo.axisExpandWindow0Pos + axisIndex * axisExpandWidth - layoutInfo.axisExpandWindow[0];\n    axisNameAvailableWidth = axisExpandWidth;\n    axisLabelShow = true;\n  } else {\n    position = layoutLength - (axisCount - 1 - axisIndex) * axisCollapseWidth;\n    nameTruncateMaxWidth = axisCollapseWidth;\n  }\n\n  return {\n    position: position,\n    axisNameAvailableWidth: axisNameAvailableWidth,\n    axisLabelShow: axisLabelShow,\n    nameTruncateMaxWidth: nameTruncateMaxWidth\n  };\n}\n\nexport default Parallel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Parallel coordinate system creater.\n */\nimport Parallel from './Parallel';\nimport { SINGLE_REFERRING } from '../../util/model';\n\nfunction createParallelCoordSys(ecModel, api) {\n  var coordSysList = [];\n  ecModel.eachComponent('parallel', function (parallelModel, idx) {\n    var coordSys = new Parallel(parallelModel, ecModel, api);\n    coordSys.name = 'parallel_' + idx;\n    coordSys.resize(parallelModel, api);\n    parallelModel.coordinateSystem = coordSys;\n    coordSys.model = parallelModel;\n    coordSysList.push(coordSys);\n  }); // Inject the coordinateSystems into seriesModel\n\n  ecModel.eachSeries(function (seriesModel) {\n    if (seriesModel.get('coordinateSystem') === 'parallel') {\n      var parallelModel = seriesModel.getReferringComponents('parallel', SINGLE_REFERRING).models[0];\n      seriesModel.coordinateSystem = parallelModel.coordinateSystem;\n    }\n  });\n  return coordSysList;\n}\n\nvar parallelCoordSysCreator = {\n  create: createParallelCoordSys\n};\nexport default parallelCoordSysCreator;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport ComponentModel from '../../model/Component';\nimport makeStyleMapper from '../../model/mixin/makeStyleMapper';\nimport * as numberUtil from '../../util/number';\nimport { AxisModelCommonMixin } from '../axisModelCommonMixin';\n\nvar ParallelAxisModel =\n/** @class */\nfunction (_super) {\n  __extends(ParallelAxisModel, _super);\n\n  function ParallelAxisModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ParallelAxisModel.type;\n    /**\n     * @readOnly\n     */\n\n    _this.activeIntervals = [];\n    return _this;\n  }\n\n  ParallelAxisModel.prototype.getAreaSelectStyle = function () {\n    return makeStyleMapper([['fill', 'color'], ['lineWidth', 'borderWidth'], ['stroke', 'borderColor'], ['width', 'width'], ['opacity', 'opacity'] // Option decal is in `DecalObject` but style.decal is in `PatternObject`.\n    // So do not transfer decal directly.\n    ])(this.getModel('areaSelectStyle'));\n  };\n  /**\n   * The code of this feature is put on AxisModel but not ParallelAxis,\n   * because axisModel can be alive after echarts updating but instance of\n   * ParallelAxis having been disposed. this._activeInterval should be kept\n   * when action dispatched (i.e. legend click).\n   *\n   * @param intervals `interval.length === 0` means set all active.\n   */\n\n\n  ParallelAxisModel.prototype.setActiveIntervals = function (intervals) {\n    var activeIntervals = this.activeIntervals = zrUtil.clone(intervals); // Normalize\n\n    if (activeIntervals) {\n      for (var i = activeIntervals.length - 1; i >= 0; i--) {\n        numberUtil.asc(activeIntervals[i]);\n      }\n    }\n  };\n  /**\n   * @param value When only attempting detect whether 'no activeIntervals set',\n   *        `value` is not needed to be input.\n   */\n\n\n  ParallelAxisModel.prototype.getActiveState = function (value) {\n    var activeIntervals = this.activeIntervals;\n\n    if (!activeIntervals.length) {\n      return 'normal';\n    }\n\n    if (value == null || isNaN(+value)) {\n      return 'inactive';\n    } // Simple optimization\n\n\n    if (activeIntervals.length === 1) {\n      var interval = activeIntervals[0];\n\n      if (interval[0] <= value && value <= interval[1]) {\n        return 'active';\n      }\n    } else {\n      for (var i = 0, len = activeIntervals.length; i < len; i++) {\n        if (activeIntervals[i][0] <= value && value <= activeIntervals[i][1]) {\n          return 'active';\n        }\n      }\n    }\n\n    return 'inactive';\n  };\n\n  return ParallelAxisModel;\n}(ComponentModel);\n\nzrUtil.mixin(ParallelAxisModel, AxisModelCommonMixin);\nexport default ParallelAxisModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { curry, each, map, bind, merge, clone, defaults, assert } from 'zrender/lib/core/util';\nimport Eventful from 'zrender/lib/core/Eventful';\nimport * as graphic from '../../util/graphic';\nimport * as interactionMutex from './interactionMutex';\nimport DataDiffer from '../../data/DataDiffer';\nvar BRUSH_PANEL_GLOBAL = true;\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nvar mathPow = Math.pow;\nvar COVER_Z = 10000;\nvar UNSELECT_THRESHOLD = 6;\nvar MIN_RESIZE_LINE_WIDTH = 6;\nvar MUTEX_RESOURCE_KEY = 'globalPan';\nvar DIRECTION_MAP = {\n  w: [0, 0],\n  e: [0, 1],\n  n: [1, 0],\n  s: [1, 1]\n};\nvar CURSOR_MAP = {\n  w: 'ew',\n  e: 'ew',\n  n: 'ns',\n  s: 'ns',\n  ne: 'nesw',\n  sw: 'nesw',\n  nw: 'nwse',\n  se: 'nwse'\n};\nvar DEFAULT_BRUSH_OPT = {\n  brushStyle: {\n    lineWidth: 2,\n    stroke: 'rgba(210,219,238,0.3)',\n    fill: '#D2DBEE'\n  },\n  transformable: true,\n  brushMode: 'single',\n  removeOnClick: false\n};\nvar baseUID = 0;\n/**\n * params:\n *     areas: Array.<Array>, coord relates to container group,\n *                             If no container specified, to global.\n *     opt {\n *         isEnd: boolean,\n *         removeOnClick: boolean\n *     }\n */\n\nvar BrushController =\n/** @class */\nfunction (_super) {\n  __extends(BrushController, _super);\n\n  function BrushController(zr) {\n    var _this = _super.call(this) || this;\n    /**\n     * @internal\n     */\n\n\n    _this._track = [];\n    /**\n     * @internal\n     */\n\n    _this._covers = [];\n    _this._handlers = {};\n\n    if (process.env.NODE_ENV !== 'production') {\n      assert(zr);\n    }\n\n    _this._zr = zr;\n    _this.group = new graphic.Group();\n    _this._uid = 'brushController_' + baseUID++;\n    each(pointerHandlers, function (handler, eventName) {\n      this._handlers[eventName] = bind(handler, this);\n    }, _this);\n    return _this;\n  }\n  /**\n   * If set to `false`, select disabled.\n   */\n\n\n  BrushController.prototype.enableBrush = function (brushOption) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(this._mounted);\n    }\n\n    this._brushType && this._doDisableBrush();\n    brushOption.brushType && this._doEnableBrush(brushOption);\n    return this;\n  };\n\n  BrushController.prototype._doEnableBrush = function (brushOption) {\n    var zr = this._zr; // Consider roam, which takes globalPan too.\n\n    if (!this._enableGlobalPan) {\n      interactionMutex.take(zr, MUTEX_RESOURCE_KEY, this._uid);\n    }\n\n    each(this._handlers, function (handler, eventName) {\n      zr.on(eventName, handler);\n    });\n    this._brushType = brushOption.brushType;\n    this._brushOption = merge(clone(DEFAULT_BRUSH_OPT), brushOption, true);\n  };\n\n  BrushController.prototype._doDisableBrush = function () {\n    var zr = this._zr;\n    interactionMutex.release(zr, MUTEX_RESOURCE_KEY, this._uid);\n    each(this._handlers, function (handler, eventName) {\n      zr.off(eventName, handler);\n    });\n    this._brushType = this._brushOption = null;\n  };\n  /**\n   * @param panelOpts If not pass, it is global brush.\n   */\n\n\n  BrushController.prototype.setPanels = function (panelOpts) {\n    if (panelOpts && panelOpts.length) {\n      var panels_1 = this._panels = {};\n      each(panelOpts, function (panelOpts) {\n        panels_1[panelOpts.panelId] = clone(panelOpts);\n      });\n    } else {\n      this._panels = null;\n    }\n\n    return this;\n  };\n\n  BrushController.prototype.mount = function (opt) {\n    opt = opt || {};\n\n    if (process.env.NODE_ENV !== 'production') {\n      this._mounted = true; // should be at first.\n    }\n\n    this._enableGlobalPan = opt.enableGlobalPan;\n    var thisGroup = this.group;\n\n    this._zr.add(thisGroup);\n\n    thisGroup.attr({\n      x: opt.x || 0,\n      y: opt.y || 0,\n      rotation: opt.rotation || 0,\n      scaleX: opt.scaleX || 1,\n      scaleY: opt.scaleY || 1\n    });\n    this._transform = thisGroup.getLocalTransform();\n    return this;\n  }; // eachCover(cb, context): void {\n  //     each(this._covers, cb, context);\n  // }\n\n  /**\n   * Update covers.\n   * @param coverConfigList\n   *        If coverConfigList is null/undefined, all covers removed.\n   */\n\n\n  BrushController.prototype.updateCovers = function (coverConfigList) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(this._mounted);\n    }\n\n    coverConfigList = map(coverConfigList, function (coverConfig) {\n      return merge(clone(DEFAULT_BRUSH_OPT), coverConfig, true);\n    });\n    var tmpIdPrefix = '\\0-brush-index-';\n    var oldCovers = this._covers;\n    var newCovers = this._covers = [];\n    var controller = this;\n    var creatingCover = this._creatingCover;\n    new DataDiffer(oldCovers, coverConfigList, oldGetKey, getKey).add(addOrUpdate).update(addOrUpdate).remove(remove).execute();\n    return this;\n\n    function getKey(brushOption, index) {\n      return (brushOption.id != null ? brushOption.id : tmpIdPrefix + index) + '-' + brushOption.brushType;\n    }\n\n    function oldGetKey(cover, index) {\n      return getKey(cover.__brushOption, index);\n    }\n\n    function addOrUpdate(newIndex, oldIndex) {\n      var newBrushInternal = coverConfigList[newIndex]; // Consider setOption in event listener of brushSelect,\n      // where updating cover when creating should be forbiden.\n\n      if (oldIndex != null && oldCovers[oldIndex] === creatingCover) {\n        newCovers[newIndex] = oldCovers[oldIndex];\n      } else {\n        var cover = newCovers[newIndex] = oldIndex != null ? (oldCovers[oldIndex].__brushOption = newBrushInternal, oldCovers[oldIndex]) : endCreating(controller, createCover(controller, newBrushInternal));\n        updateCoverAfterCreation(controller, cover);\n      }\n    }\n\n    function remove(oldIndex) {\n      if (oldCovers[oldIndex] !== creatingCover) {\n        controller.group.remove(oldCovers[oldIndex]);\n      }\n    }\n  };\n\n  BrushController.prototype.unmount = function () {\n    if (process.env.NODE_ENV !== 'production') {\n      if (!this._mounted) {\n        return;\n      }\n    }\n\n    this.enableBrush(false); // container may 'removeAll' outside.\n\n    clearCovers(this);\n\n    this._zr.remove(this.group);\n\n    if (process.env.NODE_ENV !== 'production') {\n      this._mounted = false; // should be at last.\n    }\n\n    return this;\n  };\n\n  BrushController.prototype.dispose = function () {\n    this.unmount();\n    this.off();\n  };\n\n  return BrushController;\n}(Eventful);\n\nfunction createCover(controller, brushOption) {\n  var cover = coverRenderers[brushOption.brushType].createCover(controller, brushOption);\n  cover.__brushOption = brushOption;\n  updateZ(cover, brushOption);\n  controller.group.add(cover);\n  return cover;\n}\n\nfunction endCreating(controller, creatingCover) {\n  var coverRenderer = getCoverRenderer(creatingCover);\n\n  if (coverRenderer.endCreating) {\n    coverRenderer.endCreating(controller, creatingCover);\n    updateZ(creatingCover, creatingCover.__brushOption);\n  }\n\n  return creatingCover;\n}\n\nfunction updateCoverShape(controller, cover) {\n  var brushOption = cover.__brushOption;\n  getCoverRenderer(cover).updateCoverShape(controller, cover, brushOption.range, brushOption);\n}\n\nfunction updateZ(cover, brushOption) {\n  var z = brushOption.z;\n  z == null && (z = COVER_Z);\n  cover.traverse(function (el) {\n    el.z = z;\n    el.z2 = z; // Consider in given container.\n  });\n}\n\nfunction updateCoverAfterCreation(controller, cover) {\n  getCoverRenderer(cover).updateCommon(controller, cover);\n  updateCoverShape(controller, cover);\n}\n\nfunction getCoverRenderer(cover) {\n  return coverRenderers[cover.__brushOption.brushType];\n} // return target panel or `true` (means global panel)\n\n\nfunction getPanelByPoint(controller, e, localCursorPoint) {\n  var panels = controller._panels;\n\n  if (!panels) {\n    return BRUSH_PANEL_GLOBAL; // Global panel\n  }\n\n  var panel;\n  var transform = controller._transform;\n  each(panels, function (pn) {\n    pn.isTargetByCursor(e, localCursorPoint, transform) && (panel = pn);\n  });\n  return panel;\n} // Return a panel or true\n\n\nfunction getPanelByCover(controller, cover) {\n  var panels = controller._panels;\n\n  if (!panels) {\n    return BRUSH_PANEL_GLOBAL; // Global panel\n  }\n\n  var panelId = cover.__brushOption.panelId; // User may give cover without coord sys info,\n  // which is then treated as global panel.\n\n  return panelId != null ? panels[panelId] : BRUSH_PANEL_GLOBAL;\n}\n\nfunction clearCovers(controller) {\n  var covers = controller._covers;\n  var originalLength = covers.length;\n  each(covers, function (cover) {\n    controller.group.remove(cover);\n  }, controller);\n  covers.length = 0;\n  return !!originalLength;\n}\n\nfunction trigger(controller, opt) {\n  var areas = map(controller._covers, function (cover) {\n    var brushOption = cover.__brushOption;\n    var range = clone(brushOption.range);\n    return {\n      brushType: brushOption.brushType,\n      panelId: brushOption.panelId,\n      range: range\n    };\n  });\n  controller.trigger('brush', {\n    areas: areas,\n    isEnd: !!opt.isEnd,\n    removeOnClick: !!opt.removeOnClick\n  });\n}\n\nfunction shouldShowCover(controller) {\n  var track = controller._track;\n\n  if (!track.length) {\n    return false;\n  }\n\n  var p2 = track[track.length - 1];\n  var p1 = track[0];\n  var dx = p2[0] - p1[0];\n  var dy = p2[1] - p1[1];\n  var dist = mathPow(dx * dx + dy * dy, 0.5);\n  return dist > UNSELECT_THRESHOLD;\n}\n\nfunction getTrackEnds(track) {\n  var tail = track.length - 1;\n  tail < 0 && (tail = 0);\n  return [track[0], track[tail]];\n}\n\n;\n\nfunction createBaseRectCover(rectRangeConverter, controller, brushOption, edgeNameSequences) {\n  var cover = new graphic.Group();\n  cover.add(new graphic.Rect({\n    name: 'main',\n    style: makeStyle(brushOption),\n    silent: true,\n    draggable: true,\n    cursor: 'move',\n    drift: curry(driftRect, rectRangeConverter, controller, cover, ['n', 's', 'w', 'e']),\n    ondragend: curry(trigger, controller, {\n      isEnd: true\n    })\n  }));\n  each(edgeNameSequences, function (nameSequence) {\n    cover.add(new graphic.Rect({\n      name: nameSequence.join(''),\n      style: {\n        opacity: 0\n      },\n      draggable: true,\n      silent: true,\n      invisible: true,\n      drift: curry(driftRect, rectRangeConverter, controller, cover, nameSequence),\n      ondragend: curry(trigger, controller, {\n        isEnd: true\n      })\n    }));\n  });\n  return cover;\n}\n\nfunction updateBaseRect(controller, cover, localRange, brushOption) {\n  var lineWidth = brushOption.brushStyle.lineWidth || 0;\n  var handleSize = mathMax(lineWidth, MIN_RESIZE_LINE_WIDTH);\n  var x = localRange[0][0];\n  var y = localRange[1][0];\n  var xa = x - lineWidth / 2;\n  var ya = y - lineWidth / 2;\n  var x2 = localRange[0][1];\n  var y2 = localRange[1][1];\n  var x2a = x2 - handleSize + lineWidth / 2;\n  var y2a = y2 - handleSize + lineWidth / 2;\n  var width = x2 - x;\n  var height = y2 - y;\n  var widtha = width + lineWidth;\n  var heighta = height + lineWidth;\n  updateRectShape(controller, cover, 'main', x, y, width, height);\n\n  if (brushOption.transformable) {\n    updateRectShape(controller, cover, 'w', xa, ya, handleSize, heighta);\n    updateRectShape(controller, cover, 'e', x2a, ya, handleSize, heighta);\n    updateRectShape(controller, cover, 'n', xa, ya, widtha, handleSize);\n    updateRectShape(controller, cover, 's', xa, y2a, widtha, handleSize);\n    updateRectShape(controller, cover, 'nw', xa, ya, handleSize, handleSize);\n    updateRectShape(controller, cover, 'ne', x2a, ya, handleSize, handleSize);\n    updateRectShape(controller, cover, 'sw', xa, y2a, handleSize, handleSize);\n    updateRectShape(controller, cover, 'se', x2a, y2a, handleSize, handleSize);\n  }\n}\n\nfunction updateCommon(controller, cover) {\n  var brushOption = cover.__brushOption;\n  var transformable = brushOption.transformable;\n  var mainEl = cover.childAt(0);\n  mainEl.useStyle(makeStyle(brushOption));\n  mainEl.attr({\n    silent: !transformable,\n    cursor: transformable ? 'move' : 'default'\n  });\n  each([['w'], ['e'], ['n'], ['s'], ['s', 'e'], ['s', 'w'], ['n', 'e'], ['n', 'w']], function (nameSequence) {\n    var el = cover.childOfName(nameSequence.join(''));\n    var globalDir = nameSequence.length === 1 ? getGlobalDirection1(controller, nameSequence[0]) : getGlobalDirection2(controller, nameSequence);\n    el && el.attr({\n      silent: !transformable,\n      invisible: !transformable,\n      cursor: transformable ? CURSOR_MAP[globalDir] + '-resize' : null\n    });\n  });\n}\n\nfunction updateRectShape(controller, cover, name, x, y, w, h) {\n  var el = cover.childOfName(name);\n  el && el.setShape(pointsToRect(clipByPanel(controller, cover, [[x, y], [x + w, y + h]])));\n}\n\nfunction makeStyle(brushOption) {\n  return defaults({\n    strokeNoScale: true\n  }, brushOption.brushStyle);\n}\n\nfunction formatRectRange(x, y, x2, y2) {\n  var min = [mathMin(x, x2), mathMin(y, y2)];\n  var max = [mathMax(x, x2), mathMax(y, y2)];\n  return [[min[0], max[0]], [min[1], max[1]] // y range\n  ];\n}\n\nfunction getTransform(controller) {\n  return graphic.getTransform(controller.group);\n}\n\nfunction getGlobalDirection1(controller, localDirName) {\n  var map = {\n    w: 'left',\n    e: 'right',\n    n: 'top',\n    s: 'bottom'\n  };\n  var inverseMap = {\n    left: 'w',\n    right: 'e',\n    top: 'n',\n    bottom: 's'\n  };\n  var dir = graphic.transformDirection(map[localDirName], getTransform(controller));\n  return inverseMap[dir];\n}\n\nfunction getGlobalDirection2(controller, localDirNameSeq) {\n  var globalDir = [getGlobalDirection1(controller, localDirNameSeq[0]), getGlobalDirection1(controller, localDirNameSeq[1])];\n  (globalDir[0] === 'e' || globalDir[0] === 'w') && globalDir.reverse();\n  return globalDir.join('');\n}\n\nfunction driftRect(rectRangeConverter, controller, cover, dirNameSequence, dx, dy) {\n  var brushOption = cover.__brushOption;\n  var rectRange = rectRangeConverter.toRectRange(brushOption.range);\n  var localDelta = toLocalDelta(controller, dx, dy);\n  each(dirNameSequence, function (dirName) {\n    var ind = DIRECTION_MAP[dirName];\n    rectRange[ind[0]][ind[1]] += localDelta[ind[0]];\n  });\n  brushOption.range = rectRangeConverter.fromRectRange(formatRectRange(rectRange[0][0], rectRange[1][0], rectRange[0][1], rectRange[1][1]));\n  updateCoverAfterCreation(controller, cover);\n  trigger(controller, {\n    isEnd: false\n  });\n}\n\nfunction driftPolygon(controller, cover, dx, dy) {\n  var range = cover.__brushOption.range;\n  var localDelta = toLocalDelta(controller, dx, dy);\n  each(range, function (point) {\n    point[0] += localDelta[0];\n    point[1] += localDelta[1];\n  });\n  updateCoverAfterCreation(controller, cover);\n  trigger(controller, {\n    isEnd: false\n  });\n}\n\nfunction toLocalDelta(controller, dx, dy) {\n  var thisGroup = controller.group;\n  var localD = thisGroup.transformCoordToLocal(dx, dy);\n  var localZero = thisGroup.transformCoordToLocal(0, 0);\n  return [localD[0] - localZero[0], localD[1] - localZero[1]];\n}\n\nfunction clipByPanel(controller, cover, data) {\n  var panel = getPanelByCover(controller, cover);\n  return panel && panel !== BRUSH_PANEL_GLOBAL ? panel.clipPath(data, controller._transform) : clone(data);\n}\n\nfunction pointsToRect(points) {\n  var xmin = mathMin(points[0][0], points[1][0]);\n  var ymin = mathMin(points[0][1], points[1][1]);\n  var xmax = mathMax(points[0][0], points[1][0]);\n  var ymax = mathMax(points[0][1], points[1][1]);\n  return {\n    x: xmin,\n    y: ymin,\n    width: xmax - xmin,\n    height: ymax - ymin\n  };\n}\n\nfunction resetCursor(controller, e, localCursorPoint) {\n  if ( // Check active\n  !controller._brushType // resetCursor should be always called when mouse is in zr area,\n  // but not called when mouse is out of zr area to avoid bad influence\n  // if `mousemove`, `mouseup` are triggered from `document` event.\n  || isOutsideZrArea(controller, e.offsetX, e.offsetY)) {\n    return;\n  }\n\n  var zr = controller._zr;\n  var covers = controller._covers;\n  var currPanel = getPanelByPoint(controller, e, localCursorPoint); // Check whether in covers.\n\n  if (!controller._dragging) {\n    for (var i = 0; i < covers.length; i++) {\n      var brushOption = covers[i].__brushOption;\n\n      if (currPanel && (currPanel === BRUSH_PANEL_GLOBAL || brushOption.panelId === currPanel.panelId) && coverRenderers[brushOption.brushType].contain(covers[i], localCursorPoint[0], localCursorPoint[1])) {\n        // Use cursor style set on cover.\n        return;\n      }\n    }\n  }\n\n  currPanel && zr.setCursorStyle('crosshair');\n}\n\nfunction preventDefault(e) {\n  var rawE = e.event;\n  rawE.preventDefault && rawE.preventDefault();\n}\n\nfunction mainShapeContain(cover, x, y) {\n  return cover.childOfName('main').contain(x, y);\n}\n\nfunction updateCoverByMouse(controller, e, localCursorPoint, isEnd) {\n  var creatingCover = controller._creatingCover;\n  var panel = controller._creatingPanel;\n  var thisBrushOption = controller._brushOption;\n  var eventParams;\n\n  controller._track.push(localCursorPoint.slice());\n\n  if (shouldShowCover(controller) || creatingCover) {\n    if (panel && !creatingCover) {\n      thisBrushOption.brushMode === 'single' && clearCovers(controller);\n      var brushOption = clone(thisBrushOption);\n      brushOption.brushType = determineBrushType(brushOption.brushType, panel);\n      brushOption.panelId = panel === BRUSH_PANEL_GLOBAL ? null : panel.panelId;\n      creatingCover = controller._creatingCover = createCover(controller, brushOption);\n\n      controller._covers.push(creatingCover);\n    }\n\n    if (creatingCover) {\n      var coverRenderer = coverRenderers[determineBrushType(controller._brushType, panel)];\n      var coverBrushOption = creatingCover.__brushOption;\n      coverBrushOption.range = coverRenderer.getCreatingRange(clipByPanel(controller, creatingCover, controller._track));\n\n      if (isEnd) {\n        endCreating(controller, creatingCover);\n        coverRenderer.updateCommon(controller, creatingCover);\n      }\n\n      updateCoverShape(controller, creatingCover);\n      eventParams = {\n        isEnd: isEnd\n      };\n    }\n  } else if (isEnd && thisBrushOption.brushMode === 'single' && thisBrushOption.removeOnClick) {\n    // Help user to remove covers easily, only by a tiny drag, in 'single' mode.\n    // But a single click do not clear covers, because user may have casual\n    // clicks (for example, click on other component and do not expect covers\n    // disappear).\n    // Only some cover removed, trigger action, but not every click trigger action.\n    if (getPanelByPoint(controller, e, localCursorPoint) && clearCovers(controller)) {\n      eventParams = {\n        isEnd: isEnd,\n        removeOnClick: true\n      };\n    }\n  }\n\n  return eventParams;\n}\n\nfunction determineBrushType(brushType, panel) {\n  if (brushType === 'auto') {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(panel && panel.defaultBrushType, 'MUST have defaultBrushType when brushType is \"atuo\"');\n    }\n\n    return panel.defaultBrushType;\n  }\n\n  return brushType;\n}\n\nvar pointerHandlers = {\n  mousedown: function mousedown(e) {\n    if (this._dragging) {\n      // In case some browser do not support globalOut,\n      // and release mouse out side the browser.\n      handleDragEnd(this, e);\n    } else if (!e.target || !e.target.draggable) {\n      preventDefault(e);\n      var localCursorPoint = this.group.transformCoordToLocal(e.offsetX, e.offsetY);\n      this._creatingCover = null;\n      var panel = this._creatingPanel = getPanelByPoint(this, e, localCursorPoint);\n\n      if (panel) {\n        this._dragging = true;\n        this._track = [localCursorPoint.slice()];\n      }\n    }\n  },\n  mousemove: function mousemove(e) {\n    var x = e.offsetX;\n    var y = e.offsetY;\n    var localCursorPoint = this.group.transformCoordToLocal(x, y);\n    resetCursor(this, e, localCursorPoint);\n\n    if (this._dragging) {\n      preventDefault(e);\n      var eventParams = updateCoverByMouse(this, e, localCursorPoint, false);\n      eventParams && trigger(this, eventParams);\n    }\n  },\n  mouseup: function mouseup(e) {\n    handleDragEnd(this, e);\n  }\n};\n\nfunction handleDragEnd(controller, e) {\n  if (controller._dragging) {\n    preventDefault(e);\n    var x = e.offsetX;\n    var y = e.offsetY;\n    var localCursorPoint = controller.group.transformCoordToLocal(x, y);\n    var eventParams = updateCoverByMouse(controller, e, localCursorPoint, true);\n    controller._dragging = false;\n    controller._track = [];\n    controller._creatingCover = null; // trigger event shoule be at final, after procedure will be nested.\n\n    eventParams && trigger(controller, eventParams);\n  }\n}\n\nfunction isOutsideZrArea(controller, x, y) {\n  var zr = controller._zr;\n  return x < 0 || x > zr.getWidth() || y < 0 || y > zr.getHeight();\n}\n/**\n * key: brushType\n */\n\n\nvar coverRenderers = {\n  lineX: getLineRenderer(0),\n  lineY: getLineRenderer(1),\n  rect: {\n    createCover: function createCover(controller, brushOption) {\n      function returnInput(range) {\n        return range;\n      }\n\n      return createBaseRectCover({\n        toRectRange: returnInput,\n        fromRectRange: returnInput\n      }, controller, brushOption, [['w'], ['e'], ['n'], ['s'], ['s', 'e'], ['s', 'w'], ['n', 'e'], ['n', 'w']]);\n    },\n    getCreatingRange: function getCreatingRange(localTrack) {\n      var ends = getTrackEnds(localTrack);\n      return formatRectRange(ends[1][0], ends[1][1], ends[0][0], ends[0][1]);\n    },\n    updateCoverShape: function updateCoverShape(controller, cover, localRange, brushOption) {\n      updateBaseRect(controller, cover, localRange, brushOption);\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  },\n  polygon: {\n    createCover: function createCover(controller, brushOption) {\n      var cover = new graphic.Group(); // Do not use graphic.Polygon because graphic.Polyline do not close the\n      // border of the shape when drawing, which is a better experience for user.\n\n      cover.add(new graphic.Polyline({\n        name: 'main',\n        style: makeStyle(brushOption),\n        silent: true\n      }));\n      return cover;\n    },\n    getCreatingRange: function getCreatingRange(localTrack) {\n      return localTrack;\n    },\n    endCreating: function endCreating(controller, cover) {\n      cover.remove(cover.childAt(0)); // Use graphic.Polygon close the shape.\n\n      cover.add(new graphic.Polygon({\n        name: 'main',\n        draggable: true,\n        drift: curry(driftPolygon, controller, cover),\n        ondragend: curry(trigger, controller, {\n          isEnd: true\n        })\n      }));\n    },\n    updateCoverShape: function updateCoverShape(controller, cover, localRange, brushOption) {\n      cover.childAt(0).setShape({\n        points: clipByPanel(controller, cover, localRange)\n      });\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  }\n};\n\nfunction getLineRenderer(xyIndex) {\n  return {\n    createCover: function createCover(controller, brushOption) {\n      return createBaseRectCover({\n        toRectRange: function toRectRange(range) {\n          var rectRange = [range, [0, 100]];\n          xyIndex && rectRange.reverse();\n          return rectRange;\n        },\n        fromRectRange: function fromRectRange(rectRange) {\n          return rectRange[xyIndex];\n        }\n      }, controller, brushOption, [[['w'], ['e']], [['n'], ['s']]][xyIndex]);\n    },\n    getCreatingRange: function getCreatingRange(localTrack) {\n      var ends = getTrackEnds(localTrack);\n      var min = mathMin(ends[0][xyIndex], ends[1][xyIndex]);\n      var max = mathMax(ends[0][xyIndex], ends[1][xyIndex]);\n      return [min, max];\n    },\n    updateCoverShape: function updateCoverShape(controller, cover, localRange, brushOption) {\n      var otherExtent; // If brushWidth not specified, fit the panel.\n\n      var panel = getPanelByCover(controller, cover);\n\n      if (panel !== BRUSH_PANEL_GLOBAL && panel.getLinearBrushOtherExtent) {\n        otherExtent = panel.getLinearBrushOtherExtent(xyIndex);\n      } else {\n        var zr = controller._zr;\n        otherExtent = [0, [zr.getWidth(), zr.getHeight()][1 - xyIndex]];\n      }\n\n      var rectRange = [localRange, otherExtent];\n      xyIndex && rectRange.reverse();\n      updateBaseRect(controller, cover, rectRange, brushOption);\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  };\n}\n\nexport default BrushController;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport BoundingRect from 'zrender/lib/core/BoundingRect';\nimport { onIrrelevantElement } from './cursorHelper';\nimport * as graphicUtil from '../../util/graphic';\nexport function makeRectPanelClipPath(rect) {\n  rect = normalizeRect(rect);\n  return function (localPoints) {\n    return graphicUtil.clipPointsByRect(localPoints, rect);\n  };\n}\nexport function makeLinearBrushOtherExtent(rect, specifiedXYIndex) {\n  rect = normalizeRect(rect);\n  return function (xyIndex) {\n    var idx = specifiedXYIndex != null ? specifiedXYIndex : xyIndex;\n    var brushWidth = idx ? rect.width : rect.height;\n    var base = idx ? rect.x : rect.y;\n    return [base, base + (brushWidth || 0)];\n  };\n}\nexport function makeRectIsTargetByCursor(rect, api, targetModel) {\n  var boundingRect = normalizeRect(rect);\n  return function (e, localCursorPoint) {\n    return boundingRect.contain(localCursorPoint[0], localCursorPoint[1]) && !onIrrelevantElement(e, api, targetModel);\n  };\n} // Consider width/height is negative.\n\nfunction normalizeRect(rect) {\n  return BoundingRect.create(rect);\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport AxisBuilder from './AxisBuilder';\nimport BrushController from '../helper/BrushController';\nimport * as brushHelper from '../helper/brushHelper';\nimport * as graphic from '../../util/graphic';\nimport ComponentView from '../../view/Component';\nvar elementList = ['axisLine', 'axisTickLabel', 'axisName'];\n\nvar ParallelAxisView =\n/** @class */\nfunction (_super) {\n  __extends(ParallelAxisView, _super);\n\n  function ParallelAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ParallelAxisView.type;\n    return _this;\n  }\n\n  ParallelAxisView.prototype.init = function (ecModel, api) {\n    _super.prototype.init.apply(this, arguments);\n\n    (this._brushController = new BrushController(api.getZr())).on('brush', zrUtil.bind(this._onBrush, this));\n  };\n\n  ParallelAxisView.prototype.render = function (axisModel, ecModel, api, payload) {\n    if (fromAxisAreaSelect(axisModel, ecModel, payload)) {\n      return;\n    }\n\n    this.axisModel = axisModel;\n    this.api = api;\n    this.group.removeAll();\n    var oldAxisGroup = this._axisGroup;\n    this._axisGroup = new graphic.Group();\n    this.group.add(this._axisGroup);\n\n    if (!axisModel.get('show')) {\n      return;\n    }\n\n    var coordSysModel = getCoordSysModel(axisModel, ecModel);\n    var coordSys = coordSysModel.coordinateSystem;\n    var areaSelectStyle = axisModel.getAreaSelectStyle();\n    var areaWidth = areaSelectStyle.width;\n    var dim = axisModel.axis.dim;\n    var axisLayout = coordSys.getAxisLayout(dim);\n    var builderOpt = zrUtil.extend({\n      strokeContainThreshold: areaWidth\n    }, axisLayout);\n    var axisBuilder = new AxisBuilder(axisModel, builderOpt);\n    zrUtil.each(elementList, axisBuilder.add, axisBuilder);\n\n    this._axisGroup.add(axisBuilder.getGroup());\n\n    this._refreshBrushController(builderOpt, areaSelectStyle, axisModel, coordSysModel, areaWidth, api);\n\n    graphic.groupTransition(oldAxisGroup, this._axisGroup, axisModel);\n  }; // /**\n  //  * @override\n  //  */\n  // updateVisual(axisModel, ecModel, api, payload) {\n  //     this._brushController && this._brushController\n  //         .updateCovers(getCoverInfoList(axisModel));\n  // }\n\n\n  ParallelAxisView.prototype._refreshBrushController = function (builderOpt, areaSelectStyle, axisModel, coordSysModel, areaWidth, api) {\n    // After filtering, axis may change, select area needs to be update.\n    var extent = axisModel.axis.getExtent();\n    var extentLen = extent[1] - extent[0];\n    var extra = Math.min(30, Math.abs(extentLen) * 0.1); // Arbitrary value.\n    // width/height might be negative, which will be\n    // normalized in BoundingRect.\n\n    var rect = graphic.BoundingRect.create({\n      x: extent[0],\n      y: -areaWidth / 2,\n      width: extentLen,\n      height: areaWidth\n    });\n    rect.x -= extra;\n    rect.width += 2 * extra;\n\n    this._brushController.mount({\n      enableGlobalPan: true,\n      rotation: builderOpt.rotation,\n      x: builderOpt.position[0],\n      y: builderOpt.position[1]\n    }).setPanels([{\n      panelId: 'pl',\n      clipPath: brushHelper.makeRectPanelClipPath(rect),\n      isTargetByCursor: brushHelper.makeRectIsTargetByCursor(rect, api, coordSysModel),\n      getLinearBrushOtherExtent: brushHelper.makeLinearBrushOtherExtent(rect, 0)\n    }]).enableBrush({\n      brushType: 'lineX',\n      brushStyle: areaSelectStyle,\n      removeOnClick: true\n    }).updateCovers(getCoverInfoList(axisModel));\n  };\n\n  ParallelAxisView.prototype._onBrush = function (eventParam) {\n    var coverInfoList = eventParam.areas; // Do not cache these object, because the mey be changed.\n\n    var axisModel = this.axisModel;\n    var axis = axisModel.axis;\n    var intervals = zrUtil.map(coverInfoList, function (coverInfo) {\n      return [axis.coordToData(coverInfo.range[0], true), axis.coordToData(coverInfo.range[1], true)];\n    }); // If realtime is true, action is not dispatched on drag end, because\n    // the drag end emits the same params with the last drag move event,\n    // and may have some delay when using touch pad.\n\n    if (!axisModel.option.realtime === eventParam.isEnd || eventParam.removeOnClick) {\n      // jshint ignore:line\n      this.api.dispatchAction({\n        type: 'axisAreaSelect',\n        parallelAxisId: axisModel.id,\n        intervals: intervals\n      });\n    }\n  };\n\n  ParallelAxisView.prototype.dispose = function () {\n    this._brushController.dispose();\n  };\n\n  ParallelAxisView.type = 'parallelAxis';\n  return ParallelAxisView;\n}(ComponentView);\n\nfunction fromAxisAreaSelect(axisModel, ecModel, payload) {\n  return payload && payload.type === 'axisAreaSelect' && ecModel.findComponents({\n    mainType: 'parallelAxis',\n    query: payload\n  })[0] === axisModel;\n}\n\nfunction getCoverInfoList(axisModel) {\n  var axis = axisModel.axis;\n  return zrUtil.map(axisModel.activeIntervals, function (interval) {\n    return {\n      brushType: 'lineX',\n      panelId: 'pl',\n      range: [axis.dataToCoord(interval[0], true), axis.dataToCoord(interval[1], true)]\n    };\n  });\n}\n\nfunction getCoordSysModel(axisModel, ecModel) {\n  return ecModel.getComponent('parallel', axisModel.get('parallelIndex'));\n}\n\nexport default ParallelAxisView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar actionInfo = {\n  type: 'axisAreaSelect',\n  event: 'axisAreaSelected' // update: 'updateVisual'\n\n};\nexport function installParallelActions(registers) {\n  registers.registerAction(actionInfo, function (payload, ecModel) {\n    ecModel.eachComponent({\n      mainType: 'parallelAxis',\n      query: payload\n    }, function (parallelAxisModel) {\n      parallelAxisModel.axis.model.setActiveIntervals(payload.intervals);\n    });\n  });\n  /**\n   * @payload\n   */\n\n  registers.registerAction('parallelAxisExpand', function (payload, ecModel) {\n    ecModel.eachComponent({\n      mainType: 'parallel',\n      query: payload\n    }, function (parallelModel) {\n      parallelModel.setAxisExpand(payload);\n    });\n  });\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport parallelPreprocessor from '../../coord/parallel/parallelPreprocessor';\nimport ParallelView from './ParallelView';\nimport ParallelModel from '../../coord/parallel/ParallelModel';\nimport parallelCoordSysCreator from '../../coord/parallel/parallelCreator';\nimport axisModelCreator from '../../coord/axisModelCreator';\nimport ParallelAxisModel from '../../coord/parallel/AxisModel';\nimport ParallelAxisView from '../axis/ParallelAxisView';\nimport { installParallelActions } from '../axis/parallelAxisAction';\nvar defaultAxisOption = {\n  type: 'value',\n  areaSelectStyle: {\n    width: 20,\n    borderWidth: 1,\n    borderColor: 'rgba(160,197,232)',\n    color: 'rgba(160,197,232)',\n    opacity: 0.3\n  },\n  realtime: true,\n  z: 10\n};\nexport function install(registers) {\n  registers.registerComponentView(ParallelView);\n  registers.registerComponentModel(ParallelModel);\n  registers.registerCoordinateSystem('parallel', parallelCoordSysCreator);\n  registers.registerPreprocessor(parallelPreprocessor);\n  registers.registerComponentModel(ParallelAxisModel);\n  registers.registerComponentView(ParallelAxisView);\n  axisModelCreator(registers, 'parallel', ParallelAxisModel, defaultAxisOption);\n  installParallelActions(registers);\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic';\nimport { enterEmphasis, leaveEmphasis, enableHoverEmphasis, setStatesStylesFromModel } from '../../util/states';\nimport ChartView from '../../view/Chart';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle';\nimport { getECData } from '../../util/innerStore';\n\nvar SankeyPathShape =\n/** @class */\nfunction () {\n  function SankeyPathShape() {\n    this.x1 = 0;\n    this.y1 = 0;\n    this.x2 = 0;\n    this.y2 = 0;\n    this.cpx1 = 0;\n    this.cpy1 = 0;\n    this.cpx2 = 0;\n    this.cpy2 = 0;\n    this.extent = 0;\n  }\n\n  return SankeyPathShape;\n}();\n\nvar SankeyPath =\n/** @class */\nfunction (_super) {\n  __extends(SankeyPath, _super);\n\n  function SankeyPath(opts) {\n    return _super.call(this, opts) || this;\n  }\n\n  SankeyPath.prototype.getDefaultShape = function () {\n    return new SankeyPathShape();\n  };\n\n  SankeyPath.prototype.buildPath = function (ctx, shape) {\n    var extent = shape.extent;\n    ctx.moveTo(shape.x1, shape.y1);\n    ctx.bezierCurveTo(shape.cpx1, shape.cpy1, shape.cpx2, shape.cpy2, shape.x2, shape.y2);\n\n    if (shape.orient === 'vertical') {\n      ctx.lineTo(shape.x2 + extent, shape.y2);\n      ctx.bezierCurveTo(shape.cpx2 + extent, shape.cpy2, shape.cpx1 + extent, shape.cpy1, shape.x1 + extent, shape.y1);\n    } else {\n      ctx.lineTo(shape.x2, shape.y2 + extent);\n      ctx.bezierCurveTo(shape.cpx2, shape.cpy2 + extent, shape.cpx1, shape.cpy1 + extent, shape.x1, shape.y1 + extent);\n    }\n\n    ctx.closePath();\n  };\n\n  SankeyPath.prototype.highlight = function () {\n    enterEmphasis(this);\n  };\n\n  SankeyPath.prototype.downplay = function () {\n    leaveEmphasis(this);\n  };\n\n  return SankeyPath;\n}(graphic.Path);\n\nvar SankeyView =\n/** @class */\nfunction (_super) {\n  __extends(SankeyView, _super);\n\n  function SankeyView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SankeyView.type;\n    _this._focusAdjacencyDisabled = false;\n    return _this;\n  }\n\n  SankeyView.prototype.render = function (seriesModel, ecModel, api) {\n    var sankeyView = this;\n    var graph = seriesModel.getGraph();\n    var group = this.group;\n    var layoutInfo = seriesModel.layoutInfo; // view width\n\n    var width = layoutInfo.width; // view height\n\n    var height = layoutInfo.height;\n    var nodeData = seriesModel.getData();\n    var edgeData = seriesModel.getData('edge');\n    var orient = seriesModel.get('orient');\n    this._model = seriesModel;\n    group.removeAll();\n    group.x = layoutInfo.x;\n    group.y = layoutInfo.y; // generate a bezire Curve for each edge\n\n    graph.eachEdge(function (edge) {\n      var curve = new SankeyPath();\n      var ecData = getECData(curve);\n      ecData.dataIndex = edge.dataIndex;\n      ecData.seriesIndex = seriesModel.seriesIndex;\n      ecData.dataType = 'edge';\n      var edgeModel = edge.getModel();\n      var lineStyleModel = edgeModel.getModel('lineStyle');\n      var curvature = lineStyleModel.get('curveness');\n      var n1Layout = edge.node1.getLayout();\n      var node1Model = edge.node1.getModel();\n      var dragX1 = node1Model.get('localX');\n      var dragY1 = node1Model.get('localY');\n      var n2Layout = edge.node2.getLayout();\n      var node2Model = edge.node2.getModel();\n      var dragX2 = node2Model.get('localX');\n      var dragY2 = node2Model.get('localY');\n      var edgeLayout = edge.getLayout();\n      var x1;\n      var y1;\n      var x2;\n      var y2;\n      var cpx1;\n      var cpy1;\n      var cpx2;\n      var cpy2;\n      curve.shape.extent = Math.max(1, edgeLayout.dy);\n      curve.shape.orient = orient;\n\n      if (orient === 'vertical') {\n        x1 = (dragX1 != null ? dragX1 * width : n1Layout.x) + edgeLayout.sy;\n        y1 = (dragY1 != null ? dragY1 * height : n1Layout.y) + n1Layout.dy;\n        x2 = (dragX2 != null ? dragX2 * width : n2Layout.x) + edgeLayout.ty;\n        y2 = dragY2 != null ? dragY2 * height : n2Layout.y;\n        cpx1 = x1;\n        cpy1 = y1 * (1 - curvature) + y2 * curvature;\n        cpx2 = x2;\n        cpy2 = y1 * curvature + y2 * (1 - curvature);\n      } else {\n        x1 = (dragX1 != null ? dragX1 * width : n1Layout.x) + n1Layout.dx;\n        y1 = (dragY1 != null ? dragY1 * height : n1Layout.y) + edgeLayout.sy;\n        x2 = dragX2 != null ? dragX2 * width : n2Layout.x;\n        y2 = (dragY2 != null ? dragY2 * height : n2Layout.y) + edgeLayout.ty;\n        cpx1 = x1 * (1 - curvature) + x2 * curvature;\n        cpy1 = y1;\n        cpx2 = x1 * curvature + x2 * (1 - curvature);\n        cpy2 = y2;\n      }\n\n      curve.setShape({\n        x1: x1,\n        y1: y1,\n        x2: x2,\n        y2: y2,\n        cpx1: cpx1,\n        cpy1: cpy1,\n        cpx2: cpx2,\n        cpy2: cpy2\n      });\n      curve.useStyle(lineStyleModel.getItemStyle()); // Special color, use source node color or target node color\n\n      switch (curve.style.fill) {\n        case 'source':\n          curve.style.fill = edge.node1.getVisual('color');\n          curve.style.decal = edge.node1.getVisual('style').decal;\n          break;\n\n        case 'target':\n          curve.style.fill = edge.node2.getVisual('color');\n          curve.style.decal = edge.node2.getVisual('style').decal;\n          break;\n\n        case 'gradient':\n          var sourceColor = edge.node1.getVisual('color');\n          var targetColor = edge.node2.getVisual('color');\n\n          if (typeof sourceColor === 'string' && typeof targetColor === 'string') {\n            curve.style.fill = new graphic.LinearGradient(0, 0, +(orient === 'horizontal'), +(orient === 'vertical'), [{\n              color: sourceColor,\n              offset: 0\n            }, {\n              color: targetColor,\n              offset: 1\n            }]);\n          }\n\n      }\n\n      var emphasisModel = edgeModel.getModel('emphasis');\n      setStatesStylesFromModel(curve, edgeModel, 'lineStyle', function (model) {\n        return model.getItemStyle();\n      });\n      group.add(curve);\n      edgeData.setItemGraphicEl(edge.dataIndex, curve);\n      var focus = emphasisModel.get('focus');\n      enableHoverEmphasis(curve, focus === 'adjacency' ? edge.getAdjacentDataIndices() : focus, emphasisModel.get('blurScope'));\n      getECData(curve).dataType = 'edge';\n    }); // Generate a rect for each node\n\n    graph.eachNode(function (node) {\n      var layout = node.getLayout();\n      var itemModel = node.getModel();\n      var dragX = itemModel.get('localX');\n      var dragY = itemModel.get('localY');\n      var emphasisModel = itemModel.getModel('emphasis');\n      var rect = new graphic.Rect({\n        shape: {\n          x: dragX != null ? dragX * width : layout.x,\n          y: dragY != null ? dragY * height : layout.y,\n          width: layout.dx,\n          height: layout.dy\n        },\n        style: itemModel.getModel('itemStyle').getItemStyle(),\n        z2: 10\n      });\n      setLabelStyle(rect, getLabelStatesModels(itemModel), {\n        labelFetcher: seriesModel,\n        labelDataIndex: node.dataIndex,\n        defaultText: node.id\n      });\n      rect.disableLabelAnimation = true;\n      rect.setStyle('fill', node.getVisual('color'));\n      rect.setStyle('decal', node.getVisual('style').decal);\n      setStatesStylesFromModel(rect, itemModel);\n      group.add(rect);\n      nodeData.setItemGraphicEl(node.dataIndex, rect);\n      getECData(rect).dataType = 'node';\n      var focus = emphasisModel.get('focus');\n      enableHoverEmphasis(rect, focus === 'adjacency' ? node.getAdjacentDataIndices() : focus, emphasisModel.get('blurScope'));\n    });\n    nodeData.eachItemGraphicEl(function (el, dataIndex) {\n      var itemModel = nodeData.getItemModel(dataIndex);\n\n      if (itemModel.get('draggable')) {\n        el.drift = function (dx, dy) {\n          sankeyView._focusAdjacencyDisabled = true;\n          this.shape.x += dx;\n          this.shape.y += dy;\n          this.dirty();\n          api.dispatchAction({\n            type: 'dragNode',\n            seriesId: seriesModel.id,\n            dataIndex: nodeData.getRawIndex(dataIndex),\n            localX: this.shape.x / width,\n            localY: this.shape.y / height\n          });\n        };\n\n        el.ondragend = function () {\n          sankeyView._focusAdjacencyDisabled = false;\n        };\n\n        el.draggable = true;\n        el.cursor = 'move';\n      }\n    });\n\n    if (!this._data && seriesModel.isAnimationEnabled()) {\n      group.setClipPath(createGridClipShape(group.getBoundingRect(), seriesModel, function () {\n        group.removeClipPath();\n      }));\n    }\n\n    this._data = seriesModel.getData();\n  };\n\n  SankeyView.prototype.dispose = function () {};\n\n  SankeyView.type = 'sankey';\n  return SankeyView;\n}(ChartView); // Add animation to the view\n\n\nfunction createGridClipShape(rect, seriesModel, cb) {\n  var rectEl = new graphic.Rect({\n    shape: {\n      x: rect.x - 10,\n      y: rect.y - 10,\n      width: 0,\n      height: rect.height + 20\n    }\n  });\n  graphic.initProps(rectEl, {\n    shape: {\n      width: rect.width + 20\n    }\n  }, seriesModel, cb);\n  return rectEl;\n}\n\nexport default SankeyView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series';\nimport createGraphFromNodeEdge from '../helper/createGraphFromNodeEdge';\nimport Model from '../../model/Model';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup';\n\nvar SankeySeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(SankeySeriesModel, _super);\n\n  function SankeySeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SankeySeriesModel.type;\n    return _this;\n  }\n  /**\n   * Init a graph data structure from data in option series\n   */\n\n\n  SankeySeriesModel.prototype.getInitialData = function (option, ecModel) {\n    var links = option.edges || option.links;\n    var nodes = option.data || option.nodes;\n    var levels = option.levels;\n    this.levelModels = [];\n    var levelModels = this.levelModels;\n\n    for (var i = 0; i < levels.length; i++) {\n      if (levels[i].depth != null && levels[i].depth >= 0) {\n        levelModels[levels[i].depth] = new Model(levels[i], this, ecModel);\n      } else {\n        if (process.env.NODE_ENV !== 'production') {\n          throw new Error('levels[i].depth is mandatory and should be natural number');\n        }\n      }\n    }\n\n    if (nodes && links) {\n      var graph = createGraphFromNodeEdge(nodes, links, this, true, beforeLink);\n      return graph.data;\n    }\n\n    function beforeLink(nodeData, edgeData) {\n      nodeData.wrapMethod('getItemModel', function (model, idx) {\n        var seriesModel = model.parentModel;\n        var layout = seriesModel.getData().getItemLayout(idx);\n\n        if (layout) {\n          var nodeDepth = layout.depth;\n          var levelModel = seriesModel.levelModels[nodeDepth];\n\n          if (levelModel) {\n            model.parentModel = levelModel;\n          }\n        }\n\n        return model;\n      });\n      edgeData.wrapMethod('getItemModel', function (model, idx) {\n        var seriesModel = model.parentModel;\n        var edge = seriesModel.getGraph().getEdgeByIndex(idx);\n        var layout = edge.node1.getLayout();\n\n        if (layout) {\n          var depth = layout.depth;\n          var levelModel = seriesModel.levelModels[depth];\n\n          if (levelModel) {\n            model.parentModel = levelModel;\n          }\n        }\n\n        return model;\n      });\n    }\n  };\n\n  SankeySeriesModel.prototype.setNodePosition = function (dataIndex, localPosition) {\n    var nodes = this.option.data || this.option.nodes;\n    var dataItem = nodes[dataIndex];\n    dataItem.localX = localPosition[0];\n    dataItem.localY = localPosition[1];\n  };\n  /**\n   * Return the graphic data structure\n   *\n   * @return graphic data structure\n   */\n\n\n  SankeySeriesModel.prototype.getGraph = function () {\n    return this.getData().graph;\n  };\n  /**\n   * Get edge data of graphic data structure\n   *\n   * @return data structure of list\n   */\n\n\n  SankeySeriesModel.prototype.getEdgeData = function () {\n    return this.getGraph().edgeData;\n  };\n\n  SankeySeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    function noValue(val) {\n      return isNaN(val) || val == null;\n    } // dataType === 'node' or empty do not show tooltip by default\n\n\n    if (dataType === 'edge') {\n      var params = this.getDataParams(dataIndex, dataType);\n      var rawDataOpt = params.data;\n      var edgeValue = params.value;\n      var edgeName = rawDataOpt.source + ' -- ' + rawDataOpt.target;\n      return createTooltipMarkup('nameValue', {\n        name: edgeName,\n        value: edgeValue,\n        noValue: noValue(edgeValue)\n      });\n    } // dataType === 'node'\n    else {\n      var node = this.getGraph().getNodeByIndex(dataIndex);\n      var value = node.getLayout().value;\n      var name_1 = this.getDataParams(dataIndex, dataType).data.name;\n      return createTooltipMarkup('nameValue', {\n        name: name_1 != null ? name_1 + '' : null,\n        value: value,\n        noValue: noValue(value)\n      });\n    }\n  };\n\n  SankeySeriesModel.prototype.optionUpdated = function () {}; // Override Series.getDataParams()\n\n\n  SankeySeriesModel.prototype.getDataParams = function (dataIndex, dataType) {\n    var params = _super.prototype.getDataParams.call(this, dataIndex, dataType);\n\n    if (params.value == null && dataType === 'node') {\n      var node = this.getGraph().getNodeByIndex(dataIndex);\n      var nodeValue = node.getLayout().value;\n      params.value = nodeValue;\n    }\n\n    return params;\n  };\n\n  SankeySeriesModel.type = 'series.sankey';\n  SankeySeriesModel.defaultOption = {\n    zlevel: 0,\n    z: 2,\n    coordinateSystem: 'view',\n    left: '5%',\n    top: '5%',\n    right: '20%',\n    bottom: '5%',\n    orient: 'horizontal',\n    nodeWidth: 20,\n    nodeGap: 8,\n    draggable: true,\n    layoutIterations: 32,\n    label: {\n      show: true,\n      position: 'right',\n      fontSize: 12\n    },\n    levels: [],\n    nodeAlign: 'justify',\n    lineStyle: {\n      color: '#314656',\n      opacity: 0.2,\n      curveness: 0.5\n    },\n    emphasis: {\n      label: {\n        show: true\n      },\n      lineStyle: {\n        opacity: 0.5\n      }\n    },\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    },\n    animationEasing: 'linear',\n    animationDuration: 1000\n  };\n  return SankeySeriesModel;\n}(SeriesModel);\n\nexport default SankeySeriesModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as layout from '../../util/layout';\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { groupData } from '../../util/model';\nexport default function sankeyLayout(ecModel, api) {\n  ecModel.eachSeriesByType('sankey', function (seriesModel) {\n    var nodeWidth = seriesModel.get('nodeWidth');\n    var nodeGap = seriesModel.get('nodeGap');\n    var layoutInfo = getViewRect(seriesModel, api);\n    seriesModel.layoutInfo = layoutInfo;\n    var width = layoutInfo.width;\n    var height = layoutInfo.height;\n    var graph = seriesModel.getGraph();\n    var nodes = graph.nodes;\n    var edges = graph.edges;\n    computeNodeValues(nodes);\n    var filteredNodes = zrUtil.filter(nodes, function (node) {\n      return node.getLayout().value === 0;\n    });\n    var iterations = filteredNodes.length !== 0 ? 0 : seriesModel.get('layoutIterations');\n    var orient = seriesModel.get('orient');\n    var nodeAlign = seriesModel.get('nodeAlign');\n    layoutSankey(nodes, edges, nodeWidth, nodeGap, width, height, iterations, orient, nodeAlign);\n  });\n}\n/**\n * Get the layout position of the whole view\n */\n\nfunction getViewRect(seriesModel, api) {\n  return layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n}\n\nfunction layoutSankey(nodes, edges, nodeWidth, nodeGap, width, height, iterations, orient, nodeAlign) {\n  computeNodeBreadths(nodes, edges, nodeWidth, width, height, orient, nodeAlign);\n  computeNodeDepths(nodes, edges, height, width, nodeGap, iterations, orient);\n  computeEdgeDepths(nodes, orient);\n}\n/**\n * Compute the value of each node by summing the associated edge's value\n */\n\n\nfunction computeNodeValues(nodes) {\n  zrUtil.each(nodes, function (node) {\n    var value1 = sum(node.outEdges, getEdgeValue);\n    var value2 = sum(node.inEdges, getEdgeValue);\n    var nodeRawValue = node.getValue() || 0;\n    var value = Math.max(value1, value2, nodeRawValue);\n    node.setLayout({\n      value: value\n    }, true);\n  });\n}\n/**\n * Compute the x-position for each node.\n *\n * Here we use Kahn algorithm to detect cycle when we traverse\n * the node to computer the initial x position.\n */\n\n\nfunction computeNodeBreadths(nodes, edges, nodeWidth, width, height, orient, nodeAlign) {\n  // Used to mark whether the edge is deleted. if it is deleted,\n  // the value is 0, otherwise it is 1.\n  var remainEdges = []; // Storage each node's indegree.\n\n  var indegreeArr = []; //Used to storage the node with indegree is equal to 0.\n\n  var zeroIndegrees = [];\n  var nextTargetNode = [];\n  var x = 0; // let kx = 0;\n\n  for (var i = 0; i < edges.length; i++) {\n    remainEdges[i] = 1;\n  }\n\n  for (var i = 0; i < nodes.length; i++) {\n    indegreeArr[i] = nodes[i].inEdges.length;\n\n    if (indegreeArr[i] === 0) {\n      zeroIndegrees.push(nodes[i]);\n    }\n  }\n\n  var maxNodeDepth = -1; // Traversing nodes using topological sorting to calculate the\n  // horizontal(if orient === 'horizontal') or vertical(if orient === 'vertical')\n  // position of the nodes.\n\n  while (zeroIndegrees.length) {\n    for (var idx = 0; idx < zeroIndegrees.length; idx++) {\n      var node = zeroIndegrees[idx];\n      var item = node.hostGraph.data.getRawDataItem(node.dataIndex);\n      var isItemDepth = item.depth != null && item.depth >= 0;\n\n      if (isItemDepth && item.depth > maxNodeDepth) {\n        maxNodeDepth = item.depth;\n      }\n\n      node.setLayout({\n        depth: isItemDepth ? item.depth : x\n      }, true);\n      orient === 'vertical' ? node.setLayout({\n        dy: nodeWidth\n      }, true) : node.setLayout({\n        dx: nodeWidth\n      }, true);\n\n      for (var edgeIdx = 0; edgeIdx < node.outEdges.length; edgeIdx++) {\n        var edge = node.outEdges[edgeIdx];\n        var indexEdge = edges.indexOf(edge);\n        remainEdges[indexEdge] = 0;\n        var targetNode = edge.node2;\n        var nodeIndex = nodes.indexOf(targetNode);\n\n        if (--indegreeArr[nodeIndex] === 0 && nextTargetNode.indexOf(targetNode) < 0) {\n          nextTargetNode.push(targetNode);\n        }\n      }\n    }\n\n    ++x;\n    zeroIndegrees = nextTargetNode;\n    nextTargetNode = [];\n  }\n\n  for (var i = 0; i < remainEdges.length; i++) {\n    if (remainEdges[i] === 1) {\n      throw new Error('Sankey is a DAG, the original data has cycle!');\n    }\n  }\n\n  var maxDepth = maxNodeDepth > x - 1 ? maxNodeDepth : x - 1;\n\n  if (nodeAlign && nodeAlign !== 'left') {\n    adjustNodeWithNodeAlign(nodes, nodeAlign, orient, maxDepth);\n  }\n\n  var kx = orient === 'vertical' ? (height - nodeWidth) / maxDepth : (width - nodeWidth) / maxDepth;\n  scaleNodeBreadths(nodes, kx, orient);\n}\n\nfunction isNodeDepth(node) {\n  var item = node.hostGraph.data.getRawDataItem(node.dataIndex);\n  return item.depth != null && item.depth >= 0;\n}\n\nfunction adjustNodeWithNodeAlign(nodes, nodeAlign, orient, maxDepth) {\n  if (nodeAlign === 'right') {\n    var nextSourceNode = [];\n    var remainNodes = nodes;\n    var nodeHeight = 0;\n\n    while (remainNodes.length) {\n      for (var i = 0; i < remainNodes.length; i++) {\n        var node = remainNodes[i];\n        node.setLayout({\n          skNodeHeight: nodeHeight\n        }, true);\n\n        for (var j = 0; j < node.inEdges.length; j++) {\n          var edge = node.inEdges[j];\n\n          if (nextSourceNode.indexOf(edge.node1) < 0) {\n            nextSourceNode.push(edge.node1);\n          }\n        }\n      }\n\n      remainNodes = nextSourceNode;\n      nextSourceNode = [];\n      ++nodeHeight;\n    }\n\n    zrUtil.each(nodes, function (node) {\n      if (!isNodeDepth(node)) {\n        node.setLayout({\n          depth: Math.max(0, maxDepth - node.getLayout().skNodeHeight)\n        }, true);\n      }\n    });\n  } else if (nodeAlign === 'justify') {\n    moveSinksRight(nodes, maxDepth);\n  }\n}\n/**\n * All the node without outEgdes are assigned maximum x-position and\n *     be aligned in the last column.\n *\n * @param nodes.  node of sankey view.\n * @param maxDepth.  use to assign to node without outEdges as x-position.\n */\n\n\nfunction moveSinksRight(nodes, maxDepth) {\n  zrUtil.each(nodes, function (node) {\n    if (!isNodeDepth(node) && !node.outEdges.length) {\n      node.setLayout({\n        depth: maxDepth\n      }, true);\n    }\n  });\n}\n/**\n * Scale node x-position to the width\n *\n * @param nodes  node of sankey view\n * @param kx   multiple used to scale nodes\n */\n\n\nfunction scaleNodeBreadths(nodes, kx, orient) {\n  zrUtil.each(nodes, function (node) {\n    var nodeDepth = node.getLayout().depth * kx;\n    orient === 'vertical' ? node.setLayout({\n      y: nodeDepth\n    }, true) : node.setLayout({\n      x: nodeDepth\n    }, true);\n  });\n}\n/**\n * Using Gauss-Seidel iterations method to compute the node depth(y-position)\n *\n * @param nodes  node of sankey view\n * @param edges  edge of sankey view\n * @param height  the whole height of the area to draw the view\n * @param nodeGap  the vertical distance between two nodes\n *     in the same column.\n * @param iterations  the number of iterations for the algorithm\n */\n\n\nfunction computeNodeDepths(nodes, edges, height, width, nodeGap, iterations, orient) {\n  var nodesByBreadth = prepareNodesByBreadth(nodes, orient);\n  initializeNodeDepth(nodesByBreadth, edges, height, width, nodeGap, orient);\n  resolveCollisions(nodesByBreadth, nodeGap, height, width, orient);\n\n  for (var alpha = 1; iterations > 0; iterations--) {\n    // 0.99 is a experience parameter, ensure that each iterations of\n    // changes as small as possible.\n    alpha *= 0.99;\n    relaxRightToLeft(nodesByBreadth, alpha, orient);\n    resolveCollisions(nodesByBreadth, nodeGap, height, width, orient);\n    relaxLeftToRight(nodesByBreadth, alpha, orient);\n    resolveCollisions(nodesByBreadth, nodeGap, height, width, orient);\n  }\n}\n\nfunction prepareNodesByBreadth(nodes, orient) {\n  var nodesByBreadth = [];\n  var keyAttr = orient === 'vertical' ? 'y' : 'x';\n  var groupResult = groupData(nodes, function (node) {\n    return node.getLayout()[keyAttr];\n  });\n  groupResult.keys.sort(function (a, b) {\n    return a - b;\n  });\n  zrUtil.each(groupResult.keys, function (key) {\n    nodesByBreadth.push(groupResult.buckets.get(key));\n  });\n  return nodesByBreadth;\n}\n/**\n * Compute the original y-position for each node\n */\n\n\nfunction initializeNodeDepth(nodesByBreadth, edges, height, width, nodeGap, orient) {\n  var minKy = Infinity;\n  zrUtil.each(nodesByBreadth, function (nodes) {\n    var n = nodes.length;\n    var sum = 0;\n    zrUtil.each(nodes, function (node) {\n      sum += node.getLayout().value;\n    });\n    var ky = orient === 'vertical' ? (width - (n - 1) * nodeGap) / sum : (height - (n - 1) * nodeGap) / sum;\n\n    if (ky < minKy) {\n      minKy = ky;\n    }\n  });\n  zrUtil.each(nodesByBreadth, function (nodes) {\n    zrUtil.each(nodes, function (node, i) {\n      var nodeDy = node.getLayout().value * minKy;\n\n      if (orient === 'vertical') {\n        node.setLayout({\n          x: i\n        }, true);\n        node.setLayout({\n          dx: nodeDy\n        }, true);\n      } else {\n        node.setLayout({\n          y: i\n        }, true);\n        node.setLayout({\n          dy: nodeDy\n        }, true);\n      }\n    });\n  });\n  zrUtil.each(edges, function (edge) {\n    var edgeDy = +edge.getValue() * minKy;\n    edge.setLayout({\n      dy: edgeDy\n    }, true);\n  });\n}\n/**\n * Resolve the collision of initialized depth (y-position)\n */\n\n\nfunction resolveCollisions(nodesByBreadth, nodeGap, height, width, orient) {\n  var keyAttr = orient === 'vertical' ? 'x' : 'y';\n  zrUtil.each(nodesByBreadth, function (nodes) {\n    nodes.sort(function (a, b) {\n      return a.getLayout()[keyAttr] - b.getLayout()[keyAttr];\n    });\n    var nodeX;\n    var node;\n    var dy;\n    var y0 = 0;\n    var n = nodes.length;\n    var nodeDyAttr = orient === 'vertical' ? 'dx' : 'dy';\n\n    for (var i = 0; i < n; i++) {\n      node = nodes[i];\n      dy = y0 - node.getLayout()[keyAttr];\n\n      if (dy > 0) {\n        nodeX = node.getLayout()[keyAttr] + dy;\n        orient === 'vertical' ? node.setLayout({\n          x: nodeX\n        }, true) : node.setLayout({\n          y: nodeX\n        }, true);\n      }\n\n      y0 = node.getLayout()[keyAttr] + node.getLayout()[nodeDyAttr] + nodeGap;\n    }\n\n    var viewWidth = orient === 'vertical' ? width : height; // If the bottommost node goes outside the bounds, push it back up\n\n    dy = y0 - nodeGap - viewWidth;\n\n    if (dy > 0) {\n      nodeX = node.getLayout()[keyAttr] - dy;\n      orient === 'vertical' ? node.setLayout({\n        x: nodeX\n      }, true) : node.setLayout({\n        y: nodeX\n      }, true);\n      y0 = nodeX;\n\n      for (var i = n - 2; i >= 0; --i) {\n        node = nodes[i];\n        dy = node.getLayout()[keyAttr] + node.getLayout()[nodeDyAttr] + nodeGap - y0;\n\n        if (dy > 0) {\n          nodeX = node.getLayout()[keyAttr] - dy;\n          orient === 'vertical' ? node.setLayout({\n            x: nodeX\n          }, true) : node.setLayout({\n            y: nodeX\n          }, true);\n        }\n\n        y0 = node.getLayout()[keyAttr];\n      }\n    }\n  });\n}\n/**\n * Change the y-position of the nodes, except most the right side nodes\n * @param nodesByBreadth\n * @param alpha  parameter used to adjust the nodes y-position\n */\n\n\nfunction relaxRightToLeft(nodesByBreadth, alpha, orient) {\n  zrUtil.each(nodesByBreadth.slice().reverse(), function (nodes) {\n    zrUtil.each(nodes, function (node) {\n      if (node.outEdges.length) {\n        var y = sum(node.outEdges, weightedTarget, orient) / sum(node.outEdges, getEdgeValue);\n\n        if (isNaN(y)) {\n          var len = node.outEdges.length;\n          y = len ? sum(node.outEdges, centerTarget, orient) / len : 0;\n        }\n\n        if (orient === 'vertical') {\n          var nodeX = node.getLayout().x + (y - center(node, orient)) * alpha;\n          node.setLayout({\n            x: nodeX\n          }, true);\n        } else {\n          var nodeY = node.getLayout().y + (y - center(node, orient)) * alpha;\n          node.setLayout({\n            y: nodeY\n          }, true);\n        }\n      }\n    });\n  });\n}\n\nfunction weightedTarget(edge, orient) {\n  return center(edge.node2, orient) * edge.getValue();\n}\n\nfunction centerTarget(edge, orient) {\n  return center(edge.node2, orient);\n}\n\nfunction weightedSource(edge, orient) {\n  return center(edge.node1, orient) * edge.getValue();\n}\n\nfunction centerSource(edge, orient) {\n  return center(edge.node1, orient);\n}\n\nfunction center(node, orient) {\n  return orient === 'vertical' ? node.getLayout().x + node.getLayout().dx / 2 : node.getLayout().y + node.getLayout().dy / 2;\n}\n\nfunction getEdgeValue(edge) {\n  return edge.getValue();\n}\n\nfunction sum(array, cb, orient) {\n  var sum = 0;\n  var len = array.length;\n  var i = -1;\n\n  while (++i < len) {\n    var value = +cb(array[i], orient);\n\n    if (!isNaN(value)) {\n      sum += value;\n    }\n  }\n\n  return sum;\n}\n/**\n * Change the y-position of the nodes, except most the left side nodes\n */\n\n\nfunction relaxLeftToRight(nodesByBreadth, alpha, orient) {\n  zrUtil.each(nodesByBreadth, function (nodes) {\n    zrUtil.each(nodes, function (node) {\n      if (node.inEdges.length) {\n        var y = sum(node.inEdges, weightedSource, orient) / sum(node.inEdges, getEdgeValue);\n\n        if (isNaN(y)) {\n          var len = node.inEdges.length;\n          y = len ? sum(node.inEdges, centerSource, orient) / len : 0;\n        }\n\n        if (orient === 'vertical') {\n          var nodeX = node.getLayout().x + (y - center(node, orient)) * alpha;\n          node.setLayout({\n            x: nodeX\n          }, true);\n        } else {\n          var nodeY = node.getLayout().y + (y - center(node, orient)) * alpha;\n          node.setLayout({\n            y: nodeY\n          }, true);\n        }\n      }\n    });\n  });\n}\n/**\n * Compute the depth(y-position) of each edge\n */\n\n\nfunction computeEdgeDepths(nodes, orient) {\n  var keyAttr = orient === 'vertical' ? 'x' : 'y';\n  zrUtil.each(nodes, function (node) {\n    node.outEdges.sort(function (a, b) {\n      return a.node2.getLayout()[keyAttr] - b.node2.getLayout()[keyAttr];\n    });\n    node.inEdges.sort(function (a, b) {\n      return a.node1.getLayout()[keyAttr] - b.node1.getLayout()[keyAttr];\n    });\n  });\n  zrUtil.each(nodes, function (node) {\n    var sy = 0;\n    var ty = 0;\n    zrUtil.each(node.outEdges, function (edge) {\n      edge.setLayout({\n        sy: sy\n      }, true);\n      sy += edge.getLayout().dy;\n    });\n    zrUtil.each(node.inEdges, function (edge) {\n      edge.setLayout({\n        ty: ty\n      }, true);\n      ty += edge.getLayout().dy;\n    });\n  });\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport VisualMapping from '../../visual/VisualMapping';\nexport default function sankeyVisual(ecModel) {\n  ecModel.eachSeriesByType('sankey', function (seriesModel) {\n    var graph = seriesModel.getGraph();\n    var nodes = graph.nodes;\n\n    if (nodes.length) {\n      var minValue_1 = Infinity;\n      var maxValue_1 = -Infinity;\n      zrUtil.each(nodes, function (node) {\n        var nodeValue = node.getLayout().value;\n\n        if (nodeValue < minValue_1) {\n          minValue_1 = nodeValue;\n        }\n\n        if (nodeValue > maxValue_1) {\n          maxValue_1 = nodeValue;\n        }\n      });\n      zrUtil.each(nodes, function (node) {\n        var mapping = new VisualMapping({\n          type: 'color',\n          mappingMethod: 'linear',\n          dataExtent: [minValue_1, maxValue_1],\n          visual: seriesModel.get('color')\n        });\n        var mapValueToColor = mapping.mapValueToVisual(node.getLayout().value);\n        var customColor = node.getModel().get(['itemStyle', 'color']);\n\n        if (customColor != null) {\n          node.setVisual('color', customColor);\n          node.setVisual('style', {\n            fill: customColor\n          });\n        } else {\n          node.setVisual('color', mapValueToColor);\n          node.setVisual('style', {\n            fill: mapValueToColor\n          });\n        }\n      });\n    }\n  });\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport createSeriesDataSimply from './createSeriesDataSimply';\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { getDimensionTypeByAxis } from '../../data/helper/dimensionHelper';\nimport { makeSeriesEncodeForAxisCoordSys } from '../../data/helper/sourceHelper';\n\nvar WhiskerBoxCommonMixin =\n/** @class */\nfunction () {\n  function WhiskerBoxCommonMixin() {}\n  /**\n   * @override\n   */\n\n\n  WhiskerBoxCommonMixin.prototype.getInitialData = function (option, ecModel) {\n    // When both types of xAxis and yAxis are 'value', layout is\n    // needed to be specified by user. Otherwise, layout can be\n    // judged by which axis is category.\n    var ordinalMeta;\n    var xAxisModel = ecModel.getComponent('xAxis', this.get('xAxisIndex'));\n    var yAxisModel = ecModel.getComponent('yAxis', this.get('yAxisIndex'));\n    var xAxisType = xAxisModel.get('type');\n    var yAxisType = yAxisModel.get('type');\n    var addOrdinal; // FIXME\n    // Consider time axis.\n\n    if (xAxisType === 'category') {\n      option.layout = 'horizontal';\n      ordinalMeta = xAxisModel.getOrdinalMeta();\n      addOrdinal = true;\n    } else if (yAxisType === 'category') {\n      option.layout = 'vertical';\n      ordinalMeta = yAxisModel.getOrdinalMeta();\n      addOrdinal = true;\n    } else {\n      option.layout = option.layout || 'horizontal';\n    }\n\n    var coordDims = ['x', 'y'];\n    var baseAxisDimIndex = option.layout === 'horizontal' ? 0 : 1;\n    var baseAxisDim = this._baseAxisDim = coordDims[baseAxisDimIndex];\n    var otherAxisDim = coordDims[1 - baseAxisDimIndex];\n    var axisModels = [xAxisModel, yAxisModel];\n    var baseAxisType = axisModels[baseAxisDimIndex].get('type');\n    var otherAxisType = axisModels[1 - baseAxisDimIndex].get('type');\n    var data = option.data; // Clone a new data for next setOption({}) usage.\n    // Avoid modifying current data will affect further update.\n\n    if (data && addOrdinal) {\n      var newOptionData_1 = [];\n      zrUtil.each(data, function (item, index) {\n        var newItem;\n\n        if (zrUtil.isArray(item)) {\n          newItem = item.slice(); // Modify current using data.\n\n          item.unshift(index);\n        } else if (zrUtil.isArray(item.value)) {\n          newItem = zrUtil.extend({}, item);\n          newItem.value = newItem.value.slice(); // Modify current using data.\n\n          item.value.unshift(index);\n        } else {\n          newItem = item;\n        }\n\n        newOptionData_1.push(newItem);\n      });\n      option.data = newOptionData_1;\n    }\n\n    var defaultValueDimensions = this.defaultValueDimensions;\n    var coordDimensions = [{\n      name: baseAxisDim,\n      type: getDimensionTypeByAxis(baseAxisType),\n      ordinalMeta: ordinalMeta,\n      otherDims: {\n        tooltip: false,\n        itemName: 0\n      },\n      dimsDef: ['base']\n    }, {\n      name: otherAxisDim,\n      type: getDimensionTypeByAxis(otherAxisType),\n      dimsDef: defaultValueDimensions.slice()\n    }];\n    return createSeriesDataSimply(this, {\n      coordDimensions: coordDimensions,\n      dimensionsCount: defaultValueDimensions.length + 1,\n      encodeDefaulter: zrUtil.curry(makeSeriesEncodeForAxisCoordSys, coordDimensions, this)\n    });\n  };\n  /**\n   * If horizontal, base axis is x, otherwise y.\n   * @override\n   */\n\n\n  WhiskerBoxCommonMixin.prototype.getBaseAxis = function () {\n    var dim = this._baseAxisDim;\n    return this.ecModel.getComponent(dim + 'Axis', this.get(dim + 'AxisIndex')).axis;\n  };\n\n  return WhiskerBoxCommonMixin;\n}();\n\n;\nexport { WhiskerBoxCommonMixin };","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series';\nimport { WhiskerBoxCommonMixin } from '../helper/whiskerBoxCommon';\nimport { mixin } from 'zrender/lib/core/util';\n\nvar BoxplotSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(BoxplotSeriesModel, _super);\n\n  function BoxplotSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = BoxplotSeriesModel.type; // TODO\n    // box width represents group size, so dimension should have 'size'.\n\n    /**\n     * @see <https://en.wikipedia.org/wiki/Box_plot>\n     * The meanings of 'min' and 'max' depend on user,\n     * and echarts do not need to know it.\n     * @readOnly\n     */\n\n    _this.defaultValueDimensions = [{\n      name: 'min',\n      defaultTooltip: true\n    }, {\n      name: 'Q1',\n      defaultTooltip: true\n    }, {\n      name: 'median',\n      defaultTooltip: true\n    }, {\n      name: 'Q3',\n      defaultTooltip: true\n    }, {\n      name: 'max',\n      defaultTooltip: true\n    }];\n    _this.visualDrawType = 'stroke';\n    return _this;\n  }\n\n  BoxplotSeriesModel.type = 'series.boxplot';\n  BoxplotSeriesModel.dependencies = ['xAxis', 'yAxis', 'grid'];\n  BoxplotSeriesModel.defaultOption = {\n    zlevel: 0,\n    z: 2,\n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    layout: null,\n    boxWidth: [7, 50],\n    itemStyle: {\n      color: '#fff',\n      borderWidth: 1\n    },\n    emphasis: {\n      scale: true,\n      itemStyle: {\n        borderWidth: 2,\n        shadowBlur: 5,\n        shadowOffsetX: 1,\n        shadowOffsetY: 1,\n        shadowColor: 'rgba(0,0,0,0.2)'\n      }\n    },\n    animationDuration: 800\n  };\n  return BoxplotSeriesModel;\n}(SeriesModel);\n\nmixin(BoxplotSeriesModel, WhiskerBoxCommonMixin, true);\nexport default BoxplotSeriesModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport ChartView from '../../view/Chart';\nimport * as graphic from '../../util/graphic';\nimport { setStatesStylesFromModel, enableHoverEmphasis } from '../../util/states';\nimport Path from 'zrender/lib/graphic/Path';\nimport { saveOldStyle } from '../../animation/basicTrasition';\n\nvar BoxplotView =\n/** @class */\nfunction (_super) {\n  __extends(BoxplotView, _super);\n\n  function BoxplotView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = BoxplotView.type;\n    return _this;\n  }\n\n  BoxplotView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var group = this.group;\n    var oldData = this._data; // There is no old data only when first rendering or switching from\n    // stream mode to normal mode, where previous elements should be removed.\n\n    if (!this._data) {\n      group.removeAll();\n    }\n\n    var constDim = seriesModel.get('layout') === 'horizontal' ? 1 : 0;\n    data.diff(oldData).add(function (newIdx) {\n      if (data.hasValue(newIdx)) {\n        var itemLayout = data.getItemLayout(newIdx);\n        var symbolEl = createNormalBox(itemLayout, data, newIdx, constDim, true);\n        data.setItemGraphicEl(newIdx, symbolEl);\n        group.add(symbolEl);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var symbolEl = oldData.getItemGraphicEl(oldIdx); // Empty data\n\n      if (!data.hasValue(newIdx)) {\n        group.remove(symbolEl);\n        return;\n      }\n\n      var itemLayout = data.getItemLayout(newIdx);\n\n      if (!symbolEl) {\n        symbolEl = createNormalBox(itemLayout, data, newIdx, constDim);\n      } else {\n        saveOldStyle(symbolEl);\n        updateNormalBoxData(itemLayout, symbolEl, data, newIdx);\n      }\n\n      group.add(symbolEl);\n      data.setItemGraphicEl(newIdx, symbolEl);\n    }).remove(function (oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      el && group.remove(el);\n    }).execute();\n    this._data = data;\n  };\n\n  BoxplotView.prototype.remove = function (ecModel) {\n    var group = this.group;\n    var data = this._data;\n    this._data = null;\n    data && data.eachItemGraphicEl(function (el) {\n      el && group.remove(el);\n    });\n  };\n\n  BoxplotView.type = 'boxplot';\n  return BoxplotView;\n}(ChartView);\n\nvar BoxPathShape =\n/** @class */\nfunction () {\n  function BoxPathShape() {}\n\n  return BoxPathShape;\n}();\n\nvar BoxPath =\n/** @class */\nfunction (_super) {\n  __extends(BoxPath, _super);\n\n  function BoxPath(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'boxplotBoxPath';\n    return _this;\n  }\n\n  BoxPath.prototype.getDefaultShape = function () {\n    return new BoxPathShape();\n  };\n\n  BoxPath.prototype.buildPath = function (ctx, shape) {\n    var ends = shape.points;\n    var i = 0;\n    ctx.moveTo(ends[i][0], ends[i][1]);\n    i++;\n\n    for (; i < 4; i++) {\n      ctx.lineTo(ends[i][0], ends[i][1]);\n    }\n\n    ctx.closePath();\n\n    for (; i < ends.length; i++) {\n      ctx.moveTo(ends[i][0], ends[i][1]);\n      i++;\n      ctx.lineTo(ends[i][0], ends[i][1]);\n    }\n  };\n\n  return BoxPath;\n}(Path);\n\nfunction createNormalBox(itemLayout, data, dataIndex, constDim, isInit) {\n  var ends = itemLayout.ends;\n  var el = new BoxPath({\n    shape: {\n      points: isInit ? transInit(ends, constDim, itemLayout) : ends\n    }\n  });\n  updateNormalBoxData(itemLayout, el, data, dataIndex, isInit);\n  return el;\n}\n\nfunction updateNormalBoxData(itemLayout, el, data, dataIndex, isInit) {\n  var seriesModel = data.hostModel;\n  var updateMethod = graphic[isInit ? 'initProps' : 'updateProps'];\n  updateMethod(el, {\n    shape: {\n      points: itemLayout.ends\n    }\n  }, seriesModel, dataIndex);\n  el.useStyle(data.getItemVisual(dataIndex, 'style'));\n  el.style.strokeNoScale = true;\n  el.z2 = 100;\n  var itemModel = data.getItemModel(dataIndex);\n  setStatesStylesFromModel(el, itemModel);\n  enableHoverEmphasis(el, itemModel.get(['emphasis', 'focus']), itemModel.get(['emphasis', 'blurScope']));\n}\n\nfunction transInit(points, dim, itemLayout) {\n  return zrUtil.map(points, function (point) {\n    point = point.slice();\n    point[dim] = itemLayout.initBaseline;\n    return point;\n  });\n}\n\nexport default BoxplotView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport default function boxplotVisual(ecModel, api) {}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { parsePercent } from '../../util/number';\nvar each = zrUtil.each;\nexport default function boxplotLayout(ecModel) {\n  var groupResult = groupSeriesByAxis(ecModel);\n  each(groupResult, function (groupItem) {\n    var seriesModels = groupItem.seriesModels;\n\n    if (!seriesModels.length) {\n      return;\n    }\n\n    calculateBase(groupItem);\n    each(seriesModels, function (seriesModel, idx) {\n      layoutSingleSeries(seriesModel, groupItem.boxOffsetList[idx], groupItem.boxWidthList[idx]);\n    });\n  });\n}\n/**\n * Group series by axis.\n */\n\nfunction groupSeriesByAxis(ecModel) {\n  var result = [];\n  var axisList = [];\n  ecModel.eachSeriesByType('boxplot', function (seriesModel) {\n    var baseAxis = seriesModel.getBaseAxis();\n    var idx = zrUtil.indexOf(axisList, baseAxis);\n\n    if (idx < 0) {\n      idx = axisList.length;\n      axisList[idx] = baseAxis;\n      result[idx] = {\n        axis: baseAxis,\n        seriesModels: []\n      };\n    }\n\n    result[idx].seriesModels.push(seriesModel);\n  });\n  return result;\n}\n/**\n * Calculate offset and box width for each series.\n */\n\n\nfunction calculateBase(groupItem) {\n  var extent;\n  var baseAxis = groupItem.axis;\n  var seriesModels = groupItem.seriesModels;\n  var seriesCount = seriesModels.length;\n  var boxWidthList = groupItem.boxWidthList = [];\n  var boxOffsetList = groupItem.boxOffsetList = [];\n  var boundList = [];\n  var bandWidth;\n\n  if (baseAxis.type === 'category') {\n    bandWidth = baseAxis.getBandWidth();\n  } else {\n    var maxDataCount_1 = 0;\n    each(seriesModels, function (seriesModel) {\n      maxDataCount_1 = Math.max(maxDataCount_1, seriesModel.getData().count());\n    });\n    extent = baseAxis.getExtent(), Math.abs(extent[1] - extent[0]) / maxDataCount_1;\n  }\n\n  each(seriesModels, function (seriesModel) {\n    var boxWidthBound = seriesModel.get('boxWidth');\n\n    if (!zrUtil.isArray(boxWidthBound)) {\n      boxWidthBound = [boxWidthBound, boxWidthBound];\n    }\n\n    boundList.push([parsePercent(boxWidthBound[0], bandWidth) || 0, parsePercent(boxWidthBound[1], bandWidth) || 0]);\n  });\n  var availableWidth = bandWidth * 0.8 - 2;\n  var boxGap = availableWidth / seriesCount * 0.3;\n  var boxWidth = (availableWidth - boxGap * (seriesCount - 1)) / seriesCount;\n  var base = boxWidth / 2 - availableWidth / 2;\n  each(seriesModels, function (seriesModel, idx) {\n    boxOffsetList.push(base);\n    base += boxGap + boxWidth;\n    boxWidthList.push(Math.min(Math.max(boxWidth, boundList[idx][0]), boundList[idx][1]));\n  });\n}\n/**\n * Calculate points location for each series.\n */\n\n\nfunction layoutSingleSeries(seriesModel, offset, boxWidth) {\n  var coordSys = seriesModel.coordinateSystem;\n  var data = seriesModel.getData();\n  var halfWidth = boxWidth / 2;\n  var cDimIdx = seriesModel.get('layout') === 'horizontal' ? 0 : 1;\n  var vDimIdx = 1 - cDimIdx;\n  var coordDims = ['x', 'y'];\n  var cDim = data.mapDimension(coordDims[cDimIdx]);\n  var vDims = data.mapDimensionsAll(coordDims[vDimIdx]);\n\n  if (cDim == null || vDims.length < 5) {\n    return;\n  }\n\n  for (var dataIndex = 0; dataIndex < data.count(); dataIndex++) {\n    var axisDimVal = data.get(cDim, dataIndex);\n    var median = getPoint(axisDimVal, vDims[2], dataIndex);\n    var end1 = getPoint(axisDimVal, vDims[0], dataIndex);\n    var end2 = getPoint(axisDimVal, vDims[1], dataIndex);\n    var end4 = getPoint(axisDimVal, vDims[3], dataIndex);\n    var end5 = getPoint(axisDimVal, vDims[4], dataIndex);\n    var ends = [];\n    addBodyEnd(ends, end2, false);\n    addBodyEnd(ends, end4, true);\n    ends.push(end1, end2, end5, end4);\n    layEndLine(ends, end1);\n    layEndLine(ends, end5);\n    layEndLine(ends, median);\n    data.setItemLayout(dataIndex, {\n      initBaseline: median[vDimIdx],\n      ends: ends\n    });\n  }\n\n  function getPoint(axisDimVal, dim, dataIndex) {\n    var val = data.get(dim, dataIndex);\n    var p = [];\n    p[cDimIdx] = axisDimVal;\n    p[vDimIdx] = val;\n    var point;\n\n    if (isNaN(axisDimVal) || isNaN(val)) {\n      point = [NaN, NaN];\n    } else {\n      point = coordSys.dataToPoint(p);\n      point[cDimIdx] += offset;\n    }\n\n    return point;\n  }\n\n  function addBodyEnd(ends, point, start) {\n    var point1 = point.slice();\n    var point2 = point.slice();\n    point1[cDimIdx] += halfWidth;\n    point2[cDimIdx] -= halfWidth;\n    start ? ends.push(point1, point2) : ends.push(point2, point1);\n  }\n\n  function layEndLine(ends, endCenter) {\n    var from = endCenter.slice();\n    var to = endCenter.slice();\n    from[cDimIdx] -= halfWidth;\n    to[cDimIdx] += halfWidth;\n    ends.push(from, to);\n  }\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport prepareBoxplotData from './prepareBoxplotData';\nimport { throwError, makePrintable } from '../../util/log';\nimport { SOURCE_FORMAT_ARRAY_ROWS } from '../../util/types';\nexport var boxplotTransform = {\n  type: 'echarts:boxplot',\n  transform: function transform(params) {\n    var upstream = params.upstream;\n\n    if (upstream.sourceFormat !== SOURCE_FORMAT_ARRAY_ROWS) {\n      var errMsg = '';\n\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = makePrintable('source data is not applicable for this boxplot transform. Expect number[][].');\n      }\n\n      throwError(errMsg);\n    }\n\n    var result = prepareBoxplotData(upstream.getRawData(), params.config);\n    return [{\n      dimensions: ['ItemName', 'Low', 'Q1', 'Q2', 'Q3', 'High'],\n      data: result.boxData\n    }, {\n      data: result.outliers\n    }];\n  }\n};","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { quantile, asc } from '../../util/number';\nimport { isFunction, isString } from 'zrender/lib/core/util';\n/**\n * See:\n *  <https://en.wikipedia.org/wiki/Box_plot#cite_note-frigge_hoaglin_iglewicz-2>\n *  <http://stat.ethz.ch/R-manual/R-devel/library/grDevices/html/boxplot.stats.html>\n *\n * Helper method for preparing data.\n *\n * @param rawData like\n *        [\n *            [12,232,443], (raw data set for the first box)\n *            [3843,5545,1232], (raw data set for the second box)\n *            ...\n *        ]\n * @param opt.boundIQR=1.5 Data less than min bound is outlier.\n *      default 1.5, means Q1 - 1.5 * (Q3 - Q1).\n *      If 'none'/0 passed, min bound will not be used.\n */\n\nexport default function prepareBoxplotData(rawData, opt) {\n  opt = opt || {};\n  var boxData = [];\n  var outliers = [];\n  var boundIQR = opt.boundIQR;\n  var useExtreme = boundIQR === 'none' || boundIQR === 0;\n\n  for (var i = 0; i < rawData.length; i++) {\n    var ascList = asc(rawData[i].slice());\n    var Q1 = quantile(ascList, 0.25);\n    var Q2 = quantile(ascList, 0.5);\n    var Q3 = quantile(ascList, 0.75);\n    var min = ascList[0];\n    var max = ascList[ascList.length - 1];\n    var bound = (boundIQR == null ? 1.5 : boundIQR) * (Q3 - Q1);\n    var low = useExtreme ? min : Math.max(min, Q1 - bound);\n    var high = useExtreme ? max : Math.min(max, Q3 + bound);\n    var itemNameFormatter = opt.itemNameFormatter;\n    var itemName = isFunction(itemNameFormatter) ? itemNameFormatter({\n      value: i\n    }) : isString(itemNameFormatter) ? itemNameFormatter.replace('{value}', i + '') : i + '';\n    boxData.push([itemName, low, Q1, Q2, Q3, high]);\n\n    for (var j = 0; j < ascList.length; j++) {\n      var dataItem = ascList[j];\n\n      if (dataItem < low || dataItem > high) {\n        var outlier = [itemName, dataItem];\n        outliers.push(outlier);\n      }\n    }\n  }\n\n  return {\n    boxData: boxData,\n    outliers: outliers\n  };\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport ChartView from '../../view/Chart';\nimport * as graphic from '../../util/graphic';\nimport { setStatesStylesFromModel } from '../../util/states';\nimport Path from 'zrender/lib/graphic/Path';\nimport { createClipPath } from '../helper/createClipPathFromCoordSys';\nimport { saveOldStyle } from '../../animation/basicTrasition';\nvar SKIP_PROPS = ['color', 'borderColor'];\n\nvar CandlestickView =\n/** @class */\nfunction (_super) {\n  __extends(CandlestickView, _super);\n\n  function CandlestickView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CandlestickView.type;\n    return _this;\n  }\n\n  CandlestickView.prototype.render = function (seriesModel, ecModel, api) {\n    // If there is clipPath created in large mode. Remove it.\n    this.group.removeClipPath();\n\n    this._updateDrawMode(seriesModel);\n\n    this._isLargeDraw ? this._renderLarge(seriesModel) : this._renderNormal(seriesModel);\n  };\n\n  CandlestickView.prototype.incrementalPrepareRender = function (seriesModel, ecModel, api) {\n    this._clear();\n\n    this._updateDrawMode(seriesModel);\n  };\n\n  CandlestickView.prototype.incrementalRender = function (params, seriesModel, ecModel, api) {\n    this._isLargeDraw ? this._incrementalRenderLarge(params, seriesModel) : this._incrementalRenderNormal(params, seriesModel);\n  };\n\n  CandlestickView.prototype._updateDrawMode = function (seriesModel) {\n    var isLargeDraw = seriesModel.pipelineContext.large;\n\n    if (this._isLargeDraw == null || isLargeDraw !== this._isLargeDraw) {\n      this._isLargeDraw = isLargeDraw;\n\n      this._clear();\n    }\n  };\n\n  CandlestickView.prototype._renderNormal = function (seriesModel) {\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var group = this.group;\n    var isSimpleBox = data.getLayout('isSimpleBox');\n    var needsClip = seriesModel.get('clip', true);\n    var coord = seriesModel.coordinateSystem;\n    var clipArea = coord.getArea && coord.getArea(); // There is no old data only when first rendering or switching from\n    // stream mode to normal mode, where previous elements should be removed.\n\n    if (!this._data) {\n      group.removeAll();\n    }\n\n    data.diff(oldData).add(function (newIdx) {\n      if (data.hasValue(newIdx)) {\n        var itemLayout = data.getItemLayout(newIdx);\n\n        if (needsClip && isNormalBoxClipped(clipArea, itemLayout)) {\n          return;\n        }\n\n        var el = createNormalBox(itemLayout, newIdx, true);\n        graphic.initProps(el, {\n          shape: {\n            points: itemLayout.ends\n          }\n        }, seriesModel, newIdx);\n        setBoxCommon(el, data, newIdx, isSimpleBox);\n        group.add(el);\n        data.setItemGraphicEl(newIdx, el);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx); // Empty data\n\n      if (!data.hasValue(newIdx)) {\n        group.remove(el);\n        return;\n      }\n\n      var itemLayout = data.getItemLayout(newIdx);\n\n      if (needsClip && isNormalBoxClipped(clipArea, itemLayout)) {\n        group.remove(el);\n        return;\n      }\n\n      if (!el) {\n        el = createNormalBox(itemLayout, newIdx);\n      } else {\n        graphic.updateProps(el, {\n          shape: {\n            points: itemLayout.ends\n          }\n        }, seriesModel, newIdx);\n        saveOldStyle(el);\n      }\n\n      setBoxCommon(el, data, newIdx, isSimpleBox);\n      group.add(el);\n      data.setItemGraphicEl(newIdx, el);\n    }).remove(function (oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      el && group.remove(el);\n    }).execute();\n    this._data = data;\n  };\n\n  CandlestickView.prototype._renderLarge = function (seriesModel) {\n    this._clear();\n\n    createLarge(seriesModel, this.group);\n    var clipPath = seriesModel.get('clip', true) ? createClipPath(seriesModel.coordinateSystem, false, seriesModel) : null;\n\n    if (clipPath) {\n      this.group.setClipPath(clipPath);\n    } else {\n      this.group.removeClipPath();\n    }\n  };\n\n  CandlestickView.prototype._incrementalRenderNormal = function (params, seriesModel) {\n    var data = seriesModel.getData();\n    var isSimpleBox = data.getLayout('isSimpleBox');\n    var dataIndex;\n\n    while ((dataIndex = params.next()) != null) {\n      var itemLayout = data.getItemLayout(dataIndex);\n      var el = createNormalBox(itemLayout, dataIndex);\n      setBoxCommon(el, data, dataIndex, isSimpleBox);\n      el.incremental = true;\n      this.group.add(el);\n    }\n  };\n\n  CandlestickView.prototype._incrementalRenderLarge = function (params, seriesModel) {\n    createLarge(seriesModel, this.group, true);\n  };\n\n  CandlestickView.prototype.remove = function (ecModel) {\n    this._clear();\n  };\n\n  CandlestickView.prototype._clear = function () {\n    this.group.removeAll();\n    this._data = null;\n  };\n\n  CandlestickView.type = 'candlestick';\n  return CandlestickView;\n}(ChartView);\n\nvar NormalBoxPathShape =\n/** @class */\nfunction () {\n  function NormalBoxPathShape() {}\n\n  return NormalBoxPathShape;\n}();\n\nvar NormalBoxPath =\n/** @class */\nfunction (_super) {\n  __extends(NormalBoxPath, _super);\n\n  function NormalBoxPath(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'normalCandlestickBox';\n    return _this;\n  }\n\n  NormalBoxPath.prototype.getDefaultShape = function () {\n    return new NormalBoxPathShape();\n  };\n\n  NormalBoxPath.prototype.buildPath = function (ctx, shape) {\n    var ends = shape.points;\n\n    if (this.__simpleBox) {\n      ctx.moveTo(ends[4][0], ends[4][1]);\n      ctx.lineTo(ends[6][0], ends[6][1]);\n    } else {\n      ctx.moveTo(ends[0][0], ends[0][1]);\n      ctx.lineTo(ends[1][0], ends[1][1]);\n      ctx.lineTo(ends[2][0], ends[2][1]);\n      ctx.lineTo(ends[3][0], ends[3][1]);\n      ctx.closePath();\n      ctx.moveTo(ends[4][0], ends[4][1]);\n      ctx.lineTo(ends[5][0], ends[5][1]);\n      ctx.moveTo(ends[6][0], ends[6][1]);\n      ctx.lineTo(ends[7][0], ends[7][1]);\n    }\n  };\n\n  return NormalBoxPath;\n}(Path);\n\nfunction createNormalBox(itemLayout, dataIndex, isInit) {\n  var ends = itemLayout.ends;\n  return new NormalBoxPath({\n    shape: {\n      points: isInit ? transInit(ends, itemLayout) : ends\n    },\n    z2: 100\n  });\n}\n\nfunction isNormalBoxClipped(clipArea, itemLayout) {\n  var clipped = true;\n\n  for (var i = 0; i < itemLayout.ends.length; i++) {\n    // If any point are in the region.\n    if (clipArea.contain(itemLayout.ends[i][0], itemLayout.ends[i][1])) {\n      clipped = false;\n      break;\n    }\n  }\n\n  return clipped;\n}\n\nfunction setBoxCommon(el, data, dataIndex, isSimpleBox) {\n  var itemModel = data.getItemModel(dataIndex);\n  el.useStyle(data.getItemVisual(dataIndex, 'style'));\n  el.style.strokeNoScale = true;\n  el.__simpleBox = isSimpleBox;\n  setStatesStylesFromModel(el, itemModel);\n}\n\nfunction transInit(points, itemLayout) {\n  return zrUtil.map(points, function (point) {\n    point = point.slice();\n    point[1] = itemLayout.initBaseline;\n    return point;\n  });\n}\n\nvar LargeBoxPathShape =\n/** @class */\nfunction () {\n  function LargeBoxPathShape() {}\n\n  return LargeBoxPathShape;\n}();\n\nvar LargeBoxPath =\n/** @class */\nfunction (_super) {\n  __extends(LargeBoxPath, _super);\n\n  function LargeBoxPath(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'largeCandlestickBox';\n    return _this;\n  }\n\n  LargeBoxPath.prototype.getDefaultShape = function () {\n    return new LargeBoxPathShape();\n  };\n\n  LargeBoxPath.prototype.buildPath = function (ctx, shape) {\n    // Drawing lines is more efficient than drawing\n    // a whole line or drawing rects.\n    var points = shape.points;\n\n    for (var i = 0; i < points.length;) {\n      if (this.__sign === points[i++]) {\n        var x = points[i++];\n        ctx.moveTo(x, points[i++]);\n        ctx.lineTo(x, points[i++]);\n      } else {\n        i += 3;\n      }\n    }\n  };\n\n  return LargeBoxPath;\n}(Path);\n\nfunction createLarge(seriesModel, group, incremental) {\n  var data = seriesModel.getData();\n  var largePoints = data.getLayout('largePoints');\n  var elP = new LargeBoxPath({\n    shape: {\n      points: largePoints\n    },\n    __sign: 1\n  });\n  group.add(elP);\n  var elN = new LargeBoxPath({\n    shape: {\n      points: largePoints\n    },\n    __sign: -1\n  });\n  group.add(elN);\n  setLargeStyle(1, elP, seriesModel, data);\n  setLargeStyle(-1, elN, seriesModel, data);\n\n  if (incremental) {\n    elP.incremental = true;\n    elN.incremental = true;\n  }\n}\n\nfunction setLargeStyle(sign, el, seriesModel, data) {\n  // TODO put in visual?\n  var borderColor = seriesModel.get(['itemStyle', sign > 0 ? 'borderColor' : 'borderColor0']) || seriesModel.get(['itemStyle', sign > 0 ? 'color' : 'color0']); // Color must be excluded.\n  // Because symbol provide setColor individually to set fill and stroke\n\n  var itemStyle = seriesModel.getModel('itemStyle').getItemStyle(SKIP_PROPS);\n  el.useStyle(itemStyle);\n  el.style.fill = null;\n  el.style.stroke = borderColor;\n}\n\nexport default CandlestickView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series';\nimport { WhiskerBoxCommonMixin } from '../helper/whiskerBoxCommon';\nimport { mixin } from 'zrender/lib/core/util';\n\nvar CandlestickSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(CandlestickSeriesModel, _super);\n\n  function CandlestickSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CandlestickSeriesModel.type;\n    _this.defaultValueDimensions = [{\n      name: 'open',\n      defaultTooltip: true\n    }, {\n      name: 'close',\n      defaultTooltip: true\n    }, {\n      name: 'lowest',\n      defaultTooltip: true\n    }, {\n      name: 'highest',\n      defaultTooltip: true\n    }];\n    return _this;\n  }\n  /**\n   * Get dimension for shadow in dataZoom\n   * @return dimension name\n   */\n\n\n  CandlestickSeriesModel.prototype.getShadowDim = function () {\n    return 'open';\n  };\n\n  CandlestickSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\n    var itemLayout = data.getItemLayout(dataIndex);\n    return itemLayout && selectors.rect(itemLayout.brushRect);\n  };\n\n  CandlestickSeriesModel.type = 'series.candlestick';\n  CandlestickSeriesModel.dependencies = ['xAxis', 'yAxis', 'grid'];\n  CandlestickSeriesModel.defaultOption = {\n    zlevel: 0,\n    z: 2,\n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    layout: null,\n    clip: true,\n    itemStyle: {\n      color: '#eb5454',\n      color0: '#47b262',\n      borderColor: '#eb5454',\n      borderColor0: '#47b262',\n      // borderColor: '#d24040',\n      // borderColor0: '#398f4f',\n      borderWidth: 1\n    },\n    emphasis: {\n      scale: true,\n      itemStyle: {\n        borderWidth: 2\n      }\n    },\n    barMaxWidth: null,\n    barMinWidth: null,\n    barWidth: null,\n    large: true,\n    largeThreshold: 600,\n    progressive: 3e3,\n    progressiveThreshold: 1e4,\n    progressiveChunkMode: 'mod',\n    animationEasing: 'linear',\n    animationDuration: 300\n  };\n  return CandlestickSeriesModel;\n}(SeriesModel);\n\nmixin(CandlestickSeriesModel, WhiskerBoxCommonMixin, true);\nexport default CandlestickSeriesModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nexport default function candlestickPreprocessor(option) {\n  if (!option || !zrUtil.isArray(option.series)) {\n    return;\n  } // Translate 'k' to 'candlestick'.\n\n\n  zrUtil.each(option.series, function (seriesItem) {\n    if (zrUtil.isObject(seriesItem) && seriesItem.type === 'k') {\n      seriesItem.type = 'candlestick';\n    }\n  });\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport createRenderPlanner from '../helper/createRenderPlanner';\nimport { extend } from 'zrender/lib/core/util';\nvar positiveBorderColorQuery = ['itemStyle', 'borderColor'];\nvar negativeBorderColorQuery = ['itemStyle', 'borderColor0'];\nvar positiveColorQuery = ['itemStyle', 'color'];\nvar negativeColorQuery = ['itemStyle', 'color0'];\nvar candlestickVisual = {\n  seriesType: 'candlestick',\n  plan: createRenderPlanner(),\n  // For legend.\n  performRawSeries: true,\n  reset: function reset(seriesModel, ecModel) {\n    function getColor(sign, model) {\n      return model.get(sign > 0 ? positiveColorQuery : negativeColorQuery);\n    }\n\n    function getBorderColor(sign, model) {\n      return model.get(sign > 0 ? positiveBorderColorQuery : negativeBorderColorQuery);\n    } // Only visible series has each data be visual encoded\n\n\n    if (ecModel.isSeriesFiltered(seriesModel)) {\n      return;\n    }\n\n    var isLargeRender = seriesModel.pipelineContext.large;\n    return !isLargeRender && {\n      progress: function progress(params, data) {\n        var dataIndex;\n\n        while ((dataIndex = params.next()) != null) {\n          var itemModel = data.getItemModel(dataIndex);\n          var sign = data.getItemLayout(dataIndex).sign;\n          var style = itemModel.getItemStyle();\n          style.fill = getColor(sign, itemModel);\n          style.stroke = getBorderColor(sign, itemModel) || style.fill;\n          var existsStyle = data.ensureUniqueItemVisual(dataIndex, 'style');\n          extend(existsStyle, style);\n        }\n      }\n    };\n  }\n};\nexport default candlestickVisual;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/* global Float32Array */\nimport { subPixelOptimize } from '../../util/graphic';\nimport createRenderPlanner from '../helper/createRenderPlanner';\nimport { parsePercent } from '../../util/number';\nimport { map, retrieve2 } from 'zrender/lib/core/util';\nvar LargeArr = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nvar candlestickLayout = {\n  seriesType: 'candlestick',\n  plan: createRenderPlanner(),\n  reset: function reset(seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    var data = seriesModel.getData();\n    var candleWidth = calculateCandleWidth(seriesModel, data);\n    var cDimIdx = 0;\n    var vDimIdx = 1;\n    var coordDims = ['x', 'y'];\n    var cDimI = data.getDimensionIndex(data.mapDimension(coordDims[cDimIdx]));\n    var vDimsI = map(data.mapDimensionsAll(coordDims[vDimIdx]), data.getDimensionIndex, data);\n    var openDimI = vDimsI[0];\n    var closeDimI = vDimsI[1];\n    var lowestDimI = vDimsI[2];\n    var highestDimI = vDimsI[3];\n    data.setLayout({\n      candleWidth: candleWidth,\n      // The value is experimented visually.\n      isSimpleBox: candleWidth <= 1.3\n    });\n\n    if (cDimI < 0 || vDimsI.length < 4) {\n      return;\n    }\n\n    return {\n      progress: seriesModel.pipelineContext.large ? largeProgress : normalProgress\n    };\n\n    function normalProgress(params, data) {\n      var dataIndex;\n      var store = data.getStore();\n\n      while ((dataIndex = params.next()) != null) {\n        var axisDimVal = store.get(cDimI, dataIndex);\n        var openVal = store.get(openDimI, dataIndex);\n        var closeVal = store.get(closeDimI, dataIndex);\n        var lowestVal = store.get(lowestDimI, dataIndex);\n        var highestVal = store.get(highestDimI, dataIndex);\n        var ocLow = Math.min(openVal, closeVal);\n        var ocHigh = Math.max(openVal, closeVal);\n        var ocLowPoint = getPoint(ocLow, axisDimVal);\n        var ocHighPoint = getPoint(ocHigh, axisDimVal);\n        var lowestPoint = getPoint(lowestVal, axisDimVal);\n        var highestPoint = getPoint(highestVal, axisDimVal);\n        var ends = [];\n        addBodyEnd(ends, ocHighPoint, 0);\n        addBodyEnd(ends, ocLowPoint, 1);\n        ends.push(subPixelOptimizePoint(highestPoint), subPixelOptimizePoint(ocHighPoint), subPixelOptimizePoint(lowestPoint), subPixelOptimizePoint(ocLowPoint));\n        data.setItemLayout(dataIndex, {\n          sign: getSign(store, dataIndex, openVal, closeVal, closeDimI),\n          initBaseline: openVal > closeVal ? ocHighPoint[vDimIdx] : ocLowPoint[vDimIdx],\n          ends: ends,\n          brushRect: makeBrushRect(lowestVal, highestVal, axisDimVal)\n        });\n      }\n\n      function getPoint(val, axisDimVal) {\n        var p = [];\n        p[cDimIdx] = axisDimVal;\n        p[vDimIdx] = val;\n        return isNaN(axisDimVal) || isNaN(val) ? [NaN, NaN] : coordSys.dataToPoint(p);\n      }\n\n      function addBodyEnd(ends, point, start) {\n        var point1 = point.slice();\n        var point2 = point.slice();\n        point1[cDimIdx] = subPixelOptimize(point1[cDimIdx] + candleWidth / 2, 1, false);\n        point2[cDimIdx] = subPixelOptimize(point2[cDimIdx] - candleWidth / 2, 1, true);\n        start ? ends.push(point1, point2) : ends.push(point2, point1);\n      }\n\n      function makeBrushRect(lowestVal, highestVal, axisDimVal) {\n        var pmin = getPoint(lowestVal, axisDimVal);\n        var pmax = getPoint(highestVal, axisDimVal);\n        pmin[cDimIdx] -= candleWidth / 2;\n        pmax[cDimIdx] -= candleWidth / 2;\n        return {\n          x: pmin[0],\n          y: pmin[1],\n          width: vDimIdx ? candleWidth : pmax[0] - pmin[0],\n          height: vDimIdx ? pmax[1] - pmin[1] : candleWidth\n        };\n      }\n\n      function subPixelOptimizePoint(point) {\n        point[cDimIdx] = subPixelOptimize(point[cDimIdx], 1);\n        return point;\n      }\n    }\n\n    function largeProgress(params, data) {\n      // Structure: [sign, x, yhigh, ylow, sign, x, yhigh, ylow, ...]\n      var points = new LargeArr(params.count * 4);\n      var offset = 0;\n      var point;\n      var tmpIn = [];\n      var tmpOut = [];\n      var dataIndex;\n      var store = data.getStore();\n\n      while ((dataIndex = params.next()) != null) {\n        var axisDimVal = store.get(cDimI, dataIndex);\n        var openVal = store.get(openDimI, dataIndex);\n        var closeVal = store.get(closeDimI, dataIndex);\n        var lowestVal = store.get(lowestDimI, dataIndex);\n        var highestVal = store.get(highestDimI, dataIndex);\n\n        if (isNaN(axisDimVal) || isNaN(lowestVal) || isNaN(highestVal)) {\n          points[offset++] = NaN;\n          offset += 3;\n          continue;\n        }\n\n        points[offset++] = getSign(store, dataIndex, openVal, closeVal, closeDimI);\n        tmpIn[cDimIdx] = axisDimVal;\n        tmpIn[vDimIdx] = lowestVal;\n        point = coordSys.dataToPoint(tmpIn, null, tmpOut);\n        points[offset++] = point ? point[0] : NaN;\n        points[offset++] = point ? point[1] : NaN;\n        tmpIn[vDimIdx] = highestVal;\n        point = coordSys.dataToPoint(tmpIn, null, tmpOut);\n        points[offset++] = point ? point[1] : NaN;\n      }\n\n      data.setLayout('largePoints', points);\n    }\n  }\n};\n\nfunction getSign(store, dataIndex, openVal, closeVal, closeDimI) {\n  var sign;\n\n  if (openVal > closeVal) {\n    sign = -1;\n  } else if (openVal < closeVal) {\n    sign = 1;\n  } else {\n    sign = dataIndex > 0 // If close === open, compare with close of last record\n    ? store.get(closeDimI, dataIndex - 1) <= closeVal ? 1 : -1 : // No record of previous, set to be positive\n    1;\n  }\n\n  return sign;\n}\n\nfunction calculateCandleWidth(seriesModel, data) {\n  var baseAxis = seriesModel.getBaseAxis();\n  var extent;\n  var bandWidth = baseAxis.type === 'category' ? baseAxis.getBandWidth() : (extent = baseAxis.getExtent(), Math.abs(extent[1] - extent[0]) / data.count());\n  var barMaxWidth = parsePercent(retrieve2(seriesModel.get('barMaxWidth'), bandWidth), bandWidth);\n  var barMinWidth = parsePercent(retrieve2(seriesModel.get('barMinWidth'), 1), bandWidth);\n  var barWidth = seriesModel.get('barWidth');\n  return barWidth != null ? parsePercent(barWidth, bandWidth) // Put max outer to ensure bar visible in spite of overlap.\n  : Math.max(Math.min(bandWidth / 2, barMaxWidth), barMinWidth);\n}\n\nexport default candlestickLayout;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { createSymbol, normalizeSymbolOffset, normalizeSymbolSize } from '../../util/symbol';\nimport { Group } from '../../util/graphic';\nimport { enterEmphasis, leaveEmphasis, enableHoverEmphasis } from '../../util/states';\nimport SymbolClz from './Symbol';\n\nfunction updateRipplePath(rippleGroup, effectCfg) {\n  var color = effectCfg.rippleEffectColor || effectCfg.color;\n  rippleGroup.eachChild(function (ripplePath) {\n    ripplePath.attr({\n      z: effectCfg.z,\n      zlevel: effectCfg.zlevel,\n      style: {\n        stroke: effectCfg.brushType === 'stroke' ? color : null,\n        fill: effectCfg.brushType === 'fill' ? color : null\n      }\n    });\n  });\n}\n\nvar EffectSymbol =\n/** @class */\nfunction (_super) {\n  __extends(EffectSymbol, _super);\n\n  function EffectSymbol(data, idx) {\n    var _this = _super.call(this) || this;\n\n    var symbol = new SymbolClz(data, idx);\n    var rippleGroup = new Group();\n\n    _this.add(symbol);\n\n    _this.add(rippleGroup);\n\n    _this.updateData(data, idx);\n\n    return _this;\n  }\n\n  EffectSymbol.prototype.stopEffectAnimation = function () {\n    this.childAt(1).removeAll();\n  };\n\n  EffectSymbol.prototype.startEffectAnimation = function (effectCfg) {\n    var symbolType = effectCfg.symbolType;\n    var color = effectCfg.color;\n    var rippleNumber = effectCfg.rippleNumber;\n    var rippleGroup = this.childAt(1);\n\n    for (var i = 0; i < rippleNumber; i++) {\n      // If width/height are set too small (e.g., set to 1) on ios10\n      // and macOS Sierra, a circle stroke become a rect, no matter what\n      // the scale is set. So we set width/height as 2. See #4136.\n      var ripplePath = createSymbol(symbolType, -1, -1, 2, 2, color);\n      ripplePath.attr({\n        style: {\n          strokeNoScale: true\n        },\n        z2: 99,\n        silent: true,\n        scaleX: 0.5,\n        scaleY: 0.5\n      });\n      var delay = -i / rippleNumber * effectCfg.period + effectCfg.effectOffset;\n      ripplePath.animate('', true).when(effectCfg.period, {\n        scaleX: effectCfg.rippleScale / 2,\n        scaleY: effectCfg.rippleScale / 2\n      }).delay(delay).start();\n      ripplePath.animateStyle(true).when(effectCfg.period, {\n        opacity: 0\n      }).delay(delay).start();\n      rippleGroup.add(ripplePath);\n    }\n\n    updateRipplePath(rippleGroup, effectCfg);\n  };\n  /**\n   * Update effect symbol\n   */\n\n\n  EffectSymbol.prototype.updateEffectAnimation = function (effectCfg) {\n    var oldEffectCfg = this._effectCfg;\n    var rippleGroup = this.childAt(1); // Must reinitialize effect if following configuration changed\n\n    var DIFFICULT_PROPS = ['symbolType', 'period', 'rippleScale', 'rippleNumber'];\n\n    for (var i = 0; i < DIFFICULT_PROPS.length; i++) {\n      var propName = DIFFICULT_PROPS[i];\n\n      if (oldEffectCfg[propName] !== effectCfg[propName]) {\n        this.stopEffectAnimation();\n        this.startEffectAnimation(effectCfg);\n        return;\n      }\n    }\n\n    updateRipplePath(rippleGroup, effectCfg);\n  };\n  /**\n   * Highlight symbol\n   */\n\n\n  EffectSymbol.prototype.highlight = function () {\n    enterEmphasis(this);\n  };\n  /**\n   * Downplay symbol\n   */\n\n\n  EffectSymbol.prototype.downplay = function () {\n    leaveEmphasis(this);\n  };\n\n  EffectSymbol.prototype.getSymbolType = function () {\n    var symbol = this.childAt(0);\n    return symbol && symbol.getSymbolType();\n  };\n  /**\n   * Update symbol properties\n   */\n\n\n  EffectSymbol.prototype.updateData = function (data, idx) {\n    var _this = this;\n\n    var seriesModel = data.hostModel;\n    this.childAt(0).updateData(data, idx);\n    var rippleGroup = this.childAt(1);\n    var itemModel = data.getItemModel(idx);\n    var symbolType = data.getItemVisual(idx, 'symbol');\n    var symbolSize = normalizeSymbolSize(data.getItemVisual(idx, 'symbolSize'));\n    var symbolStyle = data.getItemVisual(idx, 'style');\n    var color = symbolStyle && symbolStyle.fill;\n    rippleGroup.setScale(symbolSize);\n    rippleGroup.traverse(function (ripplePath) {\n      ripplePath.setStyle('fill', color);\n    });\n    var symbolOffset = normalizeSymbolOffset(data.getItemVisual(idx, 'symbolOffset'), symbolSize);\n\n    if (symbolOffset) {\n      rippleGroup.x = symbolOffset[0];\n      rippleGroup.y = symbolOffset[1];\n    }\n\n    var symbolRotate = data.getItemVisual(idx, 'symbolRotate');\n    rippleGroup.rotation = (symbolRotate || 0) * Math.PI / 180 || 0;\n    var effectCfg = {};\n    effectCfg.showEffectOn = seriesModel.get('showEffectOn');\n    effectCfg.rippleScale = itemModel.get(['rippleEffect', 'scale']);\n    effectCfg.brushType = itemModel.get(['rippleEffect', 'brushType']);\n    effectCfg.period = itemModel.get(['rippleEffect', 'period']) * 1000;\n    effectCfg.effectOffset = idx / data.count();\n    effectCfg.z = seriesModel.getShallow('z') || 0;\n    effectCfg.zlevel = seriesModel.getShallow('zlevel') || 0;\n    effectCfg.symbolType = symbolType;\n    effectCfg.color = color;\n    effectCfg.rippleEffectColor = itemModel.get(['rippleEffect', 'color']);\n    effectCfg.rippleNumber = itemModel.get(['rippleEffect', 'number']);\n    this.off('mouseover').off('mouseout').off('emphasis').off('normal');\n\n    if (effectCfg.showEffectOn === 'render') {\n      this._effectCfg ? this.updateEffectAnimation(effectCfg) : this.startEffectAnimation(effectCfg);\n      this._effectCfg = effectCfg;\n    } else {\n      // Not keep old effect config\n      this._effectCfg = null;\n      this.stopEffectAnimation();\n\n      this.onHoverStateChange = function (toState) {\n        if (toState === 'emphasis') {\n          if (effectCfg.showEffectOn !== 'render') {\n            _this.startEffectAnimation(effectCfg);\n          }\n        } else if (toState === 'normal') {\n          if (effectCfg.showEffectOn !== 'render') {\n            _this.stopEffectAnimation();\n          }\n        }\n      };\n    }\n\n    this._effectCfg = effectCfg;\n    enableHoverEmphasis(this);\n  };\n\n  ;\n\n  EffectSymbol.prototype.fadeOut = function (cb) {\n    this.off('mouseover').off('mouseout');\n    cb && cb();\n  };\n\n  ;\n  return EffectSymbol;\n}(Group);\n\nexport default EffectSymbol;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SymbolDraw from '../helper/SymbolDraw';\nimport EffectSymbol from '../helper/EffectSymbol';\nimport * as matrix from 'zrender/lib/core/matrix';\nimport pointsLayout from '../../layout/points';\nimport ChartView from '../../view/Chart';\n\nvar EffectScatterView =\n/** @class */\nfunction (_super) {\n  __extends(EffectScatterView, _super);\n\n  function EffectScatterView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = EffectScatterView.type;\n    return _this;\n  }\n\n  EffectScatterView.prototype.init = function () {\n    this._symbolDraw = new SymbolDraw(EffectSymbol);\n  };\n\n  EffectScatterView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var effectSymbolDraw = this._symbolDraw;\n    effectSymbolDraw.updateData(data, {\n      clipShape: this._getClipShape(seriesModel)\n    });\n    this.group.add(effectSymbolDraw.group);\n  };\n\n  EffectScatterView.prototype._getClipShape = function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    var clipArea = coordSys && coordSys.getArea && coordSys.getArea();\n    return seriesModel.get('clip', true) ? clipArea : null;\n  };\n\n  EffectScatterView.prototype.updateTransform = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    this.group.dirty();\n    var res = pointsLayout('').reset(seriesModel, ecModel, api);\n\n    if (res.progress) {\n      res.progress({\n        start: 0,\n        end: data.count(),\n        count: data.count()\n      }, data);\n    }\n\n    this._symbolDraw.updateLayout();\n  };\n\n  EffectScatterView.prototype._updateGroupTransform = function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (coordSys && coordSys.getRoamTransform) {\n      this.group.transform = matrix.clone(coordSys.getRoamTransform());\n      this.group.decomposeTransform();\n    }\n  };\n\n  EffectScatterView.prototype.remove = function (ecModel, api) {\n    this._symbolDraw && this._symbolDraw.remove(true);\n  };\n\n  EffectScatterView.type = 'effectScatter';\n  return EffectScatterView;\n}(ChartView);\n\nexport default EffectScatterView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport createSeriesData from '../helper/createSeriesData';\nimport SeriesModel from '../../model/Series';\n\nvar EffectScatterSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(EffectScatterSeriesModel, _super);\n\n  function EffectScatterSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = EffectScatterSeriesModel.type;\n    _this.hasSymbolVisual = true;\n    return _this;\n  }\n\n  EffectScatterSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesData(null, this, {\n      useEncodeDefaulter: true\n    });\n  };\n\n  EffectScatterSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\n    return selectors.point(data.getItemLayout(dataIndex));\n  };\n\n  EffectScatterSeriesModel.type = 'series.effectScatter';\n  EffectScatterSeriesModel.dependencies = ['grid', 'polar'];\n  EffectScatterSeriesModel.defaultOption = {\n    coordinateSystem: 'cartesian2d',\n    zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    effectType: 'ripple',\n    progressive: 0,\n    // When to show the effect, option: 'render'|'emphasis'\n    showEffectOn: 'render',\n    clip: true,\n    // Ripple effect config\n    rippleEffect: {\n      period: 4,\n      // Scale of ripple\n      scale: 2.5,\n      // Brush type can be fill or stroke\n      brushType: 'fill',\n      // Ripple number\n      number: 3\n    },\n    universalTransition: {\n      divideShape: 'clone'\n    },\n    // Cartesian coordinate system\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // Polar coordinate system\n    // polarIndex: 0,\n    // Geo coordinate system\n    // geoIndex: 0,\n    // symbol: null,        // \n    symbolSize: 10 // symbolSize * 2\n    // symbolRotate: null,  // \n    // itemStyle: {\n    //     opacity: 1\n    // }\n\n  };\n  return EffectScatterSeriesModel;\n}(SeriesModel);\n\nexport default EffectScatterSeriesModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/**\n * Provide effect for line\n */\n\nimport * as graphic from '../../util/graphic';\nimport Line from './Line';\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { createSymbol } from '../../util/symbol';\nimport * as vec2 from 'zrender/lib/core/vector';\nimport * as curveUtil from 'zrender/lib/core/curve';\n\nvar EffectLine =\n/** @class */\nfunction (_super) {\n  __extends(EffectLine, _super);\n\n  function EffectLine(lineData, idx, seriesScope) {\n    var _this = _super.call(this) || this;\n\n    _this.add(_this.createLine(lineData, idx, seriesScope));\n\n    _this._updateEffectSymbol(lineData, idx);\n\n    return _this;\n  }\n\n  EffectLine.prototype.createLine = function (lineData, idx, seriesScope) {\n    return new Line(lineData, idx, seriesScope);\n  };\n\n  EffectLine.prototype._updateEffectSymbol = function (lineData, idx) {\n    var itemModel = lineData.getItemModel(idx);\n    var effectModel = itemModel.getModel('effect');\n    var size = effectModel.get('symbolSize');\n    var symbolType = effectModel.get('symbol');\n\n    if (!zrUtil.isArray(size)) {\n      size = [size, size];\n    }\n\n    var lineStyle = lineData.getItemVisual(idx, 'style');\n    var color = effectModel.get('color') || lineStyle && lineStyle.stroke;\n    var symbol = this.childAt(1);\n\n    if (this._symbolType !== symbolType) {\n      // Remove previous\n      this.remove(symbol);\n      symbol = createSymbol(symbolType, -0.5, -0.5, 1, 1, color);\n      symbol.z2 = 100;\n      symbol.culling = true;\n      this.add(symbol);\n    } // Symbol may be removed if loop is false\n\n\n    if (!symbol) {\n      return;\n    } // Shadow color is same with color in default\n\n\n    symbol.setStyle('shadowColor', color);\n    symbol.setStyle(effectModel.getItemStyle(['color']));\n    symbol.scaleX = size[0];\n    symbol.scaleY = size[1];\n    symbol.setColor(color);\n    this._symbolType = symbolType;\n    this._symbolScale = size;\n\n    this._updateEffectAnimation(lineData, effectModel, idx);\n  };\n\n  EffectLine.prototype._updateEffectAnimation = function (lineData, effectModel, idx) {\n    var symbol = this.childAt(1);\n\n    if (!symbol) {\n      return;\n    }\n\n    var self = this;\n    var points = lineData.getItemLayout(idx);\n    var period = effectModel.get('period') * 1000;\n    var loop = effectModel.get('loop');\n    var constantSpeed = effectModel.get('constantSpeed');\n    var delayExpr = zrUtil.retrieve(effectModel.get('delay'), function (idx) {\n      return idx / lineData.count() * period / 3;\n    }); // Ignore when updating\n\n    symbol.ignore = true;\n\n    this._updateAnimationPoints(symbol, points);\n\n    if (constantSpeed > 0) {\n      period = this._getLineLength(symbol) / constantSpeed * 1000;\n    }\n\n    if (period !== this._period || loop !== this._loop) {\n      symbol.stopAnimation();\n\n      if (period > 0) {\n        var delayNum = void 0;\n\n        if (typeof delayExpr === 'function') {\n          delayNum = delayExpr(idx);\n        } else {\n          delayNum = delayExpr;\n        }\n\n        if (symbol.__t > 0) {\n          delayNum = -period * symbol.__t;\n        }\n\n        symbol.__t = 0;\n        var animator = symbol.animate('', loop).when(period, {\n          __t: 1\n        }).delay(delayNum).during(function () {\n          self._updateSymbolPosition(symbol);\n        });\n\n        if (!loop) {\n          animator.done(function () {\n            self.remove(symbol);\n          });\n        }\n\n        animator.start();\n      }\n    }\n\n    this._period = period;\n    this._loop = loop;\n  };\n\n  EffectLine.prototype._getLineLength = function (symbol) {\n    // Not so accurate\n    return vec2.dist(symbol.__p1, symbol.__cp1) + vec2.dist(symbol.__cp1, symbol.__p2);\n  };\n\n  EffectLine.prototype._updateAnimationPoints = function (symbol, points) {\n    symbol.__p1 = points[0];\n    symbol.__p2 = points[1];\n    symbol.__cp1 = points[2] || [(points[0][0] + points[1][0]) / 2, (points[0][1] + points[1][1]) / 2];\n  };\n\n  EffectLine.prototype.updateData = function (lineData, idx, seriesScope) {\n    this.childAt(0).updateData(lineData, idx, seriesScope);\n\n    this._updateEffectSymbol(lineData, idx);\n  };\n\n  EffectLine.prototype._updateSymbolPosition = function (symbol) {\n    var p1 = symbol.__p1;\n    var p2 = symbol.__p2;\n    var cp1 = symbol.__cp1;\n    var t = symbol.__t;\n    var pos = [symbol.x, symbol.y];\n    var lastPos = pos.slice();\n    var quadraticAt = curveUtil.quadraticAt;\n    var quadraticDerivativeAt = curveUtil.quadraticDerivativeAt;\n    pos[0] = quadraticAt(p1[0], cp1[0], p2[0], t);\n    pos[1] = quadraticAt(p1[1], cp1[1], p2[1], t); // Tangent\n\n    var tx = quadraticDerivativeAt(p1[0], cp1[0], p2[0], t);\n    var ty = quadraticDerivativeAt(p1[1], cp1[1], p2[1], t);\n    symbol.rotation = -Math.atan2(ty, tx) - Math.PI / 2; // enable continuity trail for 'line', 'rect', 'roundRect' symbolType\n\n    if (this._symbolType === 'line' || this._symbolType === 'rect' || this._symbolType === 'roundRect') {\n      if (symbol.__lastT !== undefined && symbol.__lastT < symbol.__t) {\n        symbol.scaleY = vec2.dist(lastPos, pos) * 1.05; // make sure the last segment render within endPoint\n\n        if (t === 1) {\n          pos[0] = lastPos[0] + (pos[0] - lastPos[0]) / 2;\n          pos[1] = lastPos[1] + (pos[1] - lastPos[1]) / 2;\n        }\n      } else if (symbol.__lastT === 1) {\n        // After first loop, symbol.__t does NOT start with 0, so connect p1 to pos directly.\n        symbol.scaleY = 2 * vec2.dist(p1, pos);\n      } else {\n        symbol.scaleY = this._symbolScale[1];\n      }\n    }\n\n    symbol.__lastT = symbol.__t;\n    symbol.ignore = false;\n    symbol.x = pos[0];\n    symbol.y = pos[1];\n  };\n\n  EffectLine.prototype.updateLayout = function (lineData, idx) {\n    this.childAt(0).updateLayout(lineData, idx);\n    var effectModel = lineData.getItemModel(idx).getModel('effect');\n\n    this._updateEffectAnimation(lineData, effectModel, idx);\n  };\n\n  return EffectLine;\n}(graphic.Group);\n\nexport default EffectLine;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic';\nimport { enableHoverEmphasis } from '../../util/states';\n\nvar Polyline =\n/** @class */\nfunction (_super) {\n  __extends(Polyline, _super);\n\n  function Polyline(lineData, idx, seriesScope) {\n    var _this = _super.call(this) || this;\n\n    _this._createPolyline(lineData, idx, seriesScope);\n\n    return _this;\n  }\n\n  Polyline.prototype._createPolyline = function (lineData, idx, seriesScope) {\n    // let seriesModel = lineData.hostModel;\n    var points = lineData.getItemLayout(idx);\n    var line = new graphic.Polyline({\n      shape: {\n        points: points\n      }\n    });\n    this.add(line);\n\n    this._updateCommonStl(lineData, idx, seriesScope);\n  };\n\n  ;\n\n  Polyline.prototype.updateData = function (lineData, idx, seriesScope) {\n    var seriesModel = lineData.hostModel;\n    var line = this.childAt(0);\n    var target = {\n      shape: {\n        points: lineData.getItemLayout(idx)\n      }\n    };\n    graphic.updateProps(line, target, seriesModel, idx);\n\n    this._updateCommonStl(lineData, idx, seriesScope);\n  };\n\n  ;\n\n  Polyline.prototype._updateCommonStl = function (lineData, idx, seriesScope) {\n    var line = this.childAt(0);\n    var itemModel = lineData.getItemModel(idx);\n    var hoverLineStyle = seriesScope && seriesScope.emphasisLineStyle;\n\n    if (!seriesScope || lineData.hasItemOption) {\n      hoverLineStyle = itemModel.getModel(['emphasis', 'lineStyle']).getLineStyle();\n    }\n\n    line.useStyle(lineData.getItemVisual(idx, 'style'));\n    line.style.fill = null;\n    line.style.strokeNoScale = true;\n    var lineEmphasisState = line.ensureState('emphasis');\n    lineEmphasisState.style = hoverLineStyle;\n    enableHoverEmphasis(this);\n  };\n\n  ;\n\n  Polyline.prototype.updateLayout = function (lineData, idx) {\n    var polyline = this.childAt(0);\n    polyline.setShape('points', lineData.getItemLayout(idx));\n  };\n\n  ;\n  return Polyline;\n}(graphic.Group);\n\nexport default Polyline;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Polyline from './Polyline';\nimport EffectLine from './EffectLine';\nimport * as vec2 from 'zrender/lib/core/vector';\n\nvar EffectPolyline =\n/** @class */\nfunction (_super) {\n  __extends(EffectPolyline, _super);\n\n  function EffectPolyline() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this._lastFrame = 0;\n    _this._lastFramePercent = 0;\n    return _this;\n  } // Override\n\n\n  EffectPolyline.prototype.createLine = function (lineData, idx, seriesScope) {\n    return new Polyline(lineData, idx, seriesScope);\n  };\n\n  ; // Override\n\n  EffectPolyline.prototype._updateAnimationPoints = function (symbol, points) {\n    this._points = points;\n    var accLenArr = [0];\n    var len = 0;\n\n    for (var i = 1; i < points.length; i++) {\n      var p1 = points[i - 1];\n      var p2 = points[i];\n      len += vec2.dist(p1, p2);\n      accLenArr.push(len);\n    }\n\n    if (len === 0) {\n      this._length = 0;\n      return;\n    }\n\n    for (var i = 0; i < accLenArr.length; i++) {\n      accLenArr[i] /= len;\n    }\n\n    this._offsets = accLenArr;\n    this._length = len;\n  };\n\n  ; // Override\n\n  EffectPolyline.prototype._getLineLength = function () {\n    return this._length;\n  };\n\n  ; // Override\n\n  EffectPolyline.prototype._updateSymbolPosition = function (symbol) {\n    var t = symbol.__t;\n    var points = this._points;\n    var offsets = this._offsets;\n    var len = points.length;\n\n    if (!offsets) {\n      // Has length 0\n      return;\n    }\n\n    var lastFrame = this._lastFrame;\n    var frame;\n\n    if (t < this._lastFramePercent) {\n      // Start from the next frame\n      // PENDING start from lastFrame ?\n      var start = Math.min(lastFrame + 1, len - 1);\n\n      for (frame = start; frame >= 0; frame--) {\n        if (offsets[frame] <= t) {\n          break;\n        }\n      } // PENDING really need to do this ?\n\n\n      frame = Math.min(frame, len - 2);\n    } else {\n      for (frame = lastFrame; frame < len; frame++) {\n        if (offsets[frame] > t) {\n          break;\n        }\n      }\n\n      frame = Math.min(frame - 1, len - 2);\n    }\n\n    var p = (t - offsets[frame]) / (offsets[frame + 1] - offsets[frame]);\n    var p0 = points[frame];\n    var p1 = points[frame + 1];\n    symbol.x = p0[0] * (1 - p) + p * p1[0];\n    symbol.y = p0[1] * (1 - p) + p * p1[1];\n    var tx = p1[0] - p0[0];\n    var ty = p1[1] - p0[1];\n    symbol.rotation = -Math.atan2(ty, tx) - Math.PI / 2;\n    this._lastFrame = frame;\n    this._lastFramePercent = t;\n    symbol.ignore = false;\n  };\n\n  ;\n  return EffectPolyline;\n}(EffectLine);\n\nexport default EffectPolyline;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\"; // TODO Batch by color\n\nimport * as graphic from '../../util/graphic';\nimport IncrementalDisplayable from 'zrender/lib/graphic/IncrementalDisplayable';\nimport * as lineContain from 'zrender/lib/contain/line';\nimport * as quadraticContain from 'zrender/lib/contain/quadratic';\nimport { getECData } from '../../util/innerStore';\n\nvar LargeLinesPathShape =\n/** @class */\nfunction () {\n  function LargeLinesPathShape() {\n    this.polyline = false;\n    this.curveness = 0;\n    this.segs = [];\n  }\n\n  return LargeLinesPathShape;\n}();\n\nvar LargeLinesPath =\n/** @class */\nfunction (_super) {\n  __extends(LargeLinesPath, _super);\n\n  function LargeLinesPath(opts) {\n    return _super.call(this, opts) || this;\n  }\n\n  LargeLinesPath.prototype.getDefaultStyle = function () {\n    return {\n      stroke: '#000',\n      fill: null\n    };\n  };\n\n  LargeLinesPath.prototype.getDefaultShape = function () {\n    return new LargeLinesPathShape();\n  };\n\n  LargeLinesPath.prototype.buildPath = function (ctx, shape) {\n    var segs = shape.segs;\n    var curveness = shape.curveness;\n\n    if (shape.polyline) {\n      for (var i = 0; i < segs.length;) {\n        var count = segs[i++];\n\n        if (count > 0) {\n          ctx.moveTo(segs[i++], segs[i++]);\n\n          for (var k = 1; k < count; k++) {\n            ctx.lineTo(segs[i++], segs[i++]);\n          }\n        }\n      }\n    } else {\n      for (var i = 0; i < segs.length;) {\n        var x0 = segs[i++];\n        var y0 = segs[i++];\n        var x1 = segs[i++];\n        var y1 = segs[i++];\n        ctx.moveTo(x0, y0);\n\n        if (curveness > 0) {\n          var x2 = (x0 + x1) / 2 - (y0 - y1) * curveness;\n          var y2 = (y0 + y1) / 2 - (x1 - x0) * curveness;\n          ctx.quadraticCurveTo(x2, y2, x1, y1);\n        } else {\n          ctx.lineTo(x1, y1);\n        }\n      }\n    }\n  };\n\n  LargeLinesPath.prototype.findDataIndex = function (x, y) {\n    var shape = this.shape;\n    var segs = shape.segs;\n    var curveness = shape.curveness;\n    var lineWidth = this.style.lineWidth;\n\n    if (shape.polyline) {\n      var dataIndex = 0;\n\n      for (var i = 0; i < segs.length;) {\n        var count = segs[i++];\n\n        if (count > 0) {\n          var x0 = segs[i++];\n          var y0 = segs[i++];\n\n          for (var k = 1; k < count; k++) {\n            var x1 = segs[i++];\n            var y1 = segs[i++];\n\n            if (lineContain.containStroke(x0, y0, x1, y1, lineWidth, x, y)) {\n              return dataIndex;\n            }\n          }\n        }\n\n        dataIndex++;\n      }\n    } else {\n      var dataIndex = 0;\n\n      for (var i = 0; i < segs.length;) {\n        var x0 = segs[i++];\n        var y0 = segs[i++];\n        var x1 = segs[i++];\n        var y1 = segs[i++];\n\n        if (curveness > 0) {\n          var x2 = (x0 + x1) / 2 - (y0 - y1) * curveness;\n          var y2 = (y0 + y1) / 2 - (x1 - x0) * curveness;\n\n          if (quadraticContain.containStroke(x0, y0, x2, y2, x1, y1, lineWidth, x, y)) {\n            return dataIndex;\n          }\n        } else {\n          if (lineContain.containStroke(x0, y0, x1, y1, lineWidth, x, y)) {\n            return dataIndex;\n          }\n        }\n\n        dataIndex++;\n      }\n    }\n\n    return -1;\n  };\n\n  return LargeLinesPath;\n}(graphic.Path);\n\nvar LargeLineDraw =\n/** @class */\nfunction () {\n  function LargeLineDraw() {\n    this.group = new graphic.Group();\n  }\n\n  LargeLineDraw.prototype.isPersistent = function () {\n    return !this._incremental;\n  };\n\n  ;\n  /**\n   * Update symbols draw by new data\n   */\n\n  LargeLineDraw.prototype.updateData = function (data) {\n    this.group.removeAll();\n    var lineEl = new LargeLinesPath({\n      rectHover: true,\n      cursor: 'default'\n    });\n    lineEl.setShape({\n      segs: data.getLayout('linesPoints')\n    });\n\n    this._setCommon(lineEl, data); // Add back\n\n\n    this.group.add(lineEl);\n    this._incremental = null;\n  };\n\n  ;\n  /**\n   * @override\n   */\n\n  LargeLineDraw.prototype.incrementalPrepareUpdate = function (data) {\n    this.group.removeAll();\n\n    this._clearIncremental();\n\n    if (data.count() > 5e5) {\n      if (!this._incremental) {\n        this._incremental = new IncrementalDisplayable({\n          silent: true\n        });\n      }\n\n      this.group.add(this._incremental);\n    } else {\n      this._incremental = null;\n    }\n  };\n\n  ;\n  /**\n   * @override\n   */\n\n  LargeLineDraw.prototype.incrementalUpdate = function (taskParams, data) {\n    var lineEl = new LargeLinesPath();\n    lineEl.setShape({\n      segs: data.getLayout('linesPoints')\n    });\n\n    this._setCommon(lineEl, data, !!this._incremental);\n\n    if (!this._incremental) {\n      lineEl.rectHover = true;\n      lineEl.cursor = 'default';\n      lineEl.__startIndex = taskParams.start;\n      this.group.add(lineEl);\n    } else {\n      this._incremental.addDisplayable(lineEl, true);\n    }\n  };\n\n  ;\n  /**\n   * @override\n   */\n\n  LargeLineDraw.prototype.remove = function () {\n    this._clearIncremental();\n\n    this._incremental = null;\n    this.group.removeAll();\n  };\n\n  ;\n\n  LargeLineDraw.prototype._setCommon = function (lineEl, data, isIncremental) {\n    var hostModel = data.hostModel;\n    lineEl.setShape({\n      polyline: hostModel.get('polyline'),\n      curveness: hostModel.get(['lineStyle', 'curveness'])\n    });\n    lineEl.useStyle(hostModel.getModel('lineStyle').getLineStyle());\n    lineEl.style.strokeNoScale = true;\n    var style = data.getVisual('style');\n\n    if (style && style.stroke) {\n      lineEl.setStyle('stroke', style.stroke);\n    }\n\n    lineEl.setStyle('fill', null);\n\n    if (!isIncremental) {\n      var ecData_1 = getECData(lineEl); // Enable tooltip\n      // PENDING May have performance issue when path is extremely large\n\n      ecData_1.seriesIndex = hostModel.seriesIndex;\n      lineEl.on('mousemove', function (e) {\n        ecData_1.dataIndex = null;\n        var dataIndex = lineEl.findDataIndex(e.offsetX, e.offsetY);\n\n        if (dataIndex > 0) {\n          // Provide dataIndex for tooltip\n          ecData_1.dataIndex = dataIndex + lineEl.__startIndex;\n        }\n      });\n    }\n  };\n\n  ;\n\n  LargeLineDraw.prototype._clearIncremental = function () {\n    var incremental = this._incremental;\n\n    if (incremental) {\n      incremental.clearDisplaybles();\n    }\n  };\n\n  ;\n  return LargeLineDraw;\n}();\n\nexport default LargeLineDraw;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/* global Float32Array */\nimport createRenderPlanner from '../helper/createRenderPlanner';\nvar linesLayout = {\n  seriesType: 'lines',\n  plan: createRenderPlanner(),\n  reset: function reset(seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    var isPolyline = seriesModel.get('polyline');\n    var isLarge = seriesModel.pipelineContext.large;\n    return {\n      progress: function progress(params, lineData) {\n        var lineCoords = [];\n\n        if (isLarge) {\n          var points = void 0;\n          var segCount = params.end - params.start;\n\n          if (isPolyline) {\n            var totalCoordsCount = 0;\n\n            for (var i = params.start; i < params.end; i++) {\n              totalCoordsCount += seriesModel.getLineCoordsCount(i);\n            }\n\n            points = new Float32Array(segCount + totalCoordsCount * 2);\n          } else {\n            points = new Float32Array(segCount * 4);\n          }\n\n          var offset = 0;\n          var pt = [];\n\n          for (var i = params.start; i < params.end; i++) {\n            var len = seriesModel.getLineCoords(i, lineCoords);\n\n            if (isPolyline) {\n              points[offset++] = len;\n            }\n\n            for (var k = 0; k < len; k++) {\n              pt = coordSys.dataToPoint(lineCoords[k], false, pt);\n              points[offset++] = pt[0];\n              points[offset++] = pt[1];\n            }\n          }\n\n          lineData.setLayout('linesPoints', points);\n        } else {\n          for (var i = params.start; i < params.end; i++) {\n            var itemModel = lineData.getItemModel(i);\n            var len = seriesModel.getLineCoords(i, lineCoords);\n            var pts = [];\n\n            if (isPolyline) {\n              for (var j = 0; j < len; j++) {\n                pts.push(coordSys.dataToPoint(lineCoords[j]));\n              }\n            } else {\n              pts[0] = coordSys.dataToPoint(lineCoords[0]);\n              pts[1] = coordSys.dataToPoint(lineCoords[1]);\n              var curveness = itemModel.get(['lineStyle', 'curveness']);\n\n              if (+curveness) {\n                pts[2] = [(pts[0][0] + pts[1][0]) / 2 - (pts[0][1] - pts[1][1]) * curveness, (pts[0][1] + pts[1][1]) / 2 - (pts[1][0] - pts[0][0]) * curveness];\n              }\n            }\n\n            lineData.setItemLayout(i, pts);\n          }\n        }\n      }\n    };\n  }\n};\nexport default linesLayout;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport LineDraw from '../helper/LineDraw';\nimport EffectLine from '../helper/EffectLine';\nimport Line from '../helper/Line';\nimport Polyline from '../helper/Polyline';\nimport EffectPolyline from '../helper/EffectPolyline';\nimport LargeLineDraw from '../helper/LargeLineDraw';\nimport linesLayout from './linesLayout';\nimport { createClipPath } from '../helper/createClipPathFromCoordSys';\nimport ChartView from '../../view/Chart';\n\nvar LinesView =\n/** @class */\nfunction (_super) {\n  __extends(LinesView, _super);\n\n  function LinesView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = LinesView.type;\n    return _this;\n  }\n\n  LinesView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n\n    var lineDraw = this._updateLineDraw(data, seriesModel);\n\n    var zlevel = seriesModel.get('zlevel');\n    var trailLength = seriesModel.get(['effect', 'trailLength']);\n    var zr = api.getZr(); // Avoid the drag cause ghost shadow\n    // FIXME Better way ?\n    // SVG doesn't support\n\n    var isSvg = zr.painter.getType() === 'svg';\n\n    if (!isSvg) {\n      zr.painter.getLayer(zlevel).clear(true);\n    } // Config layer with motion blur\n\n\n    if (this._lastZlevel != null && !isSvg) {\n      zr.configLayer(this._lastZlevel, {\n        motionBlur: false\n      });\n    }\n\n    if (this._showEffect(seriesModel) && trailLength) {\n      if (process.env.NODE_ENV !== 'production') {\n        var notInIndividual_1 = false;\n        ecModel.eachSeries(function (otherSeriesModel) {\n          if (otherSeriesModel !== seriesModel && otherSeriesModel.get('zlevel') === zlevel) {\n            notInIndividual_1 = true;\n          }\n        });\n        notInIndividual_1 && console.warn('Lines with trail effect should have an individual zlevel');\n      }\n\n      if (!isSvg) {\n        zr.configLayer(zlevel, {\n          motionBlur: true,\n          lastFrameAlpha: Math.max(Math.min(trailLength / 10 + 0.9, 1), 0)\n        });\n      }\n    }\n\n    lineDraw.updateData(data);\n    var clipPath = seriesModel.get('clip', true) && createClipPath(seriesModel.coordinateSystem, false, seriesModel);\n\n    if (clipPath) {\n      this.group.setClipPath(clipPath);\n    } else {\n      this.group.removeClipPath();\n    }\n\n    this._lastZlevel = zlevel;\n    this._finished = true;\n  };\n\n  LinesView.prototype.incrementalPrepareRender = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n\n    var lineDraw = this._updateLineDraw(data, seriesModel);\n\n    lineDraw.incrementalPrepareUpdate(data);\n\n    this._clearLayer(api);\n\n    this._finished = false;\n  };\n\n  LinesView.prototype.incrementalRender = function (taskParams, seriesModel, ecModel) {\n    this._lineDraw.incrementalUpdate(taskParams, seriesModel.getData());\n\n    this._finished = taskParams.end === seriesModel.getData().count();\n  };\n\n  LinesView.prototype.updateTransform = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var pipelineContext = seriesModel.pipelineContext;\n\n    if (!this._finished || pipelineContext.large || pipelineContext.progressiveRender) {\n      // TODO Don't have to do update in large mode. Only do it when there are millions of data.\n      return {\n        update: true\n      };\n    } else {\n      // TODO Use same logic with ScatterView.\n      // Manually update layout\n      var res = linesLayout.reset(seriesModel, ecModel, api);\n\n      if (res.progress) {\n        res.progress({\n          start: 0,\n          end: data.count(),\n          count: data.count()\n        }, data);\n      } // Not in large mode\n\n\n      this._lineDraw.updateLayout();\n\n      this._clearLayer(api);\n    }\n  };\n\n  LinesView.prototype._updateLineDraw = function (data, seriesModel) {\n    var lineDraw = this._lineDraw;\n\n    var hasEffect = this._showEffect(seriesModel);\n\n    var isPolyline = !!seriesModel.get('polyline');\n    var pipelineContext = seriesModel.pipelineContext;\n    var isLargeDraw = pipelineContext.large;\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (hasEffect && isLargeDraw) {\n        console.warn('Large lines not support effect');\n      }\n    }\n\n    if (!lineDraw || hasEffect !== this._hasEffet || isPolyline !== this._isPolyline || isLargeDraw !== this._isLargeDraw) {\n      if (lineDraw) {\n        lineDraw.remove();\n      }\n\n      lineDraw = this._lineDraw = isLargeDraw ? new LargeLineDraw() : new LineDraw(isPolyline ? hasEffect ? EffectPolyline : Polyline : hasEffect ? EffectLine : Line);\n      this._hasEffet = hasEffect;\n      this._isPolyline = isPolyline;\n      this._isLargeDraw = isLargeDraw;\n    }\n\n    this.group.add(lineDraw.group);\n    return lineDraw;\n  };\n\n  LinesView.prototype._showEffect = function (seriesModel) {\n    return !!seriesModel.get(['effect', 'show']);\n  };\n\n  LinesView.prototype._clearLayer = function (api) {\n    // Not use motion when dragging or zooming\n    var zr = api.getZr();\n    var isSvg = zr.painter.getType() === 'svg';\n\n    if (!isSvg && this._lastZlevel != null) {\n      zr.painter.getLayer(this._lastZlevel).clear(true);\n    }\n  };\n\n  LinesView.prototype.remove = function (ecModel, api) {\n    this._lineDraw && this._lineDraw.remove();\n    this._lineDraw = null; // Clear motion when lineDraw is removed\n\n    this._clearLayer(api);\n  };\n\n  LinesView.prototype.dispose = function (ecModel, api) {\n    this.remove(ecModel, api);\n  };\n\n  LinesView.type = 'lines';\n  return LinesView;\n}(ChartView);\n\nexport default LinesView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/* global Uint32Array, Float64Array, Float32Array */\n\nimport SeriesModel from '../../model/Series';\nimport SeriesData from '../../data/SeriesData';\nimport { concatArray, mergeAll, map } from 'zrender/lib/core/util';\nimport CoordinateSystem from '../../core/CoordinateSystem';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup';\nvar Uint32Arr = typeof Uint32Array === 'undefined' ? Array : Uint32Array;\nvar Float64Arr = typeof Float64Array === 'undefined' ? Array : Float64Array;\n\nfunction compatEc2(seriesOpt) {\n  var data = seriesOpt.data;\n\n  if (data && data[0] && data[0][0] && data[0][0].coord) {\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn('Lines data configuration has been changed to' + ' { coords:[[1,2],[2,3]] }');\n    }\n\n    seriesOpt.data = map(data, function (itemOpt) {\n      var coords = [itemOpt[0].coord, itemOpt[1].coord];\n      var target = {\n        coords: coords\n      };\n\n      if (itemOpt[0].name) {\n        target.fromName = itemOpt[0].name;\n      }\n\n      if (itemOpt[1].name) {\n        target.toName = itemOpt[1].name;\n      }\n\n      return mergeAll([target, itemOpt[0], itemOpt[1]]);\n    });\n  }\n}\n\nvar LinesSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(LinesSeriesModel, _super);\n\n  function LinesSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = LinesSeriesModel.type;\n    _this.visualStyleAccessPath = 'lineStyle';\n    _this.visualDrawType = 'stroke';\n    return _this;\n  }\n\n  LinesSeriesModel.prototype.init = function (option) {\n    // The input data may be null/undefined.\n    option.data = option.data || []; // Not using preprocessor because mergeOption may not have series.type\n\n    compatEc2(option);\n\n    var result = this._processFlatCoordsArray(option.data);\n\n    this._flatCoords = result.flatCoords;\n    this._flatCoordsOffset = result.flatCoordsOffset;\n\n    if (result.flatCoords) {\n      option.data = new Float32Array(result.count);\n    }\n\n    _super.prototype.init.apply(this, arguments);\n  };\n\n  LinesSeriesModel.prototype.mergeOption = function (option) {\n    compatEc2(option);\n\n    if (option.data) {\n      // Only update when have option data to merge.\n      var result = this._processFlatCoordsArray(option.data);\n\n      this._flatCoords = result.flatCoords;\n      this._flatCoordsOffset = result.flatCoordsOffset;\n\n      if (result.flatCoords) {\n        option.data = new Float32Array(result.count);\n      }\n    }\n\n    _super.prototype.mergeOption.apply(this, arguments);\n  };\n\n  LinesSeriesModel.prototype.appendData = function (params) {\n    var result = this._processFlatCoordsArray(params.data);\n\n    if (result.flatCoords) {\n      if (!this._flatCoords) {\n        this._flatCoords = result.flatCoords;\n        this._flatCoordsOffset = result.flatCoordsOffset;\n      } else {\n        this._flatCoords = concatArray(this._flatCoords, result.flatCoords);\n        this._flatCoordsOffset = concatArray(this._flatCoordsOffset, result.flatCoordsOffset);\n      }\n\n      params.data = new Float32Array(result.count);\n    }\n\n    this.getRawData().appendData(params.data);\n  };\n\n  LinesSeriesModel.prototype._getCoordsFromItemModel = function (idx) {\n    var itemModel = this.getData().getItemModel(idx);\n    var coords = itemModel.option instanceof Array ? itemModel.option : itemModel.getShallow('coords');\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (!(coords instanceof Array && coords.length > 0 && coords[0] instanceof Array)) {\n        throw new Error('Invalid coords ' + JSON.stringify(coords) + '. Lines must have 2d coords array in data item.');\n      }\n    }\n\n    return coords;\n  };\n\n  LinesSeriesModel.prototype.getLineCoordsCount = function (idx) {\n    if (this._flatCoordsOffset) {\n      return this._flatCoordsOffset[idx * 2 + 1];\n    } else {\n      return this._getCoordsFromItemModel(idx).length;\n    }\n  };\n\n  LinesSeriesModel.prototype.getLineCoords = function (idx, out) {\n    if (this._flatCoordsOffset) {\n      var offset = this._flatCoordsOffset[idx * 2];\n      var len = this._flatCoordsOffset[idx * 2 + 1];\n\n      for (var i = 0; i < len; i++) {\n        out[i] = out[i] || [];\n        out[i][0] = this._flatCoords[offset + i * 2];\n        out[i][1] = this._flatCoords[offset + i * 2 + 1];\n      }\n\n      return len;\n    } else {\n      var coords = this._getCoordsFromItemModel(idx);\n\n      for (var i = 0; i < coords.length; i++) {\n        out[i] = out[i] || [];\n        out[i][0] = coords[i][0];\n        out[i][1] = coords[i][1];\n      }\n\n      return coords.length;\n    }\n  };\n\n  LinesSeriesModel.prototype._processFlatCoordsArray = function (data) {\n    var startOffset = 0;\n\n    if (this._flatCoords) {\n      startOffset = this._flatCoords.length;\n    } // Stored as a typed array. In format\n    // Points Count(2) | x | y | x | y | Points Count(3) | x |  y | x | y | x | y |\n\n\n    if (typeof data[0] === 'number') {\n      var len = data.length; // Store offset and len of each segment\n\n      var coordsOffsetAndLenStorage = new Uint32Arr(len);\n      var coordsStorage = new Float64Arr(len);\n      var coordsCursor = 0;\n      var offsetCursor = 0;\n      var dataCount = 0;\n\n      for (var i = 0; i < len;) {\n        dataCount++;\n        var count = data[i++]; // Offset\n\n        coordsOffsetAndLenStorage[offsetCursor++] = coordsCursor + startOffset; // Len\n\n        coordsOffsetAndLenStorage[offsetCursor++] = count;\n\n        for (var k = 0; k < count; k++) {\n          var x = data[i++];\n          var y = data[i++];\n          coordsStorage[coordsCursor++] = x;\n          coordsStorage[coordsCursor++] = y;\n\n          if (i > len) {\n            if (process.env.NODE_ENV !== 'production') {\n              throw new Error('Invalid data format.');\n            }\n          }\n        }\n      }\n\n      return {\n        flatCoordsOffset: new Uint32Array(coordsOffsetAndLenStorage.buffer, 0, offsetCursor),\n        flatCoords: coordsStorage,\n        count: dataCount\n      };\n    }\n\n    return {\n      flatCoordsOffset: null,\n      flatCoords: null,\n      count: data.length\n    };\n  };\n\n  LinesSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    if (process.env.NODE_ENV !== 'production') {\n      var CoordSys = CoordinateSystem.get(option.coordinateSystem);\n\n      if (!CoordSys) {\n        throw new Error('Unkown coordinate system ' + option.coordinateSystem);\n      }\n    }\n\n    var lineData = new SeriesData(['value'], this);\n    lineData.hasItemOption = false;\n    lineData.initData(option.data, [], function (dataItem, dimName, dataIndex, dimIndex) {\n      // dataItem is simply coords\n      if (dataItem instanceof Array) {\n        return NaN;\n      } else {\n        lineData.hasItemOption = true;\n        var value = dataItem.value;\n\n        if (value != null) {\n          return value instanceof Array ? value[dimIndex] : value;\n        }\n      }\n    });\n    return lineData;\n  };\n\n  LinesSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    var data = this.getData();\n    var itemModel = data.getItemModel(dataIndex);\n    var name = itemModel.get('name');\n\n    if (name) {\n      return name;\n    }\n\n    var fromName = itemModel.get('fromName');\n    var toName = itemModel.get('toName');\n    var nameArr = [];\n    fromName != null && nameArr.push(fromName);\n    toName != null && nameArr.push(toName);\n    return createTooltipMarkup('nameValue', {\n      name: nameArr.join(' > ')\n    });\n  };\n\n  LinesSeriesModel.prototype.preventIncremental = function () {\n    return !!this.get(['effect', 'show']);\n  };\n\n  LinesSeriesModel.prototype.getProgressive = function () {\n    var progressive = this.option.progressive;\n\n    if (progressive == null) {\n      return this.option.large ? 1e4 : this.get('progressive');\n    }\n\n    return progressive;\n  };\n\n  LinesSeriesModel.prototype.getProgressiveThreshold = function () {\n    var progressiveThreshold = this.option.progressiveThreshold;\n\n    if (progressiveThreshold == null) {\n      return this.option.large ? 2e4 : this.get('progressiveThreshold');\n    }\n\n    return progressiveThreshold;\n  };\n\n  LinesSeriesModel.type = 'series.lines';\n  LinesSeriesModel.dependencies = ['grid', 'polar', 'geo', 'calendar'];\n  LinesSeriesModel.defaultOption = {\n    coordinateSystem: 'geo',\n    zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    // Cartesian coordinate system\n    xAxisIndex: 0,\n    yAxisIndex: 0,\n    symbol: ['none', 'none'],\n    symbolSize: [10, 10],\n    // Geo coordinate system\n    geoIndex: 0,\n    effect: {\n      show: false,\n      period: 4,\n      constantSpeed: 0,\n      symbol: 'circle',\n      symbolSize: 3,\n      loop: true,\n      trailLength: 0.2\n    },\n    large: false,\n    // Available when large is true\n    largeThreshold: 2000,\n    polyline: false,\n    clip: true,\n    label: {\n      show: false,\n      position: 'end' // distance: 5,\n      // formatter: Tooltip.formatter\n\n    },\n    lineStyle: {\n      opacity: 0.5\n    }\n  };\n  return LinesSeriesModel;\n}(SeriesModel);\n\nexport default LinesSeriesModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction normalize(a) {\n  if (!(a instanceof Array)) {\n    a = [a, a];\n  }\n\n  return a;\n}\n\nvar linesVisual = {\n  seriesType: 'lines',\n  reset: function reset(seriesModel) {\n    var symbolType = normalize(seriesModel.get('symbol'));\n    var symbolSize = normalize(seriesModel.get('symbolSize'));\n    var data = seriesModel.getData();\n    data.setVisual('fromSymbol', symbolType && symbolType[0]);\n    data.setVisual('toSymbol', symbolType && symbolType[1]);\n    data.setVisual('fromSymbolSize', symbolSize && symbolSize[0]);\n    data.setVisual('toSymbolSize', symbolSize && symbolSize[1]);\n\n    function dataEach(data, idx) {\n      var itemModel = data.getItemModel(idx);\n      var symbolType = normalize(itemModel.getShallow('symbol', true));\n      var symbolSize = normalize(itemModel.getShallow('symbolSize', true));\n      symbolType[0] && data.setItemVisual(idx, 'fromSymbol', symbolType[0]);\n      symbolType[1] && data.setItemVisual(idx, 'toSymbol', symbolType[1]);\n      symbolSize[0] && data.setItemVisual(idx, 'fromSymbolSize', symbolSize[0]);\n      symbolSize[1] && data.setItemVisual(idx, 'toSymbolSize', symbolSize[1]);\n    }\n\n    return {\n      dataEach: data.hasItemOption ? dataEach : null\n    };\n  }\n};\nexport default linesVisual;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/* global Uint8ClampedArray */\nimport * as zrUtil from 'zrender/lib/core/util';\nvar GRADIENT_LEVELS = 256;\n\nvar HeatmapLayer =\n/** @class */\nfunction () {\n  function HeatmapLayer() {\n    this.blurSize = 30;\n    this.pointSize = 20;\n    this.maxOpacity = 1;\n    this.minOpacity = 0;\n    this._gradientPixels = {\n      inRange: null,\n      outOfRange: null\n    };\n    var canvas = zrUtil.createCanvas();\n    this.canvas = canvas;\n  }\n  /**\n   * Renders Heatmap and returns the rendered canvas\n   * @param data array of data, each has x, y, value\n   * @param width canvas width\n   * @param height canvas height\n   */\n\n\n  HeatmapLayer.prototype.update = function (data, width, height, normalize, colorFunc, isInRange) {\n    var brush = this._getBrush();\n\n    var gradientInRange = this._getGradient(colorFunc, 'inRange');\n\n    var gradientOutOfRange = this._getGradient(colorFunc, 'outOfRange');\n\n    var r = this.pointSize + this.blurSize;\n    var canvas = this.canvas;\n    var ctx = canvas.getContext('2d');\n    var len = data.length;\n    canvas.width = width;\n    canvas.height = height;\n\n    for (var i = 0; i < len; ++i) {\n      var p = data[i];\n      var x = p[0];\n      var y = p[1];\n      var value = p[2]; // calculate alpha using value\n\n      var alpha = normalize(value); // draw with the circle brush with alpha\n\n      ctx.globalAlpha = alpha;\n      ctx.drawImage(brush, x - r, y - r);\n    }\n\n    if (!canvas.width || !canvas.height) {\n      // Avoid \"Uncaught DOMException: Failed to execute 'getImageData' on\n      // 'CanvasRenderingContext2D': The source height is 0.\"\n      return canvas;\n    } // colorize the canvas using alpha value and set with gradient\n\n\n    var imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n    var pixels = imageData.data;\n    var offset = 0;\n    var pixelLen = pixels.length;\n    var minOpacity = this.minOpacity;\n    var maxOpacity = this.maxOpacity;\n    var diffOpacity = maxOpacity - minOpacity;\n\n    while (offset < pixelLen) {\n      var alpha = pixels[offset + 3] / 256;\n      var gradientOffset = Math.floor(alpha * (GRADIENT_LEVELS - 1)) * 4; // Simple optimize to ignore the empty data\n\n      if (alpha > 0) {\n        var gradient = isInRange(alpha) ? gradientInRange : gradientOutOfRange; // Any alpha > 0 will be mapped to [minOpacity, maxOpacity]\n\n        alpha > 0 && (alpha = alpha * diffOpacity + minOpacity);\n        pixels[offset++] = gradient[gradientOffset];\n        pixels[offset++] = gradient[gradientOffset + 1];\n        pixels[offset++] = gradient[gradientOffset + 2];\n        pixels[offset++] = gradient[gradientOffset + 3] * alpha * 256;\n      } else {\n        offset += 4;\n      }\n    }\n\n    ctx.putImageData(imageData, 0, 0);\n    return canvas;\n  };\n  /**\n   * get canvas of a black circle brush used for canvas to draw later\n   */\n\n\n  HeatmapLayer.prototype._getBrush = function () {\n    var brushCanvas = this._brushCanvas || (this._brushCanvas = zrUtil.createCanvas()); // set brush size\n\n    var r = this.pointSize + this.blurSize;\n    var d = r * 2;\n    brushCanvas.width = d;\n    brushCanvas.height = d;\n    var ctx = brushCanvas.getContext('2d');\n    ctx.clearRect(0, 0, d, d); // in order to render shadow without the distinct circle,\n    // draw the distinct circle in an invisible place,\n    // and use shadowOffset to draw shadow in the center of the canvas\n\n    ctx.shadowOffsetX = d;\n    ctx.shadowBlur = this.blurSize; // draw the shadow in black, and use alpha and shadow blur to generate\n    // color in color map\n\n    ctx.shadowColor = '#000'; // draw circle in the left to the canvas\n\n    ctx.beginPath();\n    ctx.arc(-r, r, this.pointSize, 0, Math.PI * 2, true);\n    ctx.closePath();\n    ctx.fill();\n    return brushCanvas;\n  };\n  /**\n   * get gradient color map\n   * @private\n   */\n\n\n  HeatmapLayer.prototype._getGradient = function (colorFunc, state) {\n    var gradientPixels = this._gradientPixels;\n    var pixelsSingleState = gradientPixels[state] || (gradientPixels[state] = new Uint8ClampedArray(256 * 4));\n    var color = [0, 0, 0, 0];\n    var off = 0;\n\n    for (var i = 0; i < 256; i++) {\n      colorFunc[state](i / 255, true, color);\n      pixelsSingleState[off++] = color[0];\n      pixelsSingleState[off++] = color[1];\n      pixelsSingleState[off++] = color[2];\n      pixelsSingleState[off++] = color[3];\n    }\n\n    return pixelsSingleState;\n  };\n\n  return HeatmapLayer;\n}();\n\nexport default HeatmapLayer;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic';\nimport { enableHoverEmphasis } from '../../util/states';\nimport HeatmapLayer from './HeatmapLayer';\nimport * as zrUtil from 'zrender/lib/core/util';\nimport ChartView from '../../view/Chart';\nimport { isCoordinateSystemType } from '../../coord/CoordinateSystem';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle';\n\nfunction getIsInPiecewiseRange(dataExtent, pieceList, selected) {\n  var dataSpan = dataExtent[1] - dataExtent[0];\n  pieceList = zrUtil.map(pieceList, function (piece) {\n    return {\n      interval: [(piece.interval[0] - dataExtent[0]) / dataSpan, (piece.interval[1] - dataExtent[0]) / dataSpan]\n    };\n  });\n  var len = pieceList.length;\n  var lastIndex = 0;\n  return function (val) {\n    var i; // Try to find in the location of the last found\n\n    for (i = lastIndex; i < len; i++) {\n      var interval = pieceList[i].interval;\n\n      if (interval[0] <= val && val <= interval[1]) {\n        lastIndex = i;\n        break;\n      }\n    }\n\n    if (i === len) {\n      // Not found, back interation\n      for (i = lastIndex - 1; i >= 0; i--) {\n        var interval = pieceList[i].interval;\n\n        if (interval[0] <= val && val <= interval[1]) {\n          lastIndex = i;\n          break;\n        }\n      }\n    }\n\n    return i >= 0 && i < len && selected[i];\n  };\n}\n\nfunction getIsInContinuousRange(dataExtent, range) {\n  var dataSpan = dataExtent[1] - dataExtent[0];\n  range = [(range[0] - dataExtent[0]) / dataSpan, (range[1] - dataExtent[0]) / dataSpan];\n  return function (val) {\n    return val >= range[0] && val <= range[1];\n  };\n}\n\nfunction isGeoCoordSys(coordSys) {\n  var dimensions = coordSys.dimensions; // Not use coorSys.type === 'geo' because coordSys maybe extended\n\n  return dimensions[0] === 'lng' && dimensions[1] === 'lat';\n}\n\nvar HeatmapView =\n/** @class */\nfunction (_super) {\n  __extends(HeatmapView, _super);\n\n  function HeatmapView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = HeatmapView.type;\n    return _this;\n  }\n\n  HeatmapView.prototype.render = function (seriesModel, ecModel, api) {\n    var visualMapOfThisSeries;\n    ecModel.eachComponent('visualMap', function (visualMap) {\n      visualMap.eachTargetSeries(function (targetSeries) {\n        if (targetSeries === seriesModel) {\n          visualMapOfThisSeries = visualMap;\n        }\n      });\n    });\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (!visualMapOfThisSeries) {\n        throw new Error('Heatmap must use with visualMap');\n      }\n    }\n\n    this.group.removeAll();\n    this._incrementalDisplayable = null;\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (coordSys.type === 'cartesian2d' || coordSys.type === 'calendar') {\n      this._renderOnCartesianAndCalendar(seriesModel, api, 0, seriesModel.getData().count());\n    } else if (isGeoCoordSys(coordSys)) {\n      this._renderOnGeo(coordSys, seriesModel, visualMapOfThisSeries, api);\n    }\n  };\n\n  HeatmapView.prototype.incrementalPrepareRender = function (seriesModel, ecModel, api) {\n    this.group.removeAll();\n  };\n\n  HeatmapView.prototype.incrementalRender = function (params, seriesModel, ecModel, api) {\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (coordSys) {\n      // geo does not support incremental rendering?\n      if (isGeoCoordSys(coordSys)) {\n        this.render(seriesModel, ecModel, api);\n      } else {\n        this._renderOnCartesianAndCalendar(seriesModel, api, params.start, params.end, true);\n      }\n    }\n  };\n\n  HeatmapView.prototype._renderOnCartesianAndCalendar = function (seriesModel, api, start, end, incremental) {\n    var coordSys = seriesModel.coordinateSystem;\n    var width;\n    var height;\n    var xAxisExtent;\n    var yAxisExtent;\n\n    if (isCoordinateSystemType(coordSys, 'cartesian2d')) {\n      var xAxis = coordSys.getAxis('x');\n      var yAxis = coordSys.getAxis('y');\n\n      if (process.env.NODE_ENV !== 'production') {\n        if (!(xAxis.type === 'category' && yAxis.type === 'category')) {\n          throw new Error('Heatmap on cartesian must have two category axes');\n        }\n\n        if (!(xAxis.onBand && yAxis.onBand)) {\n          throw new Error('Heatmap on cartesian must have two axes with boundaryGap true');\n        }\n      }\n\n      width = xAxis.getBandWidth();\n      height = yAxis.getBandWidth();\n      xAxisExtent = xAxis.scale.getExtent();\n      yAxisExtent = yAxis.scale.getExtent();\n    }\n\n    var group = this.group;\n    var data = seriesModel.getData();\n    var emphasisStyle = seriesModel.getModel(['emphasis', 'itemStyle']).getItemStyle();\n    var blurStyle = seriesModel.getModel(['blur', 'itemStyle']).getItemStyle();\n    var selectStyle = seriesModel.getModel(['select', 'itemStyle']).getItemStyle();\n    var labelStatesModels = getLabelStatesModels(seriesModel);\n    var focus = seriesModel.get(['emphasis', 'focus']);\n    var blurScope = seriesModel.get(['emphasis', 'blurScope']);\n    var dataDims = isCoordinateSystemType(coordSys, 'cartesian2d') ? [data.mapDimension('x'), data.mapDimension('y'), data.mapDimension('value')] : [data.mapDimension('time'), data.mapDimension('value')];\n\n    for (var idx = start; idx < end; idx++) {\n      var rect = void 0;\n      var style = data.getItemVisual(idx, 'style');\n\n      if (isCoordinateSystemType(coordSys, 'cartesian2d')) {\n        var dataDimX = data.get(dataDims[0], idx);\n        var dataDimY = data.get(dataDims[1], idx); // Ignore empty data and out of extent data\n\n        if (isNaN(data.get(dataDims[2], idx)) || dataDimX < xAxisExtent[0] || dataDimX > xAxisExtent[1] || dataDimY < yAxisExtent[0] || dataDimY > yAxisExtent[1]) {\n          continue;\n        }\n\n        var point = coordSys.dataToPoint([dataDimX, dataDimY]);\n        rect = new graphic.Rect({\n          shape: {\n            x: Math.floor(Math.round(point[0]) - width / 2),\n            y: Math.floor(Math.round(point[1]) - height / 2),\n            width: Math.ceil(width),\n            height: Math.ceil(height)\n          },\n          style: style\n        });\n      } else {\n        // Ignore empty data\n        if (isNaN(data.get(dataDims[1], idx))) {\n          continue;\n        }\n\n        rect = new graphic.Rect({\n          z2: 1,\n          shape: coordSys.dataToRect([data.get(dataDims[0], idx)]).contentShape,\n          style: style\n        });\n      }\n\n      var itemModel = data.getItemModel(idx); // Optimization for large datset\n\n      if (data.hasItemOption) {\n        var emphasisModel = itemModel.getModel('emphasis');\n        emphasisStyle = emphasisModel.getModel('itemStyle').getItemStyle();\n        blurStyle = itemModel.getModel(['blur', 'itemStyle']).getItemStyle();\n        selectStyle = itemModel.getModel(['select', 'itemStyle']).getItemStyle();\n        focus = emphasisModel.get('focus');\n        blurScope = emphasisModel.get('blurScope');\n        labelStatesModels = getLabelStatesModels(itemModel);\n      }\n\n      var rawValue = seriesModel.getRawValue(idx);\n      var defaultText = '-';\n\n      if (rawValue && rawValue[2] != null) {\n        defaultText = rawValue[2] + '';\n      }\n\n      setLabelStyle(rect, labelStatesModels, {\n        labelFetcher: seriesModel,\n        labelDataIndex: idx,\n        defaultOpacity: style.opacity,\n        defaultText: defaultText\n      });\n      rect.ensureState('emphasis').style = emphasisStyle;\n      rect.ensureState('blur').style = blurStyle;\n      rect.ensureState('select').style = selectStyle;\n      enableHoverEmphasis(rect, focus, blurScope);\n      rect.incremental = incremental; // PENDING\n\n      if (incremental) {\n        // Rect must use hover layer if it's incremental.\n        rect.states.emphasis.hoverLayer = true;\n      }\n\n      group.add(rect);\n      data.setItemGraphicEl(idx, rect);\n    }\n  };\n\n  HeatmapView.prototype._renderOnGeo = function (geo, seriesModel, visualMapModel, api) {\n    var inRangeVisuals = visualMapModel.targetVisuals.inRange;\n    var outOfRangeVisuals = visualMapModel.targetVisuals.outOfRange; // if (!visualMapping) {\n    //     throw new Error('Data range must have color visuals');\n    // }\n\n    var data = seriesModel.getData();\n    var hmLayer = this._hmLayer || this._hmLayer || new HeatmapLayer();\n    hmLayer.blurSize = seriesModel.get('blurSize');\n    hmLayer.pointSize = seriesModel.get('pointSize');\n    hmLayer.minOpacity = seriesModel.get('minOpacity');\n    hmLayer.maxOpacity = seriesModel.get('maxOpacity');\n    var rect = geo.getViewRect().clone();\n    var roamTransform = geo.getRoamTransform();\n    rect.applyTransform(roamTransform); // Clamp on viewport\n\n    var x = Math.max(rect.x, 0);\n    var y = Math.max(rect.y, 0);\n    var x2 = Math.min(rect.width + rect.x, api.getWidth());\n    var y2 = Math.min(rect.height + rect.y, api.getHeight());\n    var width = x2 - x;\n    var height = y2 - y;\n    var dims = [data.mapDimension('lng'), data.mapDimension('lat'), data.mapDimension('value')];\n    var points = data.mapArray(dims, function (lng, lat, value) {\n      var pt = geo.dataToPoint([lng, lat]);\n      pt[0] -= x;\n      pt[1] -= y;\n      pt.push(value);\n      return pt;\n    });\n    var dataExtent = visualMapModel.getExtent();\n    var isInRange = visualMapModel.type === 'visualMap.continuous' ? getIsInContinuousRange(dataExtent, visualMapModel.option.range) : getIsInPiecewiseRange(dataExtent, visualMapModel.getPieceList(), visualMapModel.option.selected);\n    hmLayer.update(points, width, height, inRangeVisuals.color.getNormalizer(), {\n      inRange: inRangeVisuals.color.getColorMapper(),\n      outOfRange: outOfRangeVisuals.color.getColorMapper()\n    }, isInRange);\n    var img = new graphic.Image({\n      style: {\n        width: width,\n        height: height,\n        x: x,\n        y: y,\n        image: hmLayer.canvas\n      },\n      silent: true\n    });\n    this.group.add(img);\n  };\n\n  HeatmapView.type = 'heatmap';\n  return HeatmapView;\n}(ChartView);\n\nexport default HeatmapView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series';\nimport createSeriesData from '../helper/createSeriesData';\nimport CoordinateSystem from '../../core/CoordinateSystem';\n\nvar HeatmapSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(HeatmapSeriesModel, _super);\n\n  function HeatmapSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = HeatmapSeriesModel.type;\n    return _this;\n  }\n\n  HeatmapSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesData(null, this, {\n      generateCoord: 'value'\n    });\n  };\n\n  HeatmapSeriesModel.prototype.preventIncremental = function () {\n    var coordSysCreator = CoordinateSystem.get(this.get('coordinateSystem'));\n\n    if (coordSysCreator && coordSysCreator.dimensions) {\n      return coordSysCreator.dimensions[0] === 'lng' && coordSysCreator.dimensions[1] === 'lat';\n    }\n  };\n\n  HeatmapSeriesModel.type = 'series.heatmap';\n  HeatmapSeriesModel.dependencies = ['grid', 'geo', 'calendar'];\n  HeatmapSeriesModel.defaultOption = {\n    coordinateSystem: 'cartesian2d',\n    zlevel: 0,\n    z: 2,\n    // Cartesian coordinate system\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // Geo coordinate system\n    geoIndex: 0,\n    blurSize: 30,\n    pointSize: 20,\n    maxOpacity: 1,\n    minOpacity: 0,\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    }\n  };\n  return HeatmapSeriesModel;\n}(SeriesModel);\n\nexport default HeatmapSeriesModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as graphic from '../../util/graphic';\nimport { enableHoverEmphasis } from '../../util/states';\nimport { createSymbol, normalizeSymbolOffset } from '../../util/symbol';\nimport { parsePercent, isNumeric } from '../../util/number';\nimport ChartView from '../../view/Chart';\nimport { getDefaultLabel } from '../helper/labelHelper';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle';\nimport ZRImage from 'zrender/lib/graphic/Image';\nimport { getECData } from '../../util/innerStore';\nvar BAR_BORDER_WIDTH_QUERY = ['itemStyle', 'borderWidth']; // index: +isHorizontal\n\nvar LAYOUT_ATTRS = [{\n  xy: 'x',\n  wh: 'width',\n  index: 0,\n  posDesc: ['left', 'right']\n}, {\n  xy: 'y',\n  wh: 'height',\n  index: 1,\n  posDesc: ['top', 'bottom']\n}];\nvar pathForLineWidth = new graphic.Circle();\n\nvar PictorialBarView =\n/** @class */\nfunction (_super) {\n  __extends(PictorialBarView, _super);\n\n  function PictorialBarView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = PictorialBarView.type;\n    return _this;\n  }\n\n  PictorialBarView.prototype.render = function (seriesModel, ecModel, api) {\n    var group = this.group;\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var cartesian = seriesModel.coordinateSystem;\n    var baseAxis = cartesian.getBaseAxis();\n    var isHorizontal = baseAxis.isHorizontal();\n    var coordSysRect = cartesian.master.getRect();\n    var opt = {\n      ecSize: {\n        width: api.getWidth(),\n        height: api.getHeight()\n      },\n      seriesModel: seriesModel,\n      coordSys: cartesian,\n      coordSysExtent: [[coordSysRect.x, coordSysRect.x + coordSysRect.width], [coordSysRect.y, coordSysRect.y + coordSysRect.height]],\n      isHorizontal: isHorizontal,\n      valueDim: LAYOUT_ATTRS[+isHorizontal],\n      categoryDim: LAYOUT_ATTRS[1 - +isHorizontal]\n    };\n    data.diff(oldData).add(function (dataIndex) {\n      if (!data.hasValue(dataIndex)) {\n        return;\n      }\n\n      var itemModel = getItemModel(data, dataIndex);\n      var symbolMeta = getSymbolMeta(data, dataIndex, itemModel, opt);\n      var bar = createBar(data, opt, symbolMeta);\n      data.setItemGraphicEl(dataIndex, bar);\n      group.add(bar);\n      updateCommon(bar, opt, symbolMeta);\n    }).update(function (newIndex, oldIndex) {\n      var bar = oldData.getItemGraphicEl(oldIndex);\n\n      if (!data.hasValue(newIndex)) {\n        group.remove(bar);\n        return;\n      }\n\n      var itemModel = getItemModel(data, newIndex);\n      var symbolMeta = getSymbolMeta(data, newIndex, itemModel, opt);\n      var pictorialShapeStr = getShapeStr(data, symbolMeta);\n\n      if (bar && pictorialShapeStr !== bar.__pictorialShapeStr) {\n        group.remove(bar);\n        data.setItemGraphicEl(newIndex, null);\n        bar = null;\n      }\n\n      if (bar) {\n        updateBar(bar, opt, symbolMeta);\n      } else {\n        bar = createBar(data, opt, symbolMeta, true);\n      }\n\n      data.setItemGraphicEl(newIndex, bar);\n      bar.__pictorialSymbolMeta = symbolMeta; // Add back\n\n      group.add(bar);\n      updateCommon(bar, opt, symbolMeta);\n    }).remove(function (dataIndex) {\n      var bar = oldData.getItemGraphicEl(dataIndex);\n      bar && removeBar(oldData, dataIndex, bar.__pictorialSymbolMeta.animationModel, bar);\n    }).execute();\n    this._data = data;\n    return this.group;\n  };\n\n  PictorialBarView.prototype.remove = function (ecModel, api) {\n    var group = this.group;\n    var data = this._data;\n\n    if (ecModel.get('animation')) {\n      if (data) {\n        data.eachItemGraphicEl(function (bar) {\n          removeBar(data, getECData(bar).dataIndex, ecModel, bar);\n        });\n      }\n    } else {\n      group.removeAll();\n    }\n  };\n\n  PictorialBarView.type = 'pictorialBar';\n  return PictorialBarView;\n}(ChartView); // Set or calculate default value about symbol, and calculate layout info.\n\n\nfunction getSymbolMeta(data, dataIndex, itemModel, opt) {\n  var layout = data.getItemLayout(dataIndex);\n  var symbolRepeat = itemModel.get('symbolRepeat');\n  var symbolClip = itemModel.get('symbolClip');\n  var symbolPosition = itemModel.get('symbolPosition') || 'start';\n  var symbolRotate = itemModel.get('symbolRotate');\n  var rotation = (symbolRotate || 0) * Math.PI / 180 || 0;\n  var symbolPatternSize = itemModel.get('symbolPatternSize') || 2;\n  var isAnimationEnabled = itemModel.isAnimationEnabled();\n  var symbolMeta = {\n    dataIndex: dataIndex,\n    layout: layout,\n    itemModel: itemModel,\n    symbolType: data.getItemVisual(dataIndex, 'symbol') || 'circle',\n    style: data.getItemVisual(dataIndex, 'style'),\n    symbolClip: symbolClip,\n    symbolRepeat: symbolRepeat,\n    symbolRepeatDirection: itemModel.get('symbolRepeatDirection'),\n    symbolPatternSize: symbolPatternSize,\n    rotation: rotation,\n    animationModel: isAnimationEnabled ? itemModel : null,\n    hoverScale: isAnimationEnabled && itemModel.get(['emphasis', 'scale']),\n    z2: itemModel.getShallow('z', true) || 0\n  };\n  prepareBarLength(itemModel, symbolRepeat, layout, opt, symbolMeta);\n  prepareSymbolSize(data, dataIndex, layout, symbolRepeat, symbolClip, symbolMeta.boundingLength, symbolMeta.pxSign, symbolPatternSize, opt, symbolMeta);\n  prepareLineWidth(itemModel, symbolMeta.symbolScale, rotation, opt, symbolMeta);\n  var symbolSize = symbolMeta.symbolSize;\n  var symbolOffset = normalizeSymbolOffset(itemModel.get('symbolOffset'), symbolSize);\n  prepareLayoutInfo(itemModel, symbolSize, layout, symbolRepeat, symbolClip, symbolOffset, symbolPosition, symbolMeta.valueLineWidth, symbolMeta.boundingLength, symbolMeta.repeatCutLength, opt, symbolMeta);\n  return symbolMeta;\n} // bar length can be negative.\n\n\nfunction prepareBarLength(itemModel, symbolRepeat, layout, opt, outputSymbolMeta) {\n  var valueDim = opt.valueDim;\n  var symbolBoundingData = itemModel.get('symbolBoundingData');\n  var valueAxis = opt.coordSys.getOtherAxis(opt.coordSys.getBaseAxis());\n  var zeroPx = valueAxis.toGlobalCoord(valueAxis.dataToCoord(0));\n  var pxSignIdx = 1 - +(layout[valueDim.wh] <= 0);\n  var boundingLength;\n\n  if (zrUtil.isArray(symbolBoundingData)) {\n    var symbolBoundingExtent = [convertToCoordOnAxis(valueAxis, symbolBoundingData[0]) - zeroPx, convertToCoordOnAxis(valueAxis, symbolBoundingData[1]) - zeroPx];\n    symbolBoundingExtent[1] < symbolBoundingExtent[0] && symbolBoundingExtent.reverse();\n    boundingLength = symbolBoundingExtent[pxSignIdx];\n  } else if (symbolBoundingData != null) {\n    boundingLength = convertToCoordOnAxis(valueAxis, symbolBoundingData) - zeroPx;\n  } else if (symbolRepeat) {\n    boundingLength = opt.coordSysExtent[valueDim.index][pxSignIdx] - zeroPx;\n  } else {\n    boundingLength = layout[valueDim.wh];\n  }\n\n  outputSymbolMeta.boundingLength = boundingLength;\n\n  if (symbolRepeat) {\n    outputSymbolMeta.repeatCutLength = layout[valueDim.wh];\n  }\n\n  outputSymbolMeta.pxSign = boundingLength > 0 ? 1 : boundingLength < 0 ? -1 : 0;\n}\n\nfunction convertToCoordOnAxis(axis, value) {\n  return axis.toGlobalCoord(axis.dataToCoord(axis.scale.parse(value)));\n} // Support ['100%', '100%']\n\n\nfunction prepareSymbolSize(data, dataIndex, layout, symbolRepeat, symbolClip, boundingLength, pxSign, symbolPatternSize, opt, outputSymbolMeta) {\n  var valueDim = opt.valueDim;\n  var categoryDim = opt.categoryDim;\n  var categorySize = Math.abs(layout[categoryDim.wh]);\n  var symbolSize = data.getItemVisual(dataIndex, 'symbolSize');\n  var parsedSymbolSize;\n\n  if (zrUtil.isArray(symbolSize)) {\n    parsedSymbolSize = symbolSize.slice();\n  } else {\n    if (symbolSize == null) {\n      // will parse to number below\n      parsedSymbolSize = ['100%', '100%'];\n    } else {\n      parsedSymbolSize = [symbolSize, symbolSize];\n    }\n  } // Note: percentage symbolSize (like '100%') do not consider lineWidth, because it is\n  // to complicated to calculate real percent value if considering scaled lineWidth.\n  // So the actual size will bigger than layout size if lineWidth is bigger than zero,\n  // which can be tolerated in pictorial chart.\n\n\n  parsedSymbolSize[categoryDim.index] = parsePercent(parsedSymbolSize[categoryDim.index], categorySize);\n  parsedSymbolSize[valueDim.index] = parsePercent(parsedSymbolSize[valueDim.index], symbolRepeat ? categorySize : Math.abs(boundingLength));\n  outputSymbolMeta.symbolSize = parsedSymbolSize; // If x or y is less than zero, show reversed shape.\n\n  var symbolScale = outputSymbolMeta.symbolScale = [parsedSymbolSize[0] / symbolPatternSize, parsedSymbolSize[1] / symbolPatternSize]; // Follow convention, 'right' and 'top' is the normal scale.\n\n  symbolScale[valueDim.index] *= (opt.isHorizontal ? -1 : 1) * pxSign;\n}\n\nfunction prepareLineWidth(itemModel, symbolScale, rotation, opt, outputSymbolMeta) {\n  // In symbols are drawn with scale, so do not need to care about the case that width\n  // or height are too small. But symbol use strokeNoScale, where acture lineWidth should\n  // be calculated.\n  var valueLineWidth = itemModel.get(BAR_BORDER_WIDTH_QUERY) || 0;\n\n  if (valueLineWidth) {\n    pathForLineWidth.attr({\n      scaleX: symbolScale[0],\n      scaleY: symbolScale[1],\n      rotation: rotation\n    });\n    pathForLineWidth.updateTransform();\n    valueLineWidth /= pathForLineWidth.getLineScale();\n    valueLineWidth *= symbolScale[opt.valueDim.index];\n  }\n\n  outputSymbolMeta.valueLineWidth = valueLineWidth;\n}\n\nfunction prepareLayoutInfo(itemModel, symbolSize, layout, symbolRepeat, symbolClip, symbolOffset, symbolPosition, valueLineWidth, boundingLength, repeatCutLength, opt, outputSymbolMeta) {\n  var categoryDim = opt.categoryDim;\n  var valueDim = opt.valueDim;\n  var pxSign = outputSymbolMeta.pxSign;\n  var unitLength = Math.max(symbolSize[valueDim.index] + valueLineWidth, 0);\n  var pathLen = unitLength; // Note: rotation will not effect the layout of symbols, because user may\n  // want symbols to rotate on its center, which should not be translated\n  // when rotating.\n\n  if (symbolRepeat) {\n    var absBoundingLength = Math.abs(boundingLength);\n    var symbolMargin = zrUtil.retrieve(itemModel.get('symbolMargin'), '15%') + '';\n    var hasEndGap = false;\n\n    if (symbolMargin.lastIndexOf('!') === symbolMargin.length - 1) {\n      hasEndGap = true;\n      symbolMargin = symbolMargin.slice(0, symbolMargin.length - 1);\n    }\n\n    var symbolMarginNumeric = parsePercent(symbolMargin, symbolSize[valueDim.index]);\n    var uLenWithMargin = Math.max(unitLength + symbolMarginNumeric * 2, 0); // When symbol margin is less than 0, margin at both ends will be subtracted\n    // to ensure that all of the symbols will not be overflow the given area.\n\n    var endFix = hasEndGap ? 0 : symbolMarginNumeric * 2; // Both final repeatTimes and final symbolMarginNumeric area calculated based on\n    // boundingLength.\n\n    var repeatSpecified = isNumeric(symbolRepeat);\n    var repeatTimes = repeatSpecified ? symbolRepeat : toIntTimes((absBoundingLength + endFix) / uLenWithMargin); // Adjust calculate margin, to ensure each symbol is displayed\n    // entirely in the given layout area.\n\n    var mDiff = absBoundingLength - repeatTimes * unitLength;\n    symbolMarginNumeric = mDiff / 2 / (hasEndGap ? repeatTimes : Math.max(repeatTimes - 1, 1));\n    uLenWithMargin = unitLength + symbolMarginNumeric * 2;\n    endFix = hasEndGap ? 0 : symbolMarginNumeric * 2; // Update repeatTimes when not all symbol will be shown.\n\n    if (!repeatSpecified && symbolRepeat !== 'fixed') {\n      repeatTimes = repeatCutLength ? toIntTimes((Math.abs(repeatCutLength) + endFix) / uLenWithMargin) : 0;\n    }\n\n    pathLen = repeatTimes * uLenWithMargin - endFix;\n    outputSymbolMeta.repeatTimes = repeatTimes;\n    outputSymbolMeta.symbolMargin = symbolMarginNumeric;\n  }\n\n  var sizeFix = pxSign * (pathLen / 2);\n  var pathPosition = outputSymbolMeta.pathPosition = [];\n  pathPosition[categoryDim.index] = layout[categoryDim.wh] / 2;\n  pathPosition[valueDim.index] = symbolPosition === 'start' ? sizeFix : symbolPosition === 'end' ? boundingLength - sizeFix : boundingLength / 2; // 'center'\n\n  if (symbolOffset) {\n    pathPosition[0] += symbolOffset[0];\n    pathPosition[1] += symbolOffset[1];\n  }\n\n  var bundlePosition = outputSymbolMeta.bundlePosition = [];\n  bundlePosition[categoryDim.index] = layout[categoryDim.xy];\n  bundlePosition[valueDim.index] = layout[valueDim.xy];\n  var barRectShape = outputSymbolMeta.barRectShape = zrUtil.extend({}, layout);\n  barRectShape[valueDim.wh] = pxSign * Math.max(Math.abs(layout[valueDim.wh]), Math.abs(pathPosition[valueDim.index] + sizeFix));\n  barRectShape[categoryDim.wh] = layout[categoryDim.wh];\n  var clipShape = outputSymbolMeta.clipShape = {}; // Consider that symbol may be overflow layout rect.\n\n  clipShape[categoryDim.xy] = -layout[categoryDim.xy];\n  clipShape[categoryDim.wh] = opt.ecSize[categoryDim.wh];\n  clipShape[valueDim.xy] = 0;\n  clipShape[valueDim.wh] = layout[valueDim.wh];\n}\n\nfunction createPath(symbolMeta) {\n  var symbolPatternSize = symbolMeta.symbolPatternSize;\n  var path = createSymbol( // Consider texture img, make a big size.\n  symbolMeta.symbolType, -symbolPatternSize / 2, -symbolPatternSize / 2, symbolPatternSize, symbolPatternSize);\n  path.attr({\n    culling: true\n  });\n  path.type !== 'image' && path.setStyle({\n    strokeNoScale: true\n  });\n  return path;\n}\n\nfunction createOrUpdateRepeatSymbols(bar, opt, symbolMeta, isUpdate) {\n  var bundle = bar.__pictorialBundle;\n  var symbolSize = symbolMeta.symbolSize;\n  var valueLineWidth = symbolMeta.valueLineWidth;\n  var pathPosition = symbolMeta.pathPosition;\n  var valueDim = opt.valueDim;\n  var repeatTimes = symbolMeta.repeatTimes || 0;\n  var index = 0;\n  var unit = symbolSize[opt.valueDim.index] + valueLineWidth + symbolMeta.symbolMargin * 2;\n  eachPath(bar, function (path) {\n    path.__pictorialAnimationIndex = index;\n    path.__pictorialRepeatTimes = repeatTimes;\n\n    if (index < repeatTimes) {\n      updateAttr(path, null, makeTarget(index), symbolMeta, isUpdate);\n    } else {\n      updateAttr(path, null, {\n        scaleX: 0,\n        scaleY: 0\n      }, symbolMeta, isUpdate, function () {\n        bundle.remove(path);\n      });\n    } // updateHoverAnimation(path, symbolMeta);\n\n\n    index++;\n  });\n\n  for (; index < repeatTimes; index++) {\n    var path = createPath(symbolMeta);\n    path.__pictorialAnimationIndex = index;\n    path.__pictorialRepeatTimes = repeatTimes;\n    bundle.add(path);\n    var target = makeTarget(index);\n    updateAttr(path, {\n      x: target.x,\n      y: target.y,\n      scaleX: 0,\n      scaleY: 0\n    }, {\n      scaleX: target.scaleX,\n      scaleY: target.scaleY,\n      rotation: target.rotation\n    }, symbolMeta, isUpdate);\n  }\n\n  function makeTarget(index) {\n    var position = pathPosition.slice(); // (start && pxSign > 0) || (end && pxSign < 0): i = repeatTimes - index\n    // Otherwise: i = index;\n\n    var pxSign = symbolMeta.pxSign;\n    var i = index;\n\n    if (symbolMeta.symbolRepeatDirection === 'start' ? pxSign > 0 : pxSign < 0) {\n      i = repeatTimes - 1 - index;\n    }\n\n    position[valueDim.index] = unit * (i - repeatTimes / 2 + 0.5) + pathPosition[valueDim.index];\n    return {\n      x: position[0],\n      y: position[1],\n      scaleX: symbolMeta.symbolScale[0],\n      scaleY: symbolMeta.symbolScale[1],\n      rotation: symbolMeta.rotation\n    };\n  }\n}\n\nfunction createOrUpdateSingleSymbol(bar, opt, symbolMeta, isUpdate) {\n  var bundle = bar.__pictorialBundle;\n  var mainPath = bar.__pictorialMainPath;\n\n  if (!mainPath) {\n    mainPath = bar.__pictorialMainPath = createPath(symbolMeta);\n    bundle.add(mainPath);\n    updateAttr(mainPath, {\n      x: symbolMeta.pathPosition[0],\n      y: symbolMeta.pathPosition[1],\n      scaleX: 0,\n      scaleY: 0,\n      rotation: symbolMeta.rotation\n    }, {\n      scaleX: symbolMeta.symbolScale[0],\n      scaleY: symbolMeta.symbolScale[1]\n    }, symbolMeta, isUpdate);\n  } else {\n    updateAttr(mainPath, null, {\n      x: symbolMeta.pathPosition[0],\n      y: symbolMeta.pathPosition[1],\n      scaleX: symbolMeta.symbolScale[0],\n      scaleY: symbolMeta.symbolScale[1],\n      rotation: symbolMeta.rotation\n    }, symbolMeta, isUpdate);\n  }\n} // bar rect is used for label.\n\n\nfunction createOrUpdateBarRect(bar, symbolMeta, isUpdate) {\n  var rectShape = zrUtil.extend({}, symbolMeta.barRectShape);\n  var barRect = bar.__pictorialBarRect;\n\n  if (!barRect) {\n    barRect = bar.__pictorialBarRect = new graphic.Rect({\n      z2: 2,\n      shape: rectShape,\n      silent: true,\n      style: {\n        stroke: 'transparent',\n        fill: 'transparent',\n        lineWidth: 0\n      }\n    });\n    barRect.disableMorphing = true;\n    bar.add(barRect);\n  } else {\n    updateAttr(barRect, null, {\n      shape: rectShape\n    }, symbolMeta, isUpdate);\n  }\n}\n\nfunction createOrUpdateClip(bar, opt, symbolMeta, isUpdate) {\n  // If not clip, symbol will be remove and rebuilt.\n  if (symbolMeta.symbolClip) {\n    var clipPath = bar.__pictorialClipPath;\n    var clipShape = zrUtil.extend({}, symbolMeta.clipShape);\n    var valueDim = opt.valueDim;\n    var animationModel = symbolMeta.animationModel;\n    var dataIndex = symbolMeta.dataIndex;\n\n    if (clipPath) {\n      graphic.updateProps(clipPath, {\n        shape: clipShape\n      }, animationModel, dataIndex);\n    } else {\n      clipShape[valueDim.wh] = 0;\n      clipPath = new graphic.Rect({\n        shape: clipShape\n      });\n\n      bar.__pictorialBundle.setClipPath(clipPath);\n\n      bar.__pictorialClipPath = clipPath;\n      var target = {};\n      target[valueDim.wh] = symbolMeta.clipShape[valueDim.wh];\n      graphic[isUpdate ? 'updateProps' : 'initProps'](clipPath, {\n        shape: target\n      }, animationModel, dataIndex);\n    }\n  }\n}\n\nfunction getItemModel(data, dataIndex) {\n  var itemModel = data.getItemModel(dataIndex);\n  itemModel.getAnimationDelayParams = getAnimationDelayParams;\n  itemModel.isAnimationEnabled = isAnimationEnabled;\n  return itemModel;\n}\n\nfunction getAnimationDelayParams(path) {\n  // The order is the same as the z-order, see `symbolRepeatDiretion`.\n  return {\n    index: path.__pictorialAnimationIndex,\n    count: path.__pictorialRepeatTimes\n  };\n}\n\nfunction isAnimationEnabled() {\n  // `animation` prop can be set on itemModel in pictorial bar chart.\n  return this.parentModel.isAnimationEnabled() && !!this.getShallow('animation');\n}\n\nfunction createBar(data, opt, symbolMeta, isUpdate) {\n  // bar is the main element for each data.\n  var bar = new graphic.Group(); // bundle is used for location and clip.\n\n  var bundle = new graphic.Group();\n  bar.add(bundle);\n  bar.__pictorialBundle = bundle;\n  bundle.x = symbolMeta.bundlePosition[0];\n  bundle.y = symbolMeta.bundlePosition[1];\n\n  if (symbolMeta.symbolRepeat) {\n    createOrUpdateRepeatSymbols(bar, opt, symbolMeta);\n  } else {\n    createOrUpdateSingleSymbol(bar, opt, symbolMeta);\n  }\n\n  createOrUpdateBarRect(bar, symbolMeta, isUpdate);\n  createOrUpdateClip(bar, opt, symbolMeta, isUpdate);\n  bar.__pictorialShapeStr = getShapeStr(data, symbolMeta);\n  bar.__pictorialSymbolMeta = symbolMeta;\n  return bar;\n}\n\nfunction updateBar(bar, opt, symbolMeta) {\n  var animationModel = symbolMeta.animationModel;\n  var dataIndex = symbolMeta.dataIndex;\n  var bundle = bar.__pictorialBundle;\n  graphic.updateProps(bundle, {\n    x: symbolMeta.bundlePosition[0],\n    y: symbolMeta.bundlePosition[1]\n  }, animationModel, dataIndex);\n\n  if (symbolMeta.symbolRepeat) {\n    createOrUpdateRepeatSymbols(bar, opt, symbolMeta, true);\n  } else {\n    createOrUpdateSingleSymbol(bar, opt, symbolMeta, true);\n  }\n\n  createOrUpdateBarRect(bar, symbolMeta, true);\n  createOrUpdateClip(bar, opt, symbolMeta, true);\n}\n\nfunction removeBar(data, dataIndex, animationModel, bar) {\n  // Not show text when animating\n  var labelRect = bar.__pictorialBarRect;\n  labelRect && labelRect.removeTextContent();\n  var pathes = [];\n  eachPath(bar, function (path) {\n    pathes.push(path);\n  });\n  bar.__pictorialMainPath && pathes.push(bar.__pictorialMainPath); // I do not find proper remove animation for clip yet.\n\n  bar.__pictorialClipPath && (animationModel = null);\n  zrUtil.each(pathes, function (path) {\n    graphic.removeElement(path, {\n      scaleX: 0,\n      scaleY: 0\n    }, animationModel, dataIndex, function () {\n      bar.parent && bar.parent.remove(bar);\n    });\n  });\n  data.setItemGraphicEl(dataIndex, null);\n}\n\nfunction getShapeStr(data, symbolMeta) {\n  return [data.getItemVisual(symbolMeta.dataIndex, 'symbol') || 'none', !!symbolMeta.symbolRepeat, !!symbolMeta.symbolClip].join(':');\n}\n\nfunction eachPath(bar, cb, context) {\n  // Do not use Group#eachChild, because it do not support remove.\n  zrUtil.each(bar.__pictorialBundle.children(), function (el) {\n    el !== bar.__pictorialBarRect && cb.call(context, el);\n  });\n}\n\nfunction updateAttr(el, immediateAttrs, animationAttrs, symbolMeta, isUpdate, cb) {\n  immediateAttrs && el.attr(immediateAttrs); // when symbolCip used, only clip path has init animation, otherwise it would be weird effect.\n\n  if (symbolMeta.symbolClip && !isUpdate) {\n    animationAttrs && el.attr(animationAttrs);\n  } else {\n    animationAttrs && graphic[isUpdate ? 'updateProps' : 'initProps'](el, animationAttrs, symbolMeta.animationModel, symbolMeta.dataIndex, cb);\n  }\n}\n\nfunction updateCommon(bar, opt, symbolMeta) {\n  var dataIndex = symbolMeta.dataIndex;\n  var itemModel = symbolMeta.itemModel; // Color must be excluded.\n  // Because symbol provide setColor individually to set fill and stroke\n\n  var emphasisModel = itemModel.getModel('emphasis');\n  var emphasisStyle = emphasisModel.getModel('itemStyle').getItemStyle();\n  var blurStyle = itemModel.getModel(['blur', 'itemStyle']).getItemStyle();\n  var selectStyle = itemModel.getModel(['select', 'itemStyle']).getItemStyle();\n  var cursorStyle = itemModel.getShallow('cursor');\n  var focus = emphasisModel.get('focus');\n  var blurScope = emphasisModel.get('blurScope');\n  var hoverScale = emphasisModel.get('scale');\n  eachPath(bar, function (path) {\n    if (path instanceof ZRImage) {\n      var pathStyle = path.style;\n      path.useStyle(zrUtil.extend({\n        // TODO other properties like dx, dy ?\n        image: pathStyle.image,\n        x: pathStyle.x,\n        y: pathStyle.y,\n        width: pathStyle.width,\n        height: pathStyle.height\n      }, symbolMeta.style));\n    } else {\n      path.useStyle(symbolMeta.style);\n    }\n\n    var emphasisState = path.ensureState('emphasis');\n    emphasisState.style = emphasisStyle;\n\n    if (hoverScale) {\n      // NOTE: Must after scale is set after updateAttr\n      emphasisState.scaleX = path.scaleX * 1.1;\n      emphasisState.scaleY = path.scaleY * 1.1;\n    }\n\n    path.ensureState('blur').style = blurStyle;\n    path.ensureState('select').style = selectStyle;\n    cursorStyle && (path.cursor = cursorStyle);\n    path.z2 = symbolMeta.z2;\n  });\n  var barPositionOutside = opt.valueDim.posDesc[+(symbolMeta.boundingLength > 0)];\n  var barRect = bar.__pictorialBarRect;\n  setLabelStyle(barRect, getLabelStatesModels(itemModel), {\n    labelFetcher: opt.seriesModel,\n    labelDataIndex: dataIndex,\n    defaultText: getDefaultLabel(opt.seriesModel.getData(), dataIndex),\n    inheritColor: symbolMeta.style.fill,\n    defaultOpacity: symbolMeta.style.opacity,\n    defaultOutsidePosition: barPositionOutside\n  });\n  enableHoverEmphasis(bar, focus, blurScope);\n}\n\nfunction toIntTimes(times) {\n  var roundedTimes = Math.round(times); // Escapse accurate error\n\n  return Math.abs(times - roundedTimes) < 1e-4 ? roundedTimes : Math.ceil(times);\n}\n\nexport default PictorialBarView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport BaseBarSeriesModel from './BaseBarSeries';\nimport { inheritDefaultOption } from '../../util/component';\n\nvar PictorialBarSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(PictorialBarSeriesModel, _super);\n\n  function PictorialBarSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = PictorialBarSeriesModel.type;\n    _this.hasSymbolVisual = true;\n    _this.defaultSymbol = 'roundRect';\n    return _this;\n  }\n\n  PictorialBarSeriesModel.prototype.getInitialData = function (option) {\n    // Disable stack.\n    option.stack = null;\n    return _super.prototype.getInitialData.apply(this, arguments);\n  };\n\n  PictorialBarSeriesModel.type = 'series.pictorialBar';\n  PictorialBarSeriesModel.dependencies = ['grid'];\n  PictorialBarSeriesModel.defaultOption = inheritDefaultOption(BaseBarSeriesModel.defaultOption, {\n    symbol: 'circle',\n    symbolSize: null,\n    symbolRotate: null,\n    symbolPosition: null,\n    symbolOffset: null,\n    symbolMargin: null,\n    symbolRepeat: false,\n    symbolRepeatDirection: 'end',\n    symbolClip: false,\n    symbolBoundingData: null,\n    symbolPatternSize: 400,\n    barGap: '-100%',\n    // z can be set in data item, which is z2 actually.\n    // Disable progressive\n    progressive: 0,\n    emphasis: {\n      // By default pictorialBar do not hover scale. Hover scale is not suitable\n      // for the case that both has foreground and background.\n      scale: false\n    },\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    }\n  });\n  return PictorialBarSeriesModel;\n}(BaseBarSeriesModel);\n\nexport default PictorialBarSeriesModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { ECPolygon } from '../line/poly';\nimport * as graphic from '../../util/graphic';\nimport { setStatesStylesFromModel, enableHoverEmphasis } from '../../util/states';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle';\nimport { bind } from 'zrender/lib/core/util';\nimport DataDiffer from '../../data/DataDiffer';\nimport ChartView from '../../view/Chart';\nimport { saveOldStyle } from '../../animation/basicTrasition';\n\nvar ThemeRiverView =\n/** @class */\nfunction (_super) {\n  __extends(ThemeRiverView, _super);\n\n  function ThemeRiverView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ThemeRiverView.type;\n    _this._layers = [];\n    return _this;\n  }\n\n  ThemeRiverView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n    var self = this;\n    var group = this.group;\n    var layersSeries = seriesModel.getLayerSeries();\n    var layoutInfo = data.getLayout('layoutInfo');\n    var rect = layoutInfo.rect;\n    var boundaryGap = layoutInfo.boundaryGap;\n    group.x = 0;\n    group.y = rect.y + boundaryGap[0];\n\n    function keyGetter(item) {\n      return item.name;\n    }\n\n    var dataDiffer = new DataDiffer(this._layersSeries || [], layersSeries, keyGetter, keyGetter);\n    var newLayersGroups = [];\n    dataDiffer.add(bind(process, this, 'add')).update(bind(process, this, 'update')).remove(bind(process, this, 'remove')).execute();\n\n    function process(status, idx, oldIdx) {\n      var oldLayersGroups = self._layers;\n\n      if (status === 'remove') {\n        group.remove(oldLayersGroups[idx]);\n        return;\n      }\n\n      var points0 = [];\n      var points1 = [];\n      var style;\n      var indices = layersSeries[idx].indices;\n      var j = 0;\n\n      for (; j < indices.length; j++) {\n        var layout = data.getItemLayout(indices[j]);\n        var x = layout.x;\n        var y0 = layout.y0;\n        var y = layout.y;\n        points0.push(x, y0);\n        points1.push(x, y0 + y);\n        style = data.getItemVisual(indices[j], 'style');\n      }\n\n      var polygon;\n      var textLayout = data.getItemLayout(indices[0]);\n      var labelModel = seriesModel.getModel('label');\n      var margin = labelModel.get('margin');\n      var emphasisModel = seriesModel.getModel('emphasis');\n\n      if (status === 'add') {\n        var layerGroup = newLayersGroups[idx] = new graphic.Group();\n        polygon = new ECPolygon({\n          shape: {\n            points: points0,\n            stackedOnPoints: points1,\n            smooth: 0.4,\n            stackedOnSmooth: 0.4,\n            smoothConstraint: false\n          },\n          z2: 0\n        });\n        layerGroup.add(polygon);\n        group.add(layerGroup);\n\n        if (seriesModel.isAnimationEnabled()) {\n          polygon.setClipPath(createGridClipShape(polygon.getBoundingRect(), seriesModel, function () {\n            polygon.removeClipPath();\n          }));\n        }\n      } else {\n        var layerGroup = oldLayersGroups[oldIdx];\n        polygon = layerGroup.childAt(0);\n        group.add(layerGroup);\n        newLayersGroups[idx] = layerGroup;\n        graphic.updateProps(polygon, {\n          shape: {\n            points: points0,\n            stackedOnPoints: points1\n          }\n        }, seriesModel);\n        saveOldStyle(polygon);\n      }\n\n      setLabelStyle(polygon, getLabelStatesModels(seriesModel), {\n        labelDataIndex: indices[j - 1],\n        defaultText: data.getName(indices[j - 1]),\n        inheritColor: style.fill\n      }, {\n        normal: {\n          verticalAlign: 'middle' // align: 'right'\n\n        }\n      });\n      polygon.setTextConfig({\n        position: null,\n        local: true\n      });\n      var labelEl = polygon.getTextContent(); // TODO More label position options.\n\n      if (labelEl) {\n        labelEl.x = textLayout.x - margin;\n        labelEl.y = textLayout.y0 + textLayout.y / 2;\n      }\n\n      polygon.useStyle(style);\n      data.setItemGraphicEl(idx, polygon);\n      setStatesStylesFromModel(polygon, seriesModel);\n      enableHoverEmphasis(polygon, emphasisModel.get('focus'), emphasisModel.get('blurScope'));\n    }\n\n    this._layersSeries = layersSeries;\n    this._layers = newLayersGroups;\n  };\n\n  ThemeRiverView.type = 'themeRiver';\n  return ThemeRiverView;\n}(ChartView);\n\n; // add animation to the view\n\nfunction createGridClipShape(rect, seriesModel, cb) {\n  var rectEl = new graphic.Rect({\n    shape: {\n      x: rect.x - 10,\n      y: rect.y - 10,\n      width: 0,\n      height: rect.height + 20\n    }\n  });\n  graphic.initProps(rectEl, {\n    shape: {\n      x: rect.x - 50,\n      width: rect.width + 100,\n      height: rect.height + 20\n    }\n  }, seriesModel, cb);\n  return rectEl;\n}\n\nexport default ThemeRiverView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series';\nimport prepareSeriesDataSchema from '../../data/helper/createDimensions';\nimport { getDimensionTypeByAxis } from '../../data/helper/dimensionHelper';\nimport SeriesData from '../../data/SeriesData';\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { groupData, SINGLE_REFERRING } from '../../util/model';\nimport LegendVisualProvider from '../../visual/LegendVisualProvider';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup';\nvar DATA_NAME_INDEX = 2;\n\nvar ThemeRiverSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(ThemeRiverSeriesModel, _super);\n\n  function ThemeRiverSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ThemeRiverSeriesModel.type;\n    return _this;\n  }\n  /**\n   * @override\n   */\n\n\n  ThemeRiverSeriesModel.prototype.init = function (option) {\n    // eslint-disable-next-line\n    _super.prototype.init.apply(this, arguments); // Put this function here is for the sake of consistency of code style.\n    // Enable legend selection for each data item\n    // Use a function instead of direct access because data reference may changed\n\n\n    this.legendVisualProvider = new LegendVisualProvider(zrUtil.bind(this.getData, this), zrUtil.bind(this.getRawData, this));\n  };\n  /**\n   * If there is no value of a certain point in the time for some event,set it value to 0.\n   *\n   * @param {Array} data  initial data in the option\n   * @return {Array}\n   */\n\n\n  ThemeRiverSeriesModel.prototype.fixData = function (data) {\n    var rawDataLength = data.length;\n    /**\n     * Make sure every layer data get the same keys.\n     * The value index tells which layer has visited.\n     * {\n     *  2014/01/01: -1\n     * }\n     */\n\n    var timeValueKeys = {}; // grouped data by name\n\n    var groupResult = groupData(data, function (item) {\n      if (!timeValueKeys.hasOwnProperty(item[0] + '')) {\n        timeValueKeys[item[0] + ''] = -1;\n      }\n\n      return item[2];\n    });\n    var layerData = [];\n    groupResult.buckets.each(function (items, key) {\n      layerData.push({\n        name: key,\n        dataList: items\n      });\n    });\n    var layerNum = layerData.length;\n\n    for (var k = 0; k < layerNum; ++k) {\n      var name_1 = layerData[k].name;\n\n      for (var j = 0; j < layerData[k].dataList.length; ++j) {\n        var timeValue = layerData[k].dataList[j][0] + '';\n        timeValueKeys[timeValue] = k;\n      }\n\n      for (var timeValue in timeValueKeys) {\n        if (timeValueKeys.hasOwnProperty(timeValue) && timeValueKeys[timeValue] !== k) {\n          timeValueKeys[timeValue] = k;\n          data[rawDataLength] = [timeValue, 0, name_1];\n          rawDataLength++;\n        }\n      }\n    }\n\n    return data;\n  };\n  /**\n   * @override\n   * @param  option  the initial option that user gived\n   * @param  ecModel  the model object for themeRiver option\n   */\n\n\n  ThemeRiverSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    var singleAxisModel = this.getReferringComponents('singleAxis', SINGLE_REFERRING).models[0];\n    var axisType = singleAxisModel.get('type'); // filter the data item with the value of label is undefined\n\n    var filterData = zrUtil.filter(option.data, function (dataItem) {\n      return dataItem[2] !== undefined;\n    }); // ??? TODO design a stage to transfer data for themeRiver and lines?\n\n    var data = this.fixData(filterData || []);\n    var nameList = [];\n    var nameMap = this.nameMap = zrUtil.createHashMap();\n    var count = 0;\n\n    for (var i = 0; i < data.length; ++i) {\n      nameList.push(data[i][DATA_NAME_INDEX]);\n\n      if (!nameMap.get(data[i][DATA_NAME_INDEX])) {\n        nameMap.set(data[i][DATA_NAME_INDEX], count);\n        count++;\n      }\n    }\n\n    var dimensions = prepareSeriesDataSchema(data, {\n      coordDimensions: ['single'],\n      dimensionsDefine: [{\n        name: 'time',\n        type: getDimensionTypeByAxis(axisType)\n      }, {\n        name: 'value',\n        type: 'float'\n      }, {\n        name: 'name',\n        type: 'ordinal'\n      }],\n      encodeDefine: {\n        single: 0,\n        value: 1,\n        itemName: 2\n      }\n    }).dimensions;\n    var list = new SeriesData(dimensions, this);\n    list.initData(data);\n    return list;\n  };\n  /**\n   * The raw data is divided into multiple layers and each layer\n   *     has same name.\n   */\n\n\n  ThemeRiverSeriesModel.prototype.getLayerSeries = function () {\n    var data = this.getData();\n    var lenCount = data.count();\n    var indexArr = [];\n\n    for (var i = 0; i < lenCount; ++i) {\n      indexArr[i] = i;\n    }\n\n    var timeDim = data.mapDimension('single'); // data group by name\n\n    var groupResult = groupData(indexArr, function (index) {\n      return data.get('name', index);\n    });\n    var layerSeries = [];\n    groupResult.buckets.each(function (items, key) {\n      items.sort(function (index1, index2) {\n        return data.get(timeDim, index1) - data.get(timeDim, index2);\n      });\n      layerSeries.push({\n        name: key,\n        indices: items\n      });\n    });\n    return layerSeries;\n  };\n  /**\n   * Get data indices for show tooltip content\n   */\n\n\n  ThemeRiverSeriesModel.prototype.getAxisTooltipData = function (dim, value, baseAxis) {\n    if (!zrUtil.isArray(dim)) {\n      dim = dim ? [dim] : [];\n    }\n\n    var data = this.getData();\n    var layerSeries = this.getLayerSeries();\n    var indices = [];\n    var layerNum = layerSeries.length;\n    var nestestValue;\n\n    for (var i = 0; i < layerNum; ++i) {\n      var minDist = Number.MAX_VALUE;\n      var nearestIdx = -1;\n      var pointNum = layerSeries[i].indices.length;\n\n      for (var j = 0; j < pointNum; ++j) {\n        var theValue = data.get(dim[0], layerSeries[i].indices[j]);\n        var dist = Math.abs(theValue - value);\n\n        if (dist <= minDist) {\n          nestestValue = theValue;\n          minDist = dist;\n          nearestIdx = layerSeries[i].indices[j];\n        }\n      }\n\n      indices.push(nearestIdx);\n    }\n\n    return {\n      dataIndices: indices,\n      nestestValue: nestestValue\n    };\n  };\n\n  ThemeRiverSeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    var data = this.getData();\n    var name = data.getName(dataIndex);\n    var value = data.get(data.mapDimension('value'), dataIndex);\n    return createTooltipMarkup('nameValue', {\n      name: name,\n      value: value\n    });\n  };\n\n  ThemeRiverSeriesModel.type = 'series.themeRiver';\n  ThemeRiverSeriesModel.dependencies = ['singleAxis'];\n  ThemeRiverSeriesModel.defaultOption = {\n    zlevel: 0,\n    z: 2,\n    colorBy: 'data',\n    coordinateSystem: 'singleAxis',\n    // gap in axis's orthogonal orientation\n    boundaryGap: ['10%', '10%'],\n    // legendHoverLink: true,\n    singleAxisIndex: 0,\n    animationEasing: 'linear',\n    label: {\n      margin: 4,\n      show: true,\n      position: 'left',\n      fontSize: 11\n    },\n    emphasis: {\n      label: {\n        show: true\n      }\n    }\n  };\n  return ThemeRiverSeriesModel;\n}(SeriesModel);\n\nexport default ThemeRiverSeriesModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as numberUtil from '../../util/number';\nexport default function themeRiverLayout(ecModel, api) {\n  ecModel.eachSeriesByType('themeRiver', function (seriesModel) {\n    var data = seriesModel.getData();\n    var single = seriesModel.coordinateSystem;\n    var layoutInfo = {}; // use the axis boundingRect for view\n\n    var rect = single.getRect();\n    layoutInfo.rect = rect;\n    var boundaryGap = seriesModel.get('boundaryGap');\n    var axis = single.getAxis();\n    layoutInfo.boundaryGap = boundaryGap;\n\n    if (axis.orient === 'horizontal') {\n      boundaryGap[0] = numberUtil.parsePercent(boundaryGap[0], rect.height);\n      boundaryGap[1] = numberUtil.parsePercent(boundaryGap[1], rect.height);\n      var height = rect.height - boundaryGap[0] - boundaryGap[1];\n      doThemeRiverLayout(data, seriesModel, height);\n    } else {\n      boundaryGap[0] = numberUtil.parsePercent(boundaryGap[0], rect.width);\n      boundaryGap[1] = numberUtil.parsePercent(boundaryGap[1], rect.width);\n      var width = rect.width - boundaryGap[0] - boundaryGap[1];\n      doThemeRiverLayout(data, seriesModel, width);\n    }\n\n    data.setLayout('layoutInfo', layoutInfo);\n  });\n}\n/**\n * The layout information about themeriver\n *\n * @param data  data in the series\n * @param seriesModel  the model object of themeRiver series\n * @param height  value used to compute every series height\n */\n\nfunction doThemeRiverLayout(data, seriesModel, height) {\n  if (!data.count()) {\n    return;\n  }\n\n  var coordSys = seriesModel.coordinateSystem; // the data in each layer are organized into a series.\n\n  var layerSeries = seriesModel.getLayerSeries(); // the points in each layer.\n\n  var timeDim = data.mapDimension('single');\n  var valueDim = data.mapDimension('value');\n  var layerPoints = zrUtil.map(layerSeries, function (singleLayer) {\n    return zrUtil.map(singleLayer.indices, function (idx) {\n      var pt = coordSys.dataToPoint(data.get(timeDim, idx));\n      pt[1] = data.get(valueDim, idx);\n      return pt;\n    });\n  });\n  var base = computeBaseline(layerPoints);\n  var baseLine = base.y0;\n  var ky = height / base.max; // set layout information for each item.\n\n  var n = layerSeries.length;\n  var m = layerSeries[0].indices.length;\n  var baseY0;\n\n  for (var j = 0; j < m; ++j) {\n    baseY0 = baseLine[j] * ky;\n    data.setItemLayout(layerSeries[0].indices[j], {\n      layerIndex: 0,\n      x: layerPoints[0][j][0],\n      y0: baseY0,\n      y: layerPoints[0][j][1] * ky\n    });\n\n    for (var i = 1; i < n; ++i) {\n      baseY0 += layerPoints[i - 1][j][1] * ky;\n      data.setItemLayout(layerSeries[i].indices[j], {\n        layerIndex: i,\n        x: layerPoints[i][j][0],\n        y0: baseY0,\n        y: layerPoints[i][j][1] * ky\n      });\n    }\n  }\n}\n/**\n * Compute the baseLine of the rawdata\n * Inspired by Lee Byron's paper Stacked Graphs - Geometry & Aesthetics\n *\n * @param  data  the points in each layer\n */\n\n\nfunction computeBaseline(data) {\n  var layerNum = data.length;\n  var pointNum = data[0].length;\n  var sums = [];\n  var y0 = [];\n  var max = 0;\n\n  for (var i = 0; i < pointNum; ++i) {\n    var temp = 0;\n\n    for (var j = 0; j < layerNum; ++j) {\n      temp += data[j][i][1];\n    }\n\n    if (temp > max) {\n      max = temp;\n    }\n\n    sums.push(temp);\n  }\n\n  for (var k = 0; k < pointNum; ++k) {\n    y0[k] = (max - sums[k]) / 2;\n  }\n\n  max = 0;\n\n  for (var l = 0; l < pointNum; ++l) {\n    var sum = sums[l] + y0[l];\n\n    if (sum > max) {\n      max = sum;\n    }\n  }\n\n  return {\n    y0: y0,\n    max: max\n  };\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as graphic from '../../util/graphic';\nimport { enableHoverEmphasis, SPECIAL_STATES, DISPLAY_STATES } from '../../util/states';\nimport { createTextStyle } from '../../label/labelStyle';\nimport { getECData } from '../../util/innerStore';\nimport { getSectorCornerRadius } from '../helper/pieHelper';\nimport { createOrUpdatePatternFromDecal } from '../../util/decal';\nimport { saveOldStyle } from '../../animation/basicTrasition';\nvar DEFAULT_SECTOR_Z = 2;\nvar DEFAULT_TEXT_Z = 4;\n/**\n * Sunburstce of Sunburst including Sector, Label, LabelLine\n */\n\nvar SunburstPiece =\n/** @class */\nfunction (_super) {\n  __extends(SunburstPiece, _super);\n\n  function SunburstPiece(node, seriesModel, ecModel, api) {\n    var _this = _super.call(this) || this;\n\n    _this.z2 = DEFAULT_SECTOR_Z;\n    _this.textConfig = {\n      inside: true\n    };\n    getECData(_this).seriesIndex = seriesModel.seriesIndex;\n    var text = new graphic.Text({\n      z2: DEFAULT_TEXT_Z,\n      silent: node.getModel().get(['label', 'silent'])\n    });\n\n    _this.setTextContent(text);\n\n    _this.updateData(true, node, seriesModel, ecModel, api);\n\n    return _this;\n  }\n\n  SunburstPiece.prototype.updateData = function (firstCreate, node, // state: 'emphasis' | 'normal' | 'highlight' | 'downplay',\n  seriesModel, ecModel, api) {\n    this.node = node;\n    node.piece = this;\n    seriesModel = seriesModel || this._seriesModel;\n    ecModel = ecModel || this._ecModel;\n    var sector = this;\n    getECData(sector).dataIndex = node.dataIndex;\n    var itemModel = node.getModel();\n    var emphasisModel = itemModel.getModel('emphasis');\n    var layout = node.getLayout();\n    var sectorShape = zrUtil.extend({}, layout);\n    sectorShape.label = null;\n    var normalStyle = node.getVisual('style');\n    normalStyle.lineJoin = 'bevel';\n    var decal = node.getVisual('decal');\n\n    if (decal) {\n      normalStyle.decal = createOrUpdatePatternFromDecal(decal, api);\n    }\n\n    var cornerRadius = getSectorCornerRadius(itemModel.getModel('itemStyle'), sectorShape, true);\n    zrUtil.extend(sectorShape, cornerRadius);\n    zrUtil.each(SPECIAL_STATES, function (stateName) {\n      var state = sector.ensureState(stateName);\n      var itemStyleModel = itemModel.getModel([stateName, 'itemStyle']);\n      state.style = itemStyleModel.getItemStyle(); // border radius\n\n      var cornerRadius = getSectorCornerRadius(itemStyleModel, sectorShape);\n\n      if (cornerRadius) {\n        state.shape = cornerRadius;\n      }\n    });\n\n    if (firstCreate) {\n      sector.setShape(sectorShape);\n      sector.shape.r = layout.r0;\n      graphic.updateProps(sector, {\n        shape: {\n          r: layout.r\n        }\n      }, seriesModel, node.dataIndex);\n    } else {\n      // Disable animation for gradient since no interpolation method\n      // is supported for gradient\n      graphic.updateProps(sector, {\n        shape: sectorShape\n      }, seriesModel);\n      saveOldStyle(sector);\n    }\n\n    sector.useStyle(normalStyle);\n\n    this._updateLabel(seriesModel);\n\n    var cursorStyle = itemModel.getShallow('cursor');\n    cursorStyle && sector.attr('cursor', cursorStyle);\n    this._seriesModel = seriesModel || this._seriesModel;\n    this._ecModel = ecModel || this._ecModel;\n    var focus = emphasisModel.get('focus');\n    var focusOrIndices = focus === 'ancestor' ? node.getAncestorsIndices() : focus === 'descendant' ? node.getDescendantIndices() : focus;\n    enableHoverEmphasis(this, focusOrIndices, emphasisModel.get('blurScope'));\n  };\n\n  SunburstPiece.prototype._updateLabel = function (seriesModel) {\n    var _this = this;\n\n    var itemModel = this.node.getModel();\n    var normalLabelModel = itemModel.getModel('label');\n    var layout = this.node.getLayout();\n    var angle = layout.endAngle - layout.startAngle;\n    var midAngle = (layout.startAngle + layout.endAngle) / 2;\n    var dx = Math.cos(midAngle);\n    var dy = Math.sin(midAngle);\n    var sector = this;\n    var label = sector.getTextContent();\n    var dataIndex = this.node.dataIndex;\n    var labelMinAngle = normalLabelModel.get('minAngle') / 180 * Math.PI;\n    var isNormalShown = normalLabelModel.get('show') && !(labelMinAngle != null && Math.abs(angle) < labelMinAngle);\n    label.ignore = !isNormalShown; // TODO use setLabelStyle\n\n    zrUtil.each(DISPLAY_STATES, function (stateName) {\n      var labelStateModel = stateName === 'normal' ? itemModel.getModel('label') : itemModel.getModel([stateName, 'label']);\n      var isNormal = stateName === 'normal';\n      var state = isNormal ? label : label.ensureState(stateName);\n      var text = seriesModel.getFormattedLabel(dataIndex, stateName);\n\n      if (isNormal) {\n        text = text || _this.node.name;\n      }\n\n      state.style = createTextStyle(labelStateModel, {}, null, stateName !== 'normal', true);\n\n      if (text) {\n        state.style.text = text;\n      } // Not displaying text when angle is too small\n\n\n      var isShown = labelStateModel.get('show');\n\n      if (isShown != null && !isNormal) {\n        state.ignore = !isShown;\n      }\n\n      var labelPosition = getLabelAttr(labelStateModel, 'position');\n      var sectorState = isNormal ? sector : sector.states[stateName];\n      var labelColor = sectorState.style.fill;\n      sectorState.textConfig = {\n        outsideFill: labelStateModel.get('color') === 'inherit' ? labelColor : null,\n        inside: labelPosition !== 'outside'\n      };\n      var r;\n      var labelPadding = getLabelAttr(labelStateModel, 'distance') || 0;\n      var textAlign = getLabelAttr(labelStateModel, 'align');\n\n      if (labelPosition === 'outside') {\n        r = layout.r + labelPadding;\n        textAlign = midAngle > Math.PI / 2 ? 'right' : 'left';\n      } else {\n        if (!textAlign || textAlign === 'center') {\n          r = (layout.r + layout.r0) / 2;\n          textAlign = 'center';\n        } else if (textAlign === 'left') {\n          r = layout.r0 + labelPadding;\n\n          if (midAngle > Math.PI / 2) {\n            textAlign = 'right';\n          }\n        } else if (textAlign === 'right') {\n          r = layout.r - labelPadding;\n\n          if (midAngle > Math.PI / 2) {\n            textAlign = 'left';\n          }\n        }\n      }\n\n      state.style.align = textAlign;\n      state.style.verticalAlign = getLabelAttr(labelStateModel, 'verticalAlign') || 'middle';\n      state.x = r * dx + layout.cx;\n      state.y = r * dy + layout.cy;\n      var rotateType = getLabelAttr(labelStateModel, 'rotate');\n      var rotate = 0;\n\n      if (rotateType === 'radial') {\n        rotate = -midAngle;\n\n        if (rotate < -Math.PI / 2) {\n          rotate += Math.PI;\n        }\n      } else if (rotateType === 'tangential') {\n        rotate = Math.PI / 2 - midAngle;\n\n        if (rotate > Math.PI / 2) {\n          rotate -= Math.PI;\n        } else if (rotate < -Math.PI / 2) {\n          rotate += Math.PI;\n        }\n      } else if (typeof rotateType === 'number') {\n        rotate = rotateType * Math.PI / 180;\n      }\n\n      state.rotation = rotate;\n    });\n\n    function getLabelAttr(model, name) {\n      var stateAttr = model.get(name);\n\n      if (stateAttr == null) {\n        return normalLabelModel.get(name);\n      }\n\n      return stateAttr;\n    }\n\n    label.dirtyStyle();\n  };\n\n  return SunburstPiece;\n}(graphic.Sector);\n\nexport default SunburstPiece;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { extend } from 'zrender/lib/core/util';\nimport { deprecateReplaceLog } from '../../util/log';\nimport { retrieveTargetInfo, aboveViewRoot } from '../helper/treeHelper';\nexport var ROOT_TO_NODE_ACTION = 'sunburstRootToNode';\nvar HIGHLIGHT_ACTION = 'sunburstHighlight';\nvar UNHIGHLIGHT_ACTION = 'sunburstUnhighlight';\nexport function installSunburstAction(registers) {\n  registers.registerAction({\n    type: ROOT_TO_NODE_ACTION,\n    update: 'updateView'\n  }, function (payload, ecModel) {\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'sunburst',\n      query: payload\n    }, handleRootToNode);\n\n    function handleRootToNode(model, index) {\n      var targetInfo = retrieveTargetInfo(payload, [ROOT_TO_NODE_ACTION], model);\n\n      if (targetInfo) {\n        var originViewRoot = model.getViewRoot();\n\n        if (originViewRoot) {\n          payload.direction = aboveViewRoot(originViewRoot, targetInfo.node) ? 'rollUp' : 'drillDown';\n        }\n\n        model.resetViewRoot(targetInfo.node);\n      }\n    }\n  });\n  registers.registerAction({\n    type: HIGHLIGHT_ACTION,\n    update: 'none'\n  }, function (payload, ecModel, api) {\n    // Clone\n    payload = extend({}, payload);\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'sunburst',\n      query: payload\n    }, handleHighlight);\n\n    function handleHighlight(model) {\n      var targetInfo = retrieveTargetInfo(payload, [HIGHLIGHT_ACTION], model);\n\n      if (targetInfo) {\n        payload.dataIndex = targetInfo.node.dataIndex;\n      }\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      deprecateReplaceLog('highlight', 'sunburstHighlight');\n    } // Fast forward action\n\n\n    api.dispatchAction(extend(payload, {\n      type: 'highlight'\n    }));\n  });\n  registers.registerAction({\n    type: UNHIGHLIGHT_ACTION,\n    update: 'updateView'\n  }, function (payload, ecModel, api) {\n    payload = extend({}, payload);\n\n    if (process.env.NODE_ENV !== 'production') {\n      deprecateReplaceLog('downplay', 'sunburstUnhighlight');\n    }\n\n    api.dispatchAction(extend(payload, {\n      type: 'downplay'\n    }));\n  });\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport ChartView from '../../view/Chart';\nimport SunburstPiece from './SunburstPiece';\nimport DataDiffer from '../../data/DataDiffer';\nimport { ROOT_TO_NODE_ACTION } from './sunburstAction';\nimport { windowOpen } from '../../util/format';\n\nvar SunburstView =\n/** @class */\nfunction (_super) {\n  __extends(SunburstView, _super);\n\n  function SunburstView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SunburstView.type;\n    return _this;\n  }\n\n  SunburstView.prototype.render = function (seriesModel, ecModel, api, // @ts-ignore\n  payload) {\n    var self = this;\n    this.seriesModel = seriesModel;\n    this.api = api;\n    this.ecModel = ecModel;\n    var data = seriesModel.getData();\n    var virtualRoot = data.tree.root;\n    var newRoot = seriesModel.getViewRoot();\n    var group = this.group;\n    var renderLabelForZeroData = seriesModel.get('renderLabelForZeroData');\n    var newChildren = [];\n    newRoot.eachNode(function (node) {\n      newChildren.push(node);\n    });\n    var oldChildren = this._oldChildren || [];\n    dualTravel(newChildren, oldChildren);\n    renderRollUp(virtualRoot, newRoot);\n\n    this._initEvents();\n\n    this._oldChildren = newChildren;\n\n    function dualTravel(newChildren, oldChildren) {\n      if (newChildren.length === 0 && oldChildren.length === 0) {\n        return;\n      }\n\n      new DataDiffer(oldChildren, newChildren, getKey, getKey).add(processNode).update(processNode).remove(zrUtil.curry(processNode, null)).execute();\n\n      function getKey(node) {\n        return node.getId();\n      }\n\n      function processNode(newIdx, oldIdx) {\n        var newNode = newIdx == null ? null : newChildren[newIdx];\n        var oldNode = oldIdx == null ? null : oldChildren[oldIdx];\n        doRenderNode(newNode, oldNode);\n      }\n    }\n\n    function doRenderNode(newNode, oldNode) {\n      if (!renderLabelForZeroData && newNode && !newNode.getValue()) {\n        // Not render data with value 0\n        newNode = null;\n      }\n\n      if (newNode !== virtualRoot && oldNode !== virtualRoot) {\n        if (oldNode && oldNode.piece) {\n          if (newNode) {\n            // Update\n            oldNode.piece.updateData(false, newNode, seriesModel, ecModel, api); // For tooltip\n\n            data.setItemGraphicEl(newNode.dataIndex, oldNode.piece);\n          } else {\n            // Remove\n            removeNode(oldNode);\n          }\n        } else if (newNode) {\n          // Add\n          var piece = new SunburstPiece(newNode, seriesModel, ecModel, api);\n          group.add(piece); // For tooltip\n\n          data.setItemGraphicEl(newNode.dataIndex, piece);\n        }\n      }\n    }\n\n    function removeNode(node) {\n      if (!node) {\n        return;\n      }\n\n      if (node.piece) {\n        group.remove(node.piece);\n        node.piece = null;\n      }\n    }\n\n    function renderRollUp(virtualRoot, viewRoot) {\n      if (viewRoot.depth > 0) {\n        // Render\n        if (self.virtualPiece) {\n          // Update\n          self.virtualPiece.updateData(false, virtualRoot, seriesModel, ecModel, api);\n        } else {\n          // Add\n          self.virtualPiece = new SunburstPiece(virtualRoot, seriesModel, ecModel, api);\n          group.add(self.virtualPiece);\n        } // TODO event scope\n\n\n        viewRoot.piece.off('click');\n        self.virtualPiece.on('click', function (e) {\n          self._rootToNode(viewRoot.parentNode);\n        });\n      } else if (self.virtualPiece) {\n        // Remove\n        group.remove(self.virtualPiece);\n        self.virtualPiece = null;\n      }\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  SunburstView.prototype._initEvents = function () {\n    var _this = this;\n\n    this.group.off('click');\n    this.group.on('click', function (e) {\n      var targetFound = false;\n\n      var viewRoot = _this.seriesModel.getViewRoot();\n\n      viewRoot.eachNode(function (node) {\n        if (!targetFound && node.piece && node.piece === e.target) {\n          var nodeClick = node.getModel().get('nodeClick');\n\n          if (nodeClick === 'rootToNode') {\n            _this._rootToNode(node);\n          } else if (nodeClick === 'link') {\n            var itemModel = node.getModel();\n            var link = itemModel.get('link');\n\n            if (link) {\n              var linkTarget = itemModel.get('target', true) || '_blank';\n              windowOpen(link, linkTarget);\n            }\n          }\n\n          targetFound = true;\n        }\n      });\n    });\n  };\n  /**\n   * @private\n   */\n\n\n  SunburstView.prototype._rootToNode = function (node) {\n    if (node !== this.seriesModel.getViewRoot()) {\n      this.api.dispatchAction({\n        type: ROOT_TO_NODE_ACTION,\n        from: this.uid,\n        seriesId: this.seriesModel.id,\n        targetNode: node\n      });\n    }\n  };\n  /**\n   * @implement\n   */\n\n\n  SunburstView.prototype.containPoint = function (point, seriesModel) {\n    var treeRoot = seriesModel.getData();\n    var itemLayout = treeRoot.getItemLayout(0);\n\n    if (itemLayout) {\n      var dx = point[0] - itemLayout.cx;\n      var dy = point[1] - itemLayout.cy;\n      var radius = Math.sqrt(dx * dx + dy * dy);\n      return radius <= itemLayout.r && radius >= itemLayout.r0;\n    }\n  };\n\n  SunburstView.type = 'sunburst';\n  return SunburstView;\n}(ChartView);\n\nexport default SunburstView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport SeriesModel from '../../model/Series';\nimport Tree from '../../data/Tree';\nimport { wrapTreePathInfo } from '../helper/treeHelper';\nimport Model from '../../model/Model';\nimport enableAriaDecalForTree from '../helper/enableAriaDecalForTree';\n\nvar SunburstSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(SunburstSeriesModel, _super);\n\n  function SunburstSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SunburstSeriesModel.type;\n    _this.ignoreStyleOnData = true;\n    return _this;\n  }\n\n  SunburstSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    // Create a virtual root.\n    var root = {\n      name: option.name,\n      children: option.data\n    };\n    completeTreeValue(root);\n    var levelModels = this._levelModels = zrUtil.map(option.levels || [], function (levelDefine) {\n      return new Model(levelDefine, this, ecModel);\n    }, this); // Make sure always a new tree is created when setOption,\n    // in TreemapView, we check whether oldTree === newTree\n    // to choose mappings approach among old shapes and new shapes.\n\n    var tree = Tree.createTree(root, this, beforeLink);\n\n    function beforeLink(nodeData) {\n      nodeData.wrapMethod('getItemModel', function (model, idx) {\n        var node = tree.getNodeByDataIndex(idx);\n        var levelModel = levelModels[node.depth];\n        levelModel && (model.parentModel = levelModel);\n        return model;\n      });\n    }\n\n    return tree.data;\n  };\n\n  SunburstSeriesModel.prototype.optionUpdated = function () {\n    this.resetViewRoot();\n  };\n  /*\n   * @override\n   */\n\n\n  SunburstSeriesModel.prototype.getDataParams = function (dataIndex) {\n    var params = _super.prototype.getDataParams.apply(this, arguments);\n\n    var node = this.getData().tree.getNodeByDataIndex(dataIndex);\n    params.treePathInfo = wrapTreePathInfo(node, this);\n    return params;\n  };\n\n  SunburstSeriesModel.prototype.getLevelModel = function (node) {\n    return this._levelModels && this._levelModels[node.depth];\n  };\n\n  SunburstSeriesModel.prototype.getViewRoot = function () {\n    return this._viewRoot;\n  };\n\n  SunburstSeriesModel.prototype.resetViewRoot = function (viewRoot) {\n    viewRoot ? this._viewRoot = viewRoot : viewRoot = this._viewRoot;\n    var root = this.getRawData().tree.root;\n\n    if (!viewRoot || viewRoot !== root && !root.contains(viewRoot)) {\n      this._viewRoot = root;\n    }\n  };\n\n  SunburstSeriesModel.prototype.enableAriaDecal = function () {\n    enableAriaDecalForTree(this);\n  };\n\n  SunburstSeriesModel.type = 'series.sunburst';\n  SunburstSeriesModel.defaultOption = {\n    zlevel: 0,\n    z: 2,\n    // \n    center: ['50%', '50%'],\n    radius: [0, '75%'],\n    // \n    clockwise: true,\n    startAngle: 90,\n    // 0\n    minAngle: 0,\n    // If still show when all data zero.\n    stillShowZeroSum: true,\n    // 'rootToNode', 'link', or false\n    nodeClick: 'rootToNode',\n    renderLabelForZeroData: false,\n    label: {\n      // could be: 'radial', 'tangential', or 'none'\n      rotate: 'radial',\n      show: true,\n      opacity: 1,\n      // 'left' is for inner side of inside, and 'right' is for outter\n      // side for inside\n      align: 'center',\n      position: 'inside',\n      distance: 5,\n      silent: true\n    },\n    itemStyle: {\n      borderWidth: 1,\n      borderColor: 'white',\n      borderType: 'solid',\n      shadowBlur: 0,\n      shadowColor: 'rgba(0, 0, 0, 0.2)',\n      shadowOffsetX: 0,\n      shadowOffsetY: 0,\n      opacity: 1\n    },\n    emphasis: {\n      focus: 'descendant'\n    },\n    blur: {\n      itemStyle: {\n        opacity: 0.2\n      },\n      label: {\n        opacity: 0.1\n      }\n    },\n    // Animation type canbe expansion, scale\n    animationType: 'expansion',\n    animationDuration: 1000,\n    animationDurationUpdate: 500,\n    data: [],\n\n    /**\n     * Sort order.\n     *\n     * Valid values: 'desc', 'asc', null, or callback function.\n     * 'desc' and 'asc' for descend and ascendant order;\n     * null for not sorting;\n     * example of callback function:\n     * function(nodeA, nodeB) {\n     *     return nodeA.getValue() - nodeB.getValue();\n     * }\n     */\n    sort: 'desc'\n  };\n  return SunburstSeriesModel;\n}(SeriesModel);\n\nfunction completeTreeValue(dataNode) {\n  // Postorder travel tree.\n  // If value of none-leaf node is not set,\n  // calculate it by suming up the value of all children.\n  var sum = 0;\n  zrUtil.each(dataNode.children, function (child) {\n    completeTreeValue(child);\n    var childValue = child.value; // TODO First value of array must be a number\n\n    zrUtil.isArray(childValue) && (childValue = childValue[0]);\n    sum += childValue;\n  });\n  var thisValue = dataNode.value;\n\n  if (zrUtil.isArray(thisValue)) {\n    thisValue = thisValue[0];\n  }\n\n  if (thisValue == null || isNaN(thisValue)) {\n    thisValue = sum;\n  } // Value should not less than 0.\n\n\n  if (thisValue < 0) {\n    thisValue = 0;\n  }\n\n  zrUtil.isArray(dataNode.value) ? dataNode.value[0] = thisValue : dataNode.value = thisValue;\n}\n\nexport default SunburstSeriesModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { parsePercent } from '../../util/number';\nimport * as zrUtil from 'zrender/lib/core/util'; // let PI2 = Math.PI * 2;\n\nvar RADIAN = Math.PI / 180;\nexport default function sunburstLayout(seriesType, ecModel, api) {\n  ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n    var center = seriesModel.get('center');\n    var radius = seriesModel.get('radius');\n\n    if (!zrUtil.isArray(radius)) {\n      radius = [0, radius];\n    }\n\n    if (!zrUtil.isArray(center)) {\n      center = [center, center];\n    }\n\n    var width = api.getWidth();\n    var height = api.getHeight();\n    var size = Math.min(width, height);\n    var cx = parsePercent(center[0], width);\n    var cy = parsePercent(center[1], height);\n    var r0 = parsePercent(radius[0], size / 2);\n    var r = parsePercent(radius[1], size / 2);\n    var startAngle = -seriesModel.get('startAngle') * RADIAN;\n    var minAngle = seriesModel.get('minAngle') * RADIAN;\n    var virtualRoot = seriesModel.getData().tree.root;\n    var treeRoot = seriesModel.getViewRoot();\n    var rootDepth = treeRoot.depth;\n    var sort = seriesModel.get('sort');\n\n    if (sort != null) {\n      initChildren(treeRoot, sort);\n    }\n\n    var validDataCount = 0;\n    zrUtil.each(treeRoot.children, function (child) {\n      !isNaN(child.getValue()) && validDataCount++;\n    });\n    var sum = treeRoot.getValue(); // Sum may be 0\n\n    var unitRadian = Math.PI / (sum || validDataCount) * 2;\n    var renderRollupNode = treeRoot.depth > 0;\n    var levels = treeRoot.height - (renderRollupNode ? -1 : 1);\n    var rPerLevel = (r - r0) / (levels || 1);\n    var clockwise = seriesModel.get('clockwise');\n    var stillShowZeroSum = seriesModel.get('stillShowZeroSum'); // In the case some sector angle is smaller than minAngle\n    // let restAngle = PI2;\n    // let valueSumLargerThanMinAngle = 0;\n\n    var dir = clockwise ? 1 : -1;\n    /**\n     * Render a tree\n     * @return increased angle\n     */\n\n    var renderNode = function renderNode(node, startAngle) {\n      if (!node) {\n        return;\n      }\n\n      var endAngle = startAngle; // Render self\n\n      if (node !== virtualRoot) {\n        // Tree node is virtual, so it doesn't need to be drawn\n        var value = node.getValue();\n        var angle = sum === 0 && stillShowZeroSum ? unitRadian : value * unitRadian;\n\n        if (angle < minAngle) {\n          angle = minAngle; // restAngle -= minAngle;\n        } // else {\n        //     valueSumLargerThanMinAngle += value;\n        // }\n\n\n        endAngle = startAngle + dir * angle;\n        var depth = node.depth - rootDepth - (renderRollupNode ? -1 : 1);\n        var rStart = r0 + rPerLevel * depth;\n        var rEnd = r0 + rPerLevel * (depth + 1);\n        var levelModel = seriesModel.getLevelModel(node);\n\n        if (levelModel) {\n          var r0_1 = levelModel.get('r0', true);\n          var r_1 = levelModel.get('r', true);\n          var radius_1 = levelModel.get('radius', true);\n\n          if (radius_1 != null) {\n            r0_1 = radius_1[0];\n            r_1 = radius_1[1];\n          }\n\n          r0_1 != null && (rStart = parsePercent(r0_1, size / 2));\n          r_1 != null && (rEnd = parsePercent(r_1, size / 2));\n        }\n\n        node.setLayout({\n          angle: angle,\n          startAngle: startAngle,\n          endAngle: endAngle,\n          clockwise: clockwise,\n          cx: cx,\n          cy: cy,\n          r0: rStart,\n          r: rEnd\n        });\n      } // Render children\n\n\n      if (node.children && node.children.length) {\n        // currentAngle = startAngle;\n        var siblingAngle_1 = 0;\n        zrUtil.each(node.children, function (node) {\n          siblingAngle_1 += renderNode(node, startAngle + siblingAngle_1);\n        });\n      }\n\n      return endAngle - startAngle;\n    }; // Virtual root node for roll up\n\n\n    if (renderRollupNode) {\n      var rStart = r0;\n      var rEnd = r0 + rPerLevel;\n      var angle = Math.PI * 2;\n      virtualRoot.setLayout({\n        angle: angle,\n        startAngle: startAngle,\n        endAngle: startAngle + angle,\n        clockwise: clockwise,\n        cx: cx,\n        cy: cy,\n        r0: rStart,\n        r: rEnd\n      });\n    }\n\n    renderNode(treeRoot, startAngle);\n  });\n}\n/**\n * Init node children by order and update visual\n */\n\nfunction initChildren(node, sortOrder) {\n  var children = node.children || [];\n  node.children = sort(children, sortOrder); // Init children recursively\n\n  if (children.length) {\n    zrUtil.each(node.children, function (child) {\n      initChildren(child, sortOrder);\n    });\n  }\n}\n/**\n * Sort children nodes\n *\n * @param {TreeNode[]}               children children of node to be sorted\n * @param {string | function | null} sort sort method\n *                                   See SunburstSeries.js for details.\n */\n\n\nfunction sort(children, sortOrder) {\n  if (typeof sortOrder === 'function') {\n    var sortTargets = zrUtil.map(children, function (child, idx) {\n      var value = child.getValue();\n      return {\n        params: {\n          depth: child.depth,\n          height: child.height,\n          dataIndex: child.dataIndex,\n          getValue: function getValue() {\n            return value;\n          }\n        },\n        index: idx\n      };\n    });\n    sortTargets.sort(function (a, b) {\n      return sortOrder(a.params, b.params);\n    });\n    return zrUtil.map(sortTargets, function (target) {\n      return children[target.index];\n    });\n  } else {\n    var isAsc_1 = sortOrder === 'asc';\n    return children.sort(function (a, b) {\n      var diff = (a.getValue() - b.getValue()) * (isAsc_1 ? 1 : -1);\n      return diff === 0 ? (a.dataIndex - b.dataIndex) * (isAsc_1 ? -1 : 1) : diff;\n    });\n  }\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { lift } from 'zrender/lib/tool/color';\nimport { extend } from 'zrender/lib/core/util';\nexport default function sunburstVisual(ecModel) {\n  var paletteScope = {}; // Default color strategy\n\n  function pickColor(node, seriesModel, treeHeight) {\n    // Choose color from palette based on the first level.\n    var current = node;\n\n    while (current && current.depth > 1) {\n      current = current.parentNode;\n    }\n\n    var color = seriesModel.getColorFromPalette(current.name || current.dataIndex + '', paletteScope);\n\n    if (node.depth > 1 && typeof color === 'string') {\n      // Lighter on the deeper level.\n      color = lift(color, (node.depth - 1) / (treeHeight - 1) * 0.5);\n    }\n\n    return color;\n  }\n\n  ecModel.eachSeriesByType('sunburst', function (seriesModel) {\n    var data = seriesModel.getData();\n    var tree = data.tree;\n    tree.eachNode(function (node) {\n      var model = node.getModel();\n      var style = model.getModel('itemStyle').getItemStyle();\n\n      if (!style.fill) {\n        style.fill = pickColor(node, seriesModel, tree.root.height);\n      }\n\n      var existsStyle = data.ensureUniqueItemVisual(node.dataIndex, 'style');\n      extend(existsStyle, style);\n    });\n  });\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport createSeriesData from '../helper/createSeriesData';\nimport { makeInner } from '../../util/model';\nimport SeriesModel from '../../model/Series';\nexport var TRANSFORM_PROPS = {\n  x: 1,\n  y: 1,\n  scaleX: 1,\n  scaleY: 1,\n  originX: 1,\n  originY: 1,\n  rotation: 1\n}; // Also compat with ec4, where\n// `visual('color') visual('borderColor')` is supported.\n\nexport var STYLE_VISUAL_TYPE = {\n  color: 'fill',\n  borderColor: 'stroke'\n};\nexport var NON_STYLE_VISUAL_PROPS = {\n  symbol: 1,\n  symbolSize: 1,\n  symbolKeepAspect: 1,\n  legendIcon: 1,\n  visualMeta: 1,\n  liftZ: 1,\n  decal: 1\n};\n;\n;\nexport var customInnerStore = makeInner();\n\nvar CustomSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(CustomSeriesModel, _super);\n\n  function CustomSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CustomSeriesModel.type;\n    return _this;\n  }\n\n  CustomSeriesModel.prototype.optionUpdated = function () {\n    this.currentZLevel = this.get('zlevel', true);\n    this.currentZ = this.get('z', true);\n  };\n\n  CustomSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesData(null, this);\n  };\n\n  CustomSeriesModel.prototype.getDataParams = function (dataIndex, dataType, el) {\n    var params = _super.prototype.getDataParams.call(this, dataIndex, dataType);\n\n    el && (params.info = customInnerStore(el).info);\n    return params;\n  };\n\n  CustomSeriesModel.type = 'series.custom';\n  CustomSeriesModel.dependencies = ['grid', 'polar', 'geo', 'singleAxis', 'calendar'];\n  CustomSeriesModel.defaultOption = {\n    coordinateSystem: 'cartesian2d',\n    zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    // Custom series will not clip by default.\n    // Some case will use custom series to draw label\n    // For example https://echarts.apache.org/examples/en/editor.html?c=custom-gantt-flight\n    clip: false // Cartesian coordinate system\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // Polar coordinate system\n    // polarIndex: 0,\n    // Geo coordinate system\n    // geoIndex: 0,\n\n  };\n  return CustomSeriesModel;\n}(SeriesModel);\n\nexport default CustomSeriesModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\n\nfunction dataToCoordSize(dataSize, dataItem) {\n  // dataItem is necessary in log axis.\n  dataItem = dataItem || [0, 0];\n  return zrUtil.map(['x', 'y'], function (dim, dimIdx) {\n    var axis = this.getAxis(dim);\n    var val = dataItem[dimIdx];\n    var halfSize = dataSize[dimIdx] / 2;\n    return axis.type === 'category' ? axis.getBandWidth() : Math.abs(axis.dataToCoord(val - halfSize) - axis.dataToCoord(val + halfSize));\n  }, this);\n}\n\nexport default function cartesianPrepareCustom(coordSys) {\n  var rect = coordSys.master.getRect();\n  return {\n    coordSys: {\n      // The name exposed to user is always 'cartesian2d' but not 'grid'.\n      type: 'cartesian2d',\n      x: rect.x,\n      y: rect.y,\n      width: rect.width,\n      height: rect.height\n    },\n    api: {\n      coord: function coord(data) {\n        // do not provide \"out\" param\n        return coordSys.dataToPoint(data);\n      },\n      size: zrUtil.bind(dataToCoordSize, coordSys)\n    }\n  };\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\n\nfunction dataToCoordSize(dataSize, dataItem) {\n  dataItem = dataItem || [0, 0];\n  return zrUtil.map([0, 1], function (dimIdx) {\n    var val = dataItem[dimIdx];\n    var halfSize = dataSize[dimIdx] / 2;\n    var p1 = [];\n    var p2 = [];\n    p1[dimIdx] = val - halfSize;\n    p2[dimIdx] = val + halfSize;\n    p1[1 - dimIdx] = p2[1 - dimIdx] = dataItem[1 - dimIdx];\n    return Math.abs(this.dataToPoint(p1)[dimIdx] - this.dataToPoint(p2)[dimIdx]);\n  }, this);\n}\n\nexport default function geoPrepareCustom(coordSys) {\n  var rect = coordSys.getBoundingRect();\n  return {\n    coordSys: {\n      type: 'geo',\n      x: rect.x,\n      y: rect.y,\n      width: rect.width,\n      height: rect.height,\n      zoom: coordSys.getZoom()\n    },\n    api: {\n      coord: function coord(data) {\n        // do not provide \"out\" and noRoam param,\n        // Compatible with this usage:\n        // echarts.util.map(item.points, api.coord)\n        return coordSys.dataToPoint(data);\n      },\n      size: zrUtil.bind(dataToCoordSize, coordSys)\n    }\n  };\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { bind } from 'zrender/lib/core/util';\n\nfunction dataToCoordSize(dataSize, dataItem) {\n  // dataItem is necessary in log axis.\n  var axis = this.getAxis();\n  var val = dataItem instanceof Array ? dataItem[0] : dataItem;\n  var halfSize = (dataSize instanceof Array ? dataSize[0] : dataSize) / 2;\n  return axis.type === 'category' ? axis.getBandWidth() : Math.abs(axis.dataToCoord(val - halfSize) - axis.dataToCoord(val + halfSize));\n}\n\nexport default function singlePrepareCustom(coordSys) {\n  var rect = coordSys.getRect();\n  return {\n    coordSys: {\n      type: 'singleAxis',\n      x: rect.x,\n      y: rect.y,\n      width: rect.width,\n      height: rect.height\n    },\n    api: {\n      coord: function coord(val) {\n        // do not provide \"out\" param\n        return coordSys.dataToPoint(val);\n      },\n      size: bind(dataToCoordSize, coordSys)\n    }\n  };\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util'; // import AngleAxis from './AngleAxis';\n\nfunction dataToCoordSize(dataSize, dataItem) {\n  // dataItem is necessary in log axis.\n  dataItem = dataItem || [0, 0];\n  return zrUtil.map(['Radius', 'Angle'], function (dim, dimIdx) {\n    var getterName = 'get' + dim + 'Axis'; // TODO: TYPE Check Angle Axis\n\n    var axis = this[getterName]();\n    var val = dataItem[dimIdx];\n    var halfSize = dataSize[dimIdx] / 2;\n    var result = axis.type === 'category' ? axis.getBandWidth() : Math.abs(axis.dataToCoord(val - halfSize) - axis.dataToCoord(val + halfSize));\n\n    if (dim === 'Angle') {\n      result = result * Math.PI / 180;\n    }\n\n    return result;\n  }, this);\n}\n\nexport default function polarPrepareCustom(coordSys) {\n  var radiusAxis = coordSys.getRadiusAxis();\n  var angleAxis = coordSys.getAngleAxis();\n  var radius = radiusAxis.getExtent();\n  radius[0] > radius[1] && radius.reverse();\n  return {\n    coordSys: {\n      type: 'polar',\n      cx: coordSys.cx,\n      cy: coordSys.cy,\n      r: radius[1],\n      r0: radius[0]\n    },\n    api: {\n      coord: function coord(data) {\n        var radius = radiusAxis.dataToRadius(data[0]);\n        var angle = angleAxis.dataToAngle(data[1]);\n        var coord = coordSys.coordToPoint([radius, angle]);\n        coord.push(radius, angle * Math.PI / 180);\n        return coord;\n      },\n      size: zrUtil.bind(dataToCoordSize, coordSys)\n    }\n  };\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each, hasOwn } from 'zrender/lib/core/util';\nvar deprecatedLogs = {};\n/**\n * Whether need to call `convertEC4CompatibleStyle`.\n */\n\nexport function isEC4CompatibleStyle(style, elType, hasOwnTextContentOption, hasOwnTextConfig) {\n  // Since echarts5, `RectText` is separated from its host element and style.text\n  // does not exist any more. The compat work brings some extra burden on performance.\n  // So we provide:\n  // `legacy: true` force make compat.\n  // `legacy: false`, force do not compat.\n  // `legacy` not set: auto detect wheter legacy.\n  //     But in this case we do not compat (difficult to detect and rare case):\n  //     Becuse custom series and graphic component support \"merge\", users may firstly\n  //     only set `textStrokeWidth` style or secondly only set `text`.\n  return style && (style.legacy || style.legacy !== false && !hasOwnTextContentOption && !hasOwnTextConfig && elType !== 'tspan' // Difficult to detect whether legacy for a \"text\" el.\n  && (elType === 'text' || hasOwn(style, 'text')));\n}\n/**\n * `EC4CompatibleStyle` is style that might be in echarts4 format or echarts5 format.\n * @param hostStyle The properties might be modified.\n * @return If be text el, `textContentStyle` and `textConfig` will not be retured.\n *         Otherwise a `textContentStyle` and `textConfig` will be created, whose props area\n *         retried from the `hostStyle`.\n */\n\nexport function convertFromEC4CompatibleStyle(hostStyle, elType, isNormal) {\n  var srcStyle = hostStyle;\n  var textConfig;\n  var textContent;\n  var textContentStyle;\n\n  if (elType === 'text') {\n    textContentStyle = srcStyle;\n  } else {\n    textContentStyle = {};\n    hasOwn(srcStyle, 'text') && (textContentStyle.text = srcStyle.text);\n    hasOwn(srcStyle, 'rich') && (textContentStyle.rich = srcStyle.rich);\n    hasOwn(srcStyle, 'textFill') && (textContentStyle.fill = srcStyle.textFill);\n    hasOwn(srcStyle, 'textStroke') && (textContentStyle.stroke = srcStyle.textStroke);\n    hasOwn(srcStyle, 'fontFamily') && (textContentStyle.fontFamily = srcStyle.fontFamily);\n    hasOwn(srcStyle, 'fontSize') && (textContentStyle.fontSize = srcStyle.fontSize);\n    hasOwn(srcStyle, 'fontStyle') && (textContentStyle.fontStyle = srcStyle.fontStyle);\n    hasOwn(srcStyle, 'fontWeight') && (textContentStyle.fontWeight = srcStyle.fontWeight);\n    textContent = {\n      type: 'text',\n      style: textContentStyle,\n      // ec4 do not support rectText trigger.\n      // And when text postion is different in normal and emphasis\n      // => hover text trigger emphasis;\n      // => text position changed, leave mouse pointer immediately;\n      // That might cause state incorrect.\n      silent: true\n    };\n    textConfig = {};\n    var hasOwnPos = hasOwn(srcStyle, 'textPosition');\n\n    if (isNormal) {\n      textConfig.position = hasOwnPos ? srcStyle.textPosition : 'inside';\n    } else {\n      hasOwnPos && (textConfig.position = srcStyle.textPosition);\n    }\n\n    hasOwn(srcStyle, 'textPosition') && (textConfig.position = srcStyle.textPosition);\n    hasOwn(srcStyle, 'textOffset') && (textConfig.offset = srcStyle.textOffset);\n    hasOwn(srcStyle, 'textRotation') && (textConfig.rotation = srcStyle.textRotation);\n    hasOwn(srcStyle, 'textDistance') && (textConfig.distance = srcStyle.textDistance);\n  }\n\n  convertEC4CompatibleRichItem(textContentStyle, hostStyle);\n  each(textContentStyle.rich, function (richItem) {\n    convertEC4CompatibleRichItem(richItem, richItem);\n  });\n  return {\n    textConfig: textConfig,\n    textContent: textContent\n  };\n}\n/**\n * The result will be set to `out`.\n */\n\nfunction convertEC4CompatibleRichItem(out, richItem) {\n  if (!richItem) {\n    return;\n  } // (1) For simplicity, make textXXX properties (deprecated since ec5) has\n  // higher priority. For example, consider in ec4 `borderColor: 5, textBorderColor: 10`\n  // on a rect means `borderColor: 4` on the rect and `borderColor: 10` on an attached\n  // richText in ec5.\n  // (2) `out === richItem` if and only if `out` is text el or rich item.\n  // So we can overwite existing props in `out` since textXXX has higher priority.\n\n\n  richItem.font = richItem.textFont || richItem.font;\n  hasOwn(richItem, 'textStrokeWidth') && (out.lineWidth = richItem.textStrokeWidth);\n  hasOwn(richItem, 'textAlign') && (out.align = richItem.textAlign);\n  hasOwn(richItem, 'textVerticalAlign') && (out.verticalAlign = richItem.textVerticalAlign);\n  hasOwn(richItem, 'textLineHeight') && (out.lineHeight = richItem.textLineHeight);\n  hasOwn(richItem, 'textWidth') && (out.width = richItem.textWidth);\n  hasOwn(richItem, 'textHeight') && (out.height = richItem.textHeight);\n  hasOwn(richItem, 'textBackgroundColor') && (out.backgroundColor = richItem.textBackgroundColor);\n  hasOwn(richItem, 'textPadding') && (out.padding = richItem.textPadding);\n  hasOwn(richItem, 'textBorderColor') && (out.borderColor = richItem.textBorderColor);\n  hasOwn(richItem, 'textBorderWidth') && (out.borderWidth = richItem.textBorderWidth);\n  hasOwn(richItem, 'textBorderRadius') && (out.borderRadius = richItem.textBorderRadius);\n  hasOwn(richItem, 'textBoxShadowColor') && (out.shadowColor = richItem.textBoxShadowColor);\n  hasOwn(richItem, 'textBoxShadowBlur') && (out.shadowBlur = richItem.textBoxShadowBlur);\n  hasOwn(richItem, 'textBoxShadowOffsetX') && (out.shadowOffsetX = richItem.textBoxShadowOffsetX);\n  hasOwn(richItem, 'textBoxShadowOffsetY') && (out.shadowOffsetY = richItem.textBoxShadowOffsetY);\n}\n/**\n * Convert to pure echarts4 format style.\n * `itemStyle` will be modified, added with ec4 style properties from\n * `textStyle` and `textConfig`.\n *\n * [Caveat]: For simplicity, `insideRollback` in ec4 does not compat, where\n * `styleEmphasis: {textFill: 'red'}` will remove the normal auto added stroke.\n */\n\n\nexport function convertToEC4StyleForCustomSerise(itemStl, txStl, txCfg) {\n  var out = itemStl; // See `custom.ts`, a trick to set extra `textPosition` firstly.\n\n  out.textPosition = out.textPosition || txCfg.position || 'inside';\n  txCfg.offset != null && (out.textOffset = txCfg.offset);\n  txCfg.rotation != null && (out.textRotation = txCfg.rotation);\n  txCfg.distance != null && (out.textDistance = txCfg.distance);\n  var isInside = out.textPosition.indexOf('inside') >= 0;\n  var hostFill = itemStl.fill || '#000';\n  convertToEC4RichItem(out, txStl);\n  var textFillNotSet = out.textFill == null;\n\n  if (isInside) {\n    if (textFillNotSet) {\n      out.textFill = txCfg.insideFill || '#fff';\n      !out.textStroke && txCfg.insideStroke && (out.textStroke = txCfg.insideStroke);\n      !out.textStroke && (out.textStroke = hostFill);\n      out.textStrokeWidth == null && (out.textStrokeWidth = 2);\n    }\n  } else {\n    if (textFillNotSet) {\n      out.textFill = itemStl.fill || txCfg.outsideFill || '#000';\n    }\n\n    !out.textStroke && txCfg.outsideStroke && (out.textStroke = txCfg.outsideStroke);\n  }\n\n  out.text = txStl.text;\n  out.rich = txStl.rich;\n  each(txStl.rich, function (richItem) {\n    convertToEC4RichItem(richItem, richItem);\n  });\n  return out;\n}\n\nfunction convertToEC4RichItem(out, richItem) {\n  if (!richItem) {\n    return;\n  }\n\n  hasOwn(richItem, 'fill') && (out.textFill = richItem.fill);\n  hasOwn(richItem, 'stroke') && (out.textStroke = richItem.fill);\n  hasOwn(richItem, 'lineWidth') && (out.textStrokeWidth = richItem.lineWidth);\n  hasOwn(richItem, 'font') && (out.font = richItem.font);\n  hasOwn(richItem, 'fontStyle') && (out.fontStyle = richItem.fontStyle);\n  hasOwn(richItem, 'fontWeight') && (out.fontWeight = richItem.fontWeight);\n  hasOwn(richItem, 'fontSize') && (out.fontSize = richItem.fontSize);\n  hasOwn(richItem, 'fontFamily') && (out.fontFamily = richItem.fontFamily);\n  hasOwn(richItem, 'align') && (out.textAlign = richItem.align);\n  hasOwn(richItem, 'verticalAlign') && (out.textVerticalAlign = richItem.verticalAlign);\n  hasOwn(richItem, 'lineHeight') && (out.textLineHeight = richItem.lineHeight);\n  hasOwn(richItem, 'width') && (out.textWidth = richItem.width);\n  hasOwn(richItem, 'height') && (out.textHeight = richItem.height);\n  hasOwn(richItem, 'backgroundColor') && (out.textBackgroundColor = richItem.backgroundColor);\n  hasOwn(richItem, 'padding') && (out.textPadding = richItem.padding);\n  hasOwn(richItem, 'borderColor') && (out.textBorderColor = richItem.borderColor);\n  hasOwn(richItem, 'borderWidth') && (out.textBorderWidth = richItem.borderWidth);\n  hasOwn(richItem, 'borderRadius') && (out.textBorderRadius = richItem.borderRadius);\n  hasOwn(richItem, 'shadowColor') && (out.textBoxShadowColor = richItem.shadowColor);\n  hasOwn(richItem, 'shadowBlur') && (out.textBoxShadowBlur = richItem.shadowBlur);\n  hasOwn(richItem, 'shadowOffsetX') && (out.textBoxShadowOffsetX = richItem.shadowOffsetX);\n  hasOwn(richItem, 'shadowOffsetY') && (out.textBoxShadowOffsetY = richItem.shadowOffsetY);\n  hasOwn(richItem, 'textShadowColor') && (out.textShadowColor = richItem.textShadowColor);\n  hasOwn(richItem, 'textShadowBlur') && (out.textShadowBlur = richItem.textShadowBlur);\n  hasOwn(richItem, 'textShadowOffsetX') && (out.textShadowOffsetX = richItem.textShadowOffsetX);\n  hasOwn(richItem, 'textShadowOffsetY') && (out.textShadowOffsetY = richItem.textShadowOffsetY);\n}\n\nexport function warnDeprecated(deprecated, insteadApproach) {\n  if (process.env.NODE_ENV !== 'production') {\n    var key = deprecated + '^_^' + insteadApproach;\n\n    if (!deprecatedLogs[key]) {\n      console.warn(\"[ECharts] DEPRECATED: \\\"\" + deprecated + \"\\\" has been deprecated. \" + insteadApproach);\n      deprecatedLogs[key] = true;\n    }\n  }\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { customInnerStore, TRANSFORM_PROPS } from './CustomSeries';\nimport { normalizeToArray } from '../../util/model';\nimport { assert, hasOwn, indexOf, isArrayLike, keys } from 'zrender/lib/core/util';\nimport { cloneValue } from 'zrender/lib/animation/Animator';\nvar LEGACY_TRANSFORM_PROPS = {\n  position: ['x', 'y'],\n  scale: ['scaleX', 'scaleY'],\n  origin: ['originX', 'originY']\n};\n\nfunction setLegacyTransformProp(elOption, targetProps, legacyName) {\n  var legacyArr = elOption[legacyName];\n  var xyName = LEGACY_TRANSFORM_PROPS[legacyName];\n\n  if (legacyArr) {\n    targetProps[xyName[0]] = legacyArr[0];\n    targetProps[xyName[1]] = legacyArr[1];\n  }\n}\n\nfunction setTransformProp(elOption, allProps, name) {\n  if (elOption[name] != null) {\n    allProps[name] = elOption[name];\n  }\n}\n\nfunction setTransformPropToTransitionFrom(transitionFrom, name, fromTransformable // If provided, retrieve from the element.\n) {\n  if (fromTransformable) {\n    transitionFrom[name] = fromTransformable[name];\n  }\n} // See [STRATEGY_TRANSITION]\n\n\nexport function prepareShapeOrExtraTransitionFrom(mainAttr, fromEl, elOption, transFromProps, isInit) {\n  var attrOpt = elOption[mainAttr];\n\n  if (!attrOpt) {\n    return;\n  }\n\n  var elPropsInAttr = fromEl[mainAttr];\n  var transFromPropsInAttr;\n  var enterFrom = attrOpt.enterFrom;\n\n  if (isInit && enterFrom) {\n    !transFromPropsInAttr && (transFromPropsInAttr = transFromProps[mainAttr] = {});\n    var enterFromKeys = keys(enterFrom);\n\n    for (var i = 0; i < enterFromKeys.length; i++) {\n      // `enterFrom` props are not necessarily also declared in `shape`/`style`/...,\n      // for example, `opacity` can only declared in `enterFrom` but not in `style`.\n      var key = enterFromKeys[i]; // Do not clone, animator will perform that clone.\n\n      transFromPropsInAttr[key] = enterFrom[key];\n    }\n  }\n\n  if (!isInit && elPropsInAttr) {\n    if (attrOpt.transition) {\n      !transFromPropsInAttr && (transFromPropsInAttr = transFromProps[mainAttr] = {});\n      var transitionKeys = normalizeToArray(attrOpt.transition);\n\n      for (var i = 0; i < transitionKeys.length; i++) {\n        var key = transitionKeys[i];\n        var elVal = elPropsInAttr[key];\n\n        if (process.env.NODE_ENV !== 'production') {\n          checkNonStyleTansitionRefer(key, attrOpt[key], elVal);\n        } // Do not clone, see `checkNonStyleTansitionRefer`.\n\n\n        transFromPropsInAttr[key] = elVal;\n      }\n    } else if (indexOf(elOption.transition, mainAttr) >= 0) {\n      !transFromPropsInAttr && (transFromPropsInAttr = transFromProps[mainAttr] = {});\n      var elPropsInAttrKeys = keys(elPropsInAttr);\n\n      for (var i = 0; i < elPropsInAttrKeys.length; i++) {\n        var key = elPropsInAttrKeys[i];\n        var elVal = elPropsInAttr[key];\n\n        if (isNonStyleTransitionEnabled(attrOpt[key], elVal)) {\n          transFromPropsInAttr[key] = elVal;\n        }\n      }\n    }\n  }\n\n  var leaveTo = attrOpt.leaveTo;\n\n  if (leaveTo) {\n    var leaveToProps = getOrCreateLeaveToPropsFromEl(fromEl);\n    var leaveToPropsInAttr = leaveToProps[mainAttr] || (leaveToProps[mainAttr] = {});\n    var leaveToKeys = keys(leaveTo);\n\n    for (var i = 0; i < leaveToKeys.length; i++) {\n      var key = leaveToKeys[i];\n      leaveToPropsInAttr[key] = leaveTo[key];\n    }\n  }\n}\nexport function prepareShapeOrExtraAllPropsFinal(mainAttr, elOption, allProps) {\n  var attrOpt = elOption[mainAttr];\n\n  if (!attrOpt) {\n    return;\n  }\n\n  var allPropsInAttr = allProps[mainAttr] = {};\n  var keysInAttr = keys(attrOpt);\n\n  for (var i = 0; i < keysInAttr.length; i++) {\n    var key = keysInAttr[i]; // To avoid share one object with different element, and\n    // to avoid user modify the object inexpectedly, have to clone.\n\n    allPropsInAttr[key] = cloneValue(attrOpt[key]);\n  }\n} // See [STRATEGY_TRANSITION].\n\nexport function prepareTransformTransitionFrom(el, elOption, transFromProps, isInit) {\n  var enterFrom = elOption.enterFrom;\n\n  if (isInit && enterFrom) {\n    var enterFromKeys = keys(enterFrom);\n\n    for (var i = 0; i < enterFromKeys.length; i++) {\n      var key = enterFromKeys[i];\n\n      if (process.env.NODE_ENV !== 'production') {\n        checkTransformPropRefer(key, 'el.enterFrom');\n      } // Do not clone, animator will perform that clone.\n\n\n      transFromProps[key] = enterFrom[key];\n    }\n  }\n\n  if (!isInit) {\n    if (elOption.transition) {\n      var transitionKeys = normalizeToArray(elOption.transition);\n\n      for (var i = 0; i < transitionKeys.length; i++) {\n        var key = transitionKeys[i];\n\n        if (key === 'style' || key === 'shape' || key === 'extra') {\n          continue;\n        }\n\n        var elVal = el[key];\n\n        if (process.env.NODE_ENV !== 'production') {\n          checkTransformPropRefer(key, 'el.transition');\n          checkNonStyleTansitionRefer(key, elOption[key], elVal);\n        } // Do not clone, see `checkNonStyleTansitionRefer`.\n\n\n        transFromProps[key] = elVal;\n      }\n    } // This default transition see [STRATEGY_TRANSITION]\n    else {\n      setTransformPropToTransitionFrom(transFromProps, 'x', el);\n      setTransformPropToTransitionFrom(transFromProps, 'y', el);\n    }\n  }\n\n  var leaveTo = elOption.leaveTo;\n\n  if (leaveTo) {\n    var leaveToProps = getOrCreateLeaveToPropsFromEl(el);\n    var leaveToKeys = keys(leaveTo);\n\n    for (var i = 0; i < leaveToKeys.length; i++) {\n      var key = leaveToKeys[i];\n\n      if (process.env.NODE_ENV !== 'production') {\n        checkTransformPropRefer(key, 'el.leaveTo');\n      }\n\n      leaveToProps[key] = leaveTo[key];\n    }\n  }\n}\nexport function prepareTransformAllPropsFinal(el, elOption, allProps) {\n  setLegacyTransformProp(elOption, allProps, 'position');\n  setLegacyTransformProp(elOption, allProps, 'scale');\n  setLegacyTransformProp(elOption, allProps, 'origin');\n  setTransformProp(elOption, allProps, 'x');\n  setTransformProp(elOption, allProps, 'y');\n  setTransformProp(elOption, allProps, 'scaleX');\n  setTransformProp(elOption, allProps, 'scaleY');\n  setTransformProp(elOption, allProps, 'originX');\n  setTransformProp(elOption, allProps, 'originY');\n  setTransformProp(elOption, allProps, 'rotation');\n} // See [STRATEGY_TRANSITION].\n\nexport function prepareStyleTransitionFrom(fromEl, elOption, styleOpt, transFromProps, isInit) {\n  if (!styleOpt) {\n    return;\n  }\n\n  var fromElStyle = fromEl.style;\n  var transFromStyleProps;\n  var enterFrom = styleOpt.enterFrom;\n\n  if (isInit && enterFrom) {\n    var enterFromKeys = keys(enterFrom);\n    !transFromStyleProps && (transFromStyleProps = transFromProps.style = {});\n\n    for (var i = 0; i < enterFromKeys.length; i++) {\n      var key = enterFromKeys[i]; // Do not clone, animator will perform that clone.\n\n      transFromStyleProps[key] = enterFrom[key];\n    }\n  }\n\n  if (!isInit && fromElStyle) {\n    if (styleOpt.transition) {\n      var transitionKeys = normalizeToArray(styleOpt.transition);\n      !transFromStyleProps && (transFromStyleProps = transFromProps.style = {});\n\n      for (var i = 0; i < transitionKeys.length; i++) {\n        var key = transitionKeys[i];\n        var elVal = fromElStyle[key]; // Do not clone, see `checkNonStyleTansitionRefer`.\n\n        transFromStyleProps[key] = elVal;\n      }\n    } else if (fromEl.getAnimationStyleProps && indexOf(elOption.transition, 'style') >= 0) {\n      var animationProps = fromEl.getAnimationStyleProps();\n      var animationStyleProps = animationProps ? animationProps.style : null;\n\n      if (animationStyleProps) {\n        !transFromStyleProps && (transFromStyleProps = transFromProps.style = {});\n        var styleKeys = keys(styleOpt);\n\n        for (var i = 0; i < styleKeys.length; i++) {\n          var key = styleKeys[i];\n\n          if (animationStyleProps[key]) {\n            var elVal = fromElStyle[key];\n            transFromStyleProps[key] = elVal;\n          }\n        }\n      }\n    }\n  }\n\n  var leaveTo = styleOpt.leaveTo;\n\n  if (leaveTo) {\n    var leaveToKeys = keys(leaveTo);\n    var leaveToProps = getOrCreateLeaveToPropsFromEl(fromEl);\n    var leaveToStyleProps = leaveToProps.style || (leaveToProps.style = {});\n\n    for (var i = 0; i < leaveToKeys.length; i++) {\n      var key = leaveToKeys[i];\n      leaveToStyleProps[key] = leaveTo[key];\n    }\n  }\n}\nvar checkNonStyleTansitionRefer;\n\nif (process.env.NODE_ENV !== 'production') {\n  checkNonStyleTansitionRefer = function checkNonStyleTansitionRefer(propName, optVal, elVal) {\n    if (!isArrayLike(optVal)) {\n      assert(optVal != null && isFinite(optVal), 'Prop `' + propName + '` must refer to a finite number or ArrayLike for transition.');\n    } else {\n      // Try not to copy array for performance, but if user use the same object in different\n      // call of `renderItem`, it will casue animation transition fail.\n      assert(optVal !== elVal, 'Prop `' + propName + '` must use different Array object each time for transition.');\n    }\n  };\n}\n\nfunction isNonStyleTransitionEnabled(optVal, elVal) {\n  // The same as `checkNonStyleTansitionRefer`.\n  return !isArrayLike(optVal) ? optVal != null && isFinite(optVal) : optVal !== elVal;\n}\n\nvar checkTransformPropRefer;\n\nif (process.env.NODE_ENV !== 'production') {\n  checkTransformPropRefer = function checkTransformPropRefer(key, usedIn) {\n    assert(hasOwn(TRANSFORM_PROPS, key), 'Prop `' + key + '` is not a permitted in `' + usedIn + '`. ' + 'Only `' + keys(TRANSFORM_PROPS).join('`, `') + '` are permitted.');\n  };\n}\n\nfunction getOrCreateLeaveToPropsFromEl(el) {\n  var innerEl = customInnerStore(el);\n  return innerEl.leaveToProps || (innerEl.leaveToProps = {});\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { hasOwn, assert, isString, retrieve2, retrieve3, defaults, each, keys, bind, eqNaN, indexOf } from 'zrender/lib/core/util';\nimport * as graphicUtil from '../../util/graphic';\nimport { setDefaultStateProxy, enableHoverEmphasis } from '../../util/states';\nimport * as labelStyleHelper from '../../label/labelStyle';\nimport { getDefaultLabel } from '../helper/labelHelper';\nimport { getLayoutOnAxis } from '../../layout/barGrid';\nimport DataDiffer from '../../data/DataDiffer';\nimport ChartView from '../../view/Chart';\nimport { createClipPath } from '../helper/createClipPathFromCoordSys';\nimport prepareCartesian2d from '../../coord/cartesian/prepareCustom';\nimport prepareGeo from '../../coord/geo/prepareCustom';\nimport prepareSingleAxis from '../../coord/single/prepareCustom';\nimport preparePolar from '../../coord/polar/prepareCustom';\nimport prepareCalendar from '../../coord/calendar/prepareCustom';\nimport Displayable from 'zrender/lib/graphic/Displayable';\nimport { convertToEC4StyleForCustomSerise, isEC4CompatibleStyle, convertFromEC4CompatibleStyle, warnDeprecated } from '../../util/styleCompat';\nimport { warn, throwError } from '../../util/log';\nimport { createOrUpdatePatternFromDecal } from '../../util/decal';\nimport { TRANSFORM_PROPS, STYLE_VISUAL_TYPE, NON_STYLE_VISUAL_PROPS, customInnerStore } from './CustomSeries';\nimport { prepareShapeOrExtraAllPropsFinal, prepareShapeOrExtraTransitionFrom, prepareStyleTransitionFrom, prepareTransformAllPropsFinal, prepareTransformTransitionFrom } from './prepare';\nvar transformPropNamesStr = keys(TRANSFORM_PROPS).join(', ');\nvar EMPHASIS = 'emphasis';\nvar NORMAL = 'normal';\nvar BLUR = 'blur';\nvar SELECT = 'select';\nvar STATES = [NORMAL, EMPHASIS, BLUR, SELECT];\nvar PATH_ITEM_STYLE = {\n  normal: ['itemStyle'],\n  emphasis: [EMPHASIS, 'itemStyle'],\n  blur: [BLUR, 'itemStyle'],\n  select: [SELECT, 'itemStyle']\n};\nvar PATH_LABEL = {\n  normal: ['label'],\n  emphasis: [EMPHASIS, 'label'],\n  blur: [BLUR, 'label'],\n  select: [SELECT, 'label']\n}; // Use prefix to avoid index to be the same as el.name,\n// which will cause weird update animation.\n\nvar GROUP_DIFF_PREFIX = 'e\\0\\0';\nvar attachedTxInfoTmp = {\n  normal: {},\n  emphasis: {},\n  blur: {},\n  select: {}\n};\n/**\n * To reduce total package size of each coordinate systems, the modules `prepareCustom`\n * of each coordinate systems are not required by each coordinate systems directly, but\n * required by the module `custom`.\n *\n * prepareInfoForCustomSeries {Function}: optional\n *     @return {Object} {coordSys: {...}, api: {\n *         coord: function (data, clamp) {}, // return point in global.\n *         size: function (dataSize, dataItem) {} // return size of each axis in coordSys.\n *     }}\n */\n\nvar prepareCustoms = {\n  cartesian2d: prepareCartesian2d,\n  geo: prepareGeo,\n  singleAxis: prepareSingleAxis,\n  polar: preparePolar,\n  calendar: prepareCalendar\n};\n\nfunction isPath(el) {\n  return el instanceof graphicUtil.Path;\n}\n\nfunction isDisplayable(el) {\n  return el instanceof Displayable;\n}\n\nfunction copyElement(sourceEl, targetEl) {\n  targetEl.copyTransform(sourceEl);\n\n  if (isDisplayable(targetEl) && isDisplayable(sourceEl)) {\n    targetEl.setStyle(sourceEl.style);\n    targetEl.z = sourceEl.z;\n    targetEl.z2 = sourceEl.z2;\n    targetEl.zlevel = sourceEl.zlevel;\n    targetEl.invisible = sourceEl.invisible;\n    targetEl.ignore = sourceEl.ignore;\n\n    if (isPath(targetEl) && isPath(sourceEl)) {\n      targetEl.setShape(sourceEl.shape);\n    }\n  }\n}\n\nvar CustomChartView =\n/** @class */\nfunction (_super) {\n  __extends(CustomChartView, _super);\n\n  function CustomChartView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CustomChartView.type;\n    return _this;\n  }\n\n  CustomChartView.prototype.render = function (customSeries, ecModel, api, payload) {\n    var oldData = this._data;\n    var data = customSeries.getData();\n    var group = this.group;\n    var renderItem = makeRenderItem(customSeries, data, ecModel, api);\n\n    if (!oldData) {\n      // Previous render is incremental render or first render.\n      // Needs remove the incremental rendered elements.\n      group.removeAll();\n    }\n\n    data.diff(oldData).add(function (newIdx) {\n      createOrUpdateItem(api, null, newIdx, renderItem(newIdx, payload), customSeries, group, data);\n    }).remove(function (oldIdx) {\n      doRemoveEl(oldData.getItemGraphicEl(oldIdx), customSeries, group);\n    }).update(function (newIdx, oldIdx) {\n      var oldEl = oldData.getItemGraphicEl(oldIdx);\n      createOrUpdateItem(api, oldEl, newIdx, renderItem(newIdx, payload), customSeries, group, data);\n    }).execute(); // Do clipping\n\n    var clipPath = customSeries.get('clip', true) ? createClipPath(customSeries.coordinateSystem, false, customSeries) : null;\n\n    if (clipPath) {\n      group.setClipPath(clipPath);\n    } else {\n      group.removeClipPath();\n    }\n\n    this._data = data;\n  };\n\n  CustomChartView.prototype.incrementalPrepareRender = function (customSeries, ecModel, api) {\n    this.group.removeAll();\n    this._data = null;\n  };\n\n  CustomChartView.prototype.incrementalRender = function (params, customSeries, ecModel, api, payload) {\n    var data = customSeries.getData();\n    var renderItem = makeRenderItem(customSeries, data, ecModel, api);\n\n    function setIncrementalAndHoverLayer(el) {\n      if (!el.isGroup) {\n        el.incremental = true;\n        el.ensureState('emphasis').hoverLayer = true;\n      }\n    }\n\n    for (var idx = params.start; idx < params.end; idx++) {\n      var el = createOrUpdateItem(null, null, idx, renderItem(idx, payload), customSeries, this.group, data);\n      el && el.traverse(setIncrementalAndHoverLayer);\n    }\n  };\n\n  CustomChartView.prototype.filterForExposedEvent = function (eventType, query, targetEl, packedEvent) {\n    var elementName = query.element;\n\n    if (elementName == null || targetEl.name === elementName) {\n      return true;\n    } // Enable to give a name on a group made by `renderItem`, and listen\n    // events that triggerd by its descendents.\n\n\n    while ((targetEl = targetEl.__hostTarget || targetEl.parent) && targetEl !== this.group) {\n      if (targetEl.name === elementName) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  CustomChartView.type = 'custom';\n  return CustomChartView;\n}(ChartView);\n\nexport default CustomChartView;\n\nfunction createEl(elOption) {\n  var graphicType = elOption.type;\n  var el; // Those graphic elements are not shapes. They should not be\n  // overwritten by users, so do them first.\n\n  if (graphicType === 'path') {\n    var shape = elOption.shape; // Using pathRect brings convenience to users sacle svg path.\n\n    var pathRect = shape.width != null && shape.height != null ? {\n      x: shape.x || 0,\n      y: shape.y || 0,\n      width: shape.width,\n      height: shape.height\n    } : null;\n    var pathData = getPathData(shape); // Path is also used for icon, so layout 'center' by default.\n\n    el = graphicUtil.makePath(pathData, null, pathRect, shape.layout || 'center');\n    customInnerStore(el).customPathData = pathData;\n  } else if (graphicType === 'image') {\n    el = new graphicUtil.Image({});\n    customInnerStore(el).customImagePath = elOption.style.image;\n  } else if (graphicType === 'text') {\n    el = new graphicUtil.Text({}); // customInnerStore(el).customText = (elOption.style as TextStyleProps).text;\n  } else if (graphicType === 'group') {\n    el = new graphicUtil.Group();\n  } else if (graphicType === 'compoundPath') {\n    throw new Error('\"compoundPath\" is not supported yet.');\n  } else {\n    var Clz = graphicUtil.getShapeClass(graphicType);\n\n    if (!Clz) {\n      var errMsg = '';\n\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'graphic type \"' + graphicType + '\" can not be found.';\n      }\n\n      throwError(errMsg);\n    }\n\n    el = new Clz();\n  }\n\n  customInnerStore(el).customGraphicType = graphicType;\n  el.name = elOption.name; // Compat ec4: the default z2 lift is 1. If changing the number,\n  // some cases probably be broken: hierarchy layout along z, like circle packing,\n  // where emphasis only intending to modify color/border rather than lift z2.\n\n  el.z2EmphasisLift = 1;\n  el.z2SelectLift = 1;\n  return el;\n}\n\nfunction updateElNormal( // Can be null/undefined\napi, el, dataIndex, elOption, attachedTxInfo, seriesModel, isInit, isTextContent) {\n  var txCfgOpt = attachedTxInfo && attachedTxInfo.normal.cfg;\n\n  if (txCfgOpt) {\n    // PENDING: whether use user object directly rather than clone?\n    // TODO:5.0 textConfig transition animation?\n    el.setTextConfig(txCfgOpt);\n  } // Do some normalization on style.\n\n\n  var styleOpt = elOption && elOption.style;\n\n  if (styleOpt) {\n    if (el.type === 'text') {\n      var textOptionStyle = styleOpt; // Compatible with ec4: if `textFill` or `textStroke` exists use them.\n\n      hasOwn(textOptionStyle, 'textFill') && (textOptionStyle.fill = textOptionStyle.textFill);\n      hasOwn(textOptionStyle, 'textStroke') && (textOptionStyle.stroke = textOptionStyle.textStroke);\n    }\n\n    var decalPattern = void 0;\n    var decalObj = isPath(el) ? styleOpt.decal : null;\n\n    if (api && decalObj) {\n      decalObj.dirty = true;\n      decalPattern = createOrUpdatePatternFromDecal(decalObj, api);\n    } // Always overwrite in case user specify this prop.\n\n\n    styleOpt.__decalPattern = decalPattern;\n  } // Save the meta info for further morphing. Like apply on the sub morphing elements.\n\n\n  var store = customInnerStore(el);\n  store.userDuring = elOption.during;\n  var transFromProps = {};\n  var propsToSet = {};\n  prepareShapeOrExtraTransitionFrom('shape', el, elOption, transFromProps, isInit);\n  prepareShapeOrExtraAllPropsFinal('shape', elOption, propsToSet);\n  prepareTransformTransitionFrom(el, elOption, transFromProps, isInit);\n  prepareTransformAllPropsFinal(el, elOption, propsToSet);\n  prepareShapeOrExtraTransitionFrom('extra', el, elOption, transFromProps, isInit);\n  prepareShapeOrExtraAllPropsFinal('extra', elOption, propsToSet);\n  prepareStyleTransitionFrom(el, elOption, styleOpt, transFromProps, isInit);\n  propsToSet.style = styleOpt;\n  applyPropsDirectly(el, propsToSet);\n  applyPropsTransition(el, dataIndex, seriesModel, transFromProps, isInit);\n  applyMiscProps(el, elOption, isTextContent);\n  styleOpt ? el.dirty() : el.markRedraw();\n}\n\nfunction applyMiscProps(el, elOption, isTextContent) {\n  // Merge by default.\n  hasOwn(elOption, 'silent') && (el.silent = elOption.silent);\n  hasOwn(elOption, 'ignore') && (el.ignore = elOption.ignore);\n\n  if (isDisplayable(el)) {\n    hasOwn(elOption, 'invisible') && (el.invisible = elOption.invisible);\n  }\n\n  if (isPath(el)) {\n    hasOwn(elOption, 'autoBatch') && (el.autoBatch = elOption.autoBatch);\n  }\n\n  if (!isTextContent) {\n    // `elOption.info` enables user to mount some info on\n    // elements and use them in event handlers.\n    // Update them only when user specified, otherwise, remain.\n    hasOwn(elOption, 'info') && (customInnerStore(el).info = elOption.info);\n  }\n}\n\nfunction applyPropsDirectly(el, // Can be null/undefined\nallPropsFinal) {\n  var elDisplayable = el.isGroup ? null : el;\n  var styleOpt = allPropsFinal.style;\n\n  if (elDisplayable && styleOpt) {\n    // PENDING: here the input style object is used directly.\n    // Good for performance but bad for compatibility control.\n    elDisplayable.useStyle(styleOpt);\n    var decalPattern = styleOpt.__decalPattern;\n\n    if (decalPattern) {\n      elDisplayable.style.decal = decalPattern;\n    } // When style object changed, how to trade the existing animation?\n    // It is probably complicated and not needed to cover all the cases.\n    // But still need consider the case:\n    // (1) When using init animation on `style.opacity`, and before the animation\n    //     ended users triggers an update by mousewhel. At that time the init\n    //     animation should better be continued rather than terminated.\n    //     So after `useStyle` called, we should change the animation target manually\n    //     to continue the effect of the init animation.\n    // (2) PENDING: If the previous animation targeted at a `val1`, and currently we need\n    //     to update the value to `val2` and no animation declared, should be terminate\n    //     the previous animation or just modify the target of the animation?\n    //     Therotically That will happen not only on `style` but also on `shape` and\n    //     `transfrom` props. But we haven't handle this case at present yet.\n    // (3) PENDING: Is it proper to visit `animators` and `targetName`?\n\n\n    var animators = elDisplayable.animators;\n\n    for (var i = 0; i < animators.length; i++) {\n      var animator = animators[i]; // targetName is the \"topKey\".\n\n      if (animator.targetName === 'style') {\n        animator.changeTarget(elDisplayable.style);\n      }\n    }\n  }\n\n  if (allPropsFinal) {\n    // Not set style here.\n    allPropsFinal.style = null; // Set el to the final state firstly.\n\n    allPropsFinal && el.attr(allPropsFinal);\n    allPropsFinal.style = styleOpt;\n  }\n}\n\nfunction applyPropsTransition(el, dataIndex, seriesModel, // Can be null/undefined\ntransFromProps, isInit) {\n  if (transFromProps) {\n    // NOTE: Do not use `el.updateDuringAnimation` here becuase `el.updateDuringAnimation` will\n    // be called mutiple time in each animation frame. For example, if both \"transform\" props\n    // and shape props and style props changed, it will generate three animator and called\n    // one-by-one in each animation frame.\n    // We use the during in `animateTo/From` params.\n    var userDuring = customInnerStore(el).userDuring; // For simplicity, if during not specified, the previous during will not work any more.\n\n    var cfgDuringCall = userDuring ? bind(duringCall, {\n      el: el,\n      userDuring: userDuring\n    }) : null;\n    var cfg = {\n      dataIndex: dataIndex,\n      isFrom: true,\n      during: cfgDuringCall\n    };\n    isInit ? graphicUtil.initProps(el, transFromProps, seriesModel, cfg) : graphicUtil.updateProps(el, transFromProps, seriesModel, cfg);\n  }\n} // Use it to avoid it be exposed to user.\n\n\nvar tmpDuringScope = {};\nvar customDuringAPI = {\n  // Usually other props do not need to be changed in animation during.\n  setTransform: function setTransform(key, val) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(hasOwn(TRANSFORM_PROPS, key), 'Only ' + transformPropNamesStr + ' available in `setTransform`.');\n    }\n\n    tmpDuringScope.el[key] = val;\n    return this;\n  },\n  getTransform: function getTransform(key) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(hasOwn(TRANSFORM_PROPS, key), 'Only ' + transformPropNamesStr + ' available in `getTransform`.');\n    }\n\n    return tmpDuringScope.el[key];\n  },\n  setShape: function setShape(key, val) {\n    if (process.env.NODE_ENV !== 'production') {\n      assertNotReserved(key);\n    }\n\n    var shape = tmpDuringScope.el.shape || (tmpDuringScope.el.shape = {});\n    shape[key] = val;\n    tmpDuringScope.isShapeDirty = true;\n    return this;\n  },\n  getShape: function getShape(key) {\n    if (process.env.NODE_ENV !== 'production') {\n      assertNotReserved(key);\n    }\n\n    var shape = tmpDuringScope.el.shape;\n\n    if (shape) {\n      return shape[key];\n    }\n  },\n  setStyle: function setStyle(key, val) {\n    if (process.env.NODE_ENV !== 'production') {\n      assertNotReserved(key);\n    }\n\n    var style = tmpDuringScope.el.style;\n\n    if (style) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (eqNaN(val)) {\n          warn('style.' + key + ' must not be assigned with NaN.');\n        }\n      }\n\n      style[key] = val;\n      tmpDuringScope.isStyleDirty = true;\n    }\n\n    return this;\n  },\n  getStyle: function getStyle(key) {\n    if (process.env.NODE_ENV !== 'production') {\n      assertNotReserved(key);\n    }\n\n    var style = tmpDuringScope.el.style;\n\n    if (style) {\n      return style[key];\n    }\n  },\n  setExtra: function setExtra(key, val) {\n    if (process.env.NODE_ENV !== 'production') {\n      assertNotReserved(key);\n    }\n\n    var extra = tmpDuringScope.el.extra || (tmpDuringScope.el.extra = {});\n    extra[key] = val;\n    return this;\n  },\n  getExtra: function getExtra(key) {\n    if (process.env.NODE_ENV !== 'production') {\n      assertNotReserved(key);\n    }\n\n    var extra = tmpDuringScope.el.extra;\n\n    if (extra) {\n      return extra[key];\n    }\n  }\n};\n\nfunction assertNotReserved(key) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (key === 'transition' || key === 'enterFrom' || key === 'leaveTo') {\n      throw new Error('key must not be \"' + key + '\"');\n    }\n  }\n}\n\nfunction duringCall() {\n  // Do not provide \"percent\" until some requirements come.\n  // Because consider thies case:\n  // enterFrom: {x: 100, y: 30}, transition: 'x'.\n  // And enter duration is different from update duration.\n  // Thus it might be confused about the meaning of \"percent\" in during callback.\n  var scope = this;\n  var el = scope.el;\n\n  if (!el) {\n    return;\n  } // If el is remove from zr by reason like legend, during still need to called,\n  // becuase el will be added back to zr and the prop value should not be incorrect.\n\n\n  var latestUserDuring = customInnerStore(el).userDuring;\n  var scopeUserDuring = scope.userDuring; // Ensured a during is only called once in each animation frame.\n  // If a during is called multiple times in one frame, maybe some users' calulation logic\n  // might be wrong (not sure whether this usage exists).\n  // The case of a during might be called twice can be: by default there is a animator for\n  // 'x', 'y' when init. Before the init animation finished, call `setOption` to start\n  // another animators for 'style'/'shape'/'extra'.\n\n  if (latestUserDuring !== scopeUserDuring) {\n    // release\n    scope.el = scope.userDuring = null;\n    return;\n  }\n\n  tmpDuringScope.el = el;\n  tmpDuringScope.isShapeDirty = false;\n  tmpDuringScope.isStyleDirty = false; // Give no `this` to user in \"during\" calling.\n\n  scopeUserDuring(customDuringAPI);\n\n  if (tmpDuringScope.isShapeDirty && el.dirtyShape) {\n    el.dirtyShape();\n  }\n\n  if (tmpDuringScope.isStyleDirty && el.dirtyStyle) {\n    el.dirtyStyle();\n  } // markRedraw() will be called by default in during.\n  // FIXME `this.markRedraw();` directly ?\n  // FIXME: if in future meet the case that some prop will be both modified in `during` and `state`,\n  // consider the issue that the prop might be incorrect when return to \"normal\" state.\n\n}\n\nfunction updateElOnState(state, el, elStateOpt, styleOpt, attachedTxInfo, isRoot, isTextContent) {\n  var elDisplayable = el.isGroup ? null : el;\n  var txCfgOpt = attachedTxInfo && attachedTxInfo[state].cfg; // PENDING:5.0 support customize scale change and transition animation?\n\n  if (elDisplayable) {\n    // By default support auto lift color when hover whether `emphasis` specified.\n    var stateObj = elDisplayable.ensureState(state);\n\n    if (styleOpt === false) {\n      var existingEmphasisState = elDisplayable.getState(state);\n\n      if (existingEmphasisState) {\n        existingEmphasisState.style = null;\n      }\n    } else {\n      // style is needed to enable defaut emphasis.\n      stateObj.style = styleOpt || null;\n    } // If `elOption.styleEmphasis` or `elOption.emphasis.style` is `false`,\n    // remove hover style.\n    // If `elOption.textConfig` or `elOption.emphasis.textConfig` is null/undefined, it does not\n    // make sense. So for simplicity, we do not ditinguish `hasOwnProperty` and null/undefined.\n\n\n    if (txCfgOpt) {\n      stateObj.textConfig = txCfgOpt;\n    }\n\n    setDefaultStateProxy(elDisplayable);\n  }\n}\n\nfunction updateZ(el, elOption, seriesModel) {\n  // Group not support textContent and not support z yet.\n  if (el.isGroup) {\n    return;\n  }\n\n  var elDisplayable = el;\n  var currentZ = seriesModel.currentZ;\n  var currentZLevel = seriesModel.currentZLevel; // Always erase.\n\n  elDisplayable.z = currentZ;\n  elDisplayable.zlevel = currentZLevel; // z2 must not be null/undefined, otherwise sort error may occur.\n\n  var optZ2 = elOption.z2;\n  optZ2 != null && (elDisplayable.z2 = optZ2 || 0);\n\n  for (var i = 0; i < STATES.length; i++) {\n    updateZForEachState(elDisplayable, elOption, STATES[i]);\n  }\n}\n\nfunction updateZForEachState(elDisplayable, elOption, state) {\n  var isNormal = state === NORMAL;\n  var elStateOpt = isNormal ? elOption : retrieveStateOption(elOption, state);\n  var optZ2 = elStateOpt ? elStateOpt.z2 : null;\n  var stateObj;\n\n  if (optZ2 != null) {\n    // Do not `ensureState` until required.\n    stateObj = isNormal ? elDisplayable : elDisplayable.ensureState(state);\n    stateObj.z2 = optZ2 || 0;\n  }\n}\n\nfunction makeRenderItem(customSeries, data, ecModel, api) {\n  var renderItem = customSeries.get('renderItem');\n  var coordSys = customSeries.coordinateSystem;\n  var prepareResult = {};\n\n  if (coordSys) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(renderItem, 'series.render is required.');\n      assert(coordSys.prepareCustoms || prepareCustoms[coordSys.type], 'This coordSys does not support custom series.');\n    } // `coordSys.prepareCustoms` is used for external coord sys like bmap.\n\n\n    prepareResult = coordSys.prepareCustoms ? coordSys.prepareCustoms(coordSys) : prepareCustoms[coordSys.type](coordSys);\n  }\n\n  var userAPI = defaults({\n    getWidth: api.getWidth,\n    getHeight: api.getHeight,\n    getZr: api.getZr,\n    getDevicePixelRatio: api.getDevicePixelRatio,\n    value: value,\n    style: style,\n    ordinalRawValue: ordinalRawValue,\n    styleEmphasis: styleEmphasis,\n    visual: visual,\n    barLayout: barLayout,\n    currentSeriesIndices: currentSeriesIndices,\n    font: font\n  }, prepareResult.api || {});\n  var userParams = {\n    // The life cycle of context: current round of rendering.\n    // The global life cycle is probably not necessary, because\n    // user can store global status by themselves.\n    context: {},\n    seriesId: customSeries.id,\n    seriesName: customSeries.name,\n    seriesIndex: customSeries.seriesIndex,\n    coordSys: prepareResult.coordSys,\n    dataInsideLength: data.count(),\n    encode: wrapEncodeDef(customSeries.getData())\n  }; // If someday intending to refactor them to a class, should consider do not\n  // break change: currently these attribute member are encapsulated in a closure\n  // so that do not need to force user to call these method with a scope.\n  // Do not support call `api` asynchronously without dataIndexInside input.\n\n  var currDataIndexInside;\n  var currItemModel;\n  var currItemStyleModels = {};\n  var currLabelModels = {};\n  var seriesItemStyleModels = {};\n  var seriesLabelModels = {};\n\n  for (var i = 0; i < STATES.length; i++) {\n    var stateName = STATES[i];\n    seriesItemStyleModels[stateName] = customSeries.getModel(PATH_ITEM_STYLE[stateName]);\n    seriesLabelModels[stateName] = customSeries.getModel(PATH_LABEL[stateName]);\n  }\n\n  function getItemModel(dataIndexInside) {\n    return dataIndexInside === currDataIndexInside ? currItemModel || (currItemModel = data.getItemModel(dataIndexInside)) : data.getItemModel(dataIndexInside);\n  }\n\n  function getItemStyleModel(dataIndexInside, state) {\n    return !data.hasItemOption ? seriesItemStyleModels[state] : dataIndexInside === currDataIndexInside ? currItemStyleModels[state] || (currItemStyleModels[state] = getItemModel(dataIndexInside).getModel(PATH_ITEM_STYLE[state])) : getItemModel(dataIndexInside).getModel(PATH_ITEM_STYLE[state]);\n  }\n\n  function getLabelModel(dataIndexInside, state) {\n    return !data.hasItemOption ? seriesLabelModels[state] : dataIndexInside === currDataIndexInside ? currLabelModels[state] || (currLabelModels[state] = getItemModel(dataIndexInside).getModel(PATH_LABEL[state])) : getItemModel(dataIndexInside).getModel(PATH_LABEL[state]);\n  }\n\n  return function (dataIndexInside, payload) {\n    currDataIndexInside = dataIndexInside;\n    currItemModel = null;\n    currItemStyleModels = {};\n    currLabelModels = {};\n    return renderItem && renderItem(defaults({\n      dataIndexInside: dataIndexInside,\n      dataIndex: data.getRawIndex(dataIndexInside),\n      // Can be used for optimization when zoom or roam.\n      actionType: payload ? payload.type : null\n    }, userParams), userAPI);\n  };\n  /**\n   * @public\n   * @param dim by default 0.\n   * @param dataIndexInside by default `currDataIndexInside`.\n   */\n\n  function value(dim, dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    return data.getStore().get(data.getDimensionIndex(dim || 0), dataIndexInside);\n  }\n  /**\n   * @public\n   * @param dim by default 0.\n   * @param dataIndexInside by default `currDataIndexInside`.\n   */\n\n\n  function ordinalRawValue(dim, dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    dim = dim || 0;\n    var dimInfo = data.getDimensionInfo(dim);\n\n    if (!dimInfo) {\n      var dimIndex = data.getDimensionIndex(dim);\n      return dimIndex >= 0 ? data.getStore().get(dimIndex, dataIndexInside) : undefined;\n    }\n\n    var val = data.get(dimInfo.name, dataIndexInside);\n    var ordinalMeta = dimInfo && dimInfo.ordinalMeta;\n    return ordinalMeta ? ordinalMeta.categories[val] : val;\n  }\n  /**\n   * @deprecated The orgininal intention of `api.style` is enable to set itemStyle\n   * like other series. But it not necessary and not easy to give a strict definition\n   * of what it return. And since echarts5 it needs to be make compat work. So\n   * deprecates it since echarts5.\n   *\n   * By default, `visual` is applied to style (to support visualMap).\n   * `visual.color` is applied at `fill`. If user want apply visual.color on `stroke`,\n   * it can be implemented as:\n   * `api.style({stroke: api.visual('color'), fill: null})`;\n   *\n   * [Compat]: since ec5, RectText has been separated from its hosts el.\n   * so `api.style()` will only return the style from `itemStyle` but not handle `label`\n   * any more. But `series.label` config is never published in doc.\n   * We still compat it in `api.style()`. But not encourage to use it and will still not\n   * to pulish it to doc.\n   * @public\n   * @param dataIndexInside by default `currDataIndexInside`.\n   */\n\n\n  function style(userProps, dataIndexInside) {\n    if (process.env.NODE_ENV !== 'production') {\n      warnDeprecated('api.style', 'Please write literal style directly instead.');\n    }\n\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    var style = data.getItemVisual(dataIndexInside, 'style');\n    var visualColor = style && style.fill;\n    var opacity = style && style.opacity;\n    var itemStyle = getItemStyleModel(dataIndexInside, NORMAL).getItemStyle();\n    visualColor != null && (itemStyle.fill = visualColor);\n    opacity != null && (itemStyle.opacity = opacity);\n    var opt = {\n      inheritColor: isString(visualColor) ? visualColor : '#000'\n    };\n    var labelModel = getLabelModel(dataIndexInside, NORMAL); // Now that the feture of \"auto adjust text fill/stroke\" has been migrated to zrender\n    // since ec5, we should set `isAttached` as `false` here and make compat in\n    // `convertToEC4StyleForCustomSerise`.\n\n    var textStyle = labelStyleHelper.createTextStyle(labelModel, null, opt, false, true);\n    textStyle.text = labelModel.getShallow('show') ? retrieve2(customSeries.getFormattedLabel(dataIndexInside, NORMAL), getDefaultLabel(data, dataIndexInside)) : null;\n    var textConfig = labelStyleHelper.createTextConfig(labelModel, opt, false);\n    preFetchFromExtra(userProps, itemStyle);\n    itemStyle = convertToEC4StyleForCustomSerise(itemStyle, textStyle, textConfig);\n    userProps && applyUserPropsAfter(itemStyle, userProps);\n    itemStyle.legacy = true;\n    return itemStyle;\n  }\n  /**\n   * @deprecated The reason see `api.style()`\n   * @public\n   * @param dataIndexInside by default `currDataIndexInside`.\n   */\n\n\n  function styleEmphasis(userProps, dataIndexInside) {\n    if (process.env.NODE_ENV !== 'production') {\n      warnDeprecated('api.styleEmphasis', 'Please write literal style directly instead.');\n    }\n\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n    var itemStyle = getItemStyleModel(dataIndexInside, EMPHASIS).getItemStyle();\n    var labelModel = getLabelModel(dataIndexInside, EMPHASIS);\n    var textStyle = labelStyleHelper.createTextStyle(labelModel, null, null, true, true);\n    textStyle.text = labelModel.getShallow('show') ? retrieve3(customSeries.getFormattedLabel(dataIndexInside, EMPHASIS), customSeries.getFormattedLabel(dataIndexInside, NORMAL), getDefaultLabel(data, dataIndexInside)) : null;\n    var textConfig = labelStyleHelper.createTextConfig(labelModel, null, true);\n    preFetchFromExtra(userProps, itemStyle);\n    itemStyle = convertToEC4StyleForCustomSerise(itemStyle, textStyle, textConfig);\n    userProps && applyUserPropsAfter(itemStyle, userProps);\n    itemStyle.legacy = true;\n    return itemStyle;\n  }\n\n  function applyUserPropsAfter(itemStyle, extra) {\n    for (var key in extra) {\n      if (hasOwn(extra, key)) {\n        itemStyle[key] = extra[key];\n      }\n    }\n  }\n\n  function preFetchFromExtra(extra, itemStyle) {\n    // A trick to retrieve those props firstly, which are used to\n    // apply auto inside fill/stroke in `convertToEC4StyleForCustomSerise`.\n    // (It's not reasonable but only for a degree of compat)\n    if (extra) {\n      extra.textFill && (itemStyle.textFill = extra.textFill);\n      extra.textPosition && (itemStyle.textPosition = extra.textPosition);\n    }\n  }\n  /**\n   * @public\n   * @param dataIndexInside by default `currDataIndexInside`.\n   */\n\n\n  function visual(visualType, dataIndexInside) {\n    dataIndexInside == null && (dataIndexInside = currDataIndexInside);\n\n    if (hasOwn(STYLE_VISUAL_TYPE, visualType)) {\n      var style_1 = data.getItemVisual(dataIndexInside, 'style');\n      return style_1 ? style_1[STYLE_VISUAL_TYPE[visualType]] : null;\n    } // Only support these visuals. Other visual might be inner tricky\n    // for performance (like `style`), do not expose to users.\n\n\n    if (hasOwn(NON_STYLE_VISUAL_PROPS, visualType)) {\n      return data.getItemVisual(dataIndexInside, visualType);\n    }\n  }\n  /**\n   * @public\n   * @return If not support, return undefined.\n   */\n\n\n  function barLayout(opt) {\n    if (coordSys.type === 'cartesian2d') {\n      var baseAxis = coordSys.getBaseAxis();\n      return getLayoutOnAxis(defaults({\n        axis: baseAxis\n      }, opt));\n    }\n  }\n  /**\n   * @public\n   */\n\n\n  function currentSeriesIndices() {\n    return ecModel.getCurrentSeriesIndices();\n  }\n  /**\n   * @public\n   * @return font string\n   */\n\n\n  function font(opt) {\n    return labelStyleHelper.getFont(opt, ecModel);\n  }\n}\n\nfunction wrapEncodeDef(data) {\n  var encodeDef = {};\n  each(data.dimensions, function (dimName) {\n    var dimInfo = data.getDimensionInfo(dimName);\n\n    if (!dimInfo.isExtraCoord) {\n      var coordDim = dimInfo.coordDim;\n      var dataDims = encodeDef[coordDim] = encodeDef[coordDim] || [];\n      dataDims[dimInfo.coordDimIndex] = data.getDimensionIndex(dimName);\n    }\n  });\n  return encodeDef;\n}\n\nfunction createOrUpdateItem(api, existsEl, dataIndex, elOption, seriesModel, group, data) {\n  // [Rule]\n  // If `renderItem` returns `null`/`undefined`/`false`, remove the previous el if existing.\n  //     (It seems that violate the \"merge\" principle, but most of users probably intuitively\n  //     regard \"return;\" as \"show nothing element whatever\", so make a exception to meet the\n  //     most cases.)\n  // The rule or \"merge\" see [STRATEGY_MERGE].\n  // If `elOption` is `null`/`undefined`/`false` (when `renderItem` returns nothing).\n  if (!elOption) {\n    group.remove(existsEl);\n    return;\n  }\n\n  var el = doCreateOrUpdateEl(api, existsEl, dataIndex, elOption, seriesModel, group, true);\n  el && data.setItemGraphicEl(dataIndex, el);\n  el && enableHoverEmphasis(el, elOption.focus, elOption.blurScope);\n  return el;\n}\n\nfunction doCreateOrUpdateEl(api, existsEl, dataIndex, elOption, seriesModel, group, isRoot) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(elOption, 'should not have an null/undefined element setting');\n  }\n\n  var toBeReplacedIdx = -1;\n  var oldEl = existsEl;\n\n  if (existsEl && doesElNeedRecreate(existsEl, elOption, seriesModel) // || (\n  //     // PENDING: even in one-to-one mapping case, if el is marked as morph,\n  //     // do not sure whether the el will be mapped to another el with different\n  //     // hierarchy in Group tree. So always recreate el rather than reuse the el.\n  //     morphHelper && morphHelper.isOneToOneFrom(el)\n  // )\n  ) {\n    // Should keep at the original index, otherwise \"merge by index\" will be incorrect.\n    toBeReplacedIdx = indexOf(group.childrenRef(), existsEl);\n    existsEl = null;\n  }\n\n  var isInit = !existsEl;\n  var el = existsEl;\n\n  if (!el) {\n    el = createEl(elOption);\n\n    if (oldEl) {\n      copyElement(oldEl, el);\n    }\n  } else {\n    // FIMXE:NEXT unified clearState?\n    // If in some case the performance issue arised, consider\n    // do not clearState but update cached normal state directly.\n    el.clearStates();\n  } // Need to set morph: false explictly to disable automatically morphing.\n\n\n  if (elOption.morph === false) {\n    el.disableMorphing = true;\n  } else if (el.disableMorphing) {\n    el.disableMorphing = false;\n  }\n\n  attachedTxInfoTmp.normal.cfg = attachedTxInfoTmp.normal.conOpt = attachedTxInfoTmp.emphasis.cfg = attachedTxInfoTmp.emphasis.conOpt = attachedTxInfoTmp.blur.cfg = attachedTxInfoTmp.blur.conOpt = attachedTxInfoTmp.select.cfg = attachedTxInfoTmp.select.conOpt = null;\n  attachedTxInfoTmp.isLegacy = false;\n  doCreateOrUpdateAttachedTx(el, dataIndex, elOption, seriesModel, isInit, attachedTxInfoTmp);\n  doCreateOrUpdateClipPath(el, dataIndex, elOption, seriesModel, isInit);\n  updateElNormal(api, el, dataIndex, elOption, attachedTxInfoTmp, seriesModel, isInit, false);\n\n  for (var i = 0; i < STATES.length; i++) {\n    var stateName = STATES[i];\n\n    if (stateName !== NORMAL) {\n      var otherStateOpt = retrieveStateOption(elOption, stateName);\n      var otherStyleOpt = retrieveStyleOptionOnState(elOption, otherStateOpt, stateName);\n      updateElOnState(stateName, el, otherStateOpt, otherStyleOpt, attachedTxInfoTmp, isRoot, false);\n    }\n  }\n\n  updateZ(el, elOption, seriesModel);\n\n  if (elOption.type === 'group') {\n    mergeChildren(api, el, dataIndex, elOption, seriesModel);\n  }\n\n  if (toBeReplacedIdx >= 0) {\n    group.replaceAt(el, toBeReplacedIdx);\n  } else {\n    group.add(el);\n  }\n\n  return el;\n} // `el` must not be null/undefined.\n\n\nfunction doesElNeedRecreate(el, elOption, seriesModel) {\n  var elInner = customInnerStore(el);\n  var elOptionType = elOption.type;\n  var elOptionShape = elOption.shape;\n  var elOptionStyle = elOption.style;\n  return (// Always create new if universal transition is enabled.\n    // Because we do transition after render. It needs to know what old element is. Replacement will loose it.\n    seriesModel.isUniversalTransitionEnabled() // If `elOptionType` is `null`, follow the merge principle.\n    || elOptionType != null && elOptionType !== elInner.customGraphicType || elOptionType === 'path' && hasOwnPathData(elOptionShape) && getPathData(elOptionShape) !== elInner.customPathData || elOptionType === 'image' && hasOwn(elOptionStyle, 'image') && elOptionStyle.image !== elInner.customImagePath // // FIXME test and remove this restriction?\n    // || (elOptionType === 'text'\n    //     && hasOwn(elOptionStyle, 'text')\n    //     && (elOptionStyle as TextStyleProps).text !== elInner.customText\n    // )\n\n  );\n}\n\nfunction doCreateOrUpdateClipPath(el, dataIndex, elOption, seriesModel, isInit) {\n  // Based on the \"merge\" principle, if no clipPath provided,\n  // do nothing. The exists clip will be totally removed only if\n  // `el.clipPath` is `false`. Otherwise it will be merged/replaced.\n  var clipPathOpt = elOption.clipPath;\n\n  if (clipPathOpt === false) {\n    if (el && el.getClipPath()) {\n      el.removeClipPath();\n    }\n  } else if (clipPathOpt) {\n    var clipPath = el.getClipPath();\n\n    if (clipPath && doesElNeedRecreate(clipPath, clipPathOpt, seriesModel)) {\n      clipPath = null;\n    }\n\n    if (!clipPath) {\n      clipPath = createEl(clipPathOpt);\n\n      if (process.env.NODE_ENV !== 'production') {\n        assert(isPath(clipPath), 'Only any type of `path` can be used in `clipPath`, rather than ' + clipPath.type + '.');\n      }\n\n      el.setClipPath(clipPath);\n    }\n\n    updateElNormal(null, clipPath, dataIndex, clipPathOpt, null, seriesModel, isInit, false);\n  } // If not define `clipPath` in option, do nothing unnecessary.\n\n}\n\nfunction doCreateOrUpdateAttachedTx(el, dataIndex, elOption, seriesModel, isInit, attachedTxInfo) {\n  // group do not support textContent temporarily untill necessary.\n  if (el.isGroup) {\n    return;\n  } // Normal must be called before emphasis, for `isLegacy` detection.\n\n\n  processTxInfo(elOption, null, attachedTxInfo);\n  processTxInfo(elOption, EMPHASIS, attachedTxInfo); // If `elOption.textConfig` or `elOption.textContent` is null/undefined, it does not make sence.\n  // So for simplicity, if \"elOption hasOwnProperty of them but be null/undefined\", we do not\n  // trade them as set to null to el.\n  // Especially:\n  // `elOption.textContent: false` means remove textContent.\n  // `elOption.textContent.emphasis.style: false` means remove the style from emphasis state.\n\n  var txConOptNormal = attachedTxInfo.normal.conOpt;\n  var txConOptEmphasis = attachedTxInfo.emphasis.conOpt;\n  var txConOptBlur = attachedTxInfo.blur.conOpt;\n  var txConOptSelect = attachedTxInfo.select.conOpt;\n\n  if (txConOptNormal != null || txConOptEmphasis != null || txConOptSelect != null || txConOptBlur != null) {\n    var textContent = el.getTextContent();\n\n    if (txConOptNormal === false) {\n      textContent && el.removeTextContent();\n    } else {\n      txConOptNormal = attachedTxInfo.normal.conOpt = txConOptNormal || {\n        type: 'text'\n      };\n\n      if (!textContent) {\n        textContent = createEl(txConOptNormal);\n        el.setTextContent(textContent);\n      } else {\n        // If in some case the performance issue arised, consider\n        // do not clearState but update cached normal state directly.\n        textContent.clearStates();\n      }\n\n      updateElNormal(null, textContent, dataIndex, txConOptNormal, null, seriesModel, isInit, true);\n      var txConStlOptNormal = txConOptNormal && txConOptNormal.style;\n\n      for (var i = 0; i < STATES.length; i++) {\n        var stateName = STATES[i];\n\n        if (stateName !== NORMAL) {\n          var txConOptOtherState = attachedTxInfo[stateName].conOpt;\n          updateElOnState(stateName, textContent, txConOptOtherState, retrieveStyleOptionOnState(txConOptNormal, txConOptOtherState, stateName), null, false, true);\n        }\n      }\n\n      txConStlOptNormal ? textContent.dirty() : textContent.markRedraw();\n    }\n  }\n}\n\nfunction processTxInfo(elOption, state, attachedTxInfo) {\n  var stateOpt = !state ? elOption : retrieveStateOption(elOption, state);\n  var styleOpt = !state ? elOption.style : retrieveStyleOptionOnState(elOption, stateOpt, EMPHASIS);\n  var elType = elOption.type;\n  var txCfg = stateOpt ? stateOpt.textConfig : null;\n  var txConOptNormal = elOption.textContent;\n  var txConOpt = !txConOptNormal ? null : !state ? txConOptNormal : retrieveStateOption(txConOptNormal, state);\n\n  if (styleOpt && ( // Because emphasis style has little info to detect legacy,\n  // if normal is legacy, emphasis is trade as legacy.\n  attachedTxInfo.isLegacy || isEC4CompatibleStyle(styleOpt, elType, !!txCfg, !!txConOpt))) {\n    attachedTxInfo.isLegacy = true;\n    var convertResult = convertFromEC4CompatibleStyle(styleOpt, elType, !state); // Explicitly specified `textConfig` and `textContent` has higher priority than\n    // the ones generated by legacy style. Otherwise if users use them and `api.style`\n    // at the same time, they not both work and hardly to known why.\n\n    if (!txCfg && convertResult.textConfig) {\n      txCfg = convertResult.textConfig;\n    }\n\n    if (!txConOpt && convertResult.textContent) {\n      txConOpt = convertResult.textContent;\n    }\n  }\n\n  if (!state && txConOpt) {\n    var txConOptNormal_1 = txConOpt; // `textContent: {type: 'text'}`, the \"type\" is easy to be missing. So we tolerate it.\n\n    !txConOptNormal_1.type && (txConOptNormal_1.type = 'text');\n\n    if (process.env.NODE_ENV !== 'production') {\n      // Do not tolerate incorret type for forward compat.\n      assert(txConOptNormal_1.type === 'text', 'textContent.type must be \"text\"');\n    }\n  }\n\n  var info = !state ? attachedTxInfo.normal : attachedTxInfo[state];\n  info.cfg = txCfg;\n  info.conOpt = txConOpt;\n}\n\nfunction retrieveStateOption(elOption, state) {\n  return !state ? elOption : elOption ? elOption[state] : null;\n}\n\nfunction retrieveStyleOptionOnState(stateOptionNormal, stateOption, state) {\n  var style = stateOption && stateOption.style;\n\n  if (style == null && state === EMPHASIS && stateOptionNormal) {\n    style = stateOptionNormal.styleEmphasis;\n  }\n\n  return style;\n} // Usage:\n// (1) By default, `elOption.$mergeChildren` is `'byIndex'`, which indicates that\n//     the existing children will not be removed, and enables the feature that\n//     update some of the props of some of the children simply by construct\n//     the returned children of `renderItem` like:\n//     `var children = group.children = []; children[3] = {opacity: 0.5};`\n// (2) If `elOption.$mergeChildren` is `'byName'`, add/update/remove children\n//     by child.name. But that might be lower performance.\n// (3) If `elOption.$mergeChildren` is `false`, the existing children will be\n//     replaced totally.\n// (4) If `!elOption.children`, following the \"merge\" principle, nothing will happen.\n//\n// For implementation simpleness, do not provide a direct way to remove sinlge\n// child (otherwise the total indicies of the children array have to be modified).\n// User can remove a single child by set its `ignore` as `true`.\n\n\nfunction mergeChildren(api, el, dataIndex, elOption, seriesModel) {\n  var newChildren = elOption.children;\n  var newLen = newChildren ? newChildren.length : 0;\n  var mergeChildren = elOption.$mergeChildren; // `diffChildrenByName` has been deprecated.\n\n  var byName = mergeChildren === 'byName' || elOption.diffChildrenByName;\n  var notMerge = mergeChildren === false; // For better performance on roam update, only enter if necessary.\n\n  if (!newLen && !byName && !notMerge) {\n    return;\n  }\n\n  if (byName) {\n    diffGroupChildren({\n      api: api,\n      oldChildren: el.children() || [],\n      newChildren: newChildren || [],\n      dataIndex: dataIndex,\n      seriesModel: seriesModel,\n      group: el\n    });\n    return;\n  }\n\n  notMerge && el.removeAll(); // Mapping children of a group simply by index, which\n  // might be better performance.\n\n  var index = 0;\n\n  for (; index < newLen; index++) {\n    newChildren[index] && doCreateOrUpdateEl(api, el.childAt(index), dataIndex, newChildren[index], seriesModel, el, false);\n  }\n\n  for (var i = el.childCount() - 1; i >= index; i--) {\n    // Do not supprot leave elements that are not mentioned in the latest\n    // `renderItem` return. Otherwise users may not have a clear and simple\n    // concept that how to contorl all of the elements.\n    doRemoveEl(el.childAt(i), seriesModel, el);\n  }\n}\n\nfunction diffGroupChildren(context) {\n  new DataDiffer(context.oldChildren, context.newChildren, getKey, getKey, context).add(processAddUpdate).update(processAddUpdate).remove(processRemove).execute();\n}\n\nfunction getKey(item, idx) {\n  var name = item && item.name;\n  return name != null ? name : GROUP_DIFF_PREFIX + idx;\n}\n\nfunction processAddUpdate(newIndex, oldIndex) {\n  var context = this.context;\n  var childOption = newIndex != null ? context.newChildren[newIndex] : null;\n  var child = oldIndex != null ? context.oldChildren[oldIndex] : null;\n  doCreateOrUpdateEl(context.api, child, context.dataIndex, childOption, context.seriesModel, context.group, false);\n}\n\nfunction processRemove(oldIndex) {\n  var context = this.context;\n  var child = context.oldChildren[oldIndex];\n  doRemoveEl(child, context.seriesModel, context.group);\n}\n\nfunction doRemoveEl(el, seriesModel, group) {\n  if (el) {\n    var leaveToProps = customInnerStore(el).leaveToProps;\n    leaveToProps ? graphicUtil.updateProps(el, leaveToProps, seriesModel, {\n      cb: function cb() {\n        group.remove(el);\n      }\n    }) : group.remove(el);\n  }\n}\n/**\n * @return SVG Path data.\n */\n\n\nfunction getPathData(shape) {\n  // \"d\" follows the SVG convention.\n  return shape && (shape.pathData || shape.d);\n}\n\nfunction hasOwnPathData(shape) {\n  return shape && (hasOwn(shape, 'pathData') || hasOwn(shape, 'd'));\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport default function calendarPrepareCustom(coordSys) {\n  var rect = coordSys.getRect();\n  var rangeInfo = coordSys.getRangeInfo();\n  return {\n    coordSys: {\n      type: 'calendar',\n      x: rect.x,\n      y: rect.y,\n      width: rect.width,\n      height: rect.height,\n      cellWidth: coordSys.getCellWidth(),\n      cellHeight: coordSys.getCellHeight(),\n      rangeInfo: {\n        start: rangeInfo.start,\n        end: rangeInfo.end,\n        weeks: rangeInfo.weeks,\n        dayCount: rangeInfo.allDay\n      }\n    },\n    api: {\n      coord: function coord(data, clamp) {\n        return coordSys.dataToPoint(data, clamp);\n      }\n    }\n  };\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport BaseAxisPointer from './BaseAxisPointer';\nimport * as graphic from '../../util/graphic';\nimport * as viewHelper from './viewHelper';\nimport * as matrix from 'zrender/lib/core/matrix';\nimport AxisBuilder from '../axis/AxisBuilder';\n\nvar PolarAxisPointer =\n/** @class */\nfunction (_super) {\n  __extends(PolarAxisPointer, _super);\n\n  function PolarAxisPointer() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\n   * @override\n   */\n\n\n  PolarAxisPointer.prototype.makeElOption = function (elOption, value, axisModel, axisPointerModel, api) {\n    var axis = axisModel.axis;\n\n    if (axis.dim === 'angle') {\n      this.animationThreshold = Math.PI / 18;\n    }\n\n    var polar = axis.polar;\n    var otherAxis = polar.getOtherAxis(axis);\n    var otherExtent = otherAxis.getExtent();\n    var coordValue = axis.dataToCoord(value);\n    var axisPointerType = axisPointerModel.get('type');\n\n    if (axisPointerType && axisPointerType !== 'none') {\n      var elStyle = viewHelper.buildElStyle(axisPointerModel);\n      var pointerOption = pointerShapeBuilder[axisPointerType](axis, polar, coordValue, otherExtent);\n      pointerOption.style = elStyle;\n      elOption.graphicKey = pointerOption.type;\n      elOption.pointer = pointerOption;\n    }\n\n    var labelMargin = axisPointerModel.get(['label', 'margin']);\n    var labelPos = getLabelPosition(value, axisModel, axisPointerModel, polar, labelMargin);\n    viewHelper.buildLabelElOption(elOption, axisModel, axisPointerModel, api, labelPos);\n  };\n\n  return PolarAxisPointer;\n}(BaseAxisPointer);\n\n;\n\nfunction getLabelPosition(value, axisModel, axisPointerModel, polar, labelMargin) {\n  var axis = axisModel.axis;\n  var coord = axis.dataToCoord(value);\n  var axisAngle = polar.getAngleAxis().getExtent()[0];\n  axisAngle = axisAngle / 180 * Math.PI;\n  var radiusExtent = polar.getRadiusAxis().getExtent();\n  var position;\n  var align;\n  var verticalAlign;\n\n  if (axis.dim === 'radius') {\n    var transform = matrix.create();\n    matrix.rotate(transform, transform, axisAngle);\n    matrix.translate(transform, transform, [polar.cx, polar.cy]);\n    position = graphic.applyTransform([coord, -labelMargin], transform);\n    var labelRotation = axisModel.getModel('axisLabel').get('rotate') || 0; // @ts-ignore\n\n    var labelLayout = AxisBuilder.innerTextLayout(axisAngle, labelRotation * Math.PI / 180, -1);\n    align = labelLayout.textAlign;\n    verticalAlign = labelLayout.textVerticalAlign;\n  } else {\n    // angle axis\n    var r = radiusExtent[1];\n    position = polar.coordToPoint([r + labelMargin, coord]);\n    var cx = polar.cx;\n    var cy = polar.cy;\n    align = Math.abs(position[0] - cx) / r < 0.3 ? 'center' : position[0] > cx ? 'left' : 'right';\n    verticalAlign = Math.abs(position[1] - cy) / r < 0.3 ? 'middle' : position[1] > cy ? 'top' : 'bottom';\n  }\n\n  return {\n    position: position,\n    align: align,\n    verticalAlign: verticalAlign\n  };\n}\n\nvar pointerShapeBuilder = {\n  line: function line(axis, polar, coordValue, otherExtent) {\n    return axis.dim === 'angle' ? {\n      type: 'Line',\n      shape: viewHelper.makeLineShape(polar.coordToPoint([otherExtent[0], coordValue]), polar.coordToPoint([otherExtent[1], coordValue]))\n    } : {\n      type: 'Circle',\n      shape: {\n        cx: polar.cx,\n        cy: polar.cy,\n        r: coordValue\n      }\n    };\n  },\n  shadow: function shadow(axis, polar, coordValue, otherExtent) {\n    var bandWidth = Math.max(1, axis.getBandWidth());\n    var radian = Math.PI / 180;\n    return axis.dim === 'angle' ? {\n      type: 'Sector',\n      shape: viewHelper.makeSectorShape(polar.cx, polar.cy, otherExtent[0], otherExtent[1], // In ECharts y is negative if angle is positive\n      (-coordValue - bandWidth / 2) * radian, (-coordValue + bandWidth / 2) * radian)\n    } : {\n      type: 'Sector',\n      shape: viewHelper.makeSectorShape(polar.cx, polar.cy, coordValue - bandWidth / 2, coordValue + bandWidth / 2, 0, Math.PI * 2)\n    };\n  }\n};\nexport default PolarAxisPointer;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component';\n\nvar PolarModel =\n/** @class */\nfunction (_super) {\n  __extends(PolarModel, _super);\n\n  function PolarModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = PolarModel.type;\n    return _this;\n  }\n\n  PolarModel.prototype.findAxisModel = function (axisType) {\n    var foundAxisModel;\n    var ecModel = this.ecModel;\n    ecModel.eachComponent(axisType, function (axisModel) {\n      if (axisModel.getCoordSysModel() === this) {\n        foundAxisModel = axisModel;\n      }\n    }, this);\n    return foundAxisModel;\n  };\n\n  PolarModel.type = 'polar';\n  PolarModel.dependencies = ['radiusAxis', 'angleAxis'];\n  PolarModel.defaultOption = {\n    zlevel: 0,\n    z: 0,\n    center: ['50%', '50%'],\n    radius: '80%'\n  };\n  return PolarModel;\n}(ComponentModel);\n\nexport default PolarModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport ComponentModel from '../../model/Component';\nimport { AxisModelCommonMixin } from '../axisModelCommonMixin';\nimport { SINGLE_REFERRING } from '../../util/model';\n\nvar PolarAxisModel =\n/** @class */\nfunction (_super) {\n  __extends(PolarAxisModel, _super);\n\n  function PolarAxisModel() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  PolarAxisModel.prototype.getCoordSysModel = function () {\n    return this.getReferringComponents('polar', SINGLE_REFERRING).models[0];\n  };\n\n  PolarAxisModel.type = 'polarAxis';\n  return PolarAxisModel;\n}(ComponentModel);\n\nzrUtil.mixin(PolarAxisModel, AxisModelCommonMixin);\nexport { PolarAxisModel };\n\nvar AngleAxisModel =\n/** @class */\nfunction (_super) {\n  __extends(AngleAxisModel, _super);\n\n  function AngleAxisModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = AngleAxisModel.type;\n    return _this;\n  }\n\n  AngleAxisModel.type = 'angleAxis';\n  return AngleAxisModel;\n}(PolarAxisModel);\n\nexport { AngleAxisModel };\n\nvar RadiusAxisModel =\n/** @class */\nfunction (_super) {\n  __extends(RadiusAxisModel, _super);\n\n  function RadiusAxisModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = RadiusAxisModel.type;\n    return _this;\n  }\n\n  RadiusAxisModel.type = 'radiusAxis';\n  return RadiusAxisModel;\n}(PolarAxisModel);\n\nexport { RadiusAxisModel };","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Axis from '../Axis';\n\nvar RadiusAxis =\n/** @class */\nfunction (_super) {\n  __extends(RadiusAxis, _super);\n\n  function RadiusAxis(scale, radiusExtent) {\n    return _super.call(this, 'radius', scale, radiusExtent) || this;\n  }\n\n  RadiusAxis.prototype.pointToData = function (point, clamp) {\n    return this.polar.pointToData(point, clamp)[this.dim === 'radius' ? 0 : 1];\n  };\n\n  return RadiusAxis;\n}(Axis);\n\nRadiusAxis.prototype.dataToRadius = Axis.prototype.dataToCoord;\nRadiusAxis.prototype.radiusToData = Axis.prototype.coordToData;\nexport default RadiusAxis;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as textContain from 'zrender/lib/contain/text';\nimport Axis from '../Axis';\nimport { makeInner } from '../../util/model';\nvar inner = makeInner();\n\nvar AngleAxis =\n/** @class */\nfunction (_super) {\n  __extends(AngleAxis, _super);\n\n  function AngleAxis(scale, angleExtent) {\n    return _super.call(this, 'angle', scale, angleExtent || [0, 360]) || this;\n  }\n\n  AngleAxis.prototype.pointToData = function (point, clamp) {\n    return this.polar.pointToData(point, clamp)[this.dim === 'radius' ? 0 : 1];\n  };\n  /**\n   * Only be called in category axis.\n   * Angle axis uses text height to decide interval\n   *\n   * @override\n   * @return {number} Auto interval for cateogry axis tick and label\n   */\n\n\n  AngleAxis.prototype.calculateCategoryInterval = function () {\n    var axis = this;\n    var labelModel = axis.getLabelModel();\n    var ordinalScale = axis.scale;\n    var ordinalExtent = ordinalScale.getExtent(); // Providing this method is for optimization:\n    // avoid generating a long array by `getTicks`\n    // in large category data case.\n\n    var tickCount = ordinalScale.count();\n\n    if (ordinalExtent[1] - ordinalExtent[0] < 1) {\n      return 0;\n    }\n\n    var tickValue = ordinalExtent[0];\n    var unitSpan = axis.dataToCoord(tickValue + 1) - axis.dataToCoord(tickValue);\n    var unitH = Math.abs(unitSpan); // Not precise, just use height as text width\n    // and each distance from axis line yet.\n\n    var rect = textContain.getBoundingRect(tickValue == null ? '' : tickValue + '', labelModel.getFont(), 'center', 'top');\n    var maxH = Math.max(rect.height, 7);\n    var dh = maxH / unitH; // 0/0 is NaN, 1/0 is Infinity.\n\n    isNaN(dh) && (dh = Infinity);\n    var interval = Math.max(0, Math.floor(dh));\n    var cache = inner(axis.model);\n    var lastAutoInterval = cache.lastAutoInterval;\n    var lastTickCount = cache.lastTickCount; // Use cache to keep interval stable while moving zoom window,\n    // otherwise the calculated interval might jitter when the zoom\n    // window size is close to the interval-changing size.\n\n    if (lastAutoInterval != null && lastTickCount != null && Math.abs(lastAutoInterval - interval) <= 1 && Math.abs(lastTickCount - tickCount) <= 1 // Always choose the bigger one, otherwise the critical\n    // point is not the same when zooming in or zooming out.\n    && lastAutoInterval > interval) {\n      interval = lastAutoInterval;\n    } // Only update cache if cache not used, otherwise the\n    // changing of interval is too insensitive.\n    else {\n      cache.lastTickCount = tickCount;\n      cache.lastAutoInterval = interval;\n    }\n\n    return interval;\n  };\n\n  return AngleAxis;\n}(Axis);\n\nAngleAxis.prototype.dataToAngle = Axis.prototype.dataToCoord;\nAngleAxis.prototype.angleToData = Axis.prototype.coordToData;\nexport default AngleAxis;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport RadiusAxis from './RadiusAxis';\nimport AngleAxis from './AngleAxis';\nexport var polarDimensions = ['radius', 'angle'];\n\nvar Polar =\n/** @class */\nfunction () {\n  function Polar(name) {\n    this.dimensions = polarDimensions;\n    this.type = 'polar';\n    /**\n     * x of polar center\n     */\n\n    this.cx = 0;\n    /**\n     * y of polar center\n     */\n\n    this.cy = 0;\n    this._radiusAxis = new RadiusAxis();\n    this._angleAxis = new AngleAxis();\n    this.axisPointerEnabled = true;\n    this.name = name || '';\n    this._radiusAxis.polar = this._angleAxis.polar = this;\n  }\n  /**\n   * If contain coord\n   */\n\n\n  Polar.prototype.containPoint = function (point) {\n    var coord = this.pointToCoord(point);\n    return this._radiusAxis.contain(coord[0]) && this._angleAxis.contain(coord[1]);\n  };\n  /**\n   * If contain data\n   */\n\n\n  Polar.prototype.containData = function (data) {\n    return this._radiusAxis.containData(data[0]) && this._angleAxis.containData(data[1]);\n  };\n\n  Polar.prototype.getAxis = function (dim) {\n    var key = '_' + dim + 'Axis';\n    return this[key];\n  };\n\n  Polar.prototype.getAxes = function () {\n    return [this._radiusAxis, this._angleAxis];\n  };\n  /**\n   * Get axes by type of scale\n   */\n\n\n  Polar.prototype.getAxesByScale = function (scaleType) {\n    var axes = [];\n    var angleAxis = this._angleAxis;\n    var radiusAxis = this._radiusAxis;\n    angleAxis.scale.type === scaleType && axes.push(angleAxis);\n    radiusAxis.scale.type === scaleType && axes.push(radiusAxis);\n    return axes;\n  };\n\n  Polar.prototype.getAngleAxis = function () {\n    return this._angleAxis;\n  };\n\n  Polar.prototype.getRadiusAxis = function () {\n    return this._radiusAxis;\n  };\n\n  Polar.prototype.getOtherAxis = function (axis) {\n    var angleAxis = this._angleAxis;\n    return axis === angleAxis ? this._radiusAxis : angleAxis;\n  };\n  /**\n   * Base axis will be used on stacking.\n   *\n   */\n\n\n  Polar.prototype.getBaseAxis = function () {\n    return this.getAxesByScale('ordinal')[0] || this.getAxesByScale('time')[0] || this.getAngleAxis();\n  };\n\n  Polar.prototype.getTooltipAxes = function (dim) {\n    var baseAxis = dim != null && dim !== 'auto' ? this.getAxis(dim) : this.getBaseAxis();\n    return {\n      baseAxes: [baseAxis],\n      otherAxes: [this.getOtherAxis(baseAxis)]\n    };\n  };\n  /**\n   * Convert a single data item to (x, y) point.\n   * Parameter data is an array which the first element is radius and the second is angle\n   */\n\n\n  Polar.prototype.dataToPoint = function (data, clamp) {\n    return this.coordToPoint([this._radiusAxis.dataToRadius(data[0], clamp), this._angleAxis.dataToAngle(data[1], clamp)]);\n  };\n  /**\n   * Convert a (x, y) point to data\n   */\n\n\n  Polar.prototype.pointToData = function (point, clamp) {\n    var coord = this.pointToCoord(point);\n    return [this._radiusAxis.radiusToData(coord[0], clamp), this._angleAxis.angleToData(coord[1], clamp)];\n  };\n  /**\n   * Convert a (x, y) point to (radius, angle) coord\n   */\n\n\n  Polar.prototype.pointToCoord = function (point) {\n    var dx = point[0] - this.cx;\n    var dy = point[1] - this.cy;\n    var angleAxis = this.getAngleAxis();\n    var extent = angleAxis.getExtent();\n    var minAngle = Math.min(extent[0], extent[1]);\n    var maxAngle = Math.max(extent[0], extent[1]); // Fix fixed extent in polarCreator\n    // FIXME\n\n    angleAxis.inverse ? minAngle = maxAngle - 360 : maxAngle = minAngle + 360;\n    var radius = Math.sqrt(dx * dx + dy * dy);\n    dx /= radius;\n    dy /= radius;\n    var radian = Math.atan2(-dy, dx) / Math.PI * 180; // move to angleExtent\n\n    var dir = radian < minAngle ? 1 : -1;\n\n    while (radian < minAngle || radian > maxAngle) {\n      radian += dir * 360;\n    }\n\n    return [radius, radian];\n  };\n  /**\n   * Convert a (radius, angle) coord to (x, y) point\n   */\n\n\n  Polar.prototype.coordToPoint = function (coord) {\n    var radius = coord[0];\n    var radian = coord[1] / 180 * Math.PI;\n    var x = Math.cos(radian) * radius + this.cx; // Inverse the y\n\n    var y = -Math.sin(radian) * radius + this.cy;\n    return [x, y];\n  };\n  /**\n   * Get ring area of cartesian.\n   * Area will have a contain function to determine if a point is in the coordinate system.\n   */\n\n\n  Polar.prototype.getArea = function () {\n    var angleAxis = this.getAngleAxis();\n    var radiusAxis = this.getRadiusAxis();\n    var radiusExtent = radiusAxis.getExtent().slice();\n    radiusExtent[0] > radiusExtent[1] && radiusExtent.reverse();\n    var angleExtent = angleAxis.getExtent();\n    var RADIAN = Math.PI / 180;\n    return {\n      cx: this.cx,\n      cy: this.cy,\n      r0: radiusExtent[0],\n      r: radiusExtent[1],\n      startAngle: -angleExtent[0] * RADIAN,\n      endAngle: -angleExtent[1] * RADIAN,\n      clockwise: angleAxis.inverse,\n      contain: function contain(x, y) {\n        // It's a ring shape.\n        // Start angle and end angle don't matter\n        var dx = x - this.cx;\n        var dy = y - this.cy;\n        var d2 = dx * dx + dy * dy;\n        var r = this.r;\n        var r0 = this.r0;\n        return d2 <= r * r && d2 >= r0 * r0;\n      }\n    };\n  };\n\n  Polar.prototype.convertToPixel = function (ecModel, finder, value) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? this.dataToPoint(value) : null;\n  };\n\n  Polar.prototype.convertFromPixel = function (ecModel, finder, pixel) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? this.pointToData(pixel) : null;\n  };\n\n  return Polar;\n}();\n\nfunction getCoordSys(finder) {\n  var seriesModel = finder.seriesModel;\n  var polarModel = finder.polarModel;\n  return polarModel && polarModel.coordinateSystem || seriesModel && seriesModel.coordinateSystem;\n}\n\nexport default Polar;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// TODO Axis scale\nimport * as zrUtil from 'zrender/lib/core/util';\nimport Polar, { polarDimensions } from './Polar';\nimport { parsePercent } from '../../util/number';\nimport { createScaleByModel, niceScaleExtent, getDataDimensionsOnAxis } from '../../coord/axisHelper';\nimport { SINGLE_REFERRING } from '../../util/model';\n/**\n * Resize method bound to the polar\n */\n\nfunction resizePolar(polar, polarModel, api) {\n  var center = polarModel.get('center');\n  var width = api.getWidth();\n  var height = api.getHeight();\n  polar.cx = parsePercent(center[0], width);\n  polar.cy = parsePercent(center[1], height);\n  var radiusAxis = polar.getRadiusAxis();\n  var size = Math.min(width, height) / 2;\n  var radius = polarModel.get('radius');\n\n  if (radius == null) {\n    radius = [0, '100%'];\n  } else if (!zrUtil.isArray(radius)) {\n    // r0 = 0\n    radius = [0, radius];\n  }\n\n  var parsedRadius = [parsePercent(radius[0], size), parsePercent(radius[1], size)];\n  radiusAxis.inverse ? radiusAxis.setExtent(parsedRadius[1], parsedRadius[0]) : radiusAxis.setExtent(parsedRadius[0], parsedRadius[1]);\n}\n/**\n * Update polar\n */\n\n\nfunction updatePolarScale(ecModel, api) {\n  var polar = this;\n  var angleAxis = polar.getAngleAxis();\n  var radiusAxis = polar.getRadiusAxis(); // Reset scale\n\n  angleAxis.scale.setExtent(Infinity, -Infinity);\n  radiusAxis.scale.setExtent(Infinity, -Infinity);\n  ecModel.eachSeries(function (seriesModel) {\n    if (seriesModel.coordinateSystem === polar) {\n      var data_1 = seriesModel.getData();\n      zrUtil.each(getDataDimensionsOnAxis(data_1, 'radius'), function (dim) {\n        radiusAxis.scale.unionExtentFromData(data_1, dim);\n      });\n      zrUtil.each(getDataDimensionsOnAxis(data_1, 'angle'), function (dim) {\n        angleAxis.scale.unionExtentFromData(data_1, dim);\n      });\n    }\n  });\n  niceScaleExtent(angleAxis.scale, angleAxis.model);\n  niceScaleExtent(radiusAxis.scale, radiusAxis.model); // Fix extent of category angle axis\n\n  if (angleAxis.type === 'category' && !angleAxis.onBand) {\n    var extent = angleAxis.getExtent();\n    var diff = 360 / angleAxis.scale.count();\n    angleAxis.inverse ? extent[1] += diff : extent[1] -= diff;\n    angleAxis.setExtent(extent[0], extent[1]);\n  }\n}\n\nfunction isAngleAxisModel(axisModel) {\n  return axisModel.mainType === 'angleAxis';\n}\n/**\n * Set common axis properties\n */\n\n\nfunction setAxis(axis, axisModel) {\n  axis.type = axisModel.get('type');\n  axis.scale = createScaleByModel(axisModel);\n  axis.onBand = axisModel.get('boundaryGap') && axis.type === 'category';\n  axis.inverse = axisModel.get('inverse');\n\n  if (isAngleAxisModel(axisModel)) {\n    axis.inverse = axis.inverse !== axisModel.get('clockwise');\n    var startAngle = axisModel.get('startAngle');\n    axis.setExtent(startAngle, startAngle + (axis.inverse ? -360 : 360));\n  } // Inject axis instance\n\n\n  axisModel.axis = axis;\n  axis.model = axisModel;\n}\n\nvar polarCreator = {\n  dimensions: polarDimensions,\n  create: function create(ecModel, api) {\n    var polarList = [];\n    ecModel.eachComponent('polar', function (polarModel, idx) {\n      var polar = new Polar(idx + ''); // Inject resize and update method\n\n      polar.update = updatePolarScale;\n      var radiusAxis = polar.getRadiusAxis();\n      var angleAxis = polar.getAngleAxis();\n      var radiusAxisModel = polarModel.findAxisModel('radiusAxis');\n      var angleAxisModel = polarModel.findAxisModel('angleAxis');\n      setAxis(radiusAxis, radiusAxisModel);\n      setAxis(angleAxis, angleAxisModel);\n      resizePolar(polar, polarModel, api);\n      polarList.push(polar);\n      polarModel.coordinateSystem = polar;\n      polar.model = polarModel;\n    }); // Inject coordinateSystem to series\n\n    ecModel.eachSeries(function (seriesModel) {\n      if (seriesModel.get('coordinateSystem') === 'polar') {\n        var polarModel = seriesModel.getReferringComponents('polar', SINGLE_REFERRING).models[0];\n\n        if (process.env.NODE_ENV !== 'production') {\n          if (!polarModel) {\n            throw new Error('Polar \"' + zrUtil.retrieve(seriesModel.get('polarIndex'), seriesModel.get('polarId'), 0) + '\" not found');\n          }\n        }\n\n        seriesModel.coordinateSystem = polarModel.coordinateSystem;\n      }\n    });\n    return polarList;\n  }\n};\nexport default polarCreator;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as graphic from '../../util/graphic';\nimport { createTextStyle } from '../../label/labelStyle';\nimport Model from '../../model/Model';\nimport AxisView from './AxisView';\nimport AxisBuilder from './AxisBuilder';\nimport { getECData } from '../../util/innerStore';\nvar elementList = ['axisLine', 'axisLabel', 'axisTick', 'minorTick', 'splitLine', 'minorSplitLine', 'splitArea'];\n\nfunction getAxisLineShape(polar, rExtent, angle) {\n  rExtent[1] > rExtent[0] && (rExtent = rExtent.slice().reverse());\n  var start = polar.coordToPoint([rExtent[0], angle]);\n  var end = polar.coordToPoint([rExtent[1], angle]);\n  return {\n    x1: start[0],\n    y1: start[1],\n    x2: end[0],\n    y2: end[1]\n  };\n}\n\nfunction getRadiusIdx(polar) {\n  var radiusAxis = polar.getRadiusAxis();\n  return radiusAxis.inverse ? 0 : 1;\n} // Remove the last tick which will overlap the first tick\n\n\nfunction fixAngleOverlap(list) {\n  var firstItem = list[0];\n  var lastItem = list[list.length - 1];\n\n  if (firstItem && lastItem && Math.abs(Math.abs(firstItem.coord - lastItem.coord) - 360) < 1e-4) {\n    list.pop();\n  }\n}\n\nvar AngleAxisView =\n/** @class */\nfunction (_super) {\n  __extends(AngleAxisView, _super);\n\n  function AngleAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = AngleAxisView.type;\n    _this.axisPointerClass = 'PolarAxisPointer';\n    return _this;\n  }\n\n  AngleAxisView.prototype.render = function (angleAxisModel, ecModel) {\n    this.group.removeAll();\n\n    if (!angleAxisModel.get('show')) {\n      return;\n    }\n\n    var angleAxis = angleAxisModel.axis;\n    var polar = angleAxis.polar;\n    var radiusExtent = polar.getRadiusAxis().getExtent();\n    var ticksAngles = angleAxis.getTicksCoords();\n    var minorTickAngles = angleAxis.getMinorTicksCoords();\n    var labels = zrUtil.map(angleAxis.getViewLabels(), function (labelItem) {\n      labelItem = zrUtil.clone(labelItem);\n      var scale = angleAxis.scale;\n      var tickValue = scale.type === 'ordinal' ? scale.getRawOrdinalNumber(labelItem.tickValue) : labelItem.tickValue;\n      labelItem.coord = angleAxis.dataToCoord(tickValue);\n      return labelItem;\n    });\n    fixAngleOverlap(labels);\n    fixAngleOverlap(ticksAngles);\n    zrUtil.each(elementList, function (name) {\n      if (angleAxisModel.get([name, 'show']) && (!angleAxis.scale.isBlank() || name === 'axisLine')) {\n        angelAxisElementsBuilders[name](this.group, angleAxisModel, polar, ticksAngles, minorTickAngles, radiusExtent, labels);\n      }\n    }, this);\n  };\n\n  AngleAxisView.type = 'angleAxis';\n  return AngleAxisView;\n}(AxisView);\n\nvar angelAxisElementsBuilders = {\n  axisLine: function axisLine(group, angleAxisModel, polar, ticksAngles, minorTickAngles, radiusExtent) {\n    var lineStyleModel = angleAxisModel.getModel(['axisLine', 'lineStyle']); // extent id of the axis radius (r0 and r)\n\n    var rId = getRadiusIdx(polar);\n    var r0Id = rId ? 0 : 1;\n    var shape;\n\n    if (radiusExtent[r0Id] === 0) {\n      shape = new graphic.Circle({\n        shape: {\n          cx: polar.cx,\n          cy: polar.cy,\n          r: radiusExtent[rId]\n        },\n        style: lineStyleModel.getLineStyle(),\n        z2: 1,\n        silent: true\n      });\n    } else {\n      shape = new graphic.Ring({\n        shape: {\n          cx: polar.cx,\n          cy: polar.cy,\n          r: radiusExtent[rId],\n          r0: radiusExtent[r0Id]\n        },\n        style: lineStyleModel.getLineStyle(),\n        z2: 1,\n        silent: true\n      });\n    }\n\n    shape.style.fill = null;\n    group.add(shape);\n  },\n  axisTick: function axisTick(group, angleAxisModel, polar, ticksAngles, minorTickAngles, radiusExtent) {\n    var tickModel = angleAxisModel.getModel('axisTick');\n    var tickLen = (tickModel.get('inside') ? -1 : 1) * tickModel.get('length');\n    var radius = radiusExtent[getRadiusIdx(polar)];\n    var lines = zrUtil.map(ticksAngles, function (tickAngleItem) {\n      return new graphic.Line({\n        shape: getAxisLineShape(polar, [radius, radius + tickLen], tickAngleItem.coord)\n      });\n    });\n    group.add(graphic.mergePath(lines, {\n      style: zrUtil.defaults(tickModel.getModel('lineStyle').getLineStyle(), {\n        stroke: angleAxisModel.get(['axisLine', 'lineStyle', 'color'])\n      })\n    }));\n  },\n  minorTick: function minorTick(group, angleAxisModel, polar, tickAngles, minorTickAngles, radiusExtent) {\n    if (!minorTickAngles.length) {\n      return;\n    }\n\n    var tickModel = angleAxisModel.getModel('axisTick');\n    var minorTickModel = angleAxisModel.getModel('minorTick');\n    var tickLen = (tickModel.get('inside') ? -1 : 1) * minorTickModel.get('length');\n    var radius = radiusExtent[getRadiusIdx(polar)];\n    var lines = [];\n\n    for (var i = 0; i < minorTickAngles.length; i++) {\n      for (var k = 0; k < minorTickAngles[i].length; k++) {\n        lines.push(new graphic.Line({\n          shape: getAxisLineShape(polar, [radius, radius + tickLen], minorTickAngles[i][k].coord)\n        }));\n      }\n    }\n\n    group.add(graphic.mergePath(lines, {\n      style: zrUtil.defaults(minorTickModel.getModel('lineStyle').getLineStyle(), zrUtil.defaults(tickModel.getLineStyle(), {\n        stroke: angleAxisModel.get(['axisLine', 'lineStyle', 'color'])\n      }))\n    }));\n  },\n  axisLabel: function axisLabel(group, angleAxisModel, polar, ticksAngles, minorTickAngles, radiusExtent, labels) {\n    var rawCategoryData = angleAxisModel.getCategories(true);\n    var commonLabelModel = angleAxisModel.getModel('axisLabel');\n    var labelMargin = commonLabelModel.get('margin');\n    var triggerEvent = angleAxisModel.get('triggerEvent'); // Use length of ticksAngles because it may remove the last tick to avoid overlapping\n\n    zrUtil.each(labels, function (labelItem, idx) {\n      var labelModel = commonLabelModel;\n      var tickValue = labelItem.tickValue;\n      var r = radiusExtent[getRadiusIdx(polar)];\n      var p = polar.coordToPoint([r + labelMargin, labelItem.coord]);\n      var cx = polar.cx;\n      var cy = polar.cy;\n      var labelTextAlign = Math.abs(p[0] - cx) / r < 0.3 ? 'center' : p[0] > cx ? 'left' : 'right';\n      var labelTextVerticalAlign = Math.abs(p[1] - cy) / r < 0.3 ? 'middle' : p[1] > cy ? 'top' : 'bottom';\n\n      if (rawCategoryData && rawCategoryData[tickValue]) {\n        var rawCategoryItem = rawCategoryData[tickValue];\n\n        if (zrUtil.isObject(rawCategoryItem) && rawCategoryItem.textStyle) {\n          labelModel = new Model(rawCategoryItem.textStyle, commonLabelModel, commonLabelModel.ecModel);\n        }\n      }\n\n      var textEl = new graphic.Text({\n        silent: AxisBuilder.isLabelSilent(angleAxisModel),\n        style: createTextStyle(labelModel, {\n          x: p[0],\n          y: p[1],\n          fill: labelModel.getTextColor() || angleAxisModel.get(['axisLine', 'lineStyle', 'color']),\n          text: labelItem.formattedLabel,\n          align: labelTextAlign,\n          verticalAlign: labelTextVerticalAlign\n        })\n      });\n      group.add(textEl); // Pack data for mouse event\n\n      if (triggerEvent) {\n        var eventData = AxisBuilder.makeAxisEventDataBase(angleAxisModel);\n        eventData.targetType = 'axisLabel';\n        eventData.value = labelItem.rawLabel;\n        getECData(textEl).eventData = eventData;\n      }\n    }, this);\n  },\n  splitLine: function splitLine(group, angleAxisModel, polar, ticksAngles, minorTickAngles, radiusExtent) {\n    var splitLineModel = angleAxisModel.getModel('splitLine');\n    var lineStyleModel = splitLineModel.getModel('lineStyle');\n    var lineColors = lineStyleModel.get('color');\n    var lineCount = 0;\n    lineColors = lineColors instanceof Array ? lineColors : [lineColors];\n    var splitLines = [];\n\n    for (var i = 0; i < ticksAngles.length; i++) {\n      var colorIndex = lineCount++ % lineColors.length;\n      splitLines[colorIndex] = splitLines[colorIndex] || [];\n      splitLines[colorIndex].push(new graphic.Line({\n        shape: getAxisLineShape(polar, radiusExtent, ticksAngles[i].coord)\n      }));\n    } // Simple optimization\n    // Batching the lines if color are the same\n\n\n    for (var i = 0; i < splitLines.length; i++) {\n      group.add(graphic.mergePath(splitLines[i], {\n        style: zrUtil.defaults({\n          stroke: lineColors[i % lineColors.length]\n        }, lineStyleModel.getLineStyle()),\n        silent: true,\n        z: angleAxisModel.get('z')\n      }));\n    }\n  },\n  minorSplitLine: function minorSplitLine(group, angleAxisModel, polar, ticksAngles, minorTickAngles, radiusExtent) {\n    if (!minorTickAngles.length) {\n      return;\n    }\n\n    var minorSplitLineModel = angleAxisModel.getModel('minorSplitLine');\n    var lineStyleModel = minorSplitLineModel.getModel('lineStyle');\n    var lines = [];\n\n    for (var i = 0; i < minorTickAngles.length; i++) {\n      for (var k = 0; k < minorTickAngles[i].length; k++) {\n        lines.push(new graphic.Line({\n          shape: getAxisLineShape(polar, radiusExtent, minorTickAngles[i][k].coord)\n        }));\n      }\n    }\n\n    group.add(graphic.mergePath(lines, {\n      style: lineStyleModel.getLineStyle(),\n      silent: true,\n      z: angleAxisModel.get('z')\n    }));\n  },\n  splitArea: function splitArea(group, angleAxisModel, polar, ticksAngles, minorTickAngles, radiusExtent) {\n    if (!ticksAngles.length) {\n      return;\n    }\n\n    var splitAreaModel = angleAxisModel.getModel('splitArea');\n    var areaStyleModel = splitAreaModel.getModel('areaStyle');\n    var areaColors = areaStyleModel.get('color');\n    var lineCount = 0;\n    areaColors = areaColors instanceof Array ? areaColors : [areaColors];\n    var splitAreas = [];\n    var RADIAN = Math.PI / 180;\n    var prevAngle = -ticksAngles[0].coord * RADIAN;\n    var r0 = Math.min(radiusExtent[0], radiusExtent[1]);\n    var r1 = Math.max(radiusExtent[0], radiusExtent[1]);\n    var clockwise = angleAxisModel.get('clockwise');\n\n    for (var i = 1, len = ticksAngles.length; i <= len; i++) {\n      var coord = i === len ? ticksAngles[0].coord : ticksAngles[i].coord;\n      var colorIndex = lineCount++ % areaColors.length;\n      splitAreas[colorIndex] = splitAreas[colorIndex] || [];\n      splitAreas[colorIndex].push(new graphic.Sector({\n        shape: {\n          cx: polar.cx,\n          cy: polar.cy,\n          r0: r0,\n          r: r1,\n          startAngle: prevAngle,\n          endAngle: -coord * RADIAN,\n          clockwise: clockwise\n        },\n        silent: true\n      }));\n      prevAngle = -coord * RADIAN;\n    } // Simple optimization\n    // Batching the lines if color are the same\n\n\n    for (var i = 0; i < splitAreas.length; i++) {\n      group.add(graphic.mergePath(splitAreas[i], {\n        style: zrUtil.defaults({\n          fill: areaColors[i % areaColors.length]\n        }, areaStyleModel.getAreaStyle()),\n        silent: true\n      }));\n    }\n  }\n};\nexport default AngleAxisView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as graphic from '../../util/graphic';\nimport AxisBuilder from './AxisBuilder';\nimport AxisView from './AxisView';\nvar axisBuilderAttrs = ['axisLine', 'axisTickLabel', 'axisName'];\nvar selfBuilderAttrs = ['splitLine', 'splitArea', 'minorSplitLine'];\n\nvar RadiusAxisView =\n/** @class */\nfunction (_super) {\n  __extends(RadiusAxisView, _super);\n\n  function RadiusAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = RadiusAxisView.type;\n    _this.axisPointerClass = 'PolarAxisPointer';\n    return _this;\n  }\n\n  RadiusAxisView.prototype.render = function (radiusAxisModel, ecModel) {\n    this.group.removeAll();\n\n    if (!radiusAxisModel.get('show')) {\n      return;\n    }\n\n    var oldAxisGroup = this._axisGroup;\n    var newAxisGroup = this._axisGroup = new graphic.Group();\n    this.group.add(newAxisGroup);\n    var radiusAxis = radiusAxisModel.axis;\n    var polar = radiusAxis.polar;\n    var angleAxis = polar.getAngleAxis();\n    var ticksCoords = radiusAxis.getTicksCoords();\n    var minorTicksCoords = radiusAxis.getMinorTicksCoords();\n    var axisAngle = angleAxis.getExtent()[0];\n    var radiusExtent = radiusAxis.getExtent();\n    var layout = layoutAxis(polar, radiusAxisModel, axisAngle);\n    var axisBuilder = new AxisBuilder(radiusAxisModel, layout);\n    zrUtil.each(axisBuilderAttrs, axisBuilder.add, axisBuilder);\n    newAxisGroup.add(axisBuilder.getGroup());\n    graphic.groupTransition(oldAxisGroup, newAxisGroup, radiusAxisModel);\n    zrUtil.each(selfBuilderAttrs, function (name) {\n      if (radiusAxisModel.get([name, 'show']) && !radiusAxis.scale.isBlank()) {\n        axisElementBuilders[name](this.group, radiusAxisModel, polar, axisAngle, radiusExtent, ticksCoords, minorTicksCoords);\n      }\n    }, this);\n  };\n\n  RadiusAxisView.type = 'radiusAxis';\n  return RadiusAxisView;\n}(AxisView);\n\nvar axisElementBuilders = {\n  splitLine: function splitLine(group, radiusAxisModel, polar, axisAngle, radiusExtent, ticksCoords) {\n    var splitLineModel = radiusAxisModel.getModel('splitLine');\n    var lineStyleModel = splitLineModel.getModel('lineStyle');\n    var lineColors = lineStyleModel.get('color');\n    var lineCount = 0;\n    lineColors = lineColors instanceof Array ? lineColors : [lineColors];\n    var splitLines = [];\n\n    for (var i = 0; i < ticksCoords.length; i++) {\n      var colorIndex = lineCount++ % lineColors.length;\n      splitLines[colorIndex] = splitLines[colorIndex] || [];\n      splitLines[colorIndex].push(new graphic.Circle({\n        shape: {\n          cx: polar.cx,\n          cy: polar.cy,\n          r: ticksCoords[i].coord\n        }\n      }));\n    } // Simple optimization\n    // Batching the lines if color are the same\n\n\n    for (var i = 0; i < splitLines.length; i++) {\n      group.add(graphic.mergePath(splitLines[i], {\n        style: zrUtil.defaults({\n          stroke: lineColors[i % lineColors.length],\n          fill: null\n        }, lineStyleModel.getLineStyle()),\n        silent: true\n      }));\n    }\n  },\n  minorSplitLine: function minorSplitLine(group, radiusAxisModel, polar, axisAngle, radiusExtent, ticksCoords, minorTicksCoords) {\n    if (!minorTicksCoords.length) {\n      return;\n    }\n\n    var minorSplitLineModel = radiusAxisModel.getModel('minorSplitLine');\n    var lineStyleModel = minorSplitLineModel.getModel('lineStyle');\n    var lines = [];\n\n    for (var i = 0; i < minorTicksCoords.length; i++) {\n      for (var k = 0; k < minorTicksCoords[i].length; k++) {\n        lines.push(new graphic.Circle({\n          shape: {\n            cx: polar.cx,\n            cy: polar.cy,\n            r: minorTicksCoords[i][k].coord\n          }\n        }));\n      }\n    }\n\n    group.add(graphic.mergePath(lines, {\n      style: zrUtil.defaults({\n        fill: null\n      }, lineStyleModel.getLineStyle()),\n      silent: true\n    }));\n  },\n  splitArea: function splitArea(group, radiusAxisModel, polar, axisAngle, radiusExtent, ticksCoords) {\n    if (!ticksCoords.length) {\n      return;\n    }\n\n    var splitAreaModel = radiusAxisModel.getModel('splitArea');\n    var areaStyleModel = splitAreaModel.getModel('areaStyle');\n    var areaColors = areaStyleModel.get('color');\n    var lineCount = 0;\n    areaColors = areaColors instanceof Array ? areaColors : [areaColors];\n    var splitAreas = [];\n    var prevRadius = ticksCoords[0].coord;\n\n    for (var i = 1; i < ticksCoords.length; i++) {\n      var colorIndex = lineCount++ % areaColors.length;\n      splitAreas[colorIndex] = splitAreas[colorIndex] || [];\n      splitAreas[colorIndex].push(new graphic.Sector({\n        shape: {\n          cx: polar.cx,\n          cy: polar.cy,\n          r0: prevRadius,\n          r: ticksCoords[i].coord,\n          startAngle: 0,\n          endAngle: Math.PI * 2\n        },\n        silent: true\n      }));\n      prevRadius = ticksCoords[i].coord;\n    } // Simple optimization\n    // Batching the lines if color are the same\n\n\n    for (var i = 0; i < splitAreas.length; i++) {\n      group.add(graphic.mergePath(splitAreas[i], {\n        style: zrUtil.defaults({\n          fill: areaColors[i % areaColors.length]\n        }, areaStyleModel.getAreaStyle()),\n        silent: true\n      }));\n    }\n  }\n};\n/**\n * @inner\n */\n\nfunction layoutAxis(polar, radiusAxisModel, axisAngle) {\n  return {\n    position: [polar.cx, polar.cy],\n    rotation: axisAngle / 180 * Math.PI,\n    labelDirection: -1,\n    tickDirection: -1,\n    nameDirection: 1,\n    labelRotate: radiusAxisModel.getModel('axisLabel').get('rotate'),\n    // Over splitLine and splitArea\n    z2: 1\n  };\n}\n\nexport default RadiusAxisView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { parsePercent } from '../util/number';\nimport { isDimensionStacked } from '../data/helper/dataStackHelper';\n\nfunction getSeriesStackId(seriesModel) {\n  return seriesModel.get('stack') || '__ec_stack_' + seriesModel.seriesIndex;\n}\n\nfunction getAxisKey(polar, axis) {\n  return axis.dim + polar.model.componentIndex;\n}\n\nfunction barLayoutPolar(seriesType, ecModel, api) {\n  var lastStackCoords = {};\n  var barWidthAndOffset = calRadialBar(zrUtil.filter(ecModel.getSeriesByType(seriesType), function (seriesModel) {\n    return !ecModel.isSeriesFiltered(seriesModel) && seriesModel.coordinateSystem && seriesModel.coordinateSystem.type === 'polar';\n  }));\n  ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n    // Check series coordinate, do layout for polar only\n    if (seriesModel.coordinateSystem.type !== 'polar') {\n      return;\n    }\n\n    var data = seriesModel.getData();\n    var polar = seriesModel.coordinateSystem;\n    var baseAxis = polar.getBaseAxis();\n    var axisKey = getAxisKey(polar, baseAxis);\n    var stackId = getSeriesStackId(seriesModel);\n    var columnLayoutInfo = barWidthAndOffset[axisKey][stackId];\n    var columnOffset = columnLayoutInfo.offset;\n    var columnWidth = columnLayoutInfo.width;\n    var valueAxis = polar.getOtherAxis(baseAxis);\n    var cx = seriesModel.coordinateSystem.cx;\n    var cy = seriesModel.coordinateSystem.cy;\n    var barMinHeight = seriesModel.get('barMinHeight') || 0;\n    var barMinAngle = seriesModel.get('barMinAngle') || 0;\n    lastStackCoords[stackId] = lastStackCoords[stackId] || [];\n    var valueDim = data.mapDimension(valueAxis.dim);\n    var baseDim = data.mapDimension(baseAxis.dim);\n    var stacked = isDimensionStacked(data, valueDim\n    /*, baseDim*/\n    );\n    var clampLayout = baseAxis.dim !== 'radius' || !seriesModel.get('roundCap', true);\n    var valueAxisStart = valueAxis.dataToCoord(0);\n\n    for (var idx = 0, len = data.count(); idx < len; idx++) {\n      var value = data.get(valueDim, idx);\n      var baseValue = data.get(baseDim, idx);\n      var sign = value >= 0 ? 'p' : 'n';\n      var baseCoord = valueAxisStart; // Because of the barMinHeight, we can not use the value in\n      // stackResultDimension directly.\n      // Only ordinal axis can be stacked.\n\n      if (stacked) {\n        if (!lastStackCoords[stackId][baseValue]) {\n          lastStackCoords[stackId][baseValue] = {\n            p: valueAxisStart,\n            n: valueAxisStart // Negative stack\n\n          };\n        } // Should also consider #4243\n\n\n        baseCoord = lastStackCoords[stackId][baseValue][sign];\n      }\n\n      var r0 = void 0;\n      var r = void 0;\n      var startAngle = void 0;\n      var endAngle = void 0; // radial sector\n\n      if (valueAxis.dim === 'radius') {\n        var radiusSpan = valueAxis.dataToCoord(value) - valueAxisStart;\n        var angle = baseAxis.dataToCoord(baseValue);\n\n        if (Math.abs(radiusSpan) < barMinHeight) {\n          radiusSpan = (radiusSpan < 0 ? -1 : 1) * barMinHeight;\n        }\n\n        r0 = baseCoord;\n        r = baseCoord + radiusSpan;\n        startAngle = angle - columnOffset;\n        endAngle = startAngle - columnWidth;\n        stacked && (lastStackCoords[stackId][baseValue][sign] = r);\n      } // tangential sector\n      else {\n        var angleSpan = valueAxis.dataToCoord(value, clampLayout) - valueAxisStart;\n        var radius = baseAxis.dataToCoord(baseValue);\n\n        if (Math.abs(angleSpan) < barMinAngle) {\n          angleSpan = (angleSpan < 0 ? -1 : 1) * barMinAngle;\n        }\n\n        r0 = radius + columnOffset;\n        r = r0 + columnWidth;\n        startAngle = baseCoord;\n        endAngle = baseCoord + angleSpan; // if the previous stack is at the end of the ring,\n        // add a round to differentiate it from origin\n        // let extent = angleAxis.getExtent();\n        // let stackCoord = angle;\n        // if (stackCoord === extent[0] && value > 0) {\n        //     stackCoord = extent[1];\n        // }\n        // else if (stackCoord === extent[1] && value < 0) {\n        //     stackCoord = extent[0];\n        // }\n\n        stacked && (lastStackCoords[stackId][baseValue][sign] = endAngle);\n      }\n\n      data.setItemLayout(idx, {\n        cx: cx,\n        cy: cy,\n        r0: r0,\n        r: r,\n        // Consider that positive angle is anti-clockwise,\n        // while positive radian of sector is clockwise\n        startAngle: -startAngle * Math.PI / 180,\n        endAngle: -endAngle * Math.PI / 180,\n\n        /**\n         * Keep the same logic with bar in catesion: use end value to\n         * control direction. Notice that if clockwise is true (by\n         * default), the sector will always draw clockwisely, no matter\n         * whether endAngle is greater or less than startAngle.\n         */\n        clockwise: startAngle >= endAngle\n      });\n    }\n  });\n}\n/**\n * Calculate bar width and offset for radial bar charts\n */\n\n\nfunction calRadialBar(barSeries) {\n  // Columns info on each category axis. Key is polar name\n  var columnsMap = {};\n  zrUtil.each(barSeries, function (seriesModel, idx) {\n    var data = seriesModel.getData();\n    var polar = seriesModel.coordinateSystem;\n    var baseAxis = polar.getBaseAxis();\n    var axisKey = getAxisKey(polar, baseAxis);\n    var axisExtent = baseAxis.getExtent();\n    var bandWidth = baseAxis.type === 'category' ? baseAxis.getBandWidth() : Math.abs(axisExtent[1] - axisExtent[0]) / data.count();\n    var columnsOnAxis = columnsMap[axisKey] || {\n      bandWidth: bandWidth,\n      remainedWidth: bandWidth,\n      autoWidthCount: 0,\n      categoryGap: '20%',\n      gap: '30%',\n      stacks: {}\n    };\n    var stacks = columnsOnAxis.stacks;\n    columnsMap[axisKey] = columnsOnAxis;\n    var stackId = getSeriesStackId(seriesModel);\n\n    if (!stacks[stackId]) {\n      columnsOnAxis.autoWidthCount++;\n    }\n\n    stacks[stackId] = stacks[stackId] || {\n      width: 0,\n      maxWidth: 0\n    };\n    var barWidth = parsePercent(seriesModel.get('barWidth'), bandWidth);\n    var barMaxWidth = parsePercent(seriesModel.get('barMaxWidth'), bandWidth);\n    var barGap = seriesModel.get('barGap');\n    var barCategoryGap = seriesModel.get('barCategoryGap');\n\n    if (barWidth && !stacks[stackId].width) {\n      barWidth = Math.min(columnsOnAxis.remainedWidth, barWidth);\n      stacks[stackId].width = barWidth;\n      columnsOnAxis.remainedWidth -= barWidth;\n    }\n\n    barMaxWidth && (stacks[stackId].maxWidth = barMaxWidth);\n    barGap != null && (columnsOnAxis.gap = barGap);\n    barCategoryGap != null && (columnsOnAxis.categoryGap = barCategoryGap);\n  });\n  var result = {};\n  zrUtil.each(columnsMap, function (columnsOnAxis, coordSysName) {\n    result[coordSysName] = {};\n    var stacks = columnsOnAxis.stacks;\n    var bandWidth = columnsOnAxis.bandWidth;\n    var categoryGap = parsePercent(columnsOnAxis.categoryGap, bandWidth);\n    var barGapPercent = parsePercent(columnsOnAxis.gap, 1);\n    var remainedWidth = columnsOnAxis.remainedWidth;\n    var autoWidthCount = columnsOnAxis.autoWidthCount;\n    var autoWidth = (remainedWidth - categoryGap) / (autoWidthCount + (autoWidthCount - 1) * barGapPercent);\n    autoWidth = Math.max(autoWidth, 0); // Find if any auto calculated bar exceeded maxBarWidth\n\n    zrUtil.each(stacks, function (column, stack) {\n      var maxWidth = column.maxWidth;\n\n      if (maxWidth && maxWidth < autoWidth) {\n        maxWidth = Math.min(maxWidth, remainedWidth);\n\n        if (column.width) {\n          maxWidth = Math.min(maxWidth, column.width);\n        }\n\n        remainedWidth -= maxWidth;\n        column.width = maxWidth;\n        autoWidthCount--;\n      }\n    }); // Recalculate width again\n\n    autoWidth = (remainedWidth - categoryGap) / (autoWidthCount + (autoWidthCount - 1) * barGapPercent);\n    autoWidth = Math.max(autoWidth, 0);\n    var widthSum = 0;\n    var lastColumn;\n    zrUtil.each(stacks, function (column, idx) {\n      if (!column.width) {\n        column.width = autoWidth;\n      }\n\n      lastColumn = column;\n      widthSum += column.width * (1 + barGapPercent);\n    });\n\n    if (lastColumn) {\n      widthSum -= lastColumn.width * barGapPercent;\n    }\n\n    var offset = -widthSum / 2;\n    zrUtil.each(stacks, function (column, stackId) {\n      result[coordSysName][stackId] = result[coordSysName][stackId] || {\n        offset: offset,\n        width: column.width\n      };\n      offset += column.width * (1 + barGapPercent);\n    });\n  });\n  return result;\n}\n\nexport default barLayoutPolar;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { use } from '../../extension';\nimport AxisView from '../axis/AxisView';\nimport PolarAxisPointer from '../axisPointer/PolarAxisPointer';\nimport { install as installAxisPointer } from '../axisPointer/install';\nimport PolarModel from '../../coord/polar/PolarModel';\nimport axisModelCreator from '../../coord/axisModelCreator';\nimport { AngleAxisModel, RadiusAxisModel } from '../../coord/polar/AxisModel';\nimport polarCreator from '../../coord/polar/polarCreator';\nimport AngleAxisView from '../axis/AngleAxisView';\nimport RadiusAxisView from '../axis/RadiusAxisView';\nimport ComponentView from '../../view/Component';\nimport { curry } from 'zrender/lib/core/util';\nimport barLayoutPolar from '../../layout/barPolar';\nvar angleAxisExtraOption = {\n  startAngle: 90,\n  clockwise: true,\n  splitNumber: 12,\n  axisLabel: {\n    rotate: 0\n  }\n};\nvar radiusAxisExtraOption = {\n  splitNumber: 5\n};\n\nvar PolarView =\n/** @class */\nfunction (_super) {\n  __extends(PolarView, _super);\n\n  function PolarView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = PolarView.type;\n    return _this;\n  }\n\n  PolarView.type = 'polar';\n  return PolarView;\n}(ComponentView);\n\nexport function install(registers) {\n  use(installAxisPointer);\n  AxisView.registerAxisPointerClass('PolarAxisPointer', PolarAxisPointer);\n  registers.registerCoordinateSystem('polar', polarCreator);\n  registers.registerComponentModel(PolarModel);\n  registers.registerComponentView(PolarView); // Model and view for angleAxis and radiusAxis\n\n  axisModelCreator(registers, 'angle', AngleAxisModel, angleAxisExtraOption);\n  axisModelCreator(registers, 'radius', RadiusAxisModel, radiusAxisExtraOption);\n  registers.registerComponentView(AngleAxisView);\n  registers.registerComponentView(RadiusAxisView);\n  registers.registerLayout(curry(barLayoutPolar, 'bar'));\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nexport function layout(axisModel, opt) {\n  opt = opt || {};\n  var single = axisModel.coordinateSystem;\n  var axis = axisModel.axis;\n  var layout = {};\n  var axisPosition = axis.position;\n  var orient = axis.orient;\n  var rect = single.getRect();\n  var rectBound = [rect.x, rect.x + rect.width, rect.y, rect.y + rect.height];\n  var positionMap = {\n    horizontal: {\n      top: rectBound[2],\n      bottom: rectBound[3]\n    },\n    vertical: {\n      left: rectBound[0],\n      right: rectBound[1]\n    }\n  };\n  layout.position = [orient === 'vertical' ? positionMap.vertical[axisPosition] : rectBound[0], orient === 'horizontal' ? positionMap.horizontal[axisPosition] : rectBound[3]];\n  var r = {\n    horizontal: 0,\n    vertical: 1\n  };\n  layout.rotation = Math.PI / 2 * r[orient];\n  var directionMap = {\n    top: -1,\n    bottom: 1,\n    right: 1,\n    left: -1\n  };\n  layout.labelDirection = layout.tickDirection = layout.nameDirection = directionMap[axisPosition];\n\n  if (axisModel.get(['axisTick', 'inside'])) {\n    layout.tickDirection = -layout.tickDirection;\n  }\n\n  if (zrUtil.retrieve(opt.labelInside, axisModel.get(['axisLabel', 'inside']))) {\n    layout.labelDirection = -layout.labelDirection;\n  }\n\n  var labelRotation = opt.rotate;\n  labelRotation == null && (labelRotation = axisModel.get(['axisLabel', 'rotate']));\n  layout.labelRotation = axisPosition === 'top' ? -labelRotation : labelRotation;\n  layout.z2 = 1;\n  return layout;\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport AxisBuilder from './AxisBuilder';\nimport * as graphic from '../../util/graphic';\nimport * as singleAxisHelper from '../../coord/single/singleAxisHelper';\nimport AxisView from './AxisView';\nimport { rectCoordAxisBuildSplitArea, rectCoordAxisHandleRemove } from './axisSplitHelper';\nvar axisBuilderAttrs = ['axisLine', 'axisTickLabel', 'axisName'];\nvar selfBuilderAttrs = ['splitArea', 'splitLine'];\n\nvar SingleAxisView =\n/** @class */\nfunction (_super) {\n  __extends(SingleAxisView, _super);\n\n  function SingleAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SingleAxisView.type;\n    _this.axisPointerClass = 'SingleAxisPointer';\n    return _this;\n  }\n\n  SingleAxisView.prototype.render = function (axisModel, ecModel, api, payload) {\n    var group = this.group;\n    group.removeAll();\n    var oldAxisGroup = this._axisGroup;\n    this._axisGroup = new graphic.Group();\n    var layout = singleAxisHelper.layout(axisModel);\n    var axisBuilder = new AxisBuilder(axisModel, layout);\n    zrUtil.each(axisBuilderAttrs, axisBuilder.add, axisBuilder);\n    group.add(this._axisGroup);\n    group.add(axisBuilder.getGroup());\n    zrUtil.each(selfBuilderAttrs, function (name) {\n      if (axisModel.get([name, 'show'])) {\n        axisElementBuilders[name](this, this.group, this._axisGroup, axisModel);\n      }\n    }, this);\n    graphic.groupTransition(oldAxisGroup, this._axisGroup, axisModel);\n\n    _super.prototype.render.call(this, axisModel, ecModel, api, payload);\n  };\n\n  SingleAxisView.prototype.remove = function () {\n    rectCoordAxisHandleRemove(this);\n  };\n\n  SingleAxisView.type = 'singleAxis';\n  return SingleAxisView;\n}(AxisView);\n\nvar axisElementBuilders = {\n  splitLine: function splitLine(axisView, group, axisGroup, axisModel) {\n    var axis = axisModel.axis;\n\n    if (axis.scale.isBlank()) {\n      return;\n    }\n\n    var splitLineModel = axisModel.getModel('splitLine');\n    var lineStyleModel = splitLineModel.getModel('lineStyle');\n    var lineColors = lineStyleModel.get('color');\n    lineColors = lineColors instanceof Array ? lineColors : [lineColors];\n    var gridRect = axisModel.coordinateSystem.getRect();\n    var isHorizontal = axis.isHorizontal();\n    var splitLines = [];\n    var lineCount = 0;\n    var ticksCoords = axis.getTicksCoords({\n      tickModel: splitLineModel\n    });\n    var p1 = [];\n    var p2 = [];\n\n    for (var i = 0; i < ticksCoords.length; ++i) {\n      var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n\n      if (isHorizontal) {\n        p1[0] = tickCoord;\n        p1[1] = gridRect.y;\n        p2[0] = tickCoord;\n        p2[1] = gridRect.y + gridRect.height;\n      } else {\n        p1[0] = gridRect.x;\n        p1[1] = tickCoord;\n        p2[0] = gridRect.x + gridRect.width;\n        p2[1] = tickCoord;\n      }\n\n      var colorIndex = lineCount++ % lineColors.length;\n      splitLines[colorIndex] = splitLines[colorIndex] || [];\n      splitLines[colorIndex].push(new graphic.Line({\n        subPixelOptimize: true,\n        shape: {\n          x1: p1[0],\n          y1: p1[1],\n          x2: p2[0],\n          y2: p2[1]\n        },\n        silent: true\n      }));\n    }\n\n    var lineStyle = lineStyleModel.getLineStyle(['color']);\n\n    for (var i = 0; i < splitLines.length; ++i) {\n      group.add(graphic.mergePath(splitLines[i], {\n        style: zrUtil.defaults({\n          stroke: lineColors[i % lineColors.length]\n        }, lineStyle),\n        silent: true\n      }));\n    }\n  },\n  splitArea: function splitArea(axisView, group, axisGroup, axisModel) {\n    rectCoordAxisBuildSplitArea(axisView, axisGroup, axisModel, axisModel);\n  }\n};\nexport default SingleAxisView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component';\nimport { AxisModelCommonMixin } from '../axisModelCommonMixin';\nimport { mixin } from 'zrender/lib/core/util';\n\nvar SingleAxisModel =\n/** @class */\nfunction (_super) {\n  __extends(SingleAxisModel, _super);\n\n  function SingleAxisModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SingleAxisModel.type;\n    return _this;\n  }\n\n  SingleAxisModel.prototype.getCoordSysModel = function () {\n    return this;\n  };\n\n  SingleAxisModel.type = 'singleAxis';\n  SingleAxisModel.layoutMode = 'box';\n  SingleAxisModel.defaultOption = {\n    left: '5%',\n    top: '5%',\n    right: '5%',\n    bottom: '5%',\n    type: 'value',\n    position: 'bottom',\n    orient: 'horizontal',\n    axisLine: {\n      show: true,\n      lineStyle: {\n        width: 1,\n        type: 'solid'\n      }\n    },\n    // Single coordinate system and single axis is the,\n    // which is used as the parent tooltip model.\n    // same model, so we set default tooltip show as true.\n    tooltip: {\n      show: true\n    },\n    axisTick: {\n      show: true,\n      length: 6,\n      lineStyle: {\n        width: 1\n      }\n    },\n    axisLabel: {\n      show: true,\n      interval: 'auto'\n    },\n    splitLine: {\n      show: true,\n      lineStyle: {\n        type: 'dashed',\n        opacity: 0.2\n      }\n    }\n  };\n  return SingleAxisModel;\n}(ComponentModel);\n\nmixin(SingleAxisModel, AxisModelCommonMixin.prototype);\nexport default SingleAxisModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Axis from '../Axis';\n\nvar SingleAxis =\n/** @class */\nfunction (_super) {\n  __extends(SingleAxis, _super);\n\n  function SingleAxis(dim, scale, coordExtent, axisType, position) {\n    var _this = _super.call(this, dim, scale, coordExtent) || this;\n\n    _this.type = axisType || 'value';\n    _this.position = position || 'bottom';\n    return _this;\n  }\n  /**\n   * Judge the orient of the axis.\n   */\n\n\n  SingleAxis.prototype.isHorizontal = function () {\n    var position = this.position;\n    return position === 'top' || position === 'bottom';\n  };\n\n  SingleAxis.prototype.pointToData = function (point, clamp) {\n    return this.coordinateSystem.pointToData(point)[0];\n  };\n\n  return SingleAxis;\n}(Axis);\n\nexport default SingleAxis;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Single coordinates system.\n */\nimport SingleAxis from './SingleAxis';\nimport * as axisHelper from '../axisHelper';\nimport { getLayoutRect } from '../../util/layout';\nimport { each } from 'zrender/lib/core/util';\nexport var singleDimensions = ['single'];\n/**\n * Create a single coordinates system.\n */\n\nvar Single =\n/** @class */\nfunction () {\n  function Single(axisModel, ecModel, api) {\n    this.type = 'single';\n    this.dimension = 'single';\n    /**\n     * Add it just for draw tooltip.\n     */\n\n    this.dimensions = singleDimensions;\n    this.axisPointerEnabled = true;\n    this.model = axisModel;\n\n    this._init(axisModel, ecModel, api);\n  }\n  /**\n   * Initialize single coordinate system.\n   */\n\n\n  Single.prototype._init = function (axisModel, ecModel, api) {\n    var dim = this.dimension;\n    var axis = new SingleAxis(dim, axisHelper.createScaleByModel(axisModel), [0, 0], axisModel.get('type'), axisModel.get('position'));\n    var isCategory = axis.type === 'category';\n    axis.onBand = isCategory && axisModel.get('boundaryGap');\n    axis.inverse = axisModel.get('inverse');\n    axis.orient = axisModel.get('orient');\n    axisModel.axis = axis;\n    axis.model = axisModel;\n    axis.coordinateSystem = this;\n    this._axis = axis;\n  };\n  /**\n   * Update axis scale after data processed\n   */\n\n\n  Single.prototype.update = function (ecModel, api) {\n    ecModel.eachSeries(function (seriesModel) {\n      if (seriesModel.coordinateSystem === this) {\n        var data_1 = seriesModel.getData();\n        each(data_1.mapDimensionsAll(this.dimension), function (dim) {\n          this._axis.scale.unionExtentFromData(data_1, dim);\n        }, this);\n        axisHelper.niceScaleExtent(this._axis.scale, this._axis.model);\n      }\n    }, this);\n  };\n  /**\n   * Resize the single coordinate system.\n   */\n\n\n  Single.prototype.resize = function (axisModel, api) {\n    this._rect = getLayoutRect({\n      left: axisModel.get('left'),\n      top: axisModel.get('top'),\n      right: axisModel.get('right'),\n      bottom: axisModel.get('bottom'),\n      width: axisModel.get('width'),\n      height: axisModel.get('height')\n    }, {\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n\n    this._adjustAxis();\n  };\n\n  Single.prototype.getRect = function () {\n    return this._rect;\n  };\n\n  Single.prototype._adjustAxis = function () {\n    var rect = this._rect;\n    var axis = this._axis;\n    var isHorizontal = axis.isHorizontal();\n    var extent = isHorizontal ? [0, rect.width] : [0, rect.height];\n    var idx = axis.reverse ? 1 : 0;\n    axis.setExtent(extent[idx], extent[1 - idx]);\n\n    this._updateAxisTransform(axis, isHorizontal ? rect.x : rect.y);\n  };\n\n  Single.prototype._updateAxisTransform = function (axis, coordBase) {\n    var axisExtent = axis.getExtent();\n    var extentSum = axisExtent[0] + axisExtent[1];\n    var isHorizontal = axis.isHorizontal();\n    axis.toGlobalCoord = isHorizontal ? function (coord) {\n      return coord + coordBase;\n    } : function (coord) {\n      return extentSum - coord + coordBase;\n    };\n    axis.toLocalCoord = isHorizontal ? function (coord) {\n      return coord - coordBase;\n    } : function (coord) {\n      return extentSum - coord + coordBase;\n    };\n  };\n  /**\n   * Get axis.\n   */\n\n\n  Single.prototype.getAxis = function () {\n    return this._axis;\n  };\n  /**\n   * Get axis, add it just for draw tooltip.\n   */\n\n\n  Single.prototype.getBaseAxis = function () {\n    return this._axis;\n  };\n\n  Single.prototype.getAxes = function () {\n    return [this._axis];\n  };\n\n  Single.prototype.getTooltipAxes = function () {\n    return {\n      baseAxes: [this.getAxis()],\n      // Empty otherAxes\n      otherAxes: []\n    };\n  };\n  /**\n   * If contain point.\n   */\n\n\n  Single.prototype.containPoint = function (point) {\n    var rect = this.getRect();\n    var axis = this.getAxis();\n    var orient = axis.orient;\n\n    if (orient === 'horizontal') {\n      return axis.contain(axis.toLocalCoord(point[0])) && point[1] >= rect.y && point[1] <= rect.y + rect.height;\n    } else {\n      return axis.contain(axis.toLocalCoord(point[1])) && point[0] >= rect.y && point[0] <= rect.y + rect.height;\n    }\n  };\n\n  Single.prototype.pointToData = function (point) {\n    var axis = this.getAxis();\n    return [axis.coordToData(axis.toLocalCoord(point[axis.orient === 'horizontal' ? 0 : 1]))];\n  };\n  /**\n   * Convert the series data to concrete point.\n   * Can be [val] | val\n   */\n\n\n  Single.prototype.dataToPoint = function (val) {\n    var axis = this.getAxis();\n    var rect = this.getRect();\n    var pt = [];\n    var idx = axis.orient === 'horizontal' ? 0 : 1;\n\n    if (val instanceof Array) {\n      val = val[0];\n    }\n\n    pt[idx] = axis.toGlobalCoord(axis.dataToCoord(+val));\n    pt[1 - idx] = idx === 0 ? rect.y + rect.height / 2 : rect.x + rect.width / 2;\n    return pt;\n  };\n\n  Single.prototype.convertToPixel = function (ecModel, finder, value) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? this.dataToPoint(value) : null;\n  };\n\n  Single.prototype.convertFromPixel = function (ecModel, finder, pixel) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? this.pointToData(pixel) : null;\n  };\n\n  return Single;\n}();\n\nfunction getCoordSys(finder) {\n  var seriesModel = finder.seriesModel;\n  var singleModel = finder.singleAxisModel;\n  return singleModel && singleModel.coordinateSystem || seriesModel && seriesModel.coordinateSystem;\n}\n\nexport default Single;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Single coordinate system creator.\n */\nimport Single, { singleDimensions } from './Single';\nimport { SINGLE_REFERRING } from '../../util/model';\n/**\n * Create single coordinate system and inject it into seriesModel.\n */\n\nfunction create(ecModel, api) {\n  var singles = [];\n  ecModel.eachComponent('singleAxis', function (axisModel, idx) {\n    var single = new Single(axisModel, ecModel, api);\n    single.name = 'single_' + idx;\n    single.resize(axisModel, api);\n    axisModel.coordinateSystem = single;\n    singles.push(single);\n  });\n  ecModel.eachSeries(function (seriesModel) {\n    if (seriesModel.get('coordinateSystem') === 'singleAxis') {\n      var singleAxisModel = seriesModel.getReferringComponents('singleAxis', SINGLE_REFERRING).models[0];\n      seriesModel.coordinateSystem = singleAxisModel && singleAxisModel.coordinateSystem;\n    }\n  });\n  return singles;\n}\n\nvar singleCreator = {\n  create: create,\n  dimensions: singleDimensions\n};\nexport default singleCreator;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport BaseAxisPointer from './BaseAxisPointer';\nimport * as viewHelper from './viewHelper';\nimport * as singleAxisHelper from '../../coord/single/singleAxisHelper';\nvar XY = ['x', 'y'];\nvar WH = ['width', 'height'];\n\nvar SingleAxisPointer =\n/** @class */\nfunction (_super) {\n  __extends(SingleAxisPointer, _super);\n\n  function SingleAxisPointer() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\n   * @override\n   */\n\n\n  SingleAxisPointer.prototype.makeElOption = function (elOption, value, axisModel, axisPointerModel, api) {\n    var axis = axisModel.axis;\n    var coordSys = axis.coordinateSystem;\n    var otherExtent = getGlobalExtent(coordSys, 1 - getPointDimIndex(axis));\n    var pixelValue = coordSys.dataToPoint(value)[0];\n    var axisPointerType = axisPointerModel.get('type');\n\n    if (axisPointerType && axisPointerType !== 'none') {\n      var elStyle = viewHelper.buildElStyle(axisPointerModel);\n      var pointerOption = pointerShapeBuilder[axisPointerType](axis, pixelValue, otherExtent);\n      pointerOption.style = elStyle;\n      elOption.graphicKey = pointerOption.type;\n      elOption.pointer = pointerOption;\n    }\n\n    var layoutInfo = singleAxisHelper.layout(axisModel);\n    viewHelper.buildCartesianSingleLabelElOption( // @ts-ignore\n    value, elOption, layoutInfo, axisModel, axisPointerModel, api);\n  };\n  /**\n   * @override\n   */\n\n\n  SingleAxisPointer.prototype.getHandleTransform = function (value, axisModel, axisPointerModel) {\n    var layoutInfo = singleAxisHelper.layout(axisModel, {\n      labelInside: false\n    }); // @ts-ignore\n\n    layoutInfo.labelMargin = axisPointerModel.get(['handle', 'margin']);\n    var position = viewHelper.getTransformedPosition(axisModel.axis, value, layoutInfo);\n    return {\n      x: position[0],\n      y: position[1],\n      rotation: layoutInfo.rotation + (layoutInfo.labelDirection < 0 ? Math.PI : 0)\n    };\n  };\n  /**\n   * @override\n   */\n\n\n  SingleAxisPointer.prototype.updateHandleTransform = function (transform, delta, axisModel, axisPointerModel) {\n    var axis = axisModel.axis;\n    var coordSys = axis.coordinateSystem;\n    var dimIndex = getPointDimIndex(axis);\n    var axisExtent = getGlobalExtent(coordSys, dimIndex);\n    var currPosition = [transform.x, transform.y];\n    currPosition[dimIndex] += delta[dimIndex];\n    currPosition[dimIndex] = Math.min(axisExtent[1], currPosition[dimIndex]);\n    currPosition[dimIndex] = Math.max(axisExtent[0], currPosition[dimIndex]);\n    var otherExtent = getGlobalExtent(coordSys, 1 - dimIndex);\n    var cursorOtherValue = (otherExtent[1] + otherExtent[0]) / 2;\n    var cursorPoint = [cursorOtherValue, cursorOtherValue];\n    cursorPoint[dimIndex] = currPosition[dimIndex];\n    return {\n      x: currPosition[0],\n      y: currPosition[1],\n      rotation: transform.rotation,\n      cursorPoint: cursorPoint,\n      tooltipOption: {\n        verticalAlign: 'middle'\n      }\n    };\n  };\n\n  return SingleAxisPointer;\n}(BaseAxisPointer);\n\nvar pointerShapeBuilder = {\n  line: function line(axis, pixelValue, otherExtent) {\n    var targetShape = viewHelper.makeLineShape([pixelValue, otherExtent[0]], [pixelValue, otherExtent[1]], getPointDimIndex(axis));\n    return {\n      type: 'Line',\n      subPixelOptimize: true,\n      shape: targetShape\n    };\n  },\n  shadow: function shadow(axis, pixelValue, otherExtent) {\n    var bandWidth = axis.getBandWidth();\n    var span = otherExtent[1] - otherExtent[0];\n    return {\n      type: 'Rect',\n      shape: viewHelper.makeRectShape([pixelValue - bandWidth / 2, otherExtent[0]], [bandWidth, span], getPointDimIndex(axis))\n    };\n  }\n};\n\nfunction getPointDimIndex(axis) {\n  return axis.isHorizontal() ? 0 : 1;\n}\n\nfunction getGlobalExtent(coordSys, dimIndex) {\n  var rect = coordSys.getRect();\n  return [rect[XY[dimIndex]], rect[XY[dimIndex]] + rect[WH[dimIndex]]];\n}\n\nexport default SingleAxisPointer;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { use } from '../../extension';\nimport ComponentView from '../../view/Component';\nimport SingleAxisView from '../axis/SingleAxisView';\nimport axisModelCreator from '../../coord/axisModelCreator';\nimport SingleAxisModel from '../../coord/single/AxisModel';\nimport singleCreator from '../../coord/single/singleCreator';\nimport { install as installAxisPointer } from '../axisPointer/install';\nimport AxisView from '../axis/AxisView';\nimport SingleAxisPointer from '../axisPointer/SingleAxisPointer';\n\nvar SingleView =\n/** @class */\nfunction (_super) {\n  __extends(SingleView, _super);\n\n  function SingleView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SingleView.type;\n    return _this;\n  }\n\n  SingleView.type = 'single';\n  return SingleView;\n}(ComponentView);\n\nexport function install(registers) {\n  use(installAxisPointer);\n  AxisView.registerAxisPointerClass('SingleAxisPointer', SingleAxisPointer);\n  registers.registerComponentView(SingleView); // Axis\n\n  registers.registerComponentView(SingleAxisView);\n  registers.registerComponentModel(SingleAxisModel);\n  axisModelCreator(registers, 'single', SingleAxisModel, SingleAxisModel.defaultOption);\n  registers.registerCoordinateSystem('single', singleCreator);\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport ComponentModel from '../../model/Component';\nimport { getLayoutParams, sizeCalculable, mergeLayoutParam } from '../../util/layout';\n\nvar CalendarModel =\n/** @class */\nfunction (_super) {\n  __extends(CalendarModel, _super);\n\n  function CalendarModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CalendarModel.type;\n    return _this;\n  }\n  /**\n   * @override\n   */\n\n\n  CalendarModel.prototype.init = function (option, parentModel, ecModel) {\n    var inputPositionParams = getLayoutParams(option);\n\n    _super.prototype.init.apply(this, arguments);\n\n    mergeAndNormalizeLayoutParams(option, inputPositionParams);\n  };\n  /**\n   * @override\n   */\n\n\n  CalendarModel.prototype.mergeOption = function (option) {\n    _super.prototype.mergeOption.apply(this, arguments);\n\n    mergeAndNormalizeLayoutParams(this.option, option);\n  };\n\n  CalendarModel.prototype.getCellSize = function () {\n    // Has been normalized\n    return this.option.cellSize;\n  };\n\n  CalendarModel.type = 'calendar';\n  CalendarModel.defaultOption = {\n    zlevel: 0,\n    z: 2,\n    left: 80,\n    top: 60,\n    cellSize: 20,\n    // horizontal vertical\n    orient: 'horizontal',\n    // month separate line style\n    splitLine: {\n      show: true,\n      lineStyle: {\n        color: '#000',\n        width: 1,\n        type: 'solid'\n      }\n    },\n    // rect style  temporarily unused emphasis\n    itemStyle: {\n      color: '#fff',\n      borderWidth: 1,\n      borderColor: '#ccc'\n    },\n    // week text style\n    dayLabel: {\n      show: true,\n      firstDay: 0,\n      // start end\n      position: 'start',\n      margin: '50%',\n      color: '#000'\n    },\n    // month text style\n    monthLabel: {\n      show: true,\n      // start end\n      position: 'start',\n      margin: 5,\n      // center or left\n      align: 'center',\n      formatter: null,\n      color: '#000'\n    },\n    // year text style\n    yearLabel: {\n      show: true,\n      // top bottom left right\n      position: null,\n      margin: 30,\n      formatter: null,\n      color: '#ccc',\n      fontFamily: 'sans-serif',\n      fontWeight: 'bolder',\n      fontSize: 20\n    }\n  };\n  return CalendarModel;\n}(ComponentModel);\n\nfunction mergeAndNormalizeLayoutParams(target, raw) {\n  // Normalize cellSize\n  var cellSize = target.cellSize;\n  var cellSizeArr;\n\n  if (!zrUtil.isArray(cellSize)) {\n    cellSizeArr = target.cellSize = [cellSize, cellSize];\n  } else {\n    cellSizeArr = cellSize;\n  }\n\n  if (cellSizeArr.length === 1) {\n    cellSizeArr[1] = cellSizeArr[0];\n  }\n\n  var ignoreSize = zrUtil.map([0, 1], function (hvIdx) {\n    // If user have set `width` or both `left` and `right`, cellSizeArr\n    // will be automatically set to 'auto', otherwise the default\n    // setting of cellSizeArr will make `width` setting not work.\n    if (sizeCalculable(raw, hvIdx)) {\n      cellSizeArr[hvIdx] = 'auto';\n    }\n\n    return cellSizeArr[hvIdx] != null && cellSizeArr[hvIdx] !== 'auto';\n  });\n  mergeLayoutParam(target, raw, {\n    type: 'box',\n    ignoreSize: ignoreSize\n  });\n}\n\nexport default CalendarModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { isString, extend, map } from 'zrender/lib/core/util';\nimport * as graphic from '../../util/graphic';\nimport { createTextStyle } from '../../label/labelStyle';\nimport { formatTplSimple } from '../../util/format';\nimport { parsePercent } from '../../util/number';\nimport ComponentView from '../../view/Component';\nimport { getLocaleModel } from '../../core/locale';\n\nvar CalendarView =\n/** @class */\nfunction (_super) {\n  __extends(CalendarView, _super);\n\n  function CalendarView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CalendarView.type;\n    return _this;\n  }\n\n  CalendarView.prototype.render = function (calendarModel, ecModel, api) {\n    var group = this.group;\n    group.removeAll();\n    var coordSys = calendarModel.coordinateSystem; // range info\n\n    var rangeData = coordSys.getRangeInfo();\n    var orient = coordSys.getOrient(); // locale\n\n    var localeModel = ecModel.getLocaleModel();\n\n    this._renderDayRect(calendarModel, rangeData, group); // _renderLines must be called prior to following function\n\n\n    this._renderLines(calendarModel, rangeData, orient, group);\n\n    this._renderYearText(calendarModel, rangeData, orient, group);\n\n    this._renderMonthText(calendarModel, localeModel, orient, group);\n\n    this._renderWeekText(calendarModel, localeModel, rangeData, orient, group);\n  }; // render day rect\n\n\n  CalendarView.prototype._renderDayRect = function (calendarModel, rangeData, group) {\n    var coordSys = calendarModel.coordinateSystem;\n    var itemRectStyleModel = calendarModel.getModel('itemStyle').getItemStyle();\n    var sw = coordSys.getCellWidth();\n    var sh = coordSys.getCellHeight();\n\n    for (var i = rangeData.start.time; i <= rangeData.end.time; i = coordSys.getNextNDay(i, 1).time) {\n      var point = coordSys.dataToRect([i], false).tl; // every rect\n\n      var rect = new graphic.Rect({\n        shape: {\n          x: point[0],\n          y: point[1],\n          width: sw,\n          height: sh\n        },\n        cursor: 'default',\n        style: itemRectStyleModel\n      });\n      group.add(rect);\n    }\n  }; // render separate line\n\n\n  CalendarView.prototype._renderLines = function (calendarModel, rangeData, orient, group) {\n    var self = this;\n    var coordSys = calendarModel.coordinateSystem;\n    var lineStyleModel = calendarModel.getModel(['splitLine', 'lineStyle']).getLineStyle();\n    var show = calendarModel.get(['splitLine', 'show']);\n    var lineWidth = lineStyleModel.lineWidth;\n    this._tlpoints = [];\n    this._blpoints = [];\n    this._firstDayOfMonth = [];\n    this._firstDayPoints = [];\n    var firstDay = rangeData.start;\n\n    for (var i = 0; firstDay.time <= rangeData.end.time; i++) {\n      addPoints(firstDay.formatedDate);\n\n      if (i === 0) {\n        firstDay = coordSys.getDateInfo(rangeData.start.y + '-' + rangeData.start.m);\n      }\n\n      var date = firstDay.date;\n      date.setMonth(date.getMonth() + 1);\n      firstDay = coordSys.getDateInfo(date);\n    }\n\n    addPoints(coordSys.getNextNDay(rangeData.end.time, 1).formatedDate);\n\n    function addPoints(date) {\n      self._firstDayOfMonth.push(coordSys.getDateInfo(date));\n\n      self._firstDayPoints.push(coordSys.dataToRect([date], false).tl);\n\n      var points = self._getLinePointsOfOneWeek(calendarModel, date, orient);\n\n      self._tlpoints.push(points[0]);\n\n      self._blpoints.push(points[points.length - 1]);\n\n      show && self._drawSplitline(points, lineStyleModel, group);\n    } // render top/left line\n\n\n    show && this._drawSplitline(self._getEdgesPoints(self._tlpoints, lineWidth, orient), lineStyleModel, group); // render bottom/right line\n\n    show && this._drawSplitline(self._getEdgesPoints(self._blpoints, lineWidth, orient), lineStyleModel, group);\n  }; // get points at both ends\n\n\n  CalendarView.prototype._getEdgesPoints = function (points, lineWidth, orient) {\n    var rs = [points[0].slice(), points[points.length - 1].slice()];\n    var idx = orient === 'horizontal' ? 0 : 1; // both ends of the line are extend half lineWidth\n\n    rs[0][idx] = rs[0][idx] - lineWidth / 2;\n    rs[1][idx] = rs[1][idx] + lineWidth / 2;\n    return rs;\n  }; // render split line\n\n\n  CalendarView.prototype._drawSplitline = function (points, lineStyle, group) {\n    var poyline = new graphic.Polyline({\n      z2: 20,\n      shape: {\n        points: points\n      },\n      style: lineStyle\n    });\n    group.add(poyline);\n  }; // render month line of one week points\n\n\n  CalendarView.prototype._getLinePointsOfOneWeek = function (calendarModel, date, orient) {\n    var coordSys = calendarModel.coordinateSystem;\n    var parsedDate = coordSys.getDateInfo(date);\n    var points = [];\n\n    for (var i = 0; i < 7; i++) {\n      var tmpD = coordSys.getNextNDay(parsedDate.time, i);\n      var point = coordSys.dataToRect([tmpD.time], false);\n      points[2 * tmpD.day] = point.tl;\n      points[2 * tmpD.day + 1] = point[orient === 'horizontal' ? 'bl' : 'tr'];\n    }\n\n    return points;\n  };\n\n  CalendarView.prototype._formatterLabel = function (formatter, params) {\n    if (typeof formatter === 'string' && formatter) {\n      return formatTplSimple(formatter, params);\n    }\n\n    if (typeof formatter === 'function') {\n      return formatter(params);\n    }\n\n    return params.nameMap;\n  };\n\n  CalendarView.prototype._yearTextPositionControl = function (textEl, point, orient, position, margin) {\n    var x = point[0];\n    var y = point[1];\n    var aligns = ['center', 'bottom'];\n\n    if (position === 'bottom') {\n      y += margin;\n      aligns = ['center', 'top'];\n    } else if (position === 'left') {\n      x -= margin;\n    } else if (position === 'right') {\n      x += margin;\n      aligns = ['center', 'top'];\n    } else {\n      // top\n      y -= margin;\n    }\n\n    var rotate = 0;\n\n    if (position === 'left' || position === 'right') {\n      rotate = Math.PI / 2;\n    }\n\n    return {\n      rotation: rotate,\n      x: x,\n      y: y,\n      style: {\n        align: aligns[0],\n        verticalAlign: aligns[1]\n      }\n    };\n  }; // render year\n\n\n  CalendarView.prototype._renderYearText = function (calendarModel, rangeData, orient, group) {\n    var yearLabel = calendarModel.getModel('yearLabel');\n\n    if (!yearLabel.get('show')) {\n      return;\n    }\n\n    var margin = yearLabel.get('margin');\n    var pos = yearLabel.get('position');\n\n    if (!pos) {\n      pos = orient !== 'horizontal' ? 'top' : 'left';\n    }\n\n    var points = [this._tlpoints[this._tlpoints.length - 1], this._blpoints[0]];\n    var xc = (points[0][0] + points[1][0]) / 2;\n    var yc = (points[0][1] + points[1][1]) / 2;\n    var idx = orient === 'horizontal' ? 0 : 1;\n    var posPoints = {\n      top: [xc, points[idx][1]],\n      bottom: [xc, points[1 - idx][1]],\n      left: [points[1 - idx][0], yc],\n      right: [points[idx][0], yc]\n    };\n    var name = rangeData.start.y;\n\n    if (+rangeData.end.y > +rangeData.start.y) {\n      name = name + '-' + rangeData.end.y;\n    }\n\n    var formatter = yearLabel.get('formatter');\n    var params = {\n      start: rangeData.start.y,\n      end: rangeData.end.y,\n      nameMap: name\n    };\n\n    var content = this._formatterLabel(formatter, params);\n\n    var yearText = new graphic.Text({\n      z2: 30,\n      style: createTextStyle(yearLabel, {\n        text: content\n      })\n    });\n    yearText.attr(this._yearTextPositionControl(yearText, posPoints[pos], orient, pos, margin));\n    group.add(yearText);\n  };\n\n  CalendarView.prototype._monthTextPositionControl = function (point, isCenter, orient, position, margin) {\n    var align = 'left';\n    var vAlign = 'top';\n    var x = point[0];\n    var y = point[1];\n\n    if (orient === 'horizontal') {\n      y = y + margin;\n\n      if (isCenter) {\n        align = 'center';\n      }\n\n      if (position === 'start') {\n        vAlign = 'bottom';\n      }\n    } else {\n      x = x + margin;\n\n      if (isCenter) {\n        vAlign = 'middle';\n      }\n\n      if (position === 'start') {\n        align = 'right';\n      }\n    }\n\n    return {\n      x: x,\n      y: y,\n      align: align,\n      verticalAlign: vAlign\n    };\n  }; // render month and year text\n\n\n  CalendarView.prototype._renderMonthText = function (calendarModel, localeModel, orient, group) {\n    var monthLabel = calendarModel.getModel('monthLabel');\n\n    if (!monthLabel.get('show')) {\n      return;\n    }\n\n    var nameMap = monthLabel.get('nameMap');\n    var margin = monthLabel.get('margin');\n    var pos = monthLabel.get('position');\n    var align = monthLabel.get('align');\n    var termPoints = [this._tlpoints, this._blpoints];\n\n    if (!nameMap || isString(nameMap)) {\n      if (nameMap) {\n        // case-sensitive\n        localeModel = getLocaleModel(nameMap) || localeModel;\n      } // PENDING\n      // for ZH locale, original form is `` but current form is `1`\n\n\n      nameMap = localeModel.get(['time', 'monthAbbr']) || [];\n    }\n\n    var idx = pos === 'start' ? 0 : 1;\n    var axis = orient === 'horizontal' ? 0 : 1;\n    margin = pos === 'start' ? -margin : margin;\n    var isCenter = align === 'center';\n\n    for (var i = 0; i < termPoints[idx].length - 1; i++) {\n      var tmp = termPoints[idx][i].slice();\n      var firstDay = this._firstDayOfMonth[i];\n\n      if (isCenter) {\n        var firstDayPoints = this._firstDayPoints[i];\n        tmp[axis] = (firstDayPoints[axis] + termPoints[0][i + 1][axis]) / 2;\n      }\n\n      var formatter = monthLabel.get('formatter');\n      var name_1 = nameMap[+firstDay.m - 1];\n      var params = {\n        yyyy: firstDay.y,\n        yy: (firstDay.y + '').slice(2),\n        MM: firstDay.m,\n        M: +firstDay.m,\n        nameMap: name_1\n      };\n\n      var content = this._formatterLabel(formatter, params);\n\n      var monthText = new graphic.Text({\n        z2: 30,\n        style: extend(createTextStyle(monthLabel, {\n          text: content\n        }), this._monthTextPositionControl(tmp, isCenter, orient, pos, margin))\n      });\n      group.add(monthText);\n    }\n  };\n\n  CalendarView.prototype._weekTextPositionControl = function (point, orient, position, margin, cellSize) {\n    var align = 'center';\n    var vAlign = 'middle';\n    var x = point[0];\n    var y = point[1];\n    var isStart = position === 'start';\n\n    if (orient === 'horizontal') {\n      x = x + margin + (isStart ? 1 : -1) * cellSize[0] / 2;\n      align = isStart ? 'right' : 'left';\n    } else {\n      y = y + margin + (isStart ? 1 : -1) * cellSize[1] / 2;\n      vAlign = isStart ? 'bottom' : 'top';\n    }\n\n    return {\n      x: x,\n      y: y,\n      align: align,\n      verticalAlign: vAlign\n    };\n  }; // render weeks\n\n\n  CalendarView.prototype._renderWeekText = function (calendarModel, localeModel, rangeData, orient, group) {\n    var dayLabel = calendarModel.getModel('dayLabel');\n\n    if (!dayLabel.get('show')) {\n      return;\n    }\n\n    var coordSys = calendarModel.coordinateSystem;\n    var pos = dayLabel.get('position');\n    var nameMap = dayLabel.get('nameMap');\n    var margin = dayLabel.get('margin');\n    var firstDayOfWeek = coordSys.getFirstDayOfWeek();\n\n    if (!nameMap || isString(nameMap)) {\n      if (nameMap) {\n        // case-sensitive\n        localeModel = getLocaleModel(nameMap) || localeModel;\n      } // Use the first letter of `dayOfWeekAbbr` if `dayOfWeekShort` doesn't exist in the locale file\n\n\n      var dayOfWeekShort = localeModel.get(['time', 'dayOfWeekShort']);\n      nameMap = dayOfWeekShort || map(localeModel.get(['time', 'dayOfWeekAbbr']), function (val) {\n        return val[0];\n      });\n    }\n\n    var start = coordSys.getNextNDay(rangeData.end.time, 7 - rangeData.lweek).time;\n    var cellSize = [coordSys.getCellWidth(), coordSys.getCellHeight()];\n    margin = parsePercent(margin, Math.min(cellSize[1], cellSize[0]));\n\n    if (pos === 'start') {\n      start = coordSys.getNextNDay(rangeData.start.time, -(7 + rangeData.fweek)).time;\n      margin = -margin;\n    }\n\n    for (var i = 0; i < 7; i++) {\n      var tmpD = coordSys.getNextNDay(start, i);\n      var point = coordSys.dataToRect([tmpD.time], false).center;\n      var day = i;\n      day = Math.abs((i + firstDayOfWeek) % 7);\n      var weekText = new graphic.Text({\n        z2: 30,\n        style: extend(createTextStyle(dayLabel, {\n          text: nameMap[day]\n        }), this._weekTextPositionControl(point, orient, pos, margin, cellSize))\n      });\n      group.add(weekText);\n    }\n  };\n\n  CalendarView.type = 'calendar';\n  return CalendarView;\n}(ComponentView);\n\nexport default CalendarView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as layout from '../../util/layout';\nimport * as numberUtil from '../../util/number'; // (24*60*60*1000)\n\nvar PROXIMATE_ONE_DAY = 86400000;\n\nvar Calendar =\n/** @class */\nfunction () {\n  function Calendar(calendarModel, ecModel, api) {\n    this.type = 'calendar';\n    this.dimensions = Calendar.dimensions; // Required in createListFromData\n\n    this.getDimensionsInfo = Calendar.getDimensionsInfo;\n    this._model = calendarModel;\n  }\n\n  Calendar.getDimensionsInfo = function () {\n    return [{\n      name: 'time',\n      type: 'time'\n    }, 'value'];\n  };\n\n  Calendar.prototype.getRangeInfo = function () {\n    return this._rangeInfo;\n  };\n\n  Calendar.prototype.getModel = function () {\n    return this._model;\n  };\n\n  Calendar.prototype.getRect = function () {\n    return this._rect;\n  };\n\n  Calendar.prototype.getCellWidth = function () {\n    return this._sw;\n  };\n\n  Calendar.prototype.getCellHeight = function () {\n    return this._sh;\n  };\n\n  Calendar.prototype.getOrient = function () {\n    return this._orient;\n  };\n  /**\n   * getFirstDayOfWeek\n   *\n   * @example\n   *     0 : start at Sunday\n   *     1 : start at Monday\n   *\n   * @return {number}\n   */\n\n\n  Calendar.prototype.getFirstDayOfWeek = function () {\n    return this._firstDayOfWeek;\n  };\n  /**\n   * get date info\n   * }\n   */\n\n\n  Calendar.prototype.getDateInfo = function (date) {\n    date = numberUtil.parseDate(date);\n    var y = date.getFullYear();\n    var m = date.getMonth() + 1;\n    var mStr = m < 10 ? '0' + m : '' + m;\n    var d = date.getDate();\n    var dStr = d < 10 ? '0' + d : '' + d;\n    var day = date.getDay();\n    day = Math.abs((day + 7 - this.getFirstDayOfWeek()) % 7);\n    return {\n      y: y + '',\n      m: mStr,\n      d: dStr,\n      day: day,\n      time: date.getTime(),\n      formatedDate: y + '-' + mStr + '-' + dStr,\n      date: date\n    };\n  };\n\n  Calendar.prototype.getNextNDay = function (date, n) {\n    n = n || 0;\n\n    if (n === 0) {\n      return this.getDateInfo(date);\n    }\n\n    date = new Date(this.getDateInfo(date).time);\n    date.setDate(date.getDate() + n);\n    return this.getDateInfo(date);\n  };\n\n  Calendar.prototype.update = function (ecModel, api) {\n    this._firstDayOfWeek = +this._model.getModel('dayLabel').get('firstDay');\n    this._orient = this._model.get('orient');\n    this._lineWidth = this._model.getModel('itemStyle').getItemStyle().lineWidth || 0;\n    this._rangeInfo = this._getRangeInfo(this._initRangeOption());\n    var weeks = this._rangeInfo.weeks || 1;\n    var whNames = ['width', 'height'];\n\n    var cellSize = this._model.getCellSize().slice();\n\n    var layoutParams = this._model.getBoxLayoutParams();\n\n    var cellNumbers = this._orient === 'horizontal' ? [weeks, 7] : [7, weeks];\n    zrUtil.each([0, 1], function (idx) {\n      if (cellSizeSpecified(cellSize, idx)) {\n        layoutParams[whNames[idx]] = cellSize[idx] * cellNumbers[idx];\n      }\n    });\n    var whGlobal = {\n      width: api.getWidth(),\n      height: api.getHeight()\n    };\n    var calendarRect = this._rect = layout.getLayoutRect(layoutParams, whGlobal);\n    zrUtil.each([0, 1], function (idx) {\n      if (!cellSizeSpecified(cellSize, idx)) {\n        cellSize[idx] = calendarRect[whNames[idx]] / cellNumbers[idx];\n      }\n    });\n\n    function cellSizeSpecified(cellSize, idx) {\n      return cellSize[idx] != null && cellSize[idx] !== 'auto';\n    } // Has been calculated out number.\n\n\n    this._sw = cellSize[0];\n    this._sh = cellSize[1];\n  };\n  /**\n   * Convert a time data(time, value) item to (x, y) point.\n   */\n  // TODO Clamp of calendar is not same with cartesian coordinate systems.\n  // It will return NaN if data exceeds.\n\n\n  Calendar.prototype.dataToPoint = function (data, clamp) {\n    zrUtil.isArray(data) && (data = data[0]);\n    clamp == null && (clamp = true);\n    var dayInfo = this.getDateInfo(data);\n    var range = this._rangeInfo;\n    var date = dayInfo.formatedDate; // if not in range return [NaN, NaN]\n\n    if (clamp && !(dayInfo.time >= range.start.time && dayInfo.time < range.end.time + PROXIMATE_ONE_DAY)) {\n      return [NaN, NaN];\n    }\n\n    var week = dayInfo.day;\n\n    var nthWeek = this._getRangeInfo([range.start.time, date]).nthWeek;\n\n    if (this._orient === 'vertical') {\n      return [this._rect.x + week * this._sw + this._sw / 2, this._rect.y + nthWeek * this._sh + this._sh / 2];\n    }\n\n    return [this._rect.x + nthWeek * this._sw + this._sw / 2, this._rect.y + week * this._sh + this._sh / 2];\n  };\n  /**\n   * Convert a (x, y) point to time data\n   */\n\n\n  Calendar.prototype.pointToData = function (point) {\n    var date = this.pointToDate(point);\n    return date && date.time;\n  };\n  /**\n   * Convert a time date item to (x, y) four point.\n   */\n\n\n  Calendar.prototype.dataToRect = function (data, clamp) {\n    var point = this.dataToPoint(data, clamp);\n    return {\n      contentShape: {\n        x: point[0] - (this._sw - this._lineWidth) / 2,\n        y: point[1] - (this._sh - this._lineWidth) / 2,\n        width: this._sw - this._lineWidth,\n        height: this._sh - this._lineWidth\n      },\n      center: point,\n      tl: [point[0] - this._sw / 2, point[1] - this._sh / 2],\n      tr: [point[0] + this._sw / 2, point[1] - this._sh / 2],\n      br: [point[0] + this._sw / 2, point[1] + this._sh / 2],\n      bl: [point[0] - this._sw / 2, point[1] + this._sh / 2]\n    };\n  };\n  /**\n   * Convert a (x, y) point to time date\n   *\n   * @param  {Array} point point\n   * @return {Object}       date\n   */\n\n\n  Calendar.prototype.pointToDate = function (point) {\n    var nthX = Math.floor((point[0] - this._rect.x) / this._sw) + 1;\n    var nthY = Math.floor((point[1] - this._rect.y) / this._sh) + 1;\n    var range = this._rangeInfo.range;\n\n    if (this._orient === 'vertical') {\n      return this._getDateByWeeksAndDay(nthY, nthX - 1, range);\n    }\n\n    return this._getDateByWeeksAndDay(nthX, nthY - 1, range);\n  };\n\n  Calendar.prototype.convertToPixel = function (ecModel, finder, value) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? coordSys.dataToPoint(value) : null;\n  };\n\n  Calendar.prototype.convertFromPixel = function (ecModel, finder, pixel) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? coordSys.pointToData(pixel) : null;\n  };\n\n  Calendar.prototype.containPoint = function (point) {\n    console.warn('Not implemented.');\n    return false;\n  };\n  /**\n   * initRange\n   * Normalize to an [start, end] array\n   */\n\n\n  Calendar.prototype._initRangeOption = function () {\n    var range = this._model.get('range');\n\n    var normalizedRange; // Convert [1990] to 1990\n\n    if (zrUtil.isArray(range) && range.length === 1) {\n      range = range[0];\n    }\n\n    if (!zrUtil.isArray(range)) {\n      var rangeStr = range.toString(); // One year.\n\n      if (/^\\d{4}$/.test(rangeStr)) {\n        normalizedRange = [rangeStr + '-01-01', rangeStr + '-12-31'];\n      } // One month\n\n\n      if (/^\\d{4}[\\/|-]\\d{1,2}$/.test(rangeStr)) {\n        var start = this.getDateInfo(rangeStr);\n        var firstDay = start.date;\n        firstDay.setMonth(firstDay.getMonth() + 1);\n        var end = this.getNextNDay(firstDay, -1);\n        normalizedRange = [start.formatedDate, end.formatedDate];\n      } // One day\n\n\n      if (/^\\d{4}[\\/|-]\\d{1,2}[\\/|-]\\d{1,2}$/.test(rangeStr)) {\n        normalizedRange = [rangeStr, rangeStr];\n      }\n    } else {\n      normalizedRange = range;\n    }\n\n    if (!normalizedRange) {\n      if (process.env.NODE_ENV !== 'production') {\n        zrUtil.logError('Invalid date range.');\n      } // Not handling it.\n\n\n      return range;\n    }\n\n    var tmp = this._getRangeInfo(normalizedRange);\n\n    if (tmp.start.time > tmp.end.time) {\n      normalizedRange.reverse();\n    }\n\n    return normalizedRange;\n  };\n  /**\n   * range info\n   *\n   * @private\n   * @param  {Array} range range ['2017-01-01', '2017-07-08']\n   *  If range[0] > range[1], they will not be reversed.\n   * @return {Object}       obj\n   */\n\n\n  Calendar.prototype._getRangeInfo = function (range) {\n    var parsedRange = [this.getDateInfo(range[0]), this.getDateInfo(range[1])];\n    var reversed;\n\n    if (parsedRange[0].time > parsedRange[1].time) {\n      reversed = true;\n      parsedRange.reverse();\n    }\n\n    var allDay = Math.floor(parsedRange[1].time / PROXIMATE_ONE_DAY) - Math.floor(parsedRange[0].time / PROXIMATE_ONE_DAY) + 1; // Consider case1 (#11677 #10430):\n    // Set the system timezone as \"UK\", set the range to `['2016-07-01', '2016-12-31']`\n    // Consider case2:\n    // Firstly set system timezone as \"Time Zone: America/Toronto\",\n    // ```\n    // let first = new Date(1478412000000 - 3600 * 1000 * 2.5);\n    // let second = new Date(1478412000000);\n    // let allDays = Math.floor(second / ONE_DAY) - Math.floor(first / ONE_DAY) + 1;\n    // ```\n    // will get wrong result because of DST. So we should fix it.\n\n    var date = new Date(parsedRange[0].time);\n    var startDateNum = date.getDate();\n    var endDateNum = parsedRange[1].date.getDate();\n    date.setDate(startDateNum + allDay - 1); // The bias can not over a month, so just compare date.\n\n    var dateNum = date.getDate();\n\n    if (dateNum !== endDateNum) {\n      var sign = date.getTime() - parsedRange[1].time > 0 ? 1 : -1;\n\n      while ((dateNum = date.getDate()) !== endDateNum && (date.getTime() - parsedRange[1].time) * sign > 0) {\n        allDay -= sign;\n        date.setDate(dateNum - sign);\n      }\n    }\n\n    var weeks = Math.floor((allDay + parsedRange[0].day + 6) / 7);\n    var nthWeek = reversed ? -weeks + 1 : weeks - 1;\n    reversed && parsedRange.reverse();\n    return {\n      range: [parsedRange[0].formatedDate, parsedRange[1].formatedDate],\n      start: parsedRange[0],\n      end: parsedRange[1],\n      allDay: allDay,\n      weeks: weeks,\n      // From 0.\n      nthWeek: nthWeek,\n      fweek: parsedRange[0].day,\n      lweek: parsedRange[1].day\n    };\n  };\n  /**\n   * get date by nthWeeks and week day in range\n   *\n   * @private\n   * @param  {number} nthWeek the week\n   * @param  {number} day   the week day\n   * @param  {Array} range [d1, d2]\n   * @return {Object}\n   */\n\n\n  Calendar.prototype._getDateByWeeksAndDay = function (nthWeek, day, range) {\n    var rangeInfo = this._getRangeInfo(range);\n\n    if (nthWeek > rangeInfo.weeks || nthWeek === 0 && day < rangeInfo.fweek || nthWeek === rangeInfo.weeks && day > rangeInfo.lweek) {\n      return null;\n    }\n\n    var nthDay = (nthWeek - 1) * 7 - rangeInfo.fweek + day;\n    var date = new Date(rangeInfo.start.time);\n    date.setDate(+rangeInfo.start.d + nthDay);\n    return this.getDateInfo(date);\n  };\n\n  Calendar.create = function (ecModel, api) {\n    var calendarList = [];\n    ecModel.eachComponent('calendar', function (calendarModel) {\n      var calendar = new Calendar(calendarModel, ecModel, api);\n      calendarList.push(calendar);\n      calendarModel.coordinateSystem = calendar;\n    });\n    ecModel.eachSeries(function (calendarSeries) {\n      if (calendarSeries.get('coordinateSystem') === 'calendar') {\n        // Inject coordinate system\n        calendarSeries.coordinateSystem = calendarList[calendarSeries.get('calendarIndex') || 0];\n      }\n    });\n    return calendarList;\n  };\n\n  Calendar.dimensions = ['time', 'value'];\n  return Calendar;\n}();\n\nfunction getCoordSys(finder) {\n  var calendarModel = finder.calendarModel;\n  var seriesModel = finder.seriesModel;\n  var coordSys = calendarModel ? calendarModel.coordinateSystem : seriesModel ? seriesModel.coordinateSystem : null;\n  return coordSys;\n}\n\nexport default Calendar;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as modelUtil from '../../util/model';\nimport * as graphicUtil from '../../util/graphic';\nimport * as layoutUtil from '../../util/layout';\nimport { parsePercent } from '../../util/number';\nimport ComponentModel from '../../model/Component';\nimport ComponentView from '../../view/Component';\nimport { getECData } from '../../util/innerStore';\nimport { isEC4CompatibleStyle, convertFromEC4CompatibleStyle } from '../../util/styleCompat';\nvar TRANSFORM_PROPS = {\n  x: 1,\n  y: 1,\n  scaleX: 1,\n  scaleY: 1,\n  originX: 1,\n  originY: 1,\n  rotation: 1\n};\n;\nvar inner = modelUtil.makeInner();\nvar _nonShapeGraphicElements = {\n  // Reserved but not supported in graphic component.\n  path: null,\n  compoundPath: null,\n  // Supported in graphic component.\n  group: graphicUtil.Group,\n  image: graphicUtil.Image,\n  text: graphicUtil.Text\n}; // ------------------------\n// Preprocessor\n// ------------------------\n\nvar preprocessor = function preprocessor(option) {\n  var graphicOption = option.graphic; // Convert\n  // {graphic: [{left: 10, type: 'circle'}, ...]}\n  // or\n  // {graphic: {left: 10, type: 'circle'}}\n  // to\n  // {graphic: [{elements: [{left: 10, type: 'circle'}, ...]}]}\n\n  if (zrUtil.isArray(graphicOption)) {\n    if (!graphicOption[0] || !graphicOption[0].elements) {\n      option.graphic = [{\n        elements: graphicOption\n      }];\n    } else {\n      // Only one graphic instance can be instantiated. (We dont\n      // want that too many views are created in echarts._viewMap)\n      option.graphic = [option.graphic[0]];\n    }\n  } else if (graphicOption && !graphicOption.elements) {\n    option.graphic = [{\n      elements: [graphicOption]\n    }];\n  }\n};\n\n;\n\nvar GraphicComponentModel =\n/** @class */\nfunction (_super) {\n  __extends(GraphicComponentModel, _super);\n\n  function GraphicComponentModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = GraphicComponentModel.type;\n    _this.preventAutoZ = true;\n    return _this;\n  }\n\n  GraphicComponentModel.prototype.mergeOption = function (option, ecModel) {\n    // Prevent default merge to elements\n    var elements = this.option.elements;\n    this.option.elements = null;\n\n    _super.prototype.mergeOption.call(this, option, ecModel);\n\n    this.option.elements = elements;\n  };\n\n  GraphicComponentModel.prototype.optionUpdated = function (newOption, isInit) {\n    var thisOption = this.option;\n    var newList = (isInit ? thisOption : newOption).elements;\n    var existList = thisOption.elements = isInit ? [] : thisOption.elements;\n    var flattenedList = [];\n\n    this._flatten(newList, flattenedList, null);\n\n    var mappingResult = modelUtil.mappingToExists(existList, flattenedList, 'normalMerge'); // Clear elOptionsToUpdate\n\n    var elOptionsToUpdate = this._elOptionsToUpdate = [];\n    zrUtil.each(mappingResult, function (resultItem, index) {\n      var newElOption = resultItem.newOption;\n\n      if (process.env.NODE_ENV !== 'production') {\n        zrUtil.assert(zrUtil.isObject(newElOption) || resultItem.existing, 'Empty graphic option definition');\n      }\n\n      if (!newElOption) {\n        return;\n      }\n\n      elOptionsToUpdate.push(newElOption);\n      setKeyInfoToNewElOption(resultItem, newElOption);\n      mergeNewElOptionToExist(existList, index, newElOption);\n      setLayoutInfoToExist(existList[index], newElOption);\n    }, this); // Clean\n\n    for (var i = existList.length - 1; i >= 0; i--) {\n      if (existList[i] == null) {\n        existList.splice(i, 1);\n      } else {\n        // $action should be volatile, otherwise option gotten from\n        // `getOption` will contain unexpected $action.\n        delete existList[i].$action;\n      }\n    }\n  };\n  /**\n   * Convert\n   * [{\n   *  type: 'group',\n   *  id: 'xx',\n   *  children: [{type: 'circle'}, {type: 'polygon'}]\n   * }]\n   * to\n   * [\n   *  {type: 'group', id: 'xx'},\n   *  {type: 'circle', parentId: 'xx'},\n   *  {type: 'polygon', parentId: 'xx'}\n   * ]\n   */\n\n\n  GraphicComponentModel.prototype._flatten = function (optionList, result, parentOption) {\n    zrUtil.each(optionList, function (option) {\n      if (!option) {\n        return;\n      }\n\n      if (parentOption) {\n        option.parentOption = parentOption;\n      }\n\n      result.push(option);\n      var children = option.children;\n\n      if (option.type === 'group' && children) {\n        this._flatten(children, result, option);\n      } // Deleting for JSON output, and for not affecting group creation.\n\n\n      delete option.children;\n    }, this);\n  }; // FIXME\n  // Pass to view using payload? setOption has a payload?\n\n\n  GraphicComponentModel.prototype.useElOptionsToUpdate = function () {\n    var els = this._elOptionsToUpdate; // Clear to avoid render duplicately when zooming.\n\n    this._elOptionsToUpdate = null;\n    return els;\n  };\n\n  GraphicComponentModel.type = 'graphic';\n  GraphicComponentModel.defaultOption = {\n    elements: [] // parentId: null\n\n  };\n  return GraphicComponentModel;\n}(ComponentModel); // ------------------------\n// View\n// ------------------------\n\n\nvar GraphicComponentView =\n/** @class */\nfunction (_super) {\n  __extends(GraphicComponentView, _super);\n\n  function GraphicComponentView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = GraphicComponentView.type;\n    return _this;\n  }\n\n  GraphicComponentView.prototype.init = function () {\n    this._elMap = zrUtil.createHashMap();\n  };\n\n  GraphicComponentView.prototype.render = function (graphicModel, ecModel, api) {\n    // Having leveraged between use cases and algorithm complexity, a very\n    // simple layout mechanism is used:\n    // The size(width/height) can be determined by itself or its parent (not\n    // implemented yet), but can not by its children. (Top-down travel)\n    // The location(x/y) can be determined by the bounding rect of itself\n    // (can including its descendants or not) and the size of its parent.\n    // (Bottom-up travel)\n    // When `chart.clear()` or `chart.setOption({...}, true)` with the same id,\n    // view will be reused.\n    if (graphicModel !== this._lastGraphicModel) {\n      this._clear();\n    }\n\n    this._lastGraphicModel = graphicModel;\n\n    this._updateElements(graphicModel);\n\n    this._relocate(graphicModel, api);\n  };\n  /**\n   * Update graphic elements.\n   */\n\n\n  GraphicComponentView.prototype._updateElements = function (graphicModel) {\n    var elOptionsToUpdate = graphicModel.useElOptionsToUpdate();\n\n    if (!elOptionsToUpdate) {\n      return;\n    }\n\n    var elMap = this._elMap;\n    var rootGroup = this.group; // Top-down tranverse to assign graphic settings to each elements.\n\n    zrUtil.each(elOptionsToUpdate, function (elOption) {\n      var id = modelUtil.convertOptionIdName(elOption.id, null);\n      var elExisting = id != null ? elMap.get(id) : null;\n      var parentId = modelUtil.convertOptionIdName(elOption.parentId, null);\n      var targetElParent = parentId != null ? elMap.get(parentId) : rootGroup;\n      var elType = elOption.type;\n      var elOptionStyle = elOption.style;\n\n      if (elType === 'text' && elOptionStyle) {\n        // In top/bottom mode, textVerticalAlign should not be used, which cause\n        // inaccurately locating.\n        if (elOption.hv && elOption.hv[1]) {\n          elOptionStyle.textVerticalAlign = elOptionStyle.textBaseline = elOptionStyle.verticalAlign = elOptionStyle.align = null;\n        }\n      }\n\n      var textContentOption = elOption.textContent;\n      var textConfig = elOption.textConfig;\n\n      if (elOptionStyle && isEC4CompatibleStyle(elOptionStyle, elType, !!textConfig, !!textContentOption)) {\n        var convertResult = convertFromEC4CompatibleStyle(elOptionStyle, elType, true);\n\n        if (!textConfig && convertResult.textConfig) {\n          textConfig = elOption.textConfig = convertResult.textConfig;\n        }\n\n        if (!textContentOption && convertResult.textContent) {\n          textContentOption = convertResult.textContent;\n        }\n      } // Remove unnecessary props to avoid potential problems.\n\n\n      var elOptionCleaned = getCleanedElOption(elOption); // For simple, do not support parent change, otherwise reorder is needed.\n\n      if (process.env.NODE_ENV !== 'production') {\n        elExisting && zrUtil.assert(targetElParent === elExisting.parent, 'Changing parent is not supported.');\n      }\n\n      var $action = elOption.$action || 'merge';\n\n      if ($action === 'merge') {\n        elExisting ? elExisting.attr(elOptionCleaned) : createEl(id, targetElParent, elOptionCleaned, elMap);\n      } else if ($action === 'replace') {\n        removeEl(elExisting, elMap);\n        createEl(id, targetElParent, elOptionCleaned, elMap);\n      } else if ($action === 'remove') {\n        removeEl(elExisting, elMap);\n      }\n\n      var el = elMap.get(id);\n\n      if (el && textContentOption) {\n        if ($action === 'merge') {\n          var textContentExisting = el.getTextContent();\n          textContentExisting ? textContentExisting.attr(textContentOption) : el.setTextContent(new graphicUtil.Text(textContentOption));\n        } else if ($action === 'replace') {\n          el.setTextContent(new graphicUtil.Text(textContentOption));\n        }\n      }\n\n      if (el) {\n        var elInner = inner(el);\n        elInner.__ecGraphicWidthOption = elOption.width;\n        elInner.__ecGraphicHeightOption = elOption.height;\n        setEventData(el, graphicModel, elOption);\n        graphicUtil.setTooltipConfig({\n          el: el,\n          componentModel: graphicModel,\n          itemName: el.name,\n          itemTooltipOption: elOption.tooltip\n        });\n      }\n    });\n  };\n  /**\n   * Locate graphic elements.\n   */\n\n\n  GraphicComponentView.prototype._relocate = function (graphicModel, api) {\n    var elOptions = graphicModel.option.elements;\n    var rootGroup = this.group;\n    var elMap = this._elMap;\n    var apiWidth = api.getWidth();\n    var apiHeight = api.getHeight(); // Top-down to calculate percentage width/height of group\n\n    for (var i = 0; i < elOptions.length; i++) {\n      var elOption = elOptions[i];\n      var id = modelUtil.convertOptionIdName(elOption.id, null);\n      var el = id != null ? elMap.get(id) : null;\n\n      if (!el || !el.isGroup) {\n        continue;\n      }\n\n      var parentEl = el.parent;\n      var isParentRoot = parentEl === rootGroup; // Like 'position:absolut' in css, default 0.\n\n      var elInner = inner(el);\n      var parentElInner = inner(parentEl);\n      elInner.__ecGraphicWidth = parsePercent(elInner.__ecGraphicWidthOption, isParentRoot ? apiWidth : parentElInner.__ecGraphicWidth) || 0;\n      elInner.__ecGraphicHeight = parsePercent(elInner.__ecGraphicHeightOption, isParentRoot ? apiHeight : parentElInner.__ecGraphicHeight) || 0;\n    } // Bottom-up tranvese all elements (consider ec resize) to locate elements.\n\n\n    for (var i = elOptions.length - 1; i >= 0; i--) {\n      var elOption = elOptions[i];\n      var id = modelUtil.convertOptionIdName(elOption.id, null);\n      var el = id != null ? elMap.get(id) : null;\n\n      if (!el) {\n        continue;\n      }\n\n      var parentEl = el.parent;\n      var parentElInner = inner(parentEl);\n      var containerInfo = parentEl === rootGroup ? {\n        width: apiWidth,\n        height: apiHeight\n      } : {\n        width: parentElInner.__ecGraphicWidth,\n        height: parentElInner.__ecGraphicHeight\n      }; // PENDING\n      // Currently, when `bounding: 'all'`, the union bounding rect of the group\n      // does not include the rect of [0, 0, group.width, group.height], which\n      // is probably weird for users. Should we make a break change for it?\n\n      layoutUtil.positionElement(el, elOption, containerInfo, null, {\n        hv: elOption.hv,\n        boundingMode: elOption.bounding\n      });\n    }\n  };\n  /**\n   * Clear all elements.\n   */\n\n\n  GraphicComponentView.prototype._clear = function () {\n    var elMap = this._elMap;\n    elMap.each(function (el) {\n      removeEl(el, elMap);\n    });\n    this._elMap = zrUtil.createHashMap();\n  };\n\n  GraphicComponentView.prototype.dispose = function () {\n    this._clear();\n  };\n\n  GraphicComponentView.type = 'graphic';\n  return GraphicComponentView;\n}(ComponentView);\n\nfunction createEl(id, targetElParent, elOption, elMap) {\n  var graphicType = elOption.type;\n\n  if (process.env.NODE_ENV !== 'production') {\n    zrUtil.assert(graphicType, 'graphic type MUST be set');\n  }\n\n  var Clz = zrUtil.hasOwn(_nonShapeGraphicElements, graphicType) // Those graphic elements are not shapes. They should not be\n  // overwritten by users, so do them first.\n  ? _nonShapeGraphicElements[graphicType] : graphicUtil.getShapeClass(graphicType);\n\n  if (process.env.NODE_ENV !== 'production') {\n    zrUtil.assert(Clz, 'graphic type can not be found');\n  }\n\n  var el = new Clz(elOption);\n  targetElParent.add(el);\n  elMap.set(id, el);\n  inner(el).__ecGraphicId = id;\n}\n\nfunction removeEl(elExisting, elMap) {\n  var existElParent = elExisting && elExisting.parent;\n\n  if (existElParent) {\n    elExisting.type === 'group' && elExisting.traverse(function (el) {\n      removeEl(el, elMap);\n    });\n    elMap.removeKey(inner(elExisting).__ecGraphicId);\n    existElParent.remove(elExisting);\n  }\n} // Remove unnecessary props to avoid potential problems.\n\n\nfunction getCleanedElOption(elOption) {\n  elOption = zrUtil.extend({}, elOption);\n  zrUtil.each(['id', 'parentId', '$action', 'hv', 'bounding', 'textContent'].concat(layoutUtil.LOCATION_PARAMS), function (name) {\n    delete elOption[name];\n  });\n  return elOption;\n}\n\nfunction isSetLoc(obj, props) {\n  var isSet;\n  zrUtil.each(props, function (prop) {\n    obj[prop] != null && obj[prop] !== 'auto' && (isSet = true);\n  });\n  return isSet;\n}\n\nfunction setKeyInfoToNewElOption(resultItem, newElOption) {\n  var existElOption = resultItem.existing; // Set id and type after id assigned.\n\n  newElOption.id = resultItem.keyInfo.id;\n  !newElOption.type && existElOption && (newElOption.type = existElOption.type); // Set parent id if not specified\n\n  if (newElOption.parentId == null) {\n    var newElParentOption = newElOption.parentOption;\n\n    if (newElParentOption) {\n      newElOption.parentId = newElParentOption.id;\n    } else if (existElOption) {\n      newElOption.parentId = existElOption.parentId;\n    }\n  } // Clear\n\n\n  newElOption.parentOption = null;\n}\n\nfunction mergeNewElOptionToExist(existList, index, newElOption) {\n  // Update existing options, for `getOption` feature.\n  var newElOptCopy = zrUtil.extend({}, newElOption);\n  var existElOption = existList[index];\n  var $action = newElOption.$action || 'merge';\n\n  if ($action === 'merge') {\n    if (existElOption) {\n      if (process.env.NODE_ENV !== 'production') {\n        var newType = newElOption.type;\n        zrUtil.assert(!newType || existElOption.type === newType, 'Please set $action: \"replace\" to change `type`');\n      } // We can ensure that newElOptCopy and existElOption are not\n      // the same object, so `merge` will not change newElOptCopy.\n\n\n      zrUtil.merge(existElOption, newElOptCopy, true); // Rigid body, use ignoreSize.\n\n      layoutUtil.mergeLayoutParam(existElOption, newElOptCopy, {\n        ignoreSize: true\n      }); // Will be used in render.\n\n      layoutUtil.copyLayoutParams(newElOption, existElOption);\n    } else {\n      existList[index] = newElOptCopy;\n    }\n  } else if ($action === 'replace') {\n    existList[index] = newElOptCopy;\n  } else if ($action === 'remove') {\n    // null will be cleaned later.\n    existElOption && (existList[index] = null);\n  }\n}\n\nfunction setLayoutInfoToExist(existItem, newElOption) {\n  if (!existItem) {\n    return;\n  }\n\n  existItem.hv = newElOption.hv = [// Rigid body, dont care `width`.\n  isSetLoc(newElOption, ['left', 'right']), // Rigid body, dont care `height`.\n  isSetLoc(newElOption, ['top', 'bottom'])]; // Give default group size. Otherwise layout error may occur.\n\n  if (existItem.type === 'group') {\n    var existingGroupOpt = existItem;\n    var newGroupOpt = newElOption;\n    existingGroupOpt.width == null && (existingGroupOpt.width = newGroupOpt.width = 0);\n    existingGroupOpt.height == null && (existingGroupOpt.height = newGroupOpt.height = 0);\n  }\n}\n\nfunction setEventData(el, graphicModel, elOption) {\n  var eventData = getECData(el).eventData; // Simple optimize for large amount of elements that no need event.\n\n  if (!el.silent && !el.ignore && !eventData) {\n    eventData = getECData(el).eventData = {\n      componentType: 'graphic',\n      componentIndex: graphicModel.componentIndex,\n      name: el.name\n    };\n  } // `elOption.info` enables user to mount some info on\n  // elements and use them in event handlers.\n\n\n  if (eventData) {\n    eventData.info = elOption.info;\n  }\n}\n\nexport function install(registers) {\n  registers.registerComponentModel(GraphicComponentModel);\n  registers.registerComponentView(GraphicComponentView);\n  registers.registerPreprocessor(preprocessor);\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { indexOf, createHashMap, assert } from 'zrender/lib/core/util';\nexport var DATA_ZOOM_AXIS_DIMENSIONS = ['x', 'y', 'radius', 'angle', 'single']; // Supported coords.\n// FIXME: polar has been broken (but rarely used).\n\nvar SERIES_COORDS = ['cartesian2d', 'polar', 'singleAxis'];\nexport function isCoordSupported(seriesModel) {\n  var coordType = seriesModel.get('coordinateSystem');\n  return indexOf(SERIES_COORDS, coordType) >= 0;\n}\nexport function getAxisMainType(axisDim) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(axisDim);\n  }\n\n  return axisDim + 'Axis';\n}\nexport function getAxisIndexPropName(axisDim) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(axisDim);\n  }\n\n  return axisDim + 'AxisIndex';\n}\nexport function getAxisIdPropName(axisDim) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(axisDim);\n  }\n\n  return axisDim + 'AxisId';\n}\n/**\n * If two dataZoomModels has the same axis controlled, we say that they are 'linked'.\n * This function finds all linked dataZoomModels start from the given payload.\n */\n\nexport function findEffectedDataZooms(ecModel, payload) {\n  // Key: `DataZoomAxisDimension`\n  var axisRecords = createHashMap();\n  var effectedModels = []; // Key: uid of dataZoomModel\n\n  var effectedModelMap = createHashMap(); // Find the dataZooms specified by payload.\n\n  ecModel.eachComponent({\n    mainType: 'dataZoom',\n    query: payload\n  }, function (dataZoomModel) {\n    if (!effectedModelMap.get(dataZoomModel.uid)) {\n      addToEffected(dataZoomModel);\n    }\n  }); // Start from the given dataZoomModels, travel the graph to find\n  // all of the linked dataZoom models.\n\n  var foundNewLink;\n\n  do {\n    foundNewLink = false;\n    ecModel.eachComponent('dataZoom', processSingle);\n  } while (foundNewLink);\n\n  function processSingle(dataZoomModel) {\n    if (!effectedModelMap.get(dataZoomModel.uid) && isLinked(dataZoomModel)) {\n      addToEffected(dataZoomModel);\n      foundNewLink = true;\n    }\n  }\n\n  function addToEffected(dataZoom) {\n    effectedModelMap.set(dataZoom.uid, true);\n    effectedModels.push(dataZoom);\n    markAxisControlled(dataZoom);\n  }\n\n  function isLinked(dataZoomModel) {\n    var isLink = false;\n    dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n      var axisIdxArr = axisRecords.get(axisDim);\n\n      if (axisIdxArr && axisIdxArr[axisIndex]) {\n        isLink = true;\n      }\n    });\n    return isLink;\n  }\n\n  function markAxisControlled(dataZoomModel) {\n    dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n      (axisRecords.get(axisDim) || axisRecords.set(axisDim, []))[axisIndex] = true;\n    });\n  }\n\n  return effectedModels;\n}\n/**\n * Find the first target coordinate system.\n * Available after model built.\n *\n * @return Like {\n *                  grid: [\n *                      {model: coord0, axisModels: [axis1, axis3], coordIndex: 1},\n *                      {model: coord1, axisModels: [axis0, axis2], coordIndex: 0},\n *                      ...\n *                  ],  // cartesians must not be null/undefined.\n *                  polar: [\n *                      {model: coord0, axisModels: [axis4], coordIndex: 0},\n *                      ...\n *                  ],  // polars must not be null/undefined.\n *                  singleAxis: [\n *                      {model: coord0, axisModels: [], coordIndex: 0}\n *                  ]\n *              }\n */\n\nexport function collectReferCoordSysModelInfo(dataZoomModel) {\n  var ecModel = dataZoomModel.ecModel;\n  var coordSysInfoWrap = {\n    infoList: [],\n    infoMap: createHashMap()\n  };\n  dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n    var axisModel = ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n\n    if (!axisModel) {\n      return;\n    }\n\n    var coordSysModel = axisModel.getCoordSysModel();\n\n    if (!coordSysModel) {\n      return;\n    }\n\n    var coordSysUid = coordSysModel.uid;\n    var coordSysInfo = coordSysInfoWrap.infoMap.get(coordSysUid);\n\n    if (!coordSysInfo) {\n      coordSysInfo = {\n        model: coordSysModel,\n        axisModels: []\n      };\n      coordSysInfoWrap.infoList.push(coordSysInfo);\n      coordSysInfoWrap.infoMap.set(coordSysUid, coordSysInfo);\n    }\n\n    coordSysInfo.axisModels.push(axisModel);\n  });\n  return coordSysInfoWrap;\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { each, createHashMap, merge, assert } from 'zrender/lib/core/util';\nimport ComponentModel from '../../model/Component';\nimport { getAxisMainType, DATA_ZOOM_AXIS_DIMENSIONS } from './helper';\nimport { MULTIPLE_REFERRING, SINGLE_REFERRING } from '../../util/model';\n\nvar DataZoomAxisInfo =\n/** @class */\nfunction () {\n  function DataZoomAxisInfo() {\n    this.indexList = [];\n    this.indexMap = [];\n  }\n\n  DataZoomAxisInfo.prototype.add = function (axisCmptIdx) {\n    // Remove duplication.\n    if (!this.indexMap[axisCmptIdx]) {\n      this.indexList.push(axisCmptIdx);\n      this.indexMap[axisCmptIdx] = true;\n    }\n  };\n\n  return DataZoomAxisInfo;\n}();\n\nvar DataZoomModel =\n/** @class */\nfunction (_super) {\n  __extends(DataZoomModel, _super);\n\n  function DataZoomModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = DataZoomModel.type;\n    _this._autoThrottle = true;\n    _this._noTarget = true;\n    /**\n     * It is `[rangeModeForMin, rangeModeForMax]`.\n     * The optional values for `rangeMode`:\n     * + `'value'` mode: the axis extent will always be determined by\n     *     `dataZoom.startValue` and `dataZoom.endValue`, despite\n     *     how data like and how `axis.min` and `axis.max` are.\n     * + `'percent'` mode: `100` represents 100% of the `[dMin, dMax]`,\n     *     where `dMin` is `axis.min` if `axis.min` specified, otherwise `data.extent[0]`,\n     *     and `dMax` is `axis.max` if `axis.max` specified, otherwise `data.extent[1]`.\n     *     Axis extent will be determined by the result of the percent of `[dMin, dMax]`.\n     *\n     * For example, when users are using dynamic data (update data periodically via `setOption`),\n     * if in `'value`' mode, the window will be kept in a fixed value range despite how\n     * data are appended, while if in `'percent'` mode, whe window range will be changed alone with\n     * the appended data (suppose `axis.min` and `axis.max` are not specified).\n     */\n\n    _this._rangePropMode = ['percent', 'percent'];\n    return _this;\n  }\n\n  DataZoomModel.prototype.init = function (option, parentModel, ecModel) {\n    var inputRawOption = retrieveRawOption(option);\n    /**\n     * Suppose a \"main process\" start at the point that model prepared (that is,\n     * model initialized or merged or method called in `action`).\n     * We should keep the `main process` idempotent, that is, given a set of values\n     * on `option`, we get the same result.\n     *\n     * But sometimes, values on `option` will be updated for providing users\n     * a \"final calculated value\" (`dataZoomProcessor` will do that). Those value\n     * should not be the base/input of the `main process`.\n     *\n     * So in that case we should save and keep the input of the `main process`\n     * separately, called `settledOption`.\n     *\n     * For example, consider the case:\n     * (Step_1) brush zoom the grid by `toolbox.dataZoom`,\n     *     where the original input `option.startValue`, `option.endValue` are earsed by\n     *     calculated value.\n     * (Step)2) click the legend to hide and show a series,\n     *     where the new range is calculated by the earsed `startValue` and `endValue`,\n     *     which brings incorrect result.\n     */\n\n    this.settledOption = inputRawOption;\n    this.mergeDefaultAndTheme(option, ecModel);\n\n    this._doInit(inputRawOption);\n  };\n\n  DataZoomModel.prototype.mergeOption = function (newOption) {\n    var inputRawOption = retrieveRawOption(newOption); //FIX #2591\n\n    merge(this.option, newOption, true);\n    merge(this.settledOption, inputRawOption, true);\n\n    this._doInit(inputRawOption);\n  };\n\n  DataZoomModel.prototype._doInit = function (inputRawOption) {\n    var thisOption = this.option; // if (!env.canvasSupported) {\n    //     thisOption.realtime = false;\n    // }\n\n    this._setDefaultThrottle(inputRawOption);\n\n    this._updateRangeUse(inputRawOption);\n\n    var settledOption = this.settledOption;\n    each([['start', 'startValue'], ['end', 'endValue']], function (names, index) {\n      // start/end has higher priority over startValue/endValue if they\n      // both set, but we should make chart.setOption({endValue: 1000})\n      // effective, rather than chart.setOption({endValue: 1000, end: null}).\n      if (this._rangePropMode[index] === 'value') {\n        thisOption[names[0]] = settledOption[names[0]] = null;\n      } // Otherwise do nothing and use the merge result.\n\n    }, this);\n\n    this._resetTarget();\n  };\n\n  DataZoomModel.prototype._resetTarget = function () {\n    var optionOrient = this.get('orient', true);\n    var targetAxisIndexMap = this._targetAxisInfoMap = createHashMap();\n\n    var hasAxisSpecified = this._fillSpecifiedTargetAxis(targetAxisIndexMap);\n\n    if (hasAxisSpecified) {\n      this._orient = optionOrient || this._makeAutoOrientByTargetAxis();\n    } else {\n      this._orient = optionOrient || 'horizontal';\n\n      this._fillAutoTargetAxisByOrient(targetAxisIndexMap, this._orient);\n    }\n\n    this._noTarget = true;\n    targetAxisIndexMap.each(function (axisInfo) {\n      if (axisInfo.indexList.length) {\n        this._noTarget = false;\n      }\n    }, this);\n  };\n\n  DataZoomModel.prototype._fillSpecifiedTargetAxis = function (targetAxisIndexMap) {\n    var hasAxisSpecified = false;\n    each(DATA_ZOOM_AXIS_DIMENSIONS, function (axisDim) {\n      var refering = this.getReferringComponents(getAxisMainType(axisDim), MULTIPLE_REFERRING); // When user set axisIndex as a empty array, we think that user specify axisIndex\n      // but do not want use auto mode. Because empty array may be encountered when\n      // some error occured.\n\n      if (!refering.specified) {\n        return;\n      }\n\n      hasAxisSpecified = true;\n      var axisInfo = new DataZoomAxisInfo();\n      each(refering.models, function (axisModel) {\n        axisInfo.add(axisModel.componentIndex);\n      });\n      targetAxisIndexMap.set(axisDim, axisInfo);\n    }, this);\n    return hasAxisSpecified;\n  };\n\n  DataZoomModel.prototype._fillAutoTargetAxisByOrient = function (targetAxisIndexMap, orient) {\n    var ecModel = this.ecModel;\n    var needAuto = true; // Find axis that parallel to dataZoom as default.\n\n    if (needAuto) {\n      var axisDim = orient === 'vertical' ? 'y' : 'x';\n      var axisModels = ecModel.findComponents({\n        mainType: axisDim + 'Axis'\n      });\n      setParallelAxis(axisModels, axisDim);\n    } // Find axis that parallel to dataZoom as default.\n\n\n    if (needAuto) {\n      var axisModels = ecModel.findComponents({\n        mainType: 'singleAxis',\n        filter: function filter(axisModel) {\n          return axisModel.get('orient', true) === orient;\n        }\n      });\n      setParallelAxis(axisModels, 'single');\n    }\n\n    function setParallelAxis(axisModels, axisDim) {\n      // At least use the first parallel axis as the target axis.\n      var axisModel = axisModels[0];\n\n      if (!axisModel) {\n        return;\n      }\n\n      var axisInfo = new DataZoomAxisInfo();\n      axisInfo.add(axisModel.componentIndex);\n      targetAxisIndexMap.set(axisDim, axisInfo);\n      needAuto = false; // Find parallel axes in the same grid.\n\n      if (axisDim === 'x' || axisDim === 'y') {\n        var gridModel_1 = axisModel.getReferringComponents('grid', SINGLE_REFERRING).models[0];\n        gridModel_1 && each(axisModels, function (axModel) {\n          if (axisModel.componentIndex !== axModel.componentIndex && gridModel_1 === axModel.getReferringComponents('grid', SINGLE_REFERRING).models[0]) {\n            axisInfo.add(axModel.componentIndex);\n          }\n        });\n      }\n    }\n\n    if (needAuto) {\n      // If no parallel axis, find the first category axis as default. (Also consider polar).\n      each(DATA_ZOOM_AXIS_DIMENSIONS, function (axisDim) {\n        if (!needAuto) {\n          return;\n        }\n\n        var axisModels = ecModel.findComponents({\n          mainType: getAxisMainType(axisDim),\n          filter: function filter(axisModel) {\n            return axisModel.get('type', true) === 'category';\n          }\n        });\n\n        if (axisModels[0]) {\n          var axisInfo = new DataZoomAxisInfo();\n          axisInfo.add(axisModels[0].componentIndex);\n          targetAxisIndexMap.set(axisDim, axisInfo);\n          needAuto = false;\n        }\n      }, this);\n    }\n  };\n\n  DataZoomModel.prototype._makeAutoOrientByTargetAxis = function () {\n    var dim; // Find the first axis\n\n    this.eachTargetAxis(function (axisDim) {\n      !dim && (dim = axisDim);\n    }, this);\n    return dim === 'y' ? 'vertical' : 'horizontal';\n  };\n\n  DataZoomModel.prototype._setDefaultThrottle = function (inputRawOption) {\n    // When first time user set throttle, auto throttle ends.\n    if (inputRawOption.hasOwnProperty('throttle')) {\n      this._autoThrottle = false;\n    }\n\n    if (this._autoThrottle) {\n      var globalOption = this.ecModel.option;\n      this.option.throttle = globalOption.animation && globalOption.animationDurationUpdate > 0 ? 100 : 20;\n    }\n  };\n\n  DataZoomModel.prototype._updateRangeUse = function (inputRawOption) {\n    var rangePropMode = this._rangePropMode;\n    var rangeModeInOption = this.get('rangeMode');\n    each([['start', 'startValue'], ['end', 'endValue']], function (names, index) {\n      var percentSpecified = inputRawOption[names[0]] != null;\n      var valueSpecified = inputRawOption[names[1]] != null;\n\n      if (percentSpecified && !valueSpecified) {\n        rangePropMode[index] = 'percent';\n      } else if (!percentSpecified && valueSpecified) {\n        rangePropMode[index] = 'value';\n      } else if (rangeModeInOption) {\n        rangePropMode[index] = rangeModeInOption[index];\n      } else if (percentSpecified) {\n        // percentSpecified && valueSpecified\n        rangePropMode[index] = 'percent';\n      } // else remain its original setting.\n\n    });\n  };\n\n  DataZoomModel.prototype.noTarget = function () {\n    return this._noTarget;\n  };\n\n  DataZoomModel.prototype.getFirstTargetAxisModel = function () {\n    var firstAxisModel;\n    this.eachTargetAxis(function (axisDim, axisIndex) {\n      if (firstAxisModel == null) {\n        firstAxisModel = this.ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n      }\n    }, this);\n    return firstAxisModel;\n  };\n  /**\n   * @param {Function} callback param: axisModel, dimNames, axisIndex, dataZoomModel, ecModel\n   */\n\n\n  DataZoomModel.prototype.eachTargetAxis = function (callback, context) {\n    this._targetAxisInfoMap.each(function (axisInfo, axisDim) {\n      each(axisInfo.indexList, function (axisIndex) {\n        callback.call(context, axisDim, axisIndex);\n      });\n    });\n  };\n  /**\n   * @return If not found, return null/undefined.\n   */\n\n\n  DataZoomModel.prototype.getAxisProxy = function (axisDim, axisIndex) {\n    var axisModel = this.getAxisModel(axisDim, axisIndex);\n\n    if (axisModel) {\n      return axisModel.__dzAxisProxy;\n    }\n  };\n  /**\n   * @return If not found, return null/undefined.\n   */\n\n\n  DataZoomModel.prototype.getAxisModel = function (axisDim, axisIndex) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(axisDim && axisIndex != null);\n    }\n\n    var axisInfo = this._targetAxisInfoMap.get(axisDim);\n\n    if (axisInfo && axisInfo.indexMap[axisIndex]) {\n      return this.ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n    }\n  };\n  /**\n   * If not specified, set to undefined.\n   */\n\n\n  DataZoomModel.prototype.setRawRange = function (opt) {\n    var thisOption = this.option;\n    var settledOption = this.settledOption;\n    each([['start', 'startValue'], ['end', 'endValue']], function (names) {\n      // Consider the pair <start, startValue>:\n      // If one has value and the other one is `null/undefined`, we both set them\n      // to `settledOption`. This strategy enables the feature to clear the original\n      // value in `settledOption` to `null/undefined`.\n      // But if both of them are `null/undefined`, we do not set them to `settledOption`\n      // and keep `settledOption` with the original value. This strategy enables users to\n      // only set <end or endValue> but not set <start or startValue> when calling\n      // `dispatchAction`.\n      // The pair <end, endValue> is treated in the same way.\n      if (opt[names[0]] != null || opt[names[1]] != null) {\n        thisOption[names[0]] = settledOption[names[0]] = opt[names[0]];\n        thisOption[names[1]] = settledOption[names[1]] = opt[names[1]];\n      }\n    }, this);\n\n    this._updateRangeUse(opt);\n  };\n\n  DataZoomModel.prototype.setCalculatedRange = function (opt) {\n    var option = this.option;\n    each(['start', 'startValue', 'end', 'endValue'], function (name) {\n      option[name] = opt[name];\n    });\n  };\n\n  DataZoomModel.prototype.getPercentRange = function () {\n    var axisProxy = this.findRepresentativeAxisProxy();\n\n    if (axisProxy) {\n      return axisProxy.getDataPercentWindow();\n    }\n  };\n  /**\n   * For example, chart.getModel().getComponent('dataZoom').getValueRange('y', 0);\n   *\n   * @return [startValue, endValue] value can only be '-' or finite number.\n   */\n\n\n  DataZoomModel.prototype.getValueRange = function (axisDim, axisIndex) {\n    if (axisDim == null && axisIndex == null) {\n      var axisProxy = this.findRepresentativeAxisProxy();\n\n      if (axisProxy) {\n        return axisProxy.getDataValueWindow();\n      }\n    } else {\n      return this.getAxisProxy(axisDim, axisIndex).getDataValueWindow();\n    }\n  };\n  /**\n   * @param axisModel If axisModel given, find axisProxy\n   *      corresponding to the axisModel\n   */\n\n\n  DataZoomModel.prototype.findRepresentativeAxisProxy = function (axisModel) {\n    if (axisModel) {\n      return axisModel.__dzAxisProxy;\n    } // Find the first hosted axisProxy\n\n\n    var firstProxy;\n\n    var axisDimList = this._targetAxisInfoMap.keys();\n\n    for (var i = 0; i < axisDimList.length; i++) {\n      var axisDim = axisDimList[i];\n\n      var axisInfo = this._targetAxisInfoMap.get(axisDim);\n\n      for (var j = 0; j < axisInfo.indexList.length; j++) {\n        var proxy = this.getAxisProxy(axisDim, axisInfo.indexList[j]);\n\n        if (proxy.hostedBy(this)) {\n          return proxy;\n        }\n\n        if (!firstProxy) {\n          firstProxy = proxy;\n        }\n      }\n    } // If no hosted proxy found, still need to return a proxy.\n    // This case always happens in toolbox dataZoom, where axes are all hosted by\n    // other dataZooms.\n\n\n    return firstProxy;\n  };\n\n  DataZoomModel.prototype.getRangePropMode = function () {\n    return this._rangePropMode.slice();\n  };\n\n  DataZoomModel.prototype.getOrient = function () {\n    if (process.env.NODE_ENV !== 'production') {\n      // Should not be called before initialized.\n      assert(this._orient);\n    }\n\n    return this._orient;\n  };\n\n  DataZoomModel.type = 'dataZoom';\n  DataZoomModel.dependencies = ['xAxis', 'yAxis', 'radiusAxis', 'angleAxis', 'singleAxis', 'series', 'toolbox'];\n  DataZoomModel.defaultOption = {\n    zlevel: 0,\n    z: 4,\n    filterMode: 'filter',\n    start: 0,\n    end: 100\n  };\n  return DataZoomModel;\n}(ComponentModel);\n/**\n * Retrieve the those raw params from option, which will be cached separately.\n * becasue they will be overwritten by normalized/calculated values in the main\n * process.\n */\n\n\nfunction retrieveRawOption(option) {\n  var ret = {};\n  each(['start', 'end', 'startValue', 'endValue', 'throttle'], function (name) {\n    option.hasOwnProperty(name) && (ret[name] = option[name]);\n  });\n  return ret;\n}\n\nexport default DataZoomModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomModel from './DataZoomModel';\n\nvar SelectDataZoomModel =\n/** @class */\nfunction (_super) {\n  __extends(SelectDataZoomModel, _super);\n\n  function SelectDataZoomModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SelectDataZoomModel.type;\n    return _this;\n  }\n\n  SelectDataZoomModel.type = 'dataZoom.select';\n  return SelectDataZoomModel;\n}(DataZoomModel);\n\nexport default SelectDataZoomModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentView from '../../view/Component';\n\nvar DataZoomView =\n/** @class */\nfunction (_super) {\n  __extends(DataZoomView, _super);\n\n  function DataZoomView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = DataZoomView.type;\n    return _this;\n  }\n\n  DataZoomView.prototype.render = function (dataZoomModel, ecModel, api, payload) {\n    this.dataZoomModel = dataZoomModel;\n    this.ecModel = ecModel;\n    this.api = api;\n  };\n\n  DataZoomView.type = 'dataZoom';\n  return DataZoomView;\n}(ComponentView);\n\nexport default DataZoomView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomView from './DataZoomView';\n\nvar SelectDataZoomView =\n/** @class */\nfunction (_super) {\n  __extends(SelectDataZoomView, _super);\n\n  function SelectDataZoomView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SelectDataZoomView.type;\n    return _this;\n  }\n\n  SelectDataZoomView.type = 'dataZoom.select';\n  return SelectDataZoomView;\n}(DataZoomView);\n\nexport default SelectDataZoomView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as numberUtil from '../../util/number';\nimport sliderMove from '../helper/sliderMove';\nimport { unionAxisExtentFromData } from '../../coord/axisHelper';\nimport { ensureScaleRawExtentInfo } from '../../coord/scaleRawExtentInfo';\nimport { getAxisMainType, isCoordSupported } from './helper';\nimport { SINGLE_REFERRING } from '../../util/model';\nvar each = zrUtil.each;\nvar asc = numberUtil.asc;\n/**\n * Operate single axis.\n * One axis can only operated by one axis operator.\n * Different dataZoomModels may be defined to operate the same axis.\n * (i.e. 'inside' data zoom and 'slider' data zoom components)\n * So dataZoomModels share one axisProxy in that case.\n */\n\nvar AxisProxy =\n/** @class */\nfunction () {\n  function AxisProxy(dimName, axisIndex, dataZoomModel, ecModel) {\n    this._dimName = dimName;\n    this._axisIndex = axisIndex;\n    this.ecModel = ecModel;\n    this._dataZoomModel = dataZoomModel; // /**\n    //  * @readOnly\n    //  * @private\n    //  */\n    // this.hasSeriesStacked;\n  }\n  /**\n   * Whether the axisProxy is hosted by dataZoomModel.\n   */\n\n\n  AxisProxy.prototype.hostedBy = function (dataZoomModel) {\n    return this._dataZoomModel === dataZoomModel;\n  };\n  /**\n   * @return Value can only be NaN or finite value.\n   */\n\n\n  AxisProxy.prototype.getDataValueWindow = function () {\n    return this._valueWindow.slice();\n  };\n  /**\n   * @return {Array.<number>}\n   */\n\n\n  AxisProxy.prototype.getDataPercentWindow = function () {\n    return this._percentWindow.slice();\n  };\n\n  AxisProxy.prototype.getTargetSeriesModels = function () {\n    var seriesModels = [];\n    this.ecModel.eachSeries(function (seriesModel) {\n      if (isCoordSupported(seriesModel)) {\n        var axisMainType = getAxisMainType(this._dimName);\n        var axisModel = seriesModel.getReferringComponents(axisMainType, SINGLE_REFERRING).models[0];\n\n        if (axisModel && this._axisIndex === axisModel.componentIndex) {\n          seriesModels.push(seriesModel);\n        }\n      }\n    }, this);\n    return seriesModels;\n  };\n\n  AxisProxy.prototype.getAxisModel = function () {\n    return this.ecModel.getComponent(this._dimName + 'Axis', this._axisIndex);\n  };\n\n  AxisProxy.prototype.getMinMaxSpan = function () {\n    return zrUtil.clone(this._minMaxSpan);\n  };\n  /**\n   * Only calculate by given range and this._dataExtent, do not change anything.\n   */\n\n\n  AxisProxy.prototype.calculateDataWindow = function (opt) {\n    var dataExtent = this._dataExtent;\n    var axisModel = this.getAxisModel();\n    var scale = axisModel.axis.scale;\n\n    var rangePropMode = this._dataZoomModel.getRangePropMode();\n\n    var percentExtent = [0, 100];\n    var percentWindow = [];\n    var valueWindow = [];\n    var hasPropModeValue;\n    each(['start', 'end'], function (prop, idx) {\n      var boundPercent = opt[prop];\n      var boundValue = opt[prop + 'Value']; // Notice: dataZoom is based either on `percentProp` ('start', 'end') or\n      // on `valueProp` ('startValue', 'endValue'). (They are based on the data extent\n      // but not min/max of axis, which will be calculated by data window then).\n      // The former one is suitable for cases that a dataZoom component controls multiple\n      // axes with different unit or extent, and the latter one is suitable for accurate\n      // zoom by pixel (e.g., in dataZoomSelect).\n      // we use `getRangePropMode()` to mark which prop is used. `rangePropMode` is updated\n      // only when setOption or dispatchAction, otherwise it remains its original value.\n      // (Why not only record `percentProp` and always map to `valueProp`? Because\n      // the map `valueProp` -> `percentProp` -> `valueProp` probably not the original\n      // `valueProp`. consider two axes constrolled by one dataZoom. They have different\n      // data extent. All of values that are overflow the `dataExtent` will be calculated\n      // to percent '100%').\n\n      if (rangePropMode[idx] === 'percent') {\n        boundPercent == null && (boundPercent = percentExtent[idx]); // Use scale.parse to math round for category or time axis.\n\n        boundValue = scale.parse(numberUtil.linearMap(boundPercent, percentExtent, dataExtent));\n      } else {\n        hasPropModeValue = true;\n        boundValue = boundValue == null ? dataExtent[idx] : scale.parse(boundValue); // Calculating `percent` from `value` may be not accurate, because\n        // This calculation can not be inversed, because all of values that\n        // are overflow the `dataExtent` will be calculated to percent '100%'\n\n        boundPercent = numberUtil.linearMap(boundValue, dataExtent, percentExtent);\n      } // valueWindow[idx] = round(boundValue);\n      // percentWindow[idx] = round(boundPercent);\n\n\n      valueWindow[idx] = boundValue;\n      percentWindow[idx] = boundPercent;\n    });\n    asc(valueWindow);\n    asc(percentWindow); // The windows from user calling of `dispatchAction` might be out of the extent,\n    // or do not obey the `min/maxSpan`, `min/maxValueSpan`. But we dont restrict window\n    // by `zoomLock` here, because we see `zoomLock` just as a interaction constraint,\n    // where API is able to initialize/modify the window size even though `zoomLock`\n    // specified.\n\n    var spans = this._minMaxSpan;\n    hasPropModeValue ? restrictSet(valueWindow, percentWindow, dataExtent, percentExtent, false) : restrictSet(percentWindow, valueWindow, percentExtent, dataExtent, true);\n\n    function restrictSet(fromWindow, toWindow, fromExtent, toExtent, toValue) {\n      var suffix = toValue ? 'Span' : 'ValueSpan';\n      sliderMove(0, fromWindow, fromExtent, 'all', spans['min' + suffix], spans['max' + suffix]);\n\n      for (var i = 0; i < 2; i++) {\n        toWindow[i] = numberUtil.linearMap(fromWindow[i], fromExtent, toExtent, true);\n        toValue && (toWindow[i] = scale.parse(toWindow[i]));\n      }\n    }\n\n    return {\n      valueWindow: valueWindow,\n      percentWindow: percentWindow\n    };\n  };\n  /**\n   * Notice: reset should not be called before series.restoreData() called,\n   * so it is recommanded to be called in \"process stage\" but not \"model init\n   * stage\".\n   */\n\n\n  AxisProxy.prototype.reset = function (dataZoomModel) {\n    if (dataZoomModel !== this._dataZoomModel) {\n      return;\n    }\n\n    var targetSeries = this.getTargetSeriesModels(); // Culculate data window and data extent, and record them.\n\n    this._dataExtent = calculateDataExtent(this, this._dimName, targetSeries); // `calculateDataWindow` uses min/maxSpan.\n\n    this._updateMinMaxSpan();\n\n    var dataWindow = this.calculateDataWindow(dataZoomModel.settledOption);\n    this._valueWindow = dataWindow.valueWindow;\n    this._percentWindow = dataWindow.percentWindow; // Update axis setting then.\n\n    this._setAxisModel();\n  };\n\n  AxisProxy.prototype.filterData = function (dataZoomModel, api) {\n    if (dataZoomModel !== this._dataZoomModel) {\n      return;\n    }\n\n    var axisDim = this._dimName;\n    var seriesModels = this.getTargetSeriesModels();\n    var filterMode = dataZoomModel.get('filterMode');\n    var valueWindow = this._valueWindow;\n\n    if (filterMode === 'none') {\n      return;\n    } // FIXME\n    // Toolbox may has dataZoom injected. And if there are stacked bar chart\n    // with NaN data, NaN will be filtered and stack will be wrong.\n    // So we need to force the mode to be set empty.\n    // In fect, it is not a big deal that do not support filterMode-'filter'\n    // when using toolbox#dataZoom, utill tooltip#dataZoom support \"single axis\n    // selection\" some day, which might need \"adapt to data extent on the\n    // otherAxis\", which is disabled by filterMode-'empty'.\n    // But currently, stack has been fixed to based on value but not index,\n    // so this is not an issue any more.\n    // let otherAxisModel = this.getOtherAxisModel();\n    // if (dataZoomModel.get('$fromToolbox')\n    //     && otherAxisModel\n    //     && otherAxisModel.hasSeriesStacked\n    // ) {\n    //     filterMode = 'empty';\n    // }\n    // TODO\n    // filterMode 'weakFilter' and 'empty' is not optimized for huge data yet.\n\n\n    each(seriesModels, function (seriesModel) {\n      var seriesData = seriesModel.getData();\n      var dataDims = seriesData.mapDimensionsAll(axisDim);\n\n      if (!dataDims.length) {\n        return;\n      }\n\n      if (filterMode === 'weakFilter') {\n        var store_1 = seriesData.getStore();\n        var dataDimIndices_1 = zrUtil.map(dataDims, function (dim) {\n          return seriesData.getDimensionIndex(dim);\n        }, seriesData);\n        seriesData.filterSelf(function (dataIndex) {\n          var leftOut;\n          var rightOut;\n          var hasValue;\n\n          for (var i = 0; i < dataDims.length; i++) {\n            var value = store_1.get(dataDimIndices_1[i], dataIndex);\n            var thisHasValue = !isNaN(value);\n            var thisLeftOut = value < valueWindow[0];\n            var thisRightOut = value > valueWindow[1];\n\n            if (thisHasValue && !thisLeftOut && !thisRightOut) {\n              return true;\n            }\n\n            thisHasValue && (hasValue = true);\n            thisLeftOut && (leftOut = true);\n            thisRightOut && (rightOut = true);\n          } // If both left out and right out, do not filter.\n\n\n          return hasValue && leftOut && rightOut;\n        });\n      } else {\n        each(dataDims, function (dim) {\n          if (filterMode === 'empty') {\n            seriesModel.setData(seriesData = seriesData.map(dim, function (value) {\n              return !isInWindow(value) ? NaN : value;\n            }));\n          } else {\n            var range = {};\n            range[dim] = valueWindow; // console.time('select');\n\n            seriesData.selectRange(range); // console.timeEnd('select');\n          }\n        });\n      }\n\n      each(dataDims, function (dim) {\n        seriesData.setApproximateExtent(valueWindow, dim);\n      });\n    });\n\n    function isInWindow(value) {\n      return value >= valueWindow[0] && value <= valueWindow[1];\n    }\n  };\n\n  AxisProxy.prototype._updateMinMaxSpan = function () {\n    var minMaxSpan = this._minMaxSpan = {};\n    var dataZoomModel = this._dataZoomModel;\n    var dataExtent = this._dataExtent;\n    each(['min', 'max'], function (minMax) {\n      var percentSpan = dataZoomModel.get(minMax + 'Span');\n      var valueSpan = dataZoomModel.get(minMax + 'ValueSpan');\n      valueSpan != null && (valueSpan = this.getAxisModel().axis.scale.parse(valueSpan)); // minValueSpan and maxValueSpan has higher priority than minSpan and maxSpan\n\n      if (valueSpan != null) {\n        percentSpan = numberUtil.linearMap(dataExtent[0] + valueSpan, dataExtent, [0, 100], true);\n      } else if (percentSpan != null) {\n        valueSpan = numberUtil.linearMap(percentSpan, [0, 100], dataExtent, true) - dataExtent[0];\n      }\n\n      minMaxSpan[minMax + 'Span'] = percentSpan;\n      minMaxSpan[minMax + 'ValueSpan'] = valueSpan;\n    }, this);\n  };\n\n  AxisProxy.prototype._setAxisModel = function () {\n    var axisModel = this.getAxisModel();\n    var percentWindow = this._percentWindow;\n    var valueWindow = this._valueWindow;\n\n    if (!percentWindow) {\n      return;\n    } // [0, 500]: arbitrary value, guess axis extent.\n\n\n    var precision = numberUtil.getPixelPrecision(valueWindow, [0, 500]);\n    precision = Math.min(precision, 20); // For value axis, if min/max/scale are not set, we just use the extent obtained\n    // by series data, which may be a little different from the extent calculated by\n    // `axisHelper.getScaleExtent`. But the different just affects the experience a\n    // little when zooming. So it will not be fixed until some users require it strongly.\n\n    var rawExtentInfo = axisModel.axis.scale.rawExtentInfo;\n\n    if (percentWindow[0] !== 0) {\n      rawExtentInfo.setDeterminedMinMax('min', +valueWindow[0].toFixed(precision));\n    }\n\n    if (percentWindow[1] !== 100) {\n      rawExtentInfo.setDeterminedMinMax('max', +valueWindow[1].toFixed(precision));\n    }\n\n    rawExtentInfo.freeze();\n  };\n\n  return AxisProxy;\n}();\n\nfunction calculateDataExtent(axisProxy, axisDim, seriesModels) {\n  var dataExtent = [Infinity, -Infinity];\n  each(seriesModels, function (seriesModel) {\n    unionAxisExtentFromData(dataExtent, seriesModel.getData(), axisDim);\n  }); // It is important to get \"consistent\" extent when more then one axes is\n  // controlled by a `dataZoom`, otherwise those axes will not be synchronized\n  // when zooming. But it is difficult to know what is \"consistent\", considering\n  // axes have different type or even different meanings (For example, two\n  // time axes are used to compare data of the same date in different years).\n  // So basically dataZoom just obtains extent by series.data (in category axis\n  // extent can be obtained from axis.data).\n  // Nevertheless, user can set min/max/scale on axes to make extent of axes\n  // consistent.\n\n  var axisModel = axisProxy.getAxisModel();\n  var rawExtentResult = ensureScaleRawExtentInfo(axisModel.axis.scale, axisModel, dataExtent).calculate();\n  return [rawExtentResult.min, rawExtentResult.max];\n}\n\nexport default AxisProxy;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { createHashMap, each } from 'zrender/lib/core/util';\nimport { getAxisMainType } from './helper';\nimport AxisProxy from './AxisProxy';\nvar dataZoomProcessor = {\n  // `dataZoomProcessor` will only be performed in needed series. Consider if\n  // there is a line series and a pie series, it is better not to update the\n  // line series if only pie series is needed to be updated.\n  getTargetSeries: function getTargetSeries(ecModel) {\n    function eachAxisModel(cb) {\n      ecModel.eachComponent('dataZoom', function (dataZoomModel) {\n        dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n          var axisModel = ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n          cb(axisDim, axisIndex, axisModel, dataZoomModel);\n        });\n      });\n    } // FIXME: it brings side-effect to `getTargetSeries`.\n    // Prepare axis proxies.\n\n\n    eachAxisModel(function (axisDim, axisIndex, axisModel, dataZoomModel) {\n      // dispose all last axis proxy, in case that some axis are deleted.\n      axisModel.__dzAxisProxy = null;\n    });\n    var proxyList = [];\n    eachAxisModel(function (axisDim, axisIndex, axisModel, dataZoomModel) {\n      // Different dataZooms may constrol the same axis. In that case,\n      // an axisProxy serves both of them.\n      if (!axisModel.__dzAxisProxy) {\n        // Use the first dataZoomModel as the main model of axisProxy.\n        axisModel.__dzAxisProxy = new AxisProxy(axisDim, axisIndex, dataZoomModel, ecModel);\n        proxyList.push(axisModel.__dzAxisProxy);\n      }\n    });\n    var seriesModelMap = createHashMap();\n    each(proxyList, function (axisProxy) {\n      each(axisProxy.getTargetSeriesModels(), function (seriesModel) {\n        seriesModelMap.set(seriesModel.uid, seriesModel);\n      });\n    });\n    return seriesModelMap;\n  },\n  // Consider appendData, where filter should be performed. Because data process is\n  // in block mode currently, it is not need to worry about that the overallProgress\n  // execute every frame.\n  overallReset: function overallReset(ecModel, api) {\n    ecModel.eachComponent('dataZoom', function (dataZoomModel) {\n      // We calculate window and reset axis here but not in model\n      // init stage and not after action dispatch handler, because\n      // reset should be called after seriesData.restoreData.\n      dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n        dataZoomModel.getAxisProxy(axisDim, axisIndex).reset(dataZoomModel);\n      }); // Caution: data zoom filtering is order sensitive when using\n      // percent range and no min/max/scale set on axis.\n      // For example, we have dataZoom definition:\n      // [\n      //      {xAxisIndex: 0, start: 30, end: 70},\n      //      {yAxisIndex: 0, start: 20, end: 80}\n      // ]\n      // In this case, [20, 80] of y-dataZoom should be based on data\n      // that have filtered by x-dataZoom using range of [30, 70],\n      // but should not be based on full raw data. Thus sliding\n      // x-dataZoom will change both ranges of xAxis and yAxis,\n      // while sliding y-dataZoom will only change the range of yAxis.\n      // So we should filter x-axis after reset x-axis immediately,\n      // and then reset y-axis and filter y-axis.\n\n      dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n        dataZoomModel.getAxisProxy(axisDim, axisIndex).filterData(dataZoomModel, api);\n      });\n    });\n    ecModel.eachComponent('dataZoom', function (dataZoomModel) {\n      // Fullfill all of the range props so that user\n      // is able to get them from chart.getOption().\n      var axisProxy = dataZoomModel.findRepresentativeAxisProxy();\n\n      if (axisProxy) {\n        var percentRange = axisProxy.getDataPercentWindow();\n        var valueRange = axisProxy.getDataValueWindow();\n        dataZoomModel.setCalculatedRange({\n          start: percentRange[0],\n          end: percentRange[1],\n          startValue: valueRange[0],\n          endValue: valueRange[1]\n        });\n      }\n    });\n  }\n};\nexport default dataZoomProcessor;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport dataZoomProcessor from './dataZoomProcessor';\nimport installDataZoomAction from './dataZoomAction';\nvar installed = false;\nexport default function installCommon(registers) {\n  if (installed) {\n    return;\n  }\n\n  installed = true;\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.FILTER, dataZoomProcessor);\n  installDataZoomAction(registers);\n  registers.registerSubTypeDefaulter('dataZoom', function () {\n    // Default 'slider' when no type specified.\n    return 'slider';\n  });\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { findEffectedDataZooms } from './helper';\nimport { each } from 'zrender/lib/core/util';\nexport default function installDataZoomAction(registers) {\n  registers.registerAction('dataZoom', function (payload, ecModel) {\n    var effectedModels = findEffectedDataZooms(ecModel, payload);\n    each(effectedModels, function (dataZoomModel) {\n      dataZoomModel.setRawRange({\n        start: payload.start,\n        end: payload.end,\n        startValue: payload.startValue,\n        endValue: payload.endValue\n      });\n    });\n  });\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport SelectZoomModel from './SelectZoomModel';\nimport SelectZoomView from './SelectZoomView';\nimport installCommon from './installCommon';\nexport function install(registers) {\n  registers.registerComponentModel(SelectZoomModel);\n  registers.registerComponentView(SelectZoomView);\n  installCommon(registers);\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\nvar ToolboxFeature =\n/** @class */\nfunction () {\n  function ToolboxFeature() {}\n\n  return ToolboxFeature;\n}();\n\nexport { ToolboxFeature };\nvar features = {};\nexport function registerFeature(name, ctor) {\n  features[name] = ctor;\n}\nexport function getFeature(name) {\n  return features[name];\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as featureManager from './featureManager';\nimport ComponentModel from '../../model/Component';\n\nvar ToolboxModel =\n/** @class */\nfunction (_super) {\n  __extends(ToolboxModel, _super);\n\n  function ToolboxModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ToolboxModel.type;\n    return _this;\n  }\n\n  ToolboxModel.prototype.optionUpdated = function () {\n    _super.prototype.optionUpdated.apply(this, arguments);\n\n    var ecModel = this.ecModel;\n    zrUtil.each(this.option.feature, function (featureOpt, featureName) {\n      var Feature = featureManager.getFeature(featureName);\n\n      if (Feature) {\n        if (Feature.getDefaultOption) {\n          Feature.defaultOption = Feature.getDefaultOption(ecModel);\n        }\n\n        zrUtil.merge(featureOpt, Feature.defaultOption);\n      }\n    });\n  };\n\n  ToolboxModel.type = 'toolbox';\n  ToolboxModel.layoutMode = {\n    type: 'box',\n    ignoreSize: true\n  };\n  ToolboxModel.defaultOption = {\n    show: true,\n    z: 6,\n    zlevel: 0,\n    orient: 'horizontal',\n    left: 'right',\n    top: 'top',\n    // right\n    // bottom\n    backgroundColor: 'transparent',\n    borderColor: '#ccc',\n    borderRadius: 0,\n    borderWidth: 0,\n    padding: 5,\n    itemSize: 15,\n    itemGap: 8,\n    showTitle: true,\n    iconStyle: {\n      borderColor: '#666',\n      color: 'none'\n    },\n    emphasis: {\n      iconStyle: {\n        borderColor: '#3E98C5'\n      }\n    },\n    // textStyle: {},\n    // feature\n    tooltip: {\n      show: false,\n      position: 'bottom'\n    }\n  };\n  return ToolboxModel;\n}(ComponentModel);\n\nexport default ToolboxModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// @ts-nocheck\nimport { getLayoutRect, box as layoutBox, positionElement } from '../../util/layout';\nimport * as formatUtil from '../../util/format';\nimport * as graphic from '../../util/graphic';\n/**\n * Layout list like component.\n * It will box layout each items in group of component and then position the whole group in the viewport\n * @param {module:zrender/group/Group} group\n * @param {module:echarts/model/Component} componentModel\n * @param {module:echarts/ExtensionAPI}\n */\n\nexport function layout(group, componentModel, api) {\n  var boxLayoutParams = componentModel.getBoxLayoutParams();\n  var padding = componentModel.get('padding');\n  var viewportSize = {\n    width: api.getWidth(),\n    height: api.getHeight()\n  };\n  var rect = getLayoutRect(boxLayoutParams, viewportSize, padding);\n  layoutBox(componentModel.get('orient'), group, componentModel.get('itemGap'), rect.width, rect.height);\n  positionElement(group, boxLayoutParams, viewportSize, padding);\n}\nexport function makeBackground(rect, componentModel) {\n  var padding = formatUtil.normalizeCssArray(componentModel.get('padding'));\n  var style = componentModel.getItemStyle(['color', 'opacity']);\n  style.fill = componentModel.get('backgroundColor');\n  rect = new graphic.Rect({\n    shape: {\n      x: rect.x - padding[3],\n      y: rect.y - padding[0],\n      width: rect.width + padding[1] + padding[3],\n      height: rect.height + padding[0] + padding[2],\n      r: componentModel.get('borderRadius')\n    },\n    style: style,\n    silent: true,\n    z2: -1\n  }); // FIXME\n  // `subPixelOptimizeRect` may bring some gap between edge of viewpart\n  // and background rect when setting like `left: 0`, `top: 0`.\n  // graphic.subPixelOptimizeRect(rect);\n\n  return rect;\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as textContain from 'zrender/lib/contain/text';\nimport * as graphic from '../../util/graphic';\nimport { enterEmphasis, leaveEmphasis } from '../../util/states';\nimport Model from '../../model/Model';\nimport DataDiffer from '../../data/DataDiffer';\nimport * as listComponentHelper from '../helper/listComponent';\nimport ComponentView from '../../view/Component';\nimport { ToolboxFeature, getFeature } from './featureManager';\nimport { getUID } from '../../util/component';\nimport ZRText from 'zrender/lib/graphic/Text';\n\nvar ToolboxView =\n/** @class */\nfunction (_super) {\n  __extends(ToolboxView, _super);\n\n  function ToolboxView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  ToolboxView.prototype.render = function (toolboxModel, ecModel, api, payload) {\n    var group = this.group;\n    group.removeAll();\n\n    if (!toolboxModel.get('show')) {\n      return;\n    }\n\n    var itemSize = +toolboxModel.get('itemSize');\n    var featureOpts = toolboxModel.get('feature') || {};\n    var features = this._features || (this._features = {});\n    var featureNames = [];\n    zrUtil.each(featureOpts, function (opt, name) {\n      featureNames.push(name);\n    });\n    new DataDiffer(this._featureNames || [], featureNames).add(processFeature).update(processFeature).remove(zrUtil.curry(processFeature, null)).execute(); // Keep for diff.\n\n    this._featureNames = featureNames;\n\n    function processFeature(newIndex, oldIndex) {\n      var featureName = featureNames[newIndex];\n      var oldName = featureNames[oldIndex];\n      var featureOpt = featureOpts[featureName];\n      var featureModel = new Model(featureOpt, toolboxModel, toolboxModel.ecModel);\n      var feature; // FIX#11236, merge feature title from MagicType newOption. TODO: consider seriesIndex ?\n\n      if (payload && payload.newTitle != null && payload.featureName === featureName) {\n        featureOpt.title = payload.newTitle;\n      }\n\n      if (featureName && !oldName) {\n        // Create\n        if (isUserFeatureName(featureName)) {\n          feature = {\n            onclick: featureModel.option.onclick,\n            featureName: featureName\n          };\n        } else {\n          var Feature = getFeature(featureName);\n\n          if (!Feature) {\n            return;\n          }\n\n          feature = new Feature();\n        }\n\n        features[featureName] = feature;\n      } else {\n        feature = features[oldName]; // If feature does not exsit.\n\n        if (!feature) {\n          return;\n        }\n      }\n\n      feature.uid = getUID('toolbox-feature');\n      feature.model = featureModel;\n      feature.ecModel = ecModel;\n      feature.api = api;\n      var isToolboxFeature = feature instanceof ToolboxFeature;\n\n      if (!featureName && oldName) {\n        isToolboxFeature && feature.dispose && feature.dispose(ecModel, api);\n        return;\n      }\n\n      if (!featureModel.get('show') || isToolboxFeature && feature.unusable) {\n        isToolboxFeature && feature.remove && feature.remove(ecModel, api);\n        return;\n      }\n\n      createIconPaths(featureModel, feature, featureName);\n\n      featureModel.setIconStatus = function (iconName, status) {\n        var option = this.option;\n        var iconPaths = this.iconPaths;\n        option.iconStatus = option.iconStatus || {};\n        option.iconStatus[iconName] = status;\n\n        if (iconPaths[iconName]) {\n          (status === 'emphasis' ? enterEmphasis : leaveEmphasis)(iconPaths[iconName]);\n        }\n      };\n\n      if (feature instanceof ToolboxFeature) {\n        if (feature.render) {\n          feature.render(featureModel, ecModel, api, payload);\n        }\n      }\n    }\n\n    function createIconPaths(featureModel, feature, featureName) {\n      var iconStyleModel = featureModel.getModel('iconStyle');\n      var iconStyleEmphasisModel = featureModel.getModel(['emphasis', 'iconStyle']); // If one feature has mutiple icon. they are orginaized as\n      // {\n      //     icon: {\n      //         foo: '',\n      //         bar: ''\n      //     },\n      //     title: {\n      //         foo: '',\n      //         bar: ''\n      //     }\n      // }\n\n      var icons = feature instanceof ToolboxFeature && feature.getIcons ? feature.getIcons() : featureModel.get('icon');\n      var titles = featureModel.get('title') || {};\n      var iconsMap;\n      var titlesMap;\n\n      if (typeof icons === 'string') {\n        iconsMap = {};\n        iconsMap[featureName] = icons;\n      } else {\n        iconsMap = icons;\n      }\n\n      if (typeof titles === 'string') {\n        titlesMap = {};\n        titlesMap[featureName] = titles;\n      } else {\n        titlesMap = titles;\n      }\n\n      var iconPaths = featureModel.iconPaths = {};\n      zrUtil.each(iconsMap, function (iconStr, iconName) {\n        var path = graphic.createIcon(iconStr, {}, {\n          x: -itemSize / 2,\n          y: -itemSize / 2,\n          width: itemSize,\n          height: itemSize\n        }); // TODO handling image\n\n        path.setStyle(iconStyleModel.getItemStyle());\n        var pathEmphasisState = path.ensureState('emphasis');\n        pathEmphasisState.style = iconStyleEmphasisModel.getItemStyle(); // Text position calculation\n\n        var textContent = new ZRText({\n          style: {\n            text: titlesMap[iconName],\n            align: iconStyleEmphasisModel.get('textAlign'),\n            borderRadius: iconStyleEmphasisModel.get('textBorderRadius'),\n            padding: iconStyleEmphasisModel.get('textPadding'),\n            fill: null\n          },\n          ignore: true\n        });\n        path.setTextContent(textContent);\n        graphic.setTooltipConfig({\n          el: path,\n          componentModel: toolboxModel,\n          itemName: iconName,\n          formatterParamsExtra: {\n            title: titlesMap[iconName]\n          }\n        }); // graphic.enableHoverEmphasis(path);\n\n        path.__title = titlesMap[iconName];\n        path.on('mouseover', function () {\n          // Should not reuse above hoverStyle, which might be modified.\n          var hoverStyle = iconStyleEmphasisModel.getItemStyle();\n          var defaultTextPosition = toolboxModel.get('orient') === 'vertical' ? toolboxModel.get('right') == null ? 'right' : 'left' : toolboxModel.get('bottom') == null ? 'bottom' : 'top';\n          textContent.setStyle({\n            fill: iconStyleEmphasisModel.get('textFill') || hoverStyle.fill || hoverStyle.stroke || '#000',\n            backgroundColor: iconStyleEmphasisModel.get('textBackgroundColor')\n          });\n          path.setTextConfig({\n            position: iconStyleEmphasisModel.get('textPosition') || defaultTextPosition\n          });\n          textContent.ignore = !toolboxModel.get('showTitle'); // Use enterEmphasis and leaveEmphasis provide by ec.\n          // There are flags managed by the echarts.\n\n          enterEmphasis(this);\n        }).on('mouseout', function () {\n          if (featureModel.get(['iconStatus', iconName]) !== 'emphasis') {\n            leaveEmphasis(this);\n          }\n\n          textContent.hide();\n        });\n        (featureModel.get(['iconStatus', iconName]) === 'emphasis' ? enterEmphasis : leaveEmphasis)(path);\n        group.add(path);\n        path.on('click', zrUtil.bind(feature.onclick, feature, ecModel, api, iconName));\n        iconPaths[iconName] = path;\n      });\n    }\n\n    listComponentHelper.layout(group, toolboxModel, api); // Render background after group is layout\n    // FIXME\n\n    group.add(listComponentHelper.makeBackground(group.getBoundingRect(), toolboxModel)); // Adjust icon title positions to avoid them out of screen\n\n    group.eachChild(function (icon) {\n      var titleText = icon.__title; // const hoverStyle = icon.hoverStyle;\n      // TODO simplify code?\n\n      var emphasisState = icon.ensureState('emphasis');\n      var emphasisTextConfig = emphasisState.textConfig || (emphasisState.textConfig = {});\n      var textContent = icon.getTextContent();\n      var emphasisTextState = textContent && textContent.states.emphasis; // May be background element\n\n      if (emphasisTextState && !zrUtil.isFunction(emphasisTextState) && titleText) {\n        var emphasisTextStyle = emphasisTextState.style || (emphasisTextState.style = {});\n        var rect = textContain.getBoundingRect(titleText, ZRText.makeFont(emphasisTextStyle));\n        var offsetX = icon.x + group.x;\n        var offsetY = icon.y + group.y + itemSize;\n        var needPutOnTop = false;\n\n        if (offsetY + rect.height > api.getHeight()) {\n          emphasisTextConfig.position = 'top';\n          needPutOnTop = true;\n        }\n\n        var topOffset = needPutOnTop ? -5 - rect.height : itemSize + 8;\n\n        if (offsetX + rect.width / 2 > api.getWidth()) {\n          emphasisTextConfig.position = ['100%', topOffset];\n          emphasisTextStyle.align = 'right';\n        } else if (offsetX - rect.width / 2 < 0) {\n          emphasisTextConfig.position = [0, topOffset];\n          emphasisTextStyle.align = 'left';\n        }\n      }\n    });\n  };\n\n  ToolboxView.prototype.updateView = function (toolboxModel, ecModel, api, payload) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.updateView && feature.updateView(feature.model, ecModel, api, payload);\n    });\n  }; // updateLayout(toolboxModel, ecModel, api, payload) {\n  //     zrUtil.each(this._features, function (feature) {\n  //         feature.updateLayout && feature.updateLayout(feature.model, ecModel, api, payload);\n  //     });\n  // },\n\n\n  ToolboxView.prototype.remove = function (ecModel, api) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.remove && feature.remove(ecModel, api);\n    });\n    this.group.removeAll();\n  };\n\n  ToolboxView.prototype.dispose = function (ecModel, api) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.dispose && feature.dispose(ecModel, api);\n    });\n  };\n\n  ToolboxView.type = 'toolbox';\n  return ToolboxView;\n}(ComponentView);\n\nfunction isUserFeatureName(featureName) {\n  return featureName.indexOf('my') === 0;\n}\n\nexport default ToolboxView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/* global Uint8Array, document */\n\nimport env from 'zrender/lib/core/env';\nimport { ToolboxFeature } from '../featureManager';\n/* global window, document */\n\nvar SaveAsImage =\n/** @class */\nfunction (_super) {\n  __extends(SaveAsImage, _super);\n\n  function SaveAsImage() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  SaveAsImage.prototype.onclick = function (ecModel, api) {\n    var model = this.model;\n    var title = model.get('name') || ecModel.get('title.0.text') || 'echarts';\n    var isSvg = api.getZr().painter.getType() === 'svg';\n    var type = isSvg ? 'svg' : model.get('type', true) || 'png';\n    var url = api.getConnectedDataURL({\n      type: type,\n      backgroundColor: model.get('backgroundColor', true) || ecModel.get('backgroundColor') || '#fff',\n      connectedBackgroundColor: model.get('connectedBackgroundColor'),\n      excludeComponents: model.get('excludeComponents'),\n      pixelRatio: model.get('pixelRatio')\n    }); // Chrome, Firefox, New Edge\n\n    if (typeof MouseEvent === 'function' && (env.browser.newEdge || !env.browser.ie && !env.browser.edge)) {\n      var $a = document.createElement('a');\n      $a.download = title + '.' + type;\n      $a.target = '_blank';\n      $a.href = url;\n      var evt = new MouseEvent('click', {\n        // some micro front-end framework window maybe is a Proxy\n        view: document.defaultView,\n        bubbles: true,\n        cancelable: false\n      });\n      $a.dispatchEvent(evt);\n    } // IE or old Edge\n    else {\n      if (window.navigator.msSaveOrOpenBlob || isSvg) {\n        var parts = url.split(','); // data:[<mime type>][;charset=<charset>][;base64],<encoded data>\n\n        var base64Encoded = parts[0].indexOf('base64') > -1;\n        var bstr = isSvg // should decode the svg data uri first\n        ? decodeURIComponent(parts[1]) : parts[1]; // only `atob` when the data uri is encoded with base64\n        // otherwise, like `svg` data uri exported by zrender,\n        // there will be an error, for it's not encoded with base64.\n        // (just a url-encoded string through `encodeURIComponent`)\n\n        base64Encoded && (bstr = window.atob(bstr));\n        var filename = title + '.' + type;\n\n        if (window.navigator.msSaveOrOpenBlob) {\n          var n = bstr.length;\n          var u8arr = new Uint8Array(n);\n\n          while (n--) {\n            u8arr[n] = bstr.charCodeAt(n);\n          }\n\n          var blob = new Blob([u8arr]);\n          window.navigator.msSaveOrOpenBlob(blob, filename);\n        } else {\n          var frame = document.createElement('iframe');\n          document.body.appendChild(frame);\n          var cw = frame.contentWindow;\n          var doc = cw.document;\n          doc.open('image/svg+xml', 'replace');\n          doc.write(bstr);\n          doc.close();\n          cw.focus();\n          doc.execCommand('SaveAs', true, filename);\n          document.body.removeChild(frame);\n        }\n      } else {\n        var lang = model.get('lang');\n        var html = '' + '<body style=\"margin:0;\">' + '<img src=\"' + url + '\" style=\"max-width:100%;\" title=\"' + (lang && lang[0] || '') + '\" />' + '</body>';\n        var tab = window.open();\n        tab.document.write(html);\n        tab.document.title = title;\n      }\n    }\n  };\n\n  SaveAsImage.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      icon: 'M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0',\n      title: ecModel.getLocaleModel().get(['toolbox', 'saveAsImage', 'title']),\n      type: 'png',\n      // Default use option.backgroundColor\n      // backgroundColor: '#fff',\n      connectedBackgroundColor: '#fff',\n      name: '',\n      excludeComponents: ['toolbox'],\n      // use current pixel ratio of device by default\n      // pixelRatio: 1,\n      lang: ecModel.getLocaleModel().get(['toolbox', 'saveAsImage', 'lang'])\n    };\n    return defaultOption;\n  };\n\n  return SaveAsImage;\n}(ToolboxFeature);\n\nSaveAsImage.prototype.unusable = !env.canvasSupported;\nexport default SaveAsImage;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as echarts from '../../../core/echarts';\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { ToolboxFeature } from '../featureManager';\nimport { SINGLE_REFERRING } from '../../../util/model';\nvar INNER_STACK_KEYWORD = '__ec_magicType_stack__';\nvar ICON_TYPES = ['line', 'bar', 'stack']; // stack and tiled appears in pair for the title\n\nvar TITLE_TYPES = ['line', 'bar', 'stack', 'tiled'];\nvar radioTypes = [['line', 'bar'], ['stack']];\n\nvar MagicType =\n/** @class */\nfunction (_super) {\n  __extends(MagicType, _super);\n\n  function MagicType() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  MagicType.prototype.getIcons = function () {\n    var model = this.model;\n    var availableIcons = model.get('icon');\n    var icons = {};\n    zrUtil.each(model.get('type'), function (type) {\n      if (availableIcons[type]) {\n        icons[type] = availableIcons[type];\n      }\n    });\n    return icons;\n  };\n\n  MagicType.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      type: [],\n      // Icon group\n      icon: {\n        line: 'M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4',\n        bar: 'M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7',\n        // eslint-disable-next-line\n        stack: 'M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z' // jshint ignore:line\n\n      },\n      // `line`, `bar`, `stack`, `tiled`\n      title: ecModel.getLocaleModel().get(['toolbox', 'magicType', 'title']),\n      option: {},\n      seriesIndex: {}\n    };\n    return defaultOption;\n  };\n\n  MagicType.prototype.onclick = function (ecModel, api, type) {\n    var model = this.model;\n    var seriesIndex = model.get(['seriesIndex', type]); // Not supported magicType\n\n    if (!seriesOptGenreator[type]) {\n      return;\n    }\n\n    var newOption = {\n      series: []\n    };\n\n    var generateNewSeriesTypes = function generateNewSeriesTypes(seriesModel) {\n      var seriesType = seriesModel.subType;\n      var seriesId = seriesModel.id;\n      var newSeriesOpt = seriesOptGenreator[type](seriesType, seriesId, seriesModel, model);\n\n      if (newSeriesOpt) {\n        // PENDING If merge original option?\n        zrUtil.defaults(newSeriesOpt, seriesModel.option);\n        newOption.series.push(newSeriesOpt);\n      } // Modify boundaryGap\n\n\n      var coordSys = seriesModel.coordinateSystem;\n\n      if (coordSys && coordSys.type === 'cartesian2d' && (type === 'line' || type === 'bar')) {\n        var categoryAxis = coordSys.getAxesByScale('ordinal')[0];\n\n        if (categoryAxis) {\n          var axisDim = categoryAxis.dim;\n          var axisType = axisDim + 'Axis';\n          var axisModel = seriesModel.getReferringComponents(axisType, SINGLE_REFERRING).models[0];\n          var axisIndex = axisModel.componentIndex;\n          newOption[axisType] = newOption[axisType] || [];\n\n          for (var i = 0; i <= axisIndex; i++) {\n            newOption[axisType][axisIndex] = newOption[axisType][axisIndex] || {};\n          }\n\n          newOption[axisType][axisIndex].boundaryGap = type === 'bar';\n        }\n      }\n    };\n\n    zrUtil.each(radioTypes, function (radio) {\n      if (zrUtil.indexOf(radio, type) >= 0) {\n        zrUtil.each(radio, function (item) {\n          model.setIconStatus(item, 'normal');\n        });\n      }\n    });\n    model.setIconStatus(type, 'emphasis');\n    ecModel.eachComponent({\n      mainType: 'series',\n      query: seriesIndex == null ? null : {\n        seriesIndex: seriesIndex\n      }\n    }, generateNewSeriesTypes);\n    var newTitle;\n    var currentType = type; // Change title of stack\n\n    if (type === 'stack') {\n      // use titles in model instead of ecModel\n      // as stack and tiled appears in pair, just flip them\n      // no need of checking stack state\n      newTitle = zrUtil.merge({\n        stack: model.option.title.tiled,\n        tiled: model.option.title.stack\n      }, model.option.title);\n\n      if (model.get(['iconStatus', type]) !== 'emphasis') {\n        currentType = 'tiled';\n      }\n    }\n\n    api.dispatchAction({\n      type: 'changeMagicType',\n      currentType: currentType,\n      newOption: newOption,\n      newTitle: newTitle,\n      featureName: 'magicType'\n    });\n  };\n\n  return MagicType;\n}(ToolboxFeature);\n\nvar seriesOptGenreator = {\n  'line': function line(seriesType, seriesId, seriesModel, model) {\n    if (seriesType === 'bar') {\n      return zrUtil.merge({\n        id: seriesId,\n        type: 'line',\n        // Preserve data related option\n        data: seriesModel.get('data'),\n        stack: seriesModel.get('stack'),\n        markPoint: seriesModel.get('markPoint'),\n        markLine: seriesModel.get('markLine')\n      }, model.get(['option', 'line']) || {}, true);\n    }\n  },\n  'bar': function bar(seriesType, seriesId, seriesModel, model) {\n    if (seriesType === 'line') {\n      return zrUtil.merge({\n        id: seriesId,\n        type: 'bar',\n        // Preserve data related option\n        data: seriesModel.get('data'),\n        stack: seriesModel.get('stack'),\n        markPoint: seriesModel.get('markPoint'),\n        markLine: seriesModel.get('markLine')\n      }, model.get(['option', 'bar']) || {}, true);\n    }\n  },\n  'stack': function stack(seriesType, seriesId, seriesModel, model) {\n    var isStack = seriesModel.get('stack') === INNER_STACK_KEYWORD;\n\n    if (seriesType === 'line' || seriesType === 'bar') {\n      model.setIconStatus('stack', isStack ? 'normal' : 'emphasis');\n      return zrUtil.merge({\n        id: seriesId,\n        stack: isStack ? '' : INNER_STACK_KEYWORD\n      }, model.get(['option', 'stack']) || {}, true);\n    }\n  }\n}; // TODO: SELF REGISTERED.\n\necharts.registerAction({\n  type: 'changeMagicType',\n  event: 'magicTypeChanged',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  ecModel.mergeOption(payload.newOption);\n});\nexport default MagicType;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/* global document */\n\nimport * as echarts from '../../../core/echarts';\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { ToolboxFeature } from '../featureManager';\nimport { addEventListener } from 'zrender/lib/core/event';\n/* global document */\n\nvar BLOCK_SPLITER = new Array(60).join('-');\nvar ITEM_SPLITER = '\\t';\n/**\n * Group series into two types\n *  1. on category axis, like line, bar\n *  2. others, like scatter, pie\n */\n\nfunction groupSeries(ecModel) {\n  var seriesGroupByCategoryAxis = {};\n  var otherSeries = [];\n  var meta = [];\n  ecModel.eachRawSeries(function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n\n    if (coordSys && (coordSys.type === 'cartesian2d' || coordSys.type === 'polar')) {\n      // TODO: TYPE Consider polar? Include polar may increase unecessary bundle size.\n      var baseAxis = coordSys.getBaseAxis();\n\n      if (baseAxis.type === 'category') {\n        var key = baseAxis.dim + '_' + baseAxis.index;\n\n        if (!seriesGroupByCategoryAxis[key]) {\n          seriesGroupByCategoryAxis[key] = {\n            categoryAxis: baseAxis,\n            valueAxis: coordSys.getOtherAxis(baseAxis),\n            series: []\n          };\n          meta.push({\n            axisDim: baseAxis.dim,\n            axisIndex: baseAxis.index\n          });\n        }\n\n        seriesGroupByCategoryAxis[key].series.push(seriesModel);\n      } else {\n        otherSeries.push(seriesModel);\n      }\n    } else {\n      otherSeries.push(seriesModel);\n    }\n  });\n  return {\n    seriesGroupByCategoryAxis: seriesGroupByCategoryAxis,\n    other: otherSeries,\n    meta: meta\n  };\n}\n/**\n * Assemble content of series on cateogory axis\n * @inner\n */\n\n\nfunction assembleSeriesWithCategoryAxis(groups) {\n  var tables = [];\n  zrUtil.each(groups, function (group, key) {\n    var categoryAxis = group.categoryAxis;\n    var valueAxis = group.valueAxis;\n    var valueAxisDim = valueAxis.dim;\n    var headers = [' '].concat(zrUtil.map(group.series, function (series) {\n      return series.name;\n    })); // @ts-ignore TODO Polar\n\n    var columns = [categoryAxis.model.getCategories()];\n    zrUtil.each(group.series, function (series) {\n      var rawData = series.getRawData();\n      columns.push(series.getRawData().mapArray(rawData.mapDimension(valueAxisDim), function (val) {\n        return val;\n      }));\n    }); // Assemble table content\n\n    var lines = [headers.join(ITEM_SPLITER)];\n\n    for (var i = 0; i < columns[0].length; i++) {\n      var items = [];\n\n      for (var j = 0; j < columns.length; j++) {\n        items.push(columns[j][i]);\n      }\n\n      lines.push(items.join(ITEM_SPLITER));\n    }\n\n    tables.push(lines.join('\\n'));\n  });\n  return tables.join('\\n\\n' + BLOCK_SPLITER + '\\n\\n');\n}\n/**\n * Assemble content of other series\n */\n\n\nfunction assembleOtherSeries(series) {\n  return zrUtil.map(series, function (series) {\n    var data = series.getRawData();\n    var lines = [series.name];\n    var vals = [];\n    data.each(data.dimensions, function () {\n      var argLen = arguments.length;\n      var dataIndex = arguments[argLen - 1];\n      var name = data.getName(dataIndex);\n\n      for (var i = 0; i < argLen - 1; i++) {\n        vals[i] = arguments[i];\n      }\n\n      lines.push((name ? name + ITEM_SPLITER : '') + vals.join(ITEM_SPLITER));\n    });\n    return lines.join('\\n');\n  }).join('\\n\\n' + BLOCK_SPLITER + '\\n\\n');\n}\n\nfunction getContentFromModel(ecModel) {\n  var result = groupSeries(ecModel);\n  return {\n    value: zrUtil.filter([assembleSeriesWithCategoryAxis(result.seriesGroupByCategoryAxis), assembleOtherSeries(result.other)], function (str) {\n      return !!str.replace(/[\\n\\t\\s]/g, '');\n    }).join('\\n\\n' + BLOCK_SPLITER + '\\n\\n'),\n    meta: result.meta\n  };\n}\n\nfunction trim(str) {\n  return str.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n}\n/**\n * If a block is tsv format\n */\n\n\nfunction isTSVFormat(block) {\n  // Simple method to find out if a block is tsv format\n  var firstLine = block.slice(0, block.indexOf('\\n'));\n\n  if (firstLine.indexOf(ITEM_SPLITER) >= 0) {\n    return true;\n  }\n}\n\nvar itemSplitRegex = new RegExp('[' + ITEM_SPLITER + ']+', 'g');\n/**\n * @param {string} tsv\n * @return {Object}\n */\n\nfunction parseTSVContents(tsv) {\n  var tsvLines = tsv.split(/\\n+/g);\n  var headers = trim(tsvLines.shift()).split(itemSplitRegex);\n  var categories = [];\n  var series = zrUtil.map(headers, function (header) {\n    return {\n      name: header,\n      data: []\n    };\n  });\n\n  for (var i = 0; i < tsvLines.length; i++) {\n    var items = trim(tsvLines[i]).split(itemSplitRegex);\n    categories.push(items.shift());\n\n    for (var j = 0; j < items.length; j++) {\n      series[j] && (series[j].data[i] = items[j]);\n    }\n  }\n\n  return {\n    series: series,\n    categories: categories\n  };\n}\n\nfunction parseListContents(str) {\n  var lines = str.split(/\\n+/g);\n  var seriesName = trim(lines.shift());\n  var data = [];\n\n  for (var i = 0; i < lines.length; i++) {\n    // if line is empty, ignore it.\n    // there is a case that a user forgot to delete `\\n`.\n    var line = trim(lines[i]);\n\n    if (!line) {\n      continue;\n    }\n\n    var items = line.split(itemSplitRegex);\n    var name_1 = '';\n    var value = void 0;\n    var hasName = false;\n\n    if (isNaN(items[0])) {\n      // First item is name\n      hasName = true;\n      name_1 = items[0];\n      items = items.slice(1);\n      data[i] = {\n        name: name_1,\n        value: []\n      };\n      value = data[i].value;\n    } else {\n      value = data[i] = [];\n    }\n\n    for (var j = 0; j < items.length; j++) {\n      value.push(+items[j]);\n    }\n\n    if (value.length === 1) {\n      hasName ? data[i].value = value[0] : data[i] = value[0];\n    }\n  }\n\n  return {\n    name: seriesName,\n    data: data\n  };\n}\n\nfunction parseContents(str, blockMetaList) {\n  var blocks = str.split(new RegExp('\\n*' + BLOCK_SPLITER + '\\n*', 'g'));\n  var newOption = {\n    series: []\n  };\n  zrUtil.each(blocks, function (block, idx) {\n    if (isTSVFormat(block)) {\n      var result = parseTSVContents(block);\n      var blockMeta = blockMetaList[idx];\n      var axisKey = blockMeta.axisDim + 'Axis';\n\n      if (blockMeta) {\n        newOption[axisKey] = newOption[axisKey] || [];\n        newOption[axisKey][blockMeta.axisIndex] = {\n          data: result.categories\n        };\n        newOption.series = newOption.series.concat(result.series);\n      }\n    } else {\n      var result = parseListContents(block);\n      newOption.series.push(result);\n    }\n  });\n  return newOption;\n}\n\nvar DataView =\n/** @class */\nfunction (_super) {\n  __extends(DataView, _super);\n\n  function DataView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  DataView.prototype.onclick = function (ecModel, api) {\n    var container = api.getDom();\n    var model = this.model;\n\n    if (this._dom) {\n      container.removeChild(this._dom);\n    }\n\n    var root = document.createElement('div');\n    root.style.cssText = 'position:absolute;left:5px;top:5px;bottom:5px;right:5px;';\n    root.style.backgroundColor = model.get('backgroundColor') || '#fff'; // Create elements\n\n    var header = document.createElement('h4');\n    var lang = model.get('lang') || [];\n    header.innerHTML = lang[0] || model.get('title');\n    header.style.cssText = 'margin: 10px 20px;';\n    header.style.color = model.get('textColor');\n    var viewMain = document.createElement('div');\n    var textarea = document.createElement('textarea');\n    viewMain.style.cssText = 'display:block;width:100%;overflow:auto;';\n    var optionToContent = model.get('optionToContent');\n    var contentToOption = model.get('contentToOption');\n    var result = getContentFromModel(ecModel);\n\n    if (typeof optionToContent === 'function') {\n      var htmlOrDom = optionToContent(api.getOption());\n\n      if (typeof htmlOrDom === 'string') {\n        viewMain.innerHTML = htmlOrDom;\n      } else if (zrUtil.isDom(htmlOrDom)) {\n        viewMain.appendChild(htmlOrDom);\n      }\n    } else {\n      // Use default textarea\n      viewMain.appendChild(textarea);\n      textarea.readOnly = model.get('readOnly');\n      textarea.style.cssText = 'width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;';\n      textarea.style.color = model.get('textColor');\n      textarea.style.borderColor = model.get('textareaBorderColor');\n      textarea.style.backgroundColor = model.get('textareaColor');\n      textarea.value = result.value;\n    }\n\n    var blockMetaList = result.meta;\n    var buttonContainer = document.createElement('div');\n    buttonContainer.style.cssText = 'position:absolute;bottom:0;left:0;right:0;';\n    var buttonStyle = 'float:right;margin-right:20px;border:none;' + 'cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px';\n    var closeButton = document.createElement('div');\n    var refreshButton = document.createElement('div');\n    buttonStyle += ';background-color:' + model.get('buttonColor');\n    buttonStyle += ';color:' + model.get('buttonTextColor');\n    var self = this;\n\n    function close() {\n      container.removeChild(root);\n      self._dom = null;\n    }\n\n    addEventListener(closeButton, 'click', close);\n    addEventListener(refreshButton, 'click', function () {\n      if (contentToOption == null && optionToContent != null || contentToOption != null && optionToContent == null) {\n        if (process.env.NODE_ENV !== 'production') {\n          // eslint-disable-next-line\n          console.warn('It seems you have just provided one of `contentToOption` and `optionToContent` functions but missed the other one. Data change is ignored.');\n        }\n\n        close();\n        return;\n      }\n\n      var newOption;\n\n      try {\n        if (typeof contentToOption === 'function') {\n          newOption = contentToOption(viewMain, api.getOption());\n        } else {\n          newOption = parseContents(textarea.value, blockMetaList);\n        }\n      } catch (e) {\n        close();\n        throw new Error('Data view format error ' + e);\n      }\n\n      if (newOption) {\n        api.dispatchAction({\n          type: 'changeDataView',\n          newOption: newOption\n        });\n      }\n\n      close();\n    });\n    closeButton.innerHTML = lang[1];\n    refreshButton.innerHTML = lang[2];\n    refreshButton.style.cssText = buttonStyle;\n    closeButton.style.cssText = buttonStyle;\n    !model.get('readOnly') && buttonContainer.appendChild(refreshButton);\n    buttonContainer.appendChild(closeButton);\n    root.appendChild(header);\n    root.appendChild(viewMain);\n    root.appendChild(buttonContainer);\n    viewMain.style.height = container.clientHeight - 80 + 'px';\n    container.appendChild(root);\n    this._dom = root;\n  };\n\n  DataView.prototype.remove = function (ecModel, api) {\n    this._dom && api.getDom().removeChild(this._dom);\n  };\n\n  DataView.prototype.dispose = function (ecModel, api) {\n    this.remove(ecModel, api);\n  };\n\n  DataView.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      readOnly: false,\n      optionToContent: null,\n      contentToOption: null,\n      // eslint-disable-next-line\n      icon: 'M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28',\n      title: ecModel.getLocaleModel().get(['toolbox', 'dataView', 'title']),\n      lang: ecModel.getLocaleModel().get(['toolbox', 'dataView', 'lang']),\n      backgroundColor: '#fff',\n      textColor: '#000',\n      textareaColor: '#fff',\n      textareaBorderColor: '#333',\n      buttonColor: '#c23531',\n      buttonTextColor: '#fff'\n    };\n    return defaultOption;\n  };\n\n  return DataView;\n}(ToolboxFeature);\n/**\n * @inner\n */\n\n\nfunction tryMergeDataOption(newData, originalData) {\n  return zrUtil.map(newData, function (newVal, idx) {\n    var original = originalData && originalData[idx];\n\n    if (zrUtil.isObject(original) && !zrUtil.isArray(original)) {\n      var newValIsObject = zrUtil.isObject(newVal) && !zrUtil.isArray(newVal);\n\n      if (!newValIsObject) {\n        newVal = {\n          value: newVal\n        };\n      } // original data has name but new data has no name\n\n\n      var shouldDeleteName = original.name != null && newVal.name == null; // Original data has option\n\n      newVal = zrUtil.defaults(newVal, original);\n      shouldDeleteName && delete newVal.name;\n      return newVal;\n    } else {\n      return newVal;\n    }\n  });\n} // TODO: SELF REGISTERED.\n\n\necharts.registerAction({\n  type: 'changeDataView',\n  event: 'dataViewChanged',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  var newSeriesOptList = [];\n  zrUtil.each(payload.newOption.series, function (seriesOpt) {\n    var seriesModel = ecModel.getSeriesByName(seriesOpt.name)[0];\n\n    if (!seriesModel) {\n      // New created series\n      // Geuss the series type\n      newSeriesOptList.push(zrUtil.extend({\n        // Default is scatter\n        type: 'scatter'\n      }, seriesOpt));\n    } else {\n      var originalData = seriesModel.get('data');\n      newSeriesOptList.push({\n        name: seriesOpt.name,\n        data: tryMergeDataOption(seriesOpt.data, originalData)\n      });\n    }\n  });\n  ecModel.mergeOption(zrUtil.defaults({\n    series: newSeriesOptList\n  }, payload.newOption));\n});\nexport default DataView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { makeInner } from '../../util/model';\nvar each = zrUtil.each;\nvar inner = makeInner();\n/**\n * @param ecModel\n * @param newSnapshot key is dataZoomId\n */\n\nexport function push(ecModel, newSnapshot) {\n  var storedSnapshots = getStoreSnapshots(ecModel); // If previous dataZoom can not be found,\n  // complete an range with current range.\n\n  each(newSnapshot, function (batchItem, dataZoomId) {\n    var i = storedSnapshots.length - 1;\n\n    for (; i >= 0; i--) {\n      var snapshot = storedSnapshots[i];\n\n      if (snapshot[dataZoomId]) {\n        break;\n      }\n    }\n\n    if (i < 0) {\n      // No origin range set, create one by current range.\n      var dataZoomModel = ecModel.queryComponents({\n        mainType: 'dataZoom',\n        subType: 'select',\n        id: dataZoomId\n      })[0];\n\n      if (dataZoomModel) {\n        var percentRange = dataZoomModel.getPercentRange();\n        storedSnapshots[0][dataZoomId] = {\n          dataZoomId: dataZoomId,\n          start: percentRange[0],\n          end: percentRange[1]\n        };\n      }\n    }\n  });\n  storedSnapshots.push(newSnapshot);\n}\nexport function pop(ecModel) {\n  var storedSnapshots = getStoreSnapshots(ecModel);\n  var head = storedSnapshots[storedSnapshots.length - 1];\n  storedSnapshots.length > 1 && storedSnapshots.pop(); // Find top for all dataZoom.\n\n  var snapshot = {};\n  each(head, function (batchItem, dataZoomId) {\n    for (var i = storedSnapshots.length - 1; i >= 0; i--) {\n      batchItem = storedSnapshots[i][dataZoomId];\n\n      if (batchItem) {\n        snapshot[dataZoomId] = batchItem;\n        break;\n      }\n    }\n  });\n  return snapshot;\n}\nexport function clear(ecModel) {\n  inner(ecModel).snapshots = null;\n}\nexport function count(ecModel) {\n  return getStoreSnapshots(ecModel).length;\n}\n/**\n * History length of each dataZoom may be different.\n * this._history[0] is used to store origin range.\n */\n\nfunction getStoreSnapshots(ecModel) {\n  var store = inner(ecModel);\n\n  if (!store.snapshots) {\n    store.snapshots = [{}];\n  }\n\n  return store.snapshots;\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as echarts from '../../../core/echarts';\nimport * as history from '../../dataZoom/history';\nimport { ToolboxFeature } from '../featureManager';\n\nvar RestoreOption =\n/** @class */\nfunction (_super) {\n  __extends(RestoreOption, _super);\n\n  function RestoreOption() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  RestoreOption.prototype.onclick = function (ecModel, api) {\n    history.clear(ecModel);\n    api.dispatchAction({\n      type: 'restore',\n      from: this.uid\n    });\n  };\n\n  RestoreOption.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      // eslint-disable-next-line\n      icon: 'M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5',\n      title: ecModel.getLocaleModel().get(['toolbox', 'restore', 'title'])\n    };\n    return defaultOption;\n  };\n\n  return RestoreOption;\n}(ToolboxFeature); // TODO: SELF REGISTERED.\n\n\necharts.registerAction({\n  type: 'restore',\n  event: 'restore',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  ecModel.resetOption('recreate');\n});\nexport default RestoreOption;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each, indexOf, curry, assert, map, createHashMap } from 'zrender/lib/core/util';\nimport * as graphic from '../../util/graphic';\nimport * as brushHelper from './brushHelper';\nimport { parseFinder as modelUtilParseFinder } from '../../util/model'; // FIXME\n// how to genarialize to more coordinate systems.\n\nvar INCLUDE_FINDER_MAIN_TYPES = ['grid', 'xAxis', 'yAxis', 'geo', 'graph', 'polar', 'radiusAxis', 'angleAxis', 'bmap'];\n\nvar BrushTargetManager =\n/** @class */\nfunction () {\n  /**\n   * @param finder contains Index/Id/Name of xAxis/yAxis/geo/grid\n   *        Each can be {number|Array.<number>}. like: {xAxisIndex: [3, 4]}\n   * @param opt.include include coordinate system types.\n   */\n  function BrushTargetManager(finder, ecModel, opt) {\n    var _this = this;\n\n    this._targetInfoList = [];\n    var foundCpts = parseFinder(ecModel, finder);\n    each(targetInfoBuilders, function (builder, type) {\n      if (!opt || !opt.include || indexOf(opt.include, type) >= 0) {\n        builder(foundCpts, _this._targetInfoList);\n      }\n    });\n  }\n\n  BrushTargetManager.prototype.setOutputRanges = function (areas, ecModel) {\n    this.matchOutputRanges(areas, ecModel, function (area, coordRange, coordSys) {\n      (area.coordRanges || (area.coordRanges = [])).push(coordRange); // area.coordRange is the first of area.coordRanges\n\n      if (!area.coordRange) {\n        area.coordRange = coordRange; // In 'category' axis, coord to pixel is not reversible, so we can not\n        // rebuild range by coordRange accrately, which may bring trouble when\n        // brushing only one item. So we use __rangeOffset to rebuilding range\n        // by coordRange. And this it only used in brush component so it is no\n        // need to be adapted to coordRanges.\n\n        var result = coordConvert[area.brushType](0, coordSys, coordRange);\n        area.__rangeOffset = {\n          offset: diffProcessor[area.brushType](result.values, area.range, [1, 1]),\n          xyMinMax: result.xyMinMax\n        };\n      }\n    });\n    return areas;\n  };\n\n  BrushTargetManager.prototype.matchOutputRanges = function (areas, ecModel, cb) {\n    each(areas, function (area) {\n      var targetInfo = this.findTargetInfo(area, ecModel);\n\n      if (targetInfo && targetInfo !== true) {\n        each(targetInfo.coordSyses, function (coordSys) {\n          var result = coordConvert[area.brushType](1, coordSys, area.range, true);\n          cb(area, result.values, coordSys, ecModel);\n        });\n      }\n    }, this);\n  };\n  /**\n   * the `areas` is `BrushModel.areas`.\n   * Called in layout stage.\n   * convert `area.coordRange` to global range and set panelId to `area.range`.\n   */\n\n\n  BrushTargetManager.prototype.setInputRanges = function (areas, ecModel) {\n    each(areas, function (area) {\n      var targetInfo = this.findTargetInfo(area, ecModel);\n\n      if (process.env.NODE_ENV !== 'production') {\n        assert(!targetInfo || targetInfo === true || area.coordRange, 'coordRange must be specified when coord index specified.');\n        assert(!targetInfo || targetInfo !== true || area.range, 'range must be specified in global brush.');\n      }\n\n      area.range = area.range || []; // convert coordRange to global range and set panelId.\n\n      if (targetInfo && targetInfo !== true) {\n        area.panelId = targetInfo.panelId; // (1) area.range shoule always be calculate from coordRange but does\n        // not keep its original value, for the sake of the dataZoom scenario,\n        // where area.coordRange remains unchanged but area.range may be changed.\n        // (2) Only support converting one coordRange to pixel range in brush\n        // component. So do not consider `coordRanges`.\n        // (3) About __rangeOffset, see comment above.\n\n        var result = coordConvert[area.brushType](0, targetInfo.coordSys, area.coordRange);\n        var rangeOffset = area.__rangeOffset;\n        area.range = rangeOffset ? diffProcessor[area.brushType](result.values, rangeOffset.offset, getScales(result.xyMinMax, rangeOffset.xyMinMax)) : result.values;\n      }\n    }, this);\n  };\n\n  BrushTargetManager.prototype.makePanelOpts = function (api, getDefaultBrushType) {\n    return map(this._targetInfoList, function (targetInfo) {\n      var rect = targetInfo.getPanelRect();\n      return {\n        panelId: targetInfo.panelId,\n        defaultBrushType: getDefaultBrushType ? getDefaultBrushType(targetInfo) : null,\n        clipPath: brushHelper.makeRectPanelClipPath(rect),\n        isTargetByCursor: brushHelper.makeRectIsTargetByCursor(rect, api, targetInfo.coordSysModel),\n        getLinearBrushOtherExtent: brushHelper.makeLinearBrushOtherExtent(rect)\n      };\n    });\n  };\n\n  BrushTargetManager.prototype.controlSeries = function (area, seriesModel, ecModel) {\n    // Check whether area is bound in coord, and series do not belong to that coord.\n    // If do not do this check, some brush (like lineX) will controll all axes.\n    var targetInfo = this.findTargetInfo(area, ecModel);\n    return targetInfo === true || targetInfo && indexOf(targetInfo.coordSyses, seriesModel.coordinateSystem) >= 0;\n  };\n  /**\n   * If return Object, a coord found.\n   * If reutrn true, global found.\n   * Otherwise nothing found.\n   */\n\n\n  BrushTargetManager.prototype.findTargetInfo = function (area, ecModel) {\n    var targetInfoList = this._targetInfoList;\n    var foundCpts = parseFinder(ecModel, area);\n\n    for (var i = 0; i < targetInfoList.length; i++) {\n      var targetInfo = targetInfoList[i];\n      var areaPanelId = area.panelId;\n\n      if (areaPanelId) {\n        if (targetInfo.panelId === areaPanelId) {\n          return targetInfo;\n        }\n      } else {\n        for (var j = 0; j < targetInfoMatchers.length; j++) {\n          if (targetInfoMatchers[j](foundCpts, targetInfo)) {\n            return targetInfo;\n          }\n        }\n      }\n    }\n\n    return true;\n  };\n\n  return BrushTargetManager;\n}();\n\nfunction formatMinMax(minMax) {\n  minMax[0] > minMax[1] && minMax.reverse();\n  return minMax;\n}\n\nfunction parseFinder(ecModel, finder) {\n  return modelUtilParseFinder(ecModel, finder, {\n    includeMainTypes: INCLUDE_FINDER_MAIN_TYPES\n  });\n}\n\nvar targetInfoBuilders = {\n  grid: function grid(foundCpts, targetInfoList) {\n    var xAxisModels = foundCpts.xAxisModels;\n    var yAxisModels = foundCpts.yAxisModels;\n    var gridModels = foundCpts.gridModels; // Remove duplicated.\n\n    var gridModelMap = createHashMap();\n    var xAxesHas = {};\n    var yAxesHas = {};\n\n    if (!xAxisModels && !yAxisModels && !gridModels) {\n      return;\n    }\n\n    each(xAxisModels, function (axisModel) {\n      var gridModel = axisModel.axis.grid.model;\n      gridModelMap.set(gridModel.id, gridModel);\n      xAxesHas[gridModel.id] = true;\n    });\n    each(yAxisModels, function (axisModel) {\n      var gridModel = axisModel.axis.grid.model;\n      gridModelMap.set(gridModel.id, gridModel);\n      yAxesHas[gridModel.id] = true;\n    });\n    each(gridModels, function (gridModel) {\n      gridModelMap.set(gridModel.id, gridModel);\n      xAxesHas[gridModel.id] = true;\n      yAxesHas[gridModel.id] = true;\n    });\n    gridModelMap.each(function (gridModel) {\n      var grid = gridModel.coordinateSystem;\n      var cartesians = [];\n      each(grid.getCartesians(), function (cartesian, index) {\n        if (indexOf(xAxisModels, cartesian.getAxis('x').model) >= 0 || indexOf(yAxisModels, cartesian.getAxis('y').model) >= 0) {\n          cartesians.push(cartesian);\n        }\n      });\n      targetInfoList.push({\n        panelId: 'grid--' + gridModel.id,\n        gridModel: gridModel,\n        coordSysModel: gridModel,\n        // Use the first one as the representitive coordSys.\n        coordSys: cartesians[0],\n        coordSyses: cartesians,\n        getPanelRect: panelRectBuilders.grid,\n        xAxisDeclared: xAxesHas[gridModel.id],\n        yAxisDeclared: yAxesHas[gridModel.id]\n      });\n    });\n  },\n  geo: function geo(foundCpts, targetInfoList) {\n    each(foundCpts.geoModels, function (geoModel) {\n      var coordSys = geoModel.coordinateSystem;\n      targetInfoList.push({\n        panelId: 'geo--' + geoModel.id,\n        geoModel: geoModel,\n        coordSysModel: geoModel,\n        coordSys: coordSys,\n        coordSyses: [coordSys],\n        getPanelRect: panelRectBuilders.geo\n      });\n    });\n  }\n};\nvar targetInfoMatchers = [// grid\nfunction (foundCpts, targetInfo) {\n  var xAxisModel = foundCpts.xAxisModel;\n  var yAxisModel = foundCpts.yAxisModel;\n  var gridModel = foundCpts.gridModel;\n  !gridModel && xAxisModel && (gridModel = xAxisModel.axis.grid.model);\n  !gridModel && yAxisModel && (gridModel = yAxisModel.axis.grid.model);\n  return gridModel && gridModel === targetInfo.gridModel;\n}, // geo\nfunction (foundCpts, targetInfo) {\n  var geoModel = foundCpts.geoModel;\n  return geoModel && geoModel === targetInfo.geoModel;\n}];\nvar panelRectBuilders = {\n  grid: function grid() {\n    // grid is not Transformable.\n    return this.coordSys.master.getRect().clone();\n  },\n  geo: function geo() {\n    var coordSys = this.coordSys;\n    var rect = coordSys.getBoundingRect().clone(); // geo roam and zoom transform\n\n    rect.applyTransform(graphic.getTransform(coordSys));\n    return rect;\n  }\n};\nvar coordConvert = {\n  lineX: curry(axisConvert, 0),\n  lineY: curry(axisConvert, 1),\n  rect: function rect(to, coordSys, rangeOrCoordRange, clamp) {\n    var xminymin = to ? coordSys.pointToData([rangeOrCoordRange[0][0], rangeOrCoordRange[1][0]], clamp) : coordSys.dataToPoint([rangeOrCoordRange[0][0], rangeOrCoordRange[1][0]], clamp);\n    var xmaxymax = to ? coordSys.pointToData([rangeOrCoordRange[0][1], rangeOrCoordRange[1][1]], clamp) : coordSys.dataToPoint([rangeOrCoordRange[0][1], rangeOrCoordRange[1][1]], clamp);\n    var values = [formatMinMax([xminymin[0], xmaxymax[0]]), formatMinMax([xminymin[1], xmaxymax[1]])];\n    return {\n      values: values,\n      xyMinMax: values\n    };\n  },\n  polygon: function polygon(to, coordSys, rangeOrCoordRange, clamp) {\n    var xyMinMax = [[Infinity, -Infinity], [Infinity, -Infinity]];\n    var values = map(rangeOrCoordRange, function (item) {\n      var p = to ? coordSys.pointToData(item, clamp) : coordSys.dataToPoint(item, clamp);\n      xyMinMax[0][0] = Math.min(xyMinMax[0][0], p[0]);\n      xyMinMax[1][0] = Math.min(xyMinMax[1][0], p[1]);\n      xyMinMax[0][1] = Math.max(xyMinMax[0][1], p[0]);\n      xyMinMax[1][1] = Math.max(xyMinMax[1][1], p[1]);\n      return p;\n    });\n    return {\n      values: values,\n      xyMinMax: xyMinMax\n    };\n  }\n};\n\nfunction axisConvert(axisNameIndex, to, coordSys, rangeOrCoordRange) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(coordSys.type === 'cartesian2d', 'lineX/lineY brush is available only in cartesian2d.');\n  }\n\n  var axis = coordSys.getAxis(['x', 'y'][axisNameIndex]);\n  var values = formatMinMax(map([0, 1], function (i) {\n    return to ? axis.coordToData(axis.toLocalCoord(rangeOrCoordRange[i]), true) : axis.toGlobalCoord(axis.dataToCoord(rangeOrCoordRange[i]));\n  }));\n  var xyMinMax = [];\n  xyMinMax[axisNameIndex] = values;\n  xyMinMax[1 - axisNameIndex] = [NaN, NaN];\n  return {\n    values: values,\n    xyMinMax: xyMinMax\n  };\n}\n\nvar diffProcessor = {\n  lineX: curry(axisDiffProcessor, 0),\n  lineY: curry(axisDiffProcessor, 1),\n  rect: function rect(values, refer, scales) {\n    return [[values[0][0] - scales[0] * refer[0][0], values[0][1] - scales[0] * refer[0][1]], [values[1][0] - scales[1] * refer[1][0], values[1][1] - scales[1] * refer[1][1]]];\n  },\n  polygon: function polygon(values, refer, scales) {\n    return map(values, function (item, idx) {\n      return [item[0] - scales[0] * refer[idx][0], item[1] - scales[1] * refer[idx][1]];\n    });\n  }\n};\n\nfunction axisDiffProcessor(axisNameIndex, values, refer, scales) {\n  return [values[0] - scales[axisNameIndex] * refer[0], values[1] - scales[axisNameIndex] * refer[1]];\n} // We have to process scale caused by dataZoom manually,\n// although it might be not accurate.\n// Return [0~1, 0~1]\n\n\nfunction getScales(xyMinMaxCurr, xyMinMaxOrigin) {\n  var sizeCurr = getSize(xyMinMaxCurr);\n  var sizeOrigin = getSize(xyMinMaxOrigin);\n  var scales = [sizeCurr[0] / sizeOrigin[0], sizeCurr[1] / sizeOrigin[1]];\n  isNaN(scales[0]) && (scales[0] = 1);\n  isNaN(scales[1]) && (scales[1] = 1);\n  return scales;\n}\n\nfunction getSize(xyMinMax) {\n  return xyMinMax ? [xyMinMax[0][1] - xyMinMax[0][0], xyMinMax[1][1] - xyMinMax[1][0]] : [NaN, NaN];\n}\n\nexport default BrushTargetManager;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\"; // TODO depends on DataZoom and Brush\n\nimport * as zrUtil from 'zrender/lib/core/util';\nimport BrushController from '../../helper/BrushController';\nimport BrushTargetManager from '../../helper/BrushTargetManager';\nimport * as history from '../../dataZoom/history';\nimport sliderMove from '../../helper/sliderMove';\nimport { ToolboxFeature } from '../featureManager';\nimport { makeInternalComponentId, parseFinder } from '../../../util/model';\nimport { registerInternalOptionCreator } from '../../../model/internalComponentCreator';\nvar each = zrUtil.each;\nvar DATA_ZOOM_ID_BASE = makeInternalComponentId('toolbox-dataZoom_');\nvar ICON_TYPES = ['zoom', 'back'];\n\nvar DataZoomFeature =\n/** @class */\nfunction (_super) {\n  __extends(DataZoomFeature, _super);\n\n  function DataZoomFeature() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  DataZoomFeature.prototype.render = function (featureModel, ecModel, api, payload) {\n    if (!this._brushController) {\n      this._brushController = new BrushController(api.getZr());\n\n      this._brushController.on('brush', zrUtil.bind(this._onBrush, this)).mount();\n    }\n\n    updateZoomBtnStatus(featureModel, ecModel, this, payload, api);\n    updateBackBtnStatus(featureModel, ecModel);\n  };\n\n  DataZoomFeature.prototype.onclick = function (ecModel, api, type) {\n    handlers[type].call(this);\n  };\n\n  DataZoomFeature.prototype.remove = function (ecModel, api) {\n    this._brushController && this._brushController.unmount();\n  };\n\n  DataZoomFeature.prototype.dispose = function (ecModel, api) {\n    this._brushController && this._brushController.dispose();\n  };\n\n  DataZoomFeature.prototype._onBrush = function (eventParam) {\n    var areas = eventParam.areas;\n\n    if (!eventParam.isEnd || !areas.length) {\n      return;\n    }\n\n    var snapshot = {};\n    var ecModel = this.ecModel;\n\n    this._brushController.updateCovers([]); // remove cover\n\n\n    var brushTargetManager = new BrushTargetManager(makeAxisFinder(this.model), ecModel, {\n      include: ['grid']\n    });\n    brushTargetManager.matchOutputRanges(areas, ecModel, function (area, coordRange, coordSys) {\n      if (coordSys.type !== 'cartesian2d') {\n        return;\n      }\n\n      var brushType = area.brushType;\n\n      if (brushType === 'rect') {\n        setBatch('x', coordSys, coordRange[0]);\n        setBatch('y', coordSys, coordRange[1]);\n      } else {\n        setBatch({\n          lineX: 'x',\n          lineY: 'y'\n        }[brushType], coordSys, coordRange);\n      }\n    });\n    history.push(ecModel, snapshot);\n\n    this._dispatchZoomAction(snapshot);\n\n    function setBatch(dimName, coordSys, minMax) {\n      var axis = coordSys.getAxis(dimName);\n      var axisModel = axis.model;\n      var dataZoomModel = findDataZoom(dimName, axisModel, ecModel); // Restrict range.\n\n      var minMaxSpan = dataZoomModel.findRepresentativeAxisProxy(axisModel).getMinMaxSpan();\n\n      if (minMaxSpan.minValueSpan != null || minMaxSpan.maxValueSpan != null) {\n        minMax = sliderMove(0, minMax.slice(), axis.scale.getExtent(), 0, minMaxSpan.minValueSpan, minMaxSpan.maxValueSpan);\n      }\n\n      dataZoomModel && (snapshot[dataZoomModel.id] = {\n        dataZoomId: dataZoomModel.id,\n        startValue: minMax[0],\n        endValue: minMax[1]\n      });\n    }\n\n    function findDataZoom(dimName, axisModel, ecModel) {\n      var found;\n      ecModel.eachComponent({\n        mainType: 'dataZoom',\n        subType: 'select'\n      }, function (dzModel) {\n        var has = dzModel.getAxisModel(dimName, axisModel.componentIndex);\n        has && (found = dzModel);\n      });\n      return found;\n    }\n  };\n\n  ;\n\n  DataZoomFeature.prototype._dispatchZoomAction = function (snapshot) {\n    var batch = []; // Convert from hash map to array.\n\n    each(snapshot, function (batchItem, dataZoomId) {\n      batch.push(zrUtil.clone(batchItem));\n    });\n    batch.length && this.api.dispatchAction({\n      type: 'dataZoom',\n      from: this.uid,\n      batch: batch\n    });\n  };\n\n  DataZoomFeature.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      filterMode: 'filter',\n      // Icon group\n      icon: {\n        zoom: 'M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1',\n        back: 'M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26'\n      },\n      // `zoom`, `back`\n      title: ecModel.getLocaleModel().get(['toolbox', 'dataZoom', 'title']),\n      brushStyle: {\n        borderWidth: 0,\n        color: 'rgba(210,219,238,0.2)'\n      }\n    };\n    return defaultOption;\n  };\n\n  return DataZoomFeature;\n}(ToolboxFeature);\n\nvar handlers = {\n  zoom: function zoom() {\n    var nextActive = !this._isZoomActive;\n    this.api.dispatchAction({\n      type: 'takeGlobalCursor',\n      key: 'dataZoomSelect',\n      dataZoomSelectActive: nextActive\n    });\n  },\n  back: function back() {\n    this._dispatchZoomAction(history.pop(this.ecModel));\n  }\n};\n\nfunction makeAxisFinder(dzFeatureModel) {\n  var setting = {\n    xAxisIndex: dzFeatureModel.get('xAxisIndex', true),\n    yAxisIndex: dzFeatureModel.get('yAxisIndex', true),\n    xAxisId: dzFeatureModel.get('xAxisId', true),\n    yAxisId: dzFeatureModel.get('yAxisId', true)\n  }; // If both `xAxisIndex` `xAxisId` not set, it means 'all'.\n  // If both `yAxisIndex` `yAxisId` not set, it means 'all'.\n  // Some old cases set like this below to close yAxis control but leave xAxis control:\n  // `{ feature: { dataZoom: { yAxisIndex: false } }`.\n\n  if (setting.xAxisIndex == null && setting.xAxisId == null) {\n    setting.xAxisIndex = 'all';\n  }\n\n  if (setting.yAxisIndex == null && setting.yAxisId == null) {\n    setting.yAxisIndex = 'all';\n  }\n\n  return setting;\n}\n\nfunction updateBackBtnStatus(featureModel, ecModel) {\n  featureModel.setIconStatus('back', history.count(ecModel) > 1 ? 'emphasis' : 'normal');\n}\n\nfunction updateZoomBtnStatus(featureModel, ecModel, view, payload, api) {\n  var zoomActive = view._isZoomActive;\n\n  if (payload && payload.type === 'takeGlobalCursor') {\n    zoomActive = payload.key === 'dataZoomSelect' ? payload.dataZoomSelectActive : false;\n  }\n\n  view._isZoomActive = zoomActive;\n  featureModel.setIconStatus('zoom', zoomActive ? 'emphasis' : 'normal');\n  var brushTargetManager = new BrushTargetManager(makeAxisFinder(featureModel), ecModel, {\n    include: ['grid']\n  });\n  var panels = brushTargetManager.makePanelOpts(api, function (targetInfo) {\n    return targetInfo.xAxisDeclared && !targetInfo.yAxisDeclared ? 'lineX' : !targetInfo.xAxisDeclared && targetInfo.yAxisDeclared ? 'lineY' : 'rect';\n  });\n\n  view._brushController.setPanels(panels).enableBrush(zoomActive && panels.length ? {\n    brushType: 'auto',\n    brushStyle: featureModel.getModel('brushStyle').getItemStyle()\n  } : false);\n}\n\nregisterInternalOptionCreator('dataZoom', function (ecModel) {\n  var toolboxModel = ecModel.getComponent('toolbox', 0);\n  var featureDataZoomPath = ['feature', 'dataZoom'];\n\n  if (!toolboxModel || toolboxModel.get(featureDataZoomPath) == null) {\n    return;\n  }\n\n  var dzFeatureModel = toolboxModel.getModel(featureDataZoomPath);\n  var dzOptions = [];\n  var finder = makeAxisFinder(dzFeatureModel);\n  var finderResult = parseFinder(ecModel, finder);\n  each(finderResult.xAxisModels, function (axisModel) {\n    return buildInternalOptions(axisModel, 'xAxis', 'xAxisIndex');\n  });\n  each(finderResult.yAxisModels, function (axisModel) {\n    return buildInternalOptions(axisModel, 'yAxis', 'yAxisIndex');\n  });\n\n  function buildInternalOptions(axisModel, axisMainType, axisIndexPropName) {\n    var axisIndex = axisModel.componentIndex;\n    var newOpt = {\n      type: 'select',\n      $fromToolbox: true,\n      // Default to be filter\n      filterMode: dzFeatureModel.get('filterMode', true) || 'filter',\n      // Id for merge mapping.\n      id: DATA_ZOOM_ID_BASE + axisMainType + axisIndex\n    };\n    newOpt[axisIndexPropName] = axisIndex;\n    dzOptions.push(newOpt);\n  }\n\n  return dzOptions;\n});\nexport default DataZoomFeature;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { normalizeToArray } from '../../util/model';\nvar DEFAULT_TOOLBOX_BTNS = ['rect', 'polygon', 'keep', 'clear'];\nexport default function brushPreprocessor(option, isNew) {\n  var brushComponents = normalizeToArray(option ? option.brush : []);\n\n  if (!brushComponents.length) {\n    return;\n  }\n\n  var brushComponentSpecifiedBtns = [];\n  zrUtil.each(brushComponents, function (brushOpt) {\n    var tbs = brushOpt.hasOwnProperty('toolbox') ? brushOpt.toolbox : [];\n\n    if (tbs instanceof Array) {\n      brushComponentSpecifiedBtns = brushComponentSpecifiedBtns.concat(tbs);\n    }\n  });\n  var toolbox = option && option.toolbox;\n\n  if (zrUtil.isArray(toolbox)) {\n    toolbox = toolbox[0];\n  }\n\n  if (!toolbox) {\n    toolbox = {\n      feature: {}\n    };\n    option.toolbox = [toolbox];\n  }\n\n  var toolboxFeature = toolbox.feature || (toolbox.feature = {});\n  var toolboxBrush = toolboxFeature.brush || (toolboxFeature.brush = {});\n  var brushTypes = toolboxBrush.type || (toolboxBrush.type = []);\n  brushTypes.push.apply(brushTypes, brushComponentSpecifiedBtns);\n  removeDuplicate(brushTypes);\n\n  if (isNew && !brushTypes.length) {\n    brushTypes.push.apply(brushTypes, DEFAULT_TOOLBOX_BTNS);\n  }\n}\n\nfunction removeDuplicate(arr) {\n  var map = {};\n  zrUtil.each(arr, function (val) {\n    map[val] = 1;\n  });\n  arr.length = 0;\n  zrUtil.each(map, function (flag, val) {\n    arr.push(val);\n  });\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @file Visual solution, for consistent option specification.\n */\nimport * as zrUtil from 'zrender/lib/core/util';\nimport VisualMapping from './VisualMapping';\nimport { getItemVisualFromData, setItemVisualFromData } from './helper';\nvar each = zrUtil.each;\n\nfunction hasKeys(obj) {\n  if (obj) {\n    for (var name_1 in obj) {\n      if (obj.hasOwnProperty(name_1)) {\n        return true;\n      }\n    }\n  }\n}\n\nexport function createVisualMappings(option, stateList, supplementVisualOption) {\n  var visualMappings = {};\n  each(stateList, function (state) {\n    var mappings = visualMappings[state] = createMappings();\n    each(option[state], function (visualData, visualType) {\n      if (!VisualMapping.isValidType(visualType)) {\n        return;\n      }\n\n      var mappingOption = {\n        type: visualType,\n        visual: visualData\n      };\n      supplementVisualOption && supplementVisualOption(mappingOption, state);\n      mappings[visualType] = new VisualMapping(mappingOption); // Prepare a alpha for opacity, for some case that opacity\n      // is not supported, such as rendering using gradient color.\n\n      if (visualType === 'opacity') {\n        mappingOption = zrUtil.clone(mappingOption);\n        mappingOption.type = 'colorAlpha';\n        mappings.__hidden.__alphaForOpacity = new VisualMapping(mappingOption);\n      }\n    });\n  });\n  return visualMappings;\n\n  function createMappings() {\n    var Creater = function Creater() {}; // Make sure hidden fields will not be visited by\n    // object iteration (with hasOwnProperty checking).\n\n\n    Creater.prototype.__hidden = Creater.prototype;\n    var obj = new Creater();\n    return obj;\n  }\n}\nexport function replaceVisualOption(thisOption, newOption, keys) {\n  // Visual attributes merge is not supported, otherwise it\n  // brings overcomplicated merge logic. See #2853. So if\n  // newOption has anyone of these keys, all of these keys\n  // will be reset. Otherwise, all keys remain.\n  var has;\n  zrUtil.each(keys, function (key) {\n    if (newOption.hasOwnProperty(key) && hasKeys(newOption[key])) {\n      has = true;\n    }\n  });\n  has && zrUtil.each(keys, function (key) {\n    if (newOption.hasOwnProperty(key) && hasKeys(newOption[key])) {\n      thisOption[key] = zrUtil.clone(newOption[key]);\n    } else {\n      delete thisOption[key];\n    }\n  });\n}\n/**\n * @param stateList\n * @param visualMappings\n * @param list\n * @param getValueState param: valueOrIndex, return: state.\n * @param scope Scope for getValueState\n * @param dimension Concrete dimension, if used.\n */\n// ???! handle brush?\n\nexport function applyVisual(stateList, visualMappings, data, getValueState, scope, dimension) {\n  var visualTypesMap = {};\n  zrUtil.each(stateList, function (state) {\n    var visualTypes = VisualMapping.prepareVisualTypes(visualMappings[state]);\n    visualTypesMap[state] = visualTypes;\n  });\n  var dataIndex;\n\n  function getVisual(key) {\n    return getItemVisualFromData(data, dataIndex, key);\n  }\n\n  function setVisual(key, value) {\n    setItemVisualFromData(data, dataIndex, key, value);\n  }\n\n  if (dimension == null) {\n    data.each(eachItem);\n  } else {\n    data.each([dimension], eachItem);\n  }\n\n  function eachItem(valueOrIndex, index) {\n    dataIndex = dimension == null ? valueOrIndex // First argument is index\n    : index;\n    var rawDataItem = data.getRawDataItem(dataIndex); // Consider performance\n    // @ts-ignore\n\n    if (rawDataItem && rawDataItem.visualMap === false) {\n      return;\n    }\n\n    var valueState = getValueState.call(scope, valueOrIndex);\n    var mappings = visualMappings[valueState];\n    var visualTypes = visualTypesMap[valueState];\n\n    for (var i = 0, len = visualTypes.length; i < len; i++) {\n      var type = visualTypes[i];\n      mappings[type] && mappings[type].applyVisual(valueOrIndex, getVisual, setVisual);\n    }\n  }\n}\n/**\n * @param data\n * @param stateList\n * @param visualMappings <state, Object.<visualType, module:echarts/visual/VisualMapping>>\n * @param getValueState param: valueOrIndex, return: state.\n * @param dim dimension or dimension index.\n */\n\nexport function incrementalApplyVisual(stateList, visualMappings, getValueState, dim) {\n  var visualTypesMap = {};\n  zrUtil.each(stateList, function (state) {\n    var visualTypes = VisualMapping.prepareVisualTypes(visualMappings[state]);\n    visualTypesMap[state] = visualTypes;\n  });\n  return {\n    progress: function progress(params, data) {\n      var dimIndex;\n\n      if (dim != null) {\n        dimIndex = data.getDimensionIndex(dim);\n      }\n\n      function getVisual(key) {\n        return getItemVisualFromData(data, dataIndex, key);\n      }\n\n      function setVisual(key, value) {\n        setItemVisualFromData(data, dataIndex, key, value);\n      }\n\n      var dataIndex;\n      var store = data.getStore();\n\n      while ((dataIndex = params.next()) != null) {\n        var rawDataItem = data.getRawDataItem(dataIndex); // Consider performance\n        // @ts-ignore\n\n        if (rawDataItem && rawDataItem.visualMap === false) {\n          continue;\n        }\n\n        var value = dim != null ? store.get(dimIndex, dataIndex) : dataIndex;\n        var valueState = getValueState(value);\n        var mappings = visualMappings[valueState];\n        var visualTypes = visualTypesMap[valueState];\n\n        for (var i = 0, len = visualTypes.length; i < len; i++) {\n          var type = visualTypes[i];\n          mappings[type] && mappings[type].applyVisual(value, getVisual, setVisual);\n        }\n      }\n    }\n  };\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as polygonContain from 'zrender/lib/contain/polygon';\nimport BoundingRect from 'zrender/lib/core/BoundingRect';\nimport { linePolygonIntersect } from '../../util/graphic';\nexport function makeBrushCommonSelectorForSeries(area) {\n  var brushType = area.brushType; // Do not use function binding or curry for performance.\n\n  var selectors = {\n    point: function point(itemLayout) {\n      return selector[brushType].point(itemLayout, selectors, area);\n    },\n    rect: function rect(itemLayout) {\n      return selector[brushType].rect(itemLayout, selectors, area);\n    }\n  };\n  return selectors;\n}\nvar selector = {\n  lineX: getLineSelectors(0),\n  lineY: getLineSelectors(1),\n  rect: {\n    point: function point(itemLayout, selectors, area) {\n      return itemLayout && area.boundingRect.contain(itemLayout[0], itemLayout[1]);\n    },\n    rect: function rect(itemLayout, selectors, area) {\n      return itemLayout && area.boundingRect.intersect(itemLayout);\n    }\n  },\n  polygon: {\n    point: function point(itemLayout, selectors, area) {\n      return itemLayout && area.boundingRect.contain(itemLayout[0], itemLayout[1]) && polygonContain.contain(area.range, itemLayout[0], itemLayout[1]);\n    },\n    rect: function rect(itemLayout, selectors, area) {\n      var points = area.range;\n\n      if (!itemLayout || points.length <= 1) {\n        return false;\n      }\n\n      var x = itemLayout.x;\n      var y = itemLayout.y;\n      var width = itemLayout.width;\n      var height = itemLayout.height;\n      var p = points[0];\n\n      if (polygonContain.contain(points, x, y) || polygonContain.contain(points, x + width, y) || polygonContain.contain(points, x, y + height) || polygonContain.contain(points, x + width, y + height) || BoundingRect.create(itemLayout).contain(p[0], p[1]) || linePolygonIntersect(x, y, x + width, y, points) || linePolygonIntersect(x, y, x, y + height, points) || linePolygonIntersect(x + width, y, x + width, y + height, points) || linePolygonIntersect(x, y + height, x + width, y + height, points)) {\n        return true;\n      }\n    }\n  }\n};\n\nfunction getLineSelectors(xyIndex) {\n  var xy = ['x', 'y'];\n  var wh = ['width', 'height'];\n  return {\n    point: function point(itemLayout, selectors, area) {\n      if (itemLayout) {\n        var range = area.range;\n        var p = itemLayout[xyIndex];\n        return inLineRange(p, range);\n      }\n    },\n    rect: function rect(itemLayout, selectors, area) {\n      if (itemLayout) {\n        var range = area.range;\n        var layoutRange = [itemLayout[xy[xyIndex]], itemLayout[xy[xyIndex]] + itemLayout[wh[xyIndex]]];\n        layoutRange[1] < layoutRange[0] && layoutRange.reverse();\n        return inLineRange(layoutRange[0], range) || inLineRange(layoutRange[1], range) || inLineRange(range[0], layoutRange) || inLineRange(range[1], layoutRange);\n      }\n    }\n  };\n}\n\nfunction inLineRange(p, range) {\n  return range[0] <= p && p <= range[1];\n}\n\nexport default selector;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport BoundingRect from 'zrender/lib/core/BoundingRect';\nimport * as visualSolution from '../../visual/visualSolution';\nimport { makeBrushCommonSelectorForSeries } from './selector';\nimport * as throttleUtil from '../../util/throttle';\nimport BrushTargetManager from '../helper/BrushTargetManager';\nvar STATE_LIST = ['inBrush', 'outOfBrush'];\nvar DISPATCH_METHOD = '__ecBrushSelect';\nvar DISPATCH_FLAG = '__ecInBrushSelectEvent';\n;\nexport function layoutCovers(ecModel) {\n  ecModel.eachComponent({\n    mainType: 'brush'\n  }, function (brushModel) {\n    var brushTargetManager = brushModel.brushTargetManager = new BrushTargetManager(brushModel.option, ecModel);\n    brushTargetManager.setInputRanges(brushModel.areas, ecModel);\n  });\n}\n/**\n * Register the visual encoding if this modules required.\n */\n\nexport default function brushVisual(ecModel, api, payload) {\n  var brushSelected = [];\n  var throttleType;\n  var throttleDelay;\n  ecModel.eachComponent({\n    mainType: 'brush'\n  }, function (brushModel) {\n    payload && payload.type === 'takeGlobalCursor' && brushModel.setBrushOption(payload.key === 'brush' ? payload.brushOption : {\n      brushType: false\n    });\n  });\n  layoutCovers(ecModel);\n  ecModel.eachComponent({\n    mainType: 'brush'\n  }, function (brushModel, brushIndex) {\n    var thisBrushSelected = {\n      brushId: brushModel.id,\n      brushIndex: brushIndex,\n      brushName: brushModel.name,\n      areas: zrUtil.clone(brushModel.areas),\n      selected: []\n    }; // Every brush component exists in event params, convenient\n    // for user to find by index.\n\n    brushSelected.push(thisBrushSelected);\n    var brushOption = brushModel.option;\n    var brushLink = brushOption.brushLink;\n    var linkedSeriesMap = [];\n    var selectedDataIndexForLink = [];\n    var rangeInfoBySeries = [];\n    var hasBrushExists = false;\n\n    if (!brushIndex) {\n      // Only the first throttle setting works.\n      throttleType = brushOption.throttleType;\n      throttleDelay = brushOption.throttleDelay;\n    } // Add boundingRect and selectors to range.\n\n\n    var areas = zrUtil.map(brushModel.areas, function (area) {\n      var builder = boundingRectBuilders[area.brushType];\n      var selectableArea = zrUtil.defaults({\n        boundingRect: builder ? builder(area) : void 0\n      }, area);\n      selectableArea.selectors = makeBrushCommonSelectorForSeries(selectableArea);\n      return selectableArea;\n    });\n    var visualMappings = visualSolution.createVisualMappings(brushModel.option, STATE_LIST, function (mappingOption) {\n      mappingOption.mappingMethod = 'fixed';\n    });\n    zrUtil.isArray(brushLink) && zrUtil.each(brushLink, function (seriesIndex) {\n      linkedSeriesMap[seriesIndex] = 1;\n    });\n\n    function linkOthers(seriesIndex) {\n      return brushLink === 'all' || !!linkedSeriesMap[seriesIndex];\n    } // If no supported brush or no brush on the series,\n    // all visuals should be in original state.\n\n\n    function brushed(rangeInfoList) {\n      return !!rangeInfoList.length;\n    }\n    /**\n     * Logic for each series: (If the logic has to be modified one day, do it carefully!)\n     *\n     * ( brushed  && hasBrushExist  && linkOthers  ) => StepA: record,  StepB: visualByRecord.\n     *   !brushed    hasBrushExist                             nothing,        visualByRecord.\n     *                !hasBrushExist                                              nothing.\n     * ( !brushed  && hasBrushExist  && linkOthers  ) => StepA:  nothing,  StepB: visualByRecord.\n     *                !hasBrushExist                                              nothing.\n     * ( brushed  &&                     !linkOthers ) => StepA:  nothing,  StepB: visualByCheck.\n     *   !brushed                                                                  nothing.\n     * ( !brushed  &&                     !linkOthers ) => StepA:  nothing,  StepB:  nothing.\n     */\n    // Step A\n\n\n    ecModel.eachSeries(function (seriesModel, seriesIndex) {\n      var rangeInfoList = rangeInfoBySeries[seriesIndex] = [];\n      seriesModel.subType === 'parallel' ? stepAParallel(seriesModel, seriesIndex) : stepAOthers(seriesModel, seriesIndex, rangeInfoList);\n    });\n\n    function stepAParallel(seriesModel, seriesIndex) {\n      var coordSys = seriesModel.coordinateSystem;\n      hasBrushExists = hasBrushExists || coordSys.hasAxisBrushed();\n      linkOthers(seriesIndex) && coordSys.eachActiveState(seriesModel.getData(), function (activeState, dataIndex) {\n        activeState === 'active' && (selectedDataIndexForLink[dataIndex] = 1);\n      });\n    }\n\n    function stepAOthers(seriesModel, seriesIndex, rangeInfoList) {\n      if (!seriesModel.brushSelector || brushModelNotControll(brushModel, seriesIndex)) {\n        return;\n      }\n\n      zrUtil.each(areas, function (area) {\n        if (brushModel.brushTargetManager.controlSeries(area, seriesModel, ecModel)) {\n          rangeInfoList.push(area);\n        }\n\n        hasBrushExists = hasBrushExists || brushed(rangeInfoList);\n      });\n\n      if (linkOthers(seriesIndex) && brushed(rangeInfoList)) {\n        var data_1 = seriesModel.getData();\n        data_1.each(function (dataIndex) {\n          if (checkInRange(seriesModel, rangeInfoList, data_1, dataIndex)) {\n            selectedDataIndexForLink[dataIndex] = 1;\n          }\n        });\n      }\n    } // Step B\n\n\n    ecModel.eachSeries(function (seriesModel, seriesIndex) {\n      var seriesBrushSelected = {\n        seriesId: seriesModel.id,\n        seriesIndex: seriesIndex,\n        seriesName: seriesModel.name,\n        dataIndex: []\n      }; // Every series exists in event params, convenient\n      // for user to find series by seriesIndex.\n\n      thisBrushSelected.selected.push(seriesBrushSelected);\n      var rangeInfoList = rangeInfoBySeries[seriesIndex];\n      var data = seriesModel.getData();\n      var getValueState = linkOthers(seriesIndex) ? function (dataIndex) {\n        return selectedDataIndexForLink[dataIndex] ? (seriesBrushSelected.dataIndex.push(data.getRawIndex(dataIndex)), 'inBrush') : 'outOfBrush';\n      } : function (dataIndex) {\n        return checkInRange(seriesModel, rangeInfoList, data, dataIndex) ? (seriesBrushSelected.dataIndex.push(data.getRawIndex(dataIndex)), 'inBrush') : 'outOfBrush';\n      }; // If no supported brush or no brush, all visuals are in original state.\n\n      (linkOthers(seriesIndex) ? hasBrushExists : brushed(rangeInfoList)) && visualSolution.applyVisual(STATE_LIST, visualMappings, data, getValueState);\n    });\n  });\n  dispatchAction(api, throttleType, throttleDelay, brushSelected, payload);\n}\n;\n\nfunction dispatchAction(api, throttleType, throttleDelay, brushSelected, payload) {\n  // This event will not be triggered when `setOpion`, otherwise dead lock may\n  // triggered when do `setOption` in event listener, which we do not find\n  // satisfactory way to solve yet. Some considered resolutions:\n  // (a) Diff with prevoius selected data ant only trigger event when changed.\n  // But store previous data and diff precisely (i.e., not only by dataIndex, but\n  // also detect value changes in selected data) might bring complexity or fragility.\n  // (b) Use spectial param like `silent` to suppress event triggering.\n  // But such kind of volatile param may be weird in `setOption`.\n  if (!payload) {\n    return;\n  }\n\n  var zr = api.getZr();\n\n  if (zr[DISPATCH_FLAG]) {\n    return;\n  }\n\n  if (!zr[DISPATCH_METHOD]) {\n    zr[DISPATCH_METHOD] = doDispatch;\n  }\n\n  var fn = throttleUtil.createOrUpdate(zr, DISPATCH_METHOD, throttleDelay, throttleType);\n  fn(api, brushSelected);\n}\n\nfunction doDispatch(api, brushSelected) {\n  if (!api.isDisposed()) {\n    var zr = api.getZr();\n    zr[DISPATCH_FLAG] = true;\n    api.dispatchAction({\n      type: 'brushSelect',\n      batch: brushSelected\n    });\n    zr[DISPATCH_FLAG] = false;\n  }\n}\n\nfunction checkInRange(seriesModel, rangeInfoList, data, dataIndex) {\n  for (var i = 0, len = rangeInfoList.length; i < len; i++) {\n    var area = rangeInfoList[i];\n\n    if (seriesModel.brushSelector(dataIndex, data, area.selectors, area)) {\n      return true;\n    }\n  }\n}\n\nfunction brushModelNotControll(brushModel, seriesIndex) {\n  var seriesIndices = brushModel.option.seriesIndex;\n  return seriesIndices != null && seriesIndices !== 'all' && (zrUtil.isArray(seriesIndices) ? zrUtil.indexOf(seriesIndices, seriesIndex) < 0 : seriesIndex !== seriesIndices);\n}\n\nvar boundingRectBuilders = {\n  rect: function rect(area) {\n    return getBoundingRectFromMinMax(area.range);\n  },\n  polygon: function polygon(area) {\n    var minMax;\n    var range = area.range;\n\n    for (var i = 0, len = range.length; i < len; i++) {\n      minMax = minMax || [[Infinity, -Infinity], [Infinity, -Infinity]];\n      var rg = range[i];\n      rg[0] < minMax[0][0] && (minMax[0][0] = rg[0]);\n      rg[0] > minMax[0][1] && (minMax[0][1] = rg[0]);\n      rg[1] < minMax[1][0] && (minMax[1][0] = rg[1]);\n      rg[1] > minMax[1][1] && (minMax[1][1] = rg[1]);\n    }\n\n    return minMax && getBoundingRectFromMinMax(minMax);\n  }\n};\n\nfunction getBoundingRectFromMinMax(minMax) {\n  return new BoundingRect(minMax[0][0], minMax[1][0], minMax[0][1] - minMax[0][0], minMax[1][1] - minMax[1][0]);\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport BrushController from '../helper/BrushController';\nimport { layoutCovers } from './visualEncoding';\nimport ComponentView from '../../view/Component';\n\nvar BrushView =\n/** @class */\nfunction (_super) {\n  __extends(BrushView, _super);\n\n  function BrushView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = BrushView.type;\n    return _this;\n  }\n\n  BrushView.prototype.init = function (ecModel, api) {\n    this.ecModel = ecModel;\n    this.api = api;\n    this.model;\n    (this._brushController = new BrushController(api.getZr())).on('brush', zrUtil.bind(this._onBrush, this)).mount();\n  };\n\n  BrushView.prototype.render = function (brushModel, ecModel, api, payload) {\n    this.model = brushModel;\n\n    this._updateController(brushModel, ecModel, api, payload);\n  };\n\n  BrushView.prototype.updateTransform = function (brushModel, ecModel, api, payload) {\n    // PENDING: `updateTransform` is a little tricky, whose layout need\n    // to be calculate mandatorily and other stages will not be performed.\n    // Take care the correctness of the logic. See #11754 .\n    layoutCovers(ecModel);\n\n    this._updateController(brushModel, ecModel, api, payload);\n  };\n\n  BrushView.prototype.updateVisual = function (brushModel, ecModel, api, payload) {\n    this.updateTransform(brushModel, ecModel, api, payload);\n  };\n\n  BrushView.prototype.updateView = function (brushModel, ecModel, api, payload) {\n    this._updateController(brushModel, ecModel, api, payload);\n  };\n\n  BrushView.prototype._updateController = function (brushModel, ecModel, api, payload) {\n    // Do not update controller when drawing.\n    (!payload || payload.$from !== brushModel.id) && this._brushController.setPanels(brushModel.brushTargetManager.makePanelOpts(api)).enableBrush(brushModel.brushOption).updateCovers(brushModel.areas.slice());\n  }; // updateLayout: updateController,\n  // updateVisual: updateController,\n\n\n  BrushView.prototype.dispose = function () {\n    this._brushController.dispose();\n  };\n\n  BrushView.prototype._onBrush = function (eventParam) {\n    var modelId = this.model.id;\n    var areas = this.model.brushTargetManager.setOutputRanges(eventParam.areas, this.ecModel); // Action is not dispatched on drag end, because the drag end\n    // emits the same params with the last drag move event, and\n    // may have some delay when using touch pad, which makes\n    // animation not smooth (when using debounce).\n\n    (!eventParam.isEnd || eventParam.removeOnClick) && this.api.dispatchAction({\n      type: 'brush',\n      brushId: modelId,\n      areas: zrUtil.clone(areas),\n      $from: modelId\n    });\n    eventParam.isEnd && this.api.dispatchAction({\n      type: 'brushEnd',\n      brushId: modelId,\n      areas: zrUtil.clone(areas),\n      $from: modelId\n    });\n  };\n\n  BrushView.type = 'brush';\n  return BrushView;\n}(ComponentView);\n\nexport default BrushView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as visualSolution from '../../visual/visualSolution';\nimport Model from '../../model/Model';\nimport ComponentModel from '../../model/Component';\nvar DEFAULT_OUT_OF_BRUSH_COLOR = '#ddd';\n\nvar BrushModel =\n/** @class */\nfunction (_super) {\n  __extends(BrushModel, _super);\n\n  function BrushModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = BrushModel.type;\n    /**\n     * @readOnly\n     */\n\n    _this.areas = [];\n    /**\n     * Current brush painting area settings.\n     * @readOnly\n     */\n\n    _this.brushOption = {};\n    return _this;\n  }\n\n  BrushModel.prototype.optionUpdated = function (newOption, isInit) {\n    var thisOption = this.option;\n    !isInit && visualSolution.replaceVisualOption(thisOption, newOption, ['inBrush', 'outOfBrush']);\n    var inBrush = thisOption.inBrush = thisOption.inBrush || {}; // Always give default visual, consider setOption at the second time.\n\n    thisOption.outOfBrush = thisOption.outOfBrush || {\n      color: DEFAULT_OUT_OF_BRUSH_COLOR\n    };\n\n    if (!inBrush.hasOwnProperty('liftZ')) {\n      // Bigger than the highlight z lift, otherwise it will\n      // be effected by the highlight z when brush.\n      inBrush.liftZ = 5;\n    }\n  };\n  /**\n   * If `areas` is null/undefined, range state remain.\n   */\n\n\n  BrushModel.prototype.setAreas = function (areas) {\n    if (process.env.NODE_ENV !== 'production') {\n      zrUtil.assert(zrUtil.isArray(areas));\n      zrUtil.each(areas, function (area) {\n        zrUtil.assert(area.brushType, 'Illegal areas');\n      });\n    } // If areas is null/undefined, range state remain.\n    // This helps user to dispatchAction({type: 'brush'}) with no areas\n    // set but just want to get the current brush select info from a `brush` event.\n\n\n    if (!areas) {\n      return;\n    }\n\n    this.areas = zrUtil.map(areas, function (area) {\n      return generateBrushOption(this.option, area);\n    }, this);\n  };\n  /**\n   * Set the current painting brush option.\n   */\n\n\n  BrushModel.prototype.setBrushOption = function (brushOption) {\n    this.brushOption = generateBrushOption(this.option, brushOption);\n    this.brushType = this.brushOption.brushType;\n  };\n\n  BrushModel.type = 'brush';\n  BrushModel.dependencies = ['geo', 'grid', 'xAxis', 'yAxis', 'parallel', 'series'];\n  BrushModel.defaultOption = {\n    seriesIndex: 'all',\n    brushType: 'rect',\n    brushMode: 'single',\n    transformable: true,\n    brushStyle: {\n      borderWidth: 1,\n      color: 'rgba(210,219,238,0.3)',\n      borderColor: '#D2DBEE'\n    },\n    throttleType: 'fixRate',\n    throttleDelay: 0,\n    removeOnClick: true,\n    z: 10000\n  };\n  return BrushModel;\n}(ComponentModel);\n\nfunction generateBrushOption(option, brushOption) {\n  return zrUtil.merge({\n    brushType: option.brushType,\n    brushMode: option.brushMode,\n    transformable: option.transformable,\n    brushStyle: new Model(option.brushStyle).getItemStyle(),\n    removeOnClick: option.removeOnClick,\n    z: option.z\n  }, brushOption, true);\n}\n\nexport default BrushModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { ToolboxFeature } from '../featureManager';\nvar ICON_TYPES = ['rect', 'polygon', 'lineX', 'lineY', 'keep', 'clear'];\n\nvar BrushFeature =\n/** @class */\nfunction (_super) {\n  __extends(BrushFeature, _super);\n\n  function BrushFeature() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  BrushFeature.prototype.render = function (featureModel, ecModel, api) {\n    var brushType;\n    var brushMode;\n    var isBrushed;\n    ecModel.eachComponent({\n      mainType: 'brush'\n    }, function (brushModel) {\n      brushType = brushModel.brushType;\n      brushMode = brushModel.brushOption.brushMode || 'single';\n      isBrushed = isBrushed || !!brushModel.areas.length;\n    });\n    this._brushType = brushType;\n    this._brushMode = brushMode;\n    zrUtil.each(featureModel.get('type', true), function (type) {\n      featureModel.setIconStatus(type, (type === 'keep' ? brushMode === 'multiple' : type === 'clear' ? isBrushed : type === brushType) ? 'emphasis' : 'normal');\n    });\n  };\n\n  BrushFeature.prototype.updateView = function (featureModel, ecModel, api) {\n    this.render(featureModel, ecModel, api);\n  };\n\n  BrushFeature.prototype.getIcons = function () {\n    var model = this.model;\n    var availableIcons = model.get('icon', true);\n    var icons = {};\n    zrUtil.each(model.get('type', true), function (type) {\n      if (availableIcons[type]) {\n        icons[type] = availableIcons[type];\n      }\n    });\n    return icons;\n  };\n\n  ;\n\n  BrushFeature.prototype.onclick = function (ecModel, api, type) {\n    var brushType = this._brushType;\n    var brushMode = this._brushMode;\n\n    if (type === 'clear') {\n      // Trigger parallel action firstly\n      api.dispatchAction({\n        type: 'axisAreaSelect',\n        intervals: []\n      });\n      api.dispatchAction({\n        type: 'brush',\n        command: 'clear',\n        // Clear all areas of all brush components.\n        areas: []\n      });\n    } else {\n      api.dispatchAction({\n        type: 'takeGlobalCursor',\n        key: 'brush',\n        brushOption: {\n          brushType: type === 'keep' ? brushType : brushType === type ? false : type,\n          brushMode: type === 'keep' ? brushMode === 'multiple' ? 'single' : 'multiple' : brushMode\n        }\n      });\n    }\n  };\n\n  ;\n\n  BrushFeature.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      type: ICON_TYPES.slice(),\n      icon: {\n        /* eslint-disable */\n        rect: 'M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13',\n        polygon: 'M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2',\n        lineX: 'M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4',\n        lineY: 'M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4',\n        keep: 'M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z',\n        clear: 'M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2' // jshint ignore:line\n\n        /* eslint-enable */\n\n      },\n      // `rect`, `polygon`, `lineX`, `lineY`, `keep`, `clear`\n      title: ecModel.getLocaleModel().get(['toolbox', 'brush', 'title'])\n    };\n    return defaultOption;\n  };\n\n  return BrushFeature;\n}(ToolboxFeature);\n\nexport default BrushFeature;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component';\nimport SeriesData from '../../data/SeriesData';\nimport { each, isObject, clone } from 'zrender/lib/core/util';\nimport { convertOptionIdName, getDataItemValue } from '../../util/model';\n\nvar TimelineModel =\n/** @class */\nfunction (_super) {\n  __extends(TimelineModel, _super);\n\n  function TimelineModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = TimelineModel.type;\n    _this.layoutMode = 'box';\n    return _this;\n  }\n  /**\n   * @override\n   */\n\n\n  TimelineModel.prototype.init = function (option, parentModel, ecModel) {\n    this.mergeDefaultAndTheme(option, ecModel);\n\n    this._initData();\n  };\n  /**\n   * @override\n   */\n\n\n  TimelineModel.prototype.mergeOption = function (option) {\n    _super.prototype.mergeOption.apply(this, arguments);\n\n    this._initData();\n  };\n\n  TimelineModel.prototype.setCurrentIndex = function (currentIndex) {\n    if (currentIndex == null) {\n      currentIndex = this.option.currentIndex;\n    }\n\n    var count = this._data.count();\n\n    if (this.option.loop) {\n      currentIndex = (currentIndex % count + count) % count;\n    } else {\n      currentIndex >= count && (currentIndex = count - 1);\n      currentIndex < 0 && (currentIndex = 0);\n    }\n\n    this.option.currentIndex = currentIndex;\n  };\n  /**\n   * @return {number} currentIndex\n   */\n\n\n  TimelineModel.prototype.getCurrentIndex = function () {\n    return this.option.currentIndex;\n  };\n  /**\n   * @return {boolean}\n   */\n\n\n  TimelineModel.prototype.isIndexMax = function () {\n    return this.getCurrentIndex() >= this._data.count() - 1;\n  };\n  /**\n   * @param {boolean} state true: play, false: stop\n   */\n\n\n  TimelineModel.prototype.setPlayState = function (state) {\n    this.option.autoPlay = !!state;\n  };\n  /**\n   * @return {boolean} true: play, false: stop\n   */\n\n\n  TimelineModel.prototype.getPlayState = function () {\n    return !!this.option.autoPlay;\n  };\n  /**\n   * @private\n   */\n\n\n  TimelineModel.prototype._initData = function () {\n    var thisOption = this.option;\n    var dataArr = thisOption.data || [];\n    var axisType = thisOption.axisType;\n    var names = this._names = [];\n    var processedDataArr;\n\n    if (axisType === 'category') {\n      processedDataArr = [];\n      each(dataArr, function (item, index) {\n        var value = convertOptionIdName(getDataItemValue(item), '');\n        var newItem;\n\n        if (isObject(item)) {\n          newItem = clone(item);\n          newItem.value = index;\n        } else {\n          newItem = index;\n        }\n\n        processedDataArr.push(newItem);\n        names.push(value);\n      });\n    } else {\n      processedDataArr = dataArr;\n    }\n\n    var dimType = {\n      category: 'ordinal',\n      time: 'time',\n      value: 'number'\n    }[axisType] || 'number';\n    var data = this._data = new SeriesData([{\n      name: 'value',\n      type: dimType\n    }], this);\n    data.initData(processedDataArr, names);\n  };\n\n  TimelineModel.prototype.getData = function () {\n    return this._data;\n  };\n  /**\n   * @public\n   * @return {Array.<string>} categoreis\n   */\n\n\n  TimelineModel.prototype.getCategories = function () {\n    if (this.get('axisType') === 'category') {\n      return this._names.slice();\n    }\n  };\n\n  TimelineModel.type = 'timeline';\n  /**\n   * @protected\n   */\n\n  TimelineModel.defaultOption = {\n    zlevel: 0,\n    z: 4,\n    show: true,\n    axisType: 'time',\n    realtime: true,\n    left: '20%',\n    top: null,\n    right: '20%',\n    bottom: 0,\n    width: null,\n    height: 40,\n    padding: 5,\n    controlPosition: 'left',\n    autoPlay: false,\n    rewind: false,\n    loop: true,\n    playInterval: 2000,\n    currentIndex: 0,\n    itemStyle: {},\n    label: {\n      color: '#000'\n    },\n    data: []\n  };\n  return TimelineModel;\n}(ComponentModel);\n\nexport default TimelineModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport TimelineModel from './TimelineModel';\nimport { DataFormatMixin } from '../../model/mixin/dataFormat';\nimport { mixin } from 'zrender/lib/core/util';\nimport { inheritDefaultOption } from '../../util/component';\n\nvar SliderTimelineModel =\n/** @class */\nfunction (_super) {\n  __extends(SliderTimelineModel, _super);\n\n  function SliderTimelineModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SliderTimelineModel.type;\n    return _this;\n  }\n\n  SliderTimelineModel.type = 'timeline.slider';\n  /**\n   * @protected\n   */\n\n  SliderTimelineModel.defaultOption = inheritDefaultOption(TimelineModel.defaultOption, {\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderColor: '#ccc',\n    borderWidth: 0,\n    orient: 'horizontal',\n    inverse: false,\n    tooltip: {\n      trigger: 'item' // data item may also have tootip attr.\n\n    },\n    symbol: 'circle',\n    symbolSize: 12,\n    lineStyle: {\n      show: true,\n      width: 2,\n      color: '#DAE1F5'\n    },\n    label: {\n      position: 'auto',\n      // When using number, label position is not\n      // restricted by viewRect.\n      // positive: right/bottom, negative: left/top\n      show: true,\n      interval: 'auto',\n      rotate: 0,\n      // formatter: null,\n      // TEXTSTYLE\n      color: '#A4B1D7'\n    },\n    itemStyle: {\n      color: '#A4B1D7',\n      borderWidth: 1\n    },\n    checkpointStyle: {\n      symbol: 'circle',\n      symbolSize: 15,\n      color: '#316bf3',\n      borderColor: '#fff',\n      borderWidth: 2,\n      shadowBlur: 2,\n      shadowOffsetX: 1,\n      shadowOffsetY: 1,\n      shadowColor: 'rgba(0, 0, 0, 0.3)',\n      // borderColor: 'rgba(194,53,49, 0.5)',\n      animation: true,\n      animationDuration: 300,\n      animationEasing: 'quinticInOut'\n    },\n    controlStyle: {\n      show: true,\n      showPlayBtn: true,\n      showPrevBtn: true,\n      showNextBtn: true,\n      itemSize: 24,\n      itemGap: 12,\n      position: 'left',\n      playIcon: 'path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z',\n      stopIcon: 'path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z',\n      // eslint-disable-next-line max-len\n      nextIcon: 'M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z',\n      // eslint-disable-next-line max-len\n      prevIcon: 'M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z',\n      prevBtnSize: 18,\n      nextBtnSize: 18,\n      color: '#A4B1D7',\n      borderColor: '#A4B1D7',\n      borderWidth: 1\n    },\n    emphasis: {\n      label: {\n        show: true,\n        // TEXTSTYLE\n        color: '#6f778d'\n      },\n      itemStyle: {\n        color: '#316BF3'\n      },\n      controlStyle: {\n        color: '#316BF3',\n        borderColor: '#316BF3',\n        borderWidth: 2\n      }\n    },\n    progress: {\n      lineStyle: {\n        color: '#316BF3'\n      },\n      itemStyle: {\n        color: '#316BF3'\n      },\n      label: {\n        color: '#6f778d'\n      }\n    },\n    data: []\n  });\n  return SliderTimelineModel;\n}(TimelineModel);\n\nmixin(SliderTimelineModel, DataFormatMixin.prototype);\nexport default SliderTimelineModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentView from '../../view/Component';\n\nvar TimelineView =\n/** @class */\nfunction (_super) {\n  __extends(TimelineView, _super);\n\n  function TimelineView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = TimelineView.type;\n    return _this;\n  }\n\n  TimelineView.type = 'timeline';\n  return TimelineView;\n}(ComponentView);\n\nexport default TimelineView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Axis from '../../coord/Axis';\n/**\n * Extend axis 2d\n */\n\nvar TimelineAxis =\n/** @class */\nfunction (_super) {\n  __extends(TimelineAxis, _super);\n\n  function TimelineAxis(dim, scale, coordExtent, axisType) {\n    var _this = _super.call(this, dim, scale, coordExtent) || this;\n\n    _this.type = axisType || 'value';\n    return _this;\n  }\n  /**\n   * @override\n   */\n\n\n  TimelineAxis.prototype.getLabelModel = function () {\n    // Force override\n    return this.model.getModel('label');\n  };\n  /**\n   * @override\n   */\n\n\n  TimelineAxis.prototype.isHorizontal = function () {\n    return this.model.get('orient') === 'horizontal';\n  };\n\n  return TimelineAxis;\n}(Axis);\n\nexport default TimelineAxis;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport BoundingRect from 'zrender/lib/core/BoundingRect';\nimport * as matrix from 'zrender/lib/core/matrix';\nimport * as graphic from '../../util/graphic';\nimport { createTextStyle } from '../../label/labelStyle';\nimport * as layout from '../../util/layout';\nimport TimelineView from './TimelineView';\nimport TimelineAxis from './TimelineAxis';\nimport { createSymbol, normalizeSymbolOffset, normalizeSymbolSize } from '../../util/symbol';\nimport * as numberUtil from '../../util/number';\nimport { merge, each, extend, isString, bind, defaults, retrieve2 } from 'zrender/lib/core/util';\nimport OrdinalScale from '../../scale/Ordinal';\nimport TimeScale from '../../scale/Time';\nimport IntervalScale from '../../scale/Interval';\nimport { parsePercent } from 'zrender/lib/contain/text';\nimport { makeInner } from '../../util/model';\nimport { getECData } from '../../util/innerStore';\nimport { enableHoverEmphasis } from '../../util/states';\nimport { createTooltipMarkup } from '../tooltip/tooltipMarkup';\nvar PI = Math.PI;\nvar labelDataIndexStore = makeInner();\n\nvar SliderTimelineView =\n/** @class */\nfunction (_super) {\n  __extends(SliderTimelineView, _super);\n\n  function SliderTimelineView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SliderTimelineView.type;\n    return _this;\n  }\n\n  SliderTimelineView.prototype.init = function (ecModel, api) {\n    this.api = api;\n  };\n  /**\n   * @override\n   */\n\n\n  SliderTimelineView.prototype.render = function (timelineModel, ecModel, api) {\n    this.model = timelineModel;\n    this.api = api;\n    this.ecModel = ecModel;\n    this.group.removeAll();\n\n    if (timelineModel.get('show', true)) {\n      var layoutInfo_1 = this._layout(timelineModel, api);\n\n      var mainGroup_1 = this._createGroup('_mainGroup');\n\n      var labelGroup = this._createGroup('_labelGroup');\n\n      var axis_1 = this._axis = this._createAxis(layoutInfo_1, timelineModel);\n\n      timelineModel.formatTooltip = function (dataIndex) {\n        var name = axis_1.scale.getLabel({\n          value: dataIndex\n        });\n        return createTooltipMarkup('nameValue', {\n          noName: true,\n          value: name\n        });\n      };\n\n      each(['AxisLine', 'AxisTick', 'Control', 'CurrentPointer'], function (name) {\n        this['_render' + name](layoutInfo_1, mainGroup_1, axis_1, timelineModel);\n      }, this);\n\n      this._renderAxisLabel(layoutInfo_1, labelGroup, axis_1, timelineModel);\n\n      this._position(layoutInfo_1, timelineModel);\n    }\n\n    this._doPlayStop();\n\n    this._updateTicksStatus();\n  };\n  /**\n   * @override\n   */\n\n\n  SliderTimelineView.prototype.remove = function () {\n    this._clearTimer();\n\n    this.group.removeAll();\n  };\n  /**\n   * @override\n   */\n\n\n  SliderTimelineView.prototype.dispose = function () {\n    this._clearTimer();\n  };\n\n  SliderTimelineView.prototype._layout = function (timelineModel, api) {\n    var labelPosOpt = timelineModel.get(['label', 'position']);\n    var orient = timelineModel.get('orient');\n    var viewRect = getViewRect(timelineModel, api);\n    var parsedLabelPos; // Auto label offset.\n\n    if (labelPosOpt == null || labelPosOpt === 'auto') {\n      parsedLabelPos = orient === 'horizontal' ? viewRect.y + viewRect.height / 2 < api.getHeight() / 2 ? '-' : '+' : viewRect.x + viewRect.width / 2 < api.getWidth() / 2 ? '+' : '-';\n    } else if (isString(labelPosOpt)) {\n      parsedLabelPos = {\n        horizontal: {\n          top: '-',\n          bottom: '+'\n        },\n        vertical: {\n          left: '-',\n          right: '+'\n        }\n      }[orient][labelPosOpt];\n    } else {\n      // is number\n      parsedLabelPos = labelPosOpt;\n    }\n\n    var labelAlignMap = {\n      horizontal: 'center',\n      vertical: parsedLabelPos >= 0 || parsedLabelPos === '+' ? 'left' : 'right'\n    };\n    var labelBaselineMap = {\n      horizontal: parsedLabelPos >= 0 || parsedLabelPos === '+' ? 'top' : 'bottom',\n      vertical: 'middle'\n    };\n    var rotationMap = {\n      horizontal: 0,\n      vertical: PI / 2\n    }; // Position\n\n    var mainLength = orient === 'vertical' ? viewRect.height : viewRect.width;\n    var controlModel = timelineModel.getModel('controlStyle');\n    var showControl = controlModel.get('show', true);\n    var controlSize = showControl ? controlModel.get('itemSize') : 0;\n    var controlGap = showControl ? controlModel.get('itemGap') : 0;\n    var sizePlusGap = controlSize + controlGap; // Special label rotate.\n\n    var labelRotation = timelineModel.get(['label', 'rotate']) || 0;\n    labelRotation = labelRotation * PI / 180; // To radian.\n\n    var playPosition;\n    var prevBtnPosition;\n    var nextBtnPosition;\n    var controlPosition = controlModel.get('position', true);\n    var showPlayBtn = showControl && controlModel.get('showPlayBtn', true);\n    var showPrevBtn = showControl && controlModel.get('showPrevBtn', true);\n    var showNextBtn = showControl && controlModel.get('showNextBtn', true);\n    var xLeft = 0;\n    var xRight = mainLength; // position[0] means left, position[1] means middle.\n\n    if (controlPosition === 'left' || controlPosition === 'bottom') {\n      showPlayBtn && (playPosition = [0, 0], xLeft += sizePlusGap);\n      showPrevBtn && (prevBtnPosition = [xLeft, 0], xLeft += sizePlusGap);\n      showNextBtn && (nextBtnPosition = [xRight - controlSize, 0], xRight -= sizePlusGap);\n    } else {\n      // 'top' 'right'\n      showPlayBtn && (playPosition = [xRight - controlSize, 0], xRight -= sizePlusGap);\n      showPrevBtn && (prevBtnPosition = [0, 0], xLeft += sizePlusGap);\n      showNextBtn && (nextBtnPosition = [xRight - controlSize, 0], xRight -= sizePlusGap);\n    }\n\n    var axisExtent = [xLeft, xRight];\n\n    if (timelineModel.get('inverse')) {\n      axisExtent.reverse();\n    }\n\n    return {\n      viewRect: viewRect,\n      mainLength: mainLength,\n      orient: orient,\n      rotation: rotationMap[orient],\n      labelRotation: labelRotation,\n      labelPosOpt: parsedLabelPos,\n      labelAlign: timelineModel.get(['label', 'align']) || labelAlignMap[orient],\n      labelBaseline: timelineModel.get(['label', 'verticalAlign']) || timelineModel.get(['label', 'baseline']) || labelBaselineMap[orient],\n      // Based on mainGroup.\n      playPosition: playPosition,\n      prevBtnPosition: prevBtnPosition,\n      nextBtnPosition: nextBtnPosition,\n      axisExtent: axisExtent,\n      controlSize: controlSize,\n      controlGap: controlGap\n    };\n  };\n\n  SliderTimelineView.prototype._position = function (layoutInfo, timelineModel) {\n    // Position is be called finally, because bounding rect is needed for\n    // adapt content to fill viewRect (auto adapt offset).\n    // Timeline may be not all in the viewRect when 'offset' is specified\n    // as a number, because it is more appropriate that label aligns at\n    // 'offset' but not the other edge defined by viewRect.\n    var mainGroup = this._mainGroup;\n    var labelGroup = this._labelGroup;\n    var viewRect = layoutInfo.viewRect;\n\n    if (layoutInfo.orient === 'vertical') {\n      // transform to horizontal, inverse rotate by left-top point.\n      var m = matrix.create();\n      var rotateOriginX = viewRect.x;\n      var rotateOriginY = viewRect.y + viewRect.height;\n      matrix.translate(m, m, [-rotateOriginX, -rotateOriginY]);\n      matrix.rotate(m, m, -PI / 2);\n      matrix.translate(m, m, [rotateOriginX, rotateOriginY]);\n      viewRect = viewRect.clone();\n      viewRect.applyTransform(m);\n    }\n\n    var viewBound = getBound(viewRect);\n    var mainBound = getBound(mainGroup.getBoundingRect());\n    var labelBound = getBound(labelGroup.getBoundingRect());\n    var mainPosition = [mainGroup.x, mainGroup.y];\n    var labelsPosition = [labelGroup.x, labelGroup.y];\n    labelsPosition[0] = mainPosition[0] = viewBound[0][0];\n    var labelPosOpt = layoutInfo.labelPosOpt;\n\n    if (labelPosOpt == null || isString(labelPosOpt)) {\n      // '+' or '-'\n      var mainBoundIdx = labelPosOpt === '+' ? 0 : 1;\n      toBound(mainPosition, mainBound, viewBound, 1, mainBoundIdx);\n      toBound(labelsPosition, labelBound, viewBound, 1, 1 - mainBoundIdx);\n    } else {\n      var mainBoundIdx = labelPosOpt >= 0 ? 0 : 1;\n      toBound(mainPosition, mainBound, viewBound, 1, mainBoundIdx);\n      labelsPosition[1] = mainPosition[1] + labelPosOpt;\n    }\n\n    mainGroup.setPosition(mainPosition);\n    labelGroup.setPosition(labelsPosition);\n    mainGroup.rotation = labelGroup.rotation = layoutInfo.rotation;\n    setOrigin(mainGroup);\n    setOrigin(labelGroup);\n\n    function setOrigin(targetGroup) {\n      targetGroup.originX = viewBound[0][0] - targetGroup.x;\n      targetGroup.originY = viewBound[1][0] - targetGroup.y;\n    }\n\n    function getBound(rect) {\n      // [[xmin, xmax], [ymin, ymax]]\n      return [[rect.x, rect.x + rect.width], [rect.y, rect.y + rect.height]];\n    }\n\n    function toBound(fromPos, from, to, dimIdx, boundIdx) {\n      fromPos[dimIdx] += to[dimIdx][boundIdx] - from[dimIdx][boundIdx];\n    }\n  };\n\n  SliderTimelineView.prototype._createAxis = function (layoutInfo, timelineModel) {\n    var data = timelineModel.getData();\n    var axisType = timelineModel.get('axisType');\n    var scale = createScaleByModel(timelineModel, axisType); // Customize scale. The `tickValue` is `dataIndex`.\n\n    scale.getTicks = function () {\n      return data.mapArray(['value'], function (value) {\n        return {\n          value: value\n        };\n      });\n    };\n\n    var dataExtent = data.getDataExtent('value');\n    scale.setExtent(dataExtent[0], dataExtent[1]);\n    scale.niceTicks();\n    var axis = new TimelineAxis('value', scale, layoutInfo.axisExtent, axisType);\n    axis.model = timelineModel;\n    return axis;\n  };\n\n  SliderTimelineView.prototype._createGroup = function (key) {\n    var newGroup = this[key] = new graphic.Group();\n    this.group.add(newGroup);\n    return newGroup;\n  };\n\n  SliderTimelineView.prototype._renderAxisLine = function (layoutInfo, group, axis, timelineModel) {\n    var axisExtent = axis.getExtent();\n\n    if (!timelineModel.get(['lineStyle', 'show'])) {\n      return;\n    }\n\n    var line = new graphic.Line({\n      shape: {\n        x1: axisExtent[0],\n        y1: 0,\n        x2: axisExtent[1],\n        y2: 0\n      },\n      style: extend({\n        lineCap: 'round'\n      }, timelineModel.getModel('lineStyle').getLineStyle()),\n      silent: true,\n      z2: 1\n    });\n    group.add(line);\n    var progressLine = this._progressLine = new graphic.Line({\n      shape: {\n        x1: axisExtent[0],\n        x2: this._currentPointer ? this._currentPointer.x : axisExtent[0],\n        y1: 0,\n        y2: 0\n      },\n      style: defaults({\n        lineCap: 'round',\n        lineWidth: line.style.lineWidth\n      }, timelineModel.getModel(['progress', 'lineStyle']).getLineStyle()),\n      silent: true,\n      z2: 1\n    });\n    group.add(progressLine);\n  };\n\n  SliderTimelineView.prototype._renderAxisTick = function (layoutInfo, group, axis, timelineModel) {\n    var _this = this;\n\n    var data = timelineModel.getData(); // Show all ticks, despite ignoring strategy.\n\n    var ticks = axis.scale.getTicks();\n    this._tickSymbols = []; // The value is dataIndex, see the costomized scale.\n\n    each(ticks, function (tick) {\n      var tickCoord = axis.dataToCoord(tick.value);\n      var itemModel = data.getItemModel(tick.value);\n      var itemStyleModel = itemModel.getModel('itemStyle');\n      var hoverStyleModel = itemModel.getModel(['emphasis', 'itemStyle']);\n      var progressStyleModel = itemModel.getModel(['progress', 'itemStyle']);\n      var symbolOpt = {\n        x: tickCoord,\n        y: 0,\n        onclick: bind(_this._changeTimeline, _this, tick.value)\n      };\n      var el = giveSymbol(itemModel, itemStyleModel, group, symbolOpt);\n      el.ensureState('emphasis').style = hoverStyleModel.getItemStyle();\n      el.ensureState('progress').style = progressStyleModel.getItemStyle();\n      enableHoverEmphasis(el);\n      var ecData = getECData(el);\n\n      if (itemModel.get('tooltip')) {\n        ecData.dataIndex = tick.value;\n        ecData.dataModel = timelineModel;\n      } else {\n        ecData.dataIndex = ecData.dataModel = null;\n      }\n\n      _this._tickSymbols.push(el);\n    });\n  };\n\n  SliderTimelineView.prototype._renderAxisLabel = function (layoutInfo, group, axis, timelineModel) {\n    var _this = this;\n\n    var labelModel = axis.getLabelModel();\n\n    if (!labelModel.get('show')) {\n      return;\n    }\n\n    var data = timelineModel.getData();\n    var labels = axis.getViewLabels();\n    this._tickLabels = [];\n    each(labels, function (labelItem) {\n      // The tickValue is dataIndex, see the costomized scale.\n      var dataIndex = labelItem.tickValue;\n      var itemModel = data.getItemModel(dataIndex);\n      var normalLabelModel = itemModel.getModel('label');\n      var hoverLabelModel = itemModel.getModel(['emphasis', 'label']);\n      var progressLabelModel = itemModel.getModel(['progress', 'label']);\n      var tickCoord = axis.dataToCoord(labelItem.tickValue);\n      var textEl = new graphic.Text({\n        x: tickCoord,\n        y: 0,\n        rotation: layoutInfo.labelRotation - layoutInfo.rotation,\n        onclick: bind(_this._changeTimeline, _this, dataIndex),\n        silent: false,\n        style: createTextStyle(normalLabelModel, {\n          text: labelItem.formattedLabel,\n          align: layoutInfo.labelAlign,\n          verticalAlign: layoutInfo.labelBaseline\n        })\n      });\n      textEl.ensureState('emphasis').style = createTextStyle(hoverLabelModel);\n      textEl.ensureState('progress').style = createTextStyle(progressLabelModel);\n      group.add(textEl);\n      enableHoverEmphasis(textEl);\n      labelDataIndexStore(textEl).dataIndex = dataIndex;\n\n      _this._tickLabels.push(textEl);\n    });\n  };\n\n  SliderTimelineView.prototype._renderControl = function (layoutInfo, group, axis, timelineModel) {\n    var controlSize = layoutInfo.controlSize;\n    var rotation = layoutInfo.rotation;\n    var itemStyle = timelineModel.getModel('controlStyle').getItemStyle();\n    var hoverStyle = timelineModel.getModel(['emphasis', 'controlStyle']).getItemStyle();\n    var playState = timelineModel.getPlayState();\n    var inverse = timelineModel.get('inverse', true);\n    makeBtn(layoutInfo.nextBtnPosition, 'next', bind(this._changeTimeline, this, inverse ? '-' : '+'));\n    makeBtn(layoutInfo.prevBtnPosition, 'prev', bind(this._changeTimeline, this, inverse ? '+' : '-'));\n    makeBtn(layoutInfo.playPosition, playState ? 'stop' : 'play', bind(this._handlePlayClick, this, !playState), true);\n\n    function makeBtn(position, iconName, onclick, willRotate) {\n      if (!position) {\n        return;\n      }\n\n      var iconSize = parsePercent(retrieve2(timelineModel.get(['controlStyle', iconName + 'BtnSize']), controlSize), controlSize);\n      var rect = [0, -iconSize / 2, iconSize, iconSize];\n      var btn = makeControlIcon(timelineModel, iconName + 'Icon', rect, {\n        x: position[0],\n        y: position[1],\n        originX: controlSize / 2,\n        originY: 0,\n        rotation: willRotate ? -rotation : 0,\n        rectHover: true,\n        style: itemStyle,\n        onclick: onclick\n      });\n      btn.ensureState('emphasis').style = hoverStyle;\n      group.add(btn);\n      enableHoverEmphasis(btn);\n    }\n  };\n\n  SliderTimelineView.prototype._renderCurrentPointer = function (layoutInfo, group, axis, timelineModel) {\n    var data = timelineModel.getData();\n    var currentIndex = timelineModel.getCurrentIndex();\n    var pointerModel = data.getItemModel(currentIndex).getModel('checkpointStyle');\n    var me = this;\n    var callback = {\n      onCreate: function onCreate(pointer) {\n        pointer.draggable = true;\n        pointer.drift = bind(me._handlePointerDrag, me);\n        pointer.ondragend = bind(me._handlePointerDragend, me);\n        pointerMoveTo(pointer, me._progressLine, currentIndex, axis, timelineModel, true);\n      },\n      onUpdate: function onUpdate(pointer) {\n        pointerMoveTo(pointer, me._progressLine, currentIndex, axis, timelineModel);\n      }\n    }; // Reuse when exists, for animation and drag.\n\n    this._currentPointer = giveSymbol(pointerModel, pointerModel, this._mainGroup, {}, this._currentPointer, callback);\n  };\n\n  SliderTimelineView.prototype._handlePlayClick = function (nextState) {\n    this._clearTimer();\n\n    this.api.dispatchAction({\n      type: 'timelinePlayChange',\n      playState: nextState,\n      from: this.uid\n    });\n  };\n\n  SliderTimelineView.prototype._handlePointerDrag = function (dx, dy, e) {\n    this._clearTimer();\n\n    this._pointerChangeTimeline([e.offsetX, e.offsetY]);\n  };\n\n  SliderTimelineView.prototype._handlePointerDragend = function (e) {\n    this._pointerChangeTimeline([e.offsetX, e.offsetY], true);\n  };\n\n  SliderTimelineView.prototype._pointerChangeTimeline = function (mousePos, trigger) {\n    var toCoord = this._toAxisCoord(mousePos)[0];\n\n    var axis = this._axis;\n    var axisExtent = numberUtil.asc(axis.getExtent().slice());\n    toCoord > axisExtent[1] && (toCoord = axisExtent[1]);\n    toCoord < axisExtent[0] && (toCoord = axisExtent[0]);\n    this._currentPointer.x = toCoord;\n\n    this._currentPointer.markRedraw();\n\n    this._progressLine.shape.x2 = toCoord;\n\n    this._progressLine.dirty();\n\n    var targetDataIndex = this._findNearestTick(toCoord);\n\n    var timelineModel = this.model;\n\n    if (trigger || targetDataIndex !== timelineModel.getCurrentIndex() && timelineModel.get('realtime')) {\n      this._changeTimeline(targetDataIndex);\n    }\n  };\n\n  SliderTimelineView.prototype._doPlayStop = function () {\n    var _this = this;\n\n    this._clearTimer();\n\n    if (this.model.getPlayState()) {\n      this._timer = setTimeout(function () {\n        // Do not cache\n        var timelineModel = _this.model;\n\n        _this._changeTimeline(timelineModel.getCurrentIndex() + (timelineModel.get('rewind', true) ? -1 : 1));\n      }, this.model.get('playInterval'));\n    }\n  };\n\n  SliderTimelineView.prototype._toAxisCoord = function (vertex) {\n    var trans = this._mainGroup.getLocalTransform();\n\n    return graphic.applyTransform(vertex, trans, true);\n  };\n\n  SliderTimelineView.prototype._findNearestTick = function (axisCoord) {\n    var data = this.model.getData();\n    var dist = Infinity;\n    var targetDataIndex;\n    var axis = this._axis;\n    data.each(['value'], function (value, dataIndex) {\n      var coord = axis.dataToCoord(value);\n      var d = Math.abs(coord - axisCoord);\n\n      if (d < dist) {\n        dist = d;\n        targetDataIndex = dataIndex;\n      }\n    });\n    return targetDataIndex;\n  };\n\n  SliderTimelineView.prototype._clearTimer = function () {\n    if (this._timer) {\n      clearTimeout(this._timer);\n      this._timer = null;\n    }\n  };\n\n  SliderTimelineView.prototype._changeTimeline = function (nextIndex) {\n    var currentIndex = this.model.getCurrentIndex();\n\n    if (nextIndex === '+') {\n      nextIndex = currentIndex + 1;\n    } else if (nextIndex === '-') {\n      nextIndex = currentIndex - 1;\n    }\n\n    this.api.dispatchAction({\n      type: 'timelineChange',\n      currentIndex: nextIndex,\n      from: this.uid\n    });\n  };\n\n  SliderTimelineView.prototype._updateTicksStatus = function () {\n    var currentIndex = this.model.getCurrentIndex();\n    var tickSymbols = this._tickSymbols;\n    var tickLabels = this._tickLabels;\n\n    if (tickSymbols) {\n      for (var i = 0; i < tickSymbols.length; i++) {\n        tickSymbols && tickSymbols[i] && tickSymbols[i].toggleState('progress', i < currentIndex);\n      }\n    }\n\n    if (tickLabels) {\n      for (var i = 0; i < tickLabels.length; i++) {\n        tickLabels && tickLabels[i] && tickLabels[i].toggleState('progress', labelDataIndexStore(tickLabels[i]).dataIndex <= currentIndex);\n      }\n    }\n  };\n\n  SliderTimelineView.type = 'timeline.slider';\n  return SliderTimelineView;\n}(TimelineView);\n\nfunction createScaleByModel(model, axisType) {\n  axisType = axisType || model.get('type');\n\n  if (axisType) {\n    switch (axisType) {\n      // Buildin scale\n      case 'category':\n        return new OrdinalScale({\n          ordinalMeta: model.getCategories(),\n          extent: [Infinity, -Infinity]\n        });\n\n      case 'time':\n        return new TimeScale({\n          locale: model.ecModel.getLocaleModel(),\n          useUTC: model.ecModel.get('useUTC')\n        });\n\n      default:\n        // default to be value\n        return new IntervalScale();\n    }\n  }\n}\n\nfunction getViewRect(model, api) {\n  return layout.getLayoutRect(model.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  }, model.get('padding'));\n}\n\nfunction makeControlIcon(timelineModel, objPath, rect, opts) {\n  var style = opts.style;\n  var icon = graphic.createIcon(timelineModel.get(['controlStyle', objPath]), opts || {}, new BoundingRect(rect[0], rect[1], rect[2], rect[3])); // TODO createIcon won't use style in opt.\n\n  if (style) {\n    icon.setStyle(style);\n  }\n\n  return icon;\n}\n/**\n * Create symbol or update symbol\n * opt: basic position and event handlers\n */\n\n\nfunction giveSymbol(hostModel, itemStyleModel, group, opt, symbol, callback) {\n  var color = itemStyleModel.get('color');\n\n  if (!symbol) {\n    var symbolType = hostModel.get('symbol');\n    symbol = createSymbol(symbolType, -1, -1, 2, 2, color);\n    symbol.setStyle('strokeNoScale', true);\n    group.add(symbol);\n    callback && callback.onCreate(symbol);\n  } else {\n    symbol.setColor(color);\n    group.add(symbol); // Group may be new, also need to add.\n\n    callback && callback.onUpdate(symbol);\n  } // Style\n\n\n  var itemStyle = itemStyleModel.getItemStyle(['color']);\n  symbol.setStyle(itemStyle); // Transform and events.\n\n  opt = merge({\n    rectHover: true,\n    z2: 100\n  }, opt, true);\n  var symbolSize = normalizeSymbolSize(hostModel.get('symbolSize'));\n  opt.scaleX = symbolSize[0] / 2;\n  opt.scaleY = symbolSize[1] / 2;\n  var symbolOffset = normalizeSymbolOffset(hostModel.get('symbolOffset'), symbolSize);\n\n  if (symbolOffset) {\n    opt.x = (opt.x || 0) + symbolOffset[0];\n    opt.y = (opt.y || 0) + symbolOffset[1];\n  }\n\n  var symbolRotate = hostModel.get('symbolRotate');\n  opt.rotation = (symbolRotate || 0) * Math.PI / 180 || 0;\n  symbol.attr(opt); // FIXME\n  // (1) When symbol.style.strokeNoScale is true and updateTransform is not performed,\n  // getBoundingRect will return wrong result.\n  // (This is supposed to be resolved in zrender, but it is a little difficult to\n  // leverage performance and auto updateTransform)\n  // (2) All of ancesters of symbol do not scale, so we can just updateTransform symbol.\n\n  symbol.updateTransform();\n  return symbol;\n}\n\nfunction pointerMoveTo(pointer, progressLine, dataIndex, axis, timelineModel, noAnimation) {\n  if (pointer.dragging) {\n    return;\n  }\n\n  var pointerModel = timelineModel.getModel('checkpointStyle');\n  var toCoord = axis.dataToCoord(timelineModel.getData().get('value', dataIndex));\n\n  if (noAnimation || !pointerModel.get('animation', true)) {\n    pointer.attr({\n      x: toCoord,\n      y: 0\n    });\n    progressLine && progressLine.attr({\n      shape: {\n        x2: toCoord\n      }\n    });\n  } else {\n    var animationCfg = {\n      duration: pointerModel.get('animationDuration', true),\n      easing: pointerModel.get('animationEasing', true)\n    };\n    pointer.stopAnimation(null, true);\n    pointer.animateTo({\n      x: toCoord,\n      y: 0\n    }, animationCfg);\n    progressLine && progressLine.animateTo({\n      shape: {\n        x2: toCoord\n      }\n    }, animationCfg);\n  }\n}\n\nexport default SliderTimelineView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// @ts-nocheck\nimport * as zrUtil from 'zrender/lib/core/util';\nexport default function timelinePreprocessor(option) {\n  var timelineOpt = option && option.timeline;\n\n  if (!zrUtil.isArray(timelineOpt)) {\n    timelineOpt = timelineOpt ? [timelineOpt] : [];\n  }\n\n  zrUtil.each(timelineOpt, function (opt) {\n    if (!opt) {\n      return;\n    }\n\n    compatibleEC2(opt);\n  });\n}\n\nfunction compatibleEC2(opt) {\n  var type = opt.type;\n  var ec2Types = {\n    'number': 'value',\n    'time': 'time'\n  }; // Compatible with ec2\n\n  if (ec2Types[type]) {\n    opt.axisType = ec2Types[type];\n    delete opt.type;\n  }\n\n  transferItem(opt);\n\n  if (has(opt, 'controlPosition')) {\n    var controlStyle = opt.controlStyle || (opt.controlStyle = {});\n\n    if (!has(controlStyle, 'position')) {\n      controlStyle.position = opt.controlPosition;\n    }\n\n    if (controlStyle.position === 'none' && !has(controlStyle, 'show')) {\n      controlStyle.show = false;\n      delete controlStyle.position;\n    }\n\n    delete opt.controlPosition;\n  }\n\n  zrUtil.each(opt.data || [], function (dataItem) {\n    if (zrUtil.isObject(dataItem) && !zrUtil.isArray(dataItem)) {\n      if (!has(dataItem, 'value') && has(dataItem, 'name')) {\n        // In ec2, using name as value.\n        dataItem.value = dataItem.name;\n      }\n\n      transferItem(dataItem);\n    }\n  });\n}\n\nfunction transferItem(opt) {\n  var itemStyle = opt.itemStyle || (opt.itemStyle = {});\n  var itemStyleEmphasis = itemStyle.emphasis || (itemStyle.emphasis = {}); // Transfer label out\n\n  var label = opt.label || opt.label || {};\n  var labelNormal = label.normal || (label.normal = {});\n  var excludeLabelAttr = {\n    normal: 1,\n    emphasis: 1\n  };\n  zrUtil.each(label, function (value, name) {\n    if (!excludeLabelAttr[name] && !has(labelNormal, name)) {\n      labelNormal[name] = value;\n    }\n  });\n\n  if (itemStyleEmphasis.label && !has(label, 'emphasis')) {\n    label.emphasis = itemStyleEmphasis.label;\n    delete itemStyleEmphasis.label;\n  }\n}\n\nfunction has(obj, attr) {\n  return obj.hasOwnProperty(attr);\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isArray } from 'zrender/lib/core/util';\nexport default function checkMarkerInSeries(seriesOpts, markerType) {\n  if (!seriesOpts) {\n    return false;\n  }\n\n  var seriesOptArr = isArray(seriesOpts) ? seriesOpts : [seriesOpts];\n\n  for (var idx = 0; idx < seriesOptArr.length; idx++) {\n    if (seriesOptArr[idx] && seriesOptArr[idx][markerType]) {\n      return true;\n    }\n  }\n\n  return false;\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport env from 'zrender/lib/core/env';\nimport { DataFormatMixin } from '../../model/mixin/dataFormat';\nimport ComponentModel from '../../model/Component';\nimport { makeInner, defaultEmphasis } from '../../util/model';\nimport { createTooltipMarkup } from '../tooltip/tooltipMarkup';\n\nfunction fillLabel(opt) {\n  defaultEmphasis(opt, 'label', ['show']);\n} // { [componentType]: MarkerModel }\n\n\nvar inner = makeInner();\n\nvar MarkerModel =\n/** @class */\nfunction (_super) {\n  __extends(MarkerModel, _super);\n\n  function MarkerModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = MarkerModel.type;\n    /**\n     * If marker model is created by self from series\n     */\n\n    _this.createdBySelf = false;\n    return _this;\n  }\n  /**\n   * @overrite\n   */\n\n\n  MarkerModel.prototype.init = function (option, parentModel, ecModel) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (this.type === 'marker') {\n        throw new Error('Marker component is abstract component. Use markLine, markPoint, markArea instead.');\n      }\n    }\n\n    this.mergeDefaultAndTheme(option, ecModel);\n\n    this._mergeOption(option, ecModel, false, true);\n  };\n\n  MarkerModel.prototype.isAnimationEnabled = function () {\n    if (env.node) {\n      return false;\n    }\n\n    var hostSeries = this.__hostSeries;\n    return this.getShallow('animation') && hostSeries && hostSeries.isAnimationEnabled();\n  };\n  /**\n   * @overrite\n   */\n\n\n  MarkerModel.prototype.mergeOption = function (newOpt, ecModel) {\n    this._mergeOption(newOpt, ecModel, false, false);\n  };\n\n  MarkerModel.prototype._mergeOption = function (newOpt, ecModel, createdBySelf, isInit) {\n    var componentType = this.mainType;\n\n    if (!createdBySelf) {\n      ecModel.eachSeries(function (seriesModel) {\n        // mainType can be markPoint, markLine, markArea\n        var markerOpt = seriesModel.get(this.mainType, true);\n        var markerModel = inner(seriesModel)[componentType];\n\n        if (!markerOpt || !markerOpt.data) {\n          inner(seriesModel)[componentType] = null;\n          return;\n        }\n\n        if (!markerModel) {\n          if (isInit) {\n            // Default label emphasis `position` and `show`\n            fillLabel(markerOpt);\n          }\n\n          zrUtil.each(markerOpt.data, function (item) {\n            // FIXME Overwrite fillLabel method ?\n            if (item instanceof Array) {\n              fillLabel(item[0]);\n              fillLabel(item[1]);\n            } else {\n              fillLabel(item);\n            }\n          });\n          markerModel = this.createMarkerModelFromSeries(markerOpt, this, ecModel); // markerModel = new ImplementedMarkerModel(\n          //     markerOpt, this, ecModel\n          // );\n\n          zrUtil.extend(markerModel, {\n            mainType: this.mainType,\n            // Use the same series index and name\n            seriesIndex: seriesModel.seriesIndex,\n            name: seriesModel.name,\n            createdBySelf: true\n          });\n          markerModel.__hostSeries = seriesModel;\n        } else {\n          markerModel._mergeOption(markerOpt, ecModel, true);\n        }\n\n        inner(seriesModel)[componentType] = markerModel;\n      }, this);\n    }\n  };\n\n  MarkerModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    var data = this.getData();\n    var value = this.getRawValue(dataIndex);\n    var itemName = data.getName(dataIndex);\n    return createTooltipMarkup('section', {\n      header: this.name,\n      blocks: [createTooltipMarkup('nameValue', {\n        name: itemName,\n        value: value,\n        noName: !itemName,\n        noValue: value == null\n      })]\n    });\n  };\n\n  MarkerModel.prototype.getData = function () {\n    return this._data;\n  };\n\n  MarkerModel.prototype.setData = function (data) {\n    this._data = data;\n  };\n\n  MarkerModel.getMarkerModelFromSeries = function (seriesModel, // Support three types of markers. Strict check.\n  componentType) {\n    return inner(seriesModel)[componentType];\n  };\n\n  MarkerModel.type = 'marker';\n  MarkerModel.dependencies = ['series', 'grid', 'polar', 'geo'];\n  return MarkerModel;\n}(ComponentModel);\n\nzrUtil.mixin(MarkerModel, DataFormatMixin.prototype);\nexport default MarkerModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport MarkerModel from './MarkerModel';\n\nvar MarkPointModel =\n/** @class */\nfunction (_super) {\n  __extends(MarkPointModel, _super);\n\n  function MarkPointModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = MarkPointModel.type;\n    return _this;\n  }\n\n  MarkPointModel.prototype.createMarkerModelFromSeries = function (markerOpt, masterMarkerModel, ecModel) {\n    return new MarkPointModel(markerOpt, masterMarkerModel, ecModel);\n  };\n\n  MarkPointModel.type = 'markPoint';\n  MarkPointModel.defaultOption = {\n    zlevel: 0,\n    z: 5,\n    symbol: 'pin',\n    symbolSize: 50,\n    //symbolRotate: 0,\n    //symbolOffset: [0, 0]\n    tooltip: {\n      trigger: 'item'\n    },\n    label: {\n      show: true,\n      position: 'inside'\n    },\n    itemStyle: {\n      borderWidth: 2\n    },\n    emphasis: {\n      label: {\n        show: true\n      }\n    }\n  };\n  return MarkPointModel;\n}(MarkerModel);\n\nexport default MarkPointModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as numberUtil from '../../util/number';\nimport { isDimensionStacked } from '../../data/helper/dataStackHelper';\nimport { indexOf, curry, clone, isArray } from 'zrender/lib/core/util';\nimport { parseDataValue } from '../../data/helper/dataValueHelper';\n\nfunction hasXOrY(item) {\n  return !(isNaN(parseFloat(item.x)) && isNaN(parseFloat(item.y)));\n}\n\nfunction hasXAndY(item) {\n  return !isNaN(parseFloat(item.x)) && !isNaN(parseFloat(item.y));\n}\n\nfunction markerTypeCalculatorWithExtent(markerType, data, otherDataDim, targetDataDim, otherCoordIndex, targetCoordIndex) {\n  var coordArr = [];\n  var stacked = isDimensionStacked(data, targetDataDim\n  /*, otherDataDim*/\n  );\n  var calcDataDim = stacked ? data.getCalculationInfo('stackResultDimension') : targetDataDim;\n  var value = numCalculate(data, calcDataDim, markerType);\n  var dataIndex = data.indicesOfNearest(calcDataDim, value)[0];\n  coordArr[otherCoordIndex] = data.get(otherDataDim, dataIndex);\n  coordArr[targetCoordIndex] = data.get(calcDataDim, dataIndex);\n  var coordArrValue = data.get(targetDataDim, dataIndex); // Make it simple, do not visit all stacked value to count precision.\n\n  var precision = numberUtil.getPrecision(data.get(targetDataDim, dataIndex));\n  precision = Math.min(precision, 20);\n\n  if (precision >= 0) {\n    coordArr[targetCoordIndex] = +coordArr[targetCoordIndex].toFixed(precision);\n  }\n\n  return [coordArr, coordArrValue];\n} // TODO Specified percent\n\n\nvar markerTypeCalculator = {\n  min: curry(markerTypeCalculatorWithExtent, 'min'),\n  max: curry(markerTypeCalculatorWithExtent, 'max'),\n  average: curry(markerTypeCalculatorWithExtent, 'average'),\n  median: curry(markerTypeCalculatorWithExtent, 'median')\n};\n/**\n * Transform markPoint data item to format used in List by do the following\n * 1. Calculate statistic like `max`, `min`, `average`\n * 2. Convert `item.xAxis`, `item.yAxis` to `item.coord` array\n */\n\nexport function dataTransform(seriesModel, item) {\n  var data = seriesModel.getData();\n  var coordSys = seriesModel.coordinateSystem; // 1. If not specify the position with pixel directly\n  // 2. If `coord` is not a data array. Which uses `xAxis`,\n  // `yAxis` to specify the coord on each dimension\n  // parseFloat first because item.x and item.y can be percent string like '20%'\n\n  if (item && !hasXAndY(item) && !isArray(item.coord) && coordSys) {\n    var dims = coordSys.dimensions;\n    var axisInfo = getAxisInfo(item, data, coordSys, seriesModel); // Clone the option\n    // Transform the properties xAxis, yAxis, radiusAxis, angleAxis, geoCoord to value\n\n    item = clone(item);\n\n    if (item.type && markerTypeCalculator[item.type] && axisInfo.baseAxis && axisInfo.valueAxis) {\n      var otherCoordIndex = indexOf(dims, axisInfo.baseAxis.dim);\n      var targetCoordIndex = indexOf(dims, axisInfo.valueAxis.dim);\n      var coordInfo = markerTypeCalculator[item.type](data, axisInfo.baseDataDim, axisInfo.valueDataDim, otherCoordIndex, targetCoordIndex);\n      item.coord = coordInfo[0]; // Force to use the value of calculated value.\n      // let item use the value without stack.\n\n      item.value = coordInfo[1];\n    } else {\n      // FIXME Only has one of xAxis and yAxis.\n      var coord = [item.xAxis != null ? item.xAxis : item.radiusAxis, item.yAxis != null ? item.yAxis : item.angleAxis]; // Each coord support max, min, average\n\n      for (var i = 0; i < 2; i++) {\n        if (markerTypeCalculator[coord[i]]) {\n          coord[i] = numCalculate(data, data.mapDimension(dims[i]), coord[i]);\n        }\n      }\n\n      item.coord = coord;\n    }\n  }\n\n  return item;\n}\nexport function getAxisInfo(item, data, coordSys, seriesModel) {\n  var ret = {};\n\n  if (item.valueIndex != null || item.valueDim != null) {\n    ret.valueDataDim = item.valueIndex != null ? data.getDimension(item.valueIndex) : item.valueDim;\n    ret.valueAxis = coordSys.getAxis(dataDimToCoordDim(seriesModel, ret.valueDataDim));\n    ret.baseAxis = coordSys.getOtherAxis(ret.valueAxis);\n    ret.baseDataDim = data.mapDimension(ret.baseAxis.dim);\n  } else {\n    ret.baseAxis = seriesModel.getBaseAxis();\n    ret.valueAxis = coordSys.getOtherAxis(ret.baseAxis);\n    ret.baseDataDim = data.mapDimension(ret.baseAxis.dim);\n    ret.valueDataDim = data.mapDimension(ret.valueAxis.dim);\n  }\n\n  return ret;\n}\n\nfunction dataDimToCoordDim(seriesModel, dataDim) {\n  var dimItem = seriesModel.getData().getDimensionInfo(dataDim);\n  return dimItem && dimItem.coordDim;\n}\n/**\n * Filter data which is out of coordinateSystem range\n * [dataFilter description]\n */\n\n\nexport function dataFilter( // Currently only polar and cartesian has containData.\ncoordSys, item) {\n  // Alwalys return true if there is no coordSys\n  return coordSys && coordSys.containData && item.coord && !hasXOrY(item) ? coordSys.containData(item.coord) : true;\n}\nexport function createMarkerDimValueGetter(inCoordSys, dims) {\n  return inCoordSys ? function (item, dimName, dataIndex, dimIndex) {\n    var rawVal = dimIndex < 2 // x, y, radius, angle\n    ? item.coord && item.coord[dimIndex] : item.value;\n    return parseDataValue(rawVal, dims[dimIndex]);\n  } : function (item, dimName, dataIndex, dimIndex) {\n    return parseDataValue(item.value, dims[dimIndex]);\n  };\n}\nexport function numCalculate(data, valueDataDim, type) {\n  if (type === 'average') {\n    var sum_1 = 0;\n    var count_1 = 0;\n    data.each(valueDataDim, function (val, idx) {\n      if (!isNaN(val)) {\n        sum_1 += val;\n        count_1++;\n      }\n    });\n    return sum_1 / count_1;\n  } else if (type === 'median') {\n    return data.getMedian(valueDataDim);\n  } else {\n    // max & min\n    return data.getDataExtent(valueDataDim)[type === 'max' ? 1 : 0];\n  }\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentView from '../../view/Component';\nimport { createHashMap, each } from 'zrender/lib/core/util';\nimport MarkerModel from './MarkerModel';\nimport { makeInner } from '../../util/model';\nimport { enterBlur } from '../../util/states';\nvar inner = makeInner();\n\nvar MarkerView =\n/** @class */\nfunction (_super) {\n  __extends(MarkerView, _super);\n\n  function MarkerView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = MarkerView.type;\n    return _this;\n  }\n\n  MarkerView.prototype.init = function () {\n    this.markerGroupMap = createHashMap();\n  };\n\n  MarkerView.prototype.render = function (markerModel, ecModel, api) {\n    var _this = this;\n\n    var markerGroupMap = this.markerGroupMap;\n    markerGroupMap.each(function (item) {\n      inner(item).keep = false;\n    });\n    ecModel.eachSeries(function (seriesModel) {\n      var markerModel = MarkerModel.getMarkerModelFromSeries(seriesModel, _this.type);\n      markerModel && _this.renderSeries(seriesModel, markerModel, ecModel, api);\n    });\n    markerGroupMap.each(function (item) {\n      !inner(item).keep && _this.group.remove(item.group);\n    });\n  };\n\n  MarkerView.prototype.markKeep = function (drawGroup) {\n    inner(drawGroup).keep = true;\n  };\n\n  MarkerView.prototype.blurSeries = function (seriesModelList) {\n    var _this = this;\n\n    each(seriesModelList, function (seriesModel) {\n      var markerModel = MarkerModel.getMarkerModelFromSeries(seriesModel, _this.type);\n\n      if (markerModel) {\n        var data = markerModel.getData();\n        data.eachItemGraphicEl(function (el) {\n          if (el) {\n            enterBlur(el);\n          }\n        });\n      }\n    });\n  };\n\n  MarkerView.type = 'marker';\n  return MarkerView;\n}(ComponentView);\n\nexport default MarkerView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SymbolDraw from '../../chart/helper/SymbolDraw';\nimport * as numberUtil from '../../util/number';\nimport SeriesData from '../../data/SeriesData';\nimport * as markerHelper from './markerHelper';\nimport MarkerView from './MarkerView';\nimport MarkerModel from './MarkerModel';\nimport { isFunction, map, filter, curry, extend } from 'zrender/lib/core/util';\nimport { getECData } from '../../util/innerStore';\nimport { getVisualFromData } from '../../visual/helper';\n\nfunction updateMarkerLayout(mpData, seriesModel, api) {\n  var coordSys = seriesModel.coordinateSystem;\n  mpData.each(function (idx) {\n    var itemModel = mpData.getItemModel(idx);\n    var point;\n    var xPx = numberUtil.parsePercent(itemModel.get('x'), api.getWidth());\n    var yPx = numberUtil.parsePercent(itemModel.get('y'), api.getHeight());\n\n    if (!isNaN(xPx) && !isNaN(yPx)) {\n      point = [xPx, yPx];\n    } // Chart like bar may have there own marker positioning logic\n    else if (seriesModel.getMarkerPosition) {\n      // Use the getMarkerPoisition\n      point = seriesModel.getMarkerPosition(mpData.getValues(mpData.dimensions, idx));\n    } else if (coordSys) {\n      var x = mpData.get(coordSys.dimensions[0], idx);\n      var y = mpData.get(coordSys.dimensions[1], idx);\n      point = coordSys.dataToPoint([x, y]);\n    } // Use x, y if has any\n\n\n    if (!isNaN(xPx)) {\n      point[0] = xPx;\n    }\n\n    if (!isNaN(yPx)) {\n      point[1] = yPx;\n    }\n\n    mpData.setItemLayout(idx, point);\n  });\n}\n\nvar MarkPointView =\n/** @class */\nfunction (_super) {\n  __extends(MarkPointView, _super);\n\n  function MarkPointView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = MarkPointView.type;\n    return _this;\n  }\n\n  MarkPointView.prototype.updateTransform = function (markPointModel, ecModel, api) {\n    ecModel.eachSeries(function (seriesModel) {\n      var mpModel = MarkerModel.getMarkerModelFromSeries(seriesModel, 'markPoint');\n\n      if (mpModel) {\n        updateMarkerLayout(mpModel.getData(), seriesModel, api);\n        this.markerGroupMap.get(seriesModel.id).updateLayout();\n      }\n    }, this);\n  };\n\n  MarkPointView.prototype.renderSeries = function (seriesModel, mpModel, ecModel, api) {\n    var coordSys = seriesModel.coordinateSystem;\n    var seriesId = seriesModel.id;\n    var seriesData = seriesModel.getData();\n    var symbolDrawMap = this.markerGroupMap;\n    var symbolDraw = symbolDrawMap.get(seriesId) || symbolDrawMap.set(seriesId, new SymbolDraw());\n    var mpData = createData(coordSys, seriesModel, mpModel); // FIXME\n\n    mpModel.setData(mpData);\n    updateMarkerLayout(mpModel.getData(), seriesModel, api);\n    mpData.each(function (idx) {\n      var itemModel = mpData.getItemModel(idx);\n      var symbol = itemModel.getShallow('symbol');\n      var symbolSize = itemModel.getShallow('symbolSize');\n      var symbolRotate = itemModel.getShallow('symbolRotate');\n      var symbolOffset = itemModel.getShallow('symbolOffset');\n      var symbolKeepAspect = itemModel.getShallow('symbolKeepAspect'); // TODO: refactor needed: single data item should not support callback function\n\n      if (isFunction(symbol) || isFunction(symbolSize) || isFunction(symbolRotate) || isFunction(symbolOffset)) {\n        var rawIdx = mpModel.getRawValue(idx);\n        var dataParams = mpModel.getDataParams(idx);\n\n        if (isFunction(symbol)) {\n          symbol = symbol(rawIdx, dataParams);\n        }\n\n        if (isFunction(symbolSize)) {\n          // FIXME  ECharts 2.x2.x \n          symbolSize = symbolSize(rawIdx, dataParams);\n        }\n\n        if (isFunction(symbolRotate)) {\n          symbolRotate = symbolRotate(rawIdx, dataParams);\n        }\n\n        if (isFunction(symbolOffset)) {\n          symbolOffset = symbolOffset(rawIdx, dataParams);\n        }\n      }\n\n      var style = itemModel.getModel('itemStyle').getItemStyle();\n      var color = getVisualFromData(seriesData, 'color');\n\n      if (!style.fill) {\n        style.fill = color;\n      }\n\n      mpData.setItemVisual(idx, {\n        symbol: symbol,\n        symbolSize: symbolSize,\n        symbolRotate: symbolRotate,\n        symbolOffset: symbolOffset,\n        symbolKeepAspect: symbolKeepAspect,\n        style: style\n      });\n    }); // TODO Text are wrong\n\n    symbolDraw.updateData(mpData);\n    this.group.add(symbolDraw.group); // Set host model for tooltip\n    // FIXME\n\n    mpData.eachItemGraphicEl(function (el) {\n      el.traverse(function (child) {\n        getECData(child).dataModel = mpModel;\n      });\n    });\n    this.markKeep(symbolDraw);\n    symbolDraw.group.silent = mpModel.get('silent') || seriesModel.get('silent');\n  };\n\n  MarkPointView.type = 'markPoint';\n  return MarkPointView;\n}(MarkerView);\n\nfunction createData(coordSys, seriesModel, mpModel) {\n  var coordDimsInfos;\n\n  if (coordSys) {\n    coordDimsInfos = map(coordSys && coordSys.dimensions, function (coordDim) {\n      var info = seriesModel.getData().getDimensionInfo(seriesModel.getData().mapDimension(coordDim)) || {}; // In map series data don't have lng and lat dimension. Fallback to same with coordSys\n\n      return extend(extend({}, info), {\n        name: coordDim,\n        // DON'T use ordinalMeta to parse and collect ordinal.\n        ordinalMeta: null\n      });\n    });\n  } else {\n    coordDimsInfos = [{\n      name: 'value',\n      type: 'float'\n    }];\n  }\n\n  var mpData = new SeriesData(coordDimsInfos, mpModel);\n  var dataOpt = map(mpModel.get('data'), curry(markerHelper.dataTransform, seriesModel));\n\n  if (coordSys) {\n    dataOpt = filter(dataOpt, curry(markerHelper.dataFilter, coordSys));\n  }\n\n  var dimValueGetter = markerHelper.createMarkerDimValueGetter(!!coordSys, coordDimsInfos);\n  mpData.initData(dataOpt, null, dimValueGetter);\n  return mpData;\n}\n\nexport default MarkPointView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport MarkerModel from './MarkerModel';\n\nvar MarkLineModel =\n/** @class */\nfunction (_super) {\n  __extends(MarkLineModel, _super);\n\n  function MarkLineModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = MarkLineModel.type;\n    return _this;\n  }\n\n  MarkLineModel.prototype.createMarkerModelFromSeries = function (markerOpt, masterMarkerModel, ecModel) {\n    return new MarkLineModel(markerOpt, masterMarkerModel, ecModel);\n  };\n\n  MarkLineModel.type = 'markLine';\n  MarkLineModel.defaultOption = {\n    zlevel: 0,\n    z: 5,\n    symbol: ['circle', 'arrow'],\n    symbolSize: [8, 16],\n    //symbolRotate: 0,\n    symbolOffset: 0,\n    precision: 2,\n    tooltip: {\n      trigger: 'item'\n    },\n    label: {\n      show: true,\n      position: 'end',\n      distance: 5\n    },\n    lineStyle: {\n      type: 'dashed'\n    },\n    emphasis: {\n      label: {\n        show: true\n      },\n      lineStyle: {\n        width: 3\n      }\n    },\n    animationEasing: 'linear'\n  };\n  return MarkLineModel;\n}(MarkerModel);\n\nexport default MarkLineModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesData from '../../data/SeriesData';\nimport * as numberUtil from '../../util/number';\nimport * as markerHelper from './markerHelper';\nimport LineDraw from '../../chart/helper/LineDraw';\nimport MarkerView from './MarkerView';\nimport { getStackedDimension } from '../../data/helper/dataStackHelper';\nimport { isCoordinateSystemType } from '../../coord/CoordinateSystem';\nimport { getECData } from '../../util/innerStore';\nimport MarkerModel from './MarkerModel';\nimport { isArray, retrieve, retrieve2, clone, extend, logError, merge, map, curry, filter } from 'zrender/lib/core/util';\nimport { makeInner } from '../../util/model';\nimport { getVisualFromData } from '../../visual/helper';\nvar inner = makeInner();\n\nvar markLineTransform = function markLineTransform(seriesModel, coordSys, mlModel, item) {\n  var data = seriesModel.getData();\n  var itemArray;\n\n  if (!isArray(item)) {\n    // Special type markLine like 'min', 'max', 'average', 'median'\n    var mlType = item.type;\n\n    if (mlType === 'min' || mlType === 'max' || mlType === 'average' || mlType === 'median' // In case\n    // data: [{\n    //   yAxis: 10\n    // }]\n    || item.xAxis != null || item.yAxis != null) {\n      var valueAxis = void 0;\n      var value = void 0;\n\n      if (item.yAxis != null || item.xAxis != null) {\n        valueAxis = coordSys.getAxis(item.yAxis != null ? 'y' : 'x');\n        value = retrieve(item.yAxis, item.xAxis);\n      } else {\n        var axisInfo = markerHelper.getAxisInfo(item, data, coordSys, seriesModel);\n        valueAxis = axisInfo.valueAxis;\n        var valueDataDim = getStackedDimension(data, axisInfo.valueDataDim);\n        value = markerHelper.numCalculate(data, valueDataDim, mlType);\n      }\n\n      var valueIndex = valueAxis.dim === 'x' ? 0 : 1;\n      var baseIndex = 1 - valueIndex; // Normized to 2d data with start and end point\n\n      var mlFrom = clone(item);\n      var mlTo = {\n        coord: []\n      };\n      mlFrom.type = null;\n      mlFrom.coord = [];\n      mlFrom.coord[baseIndex] = -Infinity;\n      mlTo.coord[baseIndex] = Infinity;\n      var precision = mlModel.get('precision');\n\n      if (precision >= 0 && typeof value === 'number') {\n        value = +value.toFixed(Math.min(precision, 20));\n      }\n\n      mlFrom.coord[valueIndex] = mlTo.coord[valueIndex] = value;\n      itemArray = [mlFrom, mlTo, {\n        type: mlType,\n        valueIndex: item.valueIndex,\n        // Force to use the value of calculated value.\n        value: value\n      }];\n    } else {\n      // Invalid data\n      if (process.env.NODE_ENV !== 'production') {\n        logError('Invalid markLine data.');\n      }\n\n      itemArray = [];\n    }\n  } else {\n    itemArray = item;\n  }\n\n  var normalizedItem = [markerHelper.dataTransform(seriesModel, itemArray[0]), markerHelper.dataTransform(seriesModel, itemArray[1]), extend({}, itemArray[2])]; // Avoid line data type is extended by from(to) data type\n\n  normalizedItem[2].type = normalizedItem[2].type || null; // Merge from option and to option into line option\n\n  merge(normalizedItem[2], normalizedItem[0]);\n  merge(normalizedItem[2], normalizedItem[1]);\n  return normalizedItem;\n};\n\nfunction isInifinity(val) {\n  return !isNaN(val) && !isFinite(val);\n} // If a markLine has one dim\n\n\nfunction ifMarkLineHasOnlyDim(dimIndex, fromCoord, toCoord, coordSys) {\n  var otherDimIndex = 1 - dimIndex;\n  var dimName = coordSys.dimensions[dimIndex];\n  return isInifinity(fromCoord[otherDimIndex]) && isInifinity(toCoord[otherDimIndex]) && fromCoord[dimIndex] === toCoord[dimIndex] && coordSys.getAxis(dimName).containData(fromCoord[dimIndex]);\n}\n\nfunction markLineFilter(coordSys, item) {\n  if (coordSys.type === 'cartesian2d') {\n    var fromCoord = item[0].coord;\n    var toCoord = item[1].coord; // In case\n    // {\n    //  markLine: {\n    //    data: [{ yAxis: 2 }]\n    //  }\n    // }\n\n    if (fromCoord && toCoord && (ifMarkLineHasOnlyDim(1, fromCoord, toCoord, coordSys) || ifMarkLineHasOnlyDim(0, fromCoord, toCoord, coordSys))) {\n      return true;\n    }\n  }\n\n  return markerHelper.dataFilter(coordSys, item[0]) && markerHelper.dataFilter(coordSys, item[1]);\n}\n\nfunction updateSingleMarkerEndLayout(data, idx, isFrom, seriesModel, api) {\n  var coordSys = seriesModel.coordinateSystem;\n  var itemModel = data.getItemModel(idx);\n  var point;\n  var xPx = numberUtil.parsePercent(itemModel.get('x'), api.getWidth());\n  var yPx = numberUtil.parsePercent(itemModel.get('y'), api.getHeight());\n\n  if (!isNaN(xPx) && !isNaN(yPx)) {\n    point = [xPx, yPx];\n  } else {\n    // Chart like bar may have there own marker positioning logic\n    if (seriesModel.getMarkerPosition) {\n      // Use the getMarkerPoisition\n      point = seriesModel.getMarkerPosition(data.getValues(data.dimensions, idx));\n    } else {\n      var dims = coordSys.dimensions;\n      var x = data.get(dims[0], idx);\n      var y = data.get(dims[1], idx);\n      point = coordSys.dataToPoint([x, y]);\n    } // Expand line to the edge of grid if value on one axis is Inifnity\n    // In case\n    //  markLine: {\n    //    data: [{\n    //      yAxis: 2\n    //      // or\n    //      type: 'average'\n    //    }]\n    //  }\n\n\n    if (isCoordinateSystemType(coordSys, 'cartesian2d')) {\n      // TODO: TYPE ts@4.1 may still infer it as Axis instead of Axis2D. Not sure if it's a bug\n      var xAxis = coordSys.getAxis('x');\n      var yAxis = coordSys.getAxis('y');\n      var dims = coordSys.dimensions;\n\n      if (isInifinity(data.get(dims[0], idx))) {\n        point[0] = xAxis.toGlobalCoord(xAxis.getExtent()[isFrom ? 0 : 1]);\n      } else if (isInifinity(data.get(dims[1], idx))) {\n        point[1] = yAxis.toGlobalCoord(yAxis.getExtent()[isFrom ? 0 : 1]);\n      }\n    } // Use x, y if has any\n\n\n    if (!isNaN(xPx)) {\n      point[0] = xPx;\n    }\n\n    if (!isNaN(yPx)) {\n      point[1] = yPx;\n    }\n  }\n\n  data.setItemLayout(idx, point);\n}\n\nvar MarkLineView =\n/** @class */\nfunction (_super) {\n  __extends(MarkLineView, _super);\n\n  function MarkLineView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = MarkLineView.type;\n    return _this;\n  }\n\n  MarkLineView.prototype.updateTransform = function (markLineModel, ecModel, api) {\n    ecModel.eachSeries(function (seriesModel) {\n      var mlModel = MarkerModel.getMarkerModelFromSeries(seriesModel, 'markLine');\n\n      if (mlModel) {\n        var mlData_1 = mlModel.getData();\n        var fromData_1 = inner(mlModel).from;\n        var toData_1 = inner(mlModel).to; // Update visual and layout of from symbol and to symbol\n\n        fromData_1.each(function (idx) {\n          updateSingleMarkerEndLayout(fromData_1, idx, true, seriesModel, api);\n          updateSingleMarkerEndLayout(toData_1, idx, false, seriesModel, api);\n        }); // Update layout of line\n\n        mlData_1.each(function (idx) {\n          mlData_1.setItemLayout(idx, [fromData_1.getItemLayout(idx), toData_1.getItemLayout(idx)]);\n        });\n        this.markerGroupMap.get(seriesModel.id).updateLayout();\n      }\n    }, this);\n  };\n\n  MarkLineView.prototype.renderSeries = function (seriesModel, mlModel, ecModel, api) {\n    var coordSys = seriesModel.coordinateSystem;\n    var seriesId = seriesModel.id;\n    var seriesData = seriesModel.getData();\n    var lineDrawMap = this.markerGroupMap;\n    var lineDraw = lineDrawMap.get(seriesId) || lineDrawMap.set(seriesId, new LineDraw());\n    this.group.add(lineDraw.group);\n    var mlData = createList(coordSys, seriesModel, mlModel);\n    var fromData = mlData.from;\n    var toData = mlData.to;\n    var lineData = mlData.line;\n    inner(mlModel).from = fromData;\n    inner(mlModel).to = toData; // Line data for tooltip and formatter\n\n    mlModel.setData(lineData); // TODO\n    // Functionally, `symbolSize` & `symbolOffset` can also be 2D array now.\n    // But the related logic and type definition are not finished yet.\n    // Finish it if required\n\n    var symbolType = mlModel.get('symbol');\n    var symbolSize = mlModel.get('symbolSize');\n    var symbolRotate = mlModel.get('symbolRotate');\n    var symbolOffset = mlModel.get('symbolOffset'); // TODO: support callback function like markPoint\n\n    if (!isArray(symbolType)) {\n      symbolType = [symbolType, symbolType];\n    }\n\n    if (!isArray(symbolSize)) {\n      symbolSize = [symbolSize, symbolSize];\n    }\n\n    if (!isArray(symbolRotate)) {\n      symbolRotate = [symbolRotate, symbolRotate];\n    }\n\n    if (!isArray(symbolOffset)) {\n      symbolOffset = [symbolOffset, symbolOffset];\n    } // Update visual and layout of from symbol and to symbol\n\n\n    mlData.from.each(function (idx) {\n      updateDataVisualAndLayout(fromData, idx, true);\n      updateDataVisualAndLayout(toData, idx, false);\n    }); // Update visual and layout of line\n\n    lineData.each(function (idx) {\n      var lineStyle = lineData.getItemModel(idx).getModel('lineStyle').getLineStyle(); // lineData.setItemVisual(idx, {\n      //     color: lineColor || fromData.getItemVisual(idx, 'color')\n      // });\n\n      lineData.setItemLayout(idx, [fromData.getItemLayout(idx), toData.getItemLayout(idx)]);\n\n      if (lineStyle.stroke == null) {\n        lineStyle.stroke = fromData.getItemVisual(idx, 'style').fill;\n      }\n\n      lineData.setItemVisual(idx, {\n        fromSymbolKeepAspect: fromData.getItemVisual(idx, 'symbolKeepAspect'),\n        fromSymbolOffset: fromData.getItemVisual(idx, 'symbolOffset'),\n        fromSymbolRotate: fromData.getItemVisual(idx, 'symbolRotate'),\n        fromSymbolSize: fromData.getItemVisual(idx, 'symbolSize'),\n        fromSymbol: fromData.getItemVisual(idx, 'symbol'),\n        toSymbolKeepAspect: toData.getItemVisual(idx, 'symbolKeepAspect'),\n        toSymbolOffset: toData.getItemVisual(idx, 'symbolOffset'),\n        toSymbolRotate: toData.getItemVisual(idx, 'symbolRotate'),\n        toSymbolSize: toData.getItemVisual(idx, 'symbolSize'),\n        toSymbol: toData.getItemVisual(idx, 'symbol'),\n        style: lineStyle\n      });\n    });\n    lineDraw.updateData(lineData); // Set host model for tooltip\n    // FIXME\n\n    mlData.line.eachItemGraphicEl(function (el, idx) {\n      el.traverse(function (child) {\n        getECData(child).dataModel = mlModel;\n      });\n    });\n\n    function updateDataVisualAndLayout(data, idx, isFrom) {\n      var itemModel = data.getItemModel(idx);\n      updateSingleMarkerEndLayout(data, idx, isFrom, seriesModel, api);\n      var style = itemModel.getModel('itemStyle').getItemStyle();\n\n      if (style.fill == null) {\n        style.fill = getVisualFromData(seriesData, 'color');\n      }\n\n      data.setItemVisual(idx, {\n        symbolKeepAspect: itemModel.get('symbolKeepAspect'),\n        // `0` should be considered as a valid value, so use `retrieve2` instead of `||`\n        symbolOffset: retrieve2(itemModel.get('symbolOffset', true), symbolOffset[isFrom ? 0 : 1]),\n        symbolRotate: retrieve2(itemModel.get('symbolRotate', true), symbolRotate[isFrom ? 0 : 1]),\n        // TODO: when 2d array is supported, it should ignore parent\n        symbolSize: retrieve2(itemModel.get('symbolSize'), symbolSize[isFrom ? 0 : 1]),\n        symbol: retrieve2(itemModel.get('symbol', true), symbolType[isFrom ? 0 : 1]),\n        style: style\n      });\n    }\n\n    this.markKeep(lineDraw);\n    lineDraw.group.silent = mlModel.get('silent') || seriesModel.get('silent');\n  };\n\n  MarkLineView.type = 'markLine';\n  return MarkLineView;\n}(MarkerView);\n\nfunction createList(coordSys, seriesModel, mlModel) {\n  var coordDimsInfos;\n\n  if (coordSys) {\n    coordDimsInfos = map(coordSys && coordSys.dimensions, function (coordDim) {\n      var info = seriesModel.getData().getDimensionInfo(seriesModel.getData().mapDimension(coordDim)) || {}; // In map series data don't have lng and lat dimension. Fallback to same with coordSys\n\n      return extend(extend({}, info), {\n        name: coordDim,\n        // DON'T use ordinalMeta to parse and collect ordinal.\n        ordinalMeta: null\n      });\n    });\n  } else {\n    coordDimsInfos = [{\n      name: 'value',\n      type: 'float'\n    }];\n  }\n\n  var fromData = new SeriesData(coordDimsInfos, mlModel);\n  var toData = new SeriesData(coordDimsInfos, mlModel); // No dimensions\n\n  var lineData = new SeriesData([], mlModel);\n  var optData = map(mlModel.get('data'), curry(markLineTransform, seriesModel, coordSys, mlModel));\n\n  if (coordSys) {\n    optData = filter(optData, curry(markLineFilter, coordSys));\n  }\n\n  var dimValueGetter = markerHelper.createMarkerDimValueGetter(!!coordSys, coordDimsInfos);\n  fromData.initData(map(optData, function (item) {\n    return item[0];\n  }), null, dimValueGetter);\n  toData.initData(map(optData, function (item) {\n    return item[1];\n  }), null, dimValueGetter);\n  lineData.initData(map(optData, function (item) {\n    return item[2];\n  }));\n  lineData.hasItemOption = true;\n  return {\n    from: fromData,\n    to: toData,\n    line: lineData\n  };\n}\n\nexport default MarkLineView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport MarkerModel from './MarkerModel';\n\nvar MarkAreaModel =\n/** @class */\nfunction (_super) {\n  __extends(MarkAreaModel, _super);\n\n  function MarkAreaModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = MarkAreaModel.type;\n    return _this;\n  }\n\n  MarkAreaModel.prototype.createMarkerModelFromSeries = function (markerOpt, masterMarkerModel, ecModel) {\n    return new MarkAreaModel(markerOpt, masterMarkerModel, ecModel);\n  };\n\n  MarkAreaModel.type = 'markArea';\n  MarkAreaModel.defaultOption = {\n    zlevel: 0,\n    // PENDING\n    z: 1,\n    tooltip: {\n      trigger: 'item'\n    },\n    // markArea should fixed on the coordinate system\n    animation: false,\n    label: {\n      show: true,\n      position: 'top'\n    },\n    itemStyle: {\n      // color and borderColor default to use color from series\n      // color: 'auto'\n      // borderColor: 'auto'\n      borderWidth: 0\n    },\n    emphasis: {\n      label: {\n        show: true,\n        position: 'top'\n      }\n    }\n  };\n  return MarkAreaModel;\n}(MarkerModel);\n\nexport default MarkAreaModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\"; // TODO Optimize on polar\n\nimport * as colorUtil from 'zrender/lib/tool/color';\nimport SeriesData from '../../data/SeriesData';\nimport * as numberUtil from '../../util/number';\nimport * as graphic from '../../util/graphic';\nimport { enableHoverEmphasis, setStatesStylesFromModel } from '../../util/states';\nimport * as markerHelper from './markerHelper';\nimport MarkerView from './MarkerView';\nimport { retrieve, mergeAll, map, curry, filter, extend } from 'zrender/lib/core/util';\nimport { isCoordinateSystemType } from '../../coord/CoordinateSystem';\nimport MarkerModel from './MarkerModel';\nimport { makeInner } from '../../util/model';\nimport { getVisualFromData } from '../../visual/helper';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle';\nimport { getECData } from '../../util/innerStore';\nimport { parseDataValue } from '../../data/helper/dataValueHelper';\nvar inner = makeInner();\n\nvar markAreaTransform = function markAreaTransform(seriesModel, coordSys, maModel, item) {\n  var lt = markerHelper.dataTransform(seriesModel, item[0]);\n  var rb = markerHelper.dataTransform(seriesModel, item[1]); // FIXME make sure lt is less than rb\n\n  var ltCoord = lt.coord;\n  var rbCoord = rb.coord;\n  ltCoord[0] = retrieve(ltCoord[0], -Infinity);\n  ltCoord[1] = retrieve(ltCoord[1], -Infinity);\n  rbCoord[0] = retrieve(rbCoord[0], Infinity);\n  rbCoord[1] = retrieve(rbCoord[1], Infinity); // Merge option into one\n\n  var result = mergeAll([{}, lt, rb]);\n  result.coord = [lt.coord, rb.coord];\n  result.x0 = lt.x;\n  result.y0 = lt.y;\n  result.x1 = rb.x;\n  result.y1 = rb.y;\n  return result;\n};\n\nfunction isInifinity(val) {\n  return !isNaN(val) && !isFinite(val);\n} // If a markArea has one dim\n\n\nfunction ifMarkAreaHasOnlyDim(dimIndex, fromCoord, toCoord, coordSys) {\n  var otherDimIndex = 1 - dimIndex;\n  return isInifinity(fromCoord[otherDimIndex]) && isInifinity(toCoord[otherDimIndex]);\n}\n\nfunction markAreaFilter(coordSys, item) {\n  var fromCoord = item.coord[0];\n  var toCoord = item.coord[1];\n\n  if (isCoordinateSystemType(coordSys, 'cartesian2d')) {\n    // In case\n    // {\n    //  markArea: {\n    //    data: [{ yAxis: 2 }]\n    //  }\n    // }\n    if (fromCoord && toCoord && (ifMarkAreaHasOnlyDim(1, fromCoord, toCoord, coordSys) || ifMarkAreaHasOnlyDim(0, fromCoord, toCoord, coordSys))) {\n      return true;\n    }\n  }\n\n  return markerHelper.dataFilter(coordSys, {\n    coord: fromCoord,\n    x: item.x0,\n    y: item.y0\n  }) || markerHelper.dataFilter(coordSys, {\n    coord: toCoord,\n    x: item.x1,\n    y: item.y1\n  });\n} // dims can be ['x0', 'y0'], ['x1', 'y1'], ['x0', 'y1'], ['x1', 'y0']\n\n\nfunction getSingleMarkerEndPoint(data, idx, dims, seriesModel, api) {\n  var coordSys = seriesModel.coordinateSystem;\n  var itemModel = data.getItemModel(idx);\n  var point;\n  var xPx = numberUtil.parsePercent(itemModel.get(dims[0]), api.getWidth());\n  var yPx = numberUtil.parsePercent(itemModel.get(dims[1]), api.getHeight());\n\n  if (!isNaN(xPx) && !isNaN(yPx)) {\n    point = [xPx, yPx];\n  } else {\n    // Chart like bar may have there own marker positioning logic\n    if (seriesModel.getMarkerPosition) {\n      // Use the getMarkerPoisition\n      point = seriesModel.getMarkerPosition(data.getValues(dims, idx));\n    } else {\n      var x = data.get(dims[0], idx);\n      var y = data.get(dims[1], idx);\n      var pt = [x, y];\n      coordSys.clampData && coordSys.clampData(pt, pt);\n      point = coordSys.dataToPoint(pt, true);\n    }\n\n    if (isCoordinateSystemType(coordSys, 'cartesian2d')) {\n      // TODO: TYPE ts@4.1 may still infer it as Axis instead of Axis2D. Not sure if it's a bug\n      var xAxis = coordSys.getAxis('x');\n      var yAxis = coordSys.getAxis('y');\n      var x = data.get(dims[0], idx);\n      var y = data.get(dims[1], idx);\n\n      if (isInifinity(x)) {\n        point[0] = xAxis.toGlobalCoord(xAxis.getExtent()[dims[0] === 'x0' ? 0 : 1]);\n      } else if (isInifinity(y)) {\n        point[1] = yAxis.toGlobalCoord(yAxis.getExtent()[dims[1] === 'y0' ? 0 : 1]);\n      }\n    } // Use x, y if has any\n\n\n    if (!isNaN(xPx)) {\n      point[0] = xPx;\n    }\n\n    if (!isNaN(yPx)) {\n      point[1] = yPx;\n    }\n  }\n\n  return point;\n}\n\nvar dimPermutations = [['x0', 'y0'], ['x1', 'y0'], ['x1', 'y1'], ['x0', 'y1']];\n\nvar MarkAreaView =\n/** @class */\nfunction (_super) {\n  __extends(MarkAreaView, _super);\n\n  function MarkAreaView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = MarkAreaView.type;\n    return _this;\n  }\n\n  MarkAreaView.prototype.updateTransform = function (markAreaModel, ecModel, api) {\n    ecModel.eachSeries(function (seriesModel) {\n      var maModel = MarkerModel.getMarkerModelFromSeries(seriesModel, 'markArea');\n\n      if (maModel) {\n        var areaData_1 = maModel.getData();\n        areaData_1.each(function (idx) {\n          var points = map(dimPermutations, function (dim) {\n            return getSingleMarkerEndPoint(areaData_1, idx, dim, seriesModel, api);\n          }); // Layout\n\n          areaData_1.setItemLayout(idx, points);\n          var el = areaData_1.getItemGraphicEl(idx);\n          el.setShape('points', points);\n        });\n      }\n    }, this);\n  };\n\n  MarkAreaView.prototype.renderSeries = function (seriesModel, maModel, ecModel, api) {\n    var coordSys = seriesModel.coordinateSystem;\n    var seriesId = seriesModel.id;\n    var seriesData = seriesModel.getData();\n    var areaGroupMap = this.markerGroupMap;\n    var polygonGroup = areaGroupMap.get(seriesId) || areaGroupMap.set(seriesId, {\n      group: new graphic.Group()\n    });\n    this.group.add(polygonGroup.group);\n    this.markKeep(polygonGroup);\n    var areaData = createList(coordSys, seriesModel, maModel); // Line data for tooltip and formatter\n\n    maModel.setData(areaData); // Update visual and layout of line\n\n    areaData.each(function (idx) {\n      // Layout\n      var points = map(dimPermutations, function (dim) {\n        return getSingleMarkerEndPoint(areaData, idx, dim, seriesModel, api);\n      });\n      var xAxisScale = coordSys.getAxis('x').scale;\n      var yAxisScale = coordSys.getAxis('y').scale;\n      var xAxisExtent = xAxisScale.getExtent();\n      var yAxisExtent = yAxisScale.getExtent();\n      var xPointExtent = [xAxisScale.parse(areaData.get('x0', idx)), xAxisScale.parse(areaData.get('x1', idx))];\n      var yPointExtent = [yAxisScale.parse(areaData.get('y0', idx)), yAxisScale.parse(areaData.get('y1', idx))];\n      numberUtil.asc(xPointExtent);\n      numberUtil.asc(yPointExtent);\n      var overlapped = !(xAxisExtent[0] > xPointExtent[1] || xAxisExtent[1] < xPointExtent[0] || yAxisExtent[0] > yPointExtent[1] || yAxisExtent[1] < yPointExtent[0]); // If none of the area is inside coordSys, allClipped is set to be true\n      // in layout so that label will not be displayed. See #12591\n\n      var allClipped = !overlapped;\n      areaData.setItemLayout(idx, {\n        points: points,\n        allClipped: allClipped\n      });\n      var style = areaData.getItemModel(idx).getModel('itemStyle').getItemStyle();\n      var color = getVisualFromData(seriesData, 'color');\n\n      if (!style.fill) {\n        style.fill = color;\n\n        if (typeof style.fill === 'string') {\n          style.fill = colorUtil.modifyAlpha(style.fill, 0.4);\n        }\n      }\n\n      if (!style.stroke) {\n        style.stroke = color;\n      } // Visual\n\n\n      areaData.setItemVisual(idx, 'style', style);\n    });\n    areaData.diff(inner(polygonGroup).data).add(function (idx) {\n      var layout = areaData.getItemLayout(idx);\n\n      if (!layout.allClipped) {\n        var polygon = new graphic.Polygon({\n          shape: {\n            points: layout.points\n          }\n        });\n        areaData.setItemGraphicEl(idx, polygon);\n        polygonGroup.group.add(polygon);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var polygon = inner(polygonGroup).data.getItemGraphicEl(oldIdx);\n      var layout = areaData.getItemLayout(newIdx);\n\n      if (!layout.allClipped) {\n        if (polygon) {\n          graphic.updateProps(polygon, {\n            shape: {\n              points: layout.points\n            }\n          }, maModel, newIdx);\n        } else {\n          polygon = new graphic.Polygon({\n            shape: {\n              points: layout.points\n            }\n          });\n        }\n\n        areaData.setItemGraphicEl(newIdx, polygon);\n        polygonGroup.group.add(polygon);\n      } else if (polygon) {\n        polygonGroup.group.remove(polygon);\n      }\n    }).remove(function (idx) {\n      var polygon = inner(polygonGroup).data.getItemGraphicEl(idx);\n      polygonGroup.group.remove(polygon);\n    }).execute();\n    areaData.eachItemGraphicEl(function (polygon, idx) {\n      var itemModel = areaData.getItemModel(idx);\n      var style = areaData.getItemVisual(idx, 'style');\n      polygon.useStyle(areaData.getItemVisual(idx, 'style'));\n      setLabelStyle(polygon, getLabelStatesModels(itemModel), {\n        labelFetcher: maModel,\n        labelDataIndex: idx,\n        defaultText: areaData.getName(idx) || '',\n        inheritColor: typeof style.fill === 'string' ? colorUtil.modifyAlpha(style.fill, 1) : '#000'\n      });\n      setStatesStylesFromModel(polygon, itemModel);\n      enableHoverEmphasis(polygon);\n      getECData(polygon).dataModel = maModel;\n    });\n    inner(polygonGroup).data = areaData;\n    polygonGroup.group.silent = maModel.get('silent') || seriesModel.get('silent');\n  };\n\n  MarkAreaView.type = 'markArea';\n  return MarkAreaView;\n}(MarkerView);\n\nfunction createList(coordSys, seriesModel, maModel) {\n  var areaData;\n  var dataDims;\n  var dims = ['x0', 'y0', 'x1', 'y1'];\n\n  if (coordSys) {\n    var coordDimsInfos_1 = map(coordSys && coordSys.dimensions, function (coordDim) {\n      var data = seriesModel.getData();\n      var info = data.getDimensionInfo(data.mapDimension(coordDim)) || {}; // In map series data don't have lng and lat dimension. Fallback to same with coordSys\n\n      return extend(extend({}, info), {\n        name: coordDim,\n        // DON'T use ordinalMeta to parse and collect ordinal.\n        ordinalMeta: null\n      });\n    });\n    dataDims = map(dims, function (dim, idx) {\n      return {\n        name: dim,\n        type: coordDimsInfos_1[idx % 2].type\n      };\n    });\n    areaData = new SeriesData(dataDims, maModel);\n  } else {\n    dataDims = [{\n      name: 'value',\n      type: 'float'\n    }];\n    areaData = new SeriesData(dataDims, maModel);\n  }\n\n  var optData = map(maModel.get('data'), curry(markAreaTransform, seriesModel, coordSys, maModel));\n\n  if (coordSys) {\n    optData = filter(optData, curry(markAreaFilter, coordSys));\n  }\n\n  var dimValueGetter = coordSys ? function (item, dimName, dataIndex, dimIndex) {\n    // TODO should convert to ParsedValue?\n    var rawVal = item.coord[Math.floor(dimIndex / 2)][dimIndex % 2];\n    return parseDataValue(rawVal, dataDims[dimIndex]);\n  } : function (item, dimName, dataIndex, dimIndex) {\n    return parseDataValue(item.value, dataDims[dimIndex]);\n  };\n  areaData.initData(optData, null, dimValueGetter);\n  areaData.hasItemOption = true;\n  return areaData;\n}\n\nexport default MarkAreaView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport Model from '../../model/Model';\nimport { isNameSpecified } from '../../util/model';\nimport ComponentModel from '../../model/Component';\n\nvar getDefaultSelectorOptions = function getDefaultSelectorOptions(ecModel, type) {\n  if (type === 'all') {\n    return {\n      type: 'all',\n      title: ecModel.getLocaleModel().get(['legend', 'selector', 'all'])\n    };\n  } else if (type === 'inverse') {\n    return {\n      type: 'inverse',\n      title: ecModel.getLocaleModel().get(['legend', 'selector', 'inverse'])\n    };\n  }\n};\n\nvar LegendModel =\n/** @class */\nfunction (_super) {\n  __extends(LegendModel, _super);\n\n  function LegendModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = LegendModel.type;\n    _this.layoutMode = {\n      type: 'box',\n      // legend.width/height are maxWidth/maxHeight actually,\n      // whereas realy width/height is calculated by its content.\n      // (Setting {left: 10, right: 10} does not make sense).\n      // So consider the case:\n      // `setOption({legend: {left: 10});`\n      // then `setOption({legend: {right: 10});`\n      // The previous `left` should be cleared by setting `ignoreSize`.\n      ignoreSize: true\n    };\n    return _this;\n  }\n\n  LegendModel.prototype.init = function (option, parentModel, ecModel) {\n    this.mergeDefaultAndTheme(option, ecModel);\n    option.selected = option.selected || {};\n\n    this._updateSelector(option);\n  };\n\n  LegendModel.prototype.mergeOption = function (option, ecModel) {\n    _super.prototype.mergeOption.call(this, option, ecModel);\n\n    this._updateSelector(option);\n  };\n\n  LegendModel.prototype._updateSelector = function (option) {\n    var selector = option.selector;\n    var ecModel = this.ecModel;\n\n    if (selector === true) {\n      selector = option.selector = ['all', 'inverse'];\n    }\n\n    if (zrUtil.isArray(selector)) {\n      zrUtil.each(selector, function (item, index) {\n        zrUtil.isString(item) && (item = {\n          type: item\n        });\n        selector[index] = zrUtil.merge(item, getDefaultSelectorOptions(ecModel, item.type));\n      });\n    }\n  };\n\n  LegendModel.prototype.optionUpdated = function () {\n    this._updateData(this.ecModel);\n\n    var legendData = this._data; // If selectedMode is single, try to select one\n\n    if (legendData[0] && this.get('selectedMode') === 'single') {\n      var hasSelected = false; // If has any selected in option.selected\n\n      for (var i = 0; i < legendData.length; i++) {\n        var name_1 = legendData[i].get('name');\n\n        if (this.isSelected(name_1)) {\n          // Force to unselect others\n          this.select(name_1);\n          hasSelected = true;\n          break;\n        }\n      } // Try select the first if selectedMode is single\n\n\n      !hasSelected && this.select(legendData[0].get('name'));\n    }\n  };\n\n  LegendModel.prototype._updateData = function (ecModel) {\n    var potentialData = [];\n    var availableNames = [];\n    ecModel.eachRawSeries(function (seriesModel) {\n      var seriesName = seriesModel.name;\n      availableNames.push(seriesName);\n      var isPotential;\n\n      if (seriesModel.legendVisualProvider) {\n        var provider = seriesModel.legendVisualProvider;\n        var names = provider.getAllNames();\n\n        if (!ecModel.isSeriesFiltered(seriesModel)) {\n          availableNames = availableNames.concat(names);\n        }\n\n        if (names.length) {\n          potentialData = potentialData.concat(names);\n        } else {\n          isPotential = true;\n        }\n      } else {\n        isPotential = true;\n      }\n\n      if (isPotential && isNameSpecified(seriesModel)) {\n        potentialData.push(seriesModel.name);\n      }\n    });\n    /**\n     * @type {Array.<string>}\n     * @private\n     */\n\n    this._availableNames = availableNames; // If legend.data not specified in option, use availableNames as data,\n    // which is convinient for user preparing option.\n\n    var rawData = this.get('data') || potentialData;\n    var legendData = zrUtil.map(rawData, function (dataItem) {\n      // Can be string or number\n      if (typeof dataItem === 'string' || typeof dataItem === 'number') {\n        dataItem = {\n          name: dataItem\n        };\n      }\n\n      return new Model(dataItem, this, this.ecModel);\n    }, this);\n    /**\n     * @type {Array.<module:echarts/model/Model>}\n     * @private\n     */\n\n    this._data = legendData;\n  };\n\n  LegendModel.prototype.getData = function () {\n    return this._data;\n  };\n\n  LegendModel.prototype.select = function (name) {\n    var selected = this.option.selected;\n    var selectedMode = this.get('selectedMode');\n\n    if (selectedMode === 'single') {\n      var data = this._data;\n      zrUtil.each(data, function (dataItem) {\n        selected[dataItem.get('name')] = false;\n      });\n    }\n\n    selected[name] = true;\n  };\n\n  LegendModel.prototype.unSelect = function (name) {\n    if (this.get('selectedMode') !== 'single') {\n      this.option.selected[name] = false;\n    }\n  };\n\n  LegendModel.prototype.toggleSelected = function (name) {\n    var selected = this.option.selected; // Default is true\n\n    if (!selected.hasOwnProperty(name)) {\n      selected[name] = true;\n    }\n\n    this[selected[name] ? 'unSelect' : 'select'](name);\n  };\n\n  LegendModel.prototype.allSelect = function () {\n    var data = this._data;\n    var selected = this.option.selected;\n    zrUtil.each(data, function (dataItem) {\n      selected[dataItem.get('name', true)] = true;\n    });\n  };\n\n  LegendModel.prototype.inverseSelect = function () {\n    var data = this._data;\n    var selected = this.option.selected;\n    zrUtil.each(data, function (dataItem) {\n      var name = dataItem.get('name', true); // Initially, default value is true\n\n      if (!selected.hasOwnProperty(name)) {\n        selected[name] = true;\n      }\n\n      selected[name] = !selected[name];\n    });\n  };\n\n  LegendModel.prototype.isSelected = function (name) {\n    var selected = this.option.selected;\n    return !(selected.hasOwnProperty(name) && !selected[name]) && zrUtil.indexOf(this._availableNames, name) >= 0;\n  };\n\n  LegendModel.prototype.getOrient = function () {\n    return this.get('orient') === 'vertical' ? {\n      index: 1,\n      name: 'vertical'\n    } : {\n      index: 0,\n      name: 'horizontal'\n    };\n  };\n\n  LegendModel.type = 'legend.plain';\n  LegendModel.dependencies = ['series'];\n  LegendModel.defaultOption = {\n    zlevel: 0,\n    z: 4,\n    show: true,\n    orient: 'horizontal',\n    left: 'center',\n    // right: 'center',\n    top: 0,\n    // bottom: null,\n    align: 'auto',\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderColor: '#ccc',\n    borderRadius: 0,\n    borderWidth: 0,\n    padding: 5,\n    itemGap: 10,\n    itemWidth: 25,\n    itemHeight: 14,\n    symbolRotate: 'inherit',\n    symbolKeepAspect: true,\n    inactiveColor: '#ccc',\n    inactiveBorderColor: '#ccc',\n    inactiveBorderWidth: 'auto',\n    itemStyle: {\n      color: 'inherit',\n      opacity: 'inherit',\n      borderColor: 'inherit',\n      borderWidth: 'auto',\n      borderCap: 'inherit',\n      borderJoin: 'inherit',\n      borderDashOffset: 'inherit',\n      borderMiterLimit: 'inherit'\n    },\n    lineStyle: {\n      width: 'auto',\n      color: 'inherit',\n      inactiveColor: '#ccc',\n      inactiveWidth: 2,\n      opacity: 'inherit',\n      type: 'inherit',\n      cap: 'inherit',\n      join: 'inherit',\n      dashOffset: 'inherit',\n      miterLimit: 'inherit'\n    },\n    textStyle: {\n      color: '#333'\n    },\n    selectedMode: true,\n    selector: false,\n    selectorLabel: {\n      show: true,\n      borderRadius: 10,\n      padding: [3, 5, 3, 5],\n      fontSize: 12,\n      fontFamily: 'sans-serif',\n      color: '#666',\n      borderWidth: 1,\n      borderColor: '#666'\n    },\n    emphasis: {\n      selectorLabel: {\n        show: true,\n        color: '#eee',\n        backgroundColor: '#666'\n      }\n    },\n    selectorPosition: 'auto',\n    selectorItemGap: 7,\n    selectorButtonGap: 10,\n    tooltip: {\n      show: false\n    }\n  };\n  return LegendModel;\n}(ComponentModel);\n\nexport default LegendModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { parse, stringify } from 'zrender/lib/tool/color';\nimport * as graphic from '../../util/graphic';\nimport { enableHoverEmphasis } from '../../util/states';\nimport { setLabelStyle, createTextStyle } from '../../label/labelStyle';\nimport { makeBackground } from '../helper/listComponent';\nimport * as layoutUtil from '../../util/layout';\nimport ComponentView from '../../view/Component';\nimport { createSymbol } from '../../util/symbol';\nvar curry = zrUtil.curry;\nvar each = zrUtil.each;\nvar Group = graphic.Group;\n\nvar LegendView =\n/** @class */\nfunction (_super) {\n  __extends(LegendView, _super);\n\n  function LegendView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = LegendView.type;\n    _this.newlineDisabled = false;\n    return _this;\n  }\n\n  LegendView.prototype.init = function () {\n    this.group.add(this._contentGroup = new Group());\n    this.group.add(this._selectorGroup = new Group());\n    this._isFirstRender = true;\n  };\n  /**\n   * @protected\n   */\n\n\n  LegendView.prototype.getContentGroup = function () {\n    return this._contentGroup;\n  };\n  /**\n   * @protected\n   */\n\n\n  LegendView.prototype.getSelectorGroup = function () {\n    return this._selectorGroup;\n  };\n  /**\n   * @override\n   */\n\n\n  LegendView.prototype.render = function (legendModel, ecModel, api) {\n    var isFirstRender = this._isFirstRender;\n    this._isFirstRender = false;\n    this.resetInner();\n\n    if (!legendModel.get('show', true)) {\n      return;\n    }\n\n    var itemAlign = legendModel.get('align');\n    var orient = legendModel.get('orient');\n\n    if (!itemAlign || itemAlign === 'auto') {\n      itemAlign = legendModel.get('left') === 'right' && orient === 'vertical' ? 'right' : 'left';\n    } // selector has been normalized to an array in model\n\n\n    var selector = legendModel.get('selector', true);\n    var selectorPosition = legendModel.get('selectorPosition', true);\n\n    if (selector && (!selectorPosition || selectorPosition === 'auto')) {\n      selectorPosition = orient === 'horizontal' ? 'end' : 'start';\n    }\n\n    this.renderInner(itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition); // Perform layout.\n\n    var positionInfo = legendModel.getBoxLayoutParams();\n    var viewportSize = {\n      width: api.getWidth(),\n      height: api.getHeight()\n    };\n    var padding = legendModel.get('padding');\n    var maxSize = layoutUtil.getLayoutRect(positionInfo, viewportSize, padding);\n    var mainRect = this.layoutInner(legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition); // Place mainGroup, based on the calculated `mainRect`.\n\n    var layoutRect = layoutUtil.getLayoutRect(zrUtil.defaults({\n      width: mainRect.width,\n      height: mainRect.height\n    }, positionInfo), viewportSize, padding);\n    this.group.x = layoutRect.x - mainRect.x;\n    this.group.y = layoutRect.y - mainRect.y;\n    this.group.markRedraw(); // Render background after group is layout.\n\n    this.group.add(this._backgroundEl = makeBackground(mainRect, legendModel));\n  };\n\n  LegendView.prototype.resetInner = function () {\n    this.getContentGroup().removeAll();\n    this._backgroundEl && this.group.remove(this._backgroundEl);\n    this.getSelectorGroup().removeAll();\n  };\n\n  LegendView.prototype.renderInner = function (itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition) {\n    var contentGroup = this.getContentGroup();\n    var legendDrawnMap = zrUtil.createHashMap();\n    var selectMode = legendModel.get('selectedMode');\n    var excludeSeriesId = [];\n    ecModel.eachRawSeries(function (seriesModel) {\n      !seriesModel.get('legendHoverLink') && excludeSeriesId.push(seriesModel.id);\n    });\n    each(legendModel.getData(), function (legendItemModel, dataIndex) {\n      var name = legendItemModel.get('name'); // Use empty string or \\n as a newline string\n\n      if (!this.newlineDisabled && (name === '' || name === '\\n')) {\n        var g = new Group(); // @ts-ignore\n\n        g.newline = true;\n        contentGroup.add(g);\n        return;\n      } // Representitive series.\n\n\n      var seriesModel = ecModel.getSeriesByName(name)[0];\n\n      if (legendDrawnMap.get(name)) {\n        // Have been drawed\n        return;\n      } // Legend to control series.\n\n\n      if (seriesModel) {\n        var data = seriesModel.getData();\n        var lineVisualStyle = data.getVisual('legendLineStyle') || {};\n        var legendIcon = data.getVisual('legendIcon');\n        /**\n         * `data.getVisual('style')` may be the color from the register\n         * in series. For example, for line series,\n         */\n\n        var style = data.getVisual('style');\n\n        var itemGroup = this._createItem(seriesModel, name, dataIndex, legendItemModel, legendModel, itemAlign, lineVisualStyle, style, legendIcon, selectMode);\n\n        itemGroup.on('click', curry(dispatchSelectAction, name, null, api, excludeSeriesId)).on('mouseover', curry(dispatchHighlightAction, seriesModel.name, null, api, excludeSeriesId)).on('mouseout', curry(dispatchDownplayAction, seriesModel.name, null, api, excludeSeriesId));\n        legendDrawnMap.set(name, true);\n      } else {\n        // Legend to control data. In pie and funnel.\n        ecModel.eachRawSeries(function (seriesModel) {\n          // In case multiple series has same data name\n          if (legendDrawnMap.get(name)) {\n            return;\n          }\n\n          if (seriesModel.legendVisualProvider) {\n            var provider = seriesModel.legendVisualProvider;\n\n            if (!provider.containName(name)) {\n              return;\n            }\n\n            var idx = provider.indexOfName(name);\n            var style = provider.getItemVisual(idx, 'style');\n            var legendIcon = provider.getItemVisual(idx, 'legendIcon');\n            var colorArr = parse(style.fill); // Color may be set to transparent in visualMap when data is out of range.\n            // Do not show nothing.\n\n            if (colorArr && colorArr[3] === 0) {\n              colorArr[3] = 0.2; // TODO color is set to 0, 0, 0, 0. Should show correct RGBA\n\n              style.fill = stringify(colorArr, 'rgba');\n            }\n\n            var itemGroup = this._createItem(seriesModel, name, dataIndex, legendItemModel, legendModel, itemAlign, {}, style, legendIcon, selectMode); // FIXME: consider different series has items with the same name.\n\n\n            itemGroup.on('click', curry(dispatchSelectAction, null, name, api, excludeSeriesId)) // Should not specify the series name, consider legend controls\n            // more than one pie series.\n            .on('mouseover', curry(dispatchHighlightAction, null, name, api, excludeSeriesId)).on('mouseout', curry(dispatchDownplayAction, null, name, api, excludeSeriesId));\n            legendDrawnMap.set(name, true);\n          }\n        }, this);\n      }\n\n      if (process.env.NODE_ENV !== 'production') {\n        if (!legendDrawnMap.get(name)) {\n          console.warn(name + ' series not exists. Legend data should be same with series name or data name.');\n        }\n      }\n    }, this);\n\n    if (selector) {\n      this._createSelector(selector, legendModel, api, orient, selectorPosition);\n    }\n  };\n\n  LegendView.prototype._createSelector = function (selector, legendModel, api, orient, selectorPosition) {\n    var selectorGroup = this.getSelectorGroup();\n    each(selector, function createSelectorButton(selectorItem) {\n      var type = selectorItem.type;\n      var labelText = new graphic.Text({\n        style: {\n          x: 0,\n          y: 0,\n          align: 'center',\n          verticalAlign: 'middle'\n        },\n        onclick: function onclick() {\n          api.dispatchAction({\n            type: type === 'all' ? 'legendAllSelect' : 'legendInverseSelect'\n          });\n        }\n      });\n      selectorGroup.add(labelText);\n      var labelModel = legendModel.getModel('selectorLabel');\n      var emphasisLabelModel = legendModel.getModel(['emphasis', 'selectorLabel']);\n      setLabelStyle(labelText, {\n        normal: labelModel,\n        emphasis: emphasisLabelModel\n      }, {\n        defaultText: selectorItem.title\n      });\n      enableHoverEmphasis(labelText);\n    });\n  };\n\n  LegendView.prototype._createItem = function (seriesModel, name, dataIndex, legendItemModel, legendModel, itemAlign, lineVisualStyle, itemVisualStyle, legendIcon, selectMode) {\n    var drawType = seriesModel.visualDrawType;\n    var itemWidth = legendModel.get('itemWidth');\n    var itemHeight = legendModel.get('itemHeight');\n    var isSelected = legendModel.isSelected(name);\n    var iconRotate = legendItemModel.get('symbolRotate');\n    var symbolKeepAspect = legendItemModel.get('symbolKeepAspect');\n    var legendIconType = legendItemModel.get('icon');\n    legendIcon = legendIconType || legendIcon || 'roundRect';\n    var style = getLegendStyle(legendIcon, legendItemModel, lineVisualStyle, itemVisualStyle, drawType, isSelected);\n    var itemGroup = new Group();\n    var textStyleModel = legendItemModel.getModel('textStyle');\n\n    if (typeof seriesModel.getLegendIcon === 'function' && (!legendIconType || legendIconType === 'inherit')) {\n      // Series has specific way to define legend icon\n      itemGroup.add(seriesModel.getLegendIcon({\n        itemWidth: itemWidth,\n        itemHeight: itemHeight,\n        icon: legendIcon,\n        iconRotate: iconRotate,\n        itemStyle: style.itemStyle,\n        lineStyle: style.lineStyle,\n        symbolKeepAspect: symbolKeepAspect\n      }));\n    } else {\n      // Use default legend icon policy for most series\n      var rotate = legendIconType === 'inherit' && seriesModel.getData().getVisual('symbol') ? iconRotate === 'inherit' ? seriesModel.getData().getVisual('symbolRotate') : iconRotate : 0; // No rotation for no icon\n\n      itemGroup.add(getDefaultLegendIcon({\n        itemWidth: itemWidth,\n        itemHeight: itemHeight,\n        icon: legendIcon,\n        iconRotate: rotate,\n        itemStyle: style.itemStyle,\n        lineStyle: style.lineStyle,\n        symbolKeepAspect: symbolKeepAspect\n      }));\n    }\n\n    var textX = itemAlign === 'left' ? itemWidth + 5 : -5;\n    var textAlign = itemAlign;\n    var formatter = legendModel.get('formatter');\n    var content = name;\n\n    if (typeof formatter === 'string' && formatter) {\n      content = formatter.replace('{name}', name != null ? name : '');\n    } else if (typeof formatter === 'function') {\n      content = formatter(name);\n    }\n\n    var inactiveColor = legendItemModel.get('inactiveColor');\n    itemGroup.add(new graphic.Text({\n      style: createTextStyle(textStyleModel, {\n        text: content,\n        x: textX,\n        y: itemHeight / 2,\n        fill: isSelected ? textStyleModel.getTextColor() : inactiveColor,\n        align: textAlign,\n        verticalAlign: 'middle'\n      })\n    })); // Add a invisible rect to increase the area of mouse hover\n\n    var hitRect = new graphic.Rect({\n      shape: itemGroup.getBoundingRect(),\n      invisible: true\n    });\n    var tooltipModel = legendItemModel.getModel('tooltip');\n\n    if (tooltipModel.get('show')) {\n      graphic.setTooltipConfig({\n        el: hitRect,\n        componentModel: legendModel,\n        itemName: name,\n        itemTooltipOption: tooltipModel.option\n      });\n    }\n\n    itemGroup.add(hitRect);\n    itemGroup.eachChild(function (child) {\n      child.silent = true;\n    });\n    hitRect.silent = !selectMode;\n    this.getContentGroup().add(itemGroup);\n    enableHoverEmphasis(itemGroup); // @ts-ignore\n\n    itemGroup.__legendDataIndex = dataIndex;\n    return itemGroup;\n  };\n\n  LegendView.prototype.layoutInner = function (legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition) {\n    var contentGroup = this.getContentGroup();\n    var selectorGroup = this.getSelectorGroup(); // Place items in contentGroup.\n\n    layoutUtil.box(legendModel.get('orient'), contentGroup, legendModel.get('itemGap'), maxSize.width, maxSize.height);\n    var contentRect = contentGroup.getBoundingRect();\n    var contentPos = [-contentRect.x, -contentRect.y];\n    selectorGroup.markRedraw();\n    contentGroup.markRedraw();\n\n    if (selector) {\n      // Place buttons in selectorGroup\n      layoutUtil.box( // Buttons in selectorGroup always layout horizontally\n      'horizontal', selectorGroup, legendModel.get('selectorItemGap', true));\n      var selectorRect = selectorGroup.getBoundingRect();\n      var selectorPos = [-selectorRect.x, -selectorRect.y];\n      var selectorButtonGap = legendModel.get('selectorButtonGap', true);\n      var orientIdx = legendModel.getOrient().index;\n      var wh = orientIdx === 0 ? 'width' : 'height';\n      var hw = orientIdx === 0 ? 'height' : 'width';\n      var yx = orientIdx === 0 ? 'y' : 'x';\n\n      if (selectorPosition === 'end') {\n        selectorPos[orientIdx] += contentRect[wh] + selectorButtonGap;\n      } else {\n        contentPos[orientIdx] += selectorRect[wh] + selectorButtonGap;\n      } //Always align selector to content as 'middle'\n\n\n      selectorPos[1 - orientIdx] += contentRect[hw] / 2 - selectorRect[hw] / 2;\n      selectorGroup.x = selectorPos[0];\n      selectorGroup.y = selectorPos[1];\n      contentGroup.x = contentPos[0];\n      contentGroup.y = contentPos[1];\n      var mainRect = {\n        x: 0,\n        y: 0\n      };\n      mainRect[wh] = contentRect[wh] + selectorButtonGap + selectorRect[wh];\n      mainRect[hw] = Math.max(contentRect[hw], selectorRect[hw]);\n      mainRect[yx] = Math.min(0, selectorRect[yx] + selectorPos[1 - orientIdx]);\n      return mainRect;\n    } else {\n      contentGroup.x = contentPos[0];\n      contentGroup.y = contentPos[1];\n      return this.group.getBoundingRect();\n    }\n  };\n  /**\n   * @protected\n   */\n\n\n  LegendView.prototype.remove = function () {\n    this.getContentGroup().removeAll();\n    this._isFirstRender = true;\n  };\n\n  LegendView.type = 'legend.plain';\n  return LegendView;\n}(ComponentView);\n\nfunction getLegendStyle(iconType, legendModel, lineVisualStyle, itemVisualStyle, drawType, isSelected) {\n  /**\n   * Use series style if is inherit;\n   * elsewise, use legend style\n   */\n  function handleCommonProps(style, visualStyle) {\n    // If lineStyle.width is 'auto', it is set to be 2 if series has border\n    if (style.lineWidth === 'auto') {\n      style.lineWidth = visualStyle.lineWidth > 0 ? 2 : 0;\n    }\n\n    each(style, function (propVal, propName) {\n      style[propName] === 'inherit' && (style[propName] = visualStyle[propName]);\n    });\n  } // itemStyle\n\n\n  var legendItemModel = legendModel.getModel('itemStyle');\n  var itemStyle = legendItemModel.getItemStyle();\n  var iconBrushType = iconType.lastIndexOf('empty', 0) === 0 ? 'fill' : 'stroke';\n  itemStyle.decal = itemVisualStyle.decal;\n\n  if (itemStyle.fill === 'inherit') {\n    /**\n     * Series with visualDrawType as 'stroke' should have\n     * series stroke as legend fill\n     */\n    itemStyle.fill = itemVisualStyle[drawType];\n  }\n\n  if (itemStyle.stroke === 'inherit') {\n    /**\n     * icon type with \"emptyXXX\" should use fill color\n     * in visual style\n     */\n    itemStyle.stroke = itemVisualStyle[iconBrushType];\n  }\n\n  if (itemStyle.opacity === 'inherit') {\n    /**\n     * Use lineStyle.opacity if drawType is stroke\n     */\n    itemStyle.opacity = (drawType === 'fill' ? itemVisualStyle : lineVisualStyle).opacity;\n  }\n\n  handleCommonProps(itemStyle, itemVisualStyle); // lineStyle\n\n  var legendLineModel = legendModel.getModel('lineStyle');\n  var lineStyle = legendLineModel.getLineStyle();\n  handleCommonProps(lineStyle, lineVisualStyle); // Fix auto color to real color\n\n  itemStyle.fill === 'auto' && (itemStyle.fill = itemVisualStyle.fill);\n  itemStyle.stroke === 'auto' && (itemStyle.stroke = itemVisualStyle.fill);\n  lineStyle.stroke === 'auto' && (lineStyle.stroke = itemVisualStyle.fill);\n\n  if (!isSelected) {\n    var borderWidth = legendModel.get('inactiveBorderWidth');\n    /**\n     * Since stroke is set to be inactiveBorderColor, it may occur that\n     * there is no border in series but border in legend, so we need to\n     * use border only when series has border if is set to be auto\n     */\n\n    var visualHasBorder = itemStyle[iconBrushType];\n    itemStyle.lineWidth = borderWidth === 'auto' ? itemVisualStyle.lineWidth > 0 && visualHasBorder ? 2 : 0 : itemStyle.lineWidth;\n    itemStyle.fill = legendModel.get('inactiveColor');\n    itemStyle.stroke = legendModel.get('inactiveBorderColor');\n    lineStyle.stroke = legendLineModel.get('inactiveColor');\n    lineStyle.lineWidth = legendLineModel.get('inactiveWidth');\n  }\n\n  return {\n    itemStyle: itemStyle,\n    lineStyle: lineStyle\n  };\n}\n\nfunction getDefaultLegendIcon(opt) {\n  var symboType = opt.icon || 'roundRect';\n  var icon = createSymbol(symboType, 0, 0, opt.itemWidth, opt.itemHeight, opt.itemStyle.fill, opt.symbolKeepAspect);\n  icon.setStyle(opt.itemStyle);\n  icon.rotation = (opt.iconRotate || 0) * Math.PI / 180;\n  icon.setOrigin([opt.itemWidth / 2, opt.itemHeight / 2]);\n\n  if (symboType.indexOf('empty') > -1) {\n    icon.style.stroke = icon.style.fill;\n    icon.style.fill = '#fff';\n    icon.style.lineWidth = 2;\n  }\n\n  return icon;\n}\n\nfunction dispatchSelectAction(seriesName, dataName, api, excludeSeriesId) {\n  // downplay before unselect\n  dispatchDownplayAction(seriesName, dataName, api, excludeSeriesId);\n  api.dispatchAction({\n    type: 'legendToggleSelect',\n    name: seriesName != null ? seriesName : dataName\n  }); // highlight after select\n  // TODO higlight immediately may cause animation loss.\n\n  dispatchHighlightAction(seriesName, dataName, api, excludeSeriesId);\n}\n\nfunction isUseHoverLayer(api) {\n  var list = api.getZr().storage.getDisplayList();\n  var emphasisState;\n  var i = 0;\n  var len = list.length;\n\n  while (i < len && !(emphasisState = list[i].states.emphasis)) {\n    i++;\n  }\n\n  return emphasisState && emphasisState.hoverLayer;\n}\n\nfunction dispatchHighlightAction(seriesName, dataName, api, excludeSeriesId) {\n  // If element hover will move to a hoverLayer.\n  if (!isUseHoverLayer(api)) {\n    api.dispatchAction({\n      type: 'highlight',\n      seriesName: seriesName,\n      name: dataName,\n      excludeSeriesId: excludeSeriesId\n    });\n  }\n}\n\nfunction dispatchDownplayAction(seriesName, dataName, api, excludeSeriesId) {\n  // If element hover will move to a hoverLayer.\n  if (!isUseHoverLayer(api)) {\n    api.dispatchAction({\n      type: 'downplay',\n      seriesName: seriesName,\n      name: dataName,\n      excludeSeriesId: excludeSeriesId\n    });\n  }\n}\n\nexport default LegendView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport default function legendFilter(ecModel) {\n  var legendModels = ecModel.findComponents({\n    mainType: 'legend'\n  });\n\n  if (legendModels && legendModels.length) {\n    ecModel.filterSeries(function (series) {\n      // If in any legend component the status is not selected.\n      // Because in legend series is assumed selected when it is not in the legend data.\n      for (var i = 0; i < legendModels.length; i++) {\n        if (!legendModels[i].isSelected(series.name)) {\n          return false;\n        }\n      }\n\n      return true;\n    });\n  }\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// @ts-nocheck\nimport { curry, each } from 'zrender/lib/core/util';\n\nfunction legendSelectActionHandler(methodName, payload, ecModel) {\n  var selectedMap = {};\n  var isToggleSelect = methodName === 'toggleSelected';\n  var isSelected; // Update all legend components\n\n  ecModel.eachComponent('legend', function (legendModel) {\n    if (isToggleSelect && isSelected != null) {\n      // Force other legend has same selected status\n      // Or the first is toggled to true and other are toggled to false\n      // In the case one legend has some item unSelected in option. And if other legend\n      // doesn't has the item, they will assume it is selected.\n      legendModel[isSelected ? 'select' : 'unSelect'](payload.name);\n    } else if (methodName === 'allSelect' || methodName === 'inverseSelect') {\n      legendModel[methodName]();\n    } else {\n      legendModel[methodName](payload.name);\n      isSelected = legendModel.isSelected(payload.name);\n    }\n\n    var legendData = legendModel.getData();\n    each(legendData, function (model) {\n      var name = model.get('name'); // Wrap element\n\n      if (name === '\\n' || name === '') {\n        return;\n      }\n\n      var isItemSelected = legendModel.isSelected(name);\n\n      if (selectedMap.hasOwnProperty(name)) {\n        // Unselected if any legend is unselected\n        selectedMap[name] = selectedMap[name] && isItemSelected;\n      } else {\n        selectedMap[name] = isItemSelected;\n      }\n    });\n  }); // Return the event explicitly\n\n  return methodName === 'allSelect' || methodName === 'inverseSelect' ? {\n    selected: selectedMap\n  } : {\n    name: payload.name,\n    selected: selectedMap\n  };\n}\n\nexport function installLegendAction(registers) {\n  /**\n   * @event legendToggleSelect\n   * @type {Object}\n   * @property {string} type 'legendToggleSelect'\n   * @property {string} [from]\n   * @property {string} name Series name or data item name\n   */\n  registers.registerAction('legendToggleSelect', 'legendselectchanged', curry(legendSelectActionHandler, 'toggleSelected'));\n  registers.registerAction('legendAllSelect', 'legendselectall', curry(legendSelectActionHandler, 'allSelect'));\n  registers.registerAction('legendInverseSelect', 'legendinverseselect', curry(legendSelectActionHandler, 'inverseSelect'));\n  /**\n   * @event legendSelect\n   * @type {Object}\n   * @property {string} type 'legendSelect'\n   * @property {string} name Series name or data item name\n   */\n\n  registers.registerAction('legendSelect', 'legendselected', curry(legendSelectActionHandler, 'select'));\n  /**\n   * @event legendUnSelect\n   * @type {Object}\n   * @property {string} type 'legendUnSelect'\n   * @property {string} name Series name or data item name\n   */\n\n  registers.registerAction('legendUnSelect', 'legendunselected', curry(legendSelectActionHandler, 'unSelect'));\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport LegendModel from './LegendModel';\nimport LegendView from './LegendView';\nimport legendFilter from './legendFilter';\nimport { installLegendAction } from './legendAction';\nexport function install(registers) {\n  registers.registerComponentModel(LegendModel);\n  registers.registerComponentView(LegendView);\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.SERIES_FILTER, legendFilter);\n  registers.registerSubTypeDefaulter('legend', function () {\n    return 'plain';\n  });\n  installLegendAction(registers);\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport LegendModel from './LegendModel';\nimport { mergeLayoutParam, getLayoutParams } from '../../util/layout';\nimport { inheritDefaultOption } from '../../util/component';\n\nvar ScrollableLegendModel =\n/** @class */\nfunction (_super) {\n  __extends(ScrollableLegendModel, _super);\n\n  function ScrollableLegendModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ScrollableLegendModel.type;\n    return _this;\n  }\n  /**\n   * @param {number} scrollDataIndex\n   */\n\n\n  ScrollableLegendModel.prototype.setScrollDataIndex = function (scrollDataIndex) {\n    this.option.scrollDataIndex = scrollDataIndex;\n  };\n\n  ScrollableLegendModel.prototype.init = function (option, parentModel, ecModel) {\n    var inputPositionParams = getLayoutParams(option);\n\n    _super.prototype.init.call(this, option, parentModel, ecModel);\n\n    mergeAndNormalizeLayoutParams(this, option, inputPositionParams);\n  };\n  /**\n   * @override\n   */\n\n\n  ScrollableLegendModel.prototype.mergeOption = function (option, ecModel) {\n    _super.prototype.mergeOption.call(this, option, ecModel);\n\n    mergeAndNormalizeLayoutParams(this, this.option, option);\n  };\n\n  ScrollableLegendModel.type = 'legend.scroll';\n  ScrollableLegendModel.defaultOption = inheritDefaultOption(LegendModel.defaultOption, {\n    scrollDataIndex: 0,\n    pageButtonItemGap: 5,\n    pageButtonGap: null,\n    pageButtonPosition: 'end',\n    pageFormatter: '{current}/{total}',\n    pageIcons: {\n      horizontal: ['M0,0L12,-10L12,10z', 'M0,0L-12,-10L-12,10z'],\n      vertical: ['M0,0L20,0L10,-20z', 'M0,0L20,0L10,20z']\n    },\n    pageIconColor: '#2f4554',\n    pageIconInactiveColor: '#aaa',\n    pageIconSize: 15,\n    pageTextStyle: {\n      color: '#333'\n    },\n    animationDurationUpdate: 800\n  });\n  return ScrollableLegendModel;\n}(LegendModel);\n\n; // Do not `ignoreSize` to enable setting {left: 10, right: 10}.\n\nfunction mergeAndNormalizeLayoutParams(legendModel, target, raw) {\n  var orient = legendModel.getOrient();\n  var ignoreSize = [1, 1];\n  ignoreSize[orient.index] = 0;\n  mergeLayoutParam(target, raw, {\n    type: 'box',\n    ignoreSize: !!ignoreSize\n  });\n}\n\nexport default ScrollableLegendModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/**\n * Separate legend and scrollable legend to reduce package size.\n */\n\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as graphic from '../../util/graphic';\nimport * as layoutUtil from '../../util/layout';\nimport LegendView from './LegendView';\nvar Group = graphic.Group;\nvar WH = ['width', 'height'];\nvar XY = ['x', 'y'];\n\nvar ScrollableLegendView =\n/** @class */\nfunction (_super) {\n  __extends(ScrollableLegendView, _super);\n\n  function ScrollableLegendView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ScrollableLegendView.type;\n    _this.newlineDisabled = true;\n    _this._currentIndex = 0;\n    return _this;\n  }\n\n  ScrollableLegendView.prototype.init = function () {\n    _super.prototype.init.call(this);\n\n    this.group.add(this._containerGroup = new Group());\n\n    this._containerGroup.add(this.getContentGroup());\n\n    this.group.add(this._controllerGroup = new Group());\n  };\n  /**\n   * @override\n   */\n\n\n  ScrollableLegendView.prototype.resetInner = function () {\n    _super.prototype.resetInner.call(this);\n\n    this._controllerGroup.removeAll();\n\n    this._containerGroup.removeClipPath();\n\n    this._containerGroup.__rectSize = null;\n  };\n  /**\n   * @override\n   */\n\n\n  ScrollableLegendView.prototype.renderInner = function (itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition) {\n    var self = this; // Render content items.\n\n    _super.prototype.renderInner.call(this, itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition);\n\n    var controllerGroup = this._controllerGroup; // FIXME: support be 'auto' adapt to size number text length,\n    // e.g., '3/12345' should not overlap with the control arrow button.\n\n    var pageIconSize = legendModel.get('pageIconSize', true);\n    var pageIconSizeArr = zrUtil.isArray(pageIconSize) ? pageIconSize : [pageIconSize, pageIconSize];\n    createPageButton('pagePrev', 0);\n    var pageTextStyleModel = legendModel.getModel('pageTextStyle');\n    controllerGroup.add(new graphic.Text({\n      name: 'pageText',\n      style: {\n        // Placeholder to calculate a proper layout.\n        text: 'xx/xx',\n        fill: pageTextStyleModel.getTextColor(),\n        font: pageTextStyleModel.getFont(),\n        verticalAlign: 'middle',\n        align: 'center'\n      },\n      silent: true\n    }));\n    createPageButton('pageNext', 1);\n\n    function createPageButton(name, iconIdx) {\n      var pageDataIndexName = name + 'DataIndex';\n      var icon = graphic.createIcon(legendModel.get('pageIcons', true)[legendModel.getOrient().name][iconIdx], {\n        // Buttons will be created in each render, so we do not need\n        // to worry about avoiding using legendModel kept in scope.\n        onclick: zrUtil.bind(self._pageGo, self, pageDataIndexName, legendModel, api)\n      }, {\n        x: -pageIconSizeArr[0] / 2,\n        y: -pageIconSizeArr[1] / 2,\n        width: pageIconSizeArr[0],\n        height: pageIconSizeArr[1]\n      });\n      icon.name = name;\n      controllerGroup.add(icon);\n    }\n  };\n  /**\n   * @override\n   */\n\n\n  ScrollableLegendView.prototype.layoutInner = function (legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition) {\n    var selectorGroup = this.getSelectorGroup();\n    var orientIdx = legendModel.getOrient().index;\n    var wh = WH[orientIdx];\n    var xy = XY[orientIdx];\n    var hw = WH[1 - orientIdx];\n    var yx = XY[1 - orientIdx];\n    selector && layoutUtil.box( // Buttons in selectorGroup always layout horizontally\n    'horizontal', selectorGroup, legendModel.get('selectorItemGap', true));\n    var selectorButtonGap = legendModel.get('selectorButtonGap', true);\n    var selectorRect = selectorGroup.getBoundingRect();\n    var selectorPos = [-selectorRect.x, -selectorRect.y];\n    var processMaxSize = zrUtil.clone(maxSize);\n    selector && (processMaxSize[wh] = maxSize[wh] - selectorRect[wh] - selectorButtonGap);\n\n    var mainRect = this._layoutContentAndController(legendModel, isFirstRender, processMaxSize, orientIdx, wh, hw, yx, xy);\n\n    if (selector) {\n      if (selectorPosition === 'end') {\n        selectorPos[orientIdx] += mainRect[wh] + selectorButtonGap;\n      } else {\n        var offset = selectorRect[wh] + selectorButtonGap;\n        selectorPos[orientIdx] -= offset;\n        mainRect[xy] -= offset;\n      }\n\n      mainRect[wh] += selectorRect[wh] + selectorButtonGap;\n      selectorPos[1 - orientIdx] += mainRect[yx] + mainRect[hw] / 2 - selectorRect[hw] / 2;\n      mainRect[hw] = Math.max(mainRect[hw], selectorRect[hw]);\n      mainRect[yx] = Math.min(mainRect[yx], selectorRect[yx] + selectorPos[1 - orientIdx]);\n      selectorGroup.x = selectorPos[0];\n      selectorGroup.y = selectorPos[1];\n      selectorGroup.markRedraw();\n    }\n\n    return mainRect;\n  };\n\n  ScrollableLegendView.prototype._layoutContentAndController = function (legendModel, isFirstRender, maxSize, orientIdx, wh, hw, yx, xy) {\n    var contentGroup = this.getContentGroup();\n    var containerGroup = this._containerGroup;\n    var controllerGroup = this._controllerGroup; // Place items in contentGroup.\n\n    layoutUtil.box(legendModel.get('orient'), contentGroup, legendModel.get('itemGap'), !orientIdx ? null : maxSize.width, orientIdx ? null : maxSize.height);\n    layoutUtil.box( // Buttons in controller are layout always horizontally.\n    'horizontal', controllerGroup, legendModel.get('pageButtonItemGap', true));\n    var contentRect = contentGroup.getBoundingRect();\n    var controllerRect = controllerGroup.getBoundingRect();\n    var showController = this._showController = contentRect[wh] > maxSize[wh]; // In case that the inner elements of contentGroup layout do not based on [0, 0]\n\n    var contentPos = [-contentRect.x, -contentRect.y]; // Remain contentPos when scroll animation perfroming.\n    // If first rendering, `contentGroup.position` is [0, 0], which\n    // does not make sense and may cause unexepcted animation if adopted.\n\n    if (!isFirstRender) {\n      contentPos[orientIdx] = contentGroup[xy];\n    } // Layout container group based on 0.\n\n\n    var containerPos = [0, 0];\n    var controllerPos = [-controllerRect.x, -controllerRect.y];\n    var pageButtonGap = zrUtil.retrieve2(legendModel.get('pageButtonGap', true), legendModel.get('itemGap', true)); // Place containerGroup and controllerGroup and contentGroup.\n\n    if (showController) {\n      var pageButtonPosition = legendModel.get('pageButtonPosition', true); // controller is on the right / bottom.\n\n      if (pageButtonPosition === 'end') {\n        controllerPos[orientIdx] += maxSize[wh] - controllerRect[wh];\n      } // controller is on the left / top.\n      else {\n        containerPos[orientIdx] += controllerRect[wh] + pageButtonGap;\n      }\n    } // Always align controller to content as 'middle'.\n\n\n    controllerPos[1 - orientIdx] += contentRect[hw] / 2 - controllerRect[hw] / 2;\n    contentGroup.setPosition(contentPos);\n    containerGroup.setPosition(containerPos);\n    controllerGroup.setPosition(controllerPos); // Calculate `mainRect` and set `clipPath`.\n    // mainRect should not be calculated by `this.group.getBoundingRect()`\n    // for sake of the overflow.\n\n    var mainRect = {\n      x: 0,\n      y: 0\n    }; // Consider content may be overflow (should be clipped).\n\n    mainRect[wh] = showController ? maxSize[wh] : contentRect[wh];\n    mainRect[hw] = Math.max(contentRect[hw], controllerRect[hw]); // `containerRect[yx] + containerPos[1 - orientIdx]` is 0.\n\n    mainRect[yx] = Math.min(0, controllerRect[yx] + controllerPos[1 - orientIdx]);\n    containerGroup.__rectSize = maxSize[wh];\n\n    if (showController) {\n      var clipShape = {\n        x: 0,\n        y: 0\n      };\n      clipShape[wh] = Math.max(maxSize[wh] - controllerRect[wh] - pageButtonGap, 0);\n      clipShape[hw] = mainRect[hw];\n      containerGroup.setClipPath(new graphic.Rect({\n        shape: clipShape\n      })); // Consider content may be larger than container, container rect\n      // can not be obtained from `containerGroup.getBoundingRect()`.\n\n      containerGroup.__rectSize = clipShape[wh];\n    } else {\n      // Do not remove or ignore controller. Keep them set as placeholders.\n      controllerGroup.eachChild(function (child) {\n        child.attr({\n          invisible: true,\n          silent: true\n        });\n      });\n    } // Content translate animation.\n\n\n    var pageInfo = this._getPageInfo(legendModel);\n\n    pageInfo.pageIndex != null && graphic.updateProps(contentGroup, {\n      x: pageInfo.contentPosition[0],\n      y: pageInfo.contentPosition[1]\n    }, // When switch from \"show controller\" to \"not show controller\", view should be\n    // updated immediately without animation, otherwise causes weird effect.\n    showController ? legendModel : null);\n\n    this._updatePageInfoView(legendModel, pageInfo);\n\n    return mainRect;\n  };\n\n  ScrollableLegendView.prototype._pageGo = function (to, legendModel, api) {\n    var scrollDataIndex = this._getPageInfo(legendModel)[to];\n\n    scrollDataIndex != null && api.dispatchAction({\n      type: 'legendScroll',\n      scrollDataIndex: scrollDataIndex,\n      legendId: legendModel.id\n    });\n  };\n\n  ScrollableLegendView.prototype._updatePageInfoView = function (legendModel, pageInfo) {\n    var controllerGroup = this._controllerGroup;\n    zrUtil.each(['pagePrev', 'pageNext'], function (name) {\n      var key = name + 'DataIndex';\n      var canJump = pageInfo[key] != null;\n      var icon = controllerGroup.childOfName(name);\n\n      if (icon) {\n        icon.setStyle('fill', canJump ? legendModel.get('pageIconColor', true) : legendModel.get('pageIconInactiveColor', true));\n        icon.cursor = canJump ? 'pointer' : 'default';\n      }\n    });\n    var pageText = controllerGroup.childOfName('pageText');\n    var pageFormatter = legendModel.get('pageFormatter');\n    var pageIndex = pageInfo.pageIndex;\n    var current = pageIndex != null ? pageIndex + 1 : 0;\n    var total = pageInfo.pageCount;\n    pageText && pageFormatter && pageText.setStyle('text', zrUtil.isString(pageFormatter) ? pageFormatter.replace('{current}', current == null ? '' : current + '').replace('{total}', total == null ? '' : total + '') : pageFormatter({\n      current: current,\n      total: total\n    }));\n  };\n  /**\n   *  contentPosition: Array.<number>, null when data item not found.\n   *  pageIndex: number, null when data item not found.\n   *  pageCount: number, always be a number, can be 0.\n   *  pagePrevDataIndex: number, null when no previous page.\n   *  pageNextDataIndex: number, null when no next page.\n   * }\n   */\n\n\n  ScrollableLegendView.prototype._getPageInfo = function (legendModel) {\n    var scrollDataIndex = legendModel.get('scrollDataIndex', true);\n    var contentGroup = this.getContentGroup();\n    var containerRectSize = this._containerGroup.__rectSize;\n    var orientIdx = legendModel.getOrient().index;\n    var wh = WH[orientIdx];\n    var xy = XY[orientIdx];\n\n    var targetItemIndex = this._findTargetItemIndex(scrollDataIndex);\n\n    var children = contentGroup.children();\n    var targetItem = children[targetItemIndex];\n    var itemCount = children.length;\n    var pCount = !itemCount ? 0 : 1;\n    var result = {\n      contentPosition: [contentGroup.x, contentGroup.y],\n      pageCount: pCount,\n      pageIndex: pCount - 1,\n      pagePrevDataIndex: null,\n      pageNextDataIndex: null\n    };\n\n    if (!targetItem) {\n      return result;\n    }\n\n    var targetItemInfo = getItemInfo(targetItem);\n    result.contentPosition[orientIdx] = -targetItemInfo.s; // Strategy:\n    // (1) Always align based on the left/top most item.\n    // (2) It is user-friendly that the last item shown in the\n    // current window is shown at the begining of next window.\n    // Otherwise if half of the last item is cut by the window,\n    // it will have no chance to display entirely.\n    // (3) Consider that item size probably be different, we\n    // have calculate pageIndex by size rather than item index,\n    // and we can not get page index directly by division.\n    // (4) The window is to narrow to contain more than\n    // one item, we should make sure that the page can be fliped.\n\n    for (var i = targetItemIndex + 1, winStartItemInfo = targetItemInfo, winEndItemInfo = targetItemInfo, currItemInfo = null; i <= itemCount; ++i) {\n      currItemInfo = getItemInfo(children[i]);\n\n      if ( // Half of the last item is out of the window.\n      !currItemInfo && winEndItemInfo.e > winStartItemInfo.s + containerRectSize || // If the current item does not intersect with the window, the new page\n      // can be started at the current item or the last item.\n      currItemInfo && !intersect(currItemInfo, winStartItemInfo.s)) {\n        if (winEndItemInfo.i > winStartItemInfo.i) {\n          winStartItemInfo = winEndItemInfo;\n        } else {\n          // e.g., when page size is smaller than item size.\n          winStartItemInfo = currItemInfo;\n        }\n\n        if (winStartItemInfo) {\n          if (result.pageNextDataIndex == null) {\n            result.pageNextDataIndex = winStartItemInfo.i;\n          }\n\n          ++result.pageCount;\n        }\n      }\n\n      winEndItemInfo = currItemInfo;\n    }\n\n    for (var i = targetItemIndex - 1, winStartItemInfo = targetItemInfo, winEndItemInfo = targetItemInfo, currItemInfo = null; i >= -1; --i) {\n      currItemInfo = getItemInfo(children[i]);\n\n      if ( // If the the end item does not intersect with the window started\n      // from the current item, a page can be settled.\n      (!currItemInfo || !intersect(winEndItemInfo, currItemInfo.s)) && // e.g., when page size is smaller than item size.\n      winStartItemInfo.i < winEndItemInfo.i) {\n        winEndItemInfo = winStartItemInfo;\n\n        if (result.pagePrevDataIndex == null) {\n          result.pagePrevDataIndex = winStartItemInfo.i;\n        }\n\n        ++result.pageCount;\n        ++result.pageIndex;\n      }\n\n      winStartItemInfo = currItemInfo;\n    }\n\n    return result;\n\n    function getItemInfo(el) {\n      if (el) {\n        var itemRect = el.getBoundingRect();\n        var start = itemRect[xy] + el[xy];\n        return {\n          s: start,\n          e: start + itemRect[wh],\n          i: el.__legendDataIndex\n        };\n      }\n    }\n\n    function intersect(itemInfo, winStart) {\n      return itemInfo.e >= winStart && itemInfo.s <= winStart + containerRectSize;\n    }\n  };\n\n  ScrollableLegendView.prototype._findTargetItemIndex = function (targetDataIndex) {\n    if (!this._showController) {\n      return 0;\n    }\n\n    var index;\n    var contentGroup = this.getContentGroup();\n    var defaultIndex;\n    contentGroup.eachChild(function (child, idx) {\n      var legendDataIdx = child.__legendDataIndex; // FIXME\n      // If the given targetDataIndex (from model) is illegal,\n      // we use defaultIndex. But the index on the legend model and\n      // action payload is still illegal. That case will not be\n      // changed until some scenario requires.\n\n      if (defaultIndex == null && legendDataIdx != null) {\n        defaultIndex = idx;\n      }\n\n      if (legendDataIdx === targetDataIndex) {\n        index = idx;\n      }\n    });\n    return index != null ? index : defaultIndex;\n  };\n\n  ScrollableLegendView.type = 'legend.scroll';\n  return ScrollableLegendView;\n}(LegendView);\n\nexport default ScrollableLegendView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension';\nimport { install as installLegendPlain } from './installLegendPlain';\nimport ScrollableLegendModel from './ScrollableLegendModel';\nimport ScrollableLegendView from './ScrollableLegendView';\nimport installScrollableLegendAction from './scrollableLegendAction';\nexport function install(registers) {\n  use(installLegendPlain);\n  registers.registerComponentModel(ScrollableLegendModel);\n  registers.registerComponentView(ScrollableLegendView);\n  installScrollableLegendAction(registers);\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport default function installScrollableLegendAction(registers) {\n  /**\n   * @event legendScroll\n   * @type {Object}\n   * @property {string} type 'legendScroll'\n   * @property {string} scrollDataIndex\n   */\n  registers.registerAction('legendScroll', 'legendscroll', function (payload, ecModel) {\n    var scrollDataIndex = payload.scrollDataIndex;\n    scrollDataIndex != null && ecModel.eachComponent({\n      mainType: 'legend',\n      subType: 'scroll',\n      query: payload\n    }, function (legendModel) {\n      legendModel.setScrollDataIndex(scrollDataIndex);\n    });\n  });\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomModel from './DataZoomModel';\nimport { inheritDefaultOption } from '../../util/component';\n\nvar InsideZoomModel =\n/** @class */\nfunction (_super) {\n  __extends(InsideZoomModel, _super);\n\n  function InsideZoomModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = InsideZoomModel.type;\n    return _this;\n  }\n\n  InsideZoomModel.type = 'dataZoom.inside';\n  InsideZoomModel.defaultOption = inheritDefaultOption(DataZoomModel.defaultOption, {\n    disabled: false,\n    zoomLock: false,\n    zoomOnMouseWheel: true,\n    moveOnMouseMove: true,\n    moveOnMouseWheel: false,\n    preventDefaultMouseMove: true\n  });\n  return InsideZoomModel;\n}(DataZoomModel);\n\nexport default InsideZoomModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Only create one roam controller for each coordinate system.\n// one roam controller might be refered by two inside data zoom\n// components (for example, one for x and one for y). When user\n// pan or zoom, only dispatch one action for those data zoom\n// components.\nimport RoamController from '../../component/helper/RoamController';\nimport * as throttleUtil from '../../util/throttle';\nimport { makeInner } from '../../util/model';\nimport { each, curry, createHashMap } from 'zrender/lib/core/util';\nimport { collectReferCoordSysModelInfo } from './helper';\nvar inner = makeInner();\nexport function setViewInfoToCoordSysRecord(api, dataZoomModel, getRange) {\n  inner(api).coordSysRecordMap.each(function (coordSysRecord) {\n    var dzInfo = coordSysRecord.dataZoomInfoMap.get(dataZoomModel.uid);\n\n    if (dzInfo) {\n      dzInfo.getRange = getRange;\n    }\n  });\n}\nexport function disposeCoordSysRecordIfNeeded(api, dataZoomModel) {\n  var coordSysRecordMap = inner(api).coordSysRecordMap;\n  var coordSysKeyArr = coordSysRecordMap.keys();\n\n  for (var i = 0; i < coordSysKeyArr.length; i++) {\n    var coordSysKey = coordSysKeyArr[i];\n    var coordSysRecord = coordSysRecordMap.get(coordSysKey);\n    var dataZoomInfoMap = coordSysRecord.dataZoomInfoMap;\n\n    if (dataZoomInfoMap) {\n      var dzUid = dataZoomModel.uid;\n      var dzInfo = dataZoomInfoMap.get(dzUid);\n\n      if (dzInfo) {\n        dataZoomInfoMap.removeKey(dzUid);\n\n        if (!dataZoomInfoMap.keys().length) {\n          disposeCoordSysRecord(coordSysRecordMap, coordSysRecord);\n        }\n      }\n    }\n  }\n}\n\nfunction disposeCoordSysRecord(coordSysRecordMap, coordSysRecord) {\n  if (coordSysRecord) {\n    coordSysRecordMap.removeKey(coordSysRecord.model.uid);\n    var controller = coordSysRecord.controller;\n    controller && controller.dispose();\n  }\n}\n\nfunction createCoordSysRecord(api, coordSysModel) {\n  // These init props will never change after record created.\n  var coordSysRecord = {\n    model: coordSysModel,\n    containsPoint: curry(containsPoint, coordSysModel),\n    dispatchAction: curry(dispatchAction, api),\n    dataZoomInfoMap: null,\n    controller: null\n  }; // Must not do anything depends on coordSysRecord outside the event handler here,\n  // because coordSysRecord not completed yet.\n\n  var controller = coordSysRecord.controller = new RoamController(api.getZr());\n  each(['pan', 'zoom', 'scrollMove'], function (eventName) {\n    controller.on(eventName, function (event) {\n      var batch = [];\n      coordSysRecord.dataZoomInfoMap.each(function (dzInfo) {\n        // Check whether the behaviors (zoomOnMouseWheel, moveOnMouseMove,\n        // moveOnMouseWheel, ...) enabled.\n        if (!event.isAvailableBehavior(dzInfo.model.option)) {\n          return;\n        }\n\n        var method = (dzInfo.getRange || {})[eventName];\n        var range = method && method(dzInfo.dzReferCoordSysInfo, coordSysRecord.model.mainType, coordSysRecord.controller, event);\n        !dzInfo.model.get('disabled', true) && range && batch.push({\n          dataZoomId: dzInfo.model.id,\n          start: range[0],\n          end: range[1]\n        });\n      });\n      batch.length && coordSysRecord.dispatchAction(batch);\n    });\n  });\n  return coordSysRecord;\n}\n/**\n * This action will be throttled.\n */\n\n\nfunction dispatchAction(api, batch) {\n  api.dispatchAction({\n    type: 'dataZoom',\n    animation: {\n      easing: 'cubicOut',\n      duration: 100\n    },\n    batch: batch\n  });\n}\n\nfunction containsPoint(coordSysModel, e, x, y) {\n  return coordSysModel.coordinateSystem.containPoint([x, y]);\n}\n/**\n * Merge roamController settings when multiple dataZooms share one roamController.\n */\n\n\nfunction mergeControllerParams(dataZoomInfoMap) {\n  var controlType; // DO NOT use reserved word (true, false, undefined) as key literally. Even if encapsulated\n  // as string, it is probably revert to reserved word by compress tool. See #7411.\n\n  var prefix = 'type_';\n  var typePriority = {\n    'type_true': 2,\n    'type_move': 1,\n    'type_false': 0,\n    'type_undefined': -1\n  };\n  var preventDefaultMouseMove = true;\n  dataZoomInfoMap.each(function (dataZoomInfo) {\n    var dataZoomModel = dataZoomInfo.model;\n    var oneType = dataZoomModel.get('disabled', true) ? false : dataZoomModel.get('zoomLock', true) ? 'move' : true;\n\n    if (typePriority[prefix + oneType] > typePriority[prefix + controlType]) {\n      controlType = oneType;\n    } // Prevent default move event by default. If one false, do not prevent. Otherwise\n    // users may be confused why it does not work when multiple insideZooms exist.\n\n\n    preventDefaultMouseMove = preventDefaultMouseMove && dataZoomModel.get('preventDefaultMouseMove', true);\n  });\n  return {\n    controlType: controlType,\n    opt: {\n      // RoamController will enable all of these functionalities,\n      // and the final behavior is determined by its event listener\n      // provided by each inside zoom.\n      zoomOnMouseWheel: true,\n      moveOnMouseMove: true,\n      moveOnMouseWheel: true,\n      preventDefaultMouseMove: !!preventDefaultMouseMove\n    }\n  };\n}\n\nexport function installDataZoomRoamProcessor(registers) {\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.FILTER, function (ecModel, api) {\n    var apiInner = inner(api);\n    var coordSysRecordMap = apiInner.coordSysRecordMap || (apiInner.coordSysRecordMap = createHashMap());\n    coordSysRecordMap.each(function (coordSysRecord) {\n      // `coordSysRecordMap` always exists (becuase it hold the `roam controller`, which should\n      // better not re-create each time), but clear `dataZoomInfoMap` each round of the workflow.\n      coordSysRecord.dataZoomInfoMap = null;\n    });\n    ecModel.eachComponent({\n      mainType: 'dataZoom',\n      subType: 'inside'\n    }, function (dataZoomModel) {\n      var dzReferCoordSysWrap = collectReferCoordSysModelInfo(dataZoomModel);\n      each(dzReferCoordSysWrap.infoList, function (dzCoordSysInfo) {\n        var coordSysUid = dzCoordSysInfo.model.uid;\n        var coordSysRecord = coordSysRecordMap.get(coordSysUid) || coordSysRecordMap.set(coordSysUid, createCoordSysRecord(api, dzCoordSysInfo.model));\n        var dataZoomInfoMap = coordSysRecord.dataZoomInfoMap || (coordSysRecord.dataZoomInfoMap = createHashMap()); // Notice these props might be changed each time for a single dataZoomModel.\n\n        dataZoomInfoMap.set(dataZoomModel.uid, {\n          dzReferCoordSysInfo: dzCoordSysInfo,\n          model: dataZoomModel,\n          getRange: null\n        });\n      });\n    }); // (1) Merge dataZoom settings for each coord sys and set to the roam controller.\n    // (2) Clear coord sys if not refered by any dataZoom.\n\n    coordSysRecordMap.each(function (coordSysRecord) {\n      var controller = coordSysRecord.controller;\n      var firstDzInfo;\n      var dataZoomInfoMap = coordSysRecord.dataZoomInfoMap;\n\n      if (dataZoomInfoMap) {\n        var firstDzKey = dataZoomInfoMap.keys()[0];\n\n        if (firstDzKey != null) {\n          firstDzInfo = dataZoomInfoMap.get(firstDzKey);\n        }\n      }\n\n      if (!firstDzInfo) {\n        disposeCoordSysRecord(coordSysRecordMap, coordSysRecord);\n        return;\n      }\n\n      var controllerParams = mergeControllerParams(dataZoomInfoMap);\n      controller.enable(controllerParams.controlType, controllerParams.opt);\n      controller.setPointerChecker(coordSysRecord.containsPoint);\n      throttleUtil.createOrUpdate(coordSysRecord, 'dispatchAction', firstDzInfo.model.get('throttle', true), 'fixRate');\n    });\n  });\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomView from './DataZoomView';\nimport sliderMove from '../helper/sliderMove';\nimport * as roams from './roams';\nimport { bind } from 'zrender/lib/core/util';\n\nvar InsideZoomView =\n/** @class */\nfunction (_super) {\n  __extends(InsideZoomView, _super);\n\n  function InsideZoomView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = 'dataZoom.inside';\n    return _this;\n  }\n\n  InsideZoomView.prototype.render = function (dataZoomModel, ecModel, api) {\n    _super.prototype.render.apply(this, arguments);\n\n    if (dataZoomModel.noTarget()) {\n      this._clear();\n\n      return;\n    } // Hence the `throttle` util ensures to preserve command order,\n    // here simply updating range all the time will not cause missing\n    // any of the the roam change.\n\n\n    this.range = dataZoomModel.getPercentRange(); // Reset controllers.\n\n    roams.setViewInfoToCoordSysRecord(api, dataZoomModel, {\n      pan: bind(getRangeHandlers.pan, this),\n      zoom: bind(getRangeHandlers.zoom, this),\n      scrollMove: bind(getRangeHandlers.scrollMove, this)\n    });\n  };\n\n  InsideZoomView.prototype.dispose = function () {\n    this._clear();\n\n    _super.prototype.dispose.apply(this, arguments);\n  };\n\n  InsideZoomView.prototype._clear = function () {\n    roams.disposeCoordSysRecordIfNeeded(this.api, this.dataZoomModel);\n    this.range = null;\n  };\n\n  InsideZoomView.type = 'dataZoom.inside';\n  return InsideZoomView;\n}(DataZoomView);\n\nvar getRangeHandlers = {\n  zoom: function zoom(coordSysInfo, coordSysMainType, controller, e) {\n    var lastRange = this.range;\n    var range = lastRange.slice(); // Calculate transform by the first axis.\n\n    var axisModel = coordSysInfo.axisModels[0];\n\n    if (!axisModel) {\n      return;\n    }\n\n    var directionInfo = getDirectionInfo[coordSysMainType](null, [e.originX, e.originY], axisModel, controller, coordSysInfo);\n    var percentPoint = (directionInfo.signal > 0 ? directionInfo.pixelStart + directionInfo.pixelLength - directionInfo.pixel : directionInfo.pixel - directionInfo.pixelStart) / directionInfo.pixelLength * (range[1] - range[0]) + range[0];\n    var scale = Math.max(1 / e.scale, 0);\n    range[0] = (range[0] - percentPoint) * scale + percentPoint;\n    range[1] = (range[1] - percentPoint) * scale + percentPoint; // Restrict range.\n\n    var minMaxSpan = this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();\n    sliderMove(0, range, [0, 100], 0, minMaxSpan.minSpan, minMaxSpan.maxSpan);\n    this.range = range;\n\n    if (lastRange[0] !== range[0] || lastRange[1] !== range[1]) {\n      return range;\n    }\n  },\n  pan: makeMover(function (range, axisModel, coordSysInfo, coordSysMainType, controller, e) {\n    var directionInfo = getDirectionInfo[coordSysMainType]([e.oldX, e.oldY], [e.newX, e.newY], axisModel, controller, coordSysInfo);\n    return directionInfo.signal * (range[1] - range[0]) * directionInfo.pixel / directionInfo.pixelLength;\n  }),\n  scrollMove: makeMover(function (range, axisModel, coordSysInfo, coordSysMainType, controller, e) {\n    var directionInfo = getDirectionInfo[coordSysMainType]([0, 0], [e.scrollDelta, e.scrollDelta], axisModel, controller, coordSysInfo);\n    return directionInfo.signal * (range[1] - range[0]) * e.scrollDelta;\n  })\n};\n\nfunction makeMover(getPercentDelta) {\n  return function (coordSysInfo, coordSysMainType, controller, e) {\n    var lastRange = this.range;\n    var range = lastRange.slice(); // Calculate transform by the first axis.\n\n    var axisModel = coordSysInfo.axisModels[0];\n\n    if (!axisModel) {\n      return;\n    }\n\n    var percentDelta = getPercentDelta(range, axisModel, coordSysInfo, coordSysMainType, controller, e);\n    sliderMove(percentDelta, range, [0, 100], 'all');\n    this.range = range;\n\n    if (lastRange[0] !== range[0] || lastRange[1] !== range[1]) {\n      return range;\n    }\n  };\n}\n\nvar getDirectionInfo = {\n  grid: function grid(oldPoint, newPoint, axisModel, controller, coordSysInfo) {\n    var axis = axisModel.axis;\n    var ret = {};\n    var rect = coordSysInfo.model.coordinateSystem.getRect();\n    oldPoint = oldPoint || [0, 0];\n\n    if (axis.dim === 'x') {\n      ret.pixel = newPoint[0] - oldPoint[0];\n      ret.pixelLength = rect.width;\n      ret.pixelStart = rect.x;\n      ret.signal = axis.inverse ? 1 : -1;\n    } else {\n      // axis.dim === 'y'\n      ret.pixel = newPoint[1] - oldPoint[1];\n      ret.pixelLength = rect.height;\n      ret.pixelStart = rect.y;\n      ret.signal = axis.inverse ? -1 : 1;\n    }\n\n    return ret;\n  },\n  polar: function polar(oldPoint, newPoint, axisModel, controller, coordSysInfo) {\n    var axis = axisModel.axis;\n    var ret = {};\n    var polar = coordSysInfo.model.coordinateSystem;\n    var radiusExtent = polar.getRadiusAxis().getExtent();\n    var angleExtent = polar.getAngleAxis().getExtent();\n    oldPoint = oldPoint ? polar.pointToCoord(oldPoint) : [0, 0];\n    newPoint = polar.pointToCoord(newPoint);\n\n    if (axisModel.mainType === 'radiusAxis') {\n      ret.pixel = newPoint[0] - oldPoint[0]; // ret.pixelLength = Math.abs(radiusExtent[1] - radiusExtent[0]);\n      // ret.pixelStart = Math.min(radiusExtent[0], radiusExtent[1]);\n\n      ret.pixelLength = radiusExtent[1] - radiusExtent[0];\n      ret.pixelStart = radiusExtent[0];\n      ret.signal = axis.inverse ? 1 : -1;\n    } else {\n      // 'angleAxis'\n      ret.pixel = newPoint[1] - oldPoint[1]; // ret.pixelLength = Math.abs(angleExtent[1] - angleExtent[0]);\n      // ret.pixelStart = Math.min(angleExtent[0], angleExtent[1]);\n\n      ret.pixelLength = angleExtent[1] - angleExtent[0];\n      ret.pixelStart = angleExtent[0];\n      ret.signal = axis.inverse ? -1 : 1;\n    }\n\n    return ret;\n  },\n  singleAxis: function singleAxis(oldPoint, newPoint, axisModel, controller, coordSysInfo) {\n    var axis = axisModel.axis;\n    var rect = coordSysInfo.model.coordinateSystem.getRect();\n    var ret = {};\n    oldPoint = oldPoint || [0, 0];\n\n    if (axis.orient === 'horizontal') {\n      ret.pixel = newPoint[0] - oldPoint[0];\n      ret.pixelLength = rect.width;\n      ret.pixelStart = rect.x;\n      ret.signal = axis.inverse ? 1 : -1;\n    } else {\n      // 'vertical'\n      ret.pixel = newPoint[1] - oldPoint[1];\n      ret.pixelLength = rect.height;\n      ret.pixelStart = rect.y;\n      ret.signal = axis.inverse ? -1 : 1;\n    }\n\n    return ret;\n  }\n};\nexport default InsideZoomView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport InsideZoomModel from './InsideZoomModel';\nimport InsideZoomView from './InsideZoomView';\nimport { installDataZoomRoamProcessor } from './roams';\nimport installCommon from './installCommon';\nexport function install(registers) {\n  installCommon(registers);\n  registers.registerComponentModel(InsideZoomModel);\n  registers.registerComponentView(InsideZoomView);\n  installDataZoomRoamProcessor(registers);\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomModel from './DataZoomModel';\nimport { inheritDefaultOption } from '../../util/component';\n\nvar SliderZoomModel =\n/** @class */\nfunction (_super) {\n  __extends(SliderZoomModel, _super);\n\n  function SliderZoomModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SliderZoomModel.type;\n    return _this;\n  }\n\n  SliderZoomModel.type = 'dataZoom.slider';\n  SliderZoomModel.layoutMode = 'box';\n  SliderZoomModel.defaultOption = inheritDefaultOption(DataZoomModel.defaultOption, {\n    show: true,\n    // deault value can only be drived in view stage.\n    right: 'ph',\n    top: 'ph',\n    width: 'ph',\n    height: 'ph',\n    left: null,\n    bottom: null,\n    borderColor: '#d2dbee',\n    borderRadius: 3,\n    backgroundColor: 'rgba(47,69,84,0)',\n    // dataBackgroundColor: '#ddd',\n    dataBackground: {\n      lineStyle: {\n        color: '#d2dbee',\n        width: 0.5\n      },\n      areaStyle: {\n        color: '#d2dbee',\n        opacity: 0.2\n      }\n    },\n    selectedDataBackground: {\n      lineStyle: {\n        color: '#8fb0f7',\n        width: 0.5\n      },\n      areaStyle: {\n        color: '#8fb0f7',\n        opacity: 0.2\n      }\n    },\n    // Color of selected window.\n    fillerColor: 'rgba(135,175,274,0.2)',\n    handleIcon: 'path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z',\n    // Percent of the slider height\n    handleSize: '100%',\n    handleStyle: {\n      color: '#fff',\n      borderColor: '#ACB8D1'\n    },\n    moveHandleSize: 7,\n    moveHandleIcon: 'path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z',\n    moveHandleStyle: {\n      color: '#D2DBEE',\n      opacity: 0.7\n    },\n    showDetail: true,\n    showDataShadow: 'auto',\n    realtime: true,\n    zoomLock: false,\n    textStyle: {\n      color: '#6E7079'\n    },\n    brushSelect: true,\n    brushStyle: {\n      color: 'rgba(135,175,274,0.15)'\n    },\n    emphasis: {\n      handleStyle: {\n        borderColor: '#8FB0F7'\n      },\n      moveHandleStyle: {\n        color: '#8FB0F7'\n      }\n    }\n  });\n  return SliderZoomModel;\n}(DataZoomModel);\n\nexport default SliderZoomModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { bind, each, isFunction, isString, indexOf } from 'zrender/lib/core/util';\nimport * as eventTool from 'zrender/lib/core/event';\nimport * as graphic from '../../util/graphic';\nimport * as throttle from '../../util/throttle';\nimport DataZoomView from './DataZoomView';\nimport { linearMap, asc, parsePercent } from '../../util/number';\nimport * as layout from '../../util/layout';\nimport sliderMove from '../helper/sliderMove';\nimport { getAxisMainType, collectReferCoordSysModelInfo } from './helper';\nimport { enableHoverEmphasis } from '../../util/states';\nimport { createSymbol, symbolBuildProxies } from '../../util/symbol';\nimport { deprecateLog } from '../../util/log';\nimport { createTextStyle } from '../../label/labelStyle';\nvar Rect = graphic.Rect; // Constants\n\nvar DEFAULT_LOCATION_EDGE_GAP = 7;\nvar DEFAULT_FRAME_BORDER_WIDTH = 1;\nvar DEFAULT_FILLER_SIZE = 30;\nvar DEFAULT_MOVE_HANDLE_SIZE = 7;\nvar HORIZONTAL = 'horizontal';\nvar VERTICAL = 'vertical';\nvar LABEL_GAP = 5;\nvar SHOW_DATA_SHADOW_SERIES_TYPE = ['line', 'bar', 'candlestick', 'scatter'];\nvar REALTIME_ANIMATION_CONFIG = {\n  easing: 'cubicOut',\n  duration: 100,\n  delay: 0\n};\n\nvar SliderZoomView =\n/** @class */\nfunction (_super) {\n  __extends(SliderZoomView, _super);\n\n  function SliderZoomView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SliderZoomView.type;\n    _this._displayables = {};\n    return _this;\n  }\n\n  SliderZoomView.prototype.init = function (ecModel, api) {\n    this.api = api; // A unique handler for each dataZoom component\n\n    this._onBrush = bind(this._onBrush, this);\n    this._onBrushEnd = bind(this._onBrushEnd, this);\n  };\n\n  SliderZoomView.prototype.render = function (dataZoomModel, ecModel, api, payload) {\n    _super.prototype.render.apply(this, arguments);\n\n    throttle.createOrUpdate(this, '_dispatchZoomAction', dataZoomModel.get('throttle'), 'fixRate');\n    this._orient = dataZoomModel.getOrient();\n\n    if (dataZoomModel.get('show') === false) {\n      this.group.removeAll();\n      return;\n    }\n\n    if (dataZoomModel.noTarget()) {\n      this._clear();\n\n      this.group.removeAll();\n      return;\n    } // Notice: this._resetInterval() should not be executed when payload.type\n    // is 'dataZoom', origin this._range should be maintained, otherwise 'pan'\n    // or 'zoom' info will be missed because of 'throttle' of this.dispatchAction,\n\n\n    if (!payload || payload.type !== 'dataZoom' || payload.from !== this.uid) {\n      this._buildView();\n    }\n\n    this._updateView();\n  };\n\n  SliderZoomView.prototype.dispose = function () {\n    this._clear();\n\n    _super.prototype.dispose.apply(this, arguments);\n  };\n\n  SliderZoomView.prototype._clear = function () {\n    throttle.clear(this, '_dispatchZoomAction');\n    var zr = this.api.getZr();\n    zr.off('mousemove', this._onBrush);\n    zr.off('mouseup', this._onBrushEnd);\n  };\n\n  SliderZoomView.prototype._buildView = function () {\n    var thisGroup = this.group;\n    thisGroup.removeAll();\n    this._brushing = false;\n    this._displayables.brushRect = null;\n\n    this._resetLocation();\n\n    this._resetInterval();\n\n    var barGroup = this._displayables.sliderGroup = new graphic.Group();\n\n    this._renderBackground();\n\n    this._renderHandle();\n\n    this._renderDataShadow();\n\n    thisGroup.add(barGroup);\n\n    this._positionGroup();\n  };\n\n  SliderZoomView.prototype._resetLocation = function () {\n    var dataZoomModel = this.dataZoomModel;\n    var api = this.api;\n    var showMoveHandle = dataZoomModel.get('brushSelect');\n    var moveHandleSize = showMoveHandle ? DEFAULT_MOVE_HANDLE_SIZE : 0; // If some of x/y/width/height are not specified,\n    // auto-adapt according to target grid.\n\n    var coordRect = this._findCoordRect();\n\n    var ecSize = {\n      width: api.getWidth(),\n      height: api.getHeight()\n    }; // Default align by coordinate system rect.\n\n    var positionInfo = this._orient === HORIZONTAL ? {\n      // Why using 'right', because right should be used in vertical,\n      // and it is better to be consistent for dealing with position param merge.\n      right: ecSize.width - coordRect.x - coordRect.width,\n      top: ecSize.height - DEFAULT_FILLER_SIZE - DEFAULT_LOCATION_EDGE_GAP - moveHandleSize,\n      width: coordRect.width,\n      height: DEFAULT_FILLER_SIZE\n    } : {\n      right: DEFAULT_LOCATION_EDGE_GAP,\n      top: coordRect.y,\n      width: DEFAULT_FILLER_SIZE,\n      height: coordRect.height\n    }; // Do not write back to option and replace value 'ph', because\n    // the 'ph' value should be recalculated when resize.\n\n    var layoutParams = layout.getLayoutParams(dataZoomModel.option); // Replace the placeholder value.\n\n    each(['right', 'top', 'width', 'height'], function (name) {\n      if (layoutParams[name] === 'ph') {\n        layoutParams[name] = positionInfo[name];\n      }\n    });\n    var layoutRect = layout.getLayoutRect(layoutParams, ecSize);\n    this._location = {\n      x: layoutRect.x,\n      y: layoutRect.y\n    };\n    this._size = [layoutRect.width, layoutRect.height];\n    this._orient === VERTICAL && this._size.reverse();\n  };\n\n  SliderZoomView.prototype._positionGroup = function () {\n    var thisGroup = this.group;\n    var location = this._location;\n    var orient = this._orient; // Just use the first axis to determine mapping.\n\n    var targetAxisModel = this.dataZoomModel.getFirstTargetAxisModel();\n    var inverse = targetAxisModel && targetAxisModel.get('inverse');\n    var sliderGroup = this._displayables.sliderGroup;\n    var otherAxisInverse = (this._dataShadowInfo || {}).otherAxisInverse; // Transform barGroup.\n\n    sliderGroup.attr(orient === HORIZONTAL && !inverse ? {\n      scaleY: otherAxisInverse ? 1 : -1,\n      scaleX: 1\n    } : orient === HORIZONTAL && inverse ? {\n      scaleY: otherAxisInverse ? 1 : -1,\n      scaleX: -1\n    } : orient === VERTICAL && !inverse ? {\n      scaleY: otherAxisInverse ? -1 : 1,\n      scaleX: 1,\n      rotation: Math.PI / 2\n    } // Dont use Math.PI, considering shadow direction.\n    : {\n      scaleY: otherAxisInverse ? -1 : 1,\n      scaleX: -1,\n      rotation: Math.PI / 2\n    }); // Position barGroup\n\n    var rect = thisGroup.getBoundingRect([sliderGroup]);\n    thisGroup.x = location.x - rect.x;\n    thisGroup.y = location.y - rect.y;\n    thisGroup.markRedraw();\n  };\n\n  SliderZoomView.prototype._getViewExtent = function () {\n    return [0, this._size[0]];\n  };\n\n  SliderZoomView.prototype._renderBackground = function () {\n    var dataZoomModel = this.dataZoomModel;\n    var size = this._size;\n    var barGroup = this._displayables.sliderGroup;\n    var brushSelect = dataZoomModel.get('brushSelect');\n    barGroup.add(new Rect({\n      silent: true,\n      shape: {\n        x: 0,\n        y: 0,\n        width: size[0],\n        height: size[1]\n      },\n      style: {\n        fill: dataZoomModel.get('backgroundColor')\n      },\n      z2: -40\n    })); // Click panel, over shadow, below handles.\n\n    var clickPanel = new Rect({\n      shape: {\n        x: 0,\n        y: 0,\n        width: size[0],\n        height: size[1]\n      },\n      style: {\n        fill: 'transparent'\n      },\n      z2: 0,\n      onclick: bind(this._onClickPanel, this)\n    });\n    var zr = this.api.getZr();\n\n    if (brushSelect) {\n      clickPanel.on('mousedown', this._onBrushStart, this);\n      clickPanel.cursor = 'crosshair';\n      zr.on('mousemove', this._onBrush);\n      zr.on('mouseup', this._onBrushEnd);\n    } else {\n      zr.off('mousemove', this._onBrush);\n      zr.off('mouseup', this._onBrushEnd);\n    }\n\n    barGroup.add(clickPanel);\n  };\n\n  SliderZoomView.prototype._renderDataShadow = function () {\n    var info = this._dataShadowInfo = this._prepareDataShadowInfo();\n\n    this._displayables.dataShadowSegs = [];\n\n    if (!info) {\n      return;\n    }\n\n    var size = this._size;\n    var seriesModel = info.series;\n    var data = seriesModel.getRawData();\n    var otherDim = seriesModel.getShadowDim ? seriesModel.getShadowDim() // @see candlestick\n    : info.otherDim;\n\n    if (otherDim == null) {\n      return;\n    }\n\n    var otherDataExtent = data.getDataExtent(otherDim); // Nice extent.\n\n    var otherOffset = (otherDataExtent[1] - otherDataExtent[0]) * 0.3;\n    otherDataExtent = [otherDataExtent[0] - otherOffset, otherDataExtent[1] + otherOffset];\n    var otherShadowExtent = [0, size[1]];\n    var thisShadowExtent = [0, size[0]];\n    var areaPoints = [[size[0], 0], [0, 0]];\n    var linePoints = [];\n    var step = thisShadowExtent[1] / (data.count() - 1);\n    var thisCoord = 0; // Optimize for large data shadow\n\n    var stride = Math.round(data.count() / size[0]);\n    var lastIsEmpty;\n    data.each([otherDim], function (value, index) {\n      if (stride > 0 && index % stride) {\n        thisCoord += step;\n        return;\n      } // FIXME\n      // Should consider axis.min/axis.max when drawing dataShadow.\n      // FIXME\n      // list\n\n\n      var isEmpty = value == null || isNaN(value) || value === ''; // See #4235.\n\n      var otherCoord = isEmpty ? 0 : linearMap(value, otherDataExtent, otherShadowExtent, true); // Attempt to draw data shadow precisely when there are empty value.\n\n      if (isEmpty && !lastIsEmpty && index) {\n        areaPoints.push([areaPoints[areaPoints.length - 1][0], 0]);\n        linePoints.push([linePoints[linePoints.length - 1][0], 0]);\n      } else if (!isEmpty && lastIsEmpty) {\n        areaPoints.push([thisCoord, 0]);\n        linePoints.push([thisCoord, 0]);\n      }\n\n      areaPoints.push([thisCoord, otherCoord]);\n      linePoints.push([thisCoord, otherCoord]);\n      thisCoord += step;\n      lastIsEmpty = isEmpty;\n    });\n    var dataZoomModel = this.dataZoomModel;\n\n    function createDataShadowGroup(isSelectedArea) {\n      var model = dataZoomModel.getModel(isSelectedArea ? 'selectedDataBackground' : 'dataBackground');\n      var group = new graphic.Group();\n      var polygon = new graphic.Polygon({\n        shape: {\n          points: areaPoints\n        },\n        segmentIgnoreThreshold: 1,\n        style: model.getModel('areaStyle').getAreaStyle(),\n        silent: true,\n        z2: -20\n      });\n      var polyline = new graphic.Polyline({\n        shape: {\n          points: linePoints\n        },\n        segmentIgnoreThreshold: 1,\n        style: model.getModel('lineStyle').getLineStyle(),\n        silent: true,\n        z2: -19\n      });\n      group.add(polygon);\n      group.add(polyline);\n      return group;\n    } // let dataBackgroundModel = dataZoomModel.getModel('dataBackground');\n\n\n    for (var i = 0; i < 3; i++) {\n      var group = createDataShadowGroup(i === 1);\n\n      this._displayables.sliderGroup.add(group);\n\n      this._displayables.dataShadowSegs.push(group);\n    }\n  };\n\n  SliderZoomView.prototype._prepareDataShadowInfo = function () {\n    var dataZoomModel = this.dataZoomModel;\n    var showDataShadow = dataZoomModel.get('showDataShadow');\n\n    if (showDataShadow === false) {\n      return;\n    } // Find a representative series.\n\n\n    var result;\n    var ecModel = this.ecModel;\n    dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n      var seriesModels = dataZoomModel.getAxisProxy(axisDim, axisIndex).getTargetSeriesModels();\n      each(seriesModels, function (seriesModel) {\n        if (result) {\n          return;\n        }\n\n        if (showDataShadow !== true && indexOf(SHOW_DATA_SHADOW_SERIES_TYPE, seriesModel.get('type')) < 0) {\n          return;\n        }\n\n        var thisAxis = ecModel.getComponent(getAxisMainType(axisDim), axisIndex).axis;\n        var otherDim = getOtherDim(axisDim);\n        var otherAxisInverse;\n        var coordSys = seriesModel.coordinateSystem;\n\n        if (otherDim != null && coordSys.getOtherAxis) {\n          otherAxisInverse = coordSys.getOtherAxis(thisAxis).inverse;\n        }\n\n        otherDim = seriesModel.getData().mapDimension(otherDim);\n        result = {\n          thisAxis: thisAxis,\n          series: seriesModel,\n          thisDim: axisDim,\n          otherDim: otherDim,\n          otherAxisInverse: otherAxisInverse\n        };\n      }, this);\n    }, this);\n    return result;\n  };\n\n  SliderZoomView.prototype._renderHandle = function () {\n    var thisGroup = this.group;\n    var displayables = this._displayables;\n    var handles = displayables.handles = [null, null];\n    var handleLabels = displayables.handleLabels = [null, null];\n    var sliderGroup = this._displayables.sliderGroup;\n    var size = this._size;\n    var dataZoomModel = this.dataZoomModel;\n    var api = this.api;\n    var borderRadius = dataZoomModel.get('borderRadius') || 0;\n    var brushSelect = dataZoomModel.get('brushSelect');\n    var filler = displayables.filler = new Rect({\n      silent: brushSelect,\n      style: {\n        fill: dataZoomModel.get('fillerColor')\n      },\n      textConfig: {\n        position: 'inside'\n      }\n    });\n    sliderGroup.add(filler); // Frame border.\n\n    sliderGroup.add(new Rect({\n      silent: true,\n      subPixelOptimize: true,\n      shape: {\n        x: 0,\n        y: 0,\n        width: size[0],\n        height: size[1],\n        r: borderRadius\n      },\n      style: {\n        stroke: dataZoomModel.get('dataBackgroundColor') // deprecated option\n        || dataZoomModel.get('borderColor'),\n        lineWidth: DEFAULT_FRAME_BORDER_WIDTH,\n        fill: 'rgba(0,0,0,0)'\n      }\n    })); // Left and right handle to resize\n\n    each([0, 1], function (handleIndex) {\n      var iconStr = dataZoomModel.get('handleIcon');\n\n      if (!symbolBuildProxies[iconStr] && iconStr.indexOf('path://') < 0 && iconStr.indexOf('image://') < 0) {\n        // Compatitable with the old icon parsers. Which can use a path string without path://\n        iconStr = 'path://' + iconStr;\n\n        if (process.env.NODE_ENV !== 'production') {\n          deprecateLog('handleIcon now needs \\'path://\\' prefix when using a path string');\n        }\n      }\n\n      var path = createSymbol(iconStr, -1, 0, 2, 2, null, true);\n      path.attr({\n        cursor: getCursor(this._orient),\n        draggable: true,\n        drift: bind(this._onDragMove, this, handleIndex),\n        ondragend: bind(this._onDragEnd, this),\n        onmouseover: bind(this._showDataInfo, this, true),\n        onmouseout: bind(this._showDataInfo, this, false),\n        z2: 5\n      });\n      var bRect = path.getBoundingRect();\n      var handleSize = dataZoomModel.get('handleSize');\n      this._handleHeight = parsePercent(handleSize, this._size[1]);\n      this._handleWidth = bRect.width / bRect.height * this._handleHeight;\n      path.setStyle(dataZoomModel.getModel('handleStyle').getItemStyle());\n      path.style.strokeNoScale = true;\n      path.rectHover = true;\n      path.ensureState('emphasis').style = dataZoomModel.getModel(['emphasis', 'handleStyle']).getItemStyle();\n      enableHoverEmphasis(path);\n      var handleColor = dataZoomModel.get('handleColor'); // deprecated option\n      // Compatitable with previous version\n\n      if (handleColor != null) {\n        path.style.fill = handleColor;\n      }\n\n      sliderGroup.add(handles[handleIndex] = path);\n      var textStyleModel = dataZoomModel.getModel('textStyle');\n      thisGroup.add(handleLabels[handleIndex] = new graphic.Text({\n        silent: true,\n        invisible: true,\n        style: createTextStyle(textStyleModel, {\n          x: 0,\n          y: 0,\n          text: '',\n          verticalAlign: 'middle',\n          align: 'center',\n          fill: textStyleModel.getTextColor(),\n          font: textStyleModel.getFont()\n        }),\n        z2: 10\n      }));\n    }, this); // Handle to move. Only visible when brushSelect is set true.\n\n    var actualMoveZone = filler;\n\n    if (brushSelect) {\n      var moveHandleHeight = parsePercent(dataZoomModel.get('moveHandleSize'), size[1]);\n      var moveHandle_1 = displayables.moveHandle = new graphic.Rect({\n        style: dataZoomModel.getModel('moveHandleStyle').getItemStyle(),\n        silent: true,\n        shape: {\n          r: [0, 0, 2, 2],\n          y: size[1] - 0.5,\n          height: moveHandleHeight\n        }\n      });\n      var iconSize = moveHandleHeight * 0.8;\n      var moveHandleIcon = displayables.moveHandleIcon = createSymbol(dataZoomModel.get('moveHandleIcon'), -iconSize / 2, -iconSize / 2, iconSize, iconSize, '#fff', true);\n      moveHandleIcon.silent = true;\n      moveHandleIcon.y = size[1] + moveHandleHeight / 2 - 0.5;\n      moveHandle_1.ensureState('emphasis').style = dataZoomModel.getModel(['emphasis', 'moveHandleStyle']).getItemStyle();\n      var moveZoneExpandSize = Math.min(size[1] / 2, Math.max(moveHandleHeight, 10));\n      actualMoveZone = displayables.moveZone = new graphic.Rect({\n        invisible: true,\n        shape: {\n          y: size[1] - moveZoneExpandSize,\n          height: moveHandleHeight + moveZoneExpandSize\n        }\n      });\n      actualMoveZone.on('mouseover', function () {\n        api.enterEmphasis(moveHandle_1);\n      }).on('mouseout', function () {\n        api.leaveEmphasis(moveHandle_1);\n      });\n      sliderGroup.add(moveHandle_1);\n      sliderGroup.add(moveHandleIcon);\n      sliderGroup.add(actualMoveZone);\n    }\n\n    actualMoveZone.attr({\n      draggable: true,\n      cursor: getCursor(this._orient),\n      drift: bind(this._onDragMove, this, 'all'),\n      ondragstart: bind(this._showDataInfo, this, true),\n      ondragend: bind(this._onDragEnd, this),\n      onmouseover: bind(this._showDataInfo, this, true),\n      onmouseout: bind(this._showDataInfo, this, false)\n    });\n  };\n\n  SliderZoomView.prototype._resetInterval = function () {\n    var range = this._range = this.dataZoomModel.getPercentRange();\n\n    var viewExtent = this._getViewExtent();\n\n    this._handleEnds = [linearMap(range[0], [0, 100], viewExtent, true), linearMap(range[1], [0, 100], viewExtent, true)];\n  };\n\n  SliderZoomView.prototype._updateInterval = function (handleIndex, delta) {\n    var dataZoomModel = this.dataZoomModel;\n    var handleEnds = this._handleEnds;\n\n    var viewExtend = this._getViewExtent();\n\n    var minMaxSpan = dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();\n    var percentExtent = [0, 100];\n    sliderMove(delta, handleEnds, viewExtend, dataZoomModel.get('zoomLock') ? 'all' : handleIndex, minMaxSpan.minSpan != null ? linearMap(minMaxSpan.minSpan, percentExtent, viewExtend, true) : null, minMaxSpan.maxSpan != null ? linearMap(minMaxSpan.maxSpan, percentExtent, viewExtend, true) : null);\n    var lastRange = this._range;\n    var range = this._range = asc([linearMap(handleEnds[0], viewExtend, percentExtent, true), linearMap(handleEnds[1], viewExtend, percentExtent, true)]);\n    return !lastRange || lastRange[0] !== range[0] || lastRange[1] !== range[1];\n  };\n\n  SliderZoomView.prototype._updateView = function (nonRealtime) {\n    var displaybles = this._displayables;\n    var handleEnds = this._handleEnds;\n    var handleInterval = asc(handleEnds.slice());\n    var size = this._size;\n    each([0, 1], function (handleIndex) {\n      // Handles\n      var handle = displaybles.handles[handleIndex];\n      var handleHeight = this._handleHeight;\n      handle.attr({\n        scaleX: handleHeight / 2,\n        scaleY: handleHeight / 2,\n        // This is a trick, by adding an extra tiny offset to let the default handle's end point align to the drag window.\n        // NOTE: It may affect some custom shapes a bit. But we prefer to have better result by default.\n        x: handleEnds[handleIndex] + (handleIndex ? -1 : 1),\n        y: size[1] / 2 - handleHeight / 2\n      });\n    }, this); // Filler\n\n    displaybles.filler.setShape({\n      x: handleInterval[0],\n      y: 0,\n      width: handleInterval[1] - handleInterval[0],\n      height: size[1]\n    });\n    var viewExtent = {\n      x: handleInterval[0],\n      width: handleInterval[1] - handleInterval[0]\n    }; // Move handle\n\n    if (displaybles.moveHandle) {\n      displaybles.moveHandle.setShape(viewExtent);\n      displaybles.moveZone.setShape(viewExtent); // Force update path on the invisible object\n\n      displaybles.moveZone.getBoundingRect();\n      displaybles.moveHandleIcon && displaybles.moveHandleIcon.attr('x', viewExtent.x + viewExtent.width / 2);\n    } // update clip path of shadow.\n\n\n    var dataShadowSegs = displaybles.dataShadowSegs;\n    var segIntervals = [0, handleInterval[0], handleInterval[1], size[0]];\n\n    for (var i = 0; i < dataShadowSegs.length; i++) {\n      var segGroup = dataShadowSegs[i];\n      var clipPath = segGroup.getClipPath();\n\n      if (!clipPath) {\n        clipPath = new graphic.Rect();\n        segGroup.setClipPath(clipPath);\n      }\n\n      clipPath.setShape({\n        x: segIntervals[i],\n        y: 0,\n        width: segIntervals[i + 1] - segIntervals[i],\n        height: size[1]\n      });\n    }\n\n    this._updateDataInfo(nonRealtime);\n  };\n\n  SliderZoomView.prototype._updateDataInfo = function (nonRealtime) {\n    var dataZoomModel = this.dataZoomModel;\n    var displaybles = this._displayables;\n    var handleLabels = displaybles.handleLabels;\n    var orient = this._orient;\n    var labelTexts = ['', '']; // FIXME\n    // dateformatterautoformatterec2 date.getAutoFormatter\n\n    if (dataZoomModel.get('showDetail')) {\n      var axisProxy = dataZoomModel.findRepresentativeAxisProxy();\n\n      if (axisProxy) {\n        var axis = axisProxy.getAxisModel().axis;\n        var range = this._range;\n        var dataInterval = nonRealtime // See #4434, data and axis are not processed and reset yet in non-realtime mode.\n        ? axisProxy.calculateDataWindow({\n          start: range[0],\n          end: range[1]\n        }).valueWindow : axisProxy.getDataValueWindow();\n        labelTexts = [this._formatLabel(dataInterval[0], axis), this._formatLabel(dataInterval[1], axis)];\n      }\n    }\n\n    var orderedHandleEnds = asc(this._handleEnds.slice());\n    setLabel.call(this, 0);\n    setLabel.call(this, 1);\n\n    function setLabel(handleIndex) {\n      // Label\n      // Text should not transform by barGroup.\n      // Ignore handlers transform\n      var barTransform = graphic.getTransform(displaybles.handles[handleIndex].parent, this.group);\n      var direction = graphic.transformDirection(handleIndex === 0 ? 'right' : 'left', barTransform);\n      var offset = this._handleWidth / 2 + LABEL_GAP;\n      var textPoint = graphic.applyTransform([orderedHandleEnds[handleIndex] + (handleIndex === 0 ? -offset : offset), this._size[1] / 2], barTransform);\n      handleLabels[handleIndex].setStyle({\n        x: textPoint[0],\n        y: textPoint[1],\n        verticalAlign: orient === HORIZONTAL ? 'middle' : direction,\n        align: orient === HORIZONTAL ? direction : 'center',\n        text: labelTexts[handleIndex]\n      });\n    }\n  };\n\n  SliderZoomView.prototype._formatLabel = function (value, axis) {\n    var dataZoomModel = this.dataZoomModel;\n    var labelFormatter = dataZoomModel.get('labelFormatter');\n    var labelPrecision = dataZoomModel.get('labelPrecision');\n\n    if (labelPrecision == null || labelPrecision === 'auto') {\n      labelPrecision = axis.getPixelPrecision();\n    }\n\n    var valueStr = value == null || isNaN(value) ? '' // FIXME Glue code\n    : axis.type === 'category' || axis.type === 'time' ? axis.scale.getLabel({\n      value: Math.round(value)\n    }) // param of toFixed should less then 20.\n    : value.toFixed(Math.min(labelPrecision, 20));\n    return isFunction(labelFormatter) ? labelFormatter(value, valueStr) : isString(labelFormatter) ? labelFormatter.replace('{value}', valueStr) : valueStr;\n  };\n  /**\n   * @param showOrHide true: show, false: hide\n   */\n\n\n  SliderZoomView.prototype._showDataInfo = function (showOrHide) {\n    // Always show when drgging.\n    showOrHide = this._dragging || showOrHide;\n    var displayables = this._displayables;\n    var handleLabels = displayables.handleLabels;\n    handleLabels[0].attr('invisible', !showOrHide);\n    handleLabels[1].attr('invisible', !showOrHide); // Highlight move handle\n\n    displayables.moveHandle && this.api[showOrHide ? 'enterEmphasis' : 'leaveEmphasis'](displayables.moveHandle, 1);\n  };\n\n  SliderZoomView.prototype._onDragMove = function (handleIndex, dx, dy, event) {\n    this._dragging = true; // For mobile device, prevent screen slider on the button.\n\n    eventTool.stop(event.event); // Transform dx, dy to bar coordination.\n\n    var barTransform = this._displayables.sliderGroup.getLocalTransform();\n\n    var vertex = graphic.applyTransform([dx, dy], barTransform, true);\n\n    var changed = this._updateInterval(handleIndex, vertex[0]);\n\n    var realtime = this.dataZoomModel.get('realtime');\n\n    this._updateView(!realtime); // Avoid dispatch dataZoom repeatly but range not changed,\n    // which cause bad visual effect when progressive enabled.\n\n\n    changed && realtime && this._dispatchZoomAction(true);\n  };\n\n  SliderZoomView.prototype._onDragEnd = function () {\n    this._dragging = false;\n\n    this._showDataInfo(false); // While in realtime mode and stream mode, dispatch action when\n    // drag end will cause the whole view rerender, which is unnecessary.\n\n\n    var realtime = this.dataZoomModel.get('realtime');\n    !realtime && this._dispatchZoomAction(false);\n  };\n\n  SliderZoomView.prototype._onClickPanel = function (e) {\n    var size = this._size;\n\n    var localPoint = this._displayables.sliderGroup.transformCoordToLocal(e.offsetX, e.offsetY);\n\n    if (localPoint[0] < 0 || localPoint[0] > size[0] || localPoint[1] < 0 || localPoint[1] > size[1]) {\n      return;\n    }\n\n    var handleEnds = this._handleEnds;\n    var center = (handleEnds[0] + handleEnds[1]) / 2;\n\n    var changed = this._updateInterval('all', localPoint[0] - center);\n\n    this._updateView();\n\n    changed && this._dispatchZoomAction(false);\n  };\n\n  SliderZoomView.prototype._onBrushStart = function (e) {\n    var x = e.offsetX;\n    var y = e.offsetY;\n    this._brushStart = new graphic.Point(x, y);\n    this._brushing = true;\n    this._brushStartTime = +new Date(); // this._updateBrushRect(x, y);\n  };\n\n  SliderZoomView.prototype._onBrushEnd = function (e) {\n    if (!this._brushing) {\n      return;\n    }\n\n    var brushRect = this._displayables.brushRect;\n    this._brushing = false;\n\n    if (!brushRect) {\n      return;\n    }\n\n    brushRect.attr('ignore', true);\n    var brushShape = brushRect.shape;\n    var brushEndTime = +new Date(); // console.log(brushEndTime - this._brushStartTime);\n\n    if (brushEndTime - this._brushStartTime < 200 && Math.abs(brushShape.width) < 5) {\n      // Will treat it as a click\n      return;\n    }\n\n    var viewExtend = this._getViewExtent();\n\n    var percentExtent = [0, 100];\n    this._range = asc([linearMap(brushShape.x, viewExtend, percentExtent, true), linearMap(brushShape.x + brushShape.width, viewExtend, percentExtent, true)]);\n    this._handleEnds = [brushShape.x, brushShape.x + brushShape.width];\n\n    this._updateView();\n\n    this._dispatchZoomAction(false);\n  };\n\n  SliderZoomView.prototype._onBrush = function (e) {\n    if (this._brushing) {\n      // For mobile device, prevent screen slider on the button.\n      eventTool.stop(e.event);\n\n      this._updateBrushRect(e.offsetX, e.offsetY);\n    }\n  };\n\n  SliderZoomView.prototype._updateBrushRect = function (mouseX, mouseY) {\n    var displayables = this._displayables;\n    var dataZoomModel = this.dataZoomModel;\n    var brushRect = displayables.brushRect;\n\n    if (!brushRect) {\n      brushRect = displayables.brushRect = new Rect({\n        silent: true,\n        style: dataZoomModel.getModel('brushStyle').getItemStyle()\n      });\n      displayables.sliderGroup.add(brushRect);\n    }\n\n    brushRect.attr('ignore', false);\n    var brushStart = this._brushStart;\n    var sliderGroup = this._displayables.sliderGroup;\n    var endPoint = sliderGroup.transformCoordToLocal(mouseX, mouseY);\n    var startPoint = sliderGroup.transformCoordToLocal(brushStart.x, brushStart.y);\n    var size = this._size;\n    endPoint[0] = Math.max(Math.min(size[0], endPoint[0]), 0);\n    brushRect.setShape({\n      x: startPoint[0],\n      y: 0,\n      width: endPoint[0] - startPoint[0],\n      height: size[1]\n    });\n  };\n  /**\n   * This action will be throttled.\n   */\n\n\n  SliderZoomView.prototype._dispatchZoomAction = function (realtime) {\n    var range = this._range;\n    this.api.dispatchAction({\n      type: 'dataZoom',\n      from: this.uid,\n      dataZoomId: this.dataZoomModel.id,\n      animation: realtime ? REALTIME_ANIMATION_CONFIG : null,\n      start: range[0],\n      end: range[1]\n    });\n  };\n\n  SliderZoomView.prototype._findCoordRect = function () {\n    // Find the grid coresponding to the first axis referred by dataZoom.\n    var rect;\n    var coordSysInfoList = collectReferCoordSysModelInfo(this.dataZoomModel).infoList;\n\n    if (!rect && coordSysInfoList.length) {\n      var coordSys = coordSysInfoList[0].model.coordinateSystem;\n      rect = coordSys.getRect && coordSys.getRect();\n    }\n\n    if (!rect) {\n      var width = this.api.getWidth();\n      var height = this.api.getHeight();\n      rect = {\n        x: width * 0.2,\n        y: height * 0.2,\n        width: width * 0.6,\n        height: height * 0.6\n      };\n    }\n\n    return rect;\n  };\n\n  SliderZoomView.type = 'dataZoom.slider';\n  return SliderZoomView;\n}(DataZoomView);\n\nfunction getOtherDim(thisDim) {\n  // FIXME\n  // getOtherAxis\n  var map = {\n    x: 'y',\n    y: 'x',\n    radius: 'angle',\n    angle: 'radius'\n  };\n  return map[thisDim];\n}\n\nfunction getCursor(orient) {\n  return orient === 'vertical' ? 'ns-resize' : 'ew-resize';\n}\n\nexport default SliderZoomView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport SliderZoomModel from './SliderZoomModel';\nimport SliderZoomView from './SliderZoomView';\nimport installCommon from './installCommon';\nexport function install(registers) {\n  registers.registerComponentModel(SliderZoomModel);\n  registers.registerComponentView(SliderZoomView);\n  installCommon(registers);\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @file Visual mapping.\n */\nimport * as zrUtil from 'zrender/lib/core/util';\nvar visualDefault = {\n  /**\n   * @public\n   */\n  get: function get(visualType, key, isCategory) {\n    var value = zrUtil.clone((defaultOption[visualType] || {})[key]);\n    return isCategory ? zrUtil.isArray(value) ? value[value.length - 1] : value : value;\n  }\n};\nvar defaultOption = {\n  color: {\n    active: ['#006edd', '#e0ffff'],\n    inactive: ['rgba(0,0,0,0)']\n  },\n  colorHue: {\n    active: [0, 360],\n    inactive: [0, 0]\n  },\n  colorSaturation: {\n    active: [0.3, 1],\n    inactive: [0, 0]\n  },\n  colorLightness: {\n    active: [0.9, 0.5],\n    inactive: [0, 0]\n  },\n  colorAlpha: {\n    active: [0.3, 1],\n    inactive: [0, 0]\n  },\n  opacity: {\n    active: [0.3, 1],\n    inactive: [0, 0]\n  },\n  symbol: {\n    active: ['circle', 'roundRect', 'diamond'],\n    inactive: ['none']\n  },\n  symbolSize: {\n    active: [10, 50],\n    inactive: [0, 0]\n  }\n};\nexport default visualDefault;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport env from 'zrender/lib/core/env';\nimport visualDefault from '../../visual/visualDefault';\nimport VisualMapping from '../../visual/VisualMapping';\nimport * as visualSolution from '../../visual/visualSolution';\nimport * as modelUtil from '../../util/model';\nimport * as numberUtil from '../../util/number';\nimport ComponentModel from '../../model/Component';\nvar mapVisual = VisualMapping.mapVisual;\nvar eachVisual = VisualMapping.eachVisual;\nvar isArray = zrUtil.isArray;\nvar each = zrUtil.each;\nvar asc = numberUtil.asc;\nvar linearMap = numberUtil.linearMap;\n\nvar VisualMapModel =\n/** @class */\nfunction (_super) {\n  __extends(VisualMapModel, _super);\n\n  function VisualMapModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = VisualMapModel.type;\n    _this.stateList = ['inRange', 'outOfRange'];\n    _this.replacableOptionKeys = ['inRange', 'outOfRange', 'target', 'controller', 'color'];\n    _this.layoutMode = {\n      type: 'box',\n      ignoreSize: true\n    };\n    /**\n     * [lowerBound, upperBound]\n     */\n\n    _this.dataBound = [-Infinity, Infinity];\n    _this.targetVisuals = {};\n    _this.controllerVisuals = {};\n    return _this;\n  }\n\n  VisualMapModel.prototype.init = function (option, parentModel, ecModel) {\n    this.mergeDefaultAndTheme(option, ecModel);\n  };\n  /**\n   * @protected\n   */\n\n\n  VisualMapModel.prototype.optionUpdated = function (newOption, isInit) {\n    var thisOption = this.option; // FIXME\n    // necessary?\n    // Disable realtime view update if canvas is not supported.\n\n    if (!env.canvasSupported) {\n      thisOption.realtime = false;\n    }\n\n    !isInit && visualSolution.replaceVisualOption(thisOption, newOption, this.replacableOptionKeys);\n    this.textStyleModel = this.getModel('textStyle');\n    this.resetItemSize();\n    this.completeVisualOption();\n  };\n  /**\n   * @protected\n   */\n\n\n  VisualMapModel.prototype.resetVisual = function (supplementVisualOption) {\n    var stateList = this.stateList;\n    supplementVisualOption = zrUtil.bind(supplementVisualOption, this);\n    this.controllerVisuals = visualSolution.createVisualMappings(this.option.controller, stateList, supplementVisualOption);\n    this.targetVisuals = visualSolution.createVisualMappings(this.option.target, stateList, supplementVisualOption);\n  };\n  /**\n   * @public\n   */\n\n\n  VisualMapModel.prototype.getItemSymbol = function () {\n    return null;\n  };\n  /**\n   * @protected\n   * @return {Array.<number>} An array of series indices.\n   */\n\n\n  VisualMapModel.prototype.getTargetSeriesIndices = function () {\n    var optionSeriesIndex = this.option.seriesIndex;\n    var seriesIndices = [];\n\n    if (optionSeriesIndex == null || optionSeriesIndex === 'all') {\n      this.ecModel.eachSeries(function (seriesModel, index) {\n        seriesIndices.push(index);\n      });\n    } else {\n      seriesIndices = modelUtil.normalizeToArray(optionSeriesIndex);\n    }\n\n    return seriesIndices;\n  };\n  /**\n   * @public\n   */\n\n\n  VisualMapModel.prototype.eachTargetSeries = function (callback, context) {\n    zrUtil.each(this.getTargetSeriesIndices(), function (seriesIndex) {\n      var seriesModel = this.ecModel.getSeriesByIndex(seriesIndex);\n\n      if (seriesModel) {\n        callback.call(context, seriesModel);\n      }\n    }, this);\n  };\n  /**\n   * @pubilc\n   */\n\n\n  VisualMapModel.prototype.isTargetSeries = function (seriesModel) {\n    var is = false;\n    this.eachTargetSeries(function (model) {\n      model === seriesModel && (is = true);\n    });\n    return is;\n  };\n  /**\n   * @example\n   * this.formatValueText(someVal); // format single numeric value to text.\n   * this.formatValueText(someVal, true); // format single category value to text.\n   * this.formatValueText([min, max]); // format numeric min-max to text.\n   * this.formatValueText([this.dataBound[0], max]); // using data lower bound.\n   * this.formatValueText([min, this.dataBound[1]]); // using data upper bound.\n   *\n   * @param value Real value, or this.dataBound[0 or 1].\n   * @param isCategory Only available when value is number.\n   * @param edgeSymbols Open-close symbol when value is interval.\n   * @protected\n   */\n\n\n  VisualMapModel.prototype.formatValueText = function (value, isCategory, edgeSymbols) {\n    var option = this.option;\n    var precision = option.precision;\n    var dataBound = this.dataBound;\n    var formatter = option.formatter;\n    var isMinMax;\n    edgeSymbols = edgeSymbols || ['<', '>'];\n\n    if (zrUtil.isArray(value)) {\n      value = value.slice();\n      isMinMax = true;\n    }\n\n    var textValue = isCategory ? value // Value is string when isCategory\n    : isMinMax ? [toFixed(value[0]), toFixed(value[1])] : toFixed(value);\n\n    if (zrUtil.isString(formatter)) {\n      return formatter.replace('{value}', isMinMax ? textValue[0] : textValue).replace('{value2}', isMinMax ? textValue[1] : textValue);\n    } else if (zrUtil.isFunction(formatter)) {\n      return isMinMax ? formatter(value[0], value[1]) : formatter(value);\n    }\n\n    if (isMinMax) {\n      if (value[0] === dataBound[0]) {\n        return edgeSymbols[0] + ' ' + textValue[1];\n      } else if (value[1] === dataBound[1]) {\n        return edgeSymbols[1] + ' ' + textValue[0];\n      } else {\n        return textValue[0] + ' - ' + textValue[1];\n      }\n    } else {\n      // Format single value (includes category case).\n      return textValue;\n    }\n\n    function toFixed(val) {\n      return val === dataBound[0] ? 'min' : val === dataBound[1] ? 'max' : (+val).toFixed(Math.min(precision, 20));\n    }\n  };\n  /**\n   * @protected\n   */\n\n\n  VisualMapModel.prototype.resetExtent = function () {\n    var thisOption = this.option; // Can not calculate data extent by data here.\n    // Because series and data may be modified in processing stage.\n    // So we do not support the feature \"auto min/max\".\n\n    var extent = asc([thisOption.min, thisOption.max]);\n    this._dataExtent = extent;\n  };\n  /**\n   * PENDING:\n   * delete this method if no outer usage.\n   *\n   * Return  Concrete dimention. If return null/undefined, no dimension used.\n   */\n  // getDataDimension(data: SeriesData) {\n  //     const optDim = this.option.dimension;\n  //     if (optDim != null) {\n  //         return data.getDimension(optDim);\n  //     }\n  //     const dimNames = data.dimensions;\n  //     for (let i = dimNames.length - 1; i >= 0; i--) {\n  //         const dimName = dimNames[i];\n  //         const dimInfo = data.getDimensionInfo(dimName);\n  //         if (!dimInfo.isCalculationCoord) {\n  //             return dimName;\n  //         }\n  //     }\n  // }\n\n\n  VisualMapModel.prototype.getDataDimensionIndex = function (data) {\n    var optDim = this.option.dimension;\n\n    if (optDim != null) {\n      return data.getDimensionIndex(optDim);\n    }\n\n    var dimNames = data.dimensions;\n\n    for (var i = dimNames.length - 1; i >= 0; i--) {\n      var dimName = dimNames[i];\n      var dimInfo = data.getDimensionInfo(dimName);\n\n      if (!dimInfo.isCalculationCoord) {\n        return dimInfo.storeDimIndex;\n      }\n    }\n  };\n\n  VisualMapModel.prototype.getExtent = function () {\n    return this._dataExtent.slice();\n  };\n\n  VisualMapModel.prototype.completeVisualOption = function () {\n    var ecModel = this.ecModel;\n    var thisOption = this.option;\n    var base = {\n      inRange: thisOption.inRange,\n      outOfRange: thisOption.outOfRange\n    };\n    var target = thisOption.target || (thisOption.target = {});\n    var controller = thisOption.controller || (thisOption.controller = {});\n    zrUtil.merge(target, base); // Do not override\n\n    zrUtil.merge(controller, base); // Do not override\n\n    var isCategory = this.isCategory();\n    completeSingle.call(this, target);\n    completeSingle.call(this, controller);\n    completeInactive.call(this, target, 'inRange', 'outOfRange'); // completeInactive.call(this, target, 'outOfRange', 'inRange');\n\n    completeController.call(this, controller);\n\n    function completeSingle(base) {\n      // Compatible with ec2 dataRange.color.\n      // The mapping order of dataRange.color is: [high value, ..., low value]\n      // whereas inRange.color and outOfRange.color is [low value, ..., high value]\n      // Notice: ec2 has no inverse.\n      if (isArray(thisOption.color) // If there has been inRange: {symbol: ...}, adding color is a mistake.\n      // So adding color only when no inRange defined.\n      && !base.inRange) {\n        base.inRange = {\n          color: thisOption.color.slice().reverse()\n        };\n      } // Compatible with previous logic, always give a defautl color, otherwise\n      // simple config with no inRange and outOfRange will not work.\n      // Originally we use visualMap.color as the default color, but setOption at\n      // the second time the default color will be erased. So we change to use\n      // constant DEFAULT_COLOR.\n      // If user do not want the default color, set inRange: {color: null}.\n\n\n      base.inRange = base.inRange || {\n        color: ecModel.get('gradientColor')\n      };\n    }\n\n    function completeInactive(base, stateExist, stateAbsent) {\n      var optExist = base[stateExist];\n      var optAbsent = base[stateAbsent];\n\n      if (optExist && !optAbsent) {\n        optAbsent = base[stateAbsent] = {};\n        each(optExist, function (visualData, visualType) {\n          if (!VisualMapping.isValidType(visualType)) {\n            return;\n          }\n\n          var defa = visualDefault.get(visualType, 'inactive', isCategory);\n\n          if (defa != null) {\n            optAbsent[visualType] = defa; // Compatibable with ec2:\n            // Only inactive color to rgba(0,0,0,0) can not\n            // make label transparent, so use opacity also.\n\n            if (visualType === 'color' && !optAbsent.hasOwnProperty('opacity') && !optAbsent.hasOwnProperty('colorAlpha')) {\n              optAbsent.opacity = [0, 0];\n            }\n          }\n        });\n      }\n    }\n\n    function completeController(controller) {\n      var symbolExists = (controller.inRange || {}).symbol || (controller.outOfRange || {}).symbol;\n      var symbolSizeExists = (controller.inRange || {}).symbolSize || (controller.outOfRange || {}).symbolSize;\n      var inactiveColor = this.get('inactiveColor');\n      var itemSymbol = this.getItemSymbol();\n      var defaultSymbol = itemSymbol || 'roundRect';\n      each(this.stateList, function (state) {\n        var itemSize = this.itemSize;\n        var visuals = controller[state]; // Set inactive color for controller if no other color\n        // attr (like colorAlpha) specified.\n\n        if (!visuals) {\n          visuals = controller[state] = {\n            color: isCategory ? inactiveColor : [inactiveColor]\n          };\n        } // Consistent symbol and symbolSize if not specified.\n\n\n        if (visuals.symbol == null) {\n          visuals.symbol = symbolExists && zrUtil.clone(symbolExists) || (isCategory ? defaultSymbol : [defaultSymbol]);\n        }\n\n        if (visuals.symbolSize == null) {\n          visuals.symbolSize = symbolSizeExists && zrUtil.clone(symbolSizeExists) || (isCategory ? itemSize[0] : [itemSize[0], itemSize[0]]);\n        } // Filter none\n\n\n        visuals.symbol = mapVisual(visuals.symbol, function (symbol) {\n          return symbol === 'none' ? defaultSymbol : symbol;\n        }); // Normalize symbolSize\n\n        var symbolSize = visuals.symbolSize;\n\n        if (symbolSize != null) {\n          var max_1 = -Infinity; // symbolSize can be object when categories defined.\n\n          eachVisual(symbolSize, function (value) {\n            value > max_1 && (max_1 = value);\n          });\n          visuals.symbolSize = mapVisual(symbolSize, function (value) {\n            return linearMap(value, [0, max_1], [0, itemSize[0]], true);\n          });\n        }\n      }, this);\n    }\n  };\n\n  VisualMapModel.prototype.resetItemSize = function () {\n    this.itemSize = [parseFloat(this.get('itemWidth')), parseFloat(this.get('itemHeight'))];\n  };\n\n  VisualMapModel.prototype.isCategory = function () {\n    return !!this.option.categories;\n  };\n  /**\n   * @public\n   * @abstract\n   */\n\n\n  VisualMapModel.prototype.setSelected = function (selected) {};\n\n  VisualMapModel.prototype.getSelected = function () {\n    return null;\n  };\n  /**\n   * @public\n   * @abstract\n   */\n\n\n  VisualMapModel.prototype.getValueState = function (value) {\n    return null;\n  };\n  /**\n   * FIXME\n   * Do not publish to thirt-part-dev temporarily\n   * util the interface is stable. (Should it return\n   * a function but not visual meta?)\n   *\n   * @pubilc\n   * @abstract\n   * @param getColorVisual\n   *        params: value, valueState\n   *        return: color\n   * @return {Object} visualMeta\n   *        should includes {stops, outerColors}\n   *        outerColor means [colorBeyondMinValue, colorBeyondMaxValue]\n   */\n\n\n  VisualMapModel.prototype.getVisualMeta = function (getColorVisual) {\n    return null;\n  };\n\n  VisualMapModel.type = 'visualMap';\n  VisualMapModel.dependencies = ['series'];\n  VisualMapModel.defaultOption = {\n    show: true,\n    zlevel: 0,\n    z: 4,\n    seriesIndex: 'all',\n    min: 0,\n    max: 200,\n    left: 0,\n    right: null,\n    top: null,\n    bottom: 0,\n    itemWidth: null,\n    itemHeight: null,\n    inverse: false,\n    orient: 'vertical',\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderColor: '#ccc',\n    contentColor: '#5793f3',\n    inactiveColor: '#aaa',\n    borderWidth: 0,\n    padding: 5,\n    // css\n    textGap: 10,\n    precision: 0,\n    textStyle: {\n      color: '#333' // \n\n    }\n  };\n  return VisualMapModel;\n}(ComponentModel);\n\nexport default VisualMapModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport VisualMapModel from './VisualMapModel';\nimport * as numberUtil from '../../util/number';\nimport { inheritDefaultOption } from '../../util/component'; // Constant\n\nvar DEFAULT_BAR_BOUND = [20, 140];\n\nvar ContinuousModel =\n/** @class */\nfunction (_super) {\n  __extends(ContinuousModel, _super);\n\n  function ContinuousModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ContinuousModel.type;\n    return _this;\n  }\n  /**\n   * @override\n   */\n\n\n  ContinuousModel.prototype.optionUpdated = function (newOption, isInit) {\n    _super.prototype.optionUpdated.apply(this, arguments);\n\n    this.resetExtent();\n    this.resetVisual(function (mappingOption) {\n      mappingOption.mappingMethod = 'linear';\n      mappingOption.dataExtent = this.getExtent();\n    });\n\n    this._resetRange();\n  };\n  /**\n   * @protected\n   * @override\n   */\n\n\n  ContinuousModel.prototype.resetItemSize = function () {\n    _super.prototype.resetItemSize.apply(this, arguments);\n\n    var itemSize = this.itemSize;\n    (itemSize[0] == null || isNaN(itemSize[0])) && (itemSize[0] = DEFAULT_BAR_BOUND[0]);\n    (itemSize[1] == null || isNaN(itemSize[1])) && (itemSize[1] = DEFAULT_BAR_BOUND[1]);\n  };\n  /**\n   * @private\n   */\n\n\n  ContinuousModel.prototype._resetRange = function () {\n    var dataExtent = this.getExtent();\n    var range = this.option.range;\n\n    if (!range || range.auto) {\n      // `range` should always be array (so we dont use other\n      // value like 'auto') for user-friend. (consider getOption).\n      dataExtent.auto = 1;\n      this.option.range = dataExtent;\n    } else if (zrUtil.isArray(range)) {\n      if (range[0] > range[1]) {\n        range.reverse();\n      }\n\n      range[0] = Math.max(range[0], dataExtent[0]);\n      range[1] = Math.min(range[1], dataExtent[1]);\n    }\n  };\n  /**\n   * @protected\n   * @override\n   */\n\n\n  ContinuousModel.prototype.completeVisualOption = function () {\n    _super.prototype.completeVisualOption.apply(this, arguments);\n\n    zrUtil.each(this.stateList, function (state) {\n      var symbolSize = this.option.controller[state].symbolSize;\n\n      if (symbolSize && symbolSize[0] !== symbolSize[1]) {\n        symbolSize[0] = symbolSize[1] / 3; // For good looking.\n      }\n    }, this);\n  };\n  /**\n   * @override\n   */\n\n\n  ContinuousModel.prototype.setSelected = function (selected) {\n    this.option.range = selected.slice();\n\n    this._resetRange();\n  };\n  /**\n   * @public\n   */\n\n\n  ContinuousModel.prototype.getSelected = function () {\n    var dataExtent = this.getExtent();\n    var dataInterval = numberUtil.asc((this.get('range') || []).slice()); // Clamp\n\n    dataInterval[0] > dataExtent[1] && (dataInterval[0] = dataExtent[1]);\n    dataInterval[1] > dataExtent[1] && (dataInterval[1] = dataExtent[1]);\n    dataInterval[0] < dataExtent[0] && (dataInterval[0] = dataExtent[0]);\n    dataInterval[1] < dataExtent[0] && (dataInterval[1] = dataExtent[0]);\n    return dataInterval;\n  };\n  /**\n   * @override\n   */\n\n\n  ContinuousModel.prototype.getValueState = function (value) {\n    var range = this.option.range;\n    var dataExtent = this.getExtent(); // When range[0] === dataExtent[0], any value larger than dataExtent[0] maps to 'inRange'.\n    // range[1] is processed likewise.\n\n    return (range[0] <= dataExtent[0] || range[0] <= value) && (range[1] >= dataExtent[1] || value <= range[1]) ? 'inRange' : 'outOfRange';\n  };\n\n  ContinuousModel.prototype.findTargetDataIndices = function (range) {\n    var result = [];\n    this.eachTargetSeries(function (seriesModel) {\n      var dataIndices = [];\n      var data = seriesModel.getData();\n      data.each(this.getDataDimensionIndex(data), function (value, dataIndex) {\n        range[0] <= value && value <= range[1] && dataIndices.push(dataIndex);\n      }, this);\n      result.push({\n        seriesId: seriesModel.id,\n        dataIndex: dataIndices\n      });\n    }, this);\n    return result;\n  };\n  /**\n   * @implement\n   */\n\n\n  ContinuousModel.prototype.getVisualMeta = function (getColorVisual) {\n    var oVals = getColorStopValues(this, 'outOfRange', this.getExtent());\n    var iVals = getColorStopValues(this, 'inRange', this.option.range.slice());\n    var stops = [];\n\n    function setStop(value, valueState) {\n      stops.push({\n        value: value,\n        color: getColorVisual(value, valueState)\n      });\n    } // Format to: outOfRange -- inRange -- outOfRange.\n\n\n    var iIdx = 0;\n    var oIdx = 0;\n    var iLen = iVals.length;\n    var oLen = oVals.length;\n\n    for (; oIdx < oLen && (!iVals.length || oVals[oIdx] <= iVals[0]); oIdx++) {\n      // If oVal[oIdx] === iVals[iIdx], oVal[oIdx] should be ignored.\n      if (oVals[oIdx] < iVals[iIdx]) {\n        setStop(oVals[oIdx], 'outOfRange');\n      }\n    }\n\n    for (var first = 1; iIdx < iLen; iIdx++, first = 0) {\n      // If range is full, value beyond min, max will be clamped.\n      // make a singularity\n      first && stops.length && setStop(iVals[iIdx], 'outOfRange');\n      setStop(iVals[iIdx], 'inRange');\n    }\n\n    for (var first = 1; oIdx < oLen; oIdx++) {\n      if (!iVals.length || iVals[iVals.length - 1] < oVals[oIdx]) {\n        // make a singularity\n        if (first) {\n          stops.length && setStop(stops[stops.length - 1].value, 'outOfRange');\n          first = 0;\n        }\n\n        setStop(oVals[oIdx], 'outOfRange');\n      }\n    }\n\n    var stopsLen = stops.length;\n    return {\n      stops: stops,\n      outerColors: [stopsLen ? stops[0].color : 'transparent', stopsLen ? stops[stopsLen - 1].color : 'transparent']\n    };\n  };\n\n  ContinuousModel.type = 'visualMap.continuous';\n  ContinuousModel.defaultOption = inheritDefaultOption(VisualMapModel.defaultOption, {\n    align: 'auto',\n    calculable: false,\n    hoverLink: true,\n    realtime: true,\n    handleIcon: 'path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z',\n    handleSize: '120%',\n    handleStyle: {\n      borderColor: '#fff',\n      borderWidth: 1\n    },\n    indicatorIcon: 'circle',\n    indicatorSize: '50%',\n    indicatorStyle: {\n      borderColor: '#fff',\n      borderWidth: 2,\n      shadowBlur: 2,\n      shadowOffsetX: 1,\n      shadowOffsetY: 1,\n      shadowColor: 'rgba(0,0,0,0.2)'\n    } // emphasis: {\n    //     handleStyle: {\n    //         shadowBlur: 3,\n    //         shadowOffsetX: 1,\n    //         shadowOffsetY: 1,\n    //         shadowColor: 'rgba(0,0,0,0.2)'\n    //     }\n    // }\n\n  });\n  return ContinuousModel;\n}(VisualMapModel);\n\nfunction getColorStopValues(visualMapModel, valueState, dataExtent) {\n  if (dataExtent[0] === dataExtent[1]) {\n    return dataExtent.slice();\n  } // When using colorHue mapping, it is not linear color any more.\n  // Moreover, canvas gradient seems not to be accurate linear.\n  // FIXME\n  // Should be arbitrary value 100? or based on pixel size?\n\n\n  var count = 200;\n  var step = (dataExtent[1] - dataExtent[0]) / count;\n  var value = dataExtent[0];\n  var stopValues = [];\n\n  for (var i = 0; i <= count && value < dataExtent[1]; i++) {\n    stopValues.push(value);\n    value += step;\n  }\n\n  stopValues.push(dataExtent[1]);\n  return stopValues;\n}\n\nexport default ContinuousModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { Rect } from '../../util/graphic';\nimport * as formatUtil from '../../util/format';\nimport * as layout from '../../util/layout';\nimport VisualMapping from '../../visual/VisualMapping';\nimport ComponentView from '../../view/Component';\n\nvar VisualMapView =\n/** @class */\nfunction (_super) {\n  __extends(VisualMapView, _super);\n\n  function VisualMapView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = VisualMapView.type;\n    _this.autoPositionValues = {\n      left: 1,\n      right: 1,\n      top: 1,\n      bottom: 1\n    };\n    return _this;\n  }\n\n  VisualMapView.prototype.init = function (ecModel, api) {\n    this.ecModel = ecModel;\n    this.api = api;\n  };\n  /**\n   * @protected\n   */\n\n\n  VisualMapView.prototype.render = function (visualMapModel, ecModel, api, payload // TODO: TYPE\n  ) {\n    this.visualMapModel = visualMapModel;\n\n    if (visualMapModel.get('show') === false) {\n      this.group.removeAll();\n      return;\n    }\n\n    this.doRender(visualMapModel, ecModel, api, payload);\n  };\n  /**\n   * @protected\n   */\n\n\n  VisualMapView.prototype.renderBackground = function (group) {\n    var visualMapModel = this.visualMapModel;\n    var padding = formatUtil.normalizeCssArray(visualMapModel.get('padding') || 0);\n    var rect = group.getBoundingRect();\n    group.add(new Rect({\n      z2: -1,\n      silent: true,\n      shape: {\n        x: rect.x - padding[3],\n        y: rect.y - padding[0],\n        width: rect.width + padding[3] + padding[1],\n        height: rect.height + padding[0] + padding[2]\n      },\n      style: {\n        fill: visualMapModel.get('backgroundColor'),\n        stroke: visualMapModel.get('borderColor'),\n        lineWidth: visualMapModel.get('borderWidth')\n      }\n    }));\n  };\n  /**\n   * @protected\n   * @param targetValue can be Infinity or -Infinity\n   * @param visualCluster Only can be 'color' 'opacity' 'symbol' 'symbolSize'\n   * @param opts\n   * @param opts.forceState Specify state, instead of using getValueState method.\n   * @param opts.convertOpacityToAlpha For color gradient in controller widget.\n   * @return {*} Visual value.\n   */\n\n\n  VisualMapView.prototype.getControllerVisual = function (targetValue, visualCluster, opts) {\n    opts = opts || {};\n    var forceState = opts.forceState;\n    var visualMapModel = this.visualMapModel;\n    var visualObj = {}; // Default values.\n\n    if (visualCluster === 'color') {\n      var defaultColor = visualMapModel.get('contentColor');\n      visualObj.color = defaultColor;\n    }\n\n    function getter(key) {\n      return visualObj[key];\n    }\n\n    function setter(key, value) {\n      visualObj[key] = value;\n    }\n\n    var mappings = visualMapModel.controllerVisuals[forceState || visualMapModel.getValueState(targetValue)];\n    var visualTypes = VisualMapping.prepareVisualTypes(mappings);\n    zrUtil.each(visualTypes, function (type) {\n      var visualMapping = mappings[type];\n\n      if (opts.convertOpacityToAlpha && type === 'opacity') {\n        type = 'colorAlpha';\n        visualMapping = mappings.__alphaForOpacity;\n      }\n\n      if (VisualMapping.dependsOn(type, visualCluster)) {\n        visualMapping && visualMapping.applyVisual(targetValue, getter, setter);\n      }\n    });\n    return visualObj[visualCluster];\n  };\n\n  VisualMapView.prototype.positionGroup = function (group) {\n    var model = this.visualMapModel;\n    var api = this.api;\n    layout.positionElement(group, model.getBoxLayoutParams(), {\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n  };\n\n  VisualMapView.prototype.doRender = function (visualMapModel, ecModel, api, payload) {};\n\n  VisualMapView.type = 'visualMap';\n  return VisualMapView;\n}(ComponentView);\n\nexport default VisualMapView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { getLayoutRect } from '../../util/layout';\nvar paramsSet = [['left', 'right', 'width'], ['top', 'bottom', 'height']];\n/**\n * @param visualMapModel\n * @param api\n * @param itemSize always [short, long]\n * @return {string} 'left' or 'right' or 'top' or 'bottom'\n */\n\nexport function getItemAlign(visualMapModel, api, itemSize) {\n  var modelOption = visualMapModel.option;\n  var itemAlign = modelOption.align;\n\n  if (itemAlign != null && itemAlign !== 'auto') {\n    return itemAlign;\n  } // Auto decision align.\n\n\n  var ecSize = {\n    width: api.getWidth(),\n    height: api.getHeight()\n  };\n  var realIndex = modelOption.orient === 'horizontal' ? 1 : 0;\n  var reals = paramsSet[realIndex];\n  var fakeValue = [0, null, 10];\n  var layoutInput = {};\n\n  for (var i = 0; i < 3; i++) {\n    layoutInput[paramsSet[1 - realIndex][i]] = fakeValue[i];\n    layoutInput[reals[i]] = i === 2 ? itemSize[0] : modelOption[reals[i]];\n  }\n\n  var rParam = [['x', 'width', 3], ['y', 'height', 0]][realIndex];\n  var rect = getLayoutRect(layoutInput, ecSize, modelOption.padding);\n  return reals[(rect.margin[rParam[2]] || 0) + rect[rParam[0]] + rect[rParam[1]] * 0.5 < ecSize[rParam[1]] * 0.5 ? 0 : 1];\n}\n/**\n * Prepare dataIndex for outside usage, where dataIndex means rawIndex, and\n * dataIndexInside means filtered index.\n */\n// TODO: TYPE more specified payload types.\n\nexport function makeHighDownBatch(batch, visualMapModel) {\n  zrUtil.each(batch || [], function (batchItem) {\n    if (batchItem.dataIndex != null) {\n      batchItem.dataIndexInside = batchItem.dataIndex;\n      batchItem.dataIndex = null;\n    }\n\n    batchItem.highlightKey = 'visualMap' + (visualMapModel ? visualMapModel.componentIndex : '');\n  });\n  return batch;\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport LinearGradient from 'zrender/lib/graphic/LinearGradient';\nimport * as eventTool from 'zrender/lib/core/event';\nimport VisualMapView from './VisualMapView';\nimport * as graphic from '../../util/graphic';\nimport * as numberUtil from '../../util/number';\nimport sliderMove from '../helper/sliderMove';\nimport * as helper from './helper';\nimport * as modelUtil from '../../util/model';\nimport { parsePercent } from 'zrender/lib/contain/text';\nimport { setAsHighDownDispatcher } from '../../util/states';\nimport { createSymbol } from '../../util/symbol';\nimport ZRImage from 'zrender/lib/graphic/Image';\nimport { getECData } from '../../util/innerStore';\nvar linearMap = numberUtil.linearMap;\nvar each = zrUtil.each;\nvar mathMin = Math.min;\nvar mathMax = Math.max; // Arbitrary value\n\nvar HOVER_LINK_SIZE = 12;\nvar HOVER_LINK_OUT = 6; // Notice:\n// Any \"interval\" should be by the order of [low, high].\n// \"handle0\" (handleIndex === 0) maps to\n// low data value: this._dataInterval[0] and has low coord.\n// \"handle1\" (handleIndex === 1) maps to\n// high data value: this._dataInterval[1] and has high coord.\n// The logic of transform is implemented in this._createBarGroup.\n\nvar ContinuousView =\n/** @class */\nfunction (_super) {\n  __extends(ContinuousView, _super);\n\n  function ContinuousView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ContinuousView.type;\n    _this._shapes = {};\n    _this._dataInterval = [];\n    _this._handleEnds = [];\n    _this._hoverLinkDataIndices = [];\n    return _this;\n  }\n\n  ContinuousView.prototype.doRender = function (visualMapModel, ecModel, api, payload) {\n    this._api = api;\n\n    if (!payload || payload.type !== 'selectDataRange' || payload.from !== this.uid) {\n      this._buildView();\n    }\n  };\n\n  ContinuousView.prototype._buildView = function () {\n    this.group.removeAll();\n    var visualMapModel = this.visualMapModel;\n    var thisGroup = this.group;\n    this._orient = visualMapModel.get('orient');\n    this._useHandle = visualMapModel.get('calculable');\n\n    this._resetInterval();\n\n    this._renderBar(thisGroup);\n\n    var dataRangeText = visualMapModel.get('text');\n\n    this._renderEndsText(thisGroup, dataRangeText, 0);\n\n    this._renderEndsText(thisGroup, dataRangeText, 1); // Do this for background size calculation.\n\n\n    this._updateView(true); // After updating view, inner shapes is built completely,\n    // and then background can be rendered.\n\n\n    this.renderBackground(thisGroup); // Real update view\n\n    this._updateView();\n\n    this._enableHoverLinkToSeries();\n\n    this._enableHoverLinkFromSeries();\n\n    this.positionGroup(thisGroup);\n  };\n\n  ContinuousView.prototype._renderEndsText = function (group, dataRangeText, endsIndex) {\n    if (!dataRangeText) {\n      return;\n    } // Compatible with ec2, text[0] map to high value, text[1] map low value.\n\n\n    var text = dataRangeText[1 - endsIndex];\n    text = text != null ? text + '' : '';\n    var visualMapModel = this.visualMapModel;\n    var textGap = visualMapModel.get('textGap');\n    var itemSize = visualMapModel.itemSize;\n    var barGroup = this._shapes.mainGroup;\n\n    var position = this._applyTransform([itemSize[0] / 2, endsIndex === 0 ? -textGap : itemSize[1] + textGap], barGroup);\n\n    var align = this._applyTransform(endsIndex === 0 ? 'bottom' : 'top', barGroup);\n\n    var orient = this._orient;\n    var textStyleModel = this.visualMapModel.textStyleModel;\n    this.group.add(new graphic.Text({\n      style: {\n        x: position[0],\n        y: position[1],\n        verticalAlign: orient === 'horizontal' ? 'middle' : align,\n        align: orient === 'horizontal' ? align : 'center',\n        text: text,\n        font: textStyleModel.getFont(),\n        fill: textStyleModel.getTextColor()\n      }\n    }));\n  };\n\n  ContinuousView.prototype._renderBar = function (targetGroup) {\n    var visualMapModel = this.visualMapModel;\n    var shapes = this._shapes;\n    var itemSize = visualMapModel.itemSize;\n    var orient = this._orient;\n    var useHandle = this._useHandle;\n    var itemAlign = helper.getItemAlign(visualMapModel, this.api, itemSize);\n\n    var mainGroup = shapes.mainGroup = this._createBarGroup(itemAlign);\n\n    var gradientBarGroup = new graphic.Group();\n    mainGroup.add(gradientBarGroup); // Bar\n\n    gradientBarGroup.add(shapes.outOfRange = createPolygon());\n    gradientBarGroup.add(shapes.inRange = createPolygon(null, useHandle ? getCursor(this._orient) : null, zrUtil.bind(this._dragHandle, this, 'all', false), zrUtil.bind(this._dragHandle, this, 'all', true))); // A border radius clip.\n\n    gradientBarGroup.setClipPath(new graphic.Rect({\n      shape: {\n        x: 0,\n        y: 0,\n        width: itemSize[0],\n        height: itemSize[1],\n        r: 3\n      }\n    }));\n    var textRect = visualMapModel.textStyleModel.getTextRect('');\n    var textSize = mathMax(textRect.width, textRect.height); // Handle\n\n    if (useHandle) {\n      shapes.handleThumbs = [];\n      shapes.handleLabels = [];\n      shapes.handleLabelPoints = [];\n\n      this._createHandle(visualMapModel, mainGroup, 0, itemSize, textSize, orient);\n\n      this._createHandle(visualMapModel, mainGroup, 1, itemSize, textSize, orient);\n    }\n\n    this._createIndicator(visualMapModel, mainGroup, itemSize, textSize, orient);\n\n    targetGroup.add(mainGroup);\n  };\n\n  ContinuousView.prototype._createHandle = function (visualMapModel, mainGroup, handleIndex, itemSize, textSize, orient) {\n    var onDrift = zrUtil.bind(this._dragHandle, this, handleIndex, false);\n    var onDragEnd = zrUtil.bind(this._dragHandle, this, handleIndex, true);\n    var handleSize = parsePercent(visualMapModel.get('handleSize'), itemSize[0]);\n    var handleThumb = createSymbol(visualMapModel.get('handleIcon'), -handleSize / 2, -handleSize / 2, handleSize, handleSize, null, true);\n    var cursor = getCursor(this._orient);\n    handleThumb.attr({\n      cursor: cursor,\n      draggable: true,\n      drift: onDrift,\n      ondragend: onDragEnd,\n      onmousemove: function onmousemove(e) {\n        eventTool.stop(e.event);\n      }\n    });\n    handleThumb.x = itemSize[0] / 2;\n    handleThumb.useStyle(visualMapModel.getModel('handleStyle').getItemStyle());\n    handleThumb.setStyle({\n      strokeNoScale: true,\n      strokeFirst: true\n    });\n    handleThumb.style.lineWidth *= 2;\n    handleThumb.ensureState('emphasis').style = visualMapModel.getModel(['emphasis', 'handleStyle']).getItemStyle();\n    setAsHighDownDispatcher(handleThumb, true);\n    mainGroup.add(handleThumb); // Text is always horizontal layout but should not be effected by\n    // transform (orient/inverse). So label is built separately but not\n    // use zrender/graphic/helper/RectText, and is located based on view\n    // group (according to handleLabelPoint) but not barGroup.\n\n    var textStyleModel = this.visualMapModel.textStyleModel;\n    var handleLabel = new graphic.Text({\n      cursor: cursor,\n      draggable: true,\n      drift: onDrift,\n      onmousemove: function onmousemove(e) {\n        // Fot mobile devicem, prevent screen slider on the button.\n        eventTool.stop(e.event);\n      },\n      ondragend: onDragEnd,\n      style: {\n        x: 0,\n        y: 0,\n        text: '',\n        font: textStyleModel.getFont(),\n        fill: textStyleModel.getTextColor()\n      }\n    });\n    handleLabel.ensureState('blur').style = {\n      opacity: 0.1\n    };\n    handleLabel.stateTransition = {\n      duration: 200\n    };\n    this.group.add(handleLabel);\n    var handleLabelPoint = [handleSize, 0];\n    var shapes = this._shapes;\n    shapes.handleThumbs[handleIndex] = handleThumb;\n    shapes.handleLabelPoints[handleIndex] = handleLabelPoint;\n    shapes.handleLabels[handleIndex] = handleLabel;\n  };\n\n  ContinuousView.prototype._createIndicator = function (visualMapModel, mainGroup, itemSize, textSize, orient) {\n    var scale = parsePercent(visualMapModel.get('indicatorSize'), itemSize[0]);\n    var indicator = createSymbol(visualMapModel.get('indicatorIcon'), -scale / 2, -scale / 2, scale, scale, null, true);\n    indicator.attr({\n      cursor: 'move',\n      invisible: true,\n      silent: true,\n      x: itemSize[0] / 2\n    });\n    var indicatorStyle = visualMapModel.getModel('indicatorStyle').getItemStyle();\n\n    if (indicator instanceof ZRImage) {\n      var pathStyle = indicator.style;\n      indicator.useStyle(zrUtil.extend({\n        // TODO other properties like x, y ?\n        image: pathStyle.image,\n        x: pathStyle.x,\n        y: pathStyle.y,\n        width: pathStyle.width,\n        height: pathStyle.height\n      }, indicatorStyle));\n    } else {\n      indicator.useStyle(indicatorStyle);\n    }\n\n    mainGroup.add(indicator);\n    var textStyleModel = this.visualMapModel.textStyleModel;\n    var indicatorLabel = new graphic.Text({\n      silent: true,\n      invisible: true,\n      style: {\n        x: 0,\n        y: 0,\n        text: '',\n        font: textStyleModel.getFont(),\n        fill: textStyleModel.getTextColor()\n      }\n    });\n    this.group.add(indicatorLabel);\n    var indicatorLabelPoint = [(orient === 'horizontal' ? textSize / 2 : HOVER_LINK_OUT) + itemSize[0] / 2, 0];\n    var shapes = this._shapes;\n    shapes.indicator = indicator;\n    shapes.indicatorLabel = indicatorLabel;\n    shapes.indicatorLabelPoint = indicatorLabelPoint;\n    this._firstShowIndicator = true;\n  };\n\n  ContinuousView.prototype._dragHandle = function (handleIndex, isEnd, // dx is event from ondragend if isEnd is true. It's not used\n  dx, dy) {\n    if (!this._useHandle) {\n      return;\n    }\n\n    this._dragging = !isEnd;\n\n    if (!isEnd) {\n      // Transform dx, dy to bar coordination.\n      var vertex = this._applyTransform([dx, dy], this._shapes.mainGroup, true);\n\n      this._updateInterval(handleIndex, vertex[1]);\n\n      this._hideIndicator(); // Considering realtime, update view should be executed\n      // before dispatch action.\n\n\n      this._updateView();\n    } // dragEnd do not dispatch action when realtime.\n\n\n    if (isEnd === !this.visualMapModel.get('realtime')) {\n      // jshint ignore:line\n      this.api.dispatchAction({\n        type: 'selectDataRange',\n        from: this.uid,\n        visualMapId: this.visualMapModel.id,\n        selected: this._dataInterval.slice()\n      });\n    }\n\n    if (isEnd) {\n      !this._hovering && this._clearHoverLinkToSeries();\n    } else if (useHoverLinkOnHandle(this.visualMapModel)) {\n      this._doHoverLinkToSeries(this._handleEnds[handleIndex], false);\n    }\n  };\n\n  ContinuousView.prototype._resetInterval = function () {\n    var visualMapModel = this.visualMapModel;\n    var dataInterval = this._dataInterval = visualMapModel.getSelected();\n    var dataExtent = visualMapModel.getExtent();\n    var sizeExtent = [0, visualMapModel.itemSize[1]];\n    this._handleEnds = [linearMap(dataInterval[0], dataExtent, sizeExtent, true), linearMap(dataInterval[1], dataExtent, sizeExtent, true)];\n  };\n  /**\n   * @private\n   * @param {(number|string)} handleIndex 0 or 1 or 'all'\n   * @param {number} dx\n   * @param {number} dy\n   */\n\n\n  ContinuousView.prototype._updateInterval = function (handleIndex, delta) {\n    delta = delta || 0;\n    var visualMapModel = this.visualMapModel;\n    var handleEnds = this._handleEnds;\n    var sizeExtent = [0, visualMapModel.itemSize[1]];\n    sliderMove(delta, handleEnds, sizeExtent, handleIndex, // cross is forbiden\n    0);\n    var dataExtent = visualMapModel.getExtent(); // Update data interval.\n\n    this._dataInterval = [linearMap(handleEnds[0], sizeExtent, dataExtent, true), linearMap(handleEnds[1], sizeExtent, dataExtent, true)];\n  };\n\n  ContinuousView.prototype._updateView = function (forSketch) {\n    var visualMapModel = this.visualMapModel;\n    var dataExtent = visualMapModel.getExtent();\n    var shapes = this._shapes;\n    var outOfRangeHandleEnds = [0, visualMapModel.itemSize[1]];\n    var inRangeHandleEnds = forSketch ? outOfRangeHandleEnds : this._handleEnds;\n\n    var visualInRange = this._createBarVisual(this._dataInterval, dataExtent, inRangeHandleEnds, 'inRange');\n\n    var visualOutOfRange = this._createBarVisual(dataExtent, dataExtent, outOfRangeHandleEnds, 'outOfRange');\n\n    shapes.inRange.setStyle({\n      fill: visualInRange.barColor // opacity: visualInRange.opacity\n\n    }).setShape('points', visualInRange.barPoints);\n    shapes.outOfRange.setStyle({\n      fill: visualOutOfRange.barColor // opacity: visualOutOfRange.opacity\n\n    }).setShape('points', visualOutOfRange.barPoints);\n\n    this._updateHandle(inRangeHandleEnds, visualInRange);\n  };\n\n  ContinuousView.prototype._createBarVisual = function (dataInterval, dataExtent, handleEnds, forceState) {\n    var opts = {\n      forceState: forceState,\n      convertOpacityToAlpha: true\n    };\n\n    var colorStops = this._makeColorGradient(dataInterval, opts);\n\n    var symbolSizes = [this.getControllerVisual(dataInterval[0], 'symbolSize', opts), this.getControllerVisual(dataInterval[1], 'symbolSize', opts)];\n\n    var barPoints = this._createBarPoints(handleEnds, symbolSizes);\n\n    return {\n      barColor: new LinearGradient(0, 0, 0, 1, colorStops),\n      barPoints: barPoints,\n      handlesColor: [colorStops[0].color, colorStops[colorStops.length - 1].color]\n    };\n  };\n\n  ContinuousView.prototype._makeColorGradient = function (dataInterval, opts) {\n    // Considering colorHue, which is not linear, so we have to sample\n    // to calculate gradient color stops, but not only caculate head\n    // and tail.\n    var sampleNumber = 100; // Arbitrary value.\n\n    var colorStops = [];\n    var step = (dataInterval[1] - dataInterval[0]) / sampleNumber;\n    colorStops.push({\n      color: this.getControllerVisual(dataInterval[0], 'color', opts),\n      offset: 0\n    });\n\n    for (var i = 1; i < sampleNumber; i++) {\n      var currValue = dataInterval[0] + step * i;\n\n      if (currValue > dataInterval[1]) {\n        break;\n      }\n\n      colorStops.push({\n        color: this.getControllerVisual(currValue, 'color', opts),\n        offset: i / sampleNumber\n      });\n    }\n\n    colorStops.push({\n      color: this.getControllerVisual(dataInterval[1], 'color', opts),\n      offset: 1\n    });\n    return colorStops;\n  };\n\n  ContinuousView.prototype._createBarPoints = function (handleEnds, symbolSizes) {\n    var itemSize = this.visualMapModel.itemSize;\n    return [[itemSize[0] - symbolSizes[0], handleEnds[0]], [itemSize[0], handleEnds[0]], [itemSize[0], handleEnds[1]], [itemSize[0] - symbolSizes[1], handleEnds[1]]];\n  };\n\n  ContinuousView.prototype._createBarGroup = function (itemAlign) {\n    var orient = this._orient;\n    var inverse = this.visualMapModel.get('inverse');\n    return new graphic.Group(orient === 'horizontal' && !inverse ? {\n      scaleX: itemAlign === 'bottom' ? 1 : -1,\n      rotation: Math.PI / 2\n    } : orient === 'horizontal' && inverse ? {\n      scaleX: itemAlign === 'bottom' ? -1 : 1,\n      rotation: -Math.PI / 2\n    } : orient === 'vertical' && !inverse ? {\n      scaleX: itemAlign === 'left' ? 1 : -1,\n      scaleY: -1\n    } : {\n      scaleX: itemAlign === 'left' ? 1 : -1\n    });\n  };\n\n  ContinuousView.prototype._updateHandle = function (handleEnds, visualInRange) {\n    if (!this._useHandle) {\n      return;\n    }\n\n    var shapes = this._shapes;\n    var visualMapModel = this.visualMapModel;\n    var handleThumbs = shapes.handleThumbs;\n    var handleLabels = shapes.handleLabels;\n    var itemSize = visualMapModel.itemSize;\n    var dataExtent = visualMapModel.getExtent();\n    each([0, 1], function (handleIndex) {\n      var handleThumb = handleThumbs[handleIndex];\n      handleThumb.setStyle('fill', visualInRange.handlesColor[handleIndex]);\n      handleThumb.y = handleEnds[handleIndex];\n      var val = linearMap(handleEnds[handleIndex], [0, itemSize[1]], dataExtent, true);\n      var symbolSize = this.getControllerVisual(val, 'symbolSize');\n      handleThumb.scaleX = handleThumb.scaleY = symbolSize / itemSize[0];\n      handleThumb.x = itemSize[0] - symbolSize / 2; // Update handle label position.\n\n      var textPoint = graphic.applyTransform(shapes.handleLabelPoints[handleIndex], graphic.getTransform(handleThumb, this.group));\n      handleLabels[handleIndex].setStyle({\n        x: textPoint[0],\n        y: textPoint[1],\n        text: visualMapModel.formatValueText(this._dataInterval[handleIndex]),\n        verticalAlign: 'middle',\n        align: this._orient === 'vertical' ? this._applyTransform('left', shapes.mainGroup) : 'center'\n      });\n    }, this);\n  };\n\n  ContinuousView.prototype._showIndicator = function (cursorValue, textValue, rangeSymbol, halfHoverLinkSize) {\n    var visualMapModel = this.visualMapModel;\n    var dataExtent = visualMapModel.getExtent();\n    var itemSize = visualMapModel.itemSize;\n    var sizeExtent = [0, itemSize[1]];\n    var shapes = this._shapes;\n    var indicator = shapes.indicator;\n\n    if (!indicator) {\n      return;\n    }\n\n    indicator.attr('invisible', false);\n    var opts = {\n      convertOpacityToAlpha: true\n    };\n    var color = this.getControllerVisual(cursorValue, 'color', opts);\n    var symbolSize = this.getControllerVisual(cursorValue, 'symbolSize');\n    var y = linearMap(cursorValue, dataExtent, sizeExtent, true);\n    var x = itemSize[0] - symbolSize / 2;\n    var oldIndicatorPos = {\n      x: indicator.x,\n      y: indicator.y\n    }; // Update handle label position.\n\n    indicator.y = y;\n    indicator.x = x;\n    var textPoint = graphic.applyTransform(shapes.indicatorLabelPoint, graphic.getTransform(indicator, this.group));\n    var indicatorLabel = shapes.indicatorLabel;\n    indicatorLabel.attr('invisible', false);\n\n    var align = this._applyTransform('left', shapes.mainGroup);\n\n    var orient = this._orient;\n    var isHorizontal = orient === 'horizontal';\n    indicatorLabel.setStyle({\n      text: (rangeSymbol ? rangeSymbol : '') + visualMapModel.formatValueText(textValue),\n      verticalAlign: isHorizontal ? align : 'middle',\n      align: isHorizontal ? 'center' : align\n    });\n    var indicatorNewProps = {\n      x: x,\n      y: y,\n      style: {\n        fill: color\n      }\n    };\n    var labelNewProps = {\n      style: {\n        x: textPoint[0],\n        y: textPoint[1]\n      }\n    };\n\n    if (visualMapModel.ecModel.isAnimationEnabled() && !this._firstShowIndicator) {\n      var animationCfg = {\n        duration: 100,\n        easing: 'cubicInOut',\n        additive: true\n      };\n      indicator.x = oldIndicatorPos.x;\n      indicator.y = oldIndicatorPos.y;\n      indicator.animateTo(indicatorNewProps, animationCfg);\n      indicatorLabel.animateTo(labelNewProps, animationCfg);\n    } else {\n      indicator.attr(indicatorNewProps);\n      indicatorLabel.attr(labelNewProps);\n    }\n\n    this._firstShowIndicator = false;\n    var handleLabels = this._shapes.handleLabels;\n\n    if (handleLabels) {\n      for (var i = 0; i < handleLabels.length; i++) {\n        // Fade out handle labels.\n        // NOTE: Must use api enter/leave on emphasis/blur/select state. Or the global states manager will change it.\n        this._api.enterBlur(handleLabels[i]);\n      }\n    }\n  };\n\n  ContinuousView.prototype._enableHoverLinkToSeries = function () {\n    var self = this;\n\n    this._shapes.mainGroup.on('mousemove', function (e) {\n      self._hovering = true;\n\n      if (!self._dragging) {\n        var itemSize = self.visualMapModel.itemSize;\n\n        var pos = self._applyTransform([e.offsetX, e.offsetY], self._shapes.mainGroup, true, true); // For hover link show when hover handle, which might be\n        // below or upper than sizeExtent.\n\n\n        pos[1] = mathMin(mathMax(0, pos[1]), itemSize[1]);\n\n        self._doHoverLinkToSeries(pos[1], 0 <= pos[0] && pos[0] <= itemSize[0]);\n      }\n    }).on('mouseout', function () {\n      // When mouse is out of handle, hoverLink still need\n      // to be displayed when realtime is set as false.\n      self._hovering = false;\n      !self._dragging && self._clearHoverLinkToSeries();\n    });\n  };\n\n  ContinuousView.prototype._enableHoverLinkFromSeries = function () {\n    var zr = this.api.getZr();\n\n    if (this.visualMapModel.option.hoverLink) {\n      zr.on('mouseover', this._hoverLinkFromSeriesMouseOver, this);\n      zr.on('mouseout', this._hideIndicator, this);\n    } else {\n      this._clearHoverLinkFromSeries();\n    }\n  };\n\n  ContinuousView.prototype._doHoverLinkToSeries = function (cursorPos, hoverOnBar) {\n    var visualMapModel = this.visualMapModel;\n    var itemSize = visualMapModel.itemSize;\n\n    if (!visualMapModel.option.hoverLink) {\n      return;\n    }\n\n    var sizeExtent = [0, itemSize[1]];\n    var dataExtent = visualMapModel.getExtent(); // For hover link show when hover handle, which might be below or upper than sizeExtent.\n\n    cursorPos = mathMin(mathMax(sizeExtent[0], cursorPos), sizeExtent[1]);\n    var halfHoverLinkSize = getHalfHoverLinkSize(visualMapModel, dataExtent, sizeExtent);\n    var hoverRange = [cursorPos - halfHoverLinkSize, cursorPos + halfHoverLinkSize];\n    var cursorValue = linearMap(cursorPos, sizeExtent, dataExtent, true);\n    var valueRange = [linearMap(hoverRange[0], sizeExtent, dataExtent, true), linearMap(hoverRange[1], sizeExtent, dataExtent, true)]; // Consider data range is out of visualMap range, see test/visualMap-continuous.html,\n    // where china and india has very large population.\n\n    hoverRange[0] < sizeExtent[0] && (valueRange[0] = -Infinity);\n    hoverRange[1] > sizeExtent[1] && (valueRange[1] = Infinity); // Do not show indicator when mouse is over handle,\n    // otherwise labels overlap, especially when dragging.\n\n    if (hoverOnBar) {\n      if (valueRange[0] === -Infinity) {\n        this._showIndicator(cursorValue, valueRange[1], '< ', halfHoverLinkSize);\n      } else if (valueRange[1] === Infinity) {\n        this._showIndicator(cursorValue, valueRange[0], '> ', halfHoverLinkSize);\n      } else {\n        this._showIndicator(cursorValue, cursorValue, ' ', halfHoverLinkSize);\n      }\n    } // When realtime is set as false, handles, which are in barGroup,\n    // also trigger hoverLink, which help user to realize where they\n    // focus on when dragging. (see test/heatmap-large.html)\n    // When realtime is set as true, highlight will not show when hover\n    // handle, because the label on handle, which displays a exact value\n    // but not range, might mislead users.\n\n\n    var oldBatch = this._hoverLinkDataIndices;\n    var newBatch = [];\n\n    if (hoverOnBar || useHoverLinkOnHandle(visualMapModel)) {\n      newBatch = this._hoverLinkDataIndices = visualMapModel.findTargetDataIndices(valueRange);\n    }\n\n    var resultBatches = modelUtil.compressBatches(oldBatch, newBatch);\n\n    this._dispatchHighDown('downplay', helper.makeHighDownBatch(resultBatches[0], visualMapModel));\n\n    this._dispatchHighDown('highlight', helper.makeHighDownBatch(resultBatches[1], visualMapModel));\n  };\n\n  ContinuousView.prototype._hoverLinkFromSeriesMouseOver = function (e) {\n    var el = e.target;\n    var visualMapModel = this.visualMapModel;\n\n    if (!el || getECData(el).dataIndex == null) {\n      return;\n    }\n\n    var ecData = getECData(el);\n    var dataModel = this.ecModel.getSeriesByIndex(ecData.seriesIndex);\n\n    if (!visualMapModel.isTargetSeries(dataModel)) {\n      return;\n    }\n\n    var data = dataModel.getData(ecData.dataType);\n    var value = data.getStore().get(visualMapModel.getDataDimensionIndex(data), ecData.dataIndex);\n\n    if (!isNaN(value)) {\n      this._showIndicator(value, value);\n    }\n  };\n\n  ContinuousView.prototype._hideIndicator = function () {\n    var shapes = this._shapes;\n    shapes.indicator && shapes.indicator.attr('invisible', true);\n    shapes.indicatorLabel && shapes.indicatorLabel.attr('invisible', true);\n    var handleLabels = this._shapes.handleLabels;\n\n    if (handleLabels) {\n      for (var i = 0; i < handleLabels.length; i++) {\n        // Fade out handle labels.\n        // NOTE: Must use api enter/leave on emphasis/blur/select state. Or the global states manager will change it.\n        this._api.leaveBlur(handleLabels[i]);\n      }\n    }\n  };\n\n  ContinuousView.prototype._clearHoverLinkToSeries = function () {\n    this._hideIndicator();\n\n    var indices = this._hoverLinkDataIndices;\n\n    this._dispatchHighDown('downplay', helper.makeHighDownBatch(indices, this.visualMapModel));\n\n    indices.length = 0;\n  };\n\n  ContinuousView.prototype._clearHoverLinkFromSeries = function () {\n    this._hideIndicator();\n\n    var zr = this.api.getZr();\n    zr.off('mouseover', this._hoverLinkFromSeriesMouseOver);\n    zr.off('mouseout', this._hideIndicator);\n  };\n\n  ContinuousView.prototype._applyTransform = function (vertex, element, inverse, global) {\n    var transform = graphic.getTransform(element, global ? null : this.group);\n    return zrUtil.isArray(vertex) ? graphic.applyTransform(vertex, transform, inverse) : graphic.transformDirection(vertex, transform, inverse);\n  }; // TODO: TYPE more specified payload types.\n\n\n  ContinuousView.prototype._dispatchHighDown = function (type, batch) {\n    batch && batch.length && this.api.dispatchAction({\n      type: type,\n      batch: batch\n    });\n  };\n  /**\n   * @override\n   */\n\n\n  ContinuousView.prototype.dispose = function () {\n    this._clearHoverLinkFromSeries();\n\n    this._clearHoverLinkToSeries();\n  };\n  /**\n   * @override\n   */\n\n\n  ContinuousView.prototype.remove = function () {\n    this._clearHoverLinkFromSeries();\n\n    this._clearHoverLinkToSeries();\n  };\n\n  ContinuousView.type = 'visualMap.continuous';\n  return ContinuousView;\n}(VisualMapView);\n\nfunction createPolygon(points, cursor, onDrift, onDragEnd) {\n  return new graphic.Polygon({\n    shape: {\n      points: points\n    },\n    draggable: !!onDrift,\n    cursor: cursor,\n    drift: onDrift,\n    onmousemove: function onmousemove(e) {\n      // Fot mobile devicem, prevent screen slider on the button.\n      eventTool.stop(e.event);\n    },\n    ondragend: onDragEnd\n  });\n}\n\nfunction getHalfHoverLinkSize(visualMapModel, dataExtent, sizeExtent) {\n  var halfHoverLinkSize = HOVER_LINK_SIZE / 2;\n  var hoverLinkDataSize = visualMapModel.get('hoverLinkDataSize');\n\n  if (hoverLinkDataSize) {\n    halfHoverLinkSize = linearMap(hoverLinkDataSize, dataExtent, sizeExtent, true) / 2;\n  }\n\n  return halfHoverLinkSize;\n}\n\nfunction useHoverLinkOnHandle(visualMapModel) {\n  var hoverLinkOnHandle = visualMapModel.get('hoverLinkOnHandle');\n  return !!(hoverLinkOnHandle == null ? visualMapModel.get('realtime') : hoverLinkOnHandle);\n}\n\nfunction getCursor(orient) {\n  return orient === 'vertical' ? 'ns-resize' : 'ew-resize';\n}\n\nexport default ContinuousView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport var visualMapActionInfo = {\n  type: 'selectDataRange',\n  event: 'dataRangeSelected',\n  // FIXME use updateView appears wrong\n  update: 'update'\n};\nexport var visualMapActionHander = function visualMapActionHander(payload, ecModel) {\n  ecModel.eachComponent({\n    mainType: 'visualMap',\n    query: payload\n  }, function (model) {\n    model.setSelected(payload.selected);\n  });\n};","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as visualSolution from '../../visual/visualSolution';\nimport VisualMapping from '../../visual/VisualMapping';\nimport { getVisualFromData } from '../../visual/helper';\nexport var visualMapEncodingHandlers = [{\n  createOnAllSeries: true,\n  reset: function reset(seriesModel, ecModel) {\n    var resetDefines = [];\n    ecModel.eachComponent('visualMap', function (visualMapModel) {\n      var pipelineContext = seriesModel.pipelineContext;\n\n      if (!visualMapModel.isTargetSeries(seriesModel) || pipelineContext && pipelineContext.large) {\n        return;\n      }\n\n      resetDefines.push(visualSolution.incrementalApplyVisual(visualMapModel.stateList, visualMapModel.targetVisuals, zrUtil.bind(visualMapModel.getValueState, visualMapModel), visualMapModel.getDataDimensionIndex(seriesModel.getData())));\n    });\n    return resetDefines;\n  }\n}, // Only support color.\n{\n  createOnAllSeries: true,\n  reset: function reset(seriesModel, ecModel) {\n    var data = seriesModel.getData();\n    var visualMetaList = [];\n    ecModel.eachComponent('visualMap', function (visualMapModel) {\n      if (visualMapModel.isTargetSeries(seriesModel)) {\n        var visualMeta = visualMapModel.getVisualMeta(zrUtil.bind(getColorVisual, null, seriesModel, visualMapModel)) || {\n          stops: [],\n          outerColors: []\n        };\n        var dimIdx = visualMapModel.getDataDimensionIndex(data);\n\n        if (dimIdx >= 0) {\n          // visualMeta.dimension should be dimension index, but not concrete dimension.\n          visualMeta.dimension = dimIdx;\n          visualMetaList.push(visualMeta);\n        }\n      }\n    }); // console.log(JSON.stringify(visualMetaList.map(a => a.stops)));\n\n    seriesModel.getData().setVisual('visualMeta', visualMetaList);\n  }\n}]; // FIXME\n// performance and export for heatmap?\n// value can be Infinity or -Infinity\n\nfunction getColorVisual(seriesModel, visualMapModel, value, valueState) {\n  var mappings = visualMapModel.targetVisuals[valueState];\n  var visualTypes = VisualMapping.prepareVisualTypes(mappings);\n  var resultVisual = {\n    color: getVisualFromData(seriesModel.getData(), 'color') // default color.\n\n  };\n\n  for (var i = 0, len = visualTypes.length; i < len; i++) {\n    var type = visualTypes[i];\n    var mapping = mappings[type === 'opacity' ? '__alphaForOpacity' : type];\n    mapping && mapping.applyVisual(value, getVisual, setVisual);\n  }\n\n  return resultVisual.color;\n\n  function getVisual(key) {\n    return resultVisual[key];\n  }\n\n  function setVisual(key, value) {\n    resultVisual[key] = value;\n  }\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// @ts-nocheck\nimport * as zrUtil from 'zrender/lib/core/util';\nvar each = zrUtil.each;\nexport default function visualMapPreprocessor(option) {\n  var visualMap = option && option.visualMap;\n\n  if (!zrUtil.isArray(visualMap)) {\n    visualMap = visualMap ? [visualMap] : [];\n  }\n\n  each(visualMap, function (opt) {\n    if (!opt) {\n      return;\n    } // rename splitList to pieces\n\n\n    if (has(opt, 'splitList') && !has(opt, 'pieces')) {\n      opt.pieces = opt.splitList;\n      delete opt.splitList;\n    }\n\n    var pieces = opt.pieces;\n\n    if (pieces && zrUtil.isArray(pieces)) {\n      each(pieces, function (piece) {\n        if (zrUtil.isObject(piece)) {\n          if (has(piece, 'start') && !has(piece, 'min')) {\n            piece.min = piece.start;\n          }\n\n          if (has(piece, 'end') && !has(piece, 'max')) {\n            piece.max = piece.end;\n          }\n        }\n      });\n    }\n  });\n}\n\nfunction has(obj, name) {\n  return obj && obj.hasOwnProperty && obj.hasOwnProperty(name);\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { visualMapActionInfo, visualMapActionHander } from './visualMapAction';\nimport { visualMapEncodingHandlers } from './visualEncoding';\nimport { each } from 'zrender/lib/core/util';\nimport preprocessor from './preprocessor';\nvar installed = false;\nexport default function installCommon(registers) {\n  if (installed) {\n    return;\n  }\n\n  installed = true;\n  registers.registerSubTypeDefaulter('visualMap', function (option) {\n    // Compatible with ec2, when splitNumber === 0, continuous visualMap will be used.\n    return !option.categories && (!(option.pieces ? option.pieces.length > 0 : option.splitNumber > 0) || option.calculable) ? 'continuous' : 'piecewise';\n  });\n  registers.registerAction(visualMapActionInfo, visualMapActionHander);\n  each(visualMapEncodingHandlers, function (handler) {\n    registers.registerVisual(registers.PRIORITY.VISUAL.COMPONENT, handler);\n  });\n  registers.registerPreprocessor(preprocessor);\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport ContinuousModel from './ContinuousModel';\nimport ContinuousView from './ContinuousView';\nimport installCommon from './installCommon';\nexport function install(registers) {\n  registers.registerComponentModel(ContinuousModel);\n  registers.registerComponentView(ContinuousView);\n  installCommon(registers);\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport VisualMapModel from './VisualMapModel';\nimport VisualMapping from '../../visual/VisualMapping';\nimport visualDefault from '../../visual/visualDefault';\nimport { reformIntervals } from '../../util/number';\nimport { inheritDefaultOption } from '../../util/component';\n\nvar PiecewiseModel =\n/** @class */\nfunction (_super) {\n  __extends(PiecewiseModel, _super);\n\n  function PiecewiseModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = PiecewiseModel.type;\n    /**\n     * The order is always [low, ..., high].\n     * [{text: string, interval: Array.<number>}, ...]\n     */\n\n    _this._pieceList = [];\n    return _this;\n  }\n\n  PiecewiseModel.prototype.optionUpdated = function (newOption, isInit) {\n    _super.prototype.optionUpdated.apply(this, arguments);\n\n    this.resetExtent();\n\n    var mode = this._mode = this._determineMode();\n\n    this._pieceList = [];\n\n    resetMethods[this._mode].call(this, this._pieceList);\n\n    this._resetSelected(newOption, isInit);\n\n    var categories = this.option.categories;\n    this.resetVisual(function (mappingOption, state) {\n      if (mode === 'categories') {\n        mappingOption.mappingMethod = 'category';\n        mappingOption.categories = zrUtil.clone(categories);\n      } else {\n        mappingOption.dataExtent = this.getExtent();\n        mappingOption.mappingMethod = 'piecewise';\n        mappingOption.pieceList = zrUtil.map(this._pieceList, function (piece) {\n          piece = zrUtil.clone(piece);\n\n          if (state !== 'inRange') {\n            // FIXME\n            // outOfRange do not support special visual in pieces.\n            piece.visual = null;\n          }\n\n          return piece;\n        });\n      }\n    });\n  };\n  /**\n   * @protected\n   * @override\n   */\n\n\n  PiecewiseModel.prototype.completeVisualOption = function () {\n    // Consider this case:\n    // visualMap: {\n    //      pieces: [{symbol: 'circle', lt: 0}, {symbol: 'rect', gte: 0}]\n    // }\n    // where no inRange/outOfRange set but only pieces. So we should make\n    // default inRange/outOfRange for this case, otherwise visuals that only\n    // appear in `pieces` will not be taken into account in visual encoding.\n    var option = this.option;\n    var visualTypesInPieces = {};\n    var visualTypes = VisualMapping.listVisualTypes();\n    var isCategory = this.isCategory();\n    zrUtil.each(option.pieces, function (piece) {\n      zrUtil.each(visualTypes, function (visualType) {\n        if (piece.hasOwnProperty(visualType)) {\n          visualTypesInPieces[visualType] = 1;\n        }\n      });\n    });\n    zrUtil.each(visualTypesInPieces, function (v, visualType) {\n      var exists = false;\n      zrUtil.each(this.stateList, function (state) {\n        exists = exists || has(option, state, visualType) || has(option.target, state, visualType);\n      }, this);\n      !exists && zrUtil.each(this.stateList, function (state) {\n        (option[state] || (option[state] = {}))[visualType] = visualDefault.get(visualType, state === 'inRange' ? 'active' : 'inactive', isCategory);\n      });\n    }, this);\n\n    function has(obj, state, visualType) {\n      return obj && obj[state] && obj[state].hasOwnProperty(visualType);\n    }\n\n    _super.prototype.completeVisualOption.apply(this, arguments);\n  };\n\n  PiecewiseModel.prototype._resetSelected = function (newOption, isInit) {\n    var thisOption = this.option;\n    var pieceList = this._pieceList; // Selected do not merge but all override.\n\n    var selected = (isInit ? thisOption : newOption).selected || {};\n    thisOption.selected = selected; // Consider 'not specified' means true.\n\n    zrUtil.each(pieceList, function (piece, index) {\n      var key = this.getSelectedMapKey(piece);\n\n      if (!selected.hasOwnProperty(key)) {\n        selected[key] = true;\n      }\n    }, this);\n\n    if (thisOption.selectedMode === 'single') {\n      // Ensure there is only one selected.\n      var hasSel_1 = false;\n      zrUtil.each(pieceList, function (piece, index) {\n        var key = this.getSelectedMapKey(piece);\n\n        if (selected[key]) {\n          hasSel_1 ? selected[key] = false : hasSel_1 = true;\n        }\n      }, this);\n    } // thisOption.selectedMode === 'multiple', default: all selected.\n\n  };\n  /**\n   * @public\n   */\n\n\n  PiecewiseModel.prototype.getItemSymbol = function () {\n    return this.get('itemSymbol');\n  };\n  /**\n   * @public\n   */\n\n\n  PiecewiseModel.prototype.getSelectedMapKey = function (piece) {\n    return this._mode === 'categories' ? piece.value + '' : piece.index + '';\n  };\n  /**\n   * @public\n   */\n\n\n  PiecewiseModel.prototype.getPieceList = function () {\n    return this._pieceList;\n  };\n  /**\n   * @return {string}\n   */\n\n\n  PiecewiseModel.prototype._determineMode = function () {\n    var option = this.option;\n    return option.pieces && option.pieces.length > 0 ? 'pieces' : this.option.categories ? 'categories' : 'splitNumber';\n  };\n  /**\n   * @override\n   */\n\n\n  PiecewiseModel.prototype.setSelected = function (selected) {\n    this.option.selected = zrUtil.clone(selected);\n  };\n  /**\n   * @override\n   */\n\n\n  PiecewiseModel.prototype.getValueState = function (value) {\n    var index = VisualMapping.findPieceIndex(value, this._pieceList);\n    return index != null ? this.option.selected[this.getSelectedMapKey(this._pieceList[index])] ? 'inRange' : 'outOfRange' : 'outOfRange';\n  };\n  /**\n   * @public\n   * @param pieceIndex piece index in visualMapModel.getPieceList()\n   */\n\n\n  PiecewiseModel.prototype.findTargetDataIndices = function (pieceIndex) {\n    var result = [];\n    var pieceList = this._pieceList;\n    this.eachTargetSeries(function (seriesModel) {\n      var dataIndices = [];\n      var data = seriesModel.getData();\n      data.each(this.getDataDimensionIndex(data), function (value, dataIndex) {\n        // Should always base on model pieceList, because it is order sensitive.\n        var pIdx = VisualMapping.findPieceIndex(value, pieceList);\n        pIdx === pieceIndex && dataIndices.push(dataIndex);\n      }, this);\n      result.push({\n        seriesId: seriesModel.id,\n        dataIndex: dataIndices\n      });\n    }, this);\n    return result;\n  };\n  /**\n   * @private\n   * @param piece piece.value or piece.interval is required.\n   * @return  Can be Infinity or -Infinity\n   */\n\n\n  PiecewiseModel.prototype.getRepresentValue = function (piece) {\n    var representValue;\n\n    if (this.isCategory()) {\n      representValue = piece.value;\n    } else {\n      if (piece.value != null) {\n        representValue = piece.value;\n      } else {\n        var pieceInterval = piece.interval || [];\n        representValue = pieceInterval[0] === -Infinity && pieceInterval[1] === Infinity ? 0 : (pieceInterval[0] + pieceInterval[1]) / 2;\n      }\n    }\n\n    return representValue;\n  };\n\n  PiecewiseModel.prototype.getVisualMeta = function (getColorVisual) {\n    // Do not support category. (category axis is ordinal, numerical)\n    if (this.isCategory()) {\n      return;\n    }\n\n    var stops = [];\n    var outerColors = ['', ''];\n    var visualMapModel = this;\n\n    function setStop(interval, valueState) {\n      var representValue = visualMapModel.getRepresentValue({\n        interval: interval\n      }); // Not category\n\n      if (!valueState) {\n        valueState = visualMapModel.getValueState(representValue);\n      }\n\n      var color = getColorVisual(representValue, valueState);\n\n      if (interval[0] === -Infinity) {\n        outerColors[0] = color;\n      } else if (interval[1] === Infinity) {\n        outerColors[1] = color;\n      } else {\n        stops.push({\n          value: interval[0],\n          color: color\n        }, {\n          value: interval[1],\n          color: color\n        });\n      }\n    } // Suplement\n\n\n    var pieceList = this._pieceList.slice();\n\n    if (!pieceList.length) {\n      pieceList.push({\n        interval: [-Infinity, Infinity]\n      });\n    } else {\n      var edge = pieceList[0].interval[0];\n      edge !== -Infinity && pieceList.unshift({\n        interval: [-Infinity, edge]\n      });\n      edge = pieceList[pieceList.length - 1].interval[1];\n      edge !== Infinity && pieceList.push({\n        interval: [edge, Infinity]\n      });\n    }\n\n    var curr = -Infinity;\n    zrUtil.each(pieceList, function (piece) {\n      var interval = piece.interval;\n\n      if (interval) {\n        // Fulfill gap.\n        interval[0] > curr && setStop([curr, interval[0]], 'outOfRange');\n        setStop(interval.slice());\n        curr = interval[1];\n      }\n    }, this);\n    return {\n      stops: stops,\n      outerColors: outerColors\n    };\n  };\n\n  PiecewiseModel.type = 'visualMap.piecewise';\n  PiecewiseModel.defaultOption = inheritDefaultOption(VisualMapModel.defaultOption, {\n    selected: null,\n    minOpen: false,\n    maxOpen: false,\n    align: 'auto',\n    itemWidth: 20,\n    itemHeight: 14,\n    itemSymbol: 'roundRect',\n    pieces: null,\n    categories: null,\n    splitNumber: 5,\n    selectedMode: 'multiple',\n    itemGap: 10,\n    hoverLink: true // Enable hover highlight.\n\n  });\n  return PiecewiseModel;\n}(VisualMapModel);\n\n;\n/**\n * Key is this._mode\n * @type {Object}\n * @this {module:echarts/component/viusalMap/PiecewiseMode}\n */\n\nvar resetMethods = {\n  splitNumber: function splitNumber(outPieceList) {\n    var thisOption = this.option;\n    var precision = Math.min(thisOption.precision, 20);\n    var dataExtent = this.getExtent();\n    var splitNumber = thisOption.splitNumber;\n    splitNumber = Math.max(parseInt(splitNumber, 10), 1);\n    thisOption.splitNumber = splitNumber;\n    var splitStep = (dataExtent[1] - dataExtent[0]) / splitNumber; // Precision auto-adaption\n\n    while (+splitStep.toFixed(precision) !== splitStep && precision < 5) {\n      precision++;\n    }\n\n    thisOption.precision = precision;\n    splitStep = +splitStep.toFixed(precision);\n\n    if (thisOption.minOpen) {\n      outPieceList.push({\n        interval: [-Infinity, dataExtent[0]],\n        close: [0, 0]\n      });\n    }\n\n    for (var index = 0, curr = dataExtent[0]; index < splitNumber; curr += splitStep, index++) {\n      var max = index === splitNumber - 1 ? dataExtent[1] : curr + splitStep;\n      outPieceList.push({\n        interval: [curr, max],\n        close: [1, 1]\n      });\n    }\n\n    if (thisOption.maxOpen) {\n      outPieceList.push({\n        interval: [dataExtent[1], Infinity],\n        close: [0, 0]\n      });\n    }\n\n    reformIntervals(outPieceList);\n    zrUtil.each(outPieceList, function (piece, index) {\n      piece.index = index;\n      piece.text = this.formatValueText(piece.interval);\n    }, this);\n  },\n  categories: function categories(outPieceList) {\n    var thisOption = this.option;\n    zrUtil.each(thisOption.categories, function (cate) {\n      // FIXME categorypieceListvisualMappingpieceList\n      // \n      outPieceList.push({\n        text: this.formatValueText(cate, true),\n        value: cate\n      });\n    }, this); // See \"Order Rule\".\n\n    normalizeReverse(thisOption, outPieceList);\n  },\n  pieces: function pieces(outPieceList) {\n    var thisOption = this.option;\n    zrUtil.each(thisOption.pieces, function (pieceListItem, index) {\n      if (!zrUtil.isObject(pieceListItem)) {\n        pieceListItem = {\n          value: pieceListItem\n        };\n      }\n\n      var item = {\n        text: '',\n        index: index\n      };\n\n      if (pieceListItem.label != null) {\n        item.text = pieceListItem.label;\n      }\n\n      if (pieceListItem.hasOwnProperty('value')) {\n        var value = item.value = pieceListItem.value;\n        item.interval = [value, value];\n        item.close = [1, 1];\n      } else {\n        // `min` `max` is legacy option.\n        // `lt` `gt` `lte` `gte` is recommanded.\n        var interval = item.interval = [];\n        var close_1 = item.close = [0, 0];\n        var closeList = [1, 0, 1];\n        var infinityList = [-Infinity, Infinity];\n        var useMinMax = [];\n\n        for (var lg = 0; lg < 2; lg++) {\n          var names = [['gte', 'gt', 'min'], ['lte', 'lt', 'max']][lg];\n\n          for (var i = 0; i < 3 && interval[lg] == null; i++) {\n            interval[lg] = pieceListItem[names[i]];\n            close_1[lg] = closeList[i];\n            useMinMax[lg] = i === 2;\n          }\n\n          interval[lg] == null && (interval[lg] = infinityList[lg]);\n        }\n\n        useMinMax[0] && interval[1] === Infinity && (close_1[0] = 0);\n        useMinMax[1] && interval[0] === -Infinity && (close_1[1] = 0);\n\n        if (process.env.NODE_ENV !== 'production') {\n          if (interval[0] > interval[1]) {\n            console.warn('Piece ' + index + 'is illegal: ' + interval + ' lower bound should not greater then uppper bound.');\n          }\n        }\n\n        if (interval[0] === interval[1] && close_1[0] && close_1[1]) {\n          // Consider: [{min: 5, max: 5, visual: {...}}, {min: 0, max: 5}],\n          // we use value to lift the priority when min === max\n          item.value = interval[0];\n        }\n      }\n\n      item.visual = VisualMapping.retrieveVisuals(pieceListItem);\n      outPieceList.push(item);\n    }, this); // See \"Order Rule\".\n\n    normalizeReverse(thisOption, outPieceList); // Only pieces\n\n    reformIntervals(outPieceList);\n    zrUtil.each(outPieceList, function (piece) {\n      var close = piece.close;\n      var edgeSymbols = [['<', ''][close[1]], ['>', ''][close[0]]];\n      piece.text = piece.text || this.formatValueText(piece.value != null ? piece.value : piece.interval, false, edgeSymbols);\n    }, this);\n  }\n};\n\nfunction normalizeReverse(thisOption, pieceList) {\n  var inverse = thisOption.inverse;\n\n  if (thisOption.orient === 'vertical' ? !inverse : inverse) {\n    pieceList.reverse();\n  }\n}\n\nexport default PiecewiseModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport VisualMapView from './VisualMapView';\nimport * as graphic from '../../util/graphic';\nimport { createSymbol } from '../../util/symbol';\nimport * as layout from '../../util/layout';\nimport * as helper from './helper';\n\nvar PiecewiseVisualMapView =\n/** @class */\nfunction (_super) {\n  __extends(PiecewiseVisualMapView, _super);\n\n  function PiecewiseVisualMapView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = PiecewiseVisualMapView.type;\n    return _this;\n  }\n\n  PiecewiseVisualMapView.prototype.doRender = function () {\n    var thisGroup = this.group;\n    thisGroup.removeAll();\n    var visualMapModel = this.visualMapModel;\n    var textGap = visualMapModel.get('textGap');\n    var textStyleModel = visualMapModel.textStyleModel;\n    var textFont = textStyleModel.getFont();\n    var textFill = textStyleModel.getTextColor();\n\n    var itemAlign = this._getItemAlign();\n\n    var itemSize = visualMapModel.itemSize;\n\n    var viewData = this._getViewData();\n\n    var endsText = viewData.endsText;\n    var showLabel = zrUtil.retrieve(visualMapModel.get('showLabel', true), !endsText);\n    endsText && this._renderEndsText(thisGroup, endsText[0], itemSize, showLabel, itemAlign);\n    zrUtil.each(viewData.viewPieceList, function (item) {\n      var piece = item.piece;\n      var itemGroup = new graphic.Group();\n      itemGroup.onclick = zrUtil.bind(this._onItemClick, this, piece);\n\n      this._enableHoverLink(itemGroup, item.indexInModelPieceList); // TODO Category\n\n\n      var representValue = visualMapModel.getRepresentValue(piece);\n\n      this._createItemSymbol(itemGroup, representValue, [0, 0, itemSize[0], itemSize[1]]);\n\n      if (showLabel) {\n        var visualState = this.visualMapModel.getValueState(representValue);\n        itemGroup.add(new graphic.Text({\n          style: {\n            x: itemAlign === 'right' ? -textGap : itemSize[0] + textGap,\n            y: itemSize[1] / 2,\n            text: piece.text,\n            verticalAlign: 'middle',\n            align: itemAlign,\n            font: textFont,\n            fill: textFill,\n            opacity: visualState === 'outOfRange' ? 0.5 : 1\n          }\n        }));\n      }\n\n      thisGroup.add(itemGroup);\n    }, this);\n    endsText && this._renderEndsText(thisGroup, endsText[1], itemSize, showLabel, itemAlign);\n    layout.box(visualMapModel.get('orient'), thisGroup, visualMapModel.get('itemGap'));\n    this.renderBackground(thisGroup);\n    this.positionGroup(thisGroup);\n  };\n\n  PiecewiseVisualMapView.prototype._enableHoverLink = function (itemGroup, pieceIndex) {\n    var _this = this;\n\n    itemGroup.on('mouseover', function () {\n      return onHoverLink('highlight');\n    }).on('mouseout', function () {\n      return onHoverLink('downplay');\n    });\n\n    var onHoverLink = function onHoverLink(method) {\n      var visualMapModel = _this.visualMapModel; // TODO: TYPE More detailed action types\n\n      visualMapModel.option.hoverLink && _this.api.dispatchAction({\n        type: method,\n        batch: helper.makeHighDownBatch(visualMapModel.findTargetDataIndices(pieceIndex), visualMapModel)\n      });\n    };\n  };\n\n  PiecewiseVisualMapView.prototype._getItemAlign = function () {\n    var visualMapModel = this.visualMapModel;\n    var modelOption = visualMapModel.option;\n\n    if (modelOption.orient === 'vertical') {\n      return helper.getItemAlign(visualMapModel, this.api, visualMapModel.itemSize);\n    } else {\n      // horizontal, most case left unless specifying right.\n      var align = modelOption.align;\n\n      if (!align || align === 'auto') {\n        align = 'left';\n      }\n\n      return align;\n    }\n  };\n\n  PiecewiseVisualMapView.prototype._renderEndsText = function (group, text, itemSize, showLabel, itemAlign) {\n    if (!text) {\n      return;\n    }\n\n    var itemGroup = new graphic.Group();\n    var textStyleModel = this.visualMapModel.textStyleModel;\n    itemGroup.add(new graphic.Text({\n      style: {\n        x: showLabel ? itemAlign === 'right' ? itemSize[0] : 0 : itemSize[0] / 2,\n        y: itemSize[1] / 2,\n        verticalAlign: 'middle',\n        align: showLabel ? itemAlign : 'center',\n        text: text,\n        font: textStyleModel.getFont(),\n        fill: textStyleModel.getTextColor()\n      }\n    }));\n    group.add(itemGroup);\n  };\n  /**\n   * @private\n   * @return {Object} {peiceList, endsText} The order is the same as screen pixel order.\n   */\n\n\n  PiecewiseVisualMapView.prototype._getViewData = function () {\n    var visualMapModel = this.visualMapModel;\n    var viewPieceList = zrUtil.map(visualMapModel.getPieceList(), function (piece, index) {\n      return {\n        piece: piece,\n        indexInModelPieceList: index\n      };\n    });\n    var endsText = visualMapModel.get('text'); // Consider orient and inverse.\n\n    var orient = visualMapModel.get('orient');\n    var inverse = visualMapModel.get('inverse'); // Order of model pieceList is always [low, ..., high]\n\n    if (orient === 'horizontal' ? inverse : !inverse) {\n      viewPieceList.reverse();\n    } // Origin order of endsText is [high, low]\n    else if (endsText) {\n      endsText = endsText.slice().reverse();\n    }\n\n    return {\n      viewPieceList: viewPieceList,\n      endsText: endsText\n    };\n  };\n\n  PiecewiseVisualMapView.prototype._createItemSymbol = function (group, representValue, shapeParam) {\n    group.add(createSymbol( // symbol will be string\n    this.getControllerVisual(representValue, 'symbol'), shapeParam[0], shapeParam[1], shapeParam[2], shapeParam[3], // color will be string\n    this.getControllerVisual(representValue, 'color')));\n  };\n\n  PiecewiseVisualMapView.prototype._onItemClick = function (piece) {\n    var visualMapModel = this.visualMapModel;\n    var option = visualMapModel.option;\n    var selected = zrUtil.clone(option.selected);\n    var newKey = visualMapModel.getSelectedMapKey(piece);\n\n    if (option.selectedMode === 'single') {\n      selected[newKey] = true;\n      zrUtil.each(selected, function (o, key) {\n        selected[key] = key === newKey;\n      });\n    } else {\n      selected[newKey] = !selected[newKey];\n    }\n\n    this.api.dispatchAction({\n      type: 'selectDataRange',\n      from: this.uid,\n      visualMapId: this.visualMapModel.id,\n      selected: selected\n    });\n  };\n\n  PiecewiseVisualMapView.type = 'visualMap.piecewise';\n  return PiecewiseVisualMapView;\n}(VisualMapView);\n\nexport default PiecewiseVisualMapView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport PiecewiseModel from './PiecewiseModel';\nimport PiecewiseView from './PiecewiseView';\nimport installCommon from './installCommon';\nexport function install(registers) {\n  registers.registerComponentModel(PiecewiseModel);\n  registers.registerComponentView(PiecewiseView);\n  installCommon(registers);\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { makeInner } from '../util/model';\nimport { getDecalFromPalette } from '../model/mixin/palette';\nvar DEFAULT_OPTION = {\n  label: {\n    enabled: true\n  },\n  decal: {\n    show: false\n  }\n};\nvar inner = makeInner();\nvar decalPaletteScope = {};\nexport default function ariaVisual(ecModel, api) {\n  var ariaModel = ecModel.getModel('aria'); // See \"area enabled\" detection code in `GlobalModel.ts`.\n\n  if (!ariaModel.get('enabled')) {\n    return;\n  }\n\n  var defaultOption = zrUtil.clone(DEFAULT_OPTION);\n  zrUtil.merge(defaultOption.label, ecModel.getLocaleModel().get('aria'), false);\n  zrUtil.merge(ariaModel.option, defaultOption, false);\n  setDecal();\n  setLabel();\n\n  function setDecal() {\n    var decalModel = ariaModel.getModel('decal');\n    var useDecal = decalModel.get('show');\n\n    if (useDecal) {\n      // Each type of series use one scope.\n      // Pie and funnel are using diferrent scopes\n      var paletteScopeGroupByType_1 = zrUtil.createHashMap();\n      ecModel.eachSeries(function (seriesModel) {\n        if (seriesModel.isColorBySeries()) {\n          return;\n        }\n\n        var decalScope = paletteScopeGroupByType_1.get(seriesModel.type);\n\n        if (!decalScope) {\n          decalScope = {};\n          paletteScopeGroupByType_1.set(seriesModel.type, decalScope);\n        }\n\n        inner(seriesModel).scope = decalScope;\n      });\n      ecModel.eachRawSeries(function (seriesModel) {\n        if (ecModel.isSeriesFiltered(seriesModel)) {\n          return;\n        }\n\n        if (typeof seriesModel.enableAriaDecal === 'function') {\n          // Let series define how to use decal palette on data\n          seriesModel.enableAriaDecal();\n          return;\n        }\n\n        var data = seriesModel.getData();\n\n        if (!seriesModel.isColorBySeries()) {\n          var dataAll_1 = seriesModel.getRawData();\n          var idxMap_1 = {};\n          var decalScope_1 = inner(seriesModel).scope;\n          data.each(function (idx) {\n            var rawIdx = data.getRawIndex(idx);\n            idxMap_1[rawIdx] = idx;\n          });\n          var dataCount_1 = dataAll_1.count();\n          dataAll_1.each(function (rawIdx) {\n            var idx = idxMap_1[rawIdx];\n            var name = dataAll_1.getName(rawIdx) || rawIdx + '';\n            var paletteDecal = getDecalFromPalette(seriesModel.ecModel, name, decalScope_1, dataCount_1);\n            var specifiedDecal = data.getItemVisual(idx, 'decal');\n            data.setItemVisual(idx, 'decal', mergeDecal(specifiedDecal, paletteDecal));\n          });\n        } else {\n          var paletteDecal = getDecalFromPalette(seriesModel.ecModel, seriesModel.name, decalPaletteScope, ecModel.getSeriesCount());\n          var specifiedDecal = data.getVisual('decal');\n          data.setVisual('decal', mergeDecal(specifiedDecal, paletteDecal));\n        }\n\n        function mergeDecal(specifiedDecal, paletteDecal) {\n          // Merge decal from palette to decal from itemStyle.\n          // User do not need to specify all of the decal props.\n          var resultDecal = specifiedDecal ? zrUtil.extend(zrUtil.extend({}, paletteDecal), specifiedDecal) : paletteDecal;\n          resultDecal.dirty = true;\n          return resultDecal;\n        }\n      });\n    }\n  }\n\n  function setLabel() {\n    var labelLocale = ecModel.getLocaleModel().get('aria');\n    var labelModel = ariaModel.getModel('label');\n    labelModel.option = zrUtil.defaults(labelModel.option, labelLocale);\n\n    if (!labelModel.get('enabled')) {\n      return;\n    }\n\n    var dom = api.getZr().dom;\n\n    if (labelModel.get('description')) {\n      dom.setAttribute('aria-label', labelModel.get('description'));\n      return;\n    }\n\n    var seriesCnt = ecModel.getSeriesCount();\n    var maxDataCnt = labelModel.get(['data', 'maxCount']) || 10;\n    var maxSeriesCnt = labelModel.get(['series', 'maxCount']) || 10;\n    var displaySeriesCnt = Math.min(seriesCnt, maxSeriesCnt);\n    var ariaLabel;\n\n    if (seriesCnt < 1) {\n      // No series, no aria label\n      return;\n    } else {\n      var title = getTitle();\n\n      if (title) {\n        var withTitle = labelModel.get(['general', 'withTitle']);\n        ariaLabel = replace(withTitle, {\n          title: title\n        });\n      } else {\n        ariaLabel = labelModel.get(['general', 'withoutTitle']);\n      }\n\n      var seriesLabels_1 = [];\n      var prefix = seriesCnt > 1 ? labelModel.get(['series', 'multiple', 'prefix']) : labelModel.get(['series', 'single', 'prefix']);\n      ariaLabel += replace(prefix, {\n        seriesCount: seriesCnt\n      });\n      ecModel.eachSeries(function (seriesModel, idx) {\n        if (idx < displaySeriesCnt) {\n          var seriesLabel = void 0;\n          var seriesName = seriesModel.get('name');\n          var withName = seriesName ? 'withName' : 'withoutName';\n          seriesLabel = seriesCnt > 1 ? labelModel.get(['series', 'multiple', withName]) : labelModel.get(['series', 'single', withName]);\n          seriesLabel = replace(seriesLabel, {\n            seriesId: seriesModel.seriesIndex,\n            seriesName: seriesModel.get('name'),\n            seriesType: getSeriesTypeName(seriesModel.subType)\n          });\n          var data = seriesModel.getData();\n\n          if (data.count() > maxDataCnt) {\n            // Show part of data\n            var partialLabel = labelModel.get(['data', 'partialData']);\n            seriesLabel += replace(partialLabel, {\n              displayCnt: maxDataCnt\n            });\n          } else {\n            seriesLabel += labelModel.get(['data', 'allData']);\n          }\n\n          var middleSeparator_1 = labelModel.get(['data', 'separator', 'middle']);\n          var endSeparator_1 = labelModel.get(['data', 'separator', 'end']);\n          var dataLabels = [];\n\n          for (var i = 0; i < data.count(); i++) {\n            if (i < maxDataCnt) {\n              var name_1 = data.getName(i);\n              var value = data.getValues(i);\n              var dataLabel = labelModel.get(['data', name_1 ? 'withName' : 'withoutName']);\n              dataLabels.push(replace(dataLabel, {\n                name: name_1,\n                value: value.join(middleSeparator_1)\n              }));\n            }\n          }\n\n          seriesLabel += dataLabels.join(middleSeparator_1) + endSeparator_1;\n          seriesLabels_1.push(seriesLabel);\n        }\n      });\n      var separatorModel = labelModel.getModel(['series', 'multiple', 'separator']);\n      var middleSeparator = separatorModel.get('middle');\n      var endSeparator = separatorModel.get('end');\n      ariaLabel += seriesLabels_1.join(middleSeparator) + endSeparator;\n      dom.setAttribute('aria-label', ariaLabel);\n    }\n  }\n\n  function replace(str, keyValues) {\n    if (typeof str !== 'string') {\n      return str;\n    }\n\n    var result = str;\n    zrUtil.each(keyValues, function (value, key) {\n      result = result.replace(new RegExp('\\\\{\\\\s*' + key + '\\\\s*\\\\}', 'g'), value);\n    });\n    return result;\n  }\n\n  function getTitle() {\n    var title = ecModel.get('title');\n\n    if (title && title.length) {\n      title = title[0];\n    }\n\n    return title && title.text;\n  }\n\n  function getSeriesTypeName(type) {\n    return ecModel.getLocaleModel().get(['series', 'typeNames'])[type] || '';\n  }\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nexport default function ariaPreprocessor(option) {\n  if (!option || !option.aria) {\n    return;\n  }\n\n  var aria = option.aria; // aria.show is deprecated and should use aria.enabled instead\n\n  if (aria.show != null) {\n    aria.enabled = aria.show;\n  }\n\n  aria.label = aria.label || {}; // move description, general, series, data to be under aria.label\n\n  zrUtil.each(['description', 'general', 'series', 'data'], function (name) {\n    if (aria[name] != null) {\n      aria.label[name] = aria[name];\n    }\n  });\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { keys, isArray, map, isObject, isString, isRegExp, isArrayLike, hasOwn } from 'zrender/lib/core/util';\nimport { throwError, makePrintable } from './log';\nimport { getRawValueParser, createFilterComparator } from '../data/helper/dataValueHelper';\n;\nvar RELATIONAL_EXPRESSION_OP_ALIAS_MAP = {\n  value: 'eq',\n  // PENDING: not good for literal semantic?\n  '<': 'lt',\n  '<=': 'lte',\n  '>': 'gt',\n  '>=': 'gte',\n  '=': 'eq',\n  '!=': 'ne',\n  '<>': 'ne' // Might mileading for sake of the different between '==' and '===',\n  // So dont support them.\n  // '==': 'eq',\n  // '===': 'seq',\n  // '!==': 'sne'\n  // PENDING: Whether support some common alias \"ge\", \"le\", \"neq\"?\n  // ge: 'gte',\n  // le: 'lte',\n  // neq: 'ne',\n\n}; // type RelationalExpressionOpEvaluate = (tarVal: unknown, condVal: unknown) => boolean;\n\nvar RegExpEvaluator =\n/** @class */\nfunction () {\n  function RegExpEvaluator(rVal) {\n    // Support condVal: RegExp | string\n    var condValue = this._condVal = isString(rVal) ? new RegExp(rVal) : isRegExp(rVal) ? rVal : null;\n\n    if (condValue == null) {\n      var errMsg = '';\n\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = makePrintable('Illegal regexp', rVal, 'in');\n      }\n\n      throwError(errMsg);\n    }\n  }\n\n  RegExpEvaluator.prototype.evaluate = function (lVal) {\n    var type = typeof lVal;\n    return type === 'string' ? this._condVal.test(lVal) : type === 'number' ? this._condVal.test(lVal + '') : false;\n  };\n\n  return RegExpEvaluator;\n}();\n\nvar ConstConditionInternal =\n/** @class */\nfunction () {\n  function ConstConditionInternal() {}\n\n  ConstConditionInternal.prototype.evaluate = function () {\n    return this.value;\n  };\n\n  return ConstConditionInternal;\n}();\n\nvar AndConditionInternal =\n/** @class */\nfunction () {\n  function AndConditionInternal() {}\n\n  AndConditionInternal.prototype.evaluate = function () {\n    var children = this.children;\n\n    for (var i = 0; i < children.length; i++) {\n      if (!children[i].evaluate()) {\n        return false;\n      }\n    }\n\n    return true;\n  };\n\n  return AndConditionInternal;\n}();\n\nvar OrConditionInternal =\n/** @class */\nfunction () {\n  function OrConditionInternal() {}\n\n  OrConditionInternal.prototype.evaluate = function () {\n    var children = this.children;\n\n    for (var i = 0; i < children.length; i++) {\n      if (children[i].evaluate()) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  return OrConditionInternal;\n}();\n\nvar NotConditionInternal =\n/** @class */\nfunction () {\n  function NotConditionInternal() {}\n\n  NotConditionInternal.prototype.evaluate = function () {\n    return !this.child.evaluate();\n  };\n\n  return NotConditionInternal;\n}();\n\nvar RelationalConditionInternal =\n/** @class */\nfunction () {\n  function RelationalConditionInternal() {}\n\n  RelationalConditionInternal.prototype.evaluate = function () {\n    var needParse = !!this.valueParser; // Call getValue with no `this`.\n\n    var getValue = this.getValue;\n    var tarValRaw = getValue(this.valueGetterParam);\n    var tarValParsed = needParse ? this.valueParser(tarValRaw) : null; // Relational cond follow \"and\" logic internally.\n\n    for (var i = 0; i < this.subCondList.length; i++) {\n      if (!this.subCondList[i].evaluate(needParse ? tarValParsed : tarValRaw)) {\n        return false;\n      }\n    }\n\n    return true;\n  };\n\n  return RelationalConditionInternal;\n}();\n\nfunction parseOption(exprOption, getters) {\n  if (exprOption === true || exprOption === false) {\n    var cond = new ConstConditionInternal();\n    cond.value = exprOption;\n    return cond;\n  }\n\n  var errMsg = '';\n\n  if (!isObjectNotArray(exprOption)) {\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = makePrintable('Illegal config. Expect a plain object but actually', exprOption);\n    }\n\n    throwError(errMsg);\n  }\n\n  if (exprOption.and) {\n    return parseAndOrOption('and', exprOption, getters);\n  } else if (exprOption.or) {\n    return parseAndOrOption('or', exprOption, getters);\n  } else if (exprOption.not) {\n    return parseNotOption(exprOption, getters);\n  }\n\n  return parseRelationalOption(exprOption, getters);\n}\n\nfunction parseAndOrOption(op, exprOption, getters) {\n  var subOptionArr = exprOption[op];\n  var errMsg = '';\n\n  if (process.env.NODE_ENV !== 'production') {\n    errMsg = makePrintable('\"and\"/\"or\" condition should only be `' + op + ': [...]` and must not be empty array.', 'Illegal condition:', exprOption);\n  }\n\n  if (!isArray(subOptionArr)) {\n    throwError(errMsg);\n  }\n\n  if (!subOptionArr.length) {\n    throwError(errMsg);\n  }\n\n  var cond = op === 'and' ? new AndConditionInternal() : new OrConditionInternal();\n  cond.children = map(subOptionArr, function (subOption) {\n    return parseOption(subOption, getters);\n  });\n\n  if (!cond.children.length) {\n    throwError(errMsg);\n  }\n\n  return cond;\n}\n\nfunction parseNotOption(exprOption, getters) {\n  var subOption = exprOption.not;\n  var errMsg = '';\n\n  if (process.env.NODE_ENV !== 'production') {\n    errMsg = makePrintable('\"not\" condition should only be `not: {}`.', 'Illegal condition:', exprOption);\n  }\n\n  if (!isObjectNotArray(subOption)) {\n    throwError(errMsg);\n  }\n\n  var cond = new NotConditionInternal();\n  cond.child = parseOption(subOption, getters);\n\n  if (!cond.child) {\n    throwError(errMsg);\n  }\n\n  return cond;\n}\n\nfunction parseRelationalOption(exprOption, getters) {\n  var errMsg = '';\n  var valueGetterParam = getters.prepareGetValue(exprOption);\n  var subCondList = [];\n  var exprKeys = keys(exprOption);\n  var parserName = exprOption.parser;\n  var valueParser = parserName ? getRawValueParser(parserName) : null;\n\n  for (var i = 0; i < exprKeys.length; i++) {\n    var keyRaw = exprKeys[i];\n\n    if (keyRaw === 'parser' || getters.valueGetterAttrMap.get(keyRaw)) {\n      continue;\n    }\n\n    var op = hasOwn(RELATIONAL_EXPRESSION_OP_ALIAS_MAP, keyRaw) ? RELATIONAL_EXPRESSION_OP_ALIAS_MAP[keyRaw] : keyRaw;\n    var condValueRaw = exprOption[keyRaw];\n    var condValueParsed = valueParser ? valueParser(condValueRaw) : condValueRaw;\n    var evaluator = createFilterComparator(op, condValueParsed) || op === 'reg' && new RegExpEvaluator(condValueParsed);\n\n    if (!evaluator) {\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = makePrintable('Illegal relational operation: \"' + keyRaw + '\" in condition:', exprOption);\n      }\n\n      throwError(errMsg);\n    }\n\n    subCondList.push(evaluator);\n  }\n\n  if (!subCondList.length) {\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = makePrintable('Relational condition must have at least one operator.', 'Illegal condition:', exprOption);\n    } // No relational operator always disabled in case of dangers result.\n\n\n    throwError(errMsg);\n  }\n\n  var cond = new RelationalConditionInternal();\n  cond.valueGetterParam = valueGetterParam;\n  cond.valueParser = valueParser;\n  cond.getValue = getters.getValue;\n  cond.subCondList = subCondList;\n  return cond;\n}\n\nfunction isObjectNotArray(val) {\n  return isObject(val) && !isArrayLike(val);\n}\n\nvar ConditionalExpressionParsed =\n/** @class */\nfunction () {\n  function ConditionalExpressionParsed(exprOption, getters) {\n    this._cond = parseOption(exprOption, getters);\n  }\n\n  ConditionalExpressionParsed.prototype.evaluate = function () {\n    return this._cond.evaluate();\n  };\n\n  return ConditionalExpressionParsed;\n}();\n\n;\nexport function parseConditionalExpression(exprOption, getters) {\n  return new ConditionalExpressionParsed(exprOption, getters);\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { parseConditionalExpression } from '../../util/conditionalExpression';\nimport { hasOwn, createHashMap } from 'zrender/lib/core/util';\nimport { makePrintable, throwError } from '../../util/log';\nexport var filterTransform = {\n  type: 'echarts:filter',\n  // PEDING: enhance to filter by index rather than create new data\n  transform: function transform(params) {\n    // [Caveat] Fail-Fast:\n    // Do not return the whole dataset unless user config indicate it explicitly.\n    // For example, if no condition specified by mistake, return an empty result\n    // is better than return the entire raw soruce for user to find the mistake.\n    var upstream = params.upstream;\n    var rawItem;\n    var condition = parseConditionalExpression(params.config, {\n      valueGetterAttrMap: createHashMap({\n        dimension: true\n      }),\n      prepareGetValue: function prepareGetValue(exprOption) {\n        var errMsg = '';\n        var dimLoose = exprOption.dimension;\n\n        if (!hasOwn(exprOption, 'dimension')) {\n          if (process.env.NODE_ENV !== 'production') {\n            errMsg = makePrintable('Relation condition must has prop \"dimension\" specified.', 'Illegal condition:', exprOption);\n          }\n\n          throwError(errMsg);\n        }\n\n        var dimInfo = upstream.getDimensionInfo(dimLoose);\n\n        if (!dimInfo) {\n          if (process.env.NODE_ENV !== 'production') {\n            errMsg = makePrintable('Can not find dimension info via: ' + dimLoose + '.\\n', 'Existing dimensions: ', upstream.cloneAllDimensionInfo(), '.\\n', 'Illegal condition:', exprOption, '.\\n');\n          }\n\n          throwError(errMsg);\n        }\n\n        return {\n          dimIdx: dimInfo.index\n        };\n      },\n      getValue: function getValue(param) {\n        return upstream.retrieveValueFromItem(rawItem, param.dimIdx);\n      }\n    });\n    var resultData = [];\n\n    for (var i = 0, len = upstream.count(); i < len; i++) {\n      rawItem = upstream.getRawDataItem(i);\n\n      if (condition.evaluate()) {\n        resultData.push(rawItem);\n      }\n    }\n\n    return {\n      data: resultData\n    };\n  }\n};","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { SOURCE_FORMAT_ARRAY_ROWS, SOURCE_FORMAT_OBJECT_ROWS } from '../../util/types';\nimport { makePrintable, throwError } from '../../util/log';\nimport { each } from 'zrender/lib/core/util';\nimport { normalizeToArray } from '../../util/model';\nimport { getRawValueParser, SortOrderComparator } from '../../data/helper/dataValueHelper';\nvar sampleLog = '';\n\nif (process.env.NODE_ENV !== 'production') {\n  sampleLog = ['Valid config is like:', '{ dimension: \"age\", order: \"asc\" }', 'or [{ dimension: \"age\", order: \"asc\"], { dimension: \"date\", order: \"desc\" }]'].join(' ');\n}\n\nexport var sortTransform = {\n  type: 'echarts:sort',\n  transform: function transform(params) {\n    var upstream = params.upstream;\n    var config = params.config;\n    var errMsg = ''; // Normalize\n    // const orderExprList: OrderExpression[] = isArray(config[0])\n    //     ? config as OrderExpression[]\n    //     : [config as OrderExpression];\n\n    var orderExprList = normalizeToArray(config);\n\n    if (!orderExprList.length) {\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'Empty `config` in sort transform.';\n      }\n\n      throwError(errMsg);\n    }\n\n    var orderDefList = [];\n    each(orderExprList, function (orderExpr) {\n      var dimLoose = orderExpr.dimension;\n      var order = orderExpr.order;\n      var parserName = orderExpr.parser;\n      var incomparable = orderExpr.incomparable;\n\n      if (dimLoose == null) {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = 'Sort transform config must has \"dimension\" specified.' + sampleLog;\n        }\n\n        throwError(errMsg);\n      }\n\n      if (order !== 'asc' && order !== 'desc') {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = 'Sort transform config must has \"order\" specified.' + sampleLog;\n        }\n\n        throwError(errMsg);\n      }\n\n      if (incomparable && incomparable !== 'min' && incomparable !== 'max') {\n        var errMsg_1 = '';\n\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg_1 = 'incomparable must be \"min\" or \"max\" rather than \"' + incomparable + '\".';\n        }\n\n        throwError(errMsg_1);\n      }\n\n      if (order !== 'asc' && order !== 'desc') {\n        var errMsg_2 = '';\n\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg_2 = 'order must be \"asc\" or \"desc\" rather than \"' + order + '\".';\n        }\n\n        throwError(errMsg_2);\n      }\n\n      var dimInfo = upstream.getDimensionInfo(dimLoose);\n\n      if (!dimInfo) {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = makePrintable('Can not find dimension info via: ' + dimLoose + '.\\n', 'Existing dimensions: ', upstream.cloneAllDimensionInfo(), '.\\n', 'Illegal config:', orderExpr, '.\\n');\n        }\n\n        throwError(errMsg);\n      }\n\n      var parser = parserName ? getRawValueParser(parserName) : null;\n\n      if (parserName && !parser) {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = makePrintable('Invalid parser name ' + parserName + '.\\n', 'Illegal config:', orderExpr, '.\\n');\n        }\n\n        throwError(errMsg);\n      }\n\n      orderDefList.push({\n        dimIdx: dimInfo.index,\n        parser: parser,\n        comparator: new SortOrderComparator(order, incomparable)\n      });\n    }); // TODO: support it?\n\n    var sourceFormat = upstream.sourceFormat;\n\n    if (sourceFormat !== SOURCE_FORMAT_ARRAY_ROWS && sourceFormat !== SOURCE_FORMAT_OBJECT_ROWS) {\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'sourceFormat \"' + sourceFormat + '\" is not supported yet';\n      }\n\n      throwError(errMsg);\n    } // Other upstream format are all array.\n\n\n    var resultData = [];\n\n    for (var i = 0, len = upstream.count(); i < len; i++) {\n      resultData.push(upstream.getRawDataItem(i));\n    }\n\n    resultData.sort(function (item0, item1) {\n      for (var i = 0; i < orderDefList.length; i++) {\n        var orderDef = orderDefList[i];\n        var val0 = upstream.retrieveValueFromItem(item0, orderDef.dimIdx);\n        var val1 = upstream.retrieveValueFromItem(item1, orderDef.dimIdx);\n\n        if (orderDef.parser) {\n          val0 = orderDef.parser(val0);\n          val1 = orderDef.parser(val1);\n        }\n\n        var result = orderDef.comparator.evaluate(val0, val1);\n\n        if (result !== 0) {\n          return result;\n        }\n      }\n\n      return 0;\n    });\n    return {\n      data: resultData\n    };\n  }\n};","import { cubicSubdivide } from '../core/curve';\nimport PathProxy from '../core/PathProxy';\nvar CMD = PathProxy.CMD;\n\nfunction aroundEqual(a, b) {\n  return Math.abs(a - b) < 1e-5;\n}\n\nexport function pathToBezierCurves(path) {\n  var data = path.data;\n  var len = path.len();\n  var bezierArrayGroups = [];\n  var currentSubpath;\n  var xi = 0;\n  var yi = 0;\n  var x0 = 0;\n  var y0 = 0;\n\n  function createNewSubpath(x, y) {\n    if (currentSubpath && currentSubpath.length > 2) {\n      bezierArrayGroups.push(currentSubpath);\n    }\n\n    currentSubpath = [x, y];\n  }\n\n  function addLine(x0, y0, x1, y1) {\n    if (!(aroundEqual(x0, x1) && aroundEqual(y0, y1))) {\n      currentSubpath.push(x0, y0, x1, y1, x1, y1);\n    }\n  }\n\n  function addArc(startAngle, endAngle, cx, cy, rx, ry) {\n    var delta = Math.abs(endAngle - startAngle);\n    var len = Math.tan(delta / 4) * 4 / 3;\n    var dir = endAngle < startAngle ? -1 : 1;\n    var c1 = Math.cos(startAngle);\n    var s1 = Math.sin(startAngle);\n    var c2 = Math.cos(endAngle);\n    var s2 = Math.sin(endAngle);\n    var x1 = c1 * rx + cx;\n    var y1 = s1 * ry + cy;\n    var x4 = c2 * rx + cx;\n    var y4 = s2 * ry + cy;\n    var hx = rx * len * dir;\n    var hy = ry * len * dir;\n    currentSubpath.push(x1 - hx * s1, y1 + hy * c1, x4 + hx * s2, y4 - hy * c2, x4, y4);\n  }\n\n  var x1;\n  var y1;\n  var x2;\n  var y2;\n\n  for (var i = 0; i < len;) {\n    var cmd = data[i++];\n    var isFirst = i === 1;\n\n    if (isFirst) {\n      xi = data[i];\n      yi = data[i + 1];\n      x0 = xi;\n      y0 = yi;\n\n      if (cmd === CMD.L || cmd === CMD.C || cmd === CMD.Q) {\n        currentSubpath = [x0, y0];\n      }\n    }\n\n    switch (cmd) {\n      case CMD.M:\n        xi = x0 = data[i++];\n        yi = y0 = data[i++];\n        createNewSubpath(x0, y0);\n        break;\n\n      case CMD.L:\n        x1 = data[i++];\n        y1 = data[i++];\n        addLine(xi, yi, x1, y1);\n        xi = x1;\n        yi = y1;\n        break;\n\n      case CMD.C:\n        currentSubpath.push(data[i++], data[i++], data[i++], data[i++], xi = data[i++], yi = data[i++]);\n        break;\n\n      case CMD.Q:\n        x1 = data[i++];\n        y1 = data[i++];\n        x2 = data[i++];\n        y2 = data[i++];\n        currentSubpath.push(xi + 2 / 3 * (x1 - xi), yi + 2 / 3 * (y1 - yi), x2 + 2 / 3 * (x1 - x2), y2 + 2 / 3 * (y1 - y2), x2, y2);\n        xi = x2;\n        yi = y2;\n        break;\n\n      case CMD.A:\n        var cx = data[i++];\n        var cy = data[i++];\n        var rx = data[i++];\n        var ry = data[i++];\n        var startAngle = data[i++];\n        var endAngle = data[i++] + startAngle;\n        i += 1;\n        var anticlockwise = !data[i++];\n        x1 = Math.cos(startAngle) * rx + cx;\n        y1 = Math.sin(startAngle) * ry + cy;\n\n        if (isFirst) {\n          x0 = x1;\n          y0 = y1;\n          createNewSubpath(x0, y0);\n        } else {\n          addLine(xi, yi, x1, y1);\n        }\n\n        xi = Math.cos(endAngle) * rx + cx;\n        yi = Math.sin(endAngle) * ry + cy;\n        var step = (anticlockwise ? -1 : 1) * Math.PI / 2;\n\n        for (var angle = startAngle; anticlockwise ? angle > endAngle : angle < endAngle; angle += step) {\n          var nextAngle = anticlockwise ? Math.max(angle + step, endAngle) : Math.min(angle + step, endAngle);\n          addArc(angle, nextAngle, cx, cy, rx, ry);\n        }\n\n        break;\n\n      case CMD.R:\n        x0 = xi = data[i++];\n        y0 = yi = data[i++];\n        x1 = x0 + data[i++];\n        y1 = y0 + data[i++];\n        createNewSubpath(x1, y0);\n        addLine(x1, y0, x1, y1);\n        addLine(x1, y1, x0, y1);\n        addLine(x0, y1, x0, y0);\n        addLine(x0, y0, x1, y0);\n        break;\n\n      case CMD.Z:\n        currentSubpath && addLine(xi, yi, x0, y0);\n        xi = x0;\n        yi = y0;\n        break;\n    }\n  }\n\n  if (currentSubpath && currentSubpath.length > 2) {\n    bezierArrayGroups.push(currentSubpath);\n  }\n\n  return bezierArrayGroups;\n}\n\nfunction adpativeBezier(x0, y0, x1, y1, x2, y2, x3, y3, out, scale) {\n  if (aroundEqual(x0, x1) && aroundEqual(y0, y1) && aroundEqual(x2, x3) && aroundEqual(y2, y3)) {\n    out.push(x3, y3);\n    return;\n  }\n\n  var PIXEL_DISTANCE = 2 / scale;\n  var PIXEL_DISTANCE_SQR = PIXEL_DISTANCE * PIXEL_DISTANCE;\n  var dx = x3 - x0;\n  var dy = y3 - y0;\n  var d = Math.sqrt(dx * dx + dy * dy);\n  dx /= d;\n  dy /= d;\n  var dx1 = x1 - x0;\n  var dy1 = y1 - y0;\n  var dx2 = x2 - x3;\n  var dy2 = y2 - y3;\n  var cp1LenSqr = dx1 * dx1 + dy1 * dy1;\n  var cp2LenSqr = dx2 * dx2 + dy2 * dy2;\n\n  if (cp1LenSqr < PIXEL_DISTANCE_SQR && cp2LenSqr < PIXEL_DISTANCE_SQR) {\n    out.push(x3, y3);\n    return;\n  }\n\n  var projLen1 = dx * dx1 + dy * dy1;\n  var projLen2 = -dx * dx2 - dy * dy2;\n  var d1Sqr = cp1LenSqr - projLen1 * projLen1;\n  var d2Sqr = cp2LenSqr - projLen2 * projLen2;\n\n  if (d1Sqr < PIXEL_DISTANCE_SQR && projLen1 >= 0 && d2Sqr < PIXEL_DISTANCE_SQR && projLen2 >= 0) {\n    out.push(x3, y3);\n    return;\n  }\n\n  var tmpSegX = [];\n  var tmpSegY = [];\n  cubicSubdivide(x0, x1, x2, x3, 0.5, tmpSegX);\n  cubicSubdivide(y0, y1, y2, y3, 0.5, tmpSegY);\n  adpativeBezier(tmpSegX[0], tmpSegY[0], tmpSegX[1], tmpSegY[1], tmpSegX[2], tmpSegY[2], tmpSegX[3], tmpSegY[3], out, scale);\n  adpativeBezier(tmpSegX[4], tmpSegY[4], tmpSegX[5], tmpSegY[5], tmpSegX[6], tmpSegY[6], tmpSegX[7], tmpSegY[7], out, scale);\n}\n\nexport function pathToPolygons(path, scale) {\n  var bezierArrayGroups = pathToBezierCurves(path);\n  var polygons = [];\n  scale = scale || 1;\n\n  for (var i = 0; i < bezierArrayGroups.length; i++) {\n    var beziers = bezierArrayGroups[i];\n    var polygon = [];\n    var x0 = beziers[0];\n    var y0 = beziers[1];\n    polygon.push(x0, y0);\n\n    for (var k = 2; k < beziers.length;) {\n      var x1 = beziers[k++];\n      var y1 = beziers[k++];\n      var x2 = beziers[k++];\n      var y2 = beziers[k++];\n      var x3 = beziers[k++];\n      var y3 = beziers[k++];\n      adpativeBezier(x0, y0, x1, y1, x2, y2, x3, y3, polygon, scale);\n      x0 = x3;\n      y0 = y3;\n    }\n\n    polygons.push(polygon);\n  }\n\n  return polygons;\n}","import { fromPoints } from '../core/bbox';\nimport BoundingRect from '../core/BoundingRect';\nimport Point from '../core/Point';\nimport { map } from '../core/util';\nimport Polygon from '../graphic/shape/Polygon';\nimport Rect from '../graphic/shape/Rect';\nimport Sector from '../graphic/shape/Sector';\nimport { pathToPolygons } from './convertPath';\nimport { clonePath } from './path';\n\nfunction getDividingGrids(dimSize, rowDim, count) {\n  var rowSize = dimSize[rowDim];\n  var columnSize = dimSize[1 - rowDim];\n  var ratio = Math.abs(rowSize / columnSize);\n  var rowCount = Math.ceil(Math.sqrt(ratio * count));\n  var columnCount = Math.floor(count / rowCount);\n\n  if (columnCount === 0) {\n    columnCount = 1;\n    rowCount = count;\n  }\n\n  var grids = [];\n\n  for (var i = 0; i < rowCount; i++) {\n    grids.push(columnCount);\n  }\n\n  var currentCount = rowCount * columnCount;\n  var remained = count - currentCount;\n\n  if (remained > 0) {\n    for (var i = 0; i < remained; i++) {\n      grids[i % rowCount] += 1;\n    }\n  }\n\n  return grids;\n}\n\nfunction divideSector(sectorShape, count, outShapes) {\n  var r0 = sectorShape.r0;\n  var r = sectorShape.r;\n  var startAngle = sectorShape.startAngle;\n  var endAngle = sectorShape.endAngle;\n  var angle = Math.abs(endAngle - startAngle);\n  var arcLen = angle * r;\n  var deltaR = r - r0;\n  var isAngleRow = arcLen > Math.abs(deltaR);\n  var grids = getDividingGrids([arcLen, deltaR], isAngleRow ? 0 : 1, count);\n  var rowSize = (isAngleRow ? angle : deltaR) / grids.length;\n\n  for (var row = 0; row < grids.length; row++) {\n    var columnSize = (isAngleRow ? deltaR : angle) / grids[row];\n\n    for (var column = 0; column < grids[row]; column++) {\n      var newShape = {};\n\n      if (isAngleRow) {\n        newShape.startAngle = startAngle + rowSize * row;\n        newShape.endAngle = startAngle + rowSize * (row + 1);\n        newShape.r0 = r0 + columnSize * column;\n        newShape.r = r0 + columnSize * (column + 1);\n      } else {\n        newShape.startAngle = startAngle + columnSize * column;\n        newShape.endAngle = startAngle + columnSize * (column + 1);\n        newShape.r0 = r0 + rowSize * row;\n        newShape.r = r0 + rowSize * (row + 1);\n      }\n\n      newShape.clockwise = sectorShape.clockwise;\n      newShape.cx = sectorShape.cx;\n      newShape.cy = sectorShape.cy;\n      outShapes.push(newShape);\n    }\n  }\n}\n\nfunction divideRect(rectShape, count, outShapes) {\n  var width = rectShape.width;\n  var height = rectShape.height;\n  var isHorizontalRow = width > height;\n  var grids = getDividingGrids([width, height], isHorizontalRow ? 0 : 1, count);\n  var rowSizeDim = isHorizontalRow ? 'width' : 'height';\n  var columnSizeDim = isHorizontalRow ? 'height' : 'width';\n  var rowDim = isHorizontalRow ? 'x' : 'y';\n  var columnDim = isHorizontalRow ? 'y' : 'x';\n  var rowSize = rectShape[rowSizeDim] / grids.length;\n\n  for (var row = 0; row < grids.length; row++) {\n    var columnSize = rectShape[columnSizeDim] / grids[row];\n\n    for (var column = 0; column < grids[row]; column++) {\n      var newShape = {};\n      newShape[rowDim] = row * rowSize;\n      newShape[columnDim] = column * columnSize;\n      newShape[rowSizeDim] = rowSize;\n      newShape[columnSizeDim] = columnSize;\n      newShape.x += rectShape.x;\n      newShape.y += rectShape.y;\n      outShapes.push(newShape);\n    }\n  }\n}\n\nfunction crossProduct2d(x1, y1, x2, y2) {\n  return x1 * y2 - x2 * y1;\n}\n\nfunction lineLineIntersect(a1x, a1y, a2x, a2y, b1x, b1y, b2x, b2y) {\n  var mx = a2x - a1x;\n  var my = a2y - a1y;\n  var nx = b2x - b1x;\n  var ny = b2y - b1y;\n  var nmCrossProduct = crossProduct2d(nx, ny, mx, my);\n\n  if (Math.abs(nmCrossProduct) < 1e-6) {\n    return null;\n  }\n\n  var b1a1x = a1x - b1x;\n  var b1a1y = a1y - b1y;\n  var p = crossProduct2d(b1a1x, b1a1y, nx, ny) / nmCrossProduct;\n\n  if (p < 0 || p > 1) {\n    return null;\n  }\n\n  return new Point(p * mx + a1x, p * my + a1y);\n}\n\nfunction projPtOnLine(pt, lineA, lineB) {\n  var dir = new Point();\n  Point.sub(dir, lineB, lineA);\n  dir.normalize();\n  var dir2 = new Point();\n  Point.sub(dir2, pt, lineA);\n  var len = dir2.dot(dir);\n  return len;\n}\n\nfunction addToPoly(poly, pt) {\n  var last = poly[poly.length - 1];\n\n  if (last && last[0] === pt[0] && last[1] === pt[1]) {\n    return;\n  }\n\n  poly.push(pt);\n}\n\nfunction splitPolygonByLine(points, lineA, lineB) {\n  var len = points.length;\n  var intersections = [];\n\n  for (var i = 0; i < len; i++) {\n    var p0 = points[i];\n    var p1 = points[(i + 1) % len];\n    var intersectionPt = lineLineIntersect(p0[0], p0[1], p1[0], p1[1], lineA.x, lineA.y, lineB.x, lineB.y);\n\n    if (intersectionPt) {\n      intersections.push({\n        projPt: projPtOnLine(intersectionPt, lineA, lineB),\n        pt: intersectionPt,\n        idx: i\n      });\n    }\n  }\n\n  if (intersections.length < 2) {\n    return [{\n      points: points\n    }, {\n      points: points\n    }];\n  }\n\n  intersections.sort(function (a, b) {\n    return a.projPt - b.projPt;\n  });\n  var splitPt0 = intersections[0];\n  var splitPt1 = intersections[intersections.length - 1];\n\n  if (splitPt1.idx < splitPt0.idx) {\n    var tmp = splitPt0;\n    splitPt0 = splitPt1;\n    splitPt1 = tmp;\n  }\n\n  var splitPt0Arr = [splitPt0.pt.x, splitPt0.pt.y];\n  var splitPt1Arr = [splitPt1.pt.x, splitPt1.pt.y];\n  var newPolyA = [splitPt0Arr];\n  var newPolyB = [splitPt1Arr];\n\n  for (var i = splitPt0.idx + 1; i <= splitPt1.idx; i++) {\n    addToPoly(newPolyA, points[i].slice());\n  }\n\n  addToPoly(newPolyA, splitPt1Arr);\n  addToPoly(newPolyA, splitPt0Arr);\n\n  for (var i = splitPt1.idx + 1; i <= splitPt0.idx + len; i++) {\n    addToPoly(newPolyB, points[i % len].slice());\n  }\n\n  addToPoly(newPolyB, splitPt0Arr);\n  addToPoly(newPolyB, splitPt1Arr);\n  return [{\n    points: newPolyA\n  }, {\n    points: newPolyB\n  }];\n}\n\nfunction binaryDividePolygon(polygonShape) {\n  var points = polygonShape.points;\n  var min = [];\n  var max = [];\n  fromPoints(points, min, max);\n  var boundingRect = new BoundingRect(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n  var width = boundingRect.width;\n  var height = boundingRect.height;\n  var x = boundingRect.x;\n  var y = boundingRect.y;\n  var pt0 = new Point();\n  var pt1 = new Point();\n\n  if (width > height) {\n    pt0.x = pt1.x = x + width / 2;\n    pt0.y = y;\n    pt1.y = y + height;\n  } else {\n    pt0.y = pt1.y = y + height / 2;\n    pt0.x = x;\n    pt1.x = x + width;\n  }\n\n  return splitPolygonByLine(points, pt0, pt1);\n}\n\nfunction binaryDivideRecursive(divider, shape, count, out) {\n  if (count === 1) {\n    out.push(shape);\n  } else {\n    var mid = Math.floor(count / 2);\n    var sub = divider(shape);\n    binaryDivideRecursive(divider, sub[0], mid, out);\n    binaryDivideRecursive(divider, sub[1], count - mid, out);\n  }\n\n  return out;\n}\n\nexport function clone(path, count) {\n  var paths = [];\n\n  for (var i = 0; i < count; i++) {\n    paths.push(clonePath(path));\n  }\n\n  return paths;\n}\n\nfunction copyPathProps(source, target) {\n  target.setStyle(source.style);\n  target.z = source.z;\n  target.z2 = source.z2;\n  target.zlevel = source.zlevel;\n}\n\nfunction polygonConvert(points) {\n  var out = [];\n\n  for (var i = 0; i < points.length;) {\n    out.push([points[i++], points[i++]]);\n  }\n\n  return out;\n}\n\nexport function split(path, count) {\n  var outShapes = [];\n  var shape = path.shape;\n  var OutShapeCtor;\n\n  switch (path.type) {\n    case 'rect':\n      divideRect(shape, count, outShapes);\n      OutShapeCtor = Rect;\n      break;\n\n    case 'sector':\n      divideSector(shape, count, outShapes);\n      OutShapeCtor = Sector;\n      break;\n\n    case 'circle':\n      divideSector({\n        r0: 0,\n        r: shape.r,\n        startAngle: 0,\n        endAngle: Math.PI * 2,\n        cx: shape.cx,\n        cy: shape.cy\n      }, count, outShapes);\n      OutShapeCtor = Sector;\n      break;\n\n    default:\n      var m = path.getComputedTransform();\n      var scale = m ? Math.sqrt(Math.max(m[0] * m[0] + m[1] * m[1], m[2] * m[2] + m[3] * m[3])) : 1;\n      var polygons = map(pathToPolygons(path.getUpdatedPathProxy(), scale), function (poly) {\n        return polygonConvert(poly);\n      });\n      var polygonCount = polygons.length;\n\n      if (polygonCount === 0) {\n        binaryDivideRecursive(binaryDividePolygon, {\n          points: polygons[0]\n        }, count, outShapes);\n      } else if (polygonCount === count) {\n        for (var i = 0; i < polygonCount; i++) {\n          outShapes.push({\n            points: polygons[i]\n          });\n        }\n      } else {\n        var totalArea_1 = 0;\n        var items = map(polygons, function (poly) {\n          var min = [];\n          var max = [];\n          fromPoints(poly, min, max);\n          var area = (max[1] - min[1]) * (max[0] - min[0]);\n          totalArea_1 += area;\n          return {\n            poly: poly,\n            area: area\n          };\n        });\n        items.sort(function (a, b) {\n          return b.area - a.area;\n        });\n        var left = count;\n\n        for (var i = 0; i < polygonCount; i++) {\n          var item = items[i];\n\n          if (left <= 0) {\n            break;\n          }\n\n          var selfCount = i === polygonCount - 1 ? left : Math.ceil(item.area / totalArea_1 * count);\n\n          if (selfCount < 0) {\n            continue;\n          }\n\n          binaryDivideRecursive(binaryDividePolygon, {\n            points: item.poly\n          }, selfCount, outShapes);\n          left -= selfCount;\n        }\n\n        ;\n      }\n\n      OutShapeCtor = Polygon;\n      break;\n  }\n\n  if (!OutShapeCtor) {\n    return clone(path, count);\n  }\n\n  var out = [];\n\n  for (var i = 0; i < outShapes.length; i++) {\n    var subPath = new OutShapeCtor();\n    subPath.setShape(outShapes[i]);\n    copyPathProps(path, subPath);\n    out.push(subPath);\n  }\n\n  return out;\n}","import { cubicSubdivide } from '../core/curve';\nimport Path from '../graphic/Path';\nimport { defaults, map } from '../core/util';\nimport { lerp } from '../core/vector';\nimport { clonePath } from './path';\nimport Transformable from '../core/Transformable';\nimport { split } from './dividePath';\nimport { pathToBezierCurves } from './convertPath';\n\nfunction alignSubpath(subpath1, subpath2) {\n  var len1 = subpath1.length;\n  var len2 = subpath2.length;\n\n  if (len1 === len2) {\n    return [subpath1, subpath2];\n  }\n\n  var tmpSegX = [];\n  var tmpSegY = [];\n  var shorterPath = len1 < len2 ? subpath1 : subpath2;\n  var shorterLen = Math.min(len1, len2);\n  var diff = Math.abs(len2 - len1) / 6;\n  var shorterBezierCount = (shorterLen - 2) / 6;\n  var eachCurveSubDivCount = Math.ceil(diff / shorterBezierCount) + 1;\n  var newSubpath = [shorterPath[0], shorterPath[1]];\n  var remained = diff;\n\n  for (var i = 2; i < shorterLen;) {\n    var x0 = shorterPath[i - 2];\n    var y0 = shorterPath[i - 1];\n    var x1 = shorterPath[i++];\n    var y1 = shorterPath[i++];\n    var x2 = shorterPath[i++];\n    var y2 = shorterPath[i++];\n    var x3 = shorterPath[i++];\n    var y3 = shorterPath[i++];\n\n    if (remained <= 0) {\n      newSubpath.push(x1, y1, x2, y2, x3, y3);\n      continue;\n    }\n\n    var actualSubDivCount = Math.min(remained, eachCurveSubDivCount - 1) + 1;\n\n    for (var k = 1; k <= actualSubDivCount; k++) {\n      var p = k / actualSubDivCount;\n      cubicSubdivide(x0, x1, x2, x3, p, tmpSegX);\n      cubicSubdivide(y0, y1, y2, y3, p, tmpSegY);\n      x0 = tmpSegX[3];\n      y0 = tmpSegY[3];\n      newSubpath.push(tmpSegX[1], tmpSegY[1], tmpSegX[2], tmpSegY[2], x0, y0);\n      x1 = tmpSegX[5];\n      y1 = tmpSegY[5];\n      x2 = tmpSegX[6];\n      y2 = tmpSegY[6];\n    }\n\n    remained -= actualSubDivCount - 1;\n  }\n\n  return shorterPath === subpath1 ? [newSubpath, subpath2] : [subpath1, newSubpath];\n}\n\nfunction createSubpath(lastSubpathSubpath, otherSubpath) {\n  var len = lastSubpathSubpath.length;\n  var lastX = lastSubpathSubpath[len - 2];\n  var lastY = lastSubpathSubpath[len - 1];\n  var newSubpath = [];\n\n  for (var i = 0; i < otherSubpath.length;) {\n    newSubpath[i++] = lastX;\n    newSubpath[i++] = lastY;\n  }\n\n  return newSubpath;\n}\n\nexport function alignBezierCurves(array1, array2) {\n  var _a;\n\n  var lastSubpath1;\n  var lastSubpath2;\n  var newArray1 = [];\n  var newArray2 = [];\n\n  for (var i = 0; i < Math.max(array1.length, array2.length); i++) {\n    var subpath1 = array1[i];\n    var subpath2 = array2[i];\n    var newSubpath1 = void 0;\n    var newSubpath2 = void 0;\n\n    if (!subpath1) {\n      newSubpath1 = createSubpath(lastSubpath1 || subpath2, subpath2);\n      newSubpath2 = subpath2;\n    } else if (!subpath2) {\n      newSubpath2 = createSubpath(lastSubpath2 || subpath1, subpath1);\n      newSubpath1 = subpath1;\n    } else {\n      _a = alignSubpath(subpath1, subpath2), newSubpath1 = _a[0], newSubpath2 = _a[1];\n      lastSubpath1 = newSubpath1;\n      lastSubpath2 = newSubpath2;\n    }\n\n    newArray1.push(newSubpath1);\n    newArray2.push(newSubpath2);\n  }\n\n  return [newArray1, newArray2];\n}\nexport function centroid(array) {\n  var signedArea = 0;\n  var cx = 0;\n  var cy = 0;\n  var len = array.length;\n\n  for (var i = 0, j = len - 2; i < len; j = i, i += 2) {\n    var x0 = array[j];\n    var y0 = array[j + 1];\n    var x1 = array[i];\n    var y1 = array[i + 1];\n    var a = x0 * y1 - x1 * y0;\n    signedArea += a;\n    cx += (x0 + x1) * a;\n    cy += (y0 + y1) * a;\n  }\n\n  if (signedArea === 0) {\n    return [array[0] || 0, array[1] || 0];\n  }\n\n  return [cx / signedArea / 3, cy / signedArea / 3, signedArea];\n}\n\nfunction findBestRingOffset(fromSubBeziers, toSubBeziers, fromCp, toCp) {\n  var bezierCount = (fromSubBeziers.length - 2) / 6;\n  var bestScore = Infinity;\n  var bestOffset = 0;\n  var len = fromSubBeziers.length;\n  var len2 = len - 2;\n\n  for (var offset = 0; offset < bezierCount; offset++) {\n    var cursorOffset = offset * 6;\n    var score = 0;\n\n    for (var k = 0; k < len; k += 2) {\n      var idx = k === 0 ? cursorOffset : (cursorOffset + k - 2) % len2 + 2;\n      var x0 = fromSubBeziers[idx] - fromCp[0];\n      var y0 = fromSubBeziers[idx + 1] - fromCp[1];\n      var x1 = toSubBeziers[k] - toCp[0];\n      var y1 = toSubBeziers[k + 1] - toCp[1];\n      var dx = x1 - x0;\n      var dy = y1 - y0;\n      score += dx * dx + dy * dy;\n    }\n\n    if (score < bestScore) {\n      bestScore = score;\n      bestOffset = offset;\n    }\n  }\n\n  return bestOffset;\n}\n\nfunction reverse(array) {\n  var newArr = [];\n  var len = array.length;\n\n  for (var i = 0; i < len; i += 2) {\n    newArr[i] = array[len - i - 2];\n    newArr[i + 1] = array[len - i - 1];\n  }\n\n  return newArr;\n}\n\nfunction findBestMorphingRotation(fromArr, toArr, searchAngleIteration, searchAngleRange) {\n  var result = [];\n  var fromNeedsReverse;\n\n  for (var i = 0; i < fromArr.length; i++) {\n    var fromSubpathBezier = fromArr[i];\n    var toSubpathBezier = toArr[i];\n    var fromCp = centroid(fromSubpathBezier);\n    var toCp = centroid(toSubpathBezier);\n\n    if (fromNeedsReverse == null) {\n      fromNeedsReverse = fromCp[2] < 0 !== toCp[2] < 0;\n    }\n\n    var newFromSubpathBezier = [];\n    var newToSubpathBezier = [];\n    var bestAngle = 0;\n    var bestScore = Infinity;\n    var tmpArr = [];\n    var len = fromSubpathBezier.length;\n\n    if (fromNeedsReverse) {\n      fromSubpathBezier = reverse(fromSubpathBezier);\n    }\n\n    var offset = findBestRingOffset(fromSubpathBezier, toSubpathBezier, fromCp, toCp) * 6;\n    var len2 = len - 2;\n\n    for (var k = 0; k < len2; k += 2) {\n      var idx = (offset + k) % len2 + 2;\n      newFromSubpathBezier[k + 2] = fromSubpathBezier[idx] - fromCp[0];\n      newFromSubpathBezier[k + 3] = fromSubpathBezier[idx + 1] - fromCp[1];\n    }\n\n    newFromSubpathBezier[0] = fromSubpathBezier[offset] - fromCp[0];\n    newFromSubpathBezier[1] = fromSubpathBezier[offset + 1] - fromCp[1];\n\n    if (searchAngleIteration > 0) {\n      var step = searchAngleRange / searchAngleIteration;\n\n      for (var angle = -searchAngleRange / 2; angle <= searchAngleRange / 2; angle += step) {\n        var sa = Math.sin(angle);\n        var ca = Math.cos(angle);\n        var score = 0;\n\n        for (var k = 0; k < fromSubpathBezier.length; k += 2) {\n          var x0 = newFromSubpathBezier[k];\n          var y0 = newFromSubpathBezier[k + 1];\n          var x1 = toSubpathBezier[k] - toCp[0];\n          var y1 = toSubpathBezier[k + 1] - toCp[1];\n          var newX1 = x1 * ca - y1 * sa;\n          var newY1 = x1 * sa + y1 * ca;\n          tmpArr[k] = newX1;\n          tmpArr[k + 1] = newY1;\n          var dx = newX1 - x0;\n          var dy = newY1 - y0;\n          score += dx * dx + dy * dy;\n        }\n\n        if (score < bestScore) {\n          bestScore = score;\n          bestAngle = angle;\n\n          for (var m = 0; m < tmpArr.length; m++) {\n            newToSubpathBezier[m] = tmpArr[m];\n          }\n        }\n      }\n    } else {\n      for (var i_1 = 0; i_1 < len; i_1 += 2) {\n        newToSubpathBezier[i_1] = toSubpathBezier[i_1] - toCp[0];\n        newToSubpathBezier[i_1 + 1] = toSubpathBezier[i_1 + 1] - toCp[1];\n      }\n    }\n\n    result.push({\n      from: newFromSubpathBezier,\n      to: newToSubpathBezier,\n      fromCp: fromCp,\n      toCp: toCp,\n      rotation: -bestAngle\n    });\n  }\n\n  return result;\n}\n\nexport function isCombineMorphing(path) {\n  return path.__isCombineMorphing;\n}\nexport function isMorphing(el) {\n  return el.__morphT >= 0;\n}\nvar SAVED_METHOD_PREFIX = '__mOriginal_';\n\nfunction saveAndModifyMethod(obj, methodName, modifiers) {\n  var savedMethodName = SAVED_METHOD_PREFIX + methodName;\n  var originalMethod = obj[savedMethodName] || obj[methodName];\n\n  if (!obj[savedMethodName]) {\n    obj[savedMethodName] = obj[methodName];\n  }\n\n  var replace = modifiers.replace;\n  var after = modifiers.after;\n  var before = modifiers.before;\n\n  obj[methodName] = function () {\n    var args = arguments;\n    var res;\n    before && before.apply(this, args);\n\n    if (replace) {\n      res = replace.apply(this, args);\n    } else {\n      res = originalMethod.apply(this, args);\n    }\n\n    after && after.apply(this, args);\n    return res;\n  };\n}\n\nfunction restoreMethod(obj, methodName) {\n  var savedMethodName = SAVED_METHOD_PREFIX + methodName;\n\n  if (obj[savedMethodName]) {\n    obj[methodName] = obj[savedMethodName];\n    obj[savedMethodName] = null;\n  }\n}\n\nfunction applyTransformOnBeziers(bezierCurves, mm) {\n  for (var i = 0; i < bezierCurves.length; i++) {\n    var subBeziers = bezierCurves[i];\n\n    for (var k = 0; k < subBeziers.length;) {\n      var x = subBeziers[k];\n      var y = subBeziers[k + 1];\n      subBeziers[k++] = mm[0] * x + mm[2] * y + mm[4];\n      subBeziers[k++] = mm[1] * x + mm[3] * y + mm[5];\n    }\n  }\n}\n\nfunction prepareMorphPath(fromPath, toPath) {\n  var fromPathProxy = fromPath.getUpdatedPathProxy();\n  var toPathProxy = toPath.getUpdatedPathProxy();\n\n  var _a = alignBezierCurves(pathToBezierCurves(fromPathProxy), pathToBezierCurves(toPathProxy)),\n      fromBezierCurves = _a[0],\n      toBezierCurves = _a[1];\n\n  var fromPathTransform = fromPath.getComputedTransform();\n  var toPathTransform = toPath.getComputedTransform();\n\n  function updateIdentityTransform() {\n    this.transform = null;\n  }\n\n  fromPathTransform && applyTransformOnBeziers(fromBezierCurves, fromPathTransform);\n  toPathTransform && applyTransformOnBeziers(toBezierCurves, toPathTransform);\n  saveAndModifyMethod(toPath, 'updateTransform', {\n    replace: updateIdentityTransform\n  });\n  toPath.transform = null;\n  var morphingData = findBestMorphingRotation(fromBezierCurves, toBezierCurves, 10, Math.PI);\n  var tmpArr = [];\n  saveAndModifyMethod(toPath, 'buildPath', {\n    replace: function replace(path) {\n      var t = toPath.__morphT;\n      var onet = 1 - t;\n      var newCp = [];\n\n      for (var i = 0; i < morphingData.length; i++) {\n        var item = morphingData[i];\n        var from = item.from;\n        var to = item.to;\n        var angle = item.rotation * t;\n        var fromCp = item.fromCp;\n        var toCp = item.toCp;\n        var sa = Math.sin(angle);\n        var ca = Math.cos(angle);\n        lerp(newCp, fromCp, toCp, t);\n\n        for (var m = 0; m < from.length; m += 2) {\n          var x0_1 = from[m];\n          var y0_1 = from[m + 1];\n          var x1 = to[m];\n          var y1 = to[m + 1];\n          var x = x0_1 * onet + x1 * t;\n          var y = y0_1 * onet + y1 * t;\n          tmpArr[m] = x * ca - y * sa + newCp[0];\n          tmpArr[m + 1] = x * sa + y * ca + newCp[1];\n        }\n\n        var x0 = tmpArr[0];\n        var y0 = tmpArr[1];\n        path.moveTo(x0, y0);\n\n        for (var m = 2; m < from.length;) {\n          var x1 = tmpArr[m++];\n          var y1 = tmpArr[m++];\n          var x2 = tmpArr[m++];\n          var y2 = tmpArr[m++];\n          var x3 = tmpArr[m++];\n          var y3 = tmpArr[m++];\n\n          if (x0 === x1 && y0 === y1 && x2 === x3 && y2 === y3) {\n            path.lineTo(x3, y3);\n          } else {\n            path.bezierCurveTo(x1, y1, x2, y2, x3, y3);\n          }\n\n          x0 = x3;\n          y0 = y3;\n        }\n      }\n    }\n  });\n}\n\nexport function morphPath(fromPath, toPath, animationOpts) {\n  if (!fromPath || !toPath) {\n    return toPath;\n  }\n\n  var oldDone = animationOpts.done;\n  var oldDuring = animationOpts.during;\n  prepareMorphPath(fromPath, toPath);\n  toPath.__morphT = 0;\n\n  function restoreToPath() {\n    restoreMethod(toPath, 'buildPath');\n    restoreMethod(toPath, 'updateTransform');\n    toPath.__morphT = -1;\n    toPath.createPathProxy();\n    toPath.dirtyShape();\n  }\n\n  toPath.animateTo({\n    __morphT: 1\n  }, defaults({\n    during: function during(p) {\n      toPath.dirtyShape();\n      oldDuring && oldDuring(p);\n    },\n    done: function done() {\n      restoreToPath();\n      oldDone && oldDone();\n    }\n  }, animationOpts));\n  return toPath;\n}\n\nfunction hilbert(x, y, minX, minY, maxX, maxY) {\n  var bits = 16;\n  x = maxX === minX ? 0 : Math.round(32767 * (x - minX) / (maxX - minX));\n  y = maxY === minY ? 0 : Math.round(32767 * (y - minY) / (maxY - minY));\n  var d = 0;\n  var tmp;\n\n  for (var s = (1 << bits) / 2; s > 0; s /= 2) {\n    var rx = 0;\n    var ry = 0;\n\n    if ((x & s) > 0) {\n      rx = 1;\n    }\n\n    if ((y & s) > 0) {\n      ry = 1;\n    }\n\n    d += s * s * (3 * rx ^ ry);\n\n    if (ry === 0) {\n      if (rx === 1) {\n        x = s - 1 - x;\n        y = s - 1 - y;\n      }\n\n      tmp = x;\n      x = y;\n      y = tmp;\n    }\n  }\n\n  return d;\n}\n\nfunction sortPaths(pathList) {\n  var xMin = Infinity;\n  var yMin = Infinity;\n  var xMax = -Infinity;\n  var yMax = -Infinity;\n  var cps = map(pathList, function (path) {\n    var rect = path.getBoundingRect();\n    var m = path.getComputedTransform();\n    var x = rect.x + rect.width / 2 + (m ? m[4] : 0);\n    var y = rect.y + rect.height / 2 + (m ? m[5] : 0);\n    xMin = Math.min(x, xMin);\n    yMin = Math.min(y, yMin);\n    xMax = Math.max(x, xMax);\n    yMax = Math.max(y, yMax);\n    return [x, y];\n  });\n  var items = map(cps, function (cp, idx) {\n    return {\n      cp: cp,\n      z: hilbert(cp[0], cp[1], xMin, yMin, xMax, yMax),\n      path: pathList[idx]\n    };\n  });\n  return items.sort(function (a, b) {\n    return a.z - b.z;\n  }).map(function (item) {\n    return item.path;\n  });\n}\n\n;\n\nfunction defaultDividePath(param) {\n  return split(param.path, param.count);\n}\n\nfunction createEmptyReturn() {\n  return {\n    fromIndividuals: [],\n    toIndividuals: [],\n    count: 0\n  };\n}\n\nexport function combineMorph(fromList, toPath, animationOpts) {\n  var fromPathList = [];\n\n  function addFromPath(fromList) {\n    for (var i = 0; i < fromList.length; i++) {\n      var from = fromList[i];\n\n      if (isCombineMorphing(from)) {\n        addFromPath(from.childrenRef());\n      } else if (from instanceof Path) {\n        fromPathList.push(from);\n      }\n    }\n  }\n\n  addFromPath(fromList);\n  var separateCount = fromPathList.length;\n\n  if (!separateCount) {\n    return createEmptyReturn();\n  }\n\n  var dividePath = animationOpts.dividePath || defaultDividePath;\n  var toSubPathList = dividePath({\n    path: toPath,\n    count: separateCount\n  });\n\n  if (toSubPathList.length !== separateCount) {\n    console.error('Invalid morphing: unmatched splitted path');\n    return createEmptyReturn();\n  }\n\n  fromPathList = sortPaths(fromPathList);\n  toSubPathList = sortPaths(toSubPathList);\n  var oldDone = animationOpts.done;\n  var oldDuring = animationOpts.during;\n  var individualDelay = animationOpts.individualDelay;\n  var identityTransform = new Transformable();\n\n  for (var i = 0; i < separateCount; i++) {\n    var from = fromPathList[i];\n    var to = toSubPathList[i];\n    to.parent = toPath;\n    to.copyTransform(identityTransform);\n\n    if (!individualDelay) {\n      prepareMorphPath(from, to);\n    }\n  }\n\n  toPath.__isCombineMorphing = true;\n\n  toPath.childrenRef = function () {\n    return toSubPathList;\n  };\n\n  function addToSubPathListToZr(zr) {\n    for (var i = 0; i < toSubPathList.length; i++) {\n      toSubPathList[i].addSelfToZr(zr);\n    }\n  }\n\n  saveAndModifyMethod(toPath, 'addSelfToZr', {\n    after: function after(zr) {\n      addToSubPathListToZr(zr);\n    }\n  });\n  saveAndModifyMethod(toPath, 'removeSelfFromZr', {\n    after: function after(zr) {\n      for (var i = 0; i < toSubPathList.length; i++) {\n        toSubPathList[i].removeSelfFromZr(zr);\n      }\n    }\n  });\n\n  function restoreToPath() {\n    toPath.__isCombineMorphing = false;\n    toPath.__morphT = -1;\n    toPath.childrenRef = null;\n    restoreMethod(toPath, 'addSelfToZr');\n    restoreMethod(toPath, 'removeSelfFromZr');\n  }\n\n  var toLen = toSubPathList.length;\n\n  if (individualDelay) {\n    var animating_1 = toLen;\n\n    var eachDone = function eachDone() {\n      animating_1--;\n\n      if (animating_1 === 0) {\n        restoreToPath();\n        oldDone && oldDone();\n      }\n    };\n\n    for (var i = 0; i < toLen; i++) {\n      var indivdualAnimationOpts = individualDelay ? defaults({\n        delay: (animationOpts.delay || 0) + individualDelay(i, toLen, fromPathList[i], toSubPathList[i]),\n        done: eachDone\n      }, animationOpts) : animationOpts;\n      morphPath(fromPathList[i], toSubPathList[i], indivdualAnimationOpts);\n    }\n  } else {\n    toPath.__morphT = 0;\n    toPath.animateTo({\n      __morphT: 1\n    }, defaults({\n      during: function during(p) {\n        for (var i = 0; i < toLen; i++) {\n          var child = toSubPathList[i];\n          child.__morphT = toPath.__morphT;\n          child.dirtyShape();\n        }\n\n        oldDuring && oldDuring(p);\n      },\n      done: function done() {\n        restoreToPath();\n\n        for (var i = 0; i < fromList.length; i++) {\n          restoreMethod(fromList[i], 'updateTransform');\n        }\n\n        oldDone && oldDone();\n      }\n    }, animationOpts));\n  }\n\n  if (toPath.__zr) {\n    addToSubPathListToZr(toPath.__zr);\n  }\n\n  return {\n    fromIndividuals: fromPathList,\n    toIndividuals: toSubPathList,\n    count: toLen\n  };\n}\nexport function separateMorph(fromPath, toPathList, animationOpts) {\n  var toLen = toPathList.length;\n  var fromPathList = [];\n  var dividePath = animationOpts.dividePath || defaultDividePath;\n\n  function addFromPath(fromList) {\n    for (var i = 0; i < fromList.length; i++) {\n      var from = fromList[i];\n\n      if (isCombineMorphing(from)) {\n        addFromPath(from.childrenRef());\n      } else if (from instanceof Path) {\n        fromPathList.push(from);\n      }\n    }\n  }\n\n  if (isCombineMorphing(fromPath)) {\n    addFromPath(fromPath.childrenRef());\n    var fromLen = fromPathList.length;\n\n    if (fromLen < toLen) {\n      var k = 0;\n\n      for (var i = fromLen; i < toLen; i++) {\n        fromPathList.push(clonePath(fromPathList[k++ % fromLen]));\n      }\n    }\n\n    fromPathList.length = toLen;\n  } else {\n    fromPathList = dividePath({\n      path: fromPath,\n      count: toLen\n    });\n    var fromPathTransform = fromPath.getComputedTransform();\n\n    for (var i = 0; i < fromPathList.length; i++) {\n      fromPathList[i].setLocalTransform(fromPathTransform);\n    }\n\n    if (fromPathList.length !== toLen) {\n      console.error('Invalid morphing: unmatched splitted path');\n      return createEmptyReturn();\n    }\n  }\n\n  fromPathList = sortPaths(fromPathList);\n  toPathList = sortPaths(toPathList);\n  var individualDelay = animationOpts.individualDelay;\n\n  for (var i = 0; i < toLen; i++) {\n    var indivdualAnimationOpts = individualDelay ? defaults({\n      delay: (animationOpts.delay || 0) + individualDelay(i, toLen, fromPathList[i], toPathList[i])\n    }, animationOpts) : animationOpts;\n    morphPath(fromPathList[i], toPathList[i], indivdualAnimationOpts);\n  }\n\n  return {\n    fromIndividuals: fromPathList,\n    toIndividuals: toPathList,\n    count: toPathList.length\n  };\n}\nexport { split as defaultDividePath };","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { separateMorph, combineMorph, morphPath, isCombineMorphing } from 'zrender/lib/tool/morphPath';\nimport { Path } from '../util/graphic';\nimport { defaults, isArray } from 'zrender/lib/core/util';\nimport { getAnimationConfig } from './basicTrasition';\nimport { clonePath } from 'zrender/lib/tool/path';\n\nfunction isMultiple(elements) {\n  return isArray(elements[0]);\n}\n\nfunction prepareMorphBatches(one, many) {\n  var batches = [];\n  var batchCount = one.length;\n\n  for (var i = 0; i < batchCount; i++) {\n    batches.push({\n      one: one[i],\n      many: []\n    });\n  }\n\n  for (var i = 0; i < many.length; i++) {\n    var len = many[i].length;\n    var k = void 0;\n\n    for (k = 0; k < len; k++) {\n      batches[k % batchCount].many.push(many[i][k]);\n    }\n  }\n\n  var off = 0; // If one has more paths than each one of many. average them.\n\n  for (var i = batchCount - 1; i >= 0; i--) {\n    if (!batches[i].many.length) {\n      var moveFrom = batches[off].many;\n\n      if (moveFrom.length <= 1) {\n        // Not enough\n        // Start from the first one.\n        if (off) {\n          off = 0;\n        } else {\n          return batches;\n        }\n      }\n\n      var len = moveFrom.length;\n      var mid = Math.ceil(len / 2);\n      batches[i].many = moveFrom.slice(mid, len);\n      batches[off].many = moveFrom.slice(0, mid);\n      off++;\n    }\n  }\n\n  return batches;\n}\n\nvar pathDividers = {\n  clone: function clone(params) {\n    var ret = []; // Fitting the alpha\n\n    var approxOpacity = 1 - Math.pow(1 - params.path.style.opacity, 1 / params.count);\n\n    for (var i = 0; i < params.count; i++) {\n      var cloned = clonePath(params.path);\n      cloned.setStyle('opacity', approxOpacity);\n      ret.push(cloned);\n    }\n\n    return ret;\n  },\n  // Use the default divider\n  split: null\n};\nexport function applyMorphAnimation(from, to, divideShape, seriesModel, dataIndex, animateOtherProps) {\n  if (!from.length || !to.length) {\n    return;\n  }\n\n  var updateAnimationCfg = getAnimationConfig('update', seriesModel, dataIndex);\n\n  if (!(updateAnimationCfg && updateAnimationCfg.duration > 0)) {\n    return;\n  }\n\n  var animationDelay = seriesModel.getModel('universalTransition').get('delay');\n  var animationCfg = Object.assign({\n    // Need to setToFinal so the further calculation based on the style can be correct.\n    // Like emphasis color.\n    setToFinal: true\n  }, updateAnimationCfg);\n  var many;\n  var one;\n\n  if (isMultiple(from)) {\n    // manyToOne\n    many = from;\n    one = to;\n  }\n\n  if (isMultiple(to)) {\n    // oneToMany\n    many = to;\n    one = from;\n  }\n\n  function morphOneBatch(batch, fromIsMany, animateIndex, animateCount, forceManyOne) {\n    var batchMany = batch.many;\n    var batchOne = batch.one;\n\n    if (batchMany.length === 1 && !forceManyOne) {\n      // Is one to one\n      var batchFrom = fromIsMany ? batchMany[0] : batchOne;\n      var batchTo = fromIsMany ? batchOne : batchMany[0];\n\n      if (isCombineMorphing(batchFrom)) {\n        // Keep doing combine animation.\n        morphOneBatch({\n          many: [batchFrom],\n          one: batchTo\n        }, true, animateIndex, animateCount, true);\n      } else {\n        var individualAnimationCfg = animationDelay ? defaults({\n          delay: animationDelay(animateIndex, animateCount)\n        }, animationCfg) : animationCfg;\n        morphPath(batchFrom, batchTo, individualAnimationCfg);\n        animateOtherProps(batchFrom, batchTo, batchFrom, batchTo, individualAnimationCfg);\n      }\n    } else {\n      var separateAnimationCfg = defaults({\n        dividePath: pathDividers[divideShape],\n        individualDelay: animationDelay && function (idx, count, fromPath, toPath) {\n          return animationDelay(idx + animateIndex, animateCount);\n        }\n      }, animationCfg);\n\n      var _a = fromIsMany ? combineMorph(batchMany, batchOne, separateAnimationCfg) : separateMorph(batchOne, batchMany, separateAnimationCfg),\n          fromIndividuals = _a.fromIndividuals,\n          toIndividuals = _a.toIndividuals;\n\n      var count = fromIndividuals.length;\n\n      for (var k = 0; k < count; k++) {\n        var individualAnimationCfg = animationDelay ? defaults({\n          delay: animationDelay(k, count)\n        }, animationCfg) : animationCfg;\n        animateOtherProps(fromIndividuals[k], toIndividuals[k], fromIsMany ? batchMany[k] : batch.one, fromIsMany ? batch.one : batchMany[k], individualAnimationCfg);\n      }\n    }\n  }\n\n  var fromIsMany = many ? many === from // Is one to one. If the path number not match. also needs do merge and separate morphing.\n  : from.length > to.length;\n  var morphBatches = many ? prepareMorphBatches(one, many) : prepareMorphBatches(fromIsMany ? to : from, [fromIsMany ? from : to]);\n  var animateCount = 0;\n\n  for (var i = 0; i < morphBatches.length; i++) {\n    animateCount += morphBatches[i].many.length;\n  }\n\n  var animateIndex = 0;\n\n  for (var i = 0; i < morphBatches.length; i++) {\n    morphOneBatch(morphBatches[i], fromIsMany, animateIndex, animateCount);\n    animateIndex += morphBatches[i].many.length;\n  }\n}\nexport function getPathList(elements) {\n  if (!elements) {\n    return [];\n  }\n\n  if (isArray(elements)) {\n    var pathList_1 = [];\n\n    for (var i = 0; i < elements.length; i++) {\n      pathList_1.push(getPathList(elements[i]));\n    }\n\n    return pathList_1;\n  }\n\n  var pathList = [];\n  elements.traverse(function (el) {\n    if (el instanceof Path && !el.disableMorphing && !el.invisible && !el.ignore) {\n      pathList.push(el);\n    }\n  });\n  return pathList;\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Universal transitions that can animate between any shapes(series) and any properties in any amounts.\nimport { SERIES_UNIVERSAL_TRANSITION_PROP } from '../model/Series';\nimport { createHashMap, each, map, filter, isArray } from 'zrender/lib/core/util';\nimport { applyMorphAnimation, getPathList } from './morphTransitionHelper';\nimport Path from 'zrender/lib/graphic/Path';\nimport { initProps } from '../util/graphic';\nimport DataDiffer from '../data/DataDiffer';\nimport { makeInner, normalizeToArray } from '../util/model';\nimport { warn } from '../util/log';\nimport { getAnimationConfig, getOldStyle } from './basicTrasition';\nimport Displayable from 'zrender/lib/graphic/Displayable';\nvar DATA_COUNT_THRESHOLD = 1e4;\n;\nvar getUniversalTransitionGlobalStore = makeInner();\n\nfunction getGroupIdDimension(data) {\n  var dimensions = data.dimensions;\n\n  for (var i = 0; i < dimensions.length; i++) {\n    var dimInfo = data.getDimensionInfo(dimensions[i]);\n\n    if (dimInfo && dimInfo.otherDims.itemGroupId === 0) {\n      return dimensions[i];\n    }\n  }\n}\n\nfunction flattenDataDiffItems(list) {\n  var items = [];\n  each(list, function (seriesInfo) {\n    var data = seriesInfo.data;\n\n    if (data.count() > DATA_COUNT_THRESHOLD) {\n      if (process.env.NODE_ENV !== 'production') {\n        warn('Universal transition is disabled on large data > 10k.');\n      }\n\n      return;\n    }\n\n    var indices = data.getIndices();\n    var groupDim = getGroupIdDimension(data);\n\n    for (var dataIndex = 0; dataIndex < indices.length; dataIndex++) {\n      items.push({\n        data: data,\n        dim: seriesInfo.dim || groupDim,\n        divide: seriesInfo.divide,\n        dataIndex: dataIndex\n      });\n    }\n  });\n  return items;\n}\n\nfunction fadeInElement(newEl, newSeries, newIndex) {\n  newEl.traverse(function (el) {\n    if (el instanceof Path) {\n      // TODO use fade in animation for target element.\n      initProps(el, {\n        style: {\n          opacity: 0\n        }\n      }, newSeries, {\n        dataIndex: newIndex,\n        isFrom: true\n      });\n    }\n  });\n}\n\nfunction removeEl(el) {\n  if (el.parent) {\n    // Bake parent transform to element.\n    // So it can still have proper transform to transition after it's removed.\n    var computedTransform = el.getComputedTransform();\n    el.setLocalTransform(computedTransform);\n    el.parent.remove(el);\n  }\n}\n\nfunction stopAnimation(el) {\n  el.stopAnimation();\n\n  if (el.isGroup) {\n    el.traverse(function (child) {\n      child.stopAnimation();\n    });\n  }\n}\n\nfunction animateElementStyles(el, dataIndex, seriesModel) {\n  var animationConfig = getAnimationConfig('update', seriesModel, dataIndex);\n  animationConfig && el.traverse(function (child) {\n    if (child instanceof Displayable) {\n      var oldStyle = getOldStyle(child);\n\n      if (oldStyle) {\n        child.animateFrom({\n          style: oldStyle\n        }, animationConfig);\n      }\n    }\n  });\n}\n\nfunction isAllIdSame(oldDiffItems, newDiffItems) {\n  var len = oldDiffItems.length;\n\n  if (len !== newDiffItems.length) {\n    return false;\n  }\n\n  for (var i = 0; i < len; i++) {\n    var oldItem = oldDiffItems[i];\n    var newItem = newDiffItems[i];\n\n    if (oldItem.data.getId(oldItem.dataIndex) !== newItem.data.getId(newItem.dataIndex)) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction transitionBetween(oldList, newList, api) {\n  var oldDiffItems = flattenDataDiffItems(oldList);\n  var newDiffItems = flattenDataDiffItems(newList);\n\n  function updateMorphingPathProps(from, to, rawFrom, rawTo, animationCfg) {\n    if (rawFrom || from) {\n      to.animateFrom({\n        style: (rawFrom || from).style\n      }, animationCfg);\n    }\n  }\n\n  function findKeyDim(items) {\n    for (var i = 0; i < items.length; i++) {\n      if (items[i].dim) {\n        return items[i].dim;\n      }\n    }\n  }\n\n  var oldKeyDim = findKeyDim(oldDiffItems);\n  var newKeyDim = findKeyDim(newDiffItems);\n  var hasMorphAnimation = false;\n\n  function createKeyGetter(isOld, onlyGetId) {\n    return function (diffItem) {\n      var data = diffItem.data;\n      var dataIndex = diffItem.dataIndex; // TODO if specified dim\n\n      if (onlyGetId) {\n        return data.getId(dataIndex);\n      } // Use group id as transition key by default.\n      // So we can achieve multiple to multiple animation like drilldown / up naturally.\n      // If group id not exits. Use id instead. If so, only one to one transition will be applied.\n\n\n      var dataGroupId = data.hostModel && data.hostModel.get('dataGroupId'); // If specified key dimension(itemGroupId by default). Use this same dimension from other data.\n      // PENDING: If only use key dimension of newData.\n\n      var keyDim = isOld ? oldKeyDim || newKeyDim : newKeyDim || oldKeyDim;\n      var dimInfo = keyDim && data.getDimensionInfo(keyDim);\n      var dimOrdinalMeta = dimInfo && dimInfo.ordinalMeta;\n\n      if (dimInfo) {\n        // Get from encode.itemGroupId.\n        var key = data.get(dimInfo.name, dataIndex);\n\n        if (dimOrdinalMeta) {\n          return dimOrdinalMeta.categories[key] || key + '';\n        }\n\n        return key + '';\n      } // Get groupId from raw item. { groupId: '' }\n\n\n      var itemVal = data.getRawDataItem(dataIndex);\n\n      if (itemVal && itemVal.groupId) {\n        return itemVal.groupId + '';\n      }\n\n      return dataGroupId || data.getId(dataIndex);\n    };\n  } // Use id if it's very likely to be an one to one animation\n  // It's more robust than groupId\n  // TODO Check if key dimension is specified.\n\n\n  var useId = isAllIdSame(oldDiffItems, newDiffItems);\n  var isElementStillInChart = {};\n\n  if (!useId) {\n    // We may have different diff strategy with basicTransition if we use other dimension as key.\n    // If so, we can't simply check if oldEl is same with newEl. We need a map to check if oldEl is still being used in the new chart.\n    // We can't use the elements that already being morphed. Let it keep it's original basic transition.\n    for (var i = 0; i < newDiffItems.length; i++) {\n      var newItem = newDiffItems[i];\n      var el = newItem.data.getItemGraphicEl(newItem.dataIndex);\n\n      if (el) {\n        isElementStillInChart[el.id] = true;\n      }\n    }\n  }\n\n  function updateOneToOne(newIndex, oldIndex) {\n    var oldItem = oldDiffItems[oldIndex];\n    var newItem = newDiffItems[newIndex];\n    var newSeries = newItem.data.hostModel; // TODO Mark this elements is morphed and don't morph them anymore\n\n    var oldEl = oldItem.data.getItemGraphicEl(oldItem.dataIndex);\n    var newEl = newItem.data.getItemGraphicEl(newItem.dataIndex); // Can't handle same elements.\n\n    if (oldEl === newEl) {\n      newEl && animateElementStyles(newEl, newItem.dataIndex, newSeries);\n      return;\n    }\n\n    if ( // We can't use the elements that already being morphed\n    oldEl && isElementStillInChart[oldEl.id]) {\n      return;\n    }\n\n    if (newEl) {\n      // TODO: If keep animating the group in case\n      // some of the elements don't want to be morphed.\n      // TODO Label?\n      stopAnimation(newEl);\n\n      if (oldEl) {\n        stopAnimation(oldEl); // If old element is doing leaving animation. stop it and remove it immediately.\n\n        removeEl(oldEl);\n        hasMorphAnimation = true;\n        applyMorphAnimation(getPathList(oldEl), getPathList(newEl), newItem.divide, newSeries, newIndex, updateMorphingPathProps);\n      } else {\n        fadeInElement(newEl, newSeries, newIndex);\n      }\n    } // else keep oldEl leaving animation.\n\n  }\n\n  new DataDiffer(oldDiffItems, newDiffItems, createKeyGetter(true, useId), createKeyGetter(false, useId), null, 'multiple').update(updateOneToOne).updateManyToOne(function (newIndex, oldIndices) {\n    var newItem = newDiffItems[newIndex];\n    var newData = newItem.data;\n    var newSeries = newData.hostModel;\n    var newEl = newData.getItemGraphicEl(newItem.dataIndex);\n    var oldElsList = filter(map(oldIndices, function (idx) {\n      return oldDiffItems[idx].data.getItemGraphicEl(oldDiffItems[idx].dataIndex);\n    }), function (oldEl) {\n      return oldEl && oldEl !== newEl && !isElementStillInChart[oldEl.id];\n    });\n\n    if (newEl) {\n      stopAnimation(newEl);\n\n      if (oldElsList.length) {\n        // If old element is doing leaving animation. stop it and remove it immediately.\n        each(oldElsList, function (oldEl) {\n          stopAnimation(oldEl);\n          removeEl(oldEl);\n        });\n        hasMorphAnimation = true;\n        applyMorphAnimation(getPathList(oldElsList), getPathList(newEl), newItem.divide, newSeries, newIndex, updateMorphingPathProps);\n      } else {\n        fadeInElement(newEl, newSeries, newItem.dataIndex);\n      }\n    } // else keep oldEl leaving animation.\n\n  }).updateOneToMany(function (newIndices, oldIndex) {\n    var oldItem = oldDiffItems[oldIndex];\n    var oldEl = oldItem.data.getItemGraphicEl(oldItem.dataIndex); // We can't use the elements that already being morphed\n\n    if (oldEl && isElementStillInChart[oldEl.id]) {\n      return;\n    }\n\n    var newElsList = filter(map(newIndices, function (idx) {\n      return newDiffItems[idx].data.getItemGraphicEl(newDiffItems[idx].dataIndex);\n    }), function (el) {\n      return el && el !== oldEl;\n    });\n    var newSeris = newDiffItems[newIndices[0]].data.hostModel;\n\n    if (newElsList.length) {\n      each(newElsList, function (newEl) {\n        return stopAnimation(newEl);\n      });\n\n      if (oldEl) {\n        stopAnimation(oldEl); // If old element is doing leaving animation. stop it and remove it immediately.\n\n        removeEl(oldEl);\n        hasMorphAnimation = true;\n        applyMorphAnimation(getPathList(oldEl), getPathList(newElsList), oldItem.divide, // Use divide on old.\n        newSeris, newIndices[0], updateMorphingPathProps);\n      } else {\n        each(newElsList, function (newEl) {\n          return fadeInElement(newEl, newSeris, newIndices[0]);\n        });\n      }\n    } // else keep oldEl leaving animation.\n\n  }).updateManyToMany(function (newIndices, oldIndices) {\n    // If two data are same and both have groupId.\n    // Normally they should be diff by id.\n    new DataDiffer(oldIndices, newIndices, function (rawIdx) {\n      return oldDiffItems[rawIdx].data.getId(oldDiffItems[rawIdx].dataIndex);\n    }, function (rawIdx) {\n      return newDiffItems[rawIdx].data.getId(newDiffItems[rawIdx].dataIndex);\n    }).update(function (newIndex, oldIndex) {\n      // Use the original index\n      updateOneToOne(newIndices[newIndex], oldIndices[oldIndex]);\n    }).execute();\n  }).execute();\n\n  if (hasMorphAnimation) {\n    each(newList, function (_a) {\n      var data = _a.data;\n      var seriesModel = data.hostModel;\n      var view = seriesModel && api.getViewOfSeriesModel(seriesModel);\n      var animationCfg = getAnimationConfig('update', seriesModel, 0); // use 0 index.\n\n      if (view && seriesModel.isAnimationEnabled() && animationCfg && animationCfg.duration > 0) {\n        view.group.traverse(function (el) {\n          if (el instanceof Path && !el.animators.length) {\n            // We can't accept there still exists element that has no animation\n            // if universalTransition is enabled\n            el.animateFrom({\n              style: {\n                opacity: 0\n              }\n            }, animationCfg);\n          }\n        });\n      }\n    });\n  }\n}\n\nfunction getSeriesTransitionKey(series) {\n  var seriesKey = series.getModel('universalTransition').get('seriesKey');\n\n  if (!seriesKey) {\n    // Use series id by default.\n    return series.id;\n  }\n\n  return seriesKey;\n}\n\nfunction convertArraySeriesKeyToString(seriesKey) {\n  if (isArray(seriesKey)) {\n    // Order independent.\n    return seriesKey.sort().join(',');\n  }\n\n  return seriesKey;\n}\n\nfunction getDivideShapeFromData(data) {\n  if (data.hostModel) {\n    return data.hostModel.getModel('universalTransition').get('divideShape');\n  }\n}\n\nfunction findTransitionSeriesBatches(globalStore, params) {\n  var updateBatches = createHashMap();\n  var oldDataMap = createHashMap(); // Map that only store key in array seriesKey.\n  // Which is used to query the old data when transition from one to multiple series.\n\n  var oldDataMapForSplit = createHashMap();\n  each(globalStore.oldSeries, function (series, idx) {\n    var oldData = globalStore.oldData[idx];\n    var transitionKey = getSeriesTransitionKey(series);\n    var transitionKeyStr = convertArraySeriesKeyToString(transitionKey);\n    oldDataMap.set(transitionKeyStr, oldData);\n\n    if (isArray(transitionKey)) {\n      // Same key can't in different array seriesKey.\n      each(transitionKey, function (key) {\n        oldDataMapForSplit.set(key, {\n          data: oldData,\n          key: transitionKeyStr\n        });\n      });\n    }\n  });\n\n  function checkTransitionSeriesKeyDuplicated(transitionKeyStr) {\n    if (updateBatches.get(transitionKeyStr)) {\n      warn(\"Duplicated seriesKey in universalTransition \" + transitionKeyStr);\n    }\n  }\n\n  each(params.updatedSeries, function (series) {\n    if (series.isUniversalTransitionEnabled() && series.isAnimationEnabled()) {\n      var newData = series.getData();\n      var transitionKey = getSeriesTransitionKey(series);\n      var transitionKeyStr = convertArraySeriesKeyToString(transitionKey); // Only transition between series with same id.\n\n      var oldData = oldDataMap.get(transitionKeyStr); // string transition key is the best match.\n\n      if (oldData) {\n        if (process.env.NODE_ENV !== 'production') {\n          checkTransitionSeriesKeyDuplicated(transitionKeyStr);\n        } // TODO check if data is same?\n\n\n        updateBatches.set(transitionKeyStr, {\n          oldSeries: [{\n            divide: getDivideShapeFromData(oldData),\n            data: oldData\n          }],\n          newSeries: [{\n            divide: getDivideShapeFromData(newData),\n            data: newData\n          }]\n        });\n      } else {\n        // Transition from multiple series.\n        if (isArray(transitionKey)) {\n          if (process.env.NODE_ENV !== 'production') {\n            checkTransitionSeriesKeyDuplicated(transitionKeyStr);\n          }\n\n          var oldSeries_1 = [];\n          each(transitionKey, function (key) {\n            var oldData = oldDataMap.get(key);\n\n            if (oldData) {\n              oldSeries_1.push({\n                divide: getDivideShapeFromData(oldData),\n                data: oldData\n              });\n            }\n          });\n\n          if (oldSeries_1.length) {\n            updateBatches.set(transitionKeyStr, {\n              oldSeries: oldSeries_1,\n              newSeries: [{\n                data: newData,\n                divide: getDivideShapeFromData(newData)\n              }]\n            });\n          }\n        } else {\n          // Try transition to multiple series.\n          var oldData_1 = oldDataMapForSplit.get(transitionKey);\n\n          if (oldData_1) {\n            var batch = updateBatches.get(oldData_1.key);\n\n            if (!batch) {\n              batch = {\n                oldSeries: [{\n                  data: oldData_1.data,\n                  divide: getDivideShapeFromData(oldData_1.data)\n                }],\n                newSeries: []\n              };\n              updateBatches.set(oldData_1.key, batch);\n            }\n\n            batch.newSeries.push({\n              data: newData,\n              divide: getDivideShapeFromData(newData)\n            });\n          }\n        }\n      }\n    }\n  });\n  return updateBatches;\n}\n\nfunction querySeries(series, finder) {\n  for (var i = 0; i < series.length; i++) {\n    var found = finder.seriesIndex != null && finder.seriesIndex === series[i].seriesIndex || finder.seriesId != null && finder.seriesId === series[i].id;\n\n    if (found) {\n      return i;\n    }\n  }\n}\n\nfunction transitionSeriesFromOpt(transitionOpt, globalStore, params, api) {\n  var from = [];\n  var to = [];\n  each(normalizeToArray(transitionOpt.from), function (finder) {\n    var idx = querySeries(globalStore.oldSeries, finder);\n\n    if (idx >= 0) {\n      from.push({\n        data: globalStore.oldData[idx],\n        // TODO can specify divideShape in transition.\n        divide: getDivideShapeFromData(globalStore.oldData[idx]),\n        dim: finder.dimension\n      });\n    }\n  });\n  each(normalizeToArray(transitionOpt.to), function (finder) {\n    var idx = querySeries(params.updatedSeries, finder);\n\n    if (idx >= 0) {\n      var data = params.updatedSeries[idx].getData();\n      to.push({\n        data: data,\n        divide: getDivideShapeFromData(data),\n        dim: finder.dimension\n      });\n    }\n  });\n\n  if (from.length > 0 && to.length > 0) {\n    transitionBetween(from, to, api);\n  }\n}\n\nexport function installUniversalTransition(registers) {\n  registers.registerUpdateLifecycle('series:beforeupdate', function (ecMOdel, api, params) {\n    each(normalizeToArray(params.seriesTransition), function (transOpt) {\n      each(normalizeToArray(transOpt.to), function (finder) {\n        var series = params.updatedSeries;\n\n        for (var i = 0; i < series.length; i++) {\n          if (finder.seriesIndex != null && finder.seriesIndex === series[i].seriesIndex || finder.seriesId != null && finder.seriesId === series[i].id) {\n            series[i][SERIES_UNIVERSAL_TRANSITION_PROP] = true;\n          }\n        }\n      });\n    });\n  });\n  registers.registerUpdateLifecycle('series:transition', function (ecModel, api, params) {\n    // TODO api provide an namespace that can save stuff per instance\n    var globalStore = getUniversalTransitionGlobalStore(api); // TODO multiple to multiple series.\n\n    if (globalStore.oldSeries && params.updatedSeries && params.optionChanged) {\n      // Use give transition config if its' give;\n      var transitionOpt = params.seriesTransition;\n\n      if (transitionOpt) {\n        each(normalizeToArray(transitionOpt), function (opt) {\n          transitionSeriesFromOpt(opt, globalStore, params, api);\n        });\n      } else {\n        // Else guess from series based on transition series key.\n        var updateBatches_1 = findTransitionSeriesBatches(globalStore, params);\n        each(updateBatches_1.keys(), function (key) {\n          var batch = updateBatches_1.get(key);\n          transitionBetween(batch.oldSeries, batch.newSeries, api);\n        });\n      } // Reset\n\n\n      each(params.updatedSeries, function (series) {\n        // Reset;\n        if (series[SERIES_UNIVERSAL_TRANSITION_PROP]) {\n          series[SERIES_UNIVERSAL_TRANSITION_PROP] = false;\n        }\n      });\n    } // Save all series of current update. Not only the updated one.\n\n\n    var allSeries = ecModel.getSeries();\n    var savedSeries = globalStore.oldSeries = [];\n    var savedData = globalStore.oldData = [];\n\n    for (var i = 0; i < allSeries.length; i++) {\n      var data = allSeries[i].getData(); // Only save the data that can have transition.\n      // Avoid large data costing too much extra memory\n\n      if (data.count() < DATA_COUNT_THRESHOLD) {\n        savedSeries.push(allSeries[i]);\n        savedData.push(data);\n      }\n    }\n  });\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from './lib/extension';\nexport * from './lib/export/core'; // ----------------------------------------------\n// All of the modules that are allowed to be\n// imported are listed below.\n//\n// Users MUST NOT import other modules that are\n// not included in this list.\n// ----------------------------------------------\n\nimport { SVGRenderer, CanvasRenderer } from './lib/export/renderers';\nimport { LineChart, BarChart, PieChart, ScatterChart, RadarChart, MapChart, TreeChart, TreemapChart, GraphChart, GaugeChart, FunnelChart, ParallelChart, SankeyChart, BoxplotChart, CandlestickChart, EffectScatterChart, LinesChart, HeatmapChart, PictorialBarChart, ThemeRiverChart, SunburstChart, CustomChart } from './lib/export/charts';\nimport { GridComponent, PolarComponent, GeoComponent, SingleAxisComponent, ParallelComponent, CalendarComponent, GraphicComponent, ToolboxComponent, TooltipComponent, AxisPointerComponent, BrushComponent, TitleComponent, TimelineComponent, MarkPointComponent, MarkLineComponent, MarkAreaComponent, LegendComponent, DataZoomComponent, DataZoomInsideComponent, DataZoomSliderComponent, VisualMapComponent, VisualMapContinuousComponent, VisualMapPiecewiseComponent, AriaComponent, DatasetComponent, TransformComponent } from './lib/export/components';\nimport { UniversalTransition, LabelLayout } from './lib/export/features'; // -----------------\n// Render engines\n// -----------------\n// Render via Canvas.\n// echarts.init(dom, null, { renderer: 'canvas' })\n\nuse([CanvasRenderer]); // Render via SVG.\n// echarts.init(dom, null, { renderer: 'svg' })\n\nuse([SVGRenderer]); // ----------------\n// Charts (series)\n// ----------------\n// All of the series types, for example:\n// chart.setOption({\n//     series: [{\n//         type: 'line' // or 'bar', 'pie', ...\n//     }]\n// });\n\nuse([LineChart, BarChart, PieChart, ScatterChart, RadarChart, MapChart, TreeChart, TreemapChart, GraphChart, GaugeChart, FunnelChart, ParallelChart, SankeyChart, BoxplotChart, CandlestickChart, EffectScatterChart, LinesChart, HeatmapChart, PictorialBarChart, ThemeRiverChart, SunburstChart, CustomChart]); // -------------------\n// Coordinate systems\n// -------------------\n// All of the axis modules have been included in the\n// coordinate system module below, do not need to\n// make extra import.\n// `cartesian` coordinate system. For some historical\n// reasons, it is named as grid, for example:\n// chart.setOption({\n//     grid: {...},\n//     xAxis: {...},\n//     yAxis: {...},\n//     series: [{...}]\n// });\n\nuse(GridComponent); // `polar` coordinate system, for example:\n// chart.setOption({\n//     polar: {...},\n//     radiusAxis: {...},\n//     angleAxis: {...},\n//     series: [{\n//         coordinateSystem: 'polar'\n//     }]\n// });\n\nuse(PolarComponent); // `geo` coordinate system, for example:\n// chart.setOption({\n//     geo: {...},\n//     series: [{\n//         coordinateSystem: 'geo'\n//     }]\n// });\n\nuse(GeoComponent); // `singleAxis` coordinate system (notice, it is a coordinate system\n// with only one axis, work for chart like theme river), for example:\n// chart.setOption({\n//     singleAxis: {...}\n//     series: [{type: 'themeRiver', ...}]\n// });\n\nuse(SingleAxisComponent); // `parallel` coordinate system, only work for parallel series, for example:\n// chart.setOption({\n//     parallel: {...},\n//     parallelAxis: [{...}, ...],\n//     series: [{\n//         type: 'parallel'\n//     }]\n// });\n\nuse(ParallelComponent); // `calendar` coordinate system. for example,\n// chart.setOptionp({\n//     calendar: {...},\n//     series: [{\n//         coordinateSystem: 'calendar'\n//     }]\n// );\n\nuse(CalendarComponent); // ------------------\n// Other components\n// ------------------\n// `graphic` component, for example:\n// chart.setOption({\n//     graphic: {...}\n// });\n\nuse(GraphicComponent); // `toolbox` component, for example:\n// chart.setOption({\n//     toolbox: {...}\n// });\n\nuse(ToolboxComponent); // `tooltip` component, for example:\n// chart.setOption({\n//     tooltip: {...}\n// });\n\nuse(TooltipComponent); // `axisPointer` component, for example:\n// chart.setOption({\n//     tooltip: {axisPointer: {...}, ...}\n// });\n// Or\n// chart.setOption({\n//     axisPointer: {...}\n// });\n\nuse(AxisPointerComponent); // `brush` component, for example:\n// chart.setOption({\n//     brush: {...}\n// });\n// Or\n// chart.setOption({\n//     tooltip: {feature: {brush: {...}}\n// })\n\nuse(BrushComponent); // `title` component, for example:\n// chart.setOption({\n//     title: {...}\n// });\n\nuse(TitleComponent); // `timeline` component, for example:\n// chart.setOption({\n//     timeline: {...}\n// });\n\nuse(TimelineComponent); // `markPoint` component, for example:\n// chart.setOption({\n//     series: [{markPoint: {...}}]\n// });\n\nuse(MarkPointComponent); // `markLine` component, for example:\n// chart.setOption({\n//     series: [{markLine: {...}}]\n// });\n\nuse(MarkLineComponent); // `markArea` component, for example:\n// chart.setOption({\n//     series: [{markArea: {...}}]\n// });\n\nuse(MarkAreaComponent); // `legend` component not scrollable. for example:\n// chart.setOption({\n//     legend: {...}\n// });\n\nuse(LegendComponent); // `dataZoom` component including both `dataZoomInside` and `dataZoomSlider`.\n\nuse(DataZoomComponent); // `dataZoom` component providing drag, pinch, wheel behaviors\n// inside coodinate system, for example:\n// chart.setOption({\n//     dataZoom: {type: 'inside'}\n// });\n\nuse(DataZoomInsideComponent); // `dataZoom` component providing a slider bar, for example:\n// chart.setOption({\n//     dataZoom: {type: 'slider'}\n// });\n\nuse(DataZoomSliderComponent); // `visualMap` component including both `visualMapContinuous` and `visualMapPiecewise`.\n\nuse(VisualMapComponent); // `visualMap` component providing continuous bar, for example:\n// chart.setOption({\n//     visualMap: {type: 'continuous'}\n// });\n\nuse(VisualMapContinuousComponent); // `visualMap` component providing pieces bar, for example:\n// chart.setOption({\n//     visualMap: {type: 'piecewise'}\n// });\n\nuse(VisualMapPiecewiseComponent); // `aria` component providing aria, for example:\n// chart.setOption({\n//     aria: {...}\n// });\n\nuse(AriaComponent); // dataset transform\n// chart.setOption({\n//     dataset: {\n//          transform: []\n//     }\n// });\n\nuse(TransformComponent);\nuse(DatasetComponent); // universal transition\n// chart.setOption({\n//     series: {\n//         universalTransition: { enabled: true }\n//     }\n// })\n\nuse(UniversalTransition); // label layout\n// chart.setOption({\n//     series: {\n//         labelLayout: { hideOverlap: true }\n//     }\n// })\n\nuse(LabelLayout);","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport SVGPainter from 'zrender/lib/svg/Painter';\nexport function install(registers) {\n  registers.registerPainter('svg', SVGPainter);\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { createLegacyDataSelectAction } from '../../legacy/dataSelectAction';\nimport pieLayout from '../pie/pieLayout';\nimport dataFilter from '../../processor/dataFilter';\nimport { curry } from 'zrender/lib/core/util';\nimport PieView from './PieView';\nimport PieSeriesModel from './PieSeries';\nimport negativeDataFilter from '../../processor/negativeDataFilter';\nexport function install(registers) {\n  registers.registerChartView(PieView);\n  registers.registerSeriesModel(PieSeriesModel);\n  createLegacyDataSelectAction('pie', registers.registerAction);\n  registers.registerLayout(curry(pieLayout, 'pie'));\n  registers.registerProcessor(dataFilter('pie'));\n  registers.registerProcessor(negativeDataFilter('pie'));\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport default function negativeDataFilter(seriesType) {\n  return {\n    seriesType: seriesType,\n    reset: function reset(seriesModel, ecModel) {\n      var data = seriesModel.getData();\n      data.filterSelf(function (idx) {\n        // handle negative value condition\n        var valueDim = data.mapDimension('value');\n        var curValue = data.get(valueDim, idx);\n\n        if (typeof curValue === 'number' && !isNaN(curValue) && curValue < 0) {\n          return false;\n        }\n\n        return true;\n      });\n    }\n  };\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension';\nimport radarLayout from '../radar/radarLayout';\nimport dataFilter from '../../processor/dataFilter';\nimport backwardCompat from '../radar/backwardCompat';\nimport RadarView from './RadarView';\nimport RadarSeriesModel from './RadarSeries';\nimport { install as installRadarComponent } from '../../component/radar/install';\nexport function install(registers) {\n  use(installRadarComponent);\n  registers.registerChartView(RadarView);\n  registers.registerSeriesModel(RadarSeriesModel);\n  registers.registerLayout(radarLayout);\n  registers.registerProcessor(dataFilter('radar'));\n  registers.registerPreprocessor(backwardCompat);\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension';\nimport MapView from './MapView';\nimport MapSeries from './MapSeries';\nimport mapDataStatistic from './mapDataStatistic';\nimport mapSymbolLayout from './mapSymbolLayout';\nimport { createLegacyDataSelectAction } from '../../legacy/dataSelectAction';\nimport { install as installGeo } from '../../component/geo/install';\nexport function install(registers) {\n  use(installGeo);\n  registers.registerChartView(MapView);\n  registers.registerSeriesModel(MapSeries);\n  registers.registerLayout(mapSymbolLayout);\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC, mapDataStatistic);\n  createLegacyDataSelectAction('map', registers.registerAction);\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport TreeView from './TreeView';\nimport TreeSeriesModel from './TreeSeries';\nimport treeLayout from './treeLayout';\nimport treeVisual from './treeVisual';\nimport { installTreeAction } from './treeAction';\nexport function install(registers) {\n  registers.registerChartView(TreeView);\n  registers.registerSeriesModel(TreeSeriesModel);\n  registers.registerLayout(treeLayout);\n  registers.registerVisual(treeVisual);\n  installTreeAction(registers);\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { updateCenterAndZoom } from '../../action/roamHelper';\nexport function installTreeAction(registers) {\n  registers.registerAction({\n    type: 'treeExpandAndCollapse',\n    event: 'treeExpandAndCollapse',\n    update: 'update'\n  }, function (payload, ecModel) {\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'tree',\n      query: payload\n    }, function (seriesModel) {\n      var dataIndex = payload.dataIndex;\n      var tree = seriesModel.getData().tree;\n      var node = tree.getNodeByDataIndex(dataIndex);\n      node.isExpand = !node.isExpand;\n    });\n  });\n  registers.registerAction({\n    type: 'treeRoam',\n    event: 'treeRoam',\n    // Here we set 'none' instead of 'update', because roam action\n    // just need to update the transform matrix without having to recalculate\n    // the layout. So don't need to go through the whole update process, such\n    // as 'dataPrcocess', 'coordSystemUpdate', 'layout' and so on.\n    update: 'none'\n  }, function (payload, ecModel) {\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'tree',\n      query: payload\n    }, function (seriesModel) {\n      var coordSys = seriesModel.coordinateSystem;\n      var res = updateCenterAndZoom(coordSys, payload);\n      seriesModel.setCenter && seriesModel.setCenter(res.center);\n      seriesModel.setZoom && seriesModel.setZoom(res.zoom);\n    });\n  });\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { installTreemapAction } from './treemapAction';\nimport TreemapSeriesModel from './TreemapSeries';\nimport TreemapView from './TreemapView';\nimport treemapVisual from './treemapVisual';\nimport treemapLayout from './treemapLayout';\nexport function install(registers) {\n  registers.registerSeriesModel(TreemapSeriesModel);\n  registers.registerChartView(TreemapView);\n  registers.registerVisual(treemapVisual);\n  registers.registerLayout(treemapLayout);\n  installTreemapAction(registers);\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport GaugeView from './GaugeView';\nimport GaugeSeriesModel from './GaugeSeries';\nexport function install(registers) {\n  registers.registerChartView(GaugeView);\n  registers.registerSeriesModel(GaugeSeriesModel);\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport FunnelView from './FunnelView';\nimport FunnelSeriesModel from './FunnelSeries';\nimport funnelLayout from './funnelLayout';\nimport dataFilter from '../../processor/dataFilter';\nexport function install(registers) {\n  registers.registerChartView(FunnelView);\n  registers.registerSeriesModel(FunnelSeriesModel);\n  registers.registerLayout(funnelLayout);\n  registers.registerProcessor(dataFilter('funnel'));\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension';\nimport ParallelView from './ParallelView';\nimport ParallelSeriesModel from './ParallelSeries';\nimport parallelVisual from './parallelVisual';\nimport { install as installParallelComponent } from '../../component/parallel/install';\nexport function install(registers) {\n  use(installParallelComponent);\n  registers.registerChartView(ParallelView);\n  registers.registerSeriesModel(ParallelSeriesModel);\n  registers.registerVisual(registers.PRIORITY.VISUAL.BRUSH, parallelVisual);\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport SankeyView from './SankeyView';\nimport SankeySeriesModel from './SankeySeries';\nimport sankeyLayout from './sankeyLayout';\nimport sankeyVisual from './sankeyVisual';\nexport function install(registers) {\n  registers.registerChartView(SankeyView);\n  registers.registerSeriesModel(SankeySeriesModel);\n  registers.registerLayout(sankeyLayout);\n  registers.registerVisual(sankeyVisual);\n  registers.registerAction({\n    type: 'dragNode',\n    event: 'dragnode',\n    // here can only use 'update' now, other value is not support in echarts.\n    update: 'update'\n  }, function (payload, ecModel) {\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'sankey',\n      query: payload\n    }, function (seriesModel) {\n      seriesModel.setNodePosition(payload.dataIndex, [payload.localX, payload.localY]);\n    });\n  });\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport BoxplotSeriesModel from './BoxplotSeries';\nimport BoxplotView from './BoxplotView';\nimport boxplotVisual from './boxplotVisual';\nimport boxplotLayout from './boxplotLayout';\nimport { boxplotTransform } from './boxplotTransform';\nexport function install(registers) {\n  registers.registerSeriesModel(BoxplotSeriesModel);\n  registers.registerChartView(BoxplotView);\n  registers.registerVisual(boxplotVisual);\n  registers.registerLayout(boxplotLayout);\n  registers.registerTransform(boxplotTransform);\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport CandlestickView from './CandlestickView';\nimport CandlestickSeriesModel from './CandlestickSeries';\nimport preprocessor from './preprocessor';\nimport candlestickVisual from './candlestickVisual';\nimport candlestickLayout from './candlestickLayout';\nexport function install(registers) {\n  registers.registerChartView(CandlestickView);\n  registers.registerSeriesModel(CandlestickSeriesModel);\n  registers.registerPreprocessor(preprocessor);\n  registers.registerVisual(candlestickVisual);\n  registers.registerLayout(candlestickLayout);\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport EffectScatterView from './EffectScatterView';\nimport EffectScatterSeriesModel from './EffectScatterSeries';\nimport layoutPoints from '../../layout/points';\nexport function install(registers) {\n  registers.registerChartView(EffectScatterView);\n  registers.registerSeriesModel(EffectScatterSeriesModel);\n  registers.registerLayout(layoutPoints('effectScatter'));\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport LinesView from './LinesView';\nimport LinesSeriesModel from './LinesSeries';\nimport linesLayout from './linesLayout';\nimport linesVisual from './linesVisual';\nexport function install(registers) {\n  registers.registerChartView(LinesView);\n  registers.registerSeriesModel(LinesSeriesModel);\n  registers.registerLayout(linesLayout);\n  registers.registerVisual(linesVisual);\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport HeatmapView from './HeatmapView';\nimport HeatmapSeriesModel from './HeatmapSeries';\nexport function install(registers) {\n  registers.registerChartView(HeatmapView);\n  registers.registerSeriesModel(HeatmapSeriesModel);\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport PictorialBarView from './PictorialBarView';\nimport PictorialBarSeriesModel from './PictorialBarSeries';\nimport { layout } from '../../layout/barGrid';\nimport { curry } from 'zrender/lib/core/util';\nexport function install(registers) {\n  registers.registerChartView(PictorialBarView);\n  registers.registerSeriesModel(PictorialBarSeriesModel);\n  registers.registerLayout(curry(layout, 'pictorialBar'));\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\nimport ThemeRiverView from './ThemeRiverView';\nimport ThemeRiverSeriesModel from './ThemeRiverSeries';\nimport themeRiverLayout from './themeRiverLayout';\nimport dataFilter from '../../processor/dataFilter';\nexport function install(registers) {\n  registers.registerChartView(ThemeRiverView);\n  registers.registerSeriesModel(ThemeRiverSeriesModel);\n  registers.registerLayout(themeRiverLayout);\n  registers.registerProcessor(dataFilter('themeRiver'));\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport SunburstView from './SunburstView';\nimport SunburstSeriesModel from './SunburstSeries';\nimport sunburstLayout from './sunburstLayout';\nimport sunburstVisual from './sunburstVisual';\nimport dataFilter from '../../processor/dataFilter';\nimport { curry } from 'zrender/lib/core/util';\nimport { installSunburstAction } from './sunburstAction';\nexport function install(registers) {\n  registers.registerChartView(SunburstView);\n  registers.registerSeriesModel(SunburstSeriesModel);\n  registers.registerLayout(curry(sunburstLayout, 'sunburst'));\n  registers.registerProcessor(curry(dataFilter, 'sunburst'));\n  registers.registerVisual(sunburstVisual);\n  installSunburstAction(registers);\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport CustomSeriesModel from './CustomSeries';\nimport CustomChartView from './CustomView';\nexport function install(registers) {\n  registers.registerChartView(CustomChartView);\n  registers.registerSeriesModel(CustomSeriesModel);\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { install as installSimple } from './installSimple';\nimport { install as installAxisPointer } from '../axisPointer/install';\nimport { use } from '../../extension';\nexport function install(registers) {\n  use(installSimple);\n  use(installAxisPointer);\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport CalendarModel from '../../coord/calendar/CalendarModel';\nimport CalendarView from './CalendarView';\nimport Calendar from '../../coord/calendar/Calendar';\nexport function install(registers) {\n  registers.registerComponentModel(CalendarModel);\n  registers.registerComponentView(CalendarView);\n  registers.registerCoordinateSystem('calendar', Calendar);\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension';\nimport { install as installDataZoomSelect } from '../../component/dataZoom/installDataZoomSelect';\nimport ToolboxModel from './ToolboxModel';\nimport ToolboxView from './ToolboxView'; // TODOD: REGISTER IN INSTALL\n\nimport { registerFeature } from './featureManager';\nimport SaveAsImage from './feature/SaveAsImage';\nimport MagicType from './feature/MagicType';\nimport DataView from './feature/DataView';\nimport Restore from './feature/Restore';\nimport DataZoom from './feature/DataZoom';\nexport function install(registers) {\n  registers.registerComponentModel(ToolboxModel);\n  registers.registerComponentView(ToolboxView);\n  registerFeature('saveAsImage', SaveAsImage);\n  registerFeature('magicType', MagicType);\n  registerFeature('dataView', DataView);\n  registerFeature('dataZoom', DataZoom);\n  registerFeature('restore', Restore);\n  use(installDataZoomSelect);\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport brushPreprocessor from './preprocessor';\nimport BrushView from './BrushView';\nimport BrushModel from './BrushModel';\nimport brushVisual from './visualEncoding'; // TODO\n\nimport BrushFeature from '../toolbox/feature/Brush';\nimport { registerFeature } from '../toolbox/featureManager';\nexport function install(registers) {\n  registers.registerComponentView(BrushView);\n  registers.registerComponentModel(BrushModel);\n  registers.registerPreprocessor(brushPreprocessor);\n  registers.registerVisual(registers.PRIORITY.VISUAL.BRUSH, brushVisual);\n  registers.registerAction({\n    type: 'brush',\n    event: 'brush',\n    update: 'updateVisual'\n  }, function (payload, ecModel) {\n    ecModel.eachComponent({\n      mainType: 'brush',\n      query: payload\n    }, function (brushModel) {\n      brushModel.setAreas(payload.areas);\n    });\n  });\n  /**\n   * payload: {\n   *      brushComponents: [\n   *          {\n   *              brushId,\n   *              brushIndex,\n   *              brushName,\n   *              series: [\n   *                  {\n   *                      seriesId,\n   *                      seriesIndex,\n   *                      seriesName,\n   *                      rawIndices: [21, 34, ...]\n   *                  },\n   *                  ...\n   *              ]\n   *          },\n   *          ...\n   *      ]\n   * }\n   */\n\n  registers.registerAction({\n    type: 'brushSelect',\n    event: 'brushSelected',\n    update: 'none'\n  }, function () {});\n  registers.registerAction({\n    type: 'brushEnd',\n    event: 'brushEnd',\n    update: 'none'\n  }, function () {});\n  registerFeature('brush', BrushFeature);\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\nimport SliderTimelineModel from './SliderTimelineModel';\nimport SliderTimelineView from './SliderTimelineView';\nimport { installTimelineAction } from './timelineAction';\nimport preprocessor from './preprocessor';\nexport function install(registers) {\n  registers.registerComponentModel(SliderTimelineModel);\n  registers.registerComponentView(SliderTimelineView);\n  registers.registerSubTypeDefaulter('timeline', function () {\n    // Only slider now.\n    return 'slider';\n  });\n  installTimelineAction(registers);\n  registers.registerPreprocessor(preprocessor);\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { defaults } from 'zrender/lib/core/util';\nexport function installTimelineAction(registers) {\n  registers.registerAction({\n    type: 'timelineChange',\n    event: 'timelineChanged',\n    update: 'prepareAndUpdate'\n  }, function (payload, ecModel, api) {\n    var timelineModel = ecModel.getComponent('timeline');\n\n    if (timelineModel && payload.currentIndex != null) {\n      timelineModel.setCurrentIndex(payload.currentIndex);\n\n      if (!timelineModel.get('loop', true) && timelineModel.isIndexMax() && timelineModel.getPlayState()) {\n        timelineModel.setPlayState(false); // The timeline has played to the end, trigger event\n\n        api.dispatchAction({\n          type: 'timelinePlayChange',\n          playState: false,\n          from: payload.from\n        });\n      }\n    } // Set normalized currentIndex to payload.\n\n\n    ecModel.resetOption('timeline', {\n      replaceMerge: timelineModel.get('replaceMerge', true)\n    });\n    return defaults({\n      currentIndex: timelineModel.option.currentIndex\n    }, payload);\n  });\n  registers.registerAction({\n    type: 'timelinePlayChange',\n    event: 'timelinePlayChanged',\n    update: 'update'\n  }, function (payload, ecModel) {\n    var timelineModel = ecModel.getComponent('timeline');\n\n    if (timelineModel && payload.playState != null) {\n      timelineModel.setPlayState(payload.playState);\n    }\n  });\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\nimport checkMarkerInSeries from './checkMarkerInSeries';\nimport MarkPointModel from './MarkPointModel';\nimport MarkPointView from './MarkPointView';\nexport function install(registers) {\n  registers.registerComponentModel(MarkPointModel);\n  registers.registerComponentView(MarkPointView);\n  registers.registerPreprocessor(function (opt) {\n    if (checkMarkerInSeries(opt.series, 'markPoint')) {\n      // Make sure markPoint component is enabled\n      opt.markPoint = opt.markPoint || {};\n    }\n  });\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\nimport checkMarkerInSeries from './checkMarkerInSeries';\nimport MarkLineModel from './MarkLineModel';\nimport MarkLineView from './MarkLineView';\nexport function install(registers) {\n  registers.registerComponentModel(MarkLineModel);\n  registers.registerComponentView(MarkLineView);\n  registers.registerPreprocessor(function (opt) {\n    if (checkMarkerInSeries(opt.series, 'markLine')) {\n      // Make sure markLine component is enabled\n      opt.markLine = opt.markLine || {};\n    }\n  });\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport checkMarkerInSeries from './checkMarkerInSeries';\nimport MarkAreaModel from './MarkAreaModel';\nimport MarkAreaView from './MarkAreaView';\nexport function install(registers) {\n  registers.registerComponentModel(MarkAreaModel);\n  registers.registerComponentView(MarkAreaView);\n  registers.registerPreprocessor(function (opt) {\n    if (checkMarkerInSeries(opt.series, 'markArea')) {\n      // Make sure markArea component is enabled\n      opt.markArea = opt.markArea || {};\n    }\n  });\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension';\nimport { install as installLegendPlain } from './installLegendPlain';\nimport { install as installLegendScroll } from './installLegendScroll';\nexport function install(registers) {\n  use(installLegendPlain);\n  use(installLegendScroll);\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension';\nimport { install as installDataZoomInside } from './installDataZoomInside';\nimport { install as installDataZoomSlider } from './installDataZoomSlider';\nexport function install(registers) {\n  use(installDataZoomInside);\n  use(installDataZoomSlider); // Do not install './dataZoomSelect',\n  // since it only work for toolbox dataZoom.\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension';\nimport { install as installVisualMapContinuous } from './installVisualMapContinuous';\nimport { install as installVisualMapPiecewise } from './installVisualMapPiecewise';\nexport function install(registers) {\n  use(installVisualMapContinuous);\n  use(installVisualMapPiecewise); // Do not install './dataZoomSelect',\n  // since it only work for toolbox dataZoom.\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport ariaVisual from '../../visual/aria';\nimport ariaPreprocessor from './preprocessor';\nexport function install(registers) {\n  registers.registerPreprocessor(ariaPreprocessor);\n  registers.registerVisual(registers.PRIORITY.VISUAL.ARIA, ariaVisual);\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { filterTransform } from './filterTransform';\nimport { sortTransform } from './sortTransform';\nexport function install(registers) {\n  registers.registerTransform(filterTransform);\n  registers.registerTransform(sortTransform);\n}","/**\n *  object \n * @param obj\n * @param keys\n */\nexport function pick(obj, keys) {\n  var r = {};\n  keys.forEach(function (key) {\n    r[key] = obj[key];\n  });\n  return r;\n}","export function isFunction(v) {\n  return typeof v === 'function';\n}","import { __extends } from \"tslib\";\nimport * as echarts from 'echarts';\nimport EChartsReactCore from './core'; // export the Component the echarts Object.\n\nvar EChartsReact =\n/** @class */\nfunction (_super) {\n  __extends(EChartsReact, _super);\n\n  function EChartsReact(props) {\n    var _this = _super.call(this, props) || this; //  echarts \n\n\n    _this.echarts = echarts;\n    return _this;\n  }\n\n  return EChartsReact;\n}(EChartsReactCore);\n\nexport default EChartsReact;","import { __assign, __extends } from \"tslib\";\nimport React, { PureComponent } from 'react';\nimport { bind, clear } from 'size-sensor';\nimport { pick } from './helper/pick';\nimport { isFunction } from './helper/is-function';\nimport { isString } from './helper/is-string';\nimport { isEqual } from './helper/is-equal';\n/**\n * core component for echarts binding\n */\n\nvar EChartsReactCore =\n/** @class */\nfunction (_super) {\n  __extends(EChartsReactCore, _super);\n\n  function EChartsReactCore(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.echarts = props.echarts;\n    _this.ele = null;\n    _this.isInitialResize = true;\n    return _this;\n  }\n\n  EChartsReactCore.prototype.componentDidMount = function () {\n    this.renderNewEcharts();\n  }; // update\n\n\n  EChartsReactCore.prototype.componentDidUpdate = function (prevProps) {\n    /**\n     * if shouldSetOption return false, then return, not update echarts options\n     * default is true\n     */\n    var shouldSetOption = this.props.shouldSetOption;\n\n    if (isFunction(shouldSetOption) && !shouldSetOption(prevProps, this.props)) {\n      return;\n    } //  dispose \n    // 1.  theme \n    // 2.  opts \n    // 3.  onEvents  issue #151\n\n\n    if (!isEqual(prevProps.theme, this.props.theme) || !isEqual(prevProps.opts, this.props.opts) || !isEqual(prevProps.onEvents, this.props.onEvents)) {\n      this.dispose();\n      this.renderNewEcharts(); // \n\n      return;\n    } // when these props are not isEqual, update echarts\n\n\n    var pickKeys = ['option', 'notMerge', 'lazyUpdate', 'showLoading', 'loadingOption'];\n\n    if (!isEqual(pick(this.props, pickKeys), pick(prevProps, pickKeys))) {\n      this.updateEChartsOption();\n    }\n    /**\n     * when style or class name updated, change size.\n     */\n\n\n    if (!isEqual(prevProps.style, this.props.style) || !isEqual(prevProps.className, this.props.className)) {\n      this.resize();\n    }\n  };\n\n  EChartsReactCore.prototype.componentWillUnmount = function () {\n    this.dispose();\n  };\n  /**\n   * return the echart object\n   * 1. if exist, return the existed instance\n   * 2. or new one instance\n   */\n\n\n  EChartsReactCore.prototype.getEchartsInstance = function () {\n    return this.echarts.getInstanceByDom(this.ele) || this.echarts.init(this.ele, this.props.theme, this.props.opts);\n  };\n  /**\n   * dispose echarts and clear size-sensor\n   */\n\n\n  EChartsReactCore.prototype.dispose = function () {\n    if (this.ele) {\n      try {\n        clear(this.ele);\n      } catch (e) {\n        console.warn(e);\n      } // dispose echarts instance\n\n\n      this.echarts.dispose(this.ele);\n    }\n  };\n  /**\n   * render a new echarts instance\n   */\n\n\n  EChartsReactCore.prototype.renderNewEcharts = function () {\n    var _this = this;\n\n    var _a = this.props,\n        onEvents = _a.onEvents,\n        onChartReady = _a.onChartReady; // 1. new echarts instance\n\n    var echartsInstance = this.updateEChartsOption(); // 2. bind events\n\n    this.bindEvents(echartsInstance, onEvents || {}); // 3. on chart ready\n\n    if (isFunction(onChartReady)) onChartReady(echartsInstance); // 4. on resize\n\n    if (this.ele) {\n      bind(this.ele, function () {\n        _this.resize();\n      });\n    }\n  }; // bind the events\n\n\n  EChartsReactCore.prototype.bindEvents = function (instance, events) {\n    function _bindEvent(eventName, func) {\n      // ignore the event config which not satisfy\n      if (isString(eventName) && isFunction(func)) {\n        // binding event\n        instance.on(eventName, function (param) {\n          func(param, instance);\n        });\n      }\n    } // loop and bind\n\n\n    for (var eventName in events) {\n      if (Object.prototype.hasOwnProperty.call(events, eventName)) {\n        _bindEvent(eventName, events[eventName]);\n      }\n    }\n  };\n  /**\n   * render the echarts\n   */\n\n\n  EChartsReactCore.prototype.updateEChartsOption = function () {\n    var _a = this.props,\n        option = _a.option,\n        _b = _a.notMerge,\n        notMerge = _b === void 0 ? false : _b,\n        _c = _a.lazyUpdate,\n        lazyUpdate = _c === void 0 ? false : _c,\n        showLoading = _a.showLoading,\n        _d = _a.loadingOption,\n        loadingOption = _d === void 0 ? null : _d; // 1. get or initial the echarts object\n\n    var echartInstance = this.getEchartsInstance(); // 2. set the echarts option\n\n    echartInstance.setOption(option, notMerge, lazyUpdate); // 3. set loading mask\n\n    if (showLoading) echartInstance.showLoading(loadingOption);else echartInstance.hideLoading();\n    return echartInstance;\n  };\n  /**\n   * resize wrapper\n   */\n\n\n  EChartsReactCore.prototype.resize = function () {\n    // 1. get the echarts object\n    var echartsInstance = this.getEchartsInstance(); // 2. call echarts instance resize if not the initial resize\n    // resize should not happen on first render as it will cancel initial echarts animations\n\n    if (!this.isInitialResize) {\n      try {\n        echartsInstance.resize();\n      } catch (e) {\n        console.warn(e);\n      }\n    } // 3. update variable for future calls\n\n\n    this.isInitialResize = false;\n  };\n\n  EChartsReactCore.prototype.render = function () {\n    var _this = this;\n\n    var _a = this.props,\n        style = _a.style,\n        _b = _a.className,\n        className = _b === void 0 ? '' : _b; // default height = 300\n\n    var newStyle = __assign({\n      height: 300\n    }, style);\n\n    return React.createElement(\"div\", {\n      ref: function ref(e) {\n        _this.ele = e;\n      },\n      style: newStyle,\n      className: \"echarts-for-react \" + className\n    });\n  };\n\n  return EChartsReactCore;\n}(PureComponent);\n\nexport default EChartsReactCore;","export function isString(v) {\n  return typeof v === 'string';\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series';\nimport createSeriesData from '../helper/createSeriesData';\n\nvar BaseBarSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(BaseBarSeriesModel, _super);\n\n  function BaseBarSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = BaseBarSeriesModel.type;\n    return _this;\n  }\n\n  BaseBarSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesData(null, this, {\n      useEncodeDefaulter: true\n    });\n  };\n\n  BaseBarSeriesModel.prototype.getMarkerPosition = function (value) {\n    var coordSys = this.coordinateSystem;\n\n    if (coordSys && coordSys.clampData) {\n      // PENDING if clamp ?\n      var pt = coordSys.dataToPoint(coordSys.clampData(value));\n      var data = this.getData();\n      var offset = data.getLayout('offset');\n      var size = data.getLayout('size');\n      var offsetIndex = coordSys.getBaseAxis().isHorizontal() ? 0 : 1;\n      pt[offsetIndex] += offset + size / 2;\n      return pt;\n    }\n\n    return [NaN, NaN];\n  };\n\n  BaseBarSeriesModel.type = 'series.__base_bar__';\n  BaseBarSeriesModel.defaultOption = {\n    zlevel: 0,\n    z: 2,\n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    // stack: null\n    // Cartesian coordinate system\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    barMinHeight: 0,\n    barMinAngle: 0,\n    // cursor: null,\n    large: false,\n    largeThreshold: 400,\n    progressive: 3e3,\n    progressiveChunkMode: 'mod'\n  };\n  return BaseBarSeriesModel;\n}(SeriesModel);\n\nSeriesModel.registerClass(BaseBarSeriesModel);\nexport default BaseBarSeriesModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport BaseBarSeriesModel from './BaseBarSeries';\nimport createSeriesData from '../helper/createSeriesData';\nimport { inheritDefaultOption } from '../../util/component';\n\nvar BarSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(BarSeriesModel, _super);\n\n  function BarSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = BarSeriesModel.type;\n    return _this;\n  }\n\n  BarSeriesModel.prototype.getInitialData = function () {\n    return createSeriesData(null, this, {\n      useEncodeDefaulter: true,\n      createInvertedIndices: !!this.get('realtimeSort', true) || null\n    });\n  };\n  /**\n   * @override\n   */\n\n\n  BarSeriesModel.prototype.getProgressive = function () {\n    // Do not support progressive in normal mode.\n    return this.get('large') ? this.get('progressive') : false;\n  };\n  /**\n   * @override\n   */\n\n\n  BarSeriesModel.prototype.getProgressiveThreshold = function () {\n    // Do not support progressive in normal mode.\n    var progressiveThreshold = this.get('progressiveThreshold');\n    var largeThreshold = this.get('largeThreshold');\n\n    if (largeThreshold > progressiveThreshold) {\n      progressiveThreshold = largeThreshold;\n    }\n\n    return progressiveThreshold;\n  };\n\n  BarSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\n    return selectors.rect(data.getItemLayout(dataIndex));\n  };\n\n  BarSeriesModel.type = 'series.bar';\n  BarSeriesModel.dependencies = ['grid', 'polar'];\n  BarSeriesModel.defaultOption = inheritDefaultOption(BaseBarSeriesModel.defaultOption, {\n    // If clipped\n    // Only available on cartesian2d\n    clip: true,\n    roundCap: false,\n    showBackground: false,\n    backgroundStyle: {\n      color: 'rgba(180, 180, 180, 0.2)',\n      borderColor: null,\n      borderWidth: 0,\n      borderType: 'solid',\n      borderRadius: 0,\n      shadowBlur: 0,\n      shadowColor: null,\n      shadowOffsetX: 0,\n      shadowOffsetY: 0,\n      opacity: 1\n    },\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    },\n    realtimeSort: false\n  });\n  return BarSeriesModel;\n}(BaseBarSeriesModel);\n\nexport default BarSeriesModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { calculateTextPosition } from 'zrender/lib/contain/text';\nimport { isArray } from 'zrender/lib/core/util';\nexport function createSectorCalculateTextPosition(positionMapping, opts) {\n  opts = opts || {};\n  var isRoundCap = opts.isRoundCap;\n  return function (out, opts, boundingRect) {\n    var textPosition = opts.position;\n\n    if (!textPosition || textPosition instanceof Array) {\n      return calculateTextPosition(out, opts, boundingRect);\n    }\n\n    var mappedSectorPosition = positionMapping(textPosition);\n    var distance = opts.distance != null ? opts.distance : 5;\n    var sector = this.shape;\n    var cx = sector.cx;\n    var cy = sector.cy;\n    var r = sector.r;\n    var r0 = sector.r0;\n    var middleR = (r + r0) / 2;\n    var startAngle = sector.startAngle;\n    var endAngle = sector.endAngle;\n    var middleAngle = (startAngle + endAngle) / 2;\n    var extraDist = isRoundCap ? Math.abs(r - r0) / 2 : 0;\n    var mathCos = Math.cos;\n    var mathSin = Math.sin; // base position: top-left\n\n    var x = cx + r * mathCos(startAngle);\n    var y = cy + r * mathSin(startAngle);\n    var textAlign = 'left';\n    var textVerticalAlign = 'top';\n\n    switch (mappedSectorPosition) {\n      case 'startArc':\n        x = cx + (r0 - distance) * mathCos(middleAngle);\n        y = cy + (r0 - distance) * mathSin(middleAngle);\n        textAlign = 'center';\n        textVerticalAlign = 'top';\n        break;\n\n      case 'insideStartArc':\n        x = cx + (r0 + distance) * mathCos(middleAngle);\n        y = cy + (r0 + distance) * mathSin(middleAngle);\n        textAlign = 'center';\n        textVerticalAlign = 'bottom';\n        break;\n\n      case 'startAngle':\n        x = cx + middleR * mathCos(startAngle) + adjustAngleDistanceX(startAngle, distance + extraDist, false);\n        y = cy + middleR * mathSin(startAngle) + adjustAngleDistanceY(startAngle, distance + extraDist, false);\n        textAlign = 'right';\n        textVerticalAlign = 'middle';\n        break;\n\n      case 'insideStartAngle':\n        x = cx + middleR * mathCos(startAngle) + adjustAngleDistanceX(startAngle, -distance + extraDist, false);\n        y = cy + middleR * mathSin(startAngle) + adjustAngleDistanceY(startAngle, -distance + extraDist, false);\n        textAlign = 'left';\n        textVerticalAlign = 'middle';\n        break;\n\n      case 'middle':\n        x = cx + middleR * mathCos(middleAngle);\n        y = cy + middleR * mathSin(middleAngle);\n        textAlign = 'center';\n        textVerticalAlign = 'middle';\n        break;\n\n      case 'endArc':\n        x = cx + (r + distance) * mathCos(middleAngle);\n        y = cy + (r + distance) * mathSin(middleAngle);\n        textAlign = 'center';\n        textVerticalAlign = 'bottom';\n        break;\n\n      case 'insideEndArc':\n        x = cx + (r - distance) * mathCos(middleAngle);\n        y = cy + (r - distance) * mathSin(middleAngle);\n        textAlign = 'center';\n        textVerticalAlign = 'top';\n        break;\n\n      case 'endAngle':\n        x = cx + middleR * mathCos(endAngle) + adjustAngleDistanceX(endAngle, distance + extraDist, true);\n        y = cy + middleR * mathSin(endAngle) + adjustAngleDistanceY(endAngle, distance + extraDist, true);\n        textAlign = 'left';\n        textVerticalAlign = 'middle';\n        break;\n\n      case 'insideEndAngle':\n        x = cx + middleR * mathCos(endAngle) + adjustAngleDistanceX(endAngle, -distance + extraDist, true);\n        y = cy + middleR * mathSin(endAngle) + adjustAngleDistanceY(endAngle, -distance + extraDist, true);\n        textAlign = 'right';\n        textVerticalAlign = 'middle';\n        break;\n\n      default:\n        return calculateTextPosition(out, opts, boundingRect);\n    }\n\n    out = out || {};\n    out.x = x;\n    out.y = y;\n    out.align = textAlign;\n    out.verticalAlign = textVerticalAlign;\n    return out;\n  };\n}\nexport function setSectorTextRotation(sector, textPosition, positionMapping, rotateType) {\n  if (typeof rotateType === 'number') {\n    // user-set rotation\n    sector.setTextConfig({\n      rotation: rotateType\n    });\n    return;\n  } else if (isArray(textPosition)) {\n    // user-set position, use 0 as auto rotation\n    sector.setTextConfig({\n      rotation: 0\n    });\n    return;\n  }\n\n  var shape = sector.shape;\n  var startAngle = shape.clockwise ? shape.startAngle : shape.endAngle;\n  var endAngle = shape.clockwise ? shape.endAngle : shape.startAngle;\n  var middleAngle = (startAngle + endAngle) / 2;\n  var anchorAngle;\n  var mappedSectorPosition = positionMapping(textPosition);\n\n  switch (mappedSectorPosition) {\n    case 'startArc':\n    case 'insideStartArc':\n    case 'middle':\n    case 'insideEndArc':\n    case 'endArc':\n      anchorAngle = middleAngle;\n      break;\n\n    case 'startAngle':\n    case 'insideStartAngle':\n      anchorAngle = startAngle;\n      break;\n\n    case 'endAngle':\n    case 'insideEndAngle':\n      anchorAngle = endAngle;\n      break;\n\n    default:\n      sector.setTextConfig({\n        rotation: 0\n      });\n      return;\n  }\n\n  var rotate = Math.PI * 1.5 - anchorAngle;\n  /**\n   * TODO: labels with rotate > Math.PI / 2 should be rotate another\n   * half round flipped to increase readability. However, only middle\n   * position supports this for now, because in other positions, the\n   * anchor point is not at the center of the text, so the positions\n   * after rotating is not as expected.\n   */\n\n  if (mappedSectorPosition === 'middle' && rotate > Math.PI / 2 && rotate < Math.PI * 1.5) {\n    rotate -= Math.PI;\n  }\n\n  sector.setTextConfig({\n    rotation: rotate\n  });\n}\n\nfunction adjustAngleDistanceX(angle, distance, isEnd) {\n  return distance * Math.sin(angle) * (isEnd ? -1 : 1);\n}\n\nfunction adjustAngleDistanceY(angle, distance, isEnd) {\n  return distance * Math.cos(angle) * (isEnd ? 1 : -1);\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Path from 'zrender/lib/graphic/Path';\nimport Group from 'zrender/lib/graphic/Group';\nimport { extend, each, map } from 'zrender/lib/core/util';\nimport { Rect, Sector, updateProps, initProps, removeElementWithFadeOut } from '../../util/graphic';\nimport { getECData } from '../../util/innerStore';\nimport { enableHoverEmphasis, setStatesStylesFromModel } from '../../util/states';\nimport { setLabelStyle, getLabelStatesModels, setLabelValueAnimation, labelInner } from '../../label/labelStyle';\nimport { throttle } from '../../util/throttle';\nimport { createClipPath } from '../helper/createClipPathFromCoordSys';\nimport Sausage from '../../util/shape/sausage';\nimport ChartView from '../../view/Chart';\nimport { isCoordinateSystemType } from '../../coord/CoordinateSystem';\nimport { getDefaultLabel, getDefaultInterpolatedLabel } from '../helper/labelHelper';\nimport { warn } from '../../util/log';\nimport { createSectorCalculateTextPosition, setSectorTextRotation } from '../../label/sectorLabel';\nimport { saveOldStyle } from '../../animation/basicTrasition';\nvar _eventPos = [0, 0];\nvar mathMax = Math.max;\nvar mathMin = Math.min;\n\nfunction getClipArea(coord, data) {\n  var coordSysClipArea = coord.getArea && coord.getArea();\n\n  if (isCoordinateSystemType(coord, 'cartesian2d')) {\n    var baseAxis = coord.getBaseAxis(); // When boundaryGap is false or using time axis. bar may exceed the grid.\n    // We should not clip this part.\n    // See test/bar2.html\n\n    if (baseAxis.type !== 'category' || !baseAxis.onBand) {\n      var expandWidth = data.getLayout('bandWidth');\n\n      if (baseAxis.isHorizontal()) {\n        coordSysClipArea.x -= expandWidth;\n        coordSysClipArea.width += expandWidth * 2;\n      } else {\n        coordSysClipArea.y -= expandWidth;\n        coordSysClipArea.height += expandWidth * 2;\n      }\n    }\n  }\n\n  return coordSysClipArea;\n}\n\nvar BarView =\n/** @class */\nfunction (_super) {\n  __extends(BarView, _super);\n\n  function BarView() {\n    var _this = _super.call(this) || this;\n\n    _this.type = BarView.type;\n    _this._isFirstFrame = true;\n    return _this;\n  }\n\n  BarView.prototype.render = function (seriesModel, ecModel, api, payload) {\n    this._model = seriesModel;\n\n    this._removeOnRenderedListener(api);\n\n    this._updateDrawMode(seriesModel);\n\n    var coordinateSystemType = seriesModel.get('coordinateSystem');\n\n    if (coordinateSystemType === 'cartesian2d' || coordinateSystemType === 'polar') {\n      this._isLargeDraw ? this._renderLarge(seriesModel, ecModel, api) : this._renderNormal(seriesModel, ecModel, api, payload);\n    } else if (process.env.NODE_ENV !== 'production') {\n      warn('Only cartesian2d and polar supported for bar.');\n    }\n  };\n\n  BarView.prototype.incrementalPrepareRender = function (seriesModel) {\n    this._clear();\n\n    this._updateDrawMode(seriesModel); // incremental also need to clip, otherwise might be overlow.\n    // But must not set clip in each frame, otherwise all of the children will be marked redraw.\n\n\n    this._updateLargeClip(seriesModel);\n  };\n\n  BarView.prototype.incrementalRender = function (params, seriesModel) {\n    // Do not support progressive in normal mode.\n    this._incrementalRenderLarge(params, seriesModel);\n  };\n\n  BarView.prototype._updateDrawMode = function (seriesModel) {\n    var isLargeDraw = seriesModel.pipelineContext.large;\n\n    if (this._isLargeDraw == null || isLargeDraw !== this._isLargeDraw) {\n      this._isLargeDraw = isLargeDraw;\n\n      this._clear();\n    }\n  };\n\n  BarView.prototype._renderNormal = function (seriesModel, ecModel, api, payload) {\n    var group = this.group;\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var coord = seriesModel.coordinateSystem;\n    var baseAxis = coord.getBaseAxis();\n    var isHorizontalOrRadial;\n\n    if (coord.type === 'cartesian2d') {\n      isHorizontalOrRadial = baseAxis.isHorizontal();\n    } else if (coord.type === 'polar') {\n      isHorizontalOrRadial = baseAxis.dim === 'angle';\n    }\n\n    var animationModel = seriesModel.isAnimationEnabled() ? seriesModel : null;\n    var realtimeSortCfg = shouldRealtimeSort(seriesModel, coord);\n\n    if (realtimeSortCfg) {\n      this._enableRealtimeSort(realtimeSortCfg, data, api);\n    }\n\n    var needsClip = seriesModel.get('clip', true) || realtimeSortCfg;\n    var coordSysClipArea = getClipArea(coord, data); // If there is clipPath created in large mode. Remove it.\n\n    group.removeClipPath(); // We don't use clipPath in normal mode because we needs a perfect animation\n    // And don't want the label are clipped.\n\n    var roundCap = seriesModel.get('roundCap', true);\n    var drawBackground = seriesModel.get('showBackground', true);\n    var backgroundModel = seriesModel.getModel('backgroundStyle');\n    var barBorderRadius = backgroundModel.get('borderRadius') || 0;\n    var bgEls = [];\n    var oldBgEls = this._backgroundEls;\n    var isInitSort = payload && payload.isInitSort;\n    var isChangeOrder = payload && payload.type === 'changeAxisOrder';\n\n    function createBackground(dataIndex) {\n      var bgLayout = getLayout[coord.type](data, dataIndex);\n      var bgEl = createBackgroundEl(coord, isHorizontalOrRadial, bgLayout);\n      bgEl.useStyle(backgroundModel.getItemStyle()); // Only cartesian2d support borderRadius.\n\n      if (coord.type === 'cartesian2d') {\n        bgEl.setShape('r', barBorderRadius);\n      }\n\n      bgEls[dataIndex] = bgEl;\n      return bgEl;\n    }\n\n    ;\n    data.diff(oldData).add(function (dataIndex) {\n      var itemModel = data.getItemModel(dataIndex);\n      var layout = getLayout[coord.type](data, dataIndex, itemModel);\n\n      if (drawBackground) {\n        createBackground(dataIndex);\n      } // If dataZoom in filteMode: 'empty', the baseValue can be set as NaN in \"axisProxy\".\n\n\n      if (!data.hasValue(dataIndex) || !isValidLayout[coord.type](layout)) {\n        return;\n      }\n\n      var isClipped = false;\n\n      if (needsClip) {\n        // Clip will modify the layout params.\n        // And return a boolean to determine if the shape are fully clipped.\n        isClipped = clip[coord.type](coordSysClipArea, layout);\n      }\n\n      var el = elementCreator[coord.type](seriesModel, data, dataIndex, layout, isHorizontalOrRadial, animationModel, baseAxis.model, false, roundCap);\n\n      if (realtimeSortCfg) {\n        /**\n         * Force label animation because even if the element is\n         * ignored because it's clipped, it may not be clipped after\n         * changing order. Then, if not using forceLabelAnimation,\n         * the label animation was never started, in which case,\n         * the label will be the final value and doesn't have label\n         * animation.\n         */\n        el.forceLabelAnimation = true;\n      }\n\n      updateStyle(el, data, dataIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, coord.type === 'polar');\n\n      if (isInitSort) {\n        el.attr({\n          shape: layout\n        });\n      } else if (realtimeSortCfg) {\n        updateRealtimeAnimation(realtimeSortCfg, animationModel, el, layout, dataIndex, isHorizontalOrRadial, false, false);\n      } else {\n        initProps(el, {\n          shape: layout\n        }, seriesModel, dataIndex);\n      }\n\n      data.setItemGraphicEl(dataIndex, el);\n      group.add(el);\n      el.ignore = isClipped;\n    }).update(function (newIndex, oldIndex) {\n      var itemModel = data.getItemModel(newIndex);\n      var layout = getLayout[coord.type](data, newIndex, itemModel);\n\n      if (drawBackground) {\n        var bgEl = void 0;\n\n        if (oldBgEls.length === 0) {\n          bgEl = createBackground(oldIndex);\n        } else {\n          bgEl = oldBgEls[oldIndex];\n          bgEl.useStyle(backgroundModel.getItemStyle()); // Only cartesian2d support borderRadius.\n\n          if (coord.type === 'cartesian2d') {\n            bgEl.setShape('r', barBorderRadius);\n          }\n\n          bgEls[newIndex] = bgEl;\n        }\n\n        var bgLayout = getLayout[coord.type](data, newIndex);\n        var shape = createBackgroundShape(isHorizontalOrRadial, bgLayout, coord);\n        updateProps(bgEl, {\n          shape: shape\n        }, animationModel, newIndex);\n      }\n\n      var el = oldData.getItemGraphicEl(oldIndex);\n\n      if (!data.hasValue(newIndex) || !isValidLayout[coord.type](layout)) {\n        group.remove(el);\n        return;\n      }\n\n      var isClipped = false;\n\n      if (needsClip) {\n        isClipped = clip[coord.type](coordSysClipArea, layout);\n\n        if (isClipped) {\n          group.remove(el);\n        }\n      }\n\n      if (!el) {\n        el = elementCreator[coord.type](seriesModel, data, newIndex, layout, isHorizontalOrRadial, animationModel, baseAxis.model, !!el, roundCap);\n      } else {\n        saveOldStyle(el);\n      }\n\n      if (realtimeSortCfg) {\n        el.forceLabelAnimation = true;\n      }\n\n      if (isChangeOrder) {\n        var textEl = el.getTextContent();\n\n        if (textEl) {\n          var labelInnerStore = labelInner(textEl);\n\n          if (labelInnerStore.prevValue != null) {\n            /**\n             * Set preValue to be value so that no new label\n             * should be started, otherwise, it will take a full\n             * `animationDurationUpdate` time to finish the\n             * animation, which is not expected.\n             */\n            labelInnerStore.prevValue = labelInnerStore.value;\n          }\n        }\n      } // Not change anything if only order changed.\n      // Especially not change label.\n\n\n      if (!isChangeOrder) {\n        updateStyle(el, data, newIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, coord.type === 'polar');\n      }\n\n      if (isInitSort) {\n        el.attr({\n          shape: layout\n        });\n      } else if (realtimeSortCfg) {\n        updateRealtimeAnimation(realtimeSortCfg, animationModel, el, layout, newIndex, isHorizontalOrRadial, true, isChangeOrder);\n      } else {\n        updateProps(el, {\n          shape: layout\n        }, seriesModel, newIndex, null);\n      }\n\n      data.setItemGraphicEl(newIndex, el);\n      el.ignore = isClipped;\n      group.add(el);\n    }).remove(function (dataIndex) {\n      var el = oldData.getItemGraphicEl(dataIndex);\n      el && removeElementWithFadeOut(el, seriesModel, dataIndex);\n    }).execute();\n    var bgGroup = this._backgroundGroup || (this._backgroundGroup = new Group());\n    bgGroup.removeAll();\n\n    for (var i = 0; i < bgEls.length; ++i) {\n      bgGroup.add(bgEls[i]);\n    }\n\n    group.add(bgGroup);\n    this._backgroundEls = bgEls;\n    this._data = data;\n  };\n\n  BarView.prototype._renderLarge = function (seriesModel, ecModel, api) {\n    this._clear();\n\n    createLarge(seriesModel, this.group);\n\n    this._updateLargeClip(seriesModel);\n  };\n\n  BarView.prototype._incrementalRenderLarge = function (params, seriesModel) {\n    this._removeBackground();\n\n    createLarge(seriesModel, this.group, true);\n  };\n\n  BarView.prototype._updateLargeClip = function (seriesModel) {\n    // Use clipPath in large mode.\n    var clipPath = seriesModel.get('clip', true) ? createClipPath(seriesModel.coordinateSystem, false, seriesModel) : null;\n\n    if (clipPath) {\n      this.group.setClipPath(clipPath);\n    } else {\n      this.group.removeClipPath();\n    }\n  };\n\n  BarView.prototype._enableRealtimeSort = function (realtimeSortCfg, data, api) {\n    var _this = this; // If no data in the first frame, wait for data to initSort\n\n\n    if (!data.count()) {\n      return;\n    }\n\n    var baseAxis = realtimeSortCfg.baseAxis;\n\n    if (this._isFirstFrame) {\n      this._dispatchInitSort(data, realtimeSortCfg, api);\n\n      this._isFirstFrame = false;\n    } else {\n      var orderMapping_1 = function orderMapping_1(idx) {\n        var el = data.getItemGraphicEl(idx);\n\n        if (el) {\n          var shape = el.shape; // If data is NaN, shape.xxx may be NaN, so use || 0 here in case\n\n          return (baseAxis.isHorizontal() // The result should be consistent with the initial sort by data value.\n          // Do not support the case that both positive and negative exist.\n          ? Math.abs(shape.height) : Math.abs(shape.width)) || 0;\n        } else {\n          return 0;\n        }\n      };\n\n      this._onRendered = function () {\n        _this._updateSortWithinSameData(data, orderMapping_1, baseAxis, api);\n      };\n\n      api.getZr().on('rendered', this._onRendered);\n    }\n  };\n\n  BarView.prototype._dataSort = function (data, baseAxis, orderMapping) {\n    var info = [];\n    data.each(data.mapDimension(baseAxis.dim), function (ordinalNumber, dataIdx) {\n      var mappedValue = orderMapping(dataIdx);\n      mappedValue = mappedValue == null ? NaN : mappedValue;\n      info.push({\n        dataIndex: dataIdx,\n        mappedValue: mappedValue,\n        ordinalNumber: ordinalNumber\n      });\n    });\n    info.sort(function (a, b) {\n      // If NaN, it will be treated as min val.\n      return b.mappedValue - a.mappedValue;\n    });\n    return {\n      ordinalNumbers: map(info, function (item) {\n        return item.ordinalNumber;\n      })\n    };\n  };\n\n  BarView.prototype._isOrderChangedWithinSameData = function (data, orderMapping, baseAxis) {\n    var scale = baseAxis.scale;\n    var ordinalDataDim = data.mapDimension(baseAxis.dim);\n    var lastValue = Number.MAX_VALUE;\n\n    for (var tickNum = 0, len = scale.getOrdinalMeta().categories.length; tickNum < len; ++tickNum) {\n      var rawIdx = data.rawIndexOf(ordinalDataDim, scale.getRawOrdinalNumber(tickNum));\n      var value = rawIdx < 0 // If some tick have no bar, the tick will be treated as min.\n      ? Number.MIN_VALUE // PENDING: if dataZoom on baseAxis exits, is it a performance issue?\n      : orderMapping(data.indexOfRawIndex(rawIdx));\n\n      if (value > lastValue) {\n        return true;\n      }\n\n      lastValue = value;\n    }\n\n    return false;\n  };\n  /*\n   * Consider the case when A and B changed order, whose representing\n   * bars are both out of sight, we don't wish to trigger reorder action\n   * as long as the order in the view doesn't change.\n   */\n\n\n  BarView.prototype._isOrderDifferentInView = function (orderInfo, baseAxis) {\n    var scale = baseAxis.scale;\n    var extent = scale.getExtent();\n    var tickNum = Math.max(0, extent[0]);\n    var tickMax = Math.min(extent[1], scale.getOrdinalMeta().categories.length - 1);\n\n    for (; tickNum <= tickMax; ++tickNum) {\n      if (orderInfo.ordinalNumbers[tickNum] !== scale.getRawOrdinalNumber(tickNum)) {\n        return true;\n      }\n    }\n  };\n\n  BarView.prototype._updateSortWithinSameData = function (data, orderMapping, baseAxis, api) {\n    if (!this._isOrderChangedWithinSameData(data, orderMapping, baseAxis)) {\n      return;\n    }\n\n    var sortInfo = this._dataSort(data, baseAxis, orderMapping);\n\n    if (this._isOrderDifferentInView(sortInfo, baseAxis)) {\n      this._removeOnRenderedListener(api);\n\n      api.dispatchAction({\n        type: 'changeAxisOrder',\n        componentType: baseAxis.dim + 'Axis',\n        axisId: baseAxis.index,\n        sortInfo: sortInfo\n      });\n    }\n  };\n\n  BarView.prototype._dispatchInitSort = function (data, realtimeSortCfg, api) {\n    var baseAxis = realtimeSortCfg.baseAxis;\n\n    var sortResult = this._dataSort(data, baseAxis, function (dataIdx) {\n      return data.get(data.mapDimension(realtimeSortCfg.otherAxis.dim), dataIdx);\n    });\n\n    api.dispatchAction({\n      type: 'changeAxisOrder',\n      componentType: baseAxis.dim + 'Axis',\n      isInitSort: true,\n      axisId: baseAxis.index,\n      sortInfo: sortResult\n    });\n  };\n\n  BarView.prototype.remove = function (ecModel, api) {\n    this._clear(this._model);\n\n    this._removeOnRenderedListener(api);\n  };\n\n  BarView.prototype.dispose = function (ecModel, api) {\n    this._removeOnRenderedListener(api);\n  };\n\n  BarView.prototype._removeOnRenderedListener = function (api) {\n    if (this._onRendered) {\n      api.getZr().off('rendered', this._onRendered);\n      this._onRendered = null;\n    }\n  };\n\n  BarView.prototype._clear = function (model) {\n    var group = this.group;\n    var data = this._data;\n\n    if (model && model.isAnimationEnabled() && data && !this._isLargeDraw) {\n      this._removeBackground();\n\n      this._backgroundEls = [];\n      data.eachItemGraphicEl(function (el) {\n        removeElementWithFadeOut(el, model, getECData(el).dataIndex);\n      });\n    } else {\n      group.removeAll();\n    }\n\n    this._data = null;\n    this._isFirstFrame = true;\n  };\n\n  BarView.prototype._removeBackground = function () {\n    this.group.remove(this._backgroundGroup);\n    this._backgroundGroup = null;\n  };\n\n  BarView.type = 'bar';\n  return BarView;\n}(ChartView);\n\nvar clip = {\n  cartesian2d: function cartesian2d(coordSysBoundingRect, layout) {\n    var signWidth = layout.width < 0 ? -1 : 1;\n    var signHeight = layout.height < 0 ? -1 : 1; // Needs positive width and height\n\n    if (signWidth < 0) {\n      layout.x += layout.width;\n      layout.width = -layout.width;\n    }\n\n    if (signHeight < 0) {\n      layout.y += layout.height;\n      layout.height = -layout.height;\n    }\n\n    var coordSysX2 = coordSysBoundingRect.x + coordSysBoundingRect.width;\n    var coordSysY2 = coordSysBoundingRect.y + coordSysBoundingRect.height;\n    var x = mathMax(layout.x, coordSysBoundingRect.x);\n    var x2 = mathMin(layout.x + layout.width, coordSysX2);\n    var y = mathMax(layout.y, coordSysBoundingRect.y);\n    var y2 = mathMin(layout.y + layout.height, coordSysY2);\n    var xClipped = x2 < x;\n    var yClipped = y2 < y; // When xClipped or yClipped, the element will be marked as `ignore`.\n    // But we should also place the element at the edge of the coord sys bounding rect.\n    // Beause if data changed and the bar show again, its transition animaiton\n    // will begin at this place.\n\n    layout.x = xClipped && x > coordSysX2 ? x2 : x;\n    layout.y = yClipped && y > coordSysY2 ? y2 : y;\n    layout.width = xClipped ? 0 : x2 - x;\n    layout.height = yClipped ? 0 : y2 - y; // Reverse back\n\n    if (signWidth < 0) {\n      layout.x += layout.width;\n      layout.width = -layout.width;\n    }\n\n    if (signHeight < 0) {\n      layout.y += layout.height;\n      layout.height = -layout.height;\n    }\n\n    return xClipped || yClipped;\n  },\n  polar: function polar(coordSysClipArea, layout) {\n    var signR = layout.r0 <= layout.r ? 1 : -1; // Make sure r is larger than r0\n\n    if (signR < 0) {\n      var tmp = layout.r;\n      layout.r = layout.r0;\n      layout.r0 = tmp;\n    }\n\n    var r = mathMin(layout.r, coordSysClipArea.r);\n    var r0 = mathMax(layout.r0, coordSysClipArea.r0);\n    layout.r = r;\n    layout.r0 = r0;\n    var clipped = r - r0 < 0; // Reverse back\n\n    if (signR < 0) {\n      var tmp = layout.r;\n      layout.r = layout.r0;\n      layout.r0 = tmp;\n    }\n\n    return clipped;\n  }\n};\nvar elementCreator = {\n  cartesian2d: function cartesian2d(seriesModel, data, newIndex, layout, isHorizontal, animationModel, axisModel, isUpdate, roundCap) {\n    var rect = new Rect({\n      shape: extend({}, layout),\n      z2: 1\n    });\n    rect.__dataIndex = newIndex;\n    rect.name = 'item';\n\n    if (animationModel) {\n      var rectShape = rect.shape;\n      var animateProperty = isHorizontal ? 'height' : 'width';\n      rectShape[animateProperty] = 0;\n    }\n\n    return rect;\n  },\n  polar: function polar(seriesModel, data, newIndex, layout, isRadial, animationModel, axisModel, isUpdate, roundCap) {\n    var ShapeClass = !isRadial && roundCap ? Sausage : Sector;\n    var sector = new ShapeClass({\n      shape: layout,\n      z2: 1\n    });\n    sector.name = 'item';\n    var positionMap = createPolarPositionMapping(isRadial);\n    sector.calculateTextPosition = createSectorCalculateTextPosition(positionMap, {\n      isRoundCap: ShapeClass === Sausage\n    }); // Animation\n\n    if (animationModel) {\n      var sectorShape = sector.shape;\n      var animateProperty = isRadial ? 'r' : 'endAngle';\n      var animateTarget = {};\n      sectorShape[animateProperty] = isRadial ? 0 : layout.startAngle;\n      animateTarget[animateProperty] = layout[animateProperty];\n      (isUpdate ? updateProps : initProps)(sector, {\n        shape: animateTarget // __value: typeof dataValue === 'string' ? parseInt(dataValue, 10) : dataValue\n\n      }, animationModel);\n    }\n\n    return sector;\n  }\n};\n\nfunction shouldRealtimeSort(seriesModel, coordSys) {\n  var realtimeSortOption = seriesModel.get('realtimeSort', true);\n  var baseAxis = coordSys.getBaseAxis();\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (realtimeSortOption) {\n      if (baseAxis.type !== 'category') {\n        warn('`realtimeSort` will not work because this bar series is not based on a category axis.');\n      }\n\n      if (coordSys.type !== 'cartesian2d') {\n        warn('`realtimeSort` will not work because this bar series is not on cartesian2d.');\n      }\n    }\n  }\n\n  if (realtimeSortOption && baseAxis.type === 'category' && coordSys.type === 'cartesian2d') {\n    return {\n      baseAxis: baseAxis,\n      otherAxis: coordSys.getOtherAxis(baseAxis)\n    };\n  }\n}\n\nfunction updateRealtimeAnimation(realtimeSortCfg, seriesAnimationModel, el, layout, newIndex, isHorizontal, isUpdate, isChangeOrder) {\n  var seriesTarget;\n  var axisTarget;\n\n  if (isHorizontal) {\n    axisTarget = {\n      x: layout.x,\n      width: layout.width\n    };\n    seriesTarget = {\n      y: layout.y,\n      height: layout.height\n    };\n  } else {\n    axisTarget = {\n      y: layout.y,\n      height: layout.height\n    };\n    seriesTarget = {\n      x: layout.x,\n      width: layout.width\n    };\n  }\n\n  if (!isChangeOrder) {\n    // Keep the original growth animation if only axis order changed.\n    // Not start a new animation.\n    (isUpdate ? updateProps : initProps)(el, {\n      shape: seriesTarget\n    }, seriesAnimationModel, newIndex, null);\n  }\n\n  var axisAnimationModel = seriesAnimationModel ? realtimeSortCfg.baseAxis.model : null;\n  (isUpdate ? updateProps : initProps)(el, {\n    shape: axisTarget\n  }, axisAnimationModel, newIndex);\n}\n\nfunction checkPropertiesNotValid(obj, props) {\n  for (var i = 0; i < props.length; i++) {\n    if (!isFinite(obj[props[i]])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nvar rectPropties = ['x', 'y', 'width', 'height'];\nvar polarPropties = ['cx', 'cy', 'r', 'startAngle', 'endAngle'];\nvar isValidLayout = {\n  cartesian2d: function cartesian2d(layout) {\n    return !checkPropertiesNotValid(layout, rectPropties);\n  },\n  polar: function polar(layout) {\n    return !checkPropertiesNotValid(layout, polarPropties);\n  }\n};\nvar getLayout = {\n  // itemModel is only used to get borderWidth, which is not needed\n  // when calculating bar background layout.\n  cartesian2d: function cartesian2d(data, dataIndex, itemModel) {\n    var layout = data.getItemLayout(dataIndex);\n    var fixedLineWidth = itemModel ? getLineWidth(itemModel, layout) : 0; // fix layout with lineWidth\n\n    var signX = layout.width > 0 ? 1 : -1;\n    var signY = layout.height > 0 ? 1 : -1;\n    return {\n      x: layout.x + signX * fixedLineWidth / 2,\n      y: layout.y + signY * fixedLineWidth / 2,\n      width: layout.width - signX * fixedLineWidth,\n      height: layout.height - signY * fixedLineWidth\n    };\n  },\n  polar: function polar(data, dataIndex, itemModel) {\n    var layout = data.getItemLayout(dataIndex);\n    return {\n      cx: layout.cx,\n      cy: layout.cy,\n      r0: layout.r0,\n      r: layout.r,\n      startAngle: layout.startAngle,\n      endAngle: layout.endAngle,\n      clockwise: layout.clockwise\n    };\n  }\n};\n\nfunction isZeroOnPolar(layout) {\n  return layout.startAngle != null && layout.endAngle != null && layout.startAngle === layout.endAngle;\n}\n\nfunction createPolarPositionMapping(isRadial) {\n  return function (isRadial) {\n    var arcOrAngle = isRadial ? 'Arc' : 'Angle';\n    return function (position) {\n      switch (position) {\n        case 'start':\n        case 'insideStart':\n        case 'end':\n        case 'insideEnd':\n          return position + arcOrAngle;\n\n        default:\n          return position;\n      }\n    };\n  }(isRadial);\n}\n\nfunction updateStyle(el, data, dataIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, isPolar) {\n  var style = data.getItemVisual(dataIndex, 'style');\n\n  if (!isPolar) {\n    el.setShape('r', itemModel.get(['itemStyle', 'borderRadius']) || 0);\n  }\n\n  el.useStyle(style);\n  var cursorStyle = itemModel.getShallow('cursor');\n  cursorStyle && el.attr('cursor', cursorStyle);\n  var labelPositionOutside = isPolar ? isHorizontalOrRadial ? layout.r >= layout.r0 ? 'endArc' : 'startArc' : layout.endAngle >= layout.startAngle ? 'endAngle' : 'startAngle' : isHorizontalOrRadial ? layout.height >= 0 ? 'bottom' : 'top' : layout.width >= 0 ? 'right' : 'left';\n  var labelStatesModels = getLabelStatesModels(itemModel);\n  setLabelStyle(el, labelStatesModels, {\n    labelFetcher: seriesModel,\n    labelDataIndex: dataIndex,\n    defaultText: getDefaultLabel(seriesModel.getData(), dataIndex),\n    inheritColor: style.fill,\n    defaultOpacity: style.opacity,\n    defaultOutsidePosition: labelPositionOutside\n  });\n  var label = el.getTextContent();\n\n  if (isPolar && label) {\n    var position = itemModel.get(['label', 'position']);\n    el.textConfig.inside = position === 'middle' ? true : null;\n    setSectorTextRotation(el, position === 'outside' ? labelPositionOutside : position, createPolarPositionMapping(isHorizontalOrRadial), itemModel.get(['label', 'rotate']));\n  }\n\n  setLabelValueAnimation(label, labelStatesModels, seriesModel.getRawValue(dataIndex), function (value) {\n    return getDefaultInterpolatedLabel(data, value);\n  });\n  var emphasisModel = itemModel.getModel(['emphasis']);\n  enableHoverEmphasis(el, emphasisModel.get('focus'), emphasisModel.get('blurScope'));\n  setStatesStylesFromModel(el, itemModel);\n\n  if (isZeroOnPolar(layout)) {\n    el.style.fill = 'none';\n    el.style.stroke = 'none';\n    each(el.states, function (state) {\n      if (state.style) {\n        state.style.fill = state.style.stroke = 'none';\n      }\n    });\n  }\n} // In case width or height are too small.\n\n\nfunction getLineWidth(itemModel, rawLayout) {\n  // Has no border.\n  var borderColor = itemModel.get(['itemStyle', 'borderColor']);\n\n  if (!borderColor || borderColor === 'none') {\n    return 0;\n  }\n\n  var lineWidth = itemModel.get(['itemStyle', 'borderWidth']) || 0; // width or height may be NaN for empty data\n\n  var width = isNaN(rawLayout.width) ? Number.MAX_VALUE : Math.abs(rawLayout.width);\n  var height = isNaN(rawLayout.height) ? Number.MAX_VALUE : Math.abs(rawLayout.height);\n  return Math.min(lineWidth, width, height);\n}\n\nvar LagePathShape =\n/** @class */\nfunction () {\n  function LagePathShape() {}\n\n  return LagePathShape;\n}();\n\nvar LargePath =\n/** @class */\nfunction (_super) {\n  __extends(LargePath, _super);\n\n  function LargePath(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'largeBar';\n    return _this;\n  }\n\n  ;\n\n  LargePath.prototype.getDefaultShape = function () {\n    return new LagePathShape();\n  };\n\n  LargePath.prototype.buildPath = function (ctx, shape) {\n    // Drawing lines is more efficient than drawing\n    // a whole line or drawing rects.\n    var points = shape.points;\n    var startPoint = this.__startPoint;\n    var baseDimIdx = this.__baseDimIdx;\n\n    for (var i = 0; i < points.length; i += 2) {\n      startPoint[baseDimIdx] = points[i + baseDimIdx];\n      ctx.moveTo(startPoint[0], startPoint[1]);\n      ctx.lineTo(points[i], points[i + 1]);\n    }\n  };\n\n  return LargePath;\n}(Path);\n\nfunction createLarge(seriesModel, group, incremental) {\n  // TODO support polar\n  var data = seriesModel.getData();\n  var startPoint = [];\n  var baseDimIdx = data.getLayout('valueAxisHorizontal') ? 1 : 0;\n  startPoint[1 - baseDimIdx] = data.getLayout('valueAxisStart');\n  var largeDataIndices = data.getLayout('largeDataIndices');\n  var barWidth = data.getLayout('barWidth');\n  var backgroundModel = seriesModel.getModel('backgroundStyle');\n  var drawBackground = seriesModel.get('showBackground', true);\n\n  if (drawBackground) {\n    var points = data.getLayout('largeBackgroundPoints');\n    var backgroundStartPoint = [];\n    backgroundStartPoint[1 - baseDimIdx] = data.getLayout('backgroundStart');\n    var bgEl = new LargePath({\n      shape: {\n        points: points\n      },\n      incremental: !!incremental,\n      silent: true,\n      z2: 0\n    });\n    bgEl.__startPoint = backgroundStartPoint;\n    bgEl.__baseDimIdx = baseDimIdx;\n    bgEl.__largeDataIndices = largeDataIndices;\n    bgEl.__barWidth = barWidth;\n    setLargeBackgroundStyle(bgEl, backgroundModel, data);\n    group.add(bgEl);\n  }\n\n  var el = new LargePath({\n    shape: {\n      points: data.getLayout('largePoints')\n    },\n    incremental: !!incremental\n  });\n  el.__startPoint = startPoint;\n  el.__baseDimIdx = baseDimIdx;\n  el.__largeDataIndices = largeDataIndices;\n  el.__barWidth = barWidth;\n  group.add(el);\n  setLargeStyle(el, seriesModel, data); // Enable tooltip and user mouse/touch event handlers.\n\n  getECData(el).seriesIndex = seriesModel.seriesIndex;\n\n  if (!seriesModel.get('silent')) {\n    el.on('mousedown', largePathUpdateDataIndex);\n    el.on('mousemove', largePathUpdateDataIndex);\n  }\n} // Use throttle to avoid frequently traverse to find dataIndex.\n\n\nvar largePathUpdateDataIndex = throttle(function (event) {\n  var largePath = this;\n  var dataIndex = largePathFindDataIndex(largePath, event.offsetX, event.offsetY);\n  getECData(largePath).dataIndex = dataIndex >= 0 ? dataIndex : null;\n}, 30, false);\n\nfunction largePathFindDataIndex(largePath, x, y) {\n  var baseDimIdx = largePath.__baseDimIdx;\n  var valueDimIdx = 1 - baseDimIdx;\n  var points = largePath.shape.points;\n  var largeDataIndices = largePath.__largeDataIndices;\n  var barWidthHalf = Math.abs(largePath.__barWidth / 2);\n  var startValueVal = largePath.__startPoint[valueDimIdx];\n  _eventPos[0] = x;\n  _eventPos[1] = y;\n  var pointerBaseVal = _eventPos[baseDimIdx];\n  var pointerValueVal = _eventPos[1 - baseDimIdx];\n  var baseLowerBound = pointerBaseVal - barWidthHalf;\n  var baseUpperBound = pointerBaseVal + barWidthHalf;\n\n  for (var i = 0, len = points.length / 2; i < len; i++) {\n    var ii = i * 2;\n    var barBaseVal = points[ii + baseDimIdx];\n    var barValueVal = points[ii + valueDimIdx];\n\n    if (barBaseVal >= baseLowerBound && barBaseVal <= baseUpperBound && (startValueVal <= barValueVal ? pointerValueVal >= startValueVal && pointerValueVal <= barValueVal : pointerValueVal >= barValueVal && pointerValueVal <= startValueVal)) {\n      return largeDataIndices[i];\n    }\n  }\n\n  return -1;\n}\n\nfunction setLargeStyle(el, seriesModel, data) {\n  var globalStyle = data.getVisual('style');\n  el.useStyle(extend({}, globalStyle)); // Use stroke instead of fill.\n\n  el.style.fill = null;\n  el.style.stroke = globalStyle.fill;\n  el.style.lineWidth = data.getLayout('barWidth');\n}\n\nfunction setLargeBackgroundStyle(el, backgroundModel, data) {\n  var borderColor = backgroundModel.get('borderColor') || backgroundModel.get('color');\n  var itemStyle = backgroundModel.getItemStyle();\n  el.useStyle(itemStyle);\n  el.style.fill = null;\n  el.style.stroke = borderColor;\n  el.style.lineWidth = data.getLayout('barWidth');\n}\n\nfunction createBackgroundShape(isHorizontalOrRadial, layout, coord) {\n  if (isCoordinateSystemType(coord, 'cartesian2d')) {\n    var rectShape = layout;\n    var coordLayout = coord.getArea();\n    return {\n      x: isHorizontalOrRadial ? rectShape.x : coordLayout.x,\n      y: isHorizontalOrRadial ? coordLayout.y : rectShape.y,\n      width: isHorizontalOrRadial ? rectShape.width : coordLayout.width,\n      height: isHorizontalOrRadial ? coordLayout.height : rectShape.height\n    };\n  } else {\n    var coordLayout = coord.getArea();\n    var sectorShape = layout;\n    return {\n      cx: coordLayout.cx,\n      cy: coordLayout.cy,\n      r0: isHorizontalOrRadial ? coordLayout.r0 : sectorShape.r0,\n      r: isHorizontalOrRadial ? coordLayout.r : sectorShape.r,\n      startAngle: isHorizontalOrRadial ? sectorShape.startAngle : 0,\n      endAngle: isHorizontalOrRadial ? sectorShape.endAngle : Math.PI * 2\n    };\n  }\n}\n\nfunction createBackgroundEl(coord, isHorizontalOrRadial, layout) {\n  var ElementClz = coord.type === 'polar' ? Sector : Rect;\n  return new ElementClz({\n    shape: createBackgroundShape(isHorizontalOrRadial, layout, coord),\n    silent: true,\n    z2: 0\n  });\n}\n\nexport default BarView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { layout, largeLayout } from '../../layout/barGrid';\nimport dataSample from '../../processor/dataSample';\nimport BarSeries from './BarSeries';\nimport BarView from './BarView';\nexport function install(registers) {\n  registers.registerChartView(BarView);\n  registers.registerSeriesModel(BarSeries);\n  registers.registerLayout(registers.PRIORITY.VISUAL.LAYOUT, zrUtil.curry(layout, 'bar')); // Use higher prority to avoid to be blocked by other overall layout, which do not\n  // only exist in this module, but probably also exist in other modules, like `barPolar`.\n\n  registers.registerLayout(registers.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT, largeLayout); // Down sample after filter\n\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC, dataSample('bar'));\n  /**\n   * @payload\n   * @property {string} [componentType=series]\n   * @property {number} [dx]\n   * @property {number} [dy]\n   * @property {number} [zoom]\n   * @property {number} [originX]\n   * @property {number} [originY]\n   */\n\n  registers.registerAction({\n    type: 'changeAxisOrder',\n    event: 'changeAxisOrder',\n    update: 'update'\n  }, function (payload, ecModel) {\n    var componentType = payload.componentType || 'series';\n    ecModel.eachComponent({\n      mainType: componentType,\n      query: payload\n    }, function (componentModel) {\n      if (payload.sortInfo) {\n        componentModel.axis.setCategorySortInfo(payload.sortInfo);\n      }\n    });\n  });\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { createSymbol, normalizeSymbolOffset, normalizeSymbolSize } from '../../util/symbol';\nimport * as graphic from '../../util/graphic';\nimport { getECData } from '../../util/innerStore';\nimport { enterEmphasis, leaveEmphasis, enableHoverEmphasis } from '../../util/states';\nimport { getDefaultLabel } from './labelHelper';\nimport { extend } from 'zrender/lib/core/util';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle';\nimport ZRImage from 'zrender/lib/graphic/Image';\nimport { saveOldStyle } from '../../animation/basicTrasition';\n\nvar Symbol =\n/** @class */\nfunction (_super) {\n  __extends(Symbol, _super);\n\n  function Symbol(data, idx, seriesScope, opts) {\n    var _this = _super.call(this) || this;\n\n    _this.updateData(data, idx, seriesScope, opts);\n\n    return _this;\n  }\n\n  Symbol.prototype._createSymbol = function (symbolType, data, idx, symbolSize, keepAspect) {\n    // Remove paths created before\n    this.removeAll(); // let symbolPath = createSymbol(\n    //     symbolType, -0.5, -0.5, 1, 1, color\n    // );\n    // If width/height are set too small (e.g., set to 1) on ios10\n    // and macOS Sierra, a circle stroke become a rect, no matter what\n    // the scale is set. So we set width/height as 2. See #4150.\n\n    var symbolPath = createSymbol(symbolType, -1, -1, 2, 2, null, keepAspect);\n    symbolPath.attr({\n      z2: 100,\n      culling: true,\n      scaleX: symbolSize[0] / 2,\n      scaleY: symbolSize[1] / 2\n    }); // Rewrite drift method\n\n    symbolPath.drift = driftSymbol;\n    this._symbolType = symbolType;\n    this.add(symbolPath);\n  };\n  /**\n   * Stop animation\n   * @param {boolean} toLastFrame\n   */\n\n\n  Symbol.prototype.stopSymbolAnimation = function (toLastFrame) {\n    this.childAt(0).stopAnimation(null, toLastFrame);\n  };\n\n  Symbol.prototype.getSymbolType = function () {\n    return this._symbolType;\n  };\n  /**\n   * FIXME:\n   * Caution: This method breaks the encapsulation of this module,\n   * but it indeed brings convenience. So do not use the method\n   * unless you detailedly know all the implements of `Symbol`,\n   * especially animation.\n   *\n   * Get symbol path element.\n   */\n\n\n  Symbol.prototype.getSymbolPath = function () {\n    return this.childAt(0);\n  };\n  /**\n   * Highlight symbol\n   */\n\n\n  Symbol.prototype.highlight = function () {\n    enterEmphasis(this.childAt(0));\n  };\n  /**\n   * Downplay symbol\n   */\n\n\n  Symbol.prototype.downplay = function () {\n    leaveEmphasis(this.childAt(0));\n  };\n  /**\n   * @param {number} zlevel\n   * @param {number} z\n   */\n\n\n  Symbol.prototype.setZ = function (zlevel, z) {\n    var symbolPath = this.childAt(0);\n    symbolPath.zlevel = zlevel;\n    symbolPath.z = z;\n  };\n\n  Symbol.prototype.setDraggable = function (draggable) {\n    var symbolPath = this.childAt(0);\n    symbolPath.draggable = draggable;\n    symbolPath.cursor = draggable ? 'move' : symbolPath.cursor;\n  };\n  /**\n   * Update symbol properties\n   */\n\n\n  Symbol.prototype.updateData = function (data, idx, seriesScope, opts) {\n    this.silent = false;\n    var symbolType = data.getItemVisual(idx, 'symbol') || 'circle';\n    var seriesModel = data.hostModel;\n    var symbolSize = Symbol.getSymbolSize(data, idx);\n    var isInit = symbolType !== this._symbolType;\n    var disableAnimation = opts && opts.disableAnimation;\n\n    if (isInit) {\n      var keepAspect = data.getItemVisual(idx, 'symbolKeepAspect');\n\n      this._createSymbol(symbolType, data, idx, symbolSize, keepAspect);\n    } else {\n      var symbolPath = this.childAt(0);\n      symbolPath.silent = false;\n      var target = {\n        scaleX: symbolSize[0] / 2,\n        scaleY: symbolSize[1] / 2\n      };\n      disableAnimation ? symbolPath.attr(target) : graphic.updateProps(symbolPath, target, seriesModel, idx);\n      saveOldStyle(symbolPath);\n    }\n\n    this._updateCommon(data, idx, symbolSize, seriesScope, opts);\n\n    if (isInit) {\n      var symbolPath = this.childAt(0);\n\n      if (!disableAnimation) {\n        var target = {\n          scaleX: this._sizeX,\n          scaleY: this._sizeY,\n          style: {\n            // Always fadeIn. Because it has fadeOut animation when symbol is removed..\n            opacity: symbolPath.style.opacity\n          }\n        };\n        symbolPath.scaleX = symbolPath.scaleY = 0;\n        symbolPath.style.opacity = 0;\n        graphic.initProps(symbolPath, target, seriesModel, idx);\n      }\n    }\n\n    if (disableAnimation) {\n      // Must stop remove animation manually if don't call initProps or updateProps.\n      this.childAt(0).stopAnimation('remove');\n    }\n\n    this._seriesModel = seriesModel;\n  };\n\n  Symbol.prototype._updateCommon = function (data, idx, symbolSize, seriesScope, opts) {\n    var symbolPath = this.childAt(0);\n    var seriesModel = data.hostModel;\n    var emphasisItemStyle;\n    var blurItemStyle;\n    var selectItemStyle;\n    var focus;\n    var blurScope;\n    var labelStatesModels;\n    var hoverScale;\n    var cursorStyle;\n\n    if (seriesScope) {\n      emphasisItemStyle = seriesScope.emphasisItemStyle;\n      blurItemStyle = seriesScope.blurItemStyle;\n      selectItemStyle = seriesScope.selectItemStyle;\n      focus = seriesScope.focus;\n      blurScope = seriesScope.blurScope;\n      labelStatesModels = seriesScope.labelStatesModels;\n      hoverScale = seriesScope.hoverScale;\n      cursorStyle = seriesScope.cursorStyle;\n    }\n\n    if (!seriesScope || data.hasItemOption) {\n      var itemModel = seriesScope && seriesScope.itemModel ? seriesScope.itemModel : data.getItemModel(idx);\n      var emphasisModel = itemModel.getModel('emphasis');\n      emphasisItemStyle = emphasisModel.getModel('itemStyle').getItemStyle();\n      selectItemStyle = itemModel.getModel(['select', 'itemStyle']).getItemStyle();\n      blurItemStyle = itemModel.getModel(['blur', 'itemStyle']).getItemStyle();\n      focus = emphasisModel.get('focus');\n      blurScope = emphasisModel.get('blurScope');\n      labelStatesModels = getLabelStatesModels(itemModel);\n      hoverScale = emphasisModel.getShallow('scale');\n      cursorStyle = itemModel.getShallow('cursor');\n    }\n\n    var symbolRotate = data.getItemVisual(idx, 'symbolRotate');\n    symbolPath.attr('rotation', (symbolRotate || 0) * Math.PI / 180 || 0);\n    var symbolOffset = normalizeSymbolOffset(data.getItemVisual(idx, 'symbolOffset'), symbolSize);\n\n    if (symbolOffset) {\n      symbolPath.x = symbolOffset[0];\n      symbolPath.y = symbolOffset[1];\n    }\n\n    cursorStyle && symbolPath.attr('cursor', cursorStyle);\n    var symbolStyle = data.getItemVisual(idx, 'style');\n    var visualColor = symbolStyle.fill;\n\n    if (symbolPath instanceof ZRImage) {\n      var pathStyle = symbolPath.style;\n      symbolPath.useStyle(extend({\n        // TODO other properties like x, y ?\n        image: pathStyle.image,\n        x: pathStyle.x,\n        y: pathStyle.y,\n        width: pathStyle.width,\n        height: pathStyle.height\n      }, symbolStyle));\n    } else {\n      if (symbolPath.__isEmptyBrush) {\n        // fill and stroke will be swapped if it's empty.\n        // So we cloned a new style to avoid it affecting the original style in visual storage.\n        // TODO Better implementation. No empty logic!\n        symbolPath.useStyle(extend({}, symbolStyle));\n      } else {\n        symbolPath.useStyle(symbolStyle);\n      } // Disable decal because symbol scale will been applied on the decal.\n\n\n      symbolPath.style.decal = null;\n      symbolPath.setColor(visualColor, opts && opts.symbolInnerColor);\n      symbolPath.style.strokeNoScale = true;\n    }\n\n    var liftZ = data.getItemVisual(idx, 'liftZ');\n    var z2Origin = this._z2;\n\n    if (liftZ != null) {\n      if (z2Origin == null) {\n        this._z2 = symbolPath.z2;\n        symbolPath.z2 += liftZ;\n      }\n    } else if (z2Origin != null) {\n      symbolPath.z2 = z2Origin;\n      this._z2 = null;\n    }\n\n    var useNameLabel = opts && opts.useNameLabel;\n    setLabelStyle(symbolPath, labelStatesModels, {\n      labelFetcher: seriesModel,\n      labelDataIndex: idx,\n      defaultText: getLabelDefaultText,\n      inheritColor: visualColor,\n      defaultOpacity: symbolStyle.opacity\n    }); // Do not execute util needed.\n\n    function getLabelDefaultText(idx) {\n      return useNameLabel ? data.getName(idx) : getDefaultLabel(data, idx);\n    }\n\n    this._sizeX = symbolSize[0] / 2;\n    this._sizeY = symbolSize[1] / 2;\n    var emphasisState = symbolPath.ensureState('emphasis');\n    emphasisState.style = emphasisItemStyle;\n    symbolPath.ensureState('select').style = selectItemStyle;\n    symbolPath.ensureState('blur').style = blurItemStyle;\n\n    if (hoverScale) {\n      var scaleRatio = Math.max(1.1, 3 / this._sizeY);\n      emphasisState.scaleX = this._sizeX * scaleRatio;\n      emphasisState.scaleY = this._sizeY * scaleRatio;\n    }\n\n    this.setSymbolScale(1);\n    enableHoverEmphasis(this, focus, blurScope);\n  };\n\n  Symbol.prototype.setSymbolScale = function (scale) {\n    this.scaleX = this.scaleY = scale;\n  };\n\n  Symbol.prototype.fadeOut = function (cb, opt) {\n    var symbolPath = this.childAt(0);\n    var seriesModel = this._seriesModel;\n    var dataIndex = getECData(this).dataIndex;\n    var animationOpt = opt && opt.animation; // Avoid mistaken hover when fading out\n\n    this.silent = symbolPath.silent = true; // Not show text when animating\n\n    if (opt && opt.fadeLabel) {\n      var textContent = symbolPath.getTextContent();\n\n      if (textContent) {\n        graphic.removeElement(textContent, {\n          style: {\n            opacity: 0\n          }\n        }, seriesModel, {\n          dataIndex: dataIndex,\n          removeOpt: animationOpt,\n          cb: function cb() {\n            symbolPath.removeTextContent();\n          }\n        });\n      }\n    } else {\n      symbolPath.removeTextContent();\n    }\n\n    graphic.removeElement(symbolPath, {\n      style: {\n        opacity: 0\n      },\n      scaleX: 0,\n      scaleY: 0\n    }, seriesModel, {\n      dataIndex: dataIndex,\n      cb: cb,\n      removeOpt: animationOpt\n    });\n  };\n\n  Symbol.getSymbolSize = function (data, idx) {\n    return normalizeSymbolSize(data.getItemVisual(idx, 'symbolSize'));\n  };\n\n  return Symbol;\n}(graphic.Group);\n\nfunction driftSymbol(dx, dy) {\n  this.parent.drift(dx, dy);\n}\n\nexport default Symbol;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as graphic from '../../util/graphic';\nimport SymbolClz from './Symbol';\nimport { isObject } from 'zrender/lib/core/util';\nimport { getLabelStatesModels } from '../../label/labelStyle';\n\nfunction symbolNeedsDraw(data, point, idx, opt) {\n  return point && !isNaN(point[0]) && !isNaN(point[1]) && !(opt.isIgnore && opt.isIgnore(idx)) // We do not set clipShape on group, because it will cut part of\n  // the symbol element shape. We use the same clip shape here as\n  // the line clip.\n  && !(opt.clipShape && !opt.clipShape.contain(point[0], point[1])) && data.getItemVisual(idx, 'symbol') !== 'none';\n}\n\nfunction normalizeUpdateOpt(opt) {\n  if (opt != null && !isObject(opt)) {\n    opt = {\n      isIgnore: opt\n    };\n  }\n\n  return opt || {};\n}\n\nfunction makeSeriesScope(data) {\n  var seriesModel = data.hostModel;\n  var emphasisModel = seriesModel.getModel('emphasis');\n  return {\n    emphasisItemStyle: emphasisModel.getModel('itemStyle').getItemStyle(),\n    blurItemStyle: seriesModel.getModel(['blur', 'itemStyle']).getItemStyle(),\n    selectItemStyle: seriesModel.getModel(['select', 'itemStyle']).getItemStyle(),\n    focus: emphasisModel.get('focus'),\n    blurScope: emphasisModel.get('blurScope'),\n    hoverScale: emphasisModel.get('scale'),\n    labelStatesModels: getLabelStatesModels(seriesModel),\n    cursorStyle: seriesModel.get('cursor')\n  };\n}\n\nvar SymbolDraw =\n/** @class */\nfunction () {\n  function SymbolDraw(SymbolCtor) {\n    this.group = new graphic.Group();\n    this._SymbolCtor = SymbolCtor || SymbolClz;\n  }\n  /**\n   * Update symbols draw by new data\n   */\n\n\n  SymbolDraw.prototype.updateData = function (data, opt) {\n    opt = normalizeUpdateOpt(opt);\n    var group = this.group;\n    var seriesModel = data.hostModel;\n    var oldData = this._data;\n    var SymbolCtor = this._SymbolCtor;\n    var disableAnimation = opt.disableAnimation;\n    var seriesScope = makeSeriesScope(data);\n    var symbolUpdateOpt = {\n      disableAnimation: disableAnimation\n    };\n\n    var getSymbolPoint = opt.getSymbolPoint || function (idx) {\n      return data.getItemLayout(idx);\n    }; // There is no oldLineData only when first rendering or switching from\n    // stream mode to normal mode, where previous elements should be removed.\n\n\n    if (!oldData) {\n      group.removeAll();\n    }\n\n    data.diff(oldData).add(function (newIdx) {\n      var point = getSymbolPoint(newIdx);\n\n      if (symbolNeedsDraw(data, point, newIdx, opt)) {\n        var symbolEl = new SymbolCtor(data, newIdx, seriesScope, symbolUpdateOpt);\n        symbolEl.setPosition(point);\n        data.setItemGraphicEl(newIdx, symbolEl);\n        group.add(symbolEl);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var symbolEl = oldData.getItemGraphicEl(oldIdx);\n      var point = getSymbolPoint(newIdx);\n\n      if (!symbolNeedsDraw(data, point, newIdx, opt)) {\n        group.remove(symbolEl);\n        return;\n      }\n\n      var newSymbolType = data.getItemVisual(newIdx, 'symbol') || 'circle';\n      var oldSymbolType = symbolEl && symbolEl.getSymbolType && symbolEl.getSymbolType();\n\n      if (!symbolEl // Create a new if symbol type changed.\n      || oldSymbolType && oldSymbolType !== newSymbolType) {\n        group.remove(symbolEl);\n        symbolEl = new SymbolCtor(data, newIdx, seriesScope, symbolUpdateOpt);\n        symbolEl.setPosition(point);\n      } else {\n        symbolEl.updateData(data, newIdx, seriesScope, symbolUpdateOpt);\n        var target = {\n          x: point[0],\n          y: point[1]\n        };\n        disableAnimation ? symbolEl.attr(target) : graphic.updateProps(symbolEl, target, seriesModel);\n      } // Add back\n\n\n      group.add(symbolEl);\n      data.setItemGraphicEl(newIdx, symbolEl);\n    }).remove(function (oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      el && el.fadeOut(function () {\n        group.remove(el);\n      });\n    }).execute();\n    this._getSymbolPoint = getSymbolPoint;\n    this._data = data;\n  };\n\n  ;\n\n  SymbolDraw.prototype.isPersistent = function () {\n    return true;\n  };\n\n  ;\n\n  SymbolDraw.prototype.updateLayout = function () {\n    var _this = this;\n\n    var data = this._data;\n\n    if (data) {\n      // Not use animation\n      data.eachItemGraphicEl(function (el, idx) {\n        var point = _this._getSymbolPoint(idx);\n\n        el.setPosition(point);\n        el.markRedraw();\n      });\n    }\n  };\n\n  ;\n\n  SymbolDraw.prototype.incrementalPrepareUpdate = function (data) {\n    this._seriesScope = makeSeriesScope(data);\n    this._data = null;\n    this.group.removeAll();\n  };\n\n  ;\n  /**\n   * Update symbols draw by new data\n   */\n\n  SymbolDraw.prototype.incrementalUpdate = function (taskParams, data, opt) {\n    opt = normalizeUpdateOpt(opt);\n\n    function updateIncrementalAndHover(el) {\n      if (!el.isGroup) {\n        el.incremental = true;\n        el.ensureState('emphasis').hoverLayer = true;\n      }\n    }\n\n    for (var idx = taskParams.start; idx < taskParams.end; idx++) {\n      var point = data.getItemLayout(idx);\n\n      if (symbolNeedsDraw(data, point, idx, opt)) {\n        var el = new this._SymbolCtor(data, idx, this._seriesScope);\n        el.traverse(updateIncrementalAndHover);\n        el.setPosition(point);\n        this.group.add(el);\n        data.setItemGraphicEl(idx, el);\n      }\n    }\n  };\n\n  ;\n\n  SymbolDraw.prototype.remove = function (enableAnimation) {\n    var group = this.group;\n    var data = this._data; // Incremental model do not have this._data.\n\n    if (data && enableAnimation) {\n      data.eachItemGraphicEl(function (el) {\n        el.fadeOut(function () {\n          group.remove(el);\n        });\n      });\n    } else {\n      group.removeAll();\n    }\n  };\n\n  ;\n  return SymbolDraw;\n}();\n\nexport default SymbolDraw;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as graphic from '../../util/graphic';\nimport { round } from '../../util/number';\n\nfunction createGridClipPath(cartesian, hasAnimation, seriesModel, done, during) {\n  var rect = cartesian.getArea();\n  var x = rect.x;\n  var y = rect.y;\n  var width = rect.width;\n  var height = rect.height;\n  var lineWidth = seriesModel.get(['lineStyle', 'width']) || 2; // Expand the clip path a bit to avoid the border is clipped and looks thinner\n\n  x -= lineWidth / 2;\n  y -= lineWidth / 2;\n  width += lineWidth;\n  height += lineWidth; // fix: https://github.com/apache/incubator-echarts/issues/11369\n\n  x = Math.floor(x);\n  width = Math.round(width);\n  var clipPath = new graphic.Rect({\n    shape: {\n      x: x,\n      y: y,\n      width: width,\n      height: height\n    }\n  });\n\n  if (hasAnimation) {\n    var baseAxis = cartesian.getBaseAxis();\n    var isHorizontal = baseAxis.isHorizontal();\n    var isAxisInversed = baseAxis.inverse;\n\n    if (isHorizontal) {\n      if (isAxisInversed) {\n        clipPath.shape.x += width;\n      }\n\n      clipPath.shape.width = 0;\n    } else {\n      if (!isAxisInversed) {\n        clipPath.shape.y += height;\n      }\n\n      clipPath.shape.height = 0;\n    }\n\n    var duringCb = typeof during === 'function' ? function (percent) {\n      during(percent, clipPath);\n    } : null;\n    graphic.initProps(clipPath, {\n      shape: {\n        width: width,\n        height: height,\n        x: x,\n        y: y\n      }\n    }, seriesModel, null, done, duringCb);\n  }\n\n  return clipPath;\n}\n\nfunction createPolarClipPath(polar, hasAnimation, seriesModel) {\n  var sectorArea = polar.getArea(); // Avoid float number rounding error for symbol on the edge of axis extent.\n\n  var r0 = round(sectorArea.r0, 1);\n  var r = round(sectorArea.r, 1);\n  var clipPath = new graphic.Sector({\n    shape: {\n      cx: round(polar.cx, 1),\n      cy: round(polar.cy, 1),\n      r0: r0,\n      r: r,\n      startAngle: sectorArea.startAngle,\n      endAngle: sectorArea.endAngle,\n      clockwise: sectorArea.clockwise\n    }\n  });\n\n  if (hasAnimation) {\n    var isRadial = polar.getBaseAxis().dim === 'angle';\n\n    if (isRadial) {\n      clipPath.shape.endAngle = sectorArea.startAngle;\n    } else {\n      clipPath.shape.r = r0;\n    }\n\n    graphic.initProps(clipPath, {\n      shape: {\n        endAngle: sectorArea.endAngle,\n        r: r\n      }\n    }, seriesModel);\n  }\n\n  return clipPath;\n}\n\nfunction createClipPath(coordSys, hasAnimation, seriesModel, done, during) {\n  if (!coordSys) {\n    return null;\n  } else if (coordSys.type === 'polar') {\n    return createPolarClipPath(coordSys, hasAnimation, seriesModel);\n  } else if (coordSys.type === 'cartesian2d') {\n    return createGridClipPath(coordSys, hasAnimation, seriesModel, done, during);\n  }\n\n  return null;\n}\n\nexport { createGridClipPath, createPolarClipPath, createClipPath };","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { retrieveRawValue } from '../../data/helper/dataProvider';\nimport { isArray } from 'zrender/lib/core/util';\n/**\n * @return label string. Not null/undefined\n */\n\nexport function getDefaultLabel(data, dataIndex) {\n  var labelDims = data.mapDimensionsAll('defaultedLabel');\n  var len = labelDims.length; // Simple optimization (in lots of cases, label dims length is 1)\n\n  if (len === 1) {\n    var rawVal = retrieveRawValue(data, dataIndex, labelDims[0]);\n    return rawVal != null ? rawVal + '' : null;\n  } else if (len) {\n    var vals = [];\n\n    for (var i = 0; i < labelDims.length; i++) {\n      vals.push(retrieveRawValue(data, dataIndex, labelDims[i]));\n    }\n\n    return vals.join(' ');\n  }\n}\nexport function getDefaultInterpolatedLabel(data, interpolatedValue) {\n  var labelDims = data.mapDimensionsAll('defaultedLabel');\n\n  if (!isArray(interpolatedValue)) {\n    return interpolatedValue + '';\n  }\n\n  var vals = [];\n\n  for (var i = 0; i < labelDims.length; i++) {\n    var dimIndex = data.getDimensionIndex(labelDims[i]);\n\n    if (dimIndex >= 0) {\n      vals.push(interpolatedValue[dimIndex]);\n    }\n  }\n\n  return vals.join(' ');\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport createSeriesData from '../helper/createSeriesData';\nimport SeriesModel from '../../model/Series';\nimport { createSymbol } from '../../util/symbol';\nimport { Group } from '../../util/graphic';\n\nvar LineSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(LineSeriesModel, _super);\n\n  function LineSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = LineSeriesModel.type;\n    _this.hasSymbolVisual = true;\n    return _this;\n  }\n\n  LineSeriesModel.prototype.getInitialData = function (option) {\n    if (process.env.NODE_ENV !== 'production') {\n      var coordSys = option.coordinateSystem;\n\n      if (coordSys !== 'polar' && coordSys !== 'cartesian2d') {\n        throw new Error('Line not support coordinateSystem besides cartesian and polar');\n      }\n    }\n\n    return createSeriesData(null, this, {\n      useEncodeDefaulter: true\n    });\n  };\n\n  LineSeriesModel.prototype.getLegendIcon = function (opt) {\n    var group = new Group();\n    var line = createSymbol('line', 0, opt.itemHeight / 2, opt.itemWidth, 0, opt.lineStyle.stroke, false);\n    group.add(line);\n    line.setStyle(opt.lineStyle);\n    var visualType = this.getData().getVisual('symbol');\n    var visualRotate = this.getData().getVisual('symbolRotate');\n    var symbolType = visualType === 'none' ? 'circle' : visualType; // Symbol size is 80% when there is a line\n\n    var size = opt.itemHeight * 0.8;\n    var symbol = createSymbol(symbolType, (opt.itemWidth - size) / 2, (opt.itemHeight - size) / 2, size, size, opt.itemStyle.fill);\n    group.add(symbol);\n    symbol.setStyle(opt.itemStyle);\n    var symbolRotate = opt.iconRotate === 'inherit' ? visualRotate : opt.iconRotate || 0;\n    symbol.rotation = symbolRotate * Math.PI / 180;\n    symbol.setOrigin([opt.itemWidth / 2, opt.itemHeight / 2]);\n\n    if (symbolType.indexOf('empty') > -1) {\n      symbol.style.stroke = symbol.style.fill;\n      symbol.style.fill = '#fff';\n      symbol.style.lineWidth = 2;\n    }\n\n    return group;\n  };\n\n  LineSeriesModel.type = 'series.line';\n  LineSeriesModel.dependencies = ['grid', 'polar'];\n  LineSeriesModel.defaultOption = {\n    zlevel: 0,\n    z: 3,\n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    clip: true,\n    label: {\n      position: 'top'\n    },\n    // itemStyle: {\n    // },\n    endLabel: {\n      show: false,\n      valueAnimation: true,\n      distance: 8\n    },\n    lineStyle: {\n      width: 2,\n      type: 'solid'\n    },\n    emphasis: {\n      scale: true,\n      lineStyle: {\n        width: 'bolder'\n      }\n    },\n    // areaStyle: {\n    // origin of areaStyle. Valid values:\n    // `'auto'/null/undefined`: from axisLine to data\n    // `'start'`: from min to data\n    // `'end'`: from data to max\n    // origin: 'auto'\n    // },\n    // false, 'start', 'end', 'middle'\n    step: false,\n    // Disabled if step is true\n    smooth: false,\n    smoothMonotone: null,\n    symbol: 'emptyCircle',\n    symbolSize: 4,\n    symbolRotate: null,\n    showSymbol: true,\n    // `false`: follow the label interval strategy.\n    // `true`: show all symbols.\n    // `'auto'`: If possible, show all symbols, otherwise\n    //           follow the label interval strategy.\n    showAllSymbol: 'auto',\n    // Whether to connect break point.\n    connectNulls: false,\n    // Sampling for large data. Can be: 'average', 'max', 'min', 'sum', 'lttb'.\n    sampling: 'none',\n    animationEasing: 'linear',\n    // Disable progressive\n    progressive: 0,\n    hoverLayerThreshold: Infinity,\n    universalTransition: {\n      divideShape: 'clone'\n    },\n    triggerLineEvent: false\n  };\n  return LineSeriesModel;\n}(SeriesModel);\n\nexport default LineSeriesModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isDimensionStacked } from '../../data/helper/dataStackHelper';\nimport { map } from 'zrender/lib/core/util';\nexport function prepareDataCoordInfo(coordSys, data, valueOrigin) {\n  var baseAxis = coordSys.getBaseAxis();\n  var valueAxis = coordSys.getOtherAxis(baseAxis);\n  var valueStart = getValueStart(valueAxis, valueOrigin);\n  var baseAxisDim = baseAxis.dim;\n  var valueAxisDim = valueAxis.dim;\n  var valueDim = data.mapDimension(valueAxisDim);\n  var baseDim = data.mapDimension(baseAxisDim);\n  var baseDataOffset = valueAxisDim === 'x' || valueAxisDim === 'radius' ? 1 : 0;\n  var dims = map(coordSys.dimensions, function (coordDim) {\n    return data.mapDimension(coordDim);\n  });\n  var stacked = false;\n  var stackResultDim = data.getCalculationInfo('stackResultDimension');\n\n  if (isDimensionStacked(data, dims[0]\n  /*, dims[1]*/\n  )) {\n    // jshint ignore:line\n    stacked = true;\n    dims[0] = stackResultDim;\n  }\n\n  if (isDimensionStacked(data, dims[1]\n  /*, dims[0]*/\n  )) {\n    // jshint ignore:line\n    stacked = true;\n    dims[1] = stackResultDim;\n  }\n\n  return {\n    dataDimsForPoint: dims,\n    valueStart: valueStart,\n    valueAxisDim: valueAxisDim,\n    baseAxisDim: baseAxisDim,\n    stacked: !!stacked,\n    valueDim: valueDim,\n    baseDim: baseDim,\n    baseDataOffset: baseDataOffset,\n    stackedOverDimension: data.getCalculationInfo('stackedOverDimension')\n  };\n}\n\nfunction getValueStart(valueAxis, valueOrigin) {\n  var valueStart = 0;\n  var extent = valueAxis.scale.getExtent();\n\n  if (valueOrigin === 'start') {\n    valueStart = extent[0];\n  } else if (valueOrigin === 'end') {\n    valueStart = extent[1];\n  } // auto\n  else {\n    // Both positive\n    if (extent[0] > 0) {\n      valueStart = extent[0];\n    } // Both negative\n    else if (extent[1] < 0) {\n      valueStart = extent[1];\n    } // If is one positive, and one negative, onZero shall be true\n\n  }\n\n  return valueStart;\n}\n\nexport function getStackedOnPoint(dataCoordInfo, coordSys, data, idx) {\n  var value = NaN;\n\n  if (dataCoordInfo.stacked) {\n    value = data.get(data.getCalculationInfo('stackedOverDimension'), idx);\n  }\n\n  if (isNaN(value)) {\n    value = dataCoordInfo.valueStart;\n  }\n\n  var baseDataOffset = dataCoordInfo.baseDataOffset;\n  var stackedData = [];\n  stackedData[baseDataOffset] = data.get(dataCoordInfo.baseDim, idx);\n  stackedData[1 - baseDataOffset] = value;\n  return coordSys.dataToPoint(stackedData);\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\"; // FIXME step not support polar\n\nimport * as zrUtil from 'zrender/lib/core/util';\nimport SymbolDraw from '../helper/SymbolDraw';\nimport SymbolClz from '../helper/Symbol';\nimport lineAnimationDiff from './lineAnimationDiff';\nimport * as graphic from '../../util/graphic';\nimport * as modelUtil from '../../util/model';\nimport { ECPolyline, ECPolygon } from './poly';\nimport ChartView from '../../view/Chart';\nimport { prepareDataCoordInfo, getStackedOnPoint } from './helper';\nimport { createGridClipPath, createPolarClipPath } from '../helper/createClipPathFromCoordSys';\nimport { isCoordinateSystemType } from '../../coord/CoordinateSystem';\nimport { setStatesStylesFromModel, setStatesFlag, enableHoverEmphasis, SPECIAL_STATES } from '../../util/states';\nimport { setLabelStyle, getLabelStatesModels, labelInner } from '../../label/labelStyle';\nimport { getDefaultLabel, getDefaultInterpolatedLabel } from '../helper/labelHelper';\nimport { getECData } from '../../util/innerStore';\nimport { createFloat32Array } from '../../util/vendor';\nimport { convertToColorString } from '../../util/format';\nimport { lerp } from 'zrender/lib/tool/color';\n\nfunction isPointsSame(points1, points2) {\n  if (points1.length !== points2.length) {\n    return;\n  }\n\n  for (var i = 0; i < points1.length; i++) {\n    if (points1[i] !== points2[i]) {\n      return;\n    }\n  }\n\n  return true;\n}\n\nfunction bboxFromPoints(points) {\n  var minX = Infinity;\n  var minY = Infinity;\n  var maxX = -Infinity;\n  var maxY = -Infinity;\n\n  for (var i = 0; i < points.length;) {\n    var x = points[i++];\n    var y = points[i++];\n\n    if (!isNaN(x)) {\n      minX = Math.min(x, minX);\n      maxX = Math.max(x, maxX);\n    }\n\n    if (!isNaN(y)) {\n      minY = Math.min(y, minY);\n      maxY = Math.max(y, maxY);\n    }\n  }\n\n  return [[minX, minY], [maxX, maxY]];\n}\n\nfunction getBoundingDiff(points1, points2) {\n  var _a = bboxFromPoints(points1),\n      min1 = _a[0],\n      max1 = _a[1];\n\n  var _b = bboxFromPoints(points2),\n      min2 = _b[0],\n      max2 = _b[1]; // Get a max value from each corner of two boundings.\n\n\n  return Math.max(Math.abs(min1[0] - min2[0]), Math.abs(min1[1] - min2[1]), Math.abs(max1[0] - max2[0]), Math.abs(max1[1] - max2[1]));\n}\n\nfunction getSmooth(smooth) {\n  return typeof smooth === 'number' ? smooth : smooth ? 0.5 : 0;\n}\n\nfunction getStackedOnPoints(coordSys, data, dataCoordInfo) {\n  if (!dataCoordInfo.valueDim) {\n    return [];\n  }\n\n  var len = data.count();\n  var points = createFloat32Array(len * 2);\n\n  for (var idx = 0; idx < len; idx++) {\n    var pt = getStackedOnPoint(dataCoordInfo, coordSys, data, idx);\n    points[idx * 2] = pt[0];\n    points[idx * 2 + 1] = pt[1];\n  }\n\n  return points;\n}\n\nfunction turnPointsIntoStep(points, coordSys, stepTurnAt) {\n  var baseAxis = coordSys.getBaseAxis();\n  var baseIndex = baseAxis.dim === 'x' || baseAxis.dim === 'radius' ? 0 : 1;\n  var stepPoints = [];\n  var i = 0;\n  var stepPt = [];\n  var pt = [];\n  var nextPt = [];\n\n  for (; i < points.length - 2; i += 2) {\n    nextPt[0] = points[i + 2];\n    nextPt[1] = points[i + 3];\n    pt[0] = points[i];\n    pt[1] = points[i + 1];\n    stepPoints.push(pt[0], pt[1]);\n\n    switch (stepTurnAt) {\n      case 'end':\n        stepPt[baseIndex] = nextPt[baseIndex];\n        stepPt[1 - baseIndex] = pt[1 - baseIndex];\n        stepPoints.push(stepPt[0], stepPt[1]);\n        break;\n\n      case 'middle':\n        var middle = (pt[baseIndex] + nextPt[baseIndex]) / 2;\n        var stepPt2 = [];\n        stepPt[baseIndex] = stepPt2[baseIndex] = middle;\n        stepPt[1 - baseIndex] = pt[1 - baseIndex];\n        stepPt2[1 - baseIndex] = nextPt[1 - baseIndex];\n        stepPoints.push(stepPt[0], stepPt[1]);\n        stepPoints.push(stepPt2[0], stepPt2[1]);\n        break;\n\n      default:\n        // default is start\n        stepPt[baseIndex] = pt[baseIndex];\n        stepPt[1 - baseIndex] = nextPt[1 - baseIndex];\n        stepPoints.push(stepPt[0], stepPt[1]);\n    }\n  } // Last points\n\n\n  stepPoints.push(points[i++], points[i++]);\n  return stepPoints;\n}\n/**\n * Clip color stops to edge. Avoid creating too large gradients.\n * Which may lead to blurry when GPU acceleration is enabled. See #15680\n *\n * The stops has been sorted from small to large.\n */\n\n\nfunction clipColorStops(colorStops, maxSize) {\n  var newColorStops = [];\n  var len = colorStops.length; // coord will always < 0 in prevOutOfRangeColorStop.\n\n  var prevOutOfRangeColorStop;\n  var prevInRangeColorStop;\n\n  function lerpStop(stop0, stop1, clippedCoord) {\n    var coord0 = stop0.coord;\n    var p = (clippedCoord - coord0) / (stop1.coord - coord0);\n    var color = lerp(p, [stop0.color, stop1.color]);\n    return {\n      coord: clippedCoord,\n      color: color\n    };\n  }\n\n  for (var i = 0; i < len; i++) {\n    var stop_1 = colorStops[i];\n    var coord = stop_1.coord;\n\n    if (coord < 0) {\n      prevOutOfRangeColorStop = stop_1;\n    } else if (coord > maxSize) {\n      if (prevInRangeColorStop) {\n        newColorStops.push(lerpStop(prevInRangeColorStop, stop_1, maxSize));\n      } else if (prevOutOfRangeColorStop) {\n        // If there are two stops and coord range is between these two stops\n        newColorStops.push(lerpStop(prevOutOfRangeColorStop, stop_1, 0), lerpStop(prevOutOfRangeColorStop, stop_1, maxSize));\n      } // All following stop will be out of range. So just ignore them.\n\n\n      break;\n    } else {\n      if (prevOutOfRangeColorStop) {\n        newColorStops.push(lerpStop(prevOutOfRangeColorStop, stop_1, 0)); // Reset\n\n        prevOutOfRangeColorStop = null;\n      }\n\n      newColorStops.push(stop_1);\n      prevInRangeColorStop = stop_1;\n    }\n  }\n\n  return newColorStops;\n}\n\nfunction getVisualGradient(data, coordSys, api) {\n  var visualMetaList = data.getVisual('visualMeta');\n\n  if (!visualMetaList || !visualMetaList.length || !data.count()) {\n    // When data.count() is 0, gradient range can not be calculated.\n    return;\n  }\n\n  if (coordSys.type !== 'cartesian2d') {\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn('Visual map on line style is only supported on cartesian2d.');\n    }\n\n    return;\n  }\n\n  var coordDim;\n  var visualMeta;\n\n  for (var i = visualMetaList.length - 1; i >= 0; i--) {\n    var dimInfo = data.getDimensionInfo(visualMetaList[i].dimension);\n    coordDim = dimInfo && dimInfo.coordDim; // Can only be x or y\n\n    if (coordDim === 'x' || coordDim === 'y') {\n      visualMeta = visualMetaList[i];\n      break;\n    }\n  }\n\n  if (!visualMeta) {\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn('Visual map on line style only support x or y dimension.');\n    }\n\n    return;\n  } // If the area to be rendered is bigger than area defined by LinearGradient,\n  // the canvas spec prescribes that the color of the first stop and the last\n  // stop should be used. But if two stops are added at offset 0, in effect\n  // browsers use the color of the second stop to render area outside\n  // LinearGradient. So we can only infinitesimally extend area defined in\n  // LinearGradient to render `outerColors`.\n\n\n  var axis = coordSys.getAxis(coordDim); // dataToCoord mapping may not be linear, but must be monotonic.\n\n  var colorStops = zrUtil.map(visualMeta.stops, function (stop) {\n    // offset will be calculated later.\n    return {\n      coord: axis.toGlobalCoord(axis.dataToCoord(stop.value)),\n      color: stop.color\n    };\n  });\n  var stopLen = colorStops.length;\n  var outerColors = visualMeta.outerColors.slice();\n\n  if (stopLen && colorStops[0].coord > colorStops[stopLen - 1].coord) {\n    colorStops.reverse();\n    outerColors.reverse();\n  }\n\n  var colorStopsInRange = clipColorStops(colorStops, coordDim === 'x' ? api.getWidth() : api.getHeight());\n  var inRangeStopLen = colorStopsInRange.length;\n\n  if (!inRangeStopLen && stopLen) {\n    // All stops are out of range. All will be the same color.\n    return colorStops[0].coord < 0 ? outerColors[1] ? outerColors[1] : colorStops[stopLen - 1].color : outerColors[0] ? outerColors[0] : colorStops[0].color;\n  }\n\n  var tinyExtent = 10; // Arbitrary value: 10px\n\n  var minCoord = colorStopsInRange[0].coord - tinyExtent;\n  var maxCoord = colorStopsInRange[inRangeStopLen - 1].coord + tinyExtent;\n  var coordSpan = maxCoord - minCoord;\n\n  if (coordSpan < 1e-3) {\n    return 'transparent';\n  }\n\n  zrUtil.each(colorStopsInRange, function (stop) {\n    stop.offset = (stop.coord - minCoord) / coordSpan;\n  });\n  colorStopsInRange.push({\n    // NOTE: inRangeStopLen may still be 0 if stoplen is zero.\n    offset: inRangeStopLen ? colorStopsInRange[inRangeStopLen - 1].offset : 0.5,\n    color: outerColors[1] || 'transparent'\n  });\n  colorStopsInRange.unshift({\n    offset: inRangeStopLen ? colorStopsInRange[0].offset : 0.5,\n    color: outerColors[0] || 'transparent'\n  });\n  var gradient = new graphic.LinearGradient(0, 0, 0, 0, colorStopsInRange, true);\n  gradient[coordDim] = minCoord;\n  gradient[coordDim + '2'] = maxCoord;\n  return gradient;\n}\n\nfunction getIsIgnoreFunc(seriesModel, data, coordSys) {\n  var showAllSymbol = seriesModel.get('showAllSymbol');\n  var isAuto = showAllSymbol === 'auto';\n\n  if (showAllSymbol && !isAuto) {\n    return;\n  }\n\n  var categoryAxis = coordSys.getAxesByScale('ordinal')[0];\n\n  if (!categoryAxis) {\n    return;\n  } // Note that category label interval strategy might bring some weird effect\n  // in some scenario: users may wonder why some of the symbols are not\n  // displayed. So we show all symbols as possible as we can.\n\n\n  if (isAuto // Simplify the logic, do not determine label overlap here.\n  && canShowAllSymbolForCategory(categoryAxis, data)) {\n    return;\n  } // Otherwise follow the label interval strategy on category axis.\n\n\n  var categoryDataDim = data.mapDimension(categoryAxis.dim);\n  var labelMap = {};\n  zrUtil.each(categoryAxis.getViewLabels(), function (labelItem) {\n    var ordinalNumber = categoryAxis.scale.getRawOrdinalNumber(labelItem.tickValue);\n    labelMap[ordinalNumber] = 1;\n  });\n  return function (dataIndex) {\n    return !labelMap.hasOwnProperty(data.get(categoryDataDim, dataIndex));\n  };\n}\n\nfunction canShowAllSymbolForCategory(categoryAxis, data) {\n  // In mose cases, line is monotonous on category axis, and the label size\n  // is close with each other. So we check the symbol size and some of the\n  // label size alone with the category axis to estimate whether all symbol\n  // can be shown without overlap.\n  var axisExtent = categoryAxis.getExtent();\n  var availSize = Math.abs(axisExtent[1] - axisExtent[0]) / categoryAxis.scale.count();\n  isNaN(availSize) && (availSize = 0); // 0/0 is NaN.\n  // Sampling some points, max 5.\n\n  var dataLen = data.count();\n  var step = Math.max(1, Math.round(dataLen / 5));\n\n  for (var dataIndex = 0; dataIndex < dataLen; dataIndex += step) {\n    if (SymbolClz.getSymbolSize(data, dataIndex // Only for cartesian, where `isHorizontal` exists.\n    )[categoryAxis.isHorizontal() ? 1 : 0] // Empirical number\n    * 1.5 > availSize) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction isPointNull(x, y) {\n  return isNaN(x) || isNaN(y);\n}\n\nfunction getLastIndexNotNull(points) {\n  var len = points.length / 2;\n\n  for (; len > 0; len--) {\n    if (!isPointNull(points[len * 2 - 2], points[len * 2 - 1])) {\n      break;\n    }\n  }\n\n  return len - 1;\n}\n\nfunction getPointAtIndex(points, idx) {\n  return [points[idx * 2], points[idx * 2 + 1]];\n}\n\nfunction getIndexRange(points, xOrY, dim) {\n  var len = points.length / 2;\n  var dimIdx = dim === 'x' ? 0 : 1;\n  var a;\n  var b;\n  var prevIndex = 0;\n  var nextIndex = -1;\n\n  for (var i = 0; i < len; i++) {\n    b = points[i * 2 + dimIdx];\n\n    if (isNaN(b) || isNaN(points[i * 2 + 1 - dimIdx])) {\n      continue;\n    }\n\n    if (i === 0) {\n      a = b;\n      continue;\n    }\n\n    if (a <= xOrY && b >= xOrY || a >= xOrY && b <= xOrY) {\n      nextIndex = i;\n      break;\n    }\n\n    prevIndex = i;\n    a = b;\n  }\n\n  return {\n    range: [prevIndex, nextIndex],\n    t: (xOrY - a) / (b - a)\n  };\n}\n\nfunction anyStateShowEndLabel(seriesModel) {\n  if (seriesModel.get(['endLabel', 'show'])) {\n    return true;\n  }\n\n  for (var i = 0; i < SPECIAL_STATES.length; i++) {\n    if (seriesModel.get([SPECIAL_STATES[i], 'endLabel', 'show'])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction createLineClipPath(lineView, coordSys, hasAnimation, seriesModel) {\n  if (isCoordinateSystemType(coordSys, 'cartesian2d')) {\n    var endLabelModel_1 = seriesModel.getModel('endLabel');\n    var valueAnimation_1 = endLabelModel_1.get('valueAnimation');\n    var data_1 = seriesModel.getData();\n    var labelAnimationRecord_1 = {\n      lastFrameIndex: 0\n    };\n    var during = anyStateShowEndLabel(seriesModel) ? function (percent, clipRect) {\n      lineView._endLabelOnDuring(percent, clipRect, data_1, labelAnimationRecord_1, valueAnimation_1, endLabelModel_1, coordSys);\n    } : null;\n    var isHorizontal = coordSys.getBaseAxis().isHorizontal();\n    var clipPath = createGridClipPath(coordSys, hasAnimation, seriesModel, function () {\n      var endLabel = lineView._endLabel;\n\n      if (endLabel && hasAnimation) {\n        if (labelAnimationRecord_1.originalX != null) {\n          endLabel.attr({\n            x: labelAnimationRecord_1.originalX,\n            y: labelAnimationRecord_1.originalY\n          });\n        }\n      }\n    }, during); // Expand clip shape to avoid clipping when line value exceeds axis\n\n    if (!seriesModel.get('clip', true)) {\n      var rectShape = clipPath.shape;\n      var expandSize = Math.max(rectShape.width, rectShape.height);\n\n      if (isHorizontal) {\n        rectShape.y -= expandSize;\n        rectShape.height += expandSize * 2;\n      } else {\n        rectShape.x -= expandSize;\n        rectShape.width += expandSize * 2;\n      }\n    } // Set to the final frame. To make sure label layout is right.\n\n\n    if (during) {\n      during(1, clipPath);\n    }\n\n    return clipPath;\n  } else {\n    if (process.env.NODE_ENV !== 'production') {\n      if (seriesModel.get(['endLabel', 'show'])) {\n        console.warn('endLabel is not supported for lines in polar systems.');\n      }\n    }\n\n    return createPolarClipPath(coordSys, hasAnimation, seriesModel);\n  }\n}\n\nfunction getEndLabelStateSpecified(endLabelModel, coordSys) {\n  var baseAxis = coordSys.getBaseAxis();\n  var isHorizontal = baseAxis.isHorizontal();\n  var isBaseInversed = baseAxis.inverse;\n  var align = isHorizontal ? isBaseInversed ? 'right' : 'left' : 'center';\n  var verticalAlign = isHorizontal ? 'middle' : isBaseInversed ? 'top' : 'bottom';\n  return {\n    normal: {\n      align: endLabelModel.get('align') || align,\n      verticalAlign: endLabelModel.get('verticalAlign') || verticalAlign\n    }\n  };\n}\n\nvar LineView =\n/** @class */\nfunction (_super) {\n  __extends(LineView, _super);\n\n  function LineView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  LineView.prototype.init = function () {\n    var lineGroup = new graphic.Group();\n    var symbolDraw = new SymbolDraw();\n    this.group.add(symbolDraw.group);\n    this._symbolDraw = symbolDraw;\n    this._lineGroup = lineGroup;\n  };\n\n  LineView.prototype.render = function (seriesModel, ecModel, api) {\n    var _this = this;\n\n    var coordSys = seriesModel.coordinateSystem;\n    var group = this.group;\n    var data = seriesModel.getData();\n    var lineStyleModel = seriesModel.getModel('lineStyle');\n    var areaStyleModel = seriesModel.getModel('areaStyle');\n    var points = data.getLayout('points') || [];\n    var isCoordSysPolar = coordSys.type === 'polar';\n    var prevCoordSys = this._coordSys;\n    var symbolDraw = this._symbolDraw;\n    var polyline = this._polyline;\n    var polygon = this._polygon;\n    var lineGroup = this._lineGroup;\n    var hasAnimation = seriesModel.get('animation');\n    var isAreaChart = !areaStyleModel.isEmpty();\n    var valueOrigin = areaStyleModel.get('origin');\n    var dataCoordInfo = prepareDataCoordInfo(coordSys, data, valueOrigin);\n    var stackedOnPoints = isAreaChart && getStackedOnPoints(coordSys, data, dataCoordInfo);\n    var showSymbol = seriesModel.get('showSymbol');\n    var isIgnoreFunc = showSymbol && !isCoordSysPolar && getIsIgnoreFunc(seriesModel, data, coordSys); // Remove temporary symbols\n\n    var oldData = this._data;\n    oldData && oldData.eachItemGraphicEl(function (el, idx) {\n      if (el.__temp) {\n        group.remove(el);\n        oldData.setItemGraphicEl(idx, null);\n      }\n    }); // Remove previous created symbols if showSymbol changed to false\n\n    if (!showSymbol) {\n      symbolDraw.remove();\n    }\n\n    group.add(lineGroup); // FIXME step not support polar\n\n    var step = !isCoordSysPolar ? seriesModel.get('step') : false;\n    var clipShapeForSymbol;\n\n    if (coordSys && coordSys.getArea && seriesModel.get('clip', true)) {\n      clipShapeForSymbol = coordSys.getArea(); // Avoid float number rounding error for symbol on the edge of axis extent.\n      // See #7913 and `test/dataZoom-clip.html`.\n\n      if (clipShapeForSymbol.width != null) {\n        clipShapeForSymbol.x -= 0.1;\n        clipShapeForSymbol.y -= 0.1;\n        clipShapeForSymbol.width += 0.2;\n        clipShapeForSymbol.height += 0.2;\n      } else if (clipShapeForSymbol.r0) {\n        clipShapeForSymbol.r0 -= 0.5;\n        clipShapeForSymbol.r += 0.5;\n      }\n    }\n\n    this._clipShapeForSymbol = clipShapeForSymbol;\n    var visualColor = getVisualGradient(data, coordSys, api) || data.getVisual('style')[data.getVisual('drawType')]; // Initialization animation or coordinate system changed\n\n    if (!(polyline && prevCoordSys.type === coordSys.type && step === this._step)) {\n      showSymbol && symbolDraw.updateData(data, {\n        isIgnore: isIgnoreFunc,\n        clipShape: clipShapeForSymbol,\n        disableAnimation: true,\n        getSymbolPoint: function getSymbolPoint(idx) {\n          return [points[idx * 2], points[idx * 2 + 1]];\n        }\n      });\n      hasAnimation && this._initSymbolLabelAnimation(data, coordSys, clipShapeForSymbol);\n\n      if (step) {\n        // TODO If stacked series is not step\n        points = turnPointsIntoStep(points, coordSys, step);\n\n        if (stackedOnPoints) {\n          stackedOnPoints = turnPointsIntoStep(stackedOnPoints, coordSys, step);\n        }\n      }\n\n      polyline = this._newPolyline(points);\n\n      if (isAreaChart) {\n        polygon = this._newPolygon(points, stackedOnPoints);\n      } // NOTE: Must update _endLabel before setClipPath.\n\n\n      if (!isCoordSysPolar) {\n        this._initOrUpdateEndLabel(seriesModel, coordSys, convertToColorString(visualColor));\n      }\n\n      lineGroup.setClipPath(createLineClipPath(this, coordSys, true, seriesModel));\n    } else {\n      if (isAreaChart && !polygon) {\n        // If areaStyle is added\n        polygon = this._newPolygon(points, stackedOnPoints);\n      } else if (polygon && !isAreaChart) {\n        // If areaStyle is removed\n        lineGroup.remove(polygon);\n        polygon = this._polygon = null;\n      } // NOTE: Must update _endLabel before setClipPath.\n\n\n      if (!isCoordSysPolar) {\n        this._initOrUpdateEndLabel(seriesModel, coordSys, convertToColorString(visualColor));\n      } // Update clipPath\n\n\n      var oldClipPath = lineGroup.getClipPath();\n\n      if (oldClipPath) {\n        var newClipPath = createLineClipPath(this, coordSys, false, seriesModel);\n        graphic.initProps(oldClipPath, {\n          shape: newClipPath.shape\n        }, seriesModel);\n      } else {\n        lineGroup.setClipPath(createLineClipPath(this, coordSys, true, seriesModel));\n      } // Always update, or it is wrong in the case turning on legend\n      // because points are not changed\n\n\n      showSymbol && symbolDraw.updateData(data, {\n        isIgnore: isIgnoreFunc,\n        clipShape: clipShapeForSymbol,\n        disableAnimation: true,\n        getSymbolPoint: function getSymbolPoint(idx) {\n          return [points[idx * 2], points[idx * 2 + 1]];\n        }\n      }); // In the case data zoom triggerred refreshing frequently\n      // Data may not change if line has a category axis. So it should animate nothing\n\n      if (!isPointsSame(this._stackedOnPoints, stackedOnPoints) || !isPointsSame(this._points, points)) {\n        if (hasAnimation) {\n          this._doUpdateAnimation(data, stackedOnPoints, coordSys, api, step, valueOrigin);\n        } else {\n          // Not do it in update with animation\n          if (step) {\n            // TODO If stacked series is not step\n            points = turnPointsIntoStep(points, coordSys, step);\n\n            if (stackedOnPoints) {\n              stackedOnPoints = turnPointsIntoStep(stackedOnPoints, coordSys, step);\n            }\n          }\n\n          polyline.setShape({\n            points: points\n          });\n          polygon && polygon.setShape({\n            points: points,\n            stackedOnPoints: stackedOnPoints\n          });\n        }\n      }\n    }\n\n    var focus = seriesModel.get(['emphasis', 'focus']);\n    var blurScope = seriesModel.get(['emphasis', 'blurScope']);\n    polyline.useStyle(zrUtil.defaults( // Use color in lineStyle first\n    lineStyleModel.getLineStyle(), {\n      fill: 'none',\n      stroke: visualColor,\n      lineJoin: 'bevel'\n    }));\n    setStatesStylesFromModel(polyline, seriesModel, 'lineStyle');\n\n    if (polyline.style.lineWidth > 0 && seriesModel.get(['emphasis', 'lineStyle', 'width']) === 'bolder') {\n      var emphasisLineStyle = polyline.getState('emphasis').style;\n      emphasisLineStyle.lineWidth = +polyline.style.lineWidth + 1;\n    } // Needs seriesIndex for focus\n\n\n    getECData(polyline).seriesIndex = seriesModel.seriesIndex;\n    enableHoverEmphasis(polyline, focus, blurScope);\n    var smooth = getSmooth(seriesModel.get('smooth'));\n    var smoothMonotone = seriesModel.get('smoothMonotone');\n    var connectNulls = seriesModel.get('connectNulls');\n    polyline.setShape({\n      smooth: smooth,\n      smoothMonotone: smoothMonotone,\n      connectNulls: connectNulls\n    });\n\n    if (polygon) {\n      var stackedOnSeries = data.getCalculationInfo('stackedOnSeries');\n      var stackedOnSmooth = 0;\n      polygon.useStyle(zrUtil.defaults(areaStyleModel.getAreaStyle(), {\n        fill: visualColor,\n        opacity: 0.7,\n        lineJoin: 'bevel',\n        decal: data.getVisual('style').decal\n      }));\n\n      if (stackedOnSeries) {\n        stackedOnSmooth = getSmooth(stackedOnSeries.get('smooth'));\n      }\n\n      polygon.setShape({\n        smooth: smooth,\n        stackedOnSmooth: stackedOnSmooth,\n        smoothMonotone: smoothMonotone,\n        connectNulls: connectNulls\n      });\n      setStatesStylesFromModel(polygon, seriesModel, 'areaStyle'); // Needs seriesIndex for focus\n\n      getECData(polygon).seriesIndex = seriesModel.seriesIndex;\n      enableHoverEmphasis(polygon, focus, blurScope);\n    }\n\n    var changePolyState = function changePolyState(toState) {\n      _this._changePolyState(toState);\n    };\n\n    data.eachItemGraphicEl(function (el) {\n      // Switch polyline / polygon state if element changed its state.\n      el && (el.onHoverStateChange = changePolyState);\n    });\n    this._polyline.onHoverStateChange = changePolyState;\n    this._data = data; // Save the coordinate system for transition animation when data changed\n\n    this._coordSys = coordSys;\n    this._stackedOnPoints = stackedOnPoints;\n    this._points = points;\n    this._step = step;\n    this._valueOrigin = valueOrigin;\n\n    if (seriesModel.get('triggerLineEvent')) {\n      this.packEventData(seriesModel, polyline);\n      polygon && this.packEventData(seriesModel, polygon);\n    }\n  };\n\n  LineView.prototype.packEventData = function (seriesModel, el) {\n    getECData(el).eventData = {\n      componentType: 'series',\n      componentSubType: 'line',\n      componentIndex: seriesModel.componentIndex,\n      seriesIndex: seriesModel.seriesIndex,\n      seriesName: seriesModel.name,\n      seriesType: 'line'\n    };\n  };\n\n  LineView.prototype.highlight = function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var dataIndex = modelUtil.queryDataIndex(data, payload);\n\n    this._changePolyState('emphasis');\n\n    if (!(dataIndex instanceof Array) && dataIndex != null && dataIndex >= 0) {\n      var points = data.getLayout('points');\n      var symbol = data.getItemGraphicEl(dataIndex);\n\n      if (!symbol) {\n        // Create a temporary symbol if it is not exists\n        var x = points[dataIndex * 2];\n        var y = points[dataIndex * 2 + 1];\n\n        if (isNaN(x) || isNaN(y)) {\n          // Null data\n          return;\n        } // fix #11360: should't draw symbol outside clipShapeForSymbol\n\n\n        if (this._clipShapeForSymbol && !this._clipShapeForSymbol.contain(x, y)) {\n          return;\n        }\n\n        var zlevel = seriesModel.get('zlevel');\n        var z = seriesModel.get('z');\n        symbol = new SymbolClz(data, dataIndex);\n        symbol.x = x;\n        symbol.y = y;\n        symbol.setZ(zlevel, z); // ensure label text of the temporary symbol is in front of line and area polygon\n\n        var symbolLabel = symbol.getSymbolPath().getTextContent();\n\n        if (symbolLabel) {\n          symbolLabel.zlevel = zlevel;\n          symbolLabel.z = z;\n          symbolLabel.z2 = this._polyline.z2 + 1;\n        }\n\n        symbol.__temp = true;\n        data.setItemGraphicEl(dataIndex, symbol); // Stop scale animation\n\n        symbol.stopSymbolAnimation(true);\n        this.group.add(symbol);\n      }\n\n      symbol.highlight();\n    } else {\n      // Highlight whole series\n      ChartView.prototype.highlight.call(this, seriesModel, ecModel, api, payload);\n    }\n  };\n\n  LineView.prototype.downplay = function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var dataIndex = modelUtil.queryDataIndex(data, payload);\n\n    this._changePolyState('normal');\n\n    if (dataIndex != null && dataIndex >= 0) {\n      var symbol = data.getItemGraphicEl(dataIndex);\n\n      if (symbol) {\n        if (symbol.__temp) {\n          data.setItemGraphicEl(dataIndex, null);\n          this.group.remove(symbol);\n        } else {\n          symbol.downplay();\n        }\n      }\n    } else {\n      // FIXME\n      // can not downplay completely.\n      // Downplay whole series\n      ChartView.prototype.downplay.call(this, seriesModel, ecModel, api, payload);\n    }\n  };\n\n  LineView.prototype._changePolyState = function (toState) {\n    var polygon = this._polygon;\n    setStatesFlag(this._polyline, toState);\n    polygon && setStatesFlag(polygon, toState);\n  };\n\n  LineView.prototype._newPolyline = function (points) {\n    var polyline = this._polyline; // Remove previous created polyline\n\n    if (polyline) {\n      this._lineGroup.remove(polyline);\n    }\n\n    polyline = new ECPolyline({\n      shape: {\n        points: points\n      },\n      segmentIgnoreThreshold: 2,\n      z2: 10\n    });\n\n    this._lineGroup.add(polyline);\n\n    this._polyline = polyline;\n    return polyline;\n  };\n\n  LineView.prototype._newPolygon = function (points, stackedOnPoints) {\n    var polygon = this._polygon; // Remove previous created polygon\n\n    if (polygon) {\n      this._lineGroup.remove(polygon);\n    }\n\n    polygon = new ECPolygon({\n      shape: {\n        points: points,\n        stackedOnPoints: stackedOnPoints\n      },\n      segmentIgnoreThreshold: 2\n    });\n\n    this._lineGroup.add(polygon);\n\n    this._polygon = polygon;\n    return polygon;\n  };\n\n  LineView.prototype._initSymbolLabelAnimation = function (data, coordSys, clipShape) {\n    var isHorizontalOrRadial;\n    var isCoordSysPolar;\n    var baseAxis = coordSys.getBaseAxis();\n    var isAxisInverse = baseAxis.inverse;\n\n    if (coordSys.type === 'cartesian2d') {\n      isHorizontalOrRadial = baseAxis.isHorizontal();\n      isCoordSysPolar = false;\n    } else if (coordSys.type === 'polar') {\n      isHorizontalOrRadial = baseAxis.dim === 'angle';\n      isCoordSysPolar = true;\n    }\n\n    var seriesModel = data.hostModel;\n    var seriesDuration = seriesModel.get('animationDuration');\n\n    if (typeof seriesDuration === 'function') {\n      seriesDuration = seriesDuration(null);\n    }\n\n    var seriesDalay = seriesModel.get('animationDelay') || 0;\n    var seriesDalayValue = typeof seriesDalay === 'function' ? seriesDalay(null) : seriesDalay;\n    data.eachItemGraphicEl(function (symbol, idx) {\n      var el = symbol;\n\n      if (el) {\n        var point = [symbol.x, symbol.y];\n        var start = void 0;\n        var end = void 0;\n        var current = void 0;\n\n        if (clipShape) {\n          if (isCoordSysPolar) {\n            var polarClip = clipShape;\n            var coord = coordSys.pointToCoord(point);\n\n            if (isHorizontalOrRadial) {\n              start = polarClip.startAngle;\n              end = polarClip.endAngle;\n              current = -coord[1] / 180 * Math.PI;\n            } else {\n              start = polarClip.r0;\n              end = polarClip.r;\n              current = coord[0];\n            }\n          } else {\n            var gridClip = clipShape;\n\n            if (isHorizontalOrRadial) {\n              start = gridClip.x;\n              end = gridClip.x + gridClip.width;\n              current = symbol.x;\n            } else {\n              start = gridClip.y + gridClip.height;\n              end = gridClip.y;\n              current = symbol.y;\n            }\n          }\n        }\n\n        var ratio = end === start ? 0 : (current - start) / (end - start);\n\n        if (isAxisInverse) {\n          ratio = 1 - ratio;\n        }\n\n        var delay = typeof seriesDalay === 'function' ? seriesDalay(idx) : seriesDuration * ratio + seriesDalayValue;\n        var symbolPath = el.getSymbolPath();\n        var text = symbolPath.getTextContent();\n        el.attr({\n          scaleX: 0,\n          scaleY: 0\n        });\n        el.animateTo({\n          scaleX: 1,\n          scaleY: 1\n        }, {\n          duration: 200,\n          setToFinal: true,\n          delay: delay\n        });\n\n        if (text) {\n          text.animateFrom({\n            style: {\n              opacity: 0\n            }\n          }, {\n            duration: 300,\n            delay: delay\n          });\n        }\n\n        symbolPath.disableLabelAnimation = true;\n      }\n    });\n  };\n\n  LineView.prototype._initOrUpdateEndLabel = function (seriesModel, coordSys, inheritColor) {\n    var endLabelModel = seriesModel.getModel('endLabel');\n\n    if (anyStateShowEndLabel(seriesModel)) {\n      var data_2 = seriesModel.getData();\n      var polyline = this._polyline;\n      var endLabel = this._endLabel;\n\n      if (!endLabel) {\n        endLabel = this._endLabel = new graphic.Text({\n          z2: 200 // should be higher than item symbol\n\n        });\n        endLabel.ignoreClip = true;\n        polyline.setTextContent(this._endLabel);\n        polyline.disableLabelAnimation = true;\n      } // Find last non-NaN data to display data\n\n\n      var dataIndex = getLastIndexNotNull(data_2.getLayout('points'));\n\n      if (dataIndex >= 0) {\n        setLabelStyle(polyline, getLabelStatesModels(seriesModel, 'endLabel'), {\n          inheritColor: inheritColor,\n          labelFetcher: seriesModel,\n          labelDataIndex: dataIndex,\n          defaultText: function defaultText(dataIndex, opt, interpolatedValue) {\n            return interpolatedValue != null ? getDefaultInterpolatedLabel(data_2, interpolatedValue) : getDefaultLabel(data_2, dataIndex);\n          },\n          enableTextSetter: true\n        }, getEndLabelStateSpecified(endLabelModel, coordSys));\n        polyline.textConfig.position = null;\n      }\n    } else if (this._endLabel) {\n      this._polyline.removeTextContent();\n\n      this._endLabel = null;\n    }\n  };\n\n  LineView.prototype._endLabelOnDuring = function (percent, clipRect, data, animationRecord, valueAnimation, endLabelModel, coordSys) {\n    var endLabel = this._endLabel;\n    var polyline = this._polyline;\n\n    if (endLabel) {\n      // NOTE: Don't remove percent < 1. percent === 1 means the first frame during render.\n      // The label is not prepared at this time.\n      if (percent < 1 && animationRecord.originalX == null) {\n        animationRecord.originalX = endLabel.x;\n        animationRecord.originalY = endLabel.y;\n      }\n\n      var points = data.getLayout('points');\n      var seriesModel = data.hostModel;\n      var connectNulls = seriesModel.get('connectNulls');\n      var precision = endLabelModel.get('precision');\n      var distance = endLabelModel.get('distance') || 0;\n      var baseAxis = coordSys.getBaseAxis();\n      var isHorizontal = baseAxis.isHorizontal();\n      var isBaseInversed = baseAxis.inverse;\n      var clipShape = clipRect.shape;\n      var xOrY = isBaseInversed ? isHorizontal ? clipShape.x : clipShape.y + clipShape.height : isHorizontal ? clipShape.x + clipShape.width : clipShape.y;\n      var distanceX = (isHorizontal ? distance : 0) * (isBaseInversed ? -1 : 1);\n      var distanceY = (isHorizontal ? 0 : -distance) * (isBaseInversed ? -1 : 1);\n      var dim = isHorizontal ? 'x' : 'y';\n      var dataIndexRange = getIndexRange(points, xOrY, dim);\n      var indices = dataIndexRange.range;\n      var diff = indices[1] - indices[0];\n      var value = void 0;\n\n      if (diff >= 1) {\n        // diff > 1 && connectNulls, which is on the null data.\n        if (diff > 1 && !connectNulls) {\n          var pt = getPointAtIndex(points, indices[0]);\n          endLabel.attr({\n            x: pt[0] + distanceX,\n            y: pt[1] + distanceY\n          });\n          valueAnimation && (value = seriesModel.getRawValue(indices[0]));\n        } else {\n          var pt = polyline.getPointOn(xOrY, dim);\n          pt && endLabel.attr({\n            x: pt[0] + distanceX,\n            y: pt[1] + distanceY\n          });\n          var startValue = seriesModel.getRawValue(indices[0]);\n          var endValue = seriesModel.getRawValue(indices[1]);\n          valueAnimation && (value = modelUtil.interpolateRawValues(data, precision, startValue, endValue, dataIndexRange.t));\n        }\n\n        animationRecord.lastFrameIndex = indices[0];\n      } else {\n        // If diff <= 0, which is the range is not found(Include NaN)\n        // Choose the first point or last point.\n        var idx = percent === 1 || animationRecord.lastFrameIndex > 0 ? indices[0] : 0;\n        var pt = getPointAtIndex(points, idx);\n        valueAnimation && (value = seriesModel.getRawValue(idx));\n        endLabel.attr({\n          x: pt[0] + distanceX,\n          y: pt[1] + distanceY\n        });\n      }\n\n      if (valueAnimation) {\n        labelInner(endLabel).setLabelText(value);\n      }\n    }\n  };\n  /**\n   * @private\n   */\n  // FIXME Two value axis\n\n\n  LineView.prototype._doUpdateAnimation = function (data, stackedOnPoints, coordSys, api, step, valueOrigin) {\n    var polyline = this._polyline;\n    var polygon = this._polygon;\n    var seriesModel = data.hostModel;\n    var diff = lineAnimationDiff(this._data, data, this._stackedOnPoints, stackedOnPoints, this._coordSys, coordSys, this._valueOrigin, valueOrigin);\n    var current = diff.current;\n    var stackedOnCurrent = diff.stackedOnCurrent;\n    var next = diff.next;\n    var stackedOnNext = diff.stackedOnNext;\n\n    if (step) {\n      // TODO If stacked series is not step\n      current = turnPointsIntoStep(diff.current, coordSys, step);\n      stackedOnCurrent = turnPointsIntoStep(diff.stackedOnCurrent, coordSys, step);\n      next = turnPointsIntoStep(diff.next, coordSys, step);\n      stackedOnNext = turnPointsIntoStep(diff.stackedOnNext, coordSys, step);\n    } // Don't apply animation if diff is large.\n    // For better result and avoid memory explosion problems like\n    // https://github.com/apache/incubator-echarts/issues/12229\n\n\n    if (getBoundingDiff(current, next) > 3000 || polygon && getBoundingDiff(stackedOnCurrent, stackedOnNext) > 3000) {\n      polyline.stopAnimation();\n      polyline.setShape({\n        points: next\n      });\n\n      if (polygon) {\n        polygon.stopAnimation();\n        polygon.setShape({\n          points: next,\n          stackedOnPoints: stackedOnNext\n        });\n      }\n\n      return;\n    }\n\n    polyline.shape.__points = diff.current;\n    polyline.shape.points = current;\n    var target = {\n      shape: {\n        points: next\n      }\n    }; // Also animate the original points.\n    // If points reference is changed when turning into step line.\n\n    if (diff.current !== current) {\n      target.shape.__points = diff.next;\n    } // Stop previous animation.\n\n\n    polyline.stopAnimation();\n    graphic.updateProps(polyline, target, seriesModel);\n\n    if (polygon) {\n      polygon.setShape({\n        // Reuse the points with polyline.\n        points: current,\n        stackedOnPoints: stackedOnCurrent\n      });\n      polygon.stopAnimation();\n      graphic.updateProps(polygon, {\n        shape: {\n          stackedOnPoints: stackedOnNext\n        }\n      }, seriesModel); // If use attr directly in updateProps.\n\n      if (polyline.shape.points !== polygon.shape.points) {\n        polygon.shape.points = polyline.shape.points;\n      }\n    }\n\n    var updatedDataInfo = [];\n    var diffStatus = diff.status;\n\n    for (var i = 0; i < diffStatus.length; i++) {\n      var cmd = diffStatus[i].cmd;\n\n      if (cmd === '=') {\n        var el = data.getItemGraphicEl(diffStatus[i].idx1);\n\n        if (el) {\n          updatedDataInfo.push({\n            el: el,\n            ptIdx: i // Index of points\n\n          });\n        }\n      }\n    }\n\n    if (polyline.animators && polyline.animators.length) {\n      polyline.animators[0].during(function () {\n        polygon && polygon.dirtyShape();\n        var points = polyline.shape.__points;\n\n        for (var i = 0; i < updatedDataInfo.length; i++) {\n          var el = updatedDataInfo[i].el;\n          var offset = updatedDataInfo[i].ptIdx * 2;\n          el.x = points[offset];\n          el.y = points[offset + 1];\n          el.markRedraw();\n        }\n      });\n    }\n  };\n\n  LineView.prototype.remove = function (ecModel) {\n    var group = this.group;\n    var oldData = this._data;\n\n    this._lineGroup.removeAll();\n\n    this._symbolDraw.remove(true); // Remove temporary created elements when highlighting\n\n\n    oldData && oldData.eachItemGraphicEl(function (el, idx) {\n      if (el.__temp) {\n        group.remove(el);\n        oldData.setItemGraphicEl(idx, null);\n      }\n    });\n    this._polyline = this._polygon = this._coordSys = this._points = this._stackedOnPoints = this._endLabel = this._data = null;\n  };\n\n  LineView.type = 'line';\n  return LineView;\n}(ChartView);\n\nexport default LineView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { prepareDataCoordInfo, getStackedOnPoint } from './helper';\nimport { createFloat32Array } from '../../util/vendor';\n\nfunction diffData(oldData, newData) {\n  var diffResult = [];\n  newData.diff(oldData).add(function (idx) {\n    diffResult.push({\n      cmd: '+',\n      idx: idx\n    });\n  }).update(function (newIdx, oldIdx) {\n    diffResult.push({\n      cmd: '=',\n      idx: oldIdx,\n      idx1: newIdx\n    });\n  }).remove(function (idx) {\n    diffResult.push({\n      cmd: '-',\n      idx: idx\n    });\n  }).execute();\n  return diffResult;\n}\n\nexport default function lineAnimationDiff(oldData, newData, oldStackedOnPoints, newStackedOnPoints, oldCoordSys, newCoordSys, oldValueOrigin, newValueOrigin) {\n  var diff = diffData(oldData, newData); // let newIdList = newData.mapArray(newData.getId);\n  // let oldIdList = oldData.mapArray(oldData.getId);\n  // convertToIntId(newIdList, oldIdList);\n  // // FIXME One data ?\n  // diff = arrayDiff(oldIdList, newIdList);\n\n  var currPoints = [];\n  var nextPoints = []; // Points for stacking base line\n\n  var currStackedPoints = [];\n  var nextStackedPoints = [];\n  var status = [];\n  var sortedIndices = [];\n  var rawIndices = [];\n  var newDataOldCoordInfo = prepareDataCoordInfo(oldCoordSys, newData, oldValueOrigin); // const oldDataNewCoordInfo = prepareDataCoordInfo(newCoordSys, oldData, newValueOrigin);\n\n  var oldPoints = oldData.getLayout('points') || [];\n  var newPoints = newData.getLayout('points') || [];\n\n  for (var i = 0; i < diff.length; i++) {\n    var diffItem = diff[i];\n    var pointAdded = true;\n    var oldIdx2 = void 0;\n    var newIdx2 = void 0; // FIXME, animation is not so perfect when dataZoom window moves fast\n    // Which is in case remvoing or add more than one data in the tail or head\n\n    switch (diffItem.cmd) {\n      case '=':\n        oldIdx2 = diffItem.idx * 2;\n        newIdx2 = diffItem.idx1 * 2;\n        var currentX = oldPoints[oldIdx2];\n        var currentY = oldPoints[oldIdx2 + 1];\n        var nextX = newPoints[newIdx2];\n        var nextY = newPoints[newIdx2 + 1]; // If previous data is NaN, use next point directly\n\n        if (isNaN(currentX) || isNaN(currentY)) {\n          currentX = nextX;\n          currentY = nextY;\n        }\n\n        currPoints.push(currentX, currentY);\n        nextPoints.push(nextX, nextY);\n        currStackedPoints.push(oldStackedOnPoints[oldIdx2], oldStackedOnPoints[oldIdx2 + 1]);\n        nextStackedPoints.push(newStackedOnPoints[newIdx2], newStackedOnPoints[newIdx2 + 1]);\n        rawIndices.push(newData.getRawIndex(diffItem.idx1));\n        break;\n\n      case '+':\n        var newIdx = diffItem.idx;\n        var newDataDimsForPoint = newDataOldCoordInfo.dataDimsForPoint;\n        var oldPt = oldCoordSys.dataToPoint([newData.get(newDataDimsForPoint[0], newIdx), newData.get(newDataDimsForPoint[1], newIdx)]);\n        newIdx2 = newIdx * 2;\n        currPoints.push(oldPt[0], oldPt[1]);\n        nextPoints.push(newPoints[newIdx2], newPoints[newIdx2 + 1]);\n        var stackedOnPoint = getStackedOnPoint(newDataOldCoordInfo, oldCoordSys, newData, newIdx);\n        currStackedPoints.push(stackedOnPoint[0], stackedOnPoint[1]);\n        nextStackedPoints.push(newStackedOnPoints[newIdx2], newStackedOnPoints[newIdx2 + 1]);\n        rawIndices.push(newData.getRawIndex(newIdx));\n        break;\n\n      case '-':\n        pointAdded = false;\n    } // Original indices\n\n\n    if (pointAdded) {\n      status.push(diffItem);\n      sortedIndices.push(sortedIndices.length);\n    }\n  } // Diff result may be crossed if all items are changed\n  // Sort by data index\n\n\n  sortedIndices.sort(function (a, b) {\n    return rawIndices[a] - rawIndices[b];\n  });\n  var len = currPoints.length;\n  var sortedCurrPoints = createFloat32Array(len);\n  var sortedNextPoints = createFloat32Array(len);\n  var sortedCurrStackedPoints = createFloat32Array(len);\n  var sortedNextStackedPoints = createFloat32Array(len);\n  var sortedStatus = [];\n\n  for (var i = 0; i < sortedIndices.length; i++) {\n    var idx = sortedIndices[i];\n    var i2 = i * 2;\n    var idx2 = idx * 2;\n    sortedCurrPoints[i2] = currPoints[idx2];\n    sortedCurrPoints[i2 + 1] = currPoints[idx2 + 1];\n    sortedNextPoints[i2] = nextPoints[idx2];\n    sortedNextPoints[i2 + 1] = nextPoints[idx2 + 1];\n    sortedCurrStackedPoints[i2] = currStackedPoints[idx2];\n    sortedCurrStackedPoints[i2 + 1] = currStackedPoints[idx2 + 1];\n    sortedNextStackedPoints[i2] = nextStackedPoints[idx2];\n    sortedNextStackedPoints[i2 + 1] = nextStackedPoints[idx2 + 1];\n    sortedStatus[i] = status[idx];\n  }\n\n  return {\n    current: sortedCurrPoints,\n    next: sortedNextPoints,\n    stackedOnCurrent: sortedCurrStackedPoints,\n    stackedOnNext: sortedNextStackedPoints,\n    status: sortedStatus\n  };\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport LineSeries from './LineSeries';\nimport LineView from './LineView'; // In case developer forget to include grid component\n\nimport layoutPoints from '../../layout/points';\nimport dataSample from '../../processor/dataSample';\nexport function install(registers) {\n  registers.registerChartView(LineView);\n  registers.registerSeriesModel(LineSeries);\n  registers.registerLayout(layoutPoints('line', true));\n  registers.registerVisual({\n    seriesType: 'line',\n    reset: function reset(seriesModel) {\n      var data = seriesModel.getData(); // Visual coding for legend\n\n      var lineStyle = seriesModel.getModel('lineStyle').getLineStyle();\n\n      if (lineStyle && !lineStyle.stroke) {\n        // Fill in visual should be palette color if\n        // has color callback\n        lineStyle.stroke = data.getVisual('style').fill;\n      }\n\n      data.setVisual('legendLineStyle', lineStyle);\n    }\n  }); // Down sample after filter\n\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC, dataSample('line'));\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\"; // Poly path support NaN point\n\nimport Path from 'zrender/lib/graphic/Path';\nimport PathProxy from 'zrender/lib/core/PathProxy';\nimport { cubicRootAt, cubicAt } from 'zrender/lib/core/curve';\nvar mathMin = Math.min;\nvar mathMax = Math.max;\n\nfunction isPointNull(x, y) {\n  return isNaN(x) || isNaN(y);\n}\n/**\n * Draw smoothed line in non-monotone, in may cause undesired curve in extreme\n * situations. This should be used when points are non-monotone neither in x or\n * y dimension.\n */\n\n\nfunction drawSegment(ctx, points, start, segLen, allLen, dir, smooth, smoothMonotone, connectNulls) {\n  var prevX;\n  var prevY;\n  var cpx0;\n  var cpy0;\n  var cpx1;\n  var cpy1;\n  var idx = start;\n  var k = 0;\n\n  for (; k < segLen; k++) {\n    var x = points[idx * 2];\n    var y = points[idx * 2 + 1];\n\n    if (idx >= allLen || idx < 0) {\n      break;\n    }\n\n    if (isPointNull(x, y)) {\n      if (connectNulls) {\n        idx += dir;\n        continue;\n      }\n\n      break;\n    }\n\n    if (idx === start) {\n      ctx[dir > 0 ? 'moveTo' : 'lineTo'](x, y);\n      cpx0 = x;\n      cpy0 = y;\n    } else {\n      var dx = x - prevX;\n      var dy = y - prevY; // Ignore tiny segment.\n\n      if (dx * dx + dy * dy < 0.5) {\n        idx += dir;\n        continue;\n      }\n\n      if (smooth > 0) {\n        var nextIdx = idx + dir;\n        var nextX = points[nextIdx * 2];\n        var nextY = points[nextIdx * 2 + 1]; // Ignore duplicate point\n\n        while (nextX === x && nextY === y && k < segLen) {\n          k++;\n          nextIdx += dir;\n          idx += dir;\n          nextX = points[nextIdx * 2];\n          nextY = points[nextIdx * 2 + 1];\n          x = points[idx * 2];\n          y = points[idx * 2 + 1];\n          dx = x - prevX;\n          dy = y - prevY;\n        }\n\n        var tmpK = k + 1;\n\n        if (connectNulls) {\n          // Find next point not null\n          while (isPointNull(nextX, nextY) && tmpK < segLen) {\n            tmpK++;\n            nextIdx += dir;\n            nextX = points[nextIdx * 2];\n            nextY = points[nextIdx * 2 + 1];\n          }\n        }\n\n        var ratioNextSeg = 0.5;\n        var vx = 0;\n        var vy = 0;\n        var nextCpx0 = void 0;\n        var nextCpy0 = void 0; // Is last point\n\n        if (tmpK >= segLen || isPointNull(nextX, nextY)) {\n          cpx1 = x;\n          cpy1 = y;\n        } else {\n          vx = nextX - prevX;\n          vy = nextY - prevY;\n          var dx0 = x - prevX;\n          var dx1 = nextX - x;\n          var dy0 = y - prevY;\n          var dy1 = nextY - y;\n          var lenPrevSeg = void 0;\n          var lenNextSeg = void 0;\n\n          if (smoothMonotone === 'x') {\n            lenPrevSeg = Math.abs(dx0);\n            lenNextSeg = Math.abs(dx1);\n            cpx1 = x - lenPrevSeg * smooth;\n            cpy1 = y;\n            nextCpx0 = x + lenPrevSeg * smooth;\n            nextCpy0 = y;\n          } else if (smoothMonotone === 'y') {\n            lenPrevSeg = Math.abs(dy0);\n            lenNextSeg = Math.abs(dy1);\n            cpx1 = x;\n            cpy1 = y - lenPrevSeg * smooth;\n            nextCpx0 = x;\n            nextCpy0 = y + lenPrevSeg * smooth;\n          } else {\n            lenPrevSeg = Math.sqrt(dx0 * dx0 + dy0 * dy0);\n            lenNextSeg = Math.sqrt(dx1 * dx1 + dy1 * dy1); // Use ratio of seg length\n\n            ratioNextSeg = lenNextSeg / (lenNextSeg + lenPrevSeg);\n            cpx1 = x - vx * smooth * (1 - ratioNextSeg);\n            cpy1 = y - vy * smooth * (1 - ratioNextSeg); // cp0 of next segment\n\n            nextCpx0 = x + vx * smooth * ratioNextSeg;\n            nextCpy0 = y + vy * smooth * ratioNextSeg; // Smooth constraint between point and next point.\n            // Avoid exceeding extreme after smoothing.\n\n            nextCpx0 = mathMin(nextCpx0, mathMax(nextX, x));\n            nextCpy0 = mathMin(nextCpy0, mathMax(nextY, y));\n            nextCpx0 = mathMax(nextCpx0, mathMin(nextX, x));\n            nextCpy0 = mathMax(nextCpy0, mathMin(nextY, y)); // Reclaculate cp1 based on the adjusted cp0 of next seg.\n\n            vx = nextCpx0 - x;\n            vy = nextCpy0 - y;\n            cpx1 = x - vx * lenPrevSeg / lenNextSeg;\n            cpy1 = y - vy * lenPrevSeg / lenNextSeg; // Smooth constraint between point and prev point.\n            // Avoid exceeding extreme after smoothing.\n\n            cpx1 = mathMin(cpx1, mathMax(prevX, x));\n            cpy1 = mathMin(cpy1, mathMax(prevY, y));\n            cpx1 = mathMax(cpx1, mathMin(prevX, x));\n            cpy1 = mathMax(cpy1, mathMin(prevY, y)); // Adjust next cp0 again.\n\n            vx = x - cpx1;\n            vy = y - cpy1;\n            nextCpx0 = x + vx * lenNextSeg / lenPrevSeg;\n            nextCpy0 = y + vy * lenNextSeg / lenPrevSeg;\n          }\n        }\n\n        ctx.bezierCurveTo(cpx0, cpy0, cpx1, cpy1, x, y);\n        cpx0 = nextCpx0;\n        cpy0 = nextCpy0;\n      } else {\n        ctx.lineTo(x, y);\n      }\n    }\n\n    prevX = x;\n    prevY = y;\n    idx += dir;\n  }\n\n  return k;\n}\n\nvar ECPolylineShape =\n/** @class */\nfunction () {\n  function ECPolylineShape() {\n    this.smooth = 0;\n    this.smoothConstraint = true;\n  }\n\n  return ECPolylineShape;\n}();\n\nvar ECPolyline =\n/** @class */\nfunction (_super) {\n  __extends(ECPolyline, _super);\n\n  function ECPolyline(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'ec-polyline';\n    return _this;\n  }\n\n  ECPolyline.prototype.getDefaultStyle = function () {\n    return {\n      stroke: '#000',\n      fill: null\n    };\n  };\n\n  ECPolyline.prototype.getDefaultShape = function () {\n    return new ECPolylineShape();\n  };\n\n  ECPolyline.prototype.buildPath = function (ctx, shape) {\n    var points = shape.points;\n    var i = 0;\n    var len = points.length / 2; // const result = getBoundingBox(points, shape.smoothConstraint);\n\n    if (shape.connectNulls) {\n      // Must remove first and last null values avoid draw error in polygon\n      for (; len > 0; len--) {\n        if (!isPointNull(points[len * 2 - 2], points[len * 2 - 1])) {\n          break;\n        }\n      }\n\n      for (; i < len; i++) {\n        if (!isPointNull(points[i * 2], points[i * 2 + 1])) {\n          break;\n        }\n      }\n    }\n\n    while (i < len) {\n      i += drawSegment(ctx, points, i, len, len, 1, shape.smooth, shape.smoothMonotone, shape.connectNulls) + 1;\n    }\n  };\n\n  ECPolyline.prototype.getPointOn = function (xOrY, dim) {\n    if (!this.path) {\n      this.createPathProxy();\n      this.buildPath(this.path, this.shape);\n    }\n\n    var path = this.path;\n    var data = path.data;\n    var CMD = PathProxy.CMD;\n    var x0;\n    var y0;\n    var isDimX = dim === 'x';\n    var roots = [];\n\n    for (var i = 0; i < data.length;) {\n      var cmd = data[i++];\n      var x = void 0;\n      var y = void 0;\n      var x2 = void 0;\n      var y2 = void 0;\n      var x3 = void 0;\n      var y3 = void 0;\n      var t = void 0;\n\n      switch (cmd) {\n        case CMD.M:\n          x0 = data[i++];\n          y0 = data[i++];\n          break;\n\n        case CMD.L:\n          x = data[i++];\n          y = data[i++];\n          t = isDimX ? (xOrY - x0) / (x - x0) : (xOrY - y0) / (y - y0);\n\n          if (t <= 1 && t >= 0) {\n            var val = isDimX ? (y - y0) * t + y0 : (x - x0) * t + x0;\n            return isDimX ? [xOrY, val] : [val, xOrY];\n          }\n\n          x0 = x;\n          y0 = y;\n          break;\n\n        case CMD.C:\n          x = data[i++];\n          y = data[i++];\n          x2 = data[i++];\n          y2 = data[i++];\n          x3 = data[i++];\n          y3 = data[i++];\n          var nRoot = isDimX ? cubicRootAt(x0, x, x2, x3, xOrY, roots) : cubicRootAt(y0, y, y2, y3, xOrY, roots);\n\n          if (nRoot > 0) {\n            for (var i_1 = 0; i_1 < nRoot; i_1++) {\n              var t_1 = roots[i_1];\n\n              if (t_1 <= 1 && t_1 >= 0) {\n                var val = isDimX ? cubicAt(y0, y, y2, y3, t_1) : cubicAt(x0, x, x2, x3, t_1);\n                return isDimX ? [xOrY, val] : [val, xOrY];\n              }\n            }\n          }\n\n          x0 = x3;\n          y0 = y3;\n          break;\n      }\n    }\n  };\n\n  return ECPolyline;\n}(Path);\n\nexport { ECPolyline };\n\nvar ECPolygonShape =\n/** @class */\nfunction (_super) {\n  __extends(ECPolygonShape, _super);\n\n  function ECPolygonShape() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  return ECPolygonShape;\n}(ECPolylineShape);\n\nvar ECPolygon =\n/** @class */\nfunction (_super) {\n  __extends(ECPolygon, _super);\n\n  function ECPolygon(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'ec-polygon';\n    return _this;\n  }\n\n  ECPolygon.prototype.getDefaultShape = function () {\n    return new ECPolygonShape();\n  };\n\n  ECPolygon.prototype.buildPath = function (ctx, shape) {\n    var points = shape.points;\n    var stackedOnPoints = shape.stackedOnPoints;\n    var i = 0;\n    var len = points.length / 2;\n    var smoothMonotone = shape.smoothMonotone;\n\n    if (shape.connectNulls) {\n      // Must remove first and last null values avoid draw error in polygon\n      for (; len > 0; len--) {\n        if (!isPointNull(points[len * 2 - 2], points[len * 2 - 1])) {\n          break;\n        }\n      }\n\n      for (; i < len; i++) {\n        if (!isPointNull(points[i * 2], points[i * 2 + 1])) {\n          break;\n        }\n      }\n    }\n\n    while (i < len) {\n      var k = drawSegment(ctx, points, i, len, len, 1, shape.smooth, smoothMonotone, shape.connectNulls);\n      drawSegment(ctx, stackedOnPoints, i + k - 1, k, len, -1, shape.stackedOnSmooth, smoothMonotone, shape.connectNulls);\n      i += k + 1;\n      ctx.closePath();\n    }\n  };\n\n  return ECPolygon;\n}(Path);\n\nexport { ECPolygon };","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../extension';\nimport { install } from './scatter/install';\nuse(install);","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport createSeriesData from '../helper/createSeriesData';\nimport SeriesModel from '../../model/Series';\n\nvar ScatterSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(ScatterSeriesModel, _super);\n\n  function ScatterSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ScatterSeriesModel.type;\n    _this.hasSymbolVisual = true;\n    return _this;\n  }\n\n  ScatterSeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return createSeriesData(null, this, {\n      useEncodeDefaulter: true\n    });\n  };\n\n  ScatterSeriesModel.prototype.getProgressive = function () {\n    var progressive = this.option.progressive;\n\n    if (progressive == null) {\n      // PENDING\n      return this.option.large ? 5e3 : this.get('progressive');\n    }\n\n    return progressive;\n  };\n\n  ScatterSeriesModel.prototype.getProgressiveThreshold = function () {\n    var progressiveThreshold = this.option.progressiveThreshold;\n\n    if (progressiveThreshold == null) {\n      // PENDING\n      return this.option.large ? 1e4 : this.get('progressiveThreshold');\n    }\n\n    return progressiveThreshold;\n  };\n\n  ScatterSeriesModel.prototype.brushSelector = function (dataIndex, data, selectors) {\n    return selectors.point(data.getItemLayout(dataIndex));\n  };\n\n  ScatterSeriesModel.type = 'series.scatter';\n  ScatterSeriesModel.dependencies = ['grid', 'polar', 'geo', 'singleAxis', 'calendar'];\n  ScatterSeriesModel.defaultOption = {\n    coordinateSystem: 'cartesian2d',\n    zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    symbolSize: 10,\n    // symbolRotate: null,  // \n    large: false,\n    // Available when large is true\n    largeThreshold: 2000,\n    // cursor: null,\n    itemStyle: {\n      opacity: 0.8 // color: \n\n    },\n    emphasis: {\n      scale: true\n    },\n    // If clip the overflow graphics\n    // Works on cartesian / polar series\n    clip: true,\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    },\n    universalTransition: {\n      divideShape: 'clone'\n    } // progressive: null\n\n  };\n  return ScatterSeriesModel;\n}(SeriesModel);\n\nexport default ScatterSeriesModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/* global Float32Array */\n// TODO Batch by color\n\nimport * as graphic from '../../util/graphic';\nimport { createSymbol } from '../../util/symbol';\nimport IncrementalDisplayable from 'zrender/lib/graphic/IncrementalDisplayable';\nimport { getECData } from '../../util/innerStore';\nvar BOOST_SIZE_THRESHOLD = 4;\n\nvar LargeSymbolPathShape =\n/** @class */\nfunction () {\n  function LargeSymbolPathShape() {}\n\n  return LargeSymbolPathShape;\n}();\n\nvar LargeSymbolPath =\n/** @class */\nfunction (_super) {\n  __extends(LargeSymbolPath, _super);\n\n  function LargeSymbolPath(opts) {\n    return _super.call(this, opts) || this;\n  }\n\n  LargeSymbolPath.prototype.getDefaultShape = function () {\n    return new LargeSymbolPathShape();\n  };\n\n  LargeSymbolPath.prototype.buildPath = function (path, shape) {\n    var points = shape.points;\n    var size = shape.size;\n    var symbolProxy = this.symbolProxy;\n    var symbolProxyShape = symbolProxy.shape;\n    var ctx = path.getContext ? path.getContext() : path;\n    var canBoost = ctx && size[0] < BOOST_SIZE_THRESHOLD; // Do draw in afterBrush.\n\n    if (canBoost) {\n      this._ctx = ctx;\n      return;\n    }\n\n    this._ctx = null;\n\n    for (var i = 0; i < points.length;) {\n      var x = points[i++];\n      var y = points[i++];\n\n      if (isNaN(x) || isNaN(y)) {\n        continue;\n      }\n\n      if (this.softClipShape && !this.softClipShape.contain(x, y)) {\n        continue;\n      }\n\n      symbolProxyShape.x = x - size[0] / 2;\n      symbolProxyShape.y = y - size[1] / 2;\n      symbolProxyShape.width = size[0];\n      symbolProxyShape.height = size[1];\n      symbolProxy.buildPath(path, symbolProxyShape, true);\n    }\n  };\n\n  LargeSymbolPath.prototype.afterBrush = function () {\n    var shape = this.shape;\n    var points = shape.points;\n    var size = shape.size;\n    var ctx = this._ctx;\n\n    if (!ctx) {\n      return;\n    } // PENDING If style or other canvas status changed?\n\n\n    for (var i = 0; i < points.length;) {\n      var x = points[i++];\n      var y = points[i++];\n\n      if (isNaN(x) || isNaN(y)) {\n        continue;\n      }\n\n      if (this.softClipShape && !this.softClipShape.contain(x, y)) {\n        continue;\n      } // fillRect is faster than building a rect path and draw.\n      // And it support light globalCompositeOperation.\n\n\n      ctx.fillRect(x - size[0] / 2, y - size[1] / 2, size[0], size[1]);\n    }\n  };\n\n  LargeSymbolPath.prototype.findDataIndex = function (x, y) {\n    // TODO ???\n    // Consider transform\n    var shape = this.shape;\n    var points = shape.points;\n    var size = shape.size;\n    var w = Math.max(size[0], 4);\n    var h = Math.max(size[1], 4); // Not consider transform\n    // Treat each element as a rect\n    // top down traverse\n\n    for (var idx = points.length / 2 - 1; idx >= 0; idx--) {\n      var i = idx * 2;\n      var x0 = points[i] - w / 2;\n      var y0 = points[i + 1] - h / 2;\n\n      if (x >= x0 && y >= y0 && x <= x0 + w && y <= y0 + h) {\n        return idx;\n      }\n    }\n\n    return -1;\n  };\n\n  return LargeSymbolPath;\n}(graphic.Path);\n\nvar LargeSymbolDraw =\n/** @class */\nfunction () {\n  function LargeSymbolDraw() {\n    this.group = new graphic.Group();\n  }\n\n  LargeSymbolDraw.prototype.isPersistent = function () {\n    return !this._incremental;\n  };\n\n  ;\n  /**\n   * Update symbols draw by new data\n   */\n\n  LargeSymbolDraw.prototype.updateData = function (data, opt) {\n    this.group.removeAll();\n    var symbolEl = new LargeSymbolPath({\n      rectHover: true,\n      cursor: 'default'\n    });\n    symbolEl.setShape({\n      points: data.getLayout('points')\n    });\n\n    this._setCommon(symbolEl, data, false, opt);\n\n    this.group.add(symbolEl);\n    this._incremental = null;\n  };\n\n  LargeSymbolDraw.prototype.updateLayout = function (data) {\n    if (this._incremental) {\n      return;\n    }\n\n    var points = data.getLayout('points');\n    this.group.eachChild(function (child) {\n      if (child.startIndex != null) {\n        var len = (child.endIndex - child.startIndex) * 2;\n        var byteOffset = child.startIndex * 4 * 2;\n        points = new Float32Array(points.buffer, byteOffset, len);\n      }\n\n      child.setShape('points', points);\n    });\n  };\n\n  LargeSymbolDraw.prototype.incrementalPrepareUpdate = function (data) {\n    this.group.removeAll();\n\n    this._clearIncremental(); // Only use incremental displayables when data amount is larger than 2 million.\n    // PENDING Incremental data?\n\n\n    if (data.count() > 2e6) {\n      if (!this._incremental) {\n        this._incremental = new IncrementalDisplayable({\n          silent: true\n        });\n      }\n\n      this.group.add(this._incremental);\n    } else {\n      this._incremental = null;\n    }\n  };\n\n  LargeSymbolDraw.prototype.incrementalUpdate = function (taskParams, data, opt) {\n    var symbolEl;\n\n    if (this._incremental) {\n      symbolEl = new LargeSymbolPath();\n\n      this._incremental.addDisplayable(symbolEl, true);\n    } else {\n      symbolEl = new LargeSymbolPath({\n        rectHover: true,\n        cursor: 'default',\n        startIndex: taskParams.start,\n        endIndex: taskParams.end\n      });\n      symbolEl.incremental = true;\n      this.group.add(symbolEl);\n    }\n\n    symbolEl.setShape({\n      points: data.getLayout('points')\n    });\n\n    this._setCommon(symbolEl, data, !!this._incremental, opt);\n  };\n\n  LargeSymbolDraw.prototype._setCommon = function (symbolEl, data, isIncremental, opt) {\n    var hostModel = data.hostModel;\n    opt = opt || {};\n    var size = data.getVisual('symbolSize');\n    symbolEl.setShape('size', size instanceof Array ? size : [size, size]);\n    symbolEl.softClipShape = opt.clipShape || null; // Create symbolProxy to build path for each data\n\n    symbolEl.symbolProxy = createSymbol(data.getVisual('symbol'), 0, 0, 0, 0); // Use symbolProxy setColor method\n\n    symbolEl.setColor = symbolEl.symbolProxy.setColor;\n    var extrudeShadow = symbolEl.shape.size[0] < BOOST_SIZE_THRESHOLD;\n    symbolEl.useStyle( // Draw shadow when doing fillRect is extremely slow.\n    hostModel.getModel('itemStyle').getItemStyle(extrudeShadow ? ['color', 'shadowBlur', 'shadowColor'] : ['color']));\n    var globalStyle = data.getVisual('style');\n    var visualColor = globalStyle && globalStyle.fill;\n\n    if (visualColor) {\n      symbolEl.setColor(visualColor);\n    }\n\n    if (!isIncremental) {\n      var ecData_1 = getECData(symbolEl); // Enable tooltip\n      // PENDING May have performance issue when path is extremely large\n\n      ecData_1.seriesIndex = hostModel.seriesIndex;\n      symbolEl.on('mousemove', function (e) {\n        ecData_1.dataIndex = null;\n        var dataIndex = symbolEl.findDataIndex(e.offsetX, e.offsetY);\n\n        if (dataIndex >= 0) {\n          // Provide dataIndex for tooltip\n          ecData_1.dataIndex = dataIndex + (symbolEl.startIndex || 0);\n        }\n      });\n    }\n  };\n\n  LargeSymbolDraw.prototype.remove = function () {\n    this._clearIncremental();\n\n    this._incremental = null;\n    this.group.removeAll();\n  };\n\n  LargeSymbolDraw.prototype._clearIncremental = function () {\n    var incremental = this._incremental;\n\n    if (incremental) {\n      incremental.clearDisplaybles();\n    }\n  };\n\n  return LargeSymbolDraw;\n}();\n\nexport default LargeSymbolDraw;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SymbolDraw from '../helper/SymbolDraw';\nimport LargeSymbolDraw from '../helper/LargeSymbolDraw';\nimport pointsLayout from '../../layout/points';\nimport ChartView from '../../view/Chart';\n\nvar ScatterView =\n/** @class */\nfunction (_super) {\n  __extends(ScatterView, _super);\n\n  function ScatterView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ScatterView.type;\n    return _this;\n  }\n\n  ScatterView.prototype.render = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n\n    var symbolDraw = this._updateSymbolDraw(data, seriesModel);\n\n    symbolDraw.updateData(data, {\n      // TODO\n      // If this parameter should be a shape or a bounding volume\n      // shape will be more general.\n      // But bounding volume like bounding rect will be much faster in the contain calculation\n      clipShape: this._getClipShape(seriesModel)\n    });\n    this._finished = true;\n  };\n\n  ScatterView.prototype.incrementalPrepareRender = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n\n    var symbolDraw = this._updateSymbolDraw(data, seriesModel);\n\n    symbolDraw.incrementalPrepareUpdate(data);\n    this._finished = false;\n  };\n\n  ScatterView.prototype.incrementalRender = function (taskParams, seriesModel, ecModel) {\n    this._symbolDraw.incrementalUpdate(taskParams, seriesModel.getData(), {\n      clipShape: this._getClipShape(seriesModel)\n    });\n\n    this._finished = taskParams.end === seriesModel.getData().count();\n  };\n\n  ScatterView.prototype.updateTransform = function (seriesModel, ecModel, api) {\n    var data = seriesModel.getData(); // Must mark group dirty and make sure the incremental layer will be cleared\n    // PENDING\n\n    this.group.dirty();\n\n    if (!this._finished || data.count() > 1e4 || !this._symbolDraw.isPersistent()) {\n      return {\n        update: true\n      };\n    } else {\n      var res = pointsLayout('').reset(seriesModel, ecModel, api);\n\n      if (res.progress) {\n        res.progress({\n          start: 0,\n          end: data.count(),\n          count: data.count()\n        }, data);\n      }\n\n      this._symbolDraw.updateLayout(data);\n    }\n  };\n\n  ScatterView.prototype._getClipShape = function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    var clipArea = coordSys && coordSys.getArea && coordSys.getArea();\n    return seriesModel.get('clip', true) ? clipArea : null;\n  };\n\n  ScatterView.prototype._updateSymbolDraw = function (data, seriesModel) {\n    var symbolDraw = this._symbolDraw;\n    var pipelineContext = seriesModel.pipelineContext;\n    var isLargeDraw = pipelineContext.large;\n\n    if (!symbolDraw || isLargeDraw !== this._isLargeDraw) {\n      symbolDraw && symbolDraw.remove();\n      symbolDraw = this._symbolDraw = isLargeDraw ? new LargeSymbolDraw() : new SymbolDraw();\n      this._isLargeDraw = isLargeDraw;\n      this.group.removeAll();\n    }\n\n    this.group.add(symbolDraw.group);\n    return symbolDraw;\n  };\n\n  ScatterView.prototype.remove = function (ecModel, api) {\n    this._symbolDraw && this._symbolDraw.remove(true);\n    this._symbolDraw = null;\n  };\n\n  ScatterView.prototype.dispose = function () {};\n\n  ScatterView.type = 'scatter';\n  return ScatterView;\n}(ChartView);\n\nexport default ScatterView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension';\nimport ScatterSeriesModel from './ScatterSeries';\nimport ScatterView from './ScatterView';\nimport { install as installGridSimple } from '../../component/grid/installSimple';\nimport layoutPoints from '../../layout/points';\nexport function install(registers) {\n  // In case developer forget to include grid component\n  use(installGridSimple);\n  registers.registerSeriesModel(ScatterSeriesModel);\n  registers.registerChartView(ScatterView);\n  registers.registerLayout(layoutPoints('scatter'));\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { retrieve, defaults, extend, each, isObject, map } from 'zrender/lib/core/util';\nimport * as graphic from '../../util/graphic';\nimport { getECData } from '../../util/innerStore';\nimport { createTextStyle } from '../../label/labelStyle';\nimport Model from '../../model/Model';\nimport { isRadianAroundZero, remRadian } from '../../util/number';\nimport { createSymbol, normalizeSymbolOffset } from '../../util/symbol';\nimport * as matrixUtil from 'zrender/lib/core/matrix';\nimport { applyTransform as v2ApplyTransform } from 'zrender/lib/core/vector';\nimport { shouldShowAllLabels } from '../../coord/axisHelper';\nimport { prepareLayoutList, hideOverlap } from '../../label/labelLayoutHelper';\nvar PI = Math.PI;\n/**\n * A final axis is translated and rotated from a \"standard axis\".\n * So opt.position and opt.rotation is required.\n *\n * A standard axis is and axis from [0, 0] to [0, axisExtent[1]],\n * for example: (0, 0) ------------> (0, 50)\n *\n * nameDirection or tickDirection or labelDirection is 1 means tick\n * or label is below the standard axis, whereas is -1 means above\n * the standard axis. labelOffset means offset between label and axis,\n * which is useful when 'onZero', where axisLabel is in the grid and\n * label in outside grid.\n *\n * Tips: like always,\n * positive rotation represents anticlockwise, and negative rotation\n * represents clockwise.\n * The direction of position coordinate is the same as the direction\n * of screen coordinate.\n *\n * Do not need to consider axis 'inverse', which is auto processed by\n * axis extent.\n */\n\nvar AxisBuilder =\n/** @class */\nfunction () {\n  function AxisBuilder(axisModel, opt) {\n    this.group = new graphic.Group();\n    this.opt = opt;\n    this.axisModel = axisModel; // Default value\n\n    defaults(opt, {\n      labelOffset: 0,\n      nameDirection: 1,\n      tickDirection: 1,\n      labelDirection: 1,\n      silent: true,\n      handleAutoShown: function handleAutoShown() {\n        return true;\n      }\n    }); // FIXME Not use a seperate text group?\n\n    var transformGroup = new graphic.Group({\n      x: opt.position[0],\n      y: opt.position[1],\n      rotation: opt.rotation\n    }); // this.group.add(transformGroup);\n    // this._transformGroup = transformGroup;\n\n    transformGroup.updateTransform();\n    this._transformGroup = transformGroup;\n  }\n\n  AxisBuilder.prototype.hasBuilder = function (name) {\n    return !!builders[name];\n  };\n\n  AxisBuilder.prototype.add = function (name) {\n    builders[name](this.opt, this.axisModel, this.group, this._transformGroup);\n  };\n\n  AxisBuilder.prototype.getGroup = function () {\n    return this.group;\n  };\n\n  AxisBuilder.innerTextLayout = function (axisRotation, textRotation, direction) {\n    var rotationDiff = remRadian(textRotation - axisRotation);\n    var textAlign;\n    var textVerticalAlign;\n\n    if (isRadianAroundZero(rotationDiff)) {\n      // Label is parallel with axis line.\n      textVerticalAlign = direction > 0 ? 'top' : 'bottom';\n      textAlign = 'center';\n    } else if (isRadianAroundZero(rotationDiff - PI)) {\n      // Label is inverse parallel with axis line.\n      textVerticalAlign = direction > 0 ? 'bottom' : 'top';\n      textAlign = 'center';\n    } else {\n      textVerticalAlign = 'middle';\n\n      if (rotationDiff > 0 && rotationDiff < PI) {\n        textAlign = direction > 0 ? 'right' : 'left';\n      } else {\n        textAlign = direction > 0 ? 'left' : 'right';\n      }\n    }\n\n    return {\n      rotation: rotationDiff,\n      textAlign: textAlign,\n      textVerticalAlign: textVerticalAlign\n    };\n  };\n\n  AxisBuilder.makeAxisEventDataBase = function (axisModel) {\n    var eventData = {\n      componentType: axisModel.mainType,\n      componentIndex: axisModel.componentIndex\n    };\n    eventData[axisModel.mainType + 'Index'] = axisModel.componentIndex;\n    return eventData;\n  };\n\n  AxisBuilder.isLabelSilent = function (axisModel) {\n    var tooltipOpt = axisModel.get('tooltip');\n    return axisModel.get('silent') // Consider mouse cursor, add these restrictions.\n    || !(axisModel.get('triggerEvent') || tooltipOpt && tooltipOpt.show);\n  };\n\n  return AxisBuilder;\n}();\n\n;\nvar builders = {\n  axisLine: function axisLine(opt, axisModel, group, transformGroup) {\n    var shown = axisModel.get(['axisLine', 'show']);\n\n    if (shown === 'auto' && opt.handleAutoShown) {\n      shown = opt.handleAutoShown('axisLine');\n    }\n\n    if (!shown) {\n      return;\n    }\n\n    var extent = axisModel.axis.getExtent();\n    var matrix = transformGroup.transform;\n    var pt1 = [extent[0], 0];\n    var pt2 = [extent[1], 0];\n\n    if (matrix) {\n      v2ApplyTransform(pt1, pt1, matrix);\n      v2ApplyTransform(pt2, pt2, matrix);\n    }\n\n    var lineStyle = extend({\n      lineCap: 'round'\n    }, axisModel.getModel(['axisLine', 'lineStyle']).getLineStyle());\n    var line = new graphic.Line({\n      // Id for animation\n      subPixelOptimize: true,\n      shape: {\n        x1: pt1[0],\n        y1: pt1[1],\n        x2: pt2[0],\n        y2: pt2[1]\n      },\n      style: lineStyle,\n      strokeContainThreshold: opt.strokeContainThreshold || 5,\n      silent: true,\n      z2: 1\n    });\n    line.anid = 'line';\n    group.add(line);\n    var arrows = axisModel.get(['axisLine', 'symbol']);\n\n    if (arrows != null) {\n      var arrowSize = axisModel.get(['axisLine', 'symbolSize']);\n\n      if (typeof arrows === 'string') {\n        // Use the same arrow for start and end point\n        arrows = [arrows, arrows];\n      }\n\n      if (typeof arrowSize === 'string' || typeof arrowSize === 'number') {\n        // Use the same size for width and height\n        arrowSize = [arrowSize, arrowSize];\n      }\n\n      var arrowOffset = normalizeSymbolOffset(axisModel.get(['axisLine', 'symbolOffset']) || 0, arrowSize);\n      var symbolWidth_1 = arrowSize[0];\n      var symbolHeight_1 = arrowSize[1];\n      each([{\n        rotate: opt.rotation + Math.PI / 2,\n        offset: arrowOffset[0],\n        r: 0\n      }, {\n        rotate: opt.rotation - Math.PI / 2,\n        offset: arrowOffset[1],\n        r: Math.sqrt((pt1[0] - pt2[0]) * (pt1[0] - pt2[0]) + (pt1[1] - pt2[1]) * (pt1[1] - pt2[1]))\n      }], function (point, index) {\n        if (arrows[index] !== 'none' && arrows[index] != null) {\n          var symbol = createSymbol(arrows[index], -symbolWidth_1 / 2, -symbolHeight_1 / 2, symbolWidth_1, symbolHeight_1, lineStyle.stroke, true); // Calculate arrow position with offset\n\n          var r = point.r + point.offset;\n          symbol.attr({\n            rotation: point.rotate,\n            x: pt1[0] + r * Math.cos(opt.rotation),\n            y: pt1[1] - r * Math.sin(opt.rotation),\n            silent: true,\n            z2: 11\n          });\n          group.add(symbol);\n        }\n      });\n    }\n  },\n  axisTickLabel: function axisTickLabel(opt, axisModel, group, transformGroup) {\n    var ticksEls = buildAxisMajorTicks(group, transformGroup, axisModel, opt);\n    var labelEls = buildAxisLabel(group, transformGroup, axisModel, opt);\n    fixMinMaxLabelShow(axisModel, labelEls, ticksEls);\n    buildAxisMinorTicks(group, transformGroup, axisModel, opt.tickDirection); // This bit fixes the label overlap issue for the time chart.\n    // See https://github.com/apache/echarts/issues/14266 for more.\n\n    if (axisModel.get(['axisLabel', 'hideOverlap'])) {\n      var labelList = prepareLayoutList(map(labelEls, function (label) {\n        return {\n          label: label,\n          priority: label.z2,\n          defaultAttr: {\n            ignore: label.ignore\n          }\n        };\n      }));\n      hideOverlap(labelList);\n    }\n  },\n  axisName: function axisName(opt, axisModel, group, transformGroup) {\n    var name = retrieve(opt.axisName, axisModel.get('name'));\n\n    if (!name) {\n      return;\n    }\n\n    var nameLocation = axisModel.get('nameLocation');\n    var nameDirection = opt.nameDirection;\n    var textStyleModel = axisModel.getModel('nameTextStyle');\n    var gap = axisModel.get('nameGap') || 0;\n    var extent = axisModel.axis.getExtent();\n    var gapSignal = extent[0] > extent[1] ? -1 : 1;\n    var pos = [nameLocation === 'start' ? extent[0] - gapSignal * gap : nameLocation === 'end' ? extent[1] + gapSignal * gap : (extent[0] + extent[1]) / 2, // Reuse labelOffset.\n    isNameLocationCenter(nameLocation) ? opt.labelOffset + nameDirection * gap : 0];\n    var labelLayout;\n    var nameRotation = axisModel.get('nameRotate');\n\n    if (nameRotation != null) {\n      nameRotation = nameRotation * PI / 180; // To radian.\n    }\n\n    var axisNameAvailableWidth;\n\n    if (isNameLocationCenter(nameLocation)) {\n      labelLayout = AxisBuilder.innerTextLayout(opt.rotation, nameRotation != null ? nameRotation : opt.rotation, // Adapt to axis.\n      nameDirection);\n    } else {\n      labelLayout = endTextLayout(opt.rotation, nameLocation, nameRotation || 0, extent);\n      axisNameAvailableWidth = opt.axisNameAvailableWidth;\n\n      if (axisNameAvailableWidth != null) {\n        axisNameAvailableWidth = Math.abs(axisNameAvailableWidth / Math.sin(labelLayout.rotation));\n        !isFinite(axisNameAvailableWidth) && (axisNameAvailableWidth = null);\n      }\n    }\n\n    var textFont = textStyleModel.getFont();\n    var truncateOpt = axisModel.get('nameTruncate', true) || {};\n    var ellipsis = truncateOpt.ellipsis;\n    var maxWidth = retrieve(opt.nameTruncateMaxWidth, truncateOpt.maxWidth, axisNameAvailableWidth);\n    var textEl = new graphic.Text({\n      x: pos[0],\n      y: pos[1],\n      rotation: labelLayout.rotation,\n      silent: AxisBuilder.isLabelSilent(axisModel),\n      style: createTextStyle(textStyleModel, {\n        text: name,\n        font: textFont,\n        overflow: 'truncate',\n        width: maxWidth,\n        ellipsis: ellipsis,\n        fill: textStyleModel.getTextColor() || axisModel.get(['axisLine', 'lineStyle', 'color']),\n        align: textStyleModel.get('align') || labelLayout.textAlign,\n        verticalAlign: textStyleModel.get('verticalAlign') || labelLayout.textVerticalAlign\n      }),\n      z2: 1\n    });\n    graphic.setTooltipConfig({\n      el: textEl,\n      componentModel: axisModel,\n      itemName: name\n    });\n    textEl.__fullText = name; // Id for animation\n\n    textEl.anid = 'name';\n\n    if (axisModel.get('triggerEvent')) {\n      var eventData = AxisBuilder.makeAxisEventDataBase(axisModel);\n      eventData.targetType = 'axisName';\n      eventData.name = name;\n      getECData(textEl).eventData = eventData;\n    } // FIXME\n\n\n    transformGroup.add(textEl);\n    textEl.updateTransform();\n    group.add(textEl);\n    textEl.decomposeTransform();\n  }\n};\n\nfunction endTextLayout(rotation, textPosition, textRotate, extent) {\n  var rotationDiff = remRadian(textRotate - rotation);\n  var textAlign;\n  var textVerticalAlign;\n  var inverse = extent[0] > extent[1];\n  var onLeft = textPosition === 'start' && !inverse || textPosition !== 'start' && inverse;\n\n  if (isRadianAroundZero(rotationDiff - PI / 2)) {\n    textVerticalAlign = onLeft ? 'bottom' : 'top';\n    textAlign = 'center';\n  } else if (isRadianAroundZero(rotationDiff - PI * 1.5)) {\n    textVerticalAlign = onLeft ? 'top' : 'bottom';\n    textAlign = 'center';\n  } else {\n    textVerticalAlign = 'middle';\n\n    if (rotationDiff < PI * 1.5 && rotationDiff > PI / 2) {\n      textAlign = onLeft ? 'left' : 'right';\n    } else {\n      textAlign = onLeft ? 'right' : 'left';\n    }\n  }\n\n  return {\n    rotation: rotationDiff,\n    textAlign: textAlign,\n    textVerticalAlign: textVerticalAlign\n  };\n}\n\nfunction fixMinMaxLabelShow(axisModel, labelEls, tickEls) {\n  if (shouldShowAllLabels(axisModel.axis)) {\n    return;\n  } // If min or max are user set, we need to check\n  // If the tick on min(max) are overlap on their neighbour tick\n  // If they are overlapped, we need to hide the min(max) tick label\n\n\n  var showMinLabel = axisModel.get(['axisLabel', 'showMinLabel']);\n  var showMaxLabel = axisModel.get(['axisLabel', 'showMaxLabel']); // FIXME\n  // Have not consider onBand yet, where tick els is more than label els.\n\n  labelEls = labelEls || [];\n  tickEls = tickEls || [];\n  var firstLabel = labelEls[0];\n  var nextLabel = labelEls[1];\n  var lastLabel = labelEls[labelEls.length - 1];\n  var prevLabel = labelEls[labelEls.length - 2];\n  var firstTick = tickEls[0];\n  var nextTick = tickEls[1];\n  var lastTick = tickEls[tickEls.length - 1];\n  var prevTick = tickEls[tickEls.length - 2];\n\n  if (showMinLabel === false) {\n    ignoreEl(firstLabel);\n    ignoreEl(firstTick);\n  } else if (isTwoLabelOverlapped(firstLabel, nextLabel)) {\n    if (showMinLabel) {\n      ignoreEl(nextLabel);\n      ignoreEl(nextTick);\n    } else {\n      ignoreEl(firstLabel);\n      ignoreEl(firstTick);\n    }\n  }\n\n  if (showMaxLabel === false) {\n    ignoreEl(lastLabel);\n    ignoreEl(lastTick);\n  } else if (isTwoLabelOverlapped(prevLabel, lastLabel)) {\n    if (showMaxLabel) {\n      ignoreEl(prevLabel);\n      ignoreEl(prevTick);\n    } else {\n      ignoreEl(lastLabel);\n      ignoreEl(lastTick);\n    }\n  }\n}\n\nfunction ignoreEl(el) {\n  el && (el.ignore = true);\n}\n\nfunction isTwoLabelOverlapped(current, next) {\n  // current and next has the same rotation.\n  var firstRect = current && current.getBoundingRect().clone();\n  var nextRect = next && next.getBoundingRect().clone();\n\n  if (!firstRect || !nextRect) {\n    return;\n  } // When checking intersect of two rotated labels, we use mRotationBack\n  // to avoid that boundingRect is enlarge when using `boundingRect.applyTransform`.\n\n\n  var mRotationBack = matrixUtil.identity([]);\n  matrixUtil.rotate(mRotationBack, mRotationBack, -current.rotation);\n  firstRect.applyTransform(matrixUtil.mul([], mRotationBack, current.getLocalTransform()));\n  nextRect.applyTransform(matrixUtil.mul([], mRotationBack, next.getLocalTransform()));\n  return firstRect.intersect(nextRect);\n}\n\nfunction isNameLocationCenter(nameLocation) {\n  return nameLocation === 'middle' || nameLocation === 'center';\n}\n\nfunction createTicks(ticksCoords, tickTransform, tickEndCoord, tickLineStyle, anidPrefix) {\n  var tickEls = [];\n  var pt1 = [];\n  var pt2 = [];\n\n  for (var i = 0; i < ticksCoords.length; i++) {\n    var tickCoord = ticksCoords[i].coord;\n    pt1[0] = tickCoord;\n    pt1[1] = 0;\n    pt2[0] = tickCoord;\n    pt2[1] = tickEndCoord;\n\n    if (tickTransform) {\n      v2ApplyTransform(pt1, pt1, tickTransform);\n      v2ApplyTransform(pt2, pt2, tickTransform);\n    } // Tick line, Not use group transform to have better line draw\n\n\n    var tickEl = new graphic.Line({\n      subPixelOptimize: true,\n      shape: {\n        x1: pt1[0],\n        y1: pt1[1],\n        x2: pt2[0],\n        y2: pt2[1]\n      },\n      style: tickLineStyle,\n      z2: 2,\n      autoBatch: true,\n      silent: true\n    });\n    tickEl.anid = anidPrefix + '_' + ticksCoords[i].tickValue;\n    tickEls.push(tickEl);\n  }\n\n  return tickEls;\n}\n\nfunction buildAxisMajorTicks(group, transformGroup, axisModel, opt) {\n  var axis = axisModel.axis;\n  var tickModel = axisModel.getModel('axisTick');\n  var shown = tickModel.get('show');\n\n  if (shown === 'auto' && opt.handleAutoShown) {\n    shown = opt.handleAutoShown('axisTick');\n  }\n\n  if (!shown || axis.scale.isBlank()) {\n    return;\n  }\n\n  var lineStyleModel = tickModel.getModel('lineStyle');\n  var tickEndCoord = opt.tickDirection * tickModel.get('length');\n  var ticksCoords = axis.getTicksCoords();\n  var ticksEls = createTicks(ticksCoords, transformGroup.transform, tickEndCoord, defaults(lineStyleModel.getLineStyle(), {\n    stroke: axisModel.get(['axisLine', 'lineStyle', 'color'])\n  }), 'ticks');\n\n  for (var i = 0; i < ticksEls.length; i++) {\n    group.add(ticksEls[i]);\n  }\n\n  return ticksEls;\n}\n\nfunction buildAxisMinorTicks(group, transformGroup, axisModel, tickDirection) {\n  var axis = axisModel.axis;\n  var minorTickModel = axisModel.getModel('minorTick');\n\n  if (!minorTickModel.get('show') || axis.scale.isBlank()) {\n    return;\n  }\n\n  var minorTicksCoords = axis.getMinorTicksCoords();\n\n  if (!minorTicksCoords.length) {\n    return;\n  }\n\n  var lineStyleModel = minorTickModel.getModel('lineStyle');\n  var tickEndCoord = tickDirection * minorTickModel.get('length');\n  var minorTickLineStyle = defaults(lineStyleModel.getLineStyle(), defaults(axisModel.getModel('axisTick').getLineStyle(), {\n    stroke: axisModel.get(['axisLine', 'lineStyle', 'color'])\n  }));\n\n  for (var i = 0; i < minorTicksCoords.length; i++) {\n    var minorTicksEls = createTicks(minorTicksCoords[i], transformGroup.transform, tickEndCoord, minorTickLineStyle, 'minorticks_' + i);\n\n    for (var k = 0; k < minorTicksEls.length; k++) {\n      group.add(minorTicksEls[k]);\n    }\n  }\n}\n\nfunction buildAxisLabel(group, transformGroup, axisModel, opt) {\n  var axis = axisModel.axis;\n  var show = retrieve(opt.axisLabelShow, axisModel.get(['axisLabel', 'show']));\n\n  if (!show || axis.scale.isBlank()) {\n    return;\n  }\n\n  var labelModel = axisModel.getModel('axisLabel');\n  var labelMargin = labelModel.get('margin');\n  var labels = axis.getViewLabels(); // Special label rotate.\n\n  var labelRotation = (retrieve(opt.labelRotate, labelModel.get('rotate')) || 0) * PI / 180;\n  var labelLayout = AxisBuilder.innerTextLayout(opt.rotation, labelRotation, opt.labelDirection);\n  var rawCategoryData = axisModel.getCategories && axisModel.getCategories(true);\n  var labelEls = [];\n  var silent = AxisBuilder.isLabelSilent(axisModel);\n  var triggerEvent = axisModel.get('triggerEvent');\n  each(labels, function (labelItem, index) {\n    var tickValue = axis.scale.type === 'ordinal' ? axis.scale.getRawOrdinalNumber(labelItem.tickValue) : labelItem.tickValue;\n    var formattedLabel = labelItem.formattedLabel;\n    var rawLabel = labelItem.rawLabel;\n    var itemLabelModel = labelModel;\n\n    if (rawCategoryData && rawCategoryData[tickValue]) {\n      var rawCategoryItem = rawCategoryData[tickValue];\n\n      if (isObject(rawCategoryItem) && rawCategoryItem.textStyle) {\n        itemLabelModel = new Model(rawCategoryItem.textStyle, labelModel, axisModel.ecModel);\n      }\n    }\n\n    var textColor = itemLabelModel.getTextColor() || axisModel.get(['axisLine', 'lineStyle', 'color']);\n    var tickCoord = axis.dataToCoord(tickValue);\n    var textEl = new graphic.Text({\n      x: tickCoord,\n      y: opt.labelOffset + opt.labelDirection * labelMargin,\n      rotation: labelLayout.rotation,\n      silent: silent,\n      z2: 10 + (labelItem.level || 0),\n      style: createTextStyle(itemLabelModel, {\n        text: formattedLabel,\n        align: itemLabelModel.getShallow('align', true) || labelLayout.textAlign,\n        verticalAlign: itemLabelModel.getShallow('verticalAlign', true) || itemLabelModel.getShallow('baseline', true) || labelLayout.textVerticalAlign,\n        fill: typeof textColor === 'function' ? textColor( // (1) In category axis with data zoom, tick is not the original\n        // index of axis.data. So tick should not be exposed to user\n        // in category axis.\n        // (2) Compatible with previous version, which always use formatted label as\n        // input. But in interval scale the formatted label is like '223,445', which\n        // maked user repalce ','. So we modify it to return original val but remain\n        // it as 'string' to avoid error in replacing.\n        axis.type === 'category' ? rawLabel : axis.type === 'value' ? tickValue + '' : tickValue, index) : textColor\n      })\n    });\n    textEl.anid = 'label_' + tickValue; // Pack data for mouse event\n\n    if (triggerEvent) {\n      var eventData = AxisBuilder.makeAxisEventDataBase(axisModel);\n      eventData.targetType = 'axisLabel';\n      eventData.value = rawLabel;\n      getECData(textEl).eventData = eventData;\n    } // FIXME\n\n\n    transformGroup.add(textEl);\n    textEl.updateTransform();\n    labelEls.push(textEl);\n    group.add(textEl);\n    textEl.decomposeTransform();\n  });\n  return labelEls;\n}\n\nexport default AxisBuilder;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as axisPointerModelHelper from '../axisPointer/modelHelper';\nimport ComponentView from '../../view/Component';\nvar axisPointerClazz = {};\n/**\n * Base class of AxisView.\n */\n\nvar AxisView =\n/** @class */\nfunction (_super) {\n  __extends(AxisView, _super);\n\n  function AxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = AxisView.type;\n    return _this;\n  }\n  /**\n   * @override\n   */\n\n\n  AxisView.prototype.render = function (axisModel, ecModel, api, payload) {\n    // FIXME\n    // This process should proformed after coordinate systems updated\n    // (axis scale updated), and should be performed each time update.\n    // So put it here temporarily, although it is not appropriate to\n    // put a model-writing procedure in `view`.\n    this.axisPointerClass && axisPointerModelHelper.fixValue(axisModel);\n\n    _super.prototype.render.apply(this, arguments);\n\n    this._doUpdateAxisPointerClass(axisModel, api, true);\n  };\n  /**\n   * Action handler.\n   */\n\n\n  AxisView.prototype.updateAxisPointer = function (axisModel, ecModel, api, payload) {\n    this._doUpdateAxisPointerClass(axisModel, api, false);\n  };\n  /**\n   * @override\n   */\n\n\n  AxisView.prototype.remove = function (ecModel, api) {\n    var axisPointer = this._axisPointer;\n    axisPointer && axisPointer.remove(api);\n  };\n  /**\n   * @override\n   */\n\n\n  AxisView.prototype.dispose = function (ecModel, api) {\n    this._disposeAxisPointer(api);\n\n    _super.prototype.dispose.apply(this, arguments);\n  };\n\n  AxisView.prototype._doUpdateAxisPointerClass = function (axisModel, api, forceRender) {\n    var Clazz = AxisView.getAxisPointerClass(this.axisPointerClass);\n\n    if (!Clazz) {\n      return;\n    }\n\n    var axisPointerModel = axisPointerModelHelper.getAxisPointerModel(axisModel);\n    axisPointerModel ? (this._axisPointer || (this._axisPointer = new Clazz())).render(axisModel, axisPointerModel, api, forceRender) : this._disposeAxisPointer(api);\n  };\n\n  AxisView.prototype._disposeAxisPointer = function (api) {\n    this._axisPointer && this._axisPointer.dispose(api);\n    this._axisPointer = null;\n  };\n\n  AxisView.registerAxisPointerClass = function (type, clazz) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (axisPointerClazz[type]) {\n        throw new Error('axisPointer ' + type + ' exists');\n      }\n    }\n\n    axisPointerClazz[type] = clazz;\n  };\n\n  ;\n\n  AxisView.getAxisPointerClass = function (type) {\n    return type && axisPointerClazz[type];\n  };\n\n  ;\n  AxisView.type = 'axis';\n  return AxisView;\n}(ComponentView);\n\nexport default AxisView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as graphic from '../../util/graphic';\nimport { makeInner } from '../../util/model';\nvar inner = makeInner();\nexport function rectCoordAxisBuildSplitArea(axisView, axisGroup, axisModel, gridModel) {\n  var axis = axisModel.axis;\n\n  if (axis.scale.isBlank()) {\n    return;\n  } // TODO: TYPE\n\n\n  var splitAreaModel = axisModel.getModel('splitArea');\n  var areaStyleModel = splitAreaModel.getModel('areaStyle');\n  var areaColors = areaStyleModel.get('color');\n  var gridRect = gridModel.coordinateSystem.getRect();\n  var ticksCoords = axis.getTicksCoords({\n    tickModel: splitAreaModel,\n    clamp: true\n  });\n\n  if (!ticksCoords.length) {\n    return;\n  } // For Making appropriate splitArea animation, the color and anid\n  // should be corresponding to previous one if possible.\n\n\n  var areaColorsLen = areaColors.length;\n  var lastSplitAreaColors = inner(axisView).splitAreaColors;\n  var newSplitAreaColors = zrUtil.createHashMap();\n  var colorIndex = 0;\n\n  if (lastSplitAreaColors) {\n    for (var i = 0; i < ticksCoords.length; i++) {\n      var cIndex = lastSplitAreaColors.get(ticksCoords[i].tickValue);\n\n      if (cIndex != null) {\n        colorIndex = (cIndex + (areaColorsLen - 1) * i) % areaColorsLen;\n        break;\n      }\n    }\n  }\n\n  var prev = axis.toGlobalCoord(ticksCoords[0].coord);\n  var areaStyle = areaStyleModel.getAreaStyle();\n  areaColors = zrUtil.isArray(areaColors) ? areaColors : [areaColors];\n\n  for (var i = 1; i < ticksCoords.length; i++) {\n    var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n    var x = void 0;\n    var y = void 0;\n    var width = void 0;\n    var height = void 0;\n\n    if (axis.isHorizontal()) {\n      x = prev;\n      y = gridRect.y;\n      width = tickCoord - x;\n      height = gridRect.height;\n      prev = x + width;\n    } else {\n      x = gridRect.x;\n      y = prev;\n      width = gridRect.width;\n      height = tickCoord - y;\n      prev = y + height;\n    }\n\n    var tickValue = ticksCoords[i - 1].tickValue;\n    tickValue != null && newSplitAreaColors.set(tickValue, colorIndex);\n    axisGroup.add(new graphic.Rect({\n      anid: tickValue != null ? 'area_' + tickValue : null,\n      shape: {\n        x: x,\n        y: y,\n        width: width,\n        height: height\n      },\n      style: zrUtil.defaults({\n        fill: areaColors[colorIndex]\n      }, areaStyle),\n      autoBatch: true,\n      silent: true\n    }));\n    colorIndex = (colorIndex + 1) % areaColorsLen;\n  }\n\n  inner(axisView).splitAreaColors = newSplitAreaColors;\n}\nexport function rectCoordAxisHandleRemove(axisView) {\n  inner(axisView).splitAreaColors = null;\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as graphic from '../../util/graphic';\nimport * as axisPointerModelHelper from './modelHelper';\nimport * as eventTool from 'zrender/lib/core/event';\nimport * as throttleUtil from '../../util/throttle';\nimport { makeInner } from '../../util/model';\nvar inner = makeInner();\nvar clone = zrUtil.clone;\nvar bind = zrUtil.bind;\n/**\n * Base axis pointer class in 2D.\n */\n\nvar BaseAxisPointer =\n/** @class */\nfunction () {\n  function BaseAxisPointer() {\n    this._dragging = false;\n    /**\n     * In px, arbitrary value. Do not set too small,\n     * no animation is ok for most cases.\n     */\n\n    this.animationThreshold = 15;\n  }\n  /**\n   * @implement\n   */\n\n\n  BaseAxisPointer.prototype.render = function (axisModel, axisPointerModel, api, forceRender) {\n    var value = axisPointerModel.get('value');\n    var status = axisPointerModel.get('status'); // Bind them to `this`, not in closure, otherwise they will not\n    // be replaced when user calling setOption in not merge mode.\n\n    this._axisModel = axisModel;\n    this._axisPointerModel = axisPointerModel;\n    this._api = api; // Optimize: `render` will be called repeatly during mouse move.\n    // So it is power consuming if performing `render` each time,\n    // especially on mobile device.\n\n    if (!forceRender && this._lastValue === value && this._lastStatus === status) {\n      return;\n    }\n\n    this._lastValue = value;\n    this._lastStatus = status;\n    var group = this._group;\n    var handle = this._handle;\n\n    if (!status || status === 'hide') {\n      // Do not clear here, for animation better.\n      group && group.hide();\n      handle && handle.hide();\n      return;\n    }\n\n    group && group.show();\n    handle && handle.show(); // Otherwise status is 'show'\n\n    var elOption = {};\n    this.makeElOption(elOption, value, axisModel, axisPointerModel, api); // Enable change axis pointer type.\n\n    var graphicKey = elOption.graphicKey;\n\n    if (graphicKey !== this._lastGraphicKey) {\n      this.clear(api);\n    }\n\n    this._lastGraphicKey = graphicKey;\n    var moveAnimation = this._moveAnimation = this.determineAnimation(axisModel, axisPointerModel);\n\n    if (!group) {\n      group = this._group = new graphic.Group();\n      this.createPointerEl(group, elOption, axisModel, axisPointerModel);\n      this.createLabelEl(group, elOption, axisModel, axisPointerModel);\n      api.getZr().add(group);\n    } else {\n      var doUpdateProps = zrUtil.curry(updateProps, axisPointerModel, moveAnimation);\n      this.updatePointerEl(group, elOption, doUpdateProps);\n      this.updateLabelEl(group, elOption, doUpdateProps, axisPointerModel);\n    }\n\n    updateMandatoryProps(group, axisPointerModel, true);\n\n    this._renderHandle(value);\n  };\n  /**\n   * @implement\n   */\n\n\n  BaseAxisPointer.prototype.remove = function (api) {\n    this.clear(api);\n  };\n  /**\n   * @implement\n   */\n\n\n  BaseAxisPointer.prototype.dispose = function (api) {\n    this.clear(api);\n  };\n  /**\n   * @protected\n   */\n\n\n  BaseAxisPointer.prototype.determineAnimation = function (axisModel, axisPointerModel) {\n    var animation = axisPointerModel.get('animation');\n    var axis = axisModel.axis;\n    var isCategoryAxis = axis.type === 'category';\n    var useSnap = axisPointerModel.get('snap'); // Value axis without snap always do not snap.\n\n    if (!useSnap && !isCategoryAxis) {\n      return false;\n    }\n\n    if (animation === 'auto' || animation == null) {\n      var animationThreshold = this.animationThreshold;\n\n      if (isCategoryAxis && axis.getBandWidth() > animationThreshold) {\n        return true;\n      } // It is important to auto animation when snap used. Consider if there is\n      // a dataZoom, animation will be disabled when too many points exist, while\n      // it will be enabled for better visual effect when little points exist.\n\n\n      if (useSnap) {\n        var seriesDataCount = axisPointerModelHelper.getAxisInfo(axisModel).seriesDataCount;\n        var axisExtent = axis.getExtent(); // Approximate band width\n\n        return Math.abs(axisExtent[0] - axisExtent[1]) / seriesDataCount > animationThreshold;\n      }\n\n      return false;\n    }\n\n    return animation === true;\n  };\n  /**\n   * add {pointer, label, graphicKey} to elOption\n   * @protected\n   */\n\n\n  BaseAxisPointer.prototype.makeElOption = function (elOption, value, axisModel, axisPointerModel, api) {// Shoule be implemenented by sub-class.\n  };\n  /**\n   * @protected\n   */\n\n\n  BaseAxisPointer.prototype.createPointerEl = function (group, elOption, axisModel, axisPointerModel) {\n    var pointerOption = elOption.pointer;\n\n    if (pointerOption) {\n      var pointerEl = inner(group).pointerEl = new graphic[pointerOption.type](clone(elOption.pointer));\n      group.add(pointerEl);\n    }\n  };\n  /**\n   * @protected\n   */\n\n\n  BaseAxisPointer.prototype.createLabelEl = function (group, elOption, axisModel, axisPointerModel) {\n    if (elOption.label) {\n      var labelEl = inner(group).labelEl = new graphic.Text(clone(elOption.label));\n      group.add(labelEl);\n      updateLabelShowHide(labelEl, axisPointerModel);\n    }\n  };\n  /**\n   * @protected\n   */\n\n\n  BaseAxisPointer.prototype.updatePointerEl = function (group, elOption, updateProps) {\n    var pointerEl = inner(group).pointerEl;\n\n    if (pointerEl && elOption.pointer) {\n      pointerEl.setStyle(elOption.pointer.style);\n      updateProps(pointerEl, {\n        shape: elOption.pointer.shape\n      });\n    }\n  };\n  /**\n   * @protected\n   */\n\n\n  BaseAxisPointer.prototype.updateLabelEl = function (group, elOption, updateProps, axisPointerModel) {\n    var labelEl = inner(group).labelEl;\n\n    if (labelEl) {\n      labelEl.setStyle(elOption.label.style);\n      updateProps(labelEl, {\n        // Consider text length change in vertical axis, animation should\n        // be used on shape, otherwise the effect will be weird.\n        // TODOTODO\n        // shape: elOption.label.shape,\n        x: elOption.label.x,\n        y: elOption.label.y\n      });\n      updateLabelShowHide(labelEl, axisPointerModel);\n    }\n  };\n  /**\n   * @private\n   */\n\n\n  BaseAxisPointer.prototype._renderHandle = function (value) {\n    if (this._dragging || !this.updateHandleTransform) {\n      return;\n    }\n\n    var axisPointerModel = this._axisPointerModel;\n\n    var zr = this._api.getZr();\n\n    var handle = this._handle;\n    var handleModel = axisPointerModel.getModel('handle');\n    var status = axisPointerModel.get('status');\n\n    if (!handleModel.get('show') || !status || status === 'hide') {\n      handle && zr.remove(handle);\n      this._handle = null;\n      return;\n    }\n\n    var isInit;\n\n    if (!this._handle) {\n      isInit = true;\n      handle = this._handle = graphic.createIcon(handleModel.get('icon'), {\n        cursor: 'move',\n        draggable: true,\n        onmousemove: function onmousemove(e) {\n          // Fot mobile devicem, prevent screen slider on the button.\n          eventTool.stop(e.event);\n        },\n        onmousedown: bind(this._onHandleDragMove, this, 0, 0),\n        drift: bind(this._onHandleDragMove, this),\n        ondragend: bind(this._onHandleDragEnd, this)\n      });\n      zr.add(handle);\n    }\n\n    updateMandatoryProps(handle, axisPointerModel, false); // update style\n\n    handle.setStyle(handleModel.getItemStyle(null, ['color', 'borderColor', 'borderWidth', 'opacity', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'])); // update position\n\n    var handleSize = handleModel.get('size');\n\n    if (!zrUtil.isArray(handleSize)) {\n      handleSize = [handleSize, handleSize];\n    }\n\n    handle.scaleX = handleSize[0] / 2;\n    handle.scaleY = handleSize[1] / 2;\n    throttleUtil.createOrUpdate(this, '_doDispatchAxisPointer', handleModel.get('throttle') || 0, 'fixRate');\n\n    this._moveHandleToValue(value, isInit);\n  };\n\n  BaseAxisPointer.prototype._moveHandleToValue = function (value, isInit) {\n    updateProps(this._axisPointerModel, !isInit && this._moveAnimation, this._handle, getHandleTransProps(this.getHandleTransform(value, this._axisModel, this._axisPointerModel)));\n  };\n\n  BaseAxisPointer.prototype._onHandleDragMove = function (dx, dy) {\n    var handle = this._handle;\n\n    if (!handle) {\n      return;\n    }\n\n    this._dragging = true; // Persistent for throttle.\n\n    var trans = this.updateHandleTransform(getHandleTransProps(handle), [dx, dy], this._axisModel, this._axisPointerModel);\n    this._payloadInfo = trans;\n    handle.stopAnimation();\n    handle.attr(getHandleTransProps(trans));\n    inner(handle).lastProp = null;\n\n    this._doDispatchAxisPointer();\n  };\n  /**\n   * Throttled method.\n   */\n\n\n  BaseAxisPointer.prototype._doDispatchAxisPointer = function () {\n    var handle = this._handle;\n\n    if (!handle) {\n      return;\n    }\n\n    var payloadInfo = this._payloadInfo;\n    var axisModel = this._axisModel;\n\n    this._api.dispatchAction({\n      type: 'updateAxisPointer',\n      x: payloadInfo.cursorPoint[0],\n      y: payloadInfo.cursorPoint[1],\n      tooltipOption: payloadInfo.tooltipOption,\n      axesInfo: [{\n        axisDim: axisModel.axis.dim,\n        axisIndex: axisModel.componentIndex\n      }]\n    });\n  };\n\n  BaseAxisPointer.prototype._onHandleDragEnd = function () {\n    this._dragging = false;\n    var handle = this._handle;\n\n    if (!handle) {\n      return;\n    }\n\n    var value = this._axisPointerModel.get('value'); // Consider snap or categroy axis, handle may be not consistent with\n    // axisPointer. So move handle to align the exact value position when\n    // drag ended.\n\n\n    this._moveHandleToValue(value); // For the effect: tooltip will be shown when finger holding on handle\n    // button, and will be hidden after finger left handle button.\n\n\n    this._api.dispatchAction({\n      type: 'hideTip'\n    });\n  };\n  /**\n   * @private\n   */\n\n\n  BaseAxisPointer.prototype.clear = function (api) {\n    this._lastValue = null;\n    this._lastStatus = null;\n    var zr = api.getZr();\n    var group = this._group;\n    var handle = this._handle;\n\n    if (zr && group) {\n      this._lastGraphicKey = null;\n      group && zr.remove(group);\n      handle && zr.remove(handle);\n      this._group = null;\n      this._handle = null;\n      this._payloadInfo = null;\n    }\n  };\n  /**\n   * @protected\n   */\n\n\n  BaseAxisPointer.prototype.doClear = function () {// Implemented by sub-class if necessary.\n  };\n\n  BaseAxisPointer.prototype.buildLabel = function (xy, wh, xDimIndex) {\n    xDimIndex = xDimIndex || 0;\n    return {\n      x: xy[xDimIndex],\n      y: xy[1 - xDimIndex],\n      width: wh[xDimIndex],\n      height: wh[1 - xDimIndex]\n    };\n  };\n\n  return BaseAxisPointer;\n}();\n\nfunction updateProps(animationModel, moveAnimation, el, props) {\n  // Animation optimize.\n  if (!propsEqual(inner(el).lastProp, props)) {\n    inner(el).lastProp = props;\n    moveAnimation ? graphic.updateProps(el, props, animationModel) : (el.stopAnimation(), el.attr(props));\n  }\n}\n\nfunction propsEqual(lastProps, newProps) {\n  if (zrUtil.isObject(lastProps) && zrUtil.isObject(newProps)) {\n    var equals_1 = true;\n    zrUtil.each(newProps, function (item, key) {\n      equals_1 = equals_1 && propsEqual(lastProps[key], item);\n    });\n    return !!equals_1;\n  } else {\n    return lastProps === newProps;\n  }\n}\n\nfunction updateLabelShowHide(labelEl, axisPointerModel) {\n  labelEl[axisPointerModel.get(['label', 'show']) ? 'show' : 'hide']();\n}\n\nfunction getHandleTransProps(trans) {\n  return {\n    x: trans.x || 0,\n    y: trans.y || 0,\n    rotation: trans.rotation || 0\n  };\n}\n\nfunction updateMandatoryProps(group, axisPointerModel, silent) {\n  var z = axisPointerModel.get('z');\n  var zlevel = axisPointerModel.get('zlevel');\n  group && group.traverse(function (el) {\n    if (el.type !== 'group') {\n      z != null && (el.z = z);\n      zlevel != null && (el.zlevel = zlevel);\n      el.silent = silent;\n    }\n  });\n}\n\nexport default BaseAxisPointer;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as modelUtil from '../../util/model';\n/**\n * @param finder contains {seriesIndex, dataIndex, dataIndexInside}\n * @param ecModel\n * @return  {point: [x, y], el: ...} point Will not be null.\n */\n\nexport default function findPointFromSeries(finder, ecModel) {\n  var point = [];\n  var seriesIndex = finder.seriesIndex;\n  var seriesModel;\n\n  if (seriesIndex == null || !(seriesModel = ecModel.getSeriesByIndex(seriesIndex))) {\n    return {\n      point: []\n    };\n  }\n\n  var data = seriesModel.getData();\n  var dataIndex = modelUtil.queryDataIndex(data, finder);\n\n  if (dataIndex == null || dataIndex < 0 || zrUtil.isArray(dataIndex)) {\n    return {\n      point: []\n    };\n  }\n\n  var el = data.getItemGraphicEl(dataIndex);\n  var coordSys = seriesModel.coordinateSystem;\n\n  if (seriesModel.getTooltipPosition) {\n    point = seriesModel.getTooltipPosition(dataIndex) || [];\n  } else if (coordSys && coordSys.dataToPoint) {\n    if (finder.isStacked) {\n      var baseAxis = coordSys.getBaseAxis();\n      var valueAxis = coordSys.getOtherAxis(baseAxis);\n      var valueAxisDim = valueAxis.dim;\n      var baseAxisDim = baseAxis.dim;\n      var baseDataOffset = valueAxisDim === 'x' || valueAxisDim === 'radius' ? 1 : 0;\n      var baseDim = data.mapDimension(baseAxisDim);\n      var stackedData = [];\n      stackedData[baseDataOffset] = data.get(baseDim, dataIndex);\n      stackedData[1 - baseDataOffset] = data.get(data.getCalculationInfo('stackResultDimension'), dataIndex);\n      point = coordSys.dataToPoint(stackedData) || [];\n    } else {\n      point = coordSys.dataToPoint(data.getValues(zrUtil.map(coordSys.dimensions, function (dim) {\n        return data.mapDimension(dim);\n      }), dataIndex)) || [];\n    }\n  } else if (el) {\n    // Use graphic bounding rect\n    var rect = el.getBoundingRect().clone();\n    rect.applyTransform(el.transform);\n    point = [rect.x + rect.width / 2, rect.y + rect.height / 2];\n  }\n\n  return {\n    point: point,\n    el: el\n  };\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport env from 'zrender/lib/core/env';\nimport { makeInner } from '../../util/model';\nvar inner = makeInner();\nvar each = zrUtil.each;\n/**\n * @param {string} key\n * @param {module:echarts/ExtensionAPI} api\n * @param {Function} handler\n *      param: {string} currTrigger\n *      param: {Array.<number>} point\n */\n\nexport function register(key, api, handler) {\n  if (env.node) {\n    return;\n  }\n\n  var zr = api.getZr();\n  inner(zr).records || (inner(zr).records = {});\n  initGlobalListeners(zr, api);\n  var record = inner(zr).records[key] || (inner(zr).records[key] = {});\n  record.handler = handler;\n}\n\nfunction initGlobalListeners(zr, api) {\n  if (inner(zr).initialized) {\n    return;\n  }\n\n  inner(zr).initialized = true;\n  useHandler('click', zrUtil.curry(doEnter, 'click'));\n  useHandler('mousemove', zrUtil.curry(doEnter, 'mousemove')); // useHandler('mouseout', onLeave);\n\n  useHandler('globalout', onLeave);\n\n  function useHandler(eventType, cb) {\n    zr.on(eventType, function (e) {\n      var dis = makeDispatchAction(api);\n      each(inner(zr).records, function (record) {\n        record && cb(record, e, dis.dispatchAction);\n      });\n      dispatchTooltipFinally(dis.pendings, api);\n    });\n  }\n}\n\nfunction dispatchTooltipFinally(pendings, api) {\n  var showLen = pendings.showTip.length;\n  var hideLen = pendings.hideTip.length;\n  var actuallyPayload;\n\n  if (showLen) {\n    actuallyPayload = pendings.showTip[showLen - 1];\n  } else if (hideLen) {\n    actuallyPayload = pendings.hideTip[hideLen - 1];\n  }\n\n  if (actuallyPayload) {\n    actuallyPayload.dispatchAction = null;\n    api.dispatchAction(actuallyPayload);\n  }\n}\n\nfunction onLeave(record, e, dispatchAction) {\n  record.handler('leave', null, dispatchAction);\n}\n\nfunction doEnter(currTrigger, record, e, dispatchAction) {\n  record.handler(currTrigger, e, dispatchAction);\n}\n\nfunction makeDispatchAction(api) {\n  var pendings = {\n    showTip: [],\n    hideTip: []\n  }; // FIXME\n  // better approach?\n  // 'showTip' and 'hideTip' can be triggered by axisPointer and tooltip,\n  // which may be conflict, (axisPointer call showTip but tooltip call hideTip);\n  // So we have to add \"final stage\" to merge those dispatched actions.\n\n  var dispatchAction = function dispatchAction(payload) {\n    var pendingList = pendings[payload.type];\n\n    if (pendingList) {\n      pendingList.push(payload);\n    } else {\n      payload.dispatchAction = dispatchAction;\n      api.dispatchAction(payload);\n    }\n  };\n\n  return {\n    dispatchAction: dispatchAction,\n    pendings: pendings\n  };\n}\n\nexport function unregister(key, api) {\n  if (env.node) {\n    return;\n  }\n\n  var zr = api.getZr();\n  var record = (inner(zr).records || {})[key];\n\n  if (record) {\n    inner(zr).records[key] = null;\n  }\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport BaseAxisPointer from './BaseAxisPointer';\nimport * as viewHelper from './viewHelper';\nimport * as cartesianAxisHelper from '../../coord/cartesian/cartesianAxisHelper';\n\nvar CartesianAxisPointer =\n/** @class */\nfunction (_super) {\n  __extends(CartesianAxisPointer, _super);\n\n  function CartesianAxisPointer() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\n   * @override\n   */\n\n\n  CartesianAxisPointer.prototype.makeElOption = function (elOption, value, axisModel, axisPointerModel, api) {\n    var axis = axisModel.axis;\n    var grid = axis.grid;\n    var axisPointerType = axisPointerModel.get('type');\n    var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();\n    var pixelValue = axis.toGlobalCoord(axis.dataToCoord(value, true));\n\n    if (axisPointerType && axisPointerType !== 'none') {\n      var elStyle = viewHelper.buildElStyle(axisPointerModel);\n      var pointerOption = pointerShapeBuilder[axisPointerType](axis, pixelValue, otherExtent);\n      pointerOption.style = elStyle;\n      elOption.graphicKey = pointerOption.type;\n      elOption.pointer = pointerOption;\n    }\n\n    var layoutInfo = cartesianAxisHelper.layout(grid.model, axisModel);\n    viewHelper.buildCartesianSingleLabelElOption( // @ts-ignore\n    value, elOption, layoutInfo, axisModel, axisPointerModel, api);\n  };\n  /**\n   * @override\n   */\n\n\n  CartesianAxisPointer.prototype.getHandleTransform = function (value, axisModel, axisPointerModel) {\n    var layoutInfo = cartesianAxisHelper.layout(axisModel.axis.grid.model, axisModel, {\n      labelInside: false\n    }); // @ts-ignore\n\n    layoutInfo.labelMargin = axisPointerModel.get(['handle', 'margin']);\n    var pos = viewHelper.getTransformedPosition(axisModel.axis, value, layoutInfo);\n    return {\n      x: pos[0],\n      y: pos[1],\n      rotation: layoutInfo.rotation + (layoutInfo.labelDirection < 0 ? Math.PI : 0)\n    };\n  };\n  /**\n   * @override\n   */\n\n\n  CartesianAxisPointer.prototype.updateHandleTransform = function (transform, delta, axisModel, axisPointerModel) {\n    var axis = axisModel.axis;\n    var grid = axis.grid;\n    var axisExtent = axis.getGlobalExtent(true);\n    var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();\n    var dimIndex = axis.dim === 'x' ? 0 : 1;\n    var currPosition = [transform.x, transform.y];\n    currPosition[dimIndex] += delta[dimIndex];\n    currPosition[dimIndex] = Math.min(axisExtent[1], currPosition[dimIndex]);\n    currPosition[dimIndex] = Math.max(axisExtent[0], currPosition[dimIndex]);\n    var cursorOtherValue = (otherExtent[1] + otherExtent[0]) / 2;\n    var cursorPoint = [cursorOtherValue, cursorOtherValue];\n    cursorPoint[dimIndex] = currPosition[dimIndex]; // Make tooltip do not overlap axisPointer and in the middle of the grid.\n\n    var tooltipOptions = [{\n      verticalAlign: 'middle'\n    }, {\n      align: 'center'\n    }];\n    return {\n      x: currPosition[0],\n      y: currPosition[1],\n      rotation: transform.rotation,\n      cursorPoint: cursorPoint,\n      tooltipOption: tooltipOptions[dimIndex]\n    };\n  };\n\n  return CartesianAxisPointer;\n}(BaseAxisPointer);\n\nfunction getCartesian(grid, axis) {\n  var opt = {};\n  opt[axis.dim + 'AxisIndex'] = axis.index;\n  return grid.getCartesian(opt);\n}\n\nvar pointerShapeBuilder = {\n  line: function line(axis, pixelValue, otherExtent) {\n    var targetShape = viewHelper.makeLineShape([pixelValue, otherExtent[0]], [pixelValue, otherExtent[1]], getAxisDimIndex(axis));\n    return {\n      type: 'Line',\n      subPixelOptimize: true,\n      shape: targetShape\n    };\n  },\n  shadow: function shadow(axis, pixelValue, otherExtent) {\n    var bandWidth = Math.max(1, axis.getBandWidth());\n    var span = otherExtent[1] - otherExtent[0];\n    return {\n      type: 'Rect',\n      shape: viewHelper.makeRectShape([pixelValue - bandWidth / 2, otherExtent[0]], [bandWidth, span], getAxisDimIndex(axis))\n    };\n  }\n};\n\nfunction getAxisDimIndex(axis) {\n  return axis.dim === 'x' ? 0 : 1;\n}\n\nexport default CartesianAxisPointer;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component';\n\nvar AxisPointerModel =\n/** @class */\nfunction (_super) {\n  __extends(AxisPointerModel, _super);\n\n  function AxisPointerModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = AxisPointerModel.type;\n    return _this;\n  }\n\n  AxisPointerModel.type = 'axisPointer';\n  AxisPointerModel.defaultOption = {\n    // 'auto' means that show when triggered by tooltip or handle.\n    show: 'auto',\n    zlevel: 0,\n    z: 50,\n    type: 'line',\n    // axispointer triggered by tootip determine snap automatically,\n    // see `modelHelper`.\n    snap: false,\n    triggerTooltip: true,\n    value: null,\n    status: null,\n    link: [],\n    // Do not set 'auto' here, otherwise global animation: false\n    // will not effect at this axispointer.\n    animation: null,\n    animationDurationUpdate: 200,\n    lineStyle: {\n      color: '#B9BEC9',\n      width: 1,\n      type: 'dashed'\n    },\n    shadowStyle: {\n      color: 'rgba(210,219,238,0.2)'\n    },\n    label: {\n      show: true,\n      formatter: null,\n      precision: 'auto',\n      margin: 3,\n      color: '#fff',\n      padding: [5, 7, 5, 7],\n      backgroundColor: 'auto',\n      borderColor: null,\n      borderWidth: 0,\n      borderRadius: 3\n    },\n    handle: {\n      show: false,\n      // eslint-disable-next-line\n      icon: 'M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z',\n      size: 45,\n      // handle margin is from symbol center to axis, which is stable when circular move.\n      margin: 50,\n      // color: '#1b8bbd'\n      // color: '#2f4554'\n      color: '#333',\n      shadowBlur: 3,\n      shadowColor: '#aaa',\n      shadowOffsetX: 0,\n      shadowOffsetY: 2,\n      // For mobile performance\n      throttle: 40\n    }\n  };\n  return AxisPointerModel;\n}(ComponentModel);\n\nexport default AxisPointerModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as globalListener from './globalListener';\nimport ComponentView from '../../view/Component';\n\nvar AxisPointerView =\n/** @class */\nfunction (_super) {\n  __extends(AxisPointerView, _super);\n\n  function AxisPointerView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = AxisPointerView.type;\n    return _this;\n  }\n\n  AxisPointerView.prototype.render = function (globalAxisPointerModel, ecModel, api) {\n    var globalTooltipModel = ecModel.getComponent('tooltip');\n    var triggerOn = globalAxisPointerModel.get('triggerOn') || globalTooltipModel && globalTooltipModel.get('triggerOn') || 'mousemove|click'; // Register global listener in AxisPointerView to enable\n    // AxisPointerView to be independent to Tooltip.\n\n    globalListener.register('axisPointer', api, function (currTrigger, e, dispatchAction) {\n      // If 'none', it is not controlled by mouse totally.\n      if (triggerOn !== 'none' && (currTrigger === 'leave' || triggerOn.indexOf(currTrigger) >= 0)) {\n        dispatchAction({\n          type: 'updateAxisPointer',\n          currTrigger: currTrigger,\n          x: e && e.offsetX,\n          y: e && e.offsetY\n        });\n      }\n    });\n  };\n\n  AxisPointerView.prototype.remove = function (ecModel, api) {\n    globalListener.unregister('axisPointer', api);\n  };\n\n  AxisPointerView.prototype.dispose = function (ecModel, api) {\n    globalListener.unregister('axisPointer', api);\n  };\n\n  AxisPointerView.type = 'axisPointer';\n  return AxisPointerView;\n}(ComponentView);\n\nexport default AxisPointerView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { makeInner } from '../../util/model';\nimport * as modelHelper from './modelHelper';\nimport findPointFromSeries from './findPointFromSeries';\nimport { each, curry, bind, extend } from 'zrender/lib/core/util';\nvar inner = makeInner();\n/**\n * Basic logic: check all axis, if they do not demand show/highlight,\n * then hide/downplay them.\n *\n * @return content of event obj for echarts.connect.\n */\n\nexport default function axisTrigger(payload, ecModel, api) {\n  var currTrigger = payload.currTrigger;\n  var point = [payload.x, payload.y];\n  var finder = payload;\n  var dispatchAction = payload.dispatchAction || bind(api.dispatchAction, api);\n  var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo; // Pending\n  // See #6121. But we are not able to reproduce it yet.\n\n  if (!coordSysAxesInfo) {\n    return;\n  }\n\n  if (illegalPoint(point)) {\n    // Used in the default behavior of `connection`: use the sample seriesIndex\n    // and dataIndex. And also used in the tooltipView trigger.\n    point = findPointFromSeries({\n      seriesIndex: finder.seriesIndex,\n      // Do not use dataIndexInside from other ec instance.\n      // FIXME: auto detect it?\n      dataIndex: finder.dataIndex\n    }, ecModel).point;\n  }\n\n  var isIllegalPoint = illegalPoint(point); // Axis and value can be specified when calling dispatchAction({type: 'updateAxisPointer'}).\n  // Notice: In this case, it is difficult to get the `point` (which is necessary to show\n  // tooltip, so if point is not given, we just use the point found by sample seriesIndex\n  // and dataIndex.\n\n  var inputAxesInfo = finder.axesInfo;\n  var axesInfo = coordSysAxesInfo.axesInfo;\n  var shouldHide = currTrigger === 'leave' || illegalPoint(point);\n  var outputPayload = {};\n  var showValueMap = {};\n  var dataByCoordSys = {\n    list: [],\n    map: {}\n  };\n  var updaters = {\n    showPointer: curry(showPointer, showValueMap),\n    showTooltip: curry(showTooltip, dataByCoordSys)\n  }; // Process for triggered axes.\n\n  each(coordSysAxesInfo.coordSysMap, function (coordSys, coordSysKey) {\n    // If a point given, it must be contained by the coordinate system.\n    var coordSysContainsPoint = isIllegalPoint || coordSys.containPoint(point);\n    each(coordSysAxesInfo.coordSysAxesInfo[coordSysKey], function (axisInfo, key) {\n      var axis = axisInfo.axis;\n      var inputAxisInfo = findInputAxisInfo(inputAxesInfo, axisInfo); // If no inputAxesInfo, no axis is restricted.\n\n      if (!shouldHide && coordSysContainsPoint && (!inputAxesInfo || inputAxisInfo)) {\n        var val = inputAxisInfo && inputAxisInfo.value;\n\n        if (val == null && !isIllegalPoint) {\n          val = axis.pointToData(point);\n        }\n\n        val != null && processOnAxis(axisInfo, val, updaters, false, outputPayload);\n      }\n    });\n  }); // Process for linked axes.\n\n  var linkTriggers = {};\n  each(axesInfo, function (tarAxisInfo, tarKey) {\n    var linkGroup = tarAxisInfo.linkGroup; // If axis has been triggered in the previous stage, it should not be triggered by link.\n\n    if (linkGroup && !showValueMap[tarKey]) {\n      each(linkGroup.axesInfo, function (srcAxisInfo, srcKey) {\n        var srcValItem = showValueMap[srcKey]; // If srcValItem exist, source axis is triggered, so link to target axis.\n\n        if (srcAxisInfo !== tarAxisInfo && srcValItem) {\n          var val = srcValItem.value;\n          linkGroup.mapper && (val = tarAxisInfo.axis.scale.parse(linkGroup.mapper(val, makeMapperParam(srcAxisInfo), makeMapperParam(tarAxisInfo))));\n          linkTriggers[tarAxisInfo.key] = val;\n        }\n      });\n    }\n  });\n  each(linkTriggers, function (val, tarKey) {\n    processOnAxis(axesInfo[tarKey], val, updaters, true, outputPayload);\n  });\n  updateModelActually(showValueMap, axesInfo, outputPayload);\n  dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction);\n  dispatchHighDownActually(axesInfo, dispatchAction, api);\n  return outputPayload;\n}\n\nfunction processOnAxis(axisInfo, newValue, updaters, noSnap, outputFinder) {\n  var axis = axisInfo.axis;\n\n  if (axis.scale.isBlank() || !axis.containData(newValue)) {\n    return;\n  }\n\n  if (!axisInfo.involveSeries) {\n    updaters.showPointer(axisInfo, newValue);\n    return;\n  } // Heavy calculation. So put it after axis.containData checking.\n\n\n  var payloadInfo = buildPayloadsBySeries(newValue, axisInfo);\n  var payloadBatch = payloadInfo.payloadBatch;\n  var snapToValue = payloadInfo.snapToValue; // Fill content of event obj for echarts.connect.\n  // By default use the first involved series data as a sample to connect.\n\n  if (payloadBatch[0] && outputFinder.seriesIndex == null) {\n    extend(outputFinder, payloadBatch[0]);\n  } // If no linkSource input, this process is for collecting link\n  // target, where snap should not be accepted.\n\n\n  if (!noSnap && axisInfo.snap) {\n    if (axis.containData(snapToValue) && snapToValue != null) {\n      newValue = snapToValue;\n    }\n  }\n\n  updaters.showPointer(axisInfo, newValue, payloadBatch); // Tooltip should always be snapToValue, otherwise there will be\n  // incorrect \"axis value ~ series value\" mapping displayed in tooltip.\n\n  updaters.showTooltip(axisInfo, payloadInfo, snapToValue);\n}\n\nfunction buildPayloadsBySeries(value, axisInfo) {\n  var axis = axisInfo.axis;\n  var dim = axis.dim;\n  var snapToValue = value;\n  var payloadBatch = [];\n  var minDist = Number.MAX_VALUE;\n  var minDiff = -1;\n  each(axisInfo.seriesModels, function (series, idx) {\n    var dataDim = series.getData().mapDimensionsAll(dim);\n    var seriesNestestValue;\n    var dataIndices;\n\n    if (series.getAxisTooltipData) {\n      var result = series.getAxisTooltipData(dataDim, value, axis);\n      dataIndices = result.dataIndices;\n      seriesNestestValue = result.nestestValue;\n    } else {\n      dataIndices = series.getData().indicesOfNearest(dataDim[0], value, // Add a threshold to avoid find the wrong dataIndex\n      // when data length is not same.\n      // false,\n      axis.type === 'category' ? 0.5 : null);\n\n      if (!dataIndices.length) {\n        return;\n      }\n\n      seriesNestestValue = series.getData().get(dataDim[0], dataIndices[0]);\n    }\n\n    if (seriesNestestValue == null || !isFinite(seriesNestestValue)) {\n      return;\n    }\n\n    var diff = value - seriesNestestValue;\n    var dist = Math.abs(diff); // Consider category case\n\n    if (dist <= minDist) {\n      if (dist < minDist || diff >= 0 && minDiff < 0) {\n        minDist = dist;\n        minDiff = diff;\n        snapToValue = seriesNestestValue;\n        payloadBatch.length = 0;\n      }\n\n      each(dataIndices, function (dataIndex) {\n        payloadBatch.push({\n          seriesIndex: series.seriesIndex,\n          dataIndexInside: dataIndex,\n          dataIndex: series.getData().getRawIndex(dataIndex)\n        });\n      });\n    }\n  });\n  return {\n    payloadBatch: payloadBatch,\n    snapToValue: snapToValue\n  };\n}\n\nfunction showPointer(showValueMap, axisInfo, value, payloadBatch) {\n  showValueMap[axisInfo.key] = {\n    value: value,\n    payloadBatch: payloadBatch\n  };\n}\n\nfunction showTooltip(dataByCoordSys, axisInfo, payloadInfo, value) {\n  var payloadBatch = payloadInfo.payloadBatch;\n  var axis = axisInfo.axis;\n  var axisModel = axis.model;\n  var axisPointerModel = axisInfo.axisPointerModel; // If no data, do not create anything in dataByCoordSys,\n  // whose length will be used to judge whether dispatch action.\n\n  if (!axisInfo.triggerTooltip || !payloadBatch.length) {\n    return;\n  }\n\n  var coordSysModel = axisInfo.coordSys.model;\n  var coordSysKey = modelHelper.makeKey(coordSysModel);\n  var coordSysItem = dataByCoordSys.map[coordSysKey];\n\n  if (!coordSysItem) {\n    coordSysItem = dataByCoordSys.map[coordSysKey] = {\n      coordSysId: coordSysModel.id,\n      coordSysIndex: coordSysModel.componentIndex,\n      coordSysType: coordSysModel.type,\n      coordSysMainType: coordSysModel.mainType,\n      dataByAxis: []\n    };\n    dataByCoordSys.list.push(coordSysItem);\n  }\n\n  coordSysItem.dataByAxis.push({\n    axisDim: axis.dim,\n    axisIndex: axisModel.componentIndex,\n    axisType: axisModel.type,\n    axisId: axisModel.id,\n    value: value,\n    // Caustion: viewHelper.getValueLabel is actually on \"view stage\", which\n    // depends that all models have been updated. So it should not be performed\n    // here. Considering axisPointerModel used here is volatile, which is hard\n    // to be retrieve in TooltipView, we prepare parameters here.\n    valueLabelOpt: {\n      precision: axisPointerModel.get(['label', 'precision']),\n      formatter: axisPointerModel.get(['label', 'formatter'])\n    },\n    seriesDataIndices: payloadBatch.slice()\n  });\n}\n\nfunction updateModelActually(showValueMap, axesInfo, outputPayload) {\n  var outputAxesInfo = outputPayload.axesInfo = []; // Basic logic: If no 'show' required, 'hide' this axisPointer.\n\n  each(axesInfo, function (axisInfo, key) {\n    var option = axisInfo.axisPointerModel.option;\n    var valItem = showValueMap[key];\n\n    if (valItem) {\n      !axisInfo.useHandle && (option.status = 'show');\n      option.value = valItem.value; // For label formatter param and highlight.\n\n      option.seriesDataIndices = (valItem.payloadBatch || []).slice();\n    } // When always show (e.g., handle used), remain\n    // original value and status.\n    else {\n      // If hide, value still need to be set, consider\n      // click legend to toggle axis blank.\n      !axisInfo.useHandle && (option.status = 'hide');\n    } // If status is 'hide', should be no info in payload.\n\n\n    option.status === 'show' && outputAxesInfo.push({\n      axisDim: axisInfo.axis.dim,\n      axisIndex: axisInfo.axis.model.componentIndex,\n      value: option.value\n    });\n  });\n}\n\nfunction dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction) {\n  // Basic logic: If no showTip required, hideTip will be dispatched.\n  if (illegalPoint(point) || !dataByCoordSys.list.length) {\n    dispatchAction({\n      type: 'hideTip'\n    });\n    return;\n  } // In most case only one axis (or event one series is used). It is\n  // convinient to fetch payload.seriesIndex and payload.dataIndex\n  // dirtectly. So put the first seriesIndex and dataIndex of the first\n  // axis on the payload.\n\n\n  var sampleItem = ((dataByCoordSys.list[0].dataByAxis[0] || {}).seriesDataIndices || [])[0] || {};\n  dispatchAction({\n    type: 'showTip',\n    escapeConnect: true,\n    x: point[0],\n    y: point[1],\n    tooltipOption: payload.tooltipOption,\n    position: payload.position,\n    dataIndexInside: sampleItem.dataIndexInside,\n    dataIndex: sampleItem.dataIndex,\n    seriesIndex: sampleItem.seriesIndex,\n    dataByCoordSys: dataByCoordSys.list\n  });\n}\n\nfunction dispatchHighDownActually(axesInfo, dispatchAction, api) {\n  // FIXME\n  // highlight status modification shoule be a stage of main process?\n  // (Consider confilct (e.g., legend and axisPointer) and setOption)\n  var zr = api.getZr();\n  var highDownKey = 'axisPointerLastHighlights';\n  var lastHighlights = inner(zr)[highDownKey] || {};\n  var newHighlights = inner(zr)[highDownKey] = {}; // Update highlight/downplay status according to axisPointer model.\n  // Build hash map and remove duplicate incidentally.\n\n  each(axesInfo, function (axisInfo, key) {\n    var option = axisInfo.axisPointerModel.option;\n    option.status === 'show' && each(option.seriesDataIndices, function (batchItem) {\n      var key = batchItem.seriesIndex + ' | ' + batchItem.dataIndex;\n      newHighlights[key] = batchItem;\n    });\n  }); // Diff.\n\n  var toHighlight = [];\n  var toDownplay = [];\n  each(lastHighlights, function (batchItem, key) {\n    !newHighlights[key] && toDownplay.push(batchItem);\n  });\n  each(newHighlights, function (batchItem, key) {\n    !lastHighlights[key] && toHighlight.push(batchItem);\n  });\n  toDownplay.length && api.dispatchAction({\n    type: 'downplay',\n    escapeConnect: true,\n    // Not blur others when highlight in axisPointer.\n    notBlur: true,\n    batch: toDownplay\n  });\n  toHighlight.length && api.dispatchAction({\n    type: 'highlight',\n    escapeConnect: true,\n    // Not blur others when highlight in axisPointer.\n    notBlur: true,\n    batch: toHighlight\n  });\n}\n\nfunction findInputAxisInfo(inputAxesInfo, axisInfo) {\n  for (var i = 0; i < (inputAxesInfo || []).length; i++) {\n    var inputAxisInfo = inputAxesInfo[i];\n\n    if (axisInfo.axis.dim === inputAxisInfo.axisDim && axisInfo.axis.model.componentIndex === inputAxisInfo.axisIndex) {\n      return inputAxisInfo;\n    }\n  }\n}\n\nfunction makeMapperParam(axisInfo) {\n  var axisModel = axisInfo.axis.model;\n  var item = {};\n  var dim = item.axisDim = axisInfo.axis.dim;\n  item.axisIndex = item[dim + 'AxisIndex'] = axisModel.componentIndex;\n  item.axisName = item[dim + 'AxisName'] = axisModel.name;\n  item.axisId = item[dim + 'AxisId'] = axisModel.id;\n  return item;\n}\n\nfunction illegalPoint(point) {\n  return !point || point[0] == null || isNaN(point[0]) || point[1] == null || isNaN(point[1]);\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport AxisView from '../axis/AxisView';\nimport CartesianAxisPointer from './CartesianAxisPointer';\nimport AxisPointerModel from './AxisPointerModel';\nimport AxisPointerView from './AxisPointerView';\nimport { isArray } from 'zrender/lib/core/util';\nimport { collect } from './modelHelper';\nimport axisTrigger from './axisTrigger';\nexport function install(registers) {\n  // CartesianAxisPointer is not supposed to be required here. But consider\n  // echarts.simple.js and online build tooltip, which only require gridSimple,\n  // CartesianAxisPointer should be able to required somewhere.\n  AxisView.registerAxisPointerClass('CartesianAxisPointer', CartesianAxisPointer);\n  registers.registerComponentModel(AxisPointerModel);\n  registers.registerComponentView(AxisPointerView);\n  registers.registerPreprocessor(function (option) {\n    // Always has a global axisPointerModel for default setting.\n    if (option) {\n      (!option.axisPointer || option.axisPointer.length === 0) && (option.axisPointer = {});\n      var link = option.axisPointer.link; // Normalize to array to avoid object mergin. But if link\n      // is not set, remain null/undefined, otherwise it will\n      // override existent link setting.\n\n      if (link && !isArray(link)) {\n        option.axisPointer.link = [link];\n      }\n    }\n  }); // This process should proformed after coordinate systems created\n  // and series data processed. So put it on statistic processing stage.\n\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC, function (ecModel, api) {\n    // Build axisPointerModel, mergin tooltip.axisPointer model for each axis.\n    // allAxesInfo should be updated when setOption performed.\n    ecModel.getComponent('axisPointer').coordSysAxesInfo = collect(ecModel, api);\n  }); // Broadcast to all views.\n\n  registers.registerAction({\n    type: 'updateAxisPointer',\n    event: 'updateAxisPointer',\n    update: ':updateAxisPointer'\n  }, axisTrigger);\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport Model from '../../model/Model';\nimport { each, curry, clone, defaults, isArray, indexOf } from 'zrender/lib/core/util'; // Build axisPointerModel, mergin tooltip.axisPointer model for each axis.\n// allAxesInfo should be updated when setOption performed.\n\nexport function collect(ecModel, api) {\n  var result = {\n    /**\n     * key: makeKey(axis.model)\n     * value: {\n     *      axis,\n     *      coordSys,\n     *      axisPointerModel,\n     *      triggerTooltip,\n     *      involveSeries,\n     *      snap,\n     *      seriesModels,\n     *      seriesDataCount\n     * }\n     */\n    axesInfo: {},\n    seriesInvolved: false,\n\n    /**\n     * key: makeKey(coordSys.model)\n     * value: Object: key makeKey(axis.model), value: axisInfo\n     */\n    coordSysAxesInfo: {},\n    coordSysMap: {}\n  };\n  collectAxesInfo(result, ecModel, api); // Check seriesInvolved for performance, in case too many series in some chart.\n\n  result.seriesInvolved && collectSeriesInfo(result, ecModel);\n  return result;\n}\n\nfunction collectAxesInfo(result, ecModel, api) {\n  var globalTooltipModel = ecModel.getComponent('tooltip');\n  var globalAxisPointerModel = ecModel.getComponent('axisPointer'); // links can only be set on global.\n\n  var linksOption = globalAxisPointerModel.get('link', true) || [];\n  var linkGroups = []; // Collect axes info.\n\n  each(api.getCoordinateSystems(), function (coordSys) {\n    // Some coordinate system do not support axes, like geo.\n    if (!coordSys.axisPointerEnabled) {\n      return;\n    }\n\n    var coordSysKey = makeKey(coordSys.model);\n    var axesInfoInCoordSys = result.coordSysAxesInfo[coordSysKey] = {};\n    result.coordSysMap[coordSysKey] = coordSys; // Set tooltip (like 'cross') is a convienent way to show axisPointer\n    // for user. So we enable seting tooltip on coordSys model.\n\n    var coordSysModel = coordSys.model;\n    var baseTooltipModel = coordSysModel.getModel('tooltip', globalTooltipModel);\n    each(coordSys.getAxes(), curry(saveTooltipAxisInfo, false, null)); // If axis tooltip used, choose tooltip axis for each coordSys.\n    // Notice this case: coordSys is `grid` but not `cartesian2D` here.\n\n    if (coordSys.getTooltipAxes && globalTooltipModel // If tooltip.showContent is set as false, tooltip will not\n    // show but axisPointer will show as normal.\n    && baseTooltipModel.get('show')) {\n      // Compatible with previous logic. But series.tooltip.trigger: 'axis'\n      // or series.data[n].tooltip.trigger: 'axis' are not support any more.\n      var triggerAxis = baseTooltipModel.get('trigger') === 'axis';\n      var cross = baseTooltipModel.get(['axisPointer', 'type']) === 'cross';\n      var tooltipAxes = coordSys.getTooltipAxes(baseTooltipModel.get(['axisPointer', 'axis']));\n\n      if (triggerAxis || cross) {\n        each(tooltipAxes.baseAxes, curry(saveTooltipAxisInfo, cross ? 'cross' : true, triggerAxis));\n      }\n\n      if (cross) {\n        each(tooltipAxes.otherAxes, curry(saveTooltipAxisInfo, 'cross', false));\n      }\n    } // fromTooltip: true | false | 'cross'\n    // triggerTooltip: true | false | null\n\n\n    function saveTooltipAxisInfo(fromTooltip, triggerTooltip, axis) {\n      var axisPointerModel = axis.model.getModel('axisPointer', globalAxisPointerModel);\n      var axisPointerShow = axisPointerModel.get('show');\n\n      if (!axisPointerShow || axisPointerShow === 'auto' && !fromTooltip && !isHandleTrigger(axisPointerModel)) {\n        return;\n      }\n\n      if (triggerTooltip == null) {\n        triggerTooltip = axisPointerModel.get('triggerTooltip');\n      }\n\n      axisPointerModel = fromTooltip ? makeAxisPointerModel(axis, baseTooltipModel, globalAxisPointerModel, ecModel, fromTooltip, triggerTooltip) : axisPointerModel;\n      var snap = axisPointerModel.get('snap');\n      var axisKey = makeKey(axis.model);\n      var involveSeries = triggerTooltip || snap || axis.type === 'category'; // If result.axesInfo[key] exist, override it (tooltip has higher priority).\n\n      var axisInfo = result.axesInfo[axisKey] = {\n        key: axisKey,\n        axis: axis,\n        coordSys: coordSys,\n        axisPointerModel: axisPointerModel,\n        triggerTooltip: triggerTooltip,\n        involveSeries: involveSeries,\n        snap: snap,\n        useHandle: isHandleTrigger(axisPointerModel),\n        seriesModels: [],\n        linkGroup: null\n      };\n      axesInfoInCoordSys[axisKey] = axisInfo;\n      result.seriesInvolved = result.seriesInvolved || involveSeries;\n      var groupIndex = getLinkGroupIndex(linksOption, axis);\n\n      if (groupIndex != null) {\n        var linkGroup = linkGroups[groupIndex] || (linkGroups[groupIndex] = {\n          axesInfo: {}\n        });\n        linkGroup.axesInfo[axisKey] = axisInfo;\n        linkGroup.mapper = linksOption[groupIndex].mapper;\n        axisInfo.linkGroup = linkGroup;\n      }\n    }\n  });\n}\n\nfunction makeAxisPointerModel(axis, baseTooltipModel, globalAxisPointerModel, ecModel, fromTooltip, triggerTooltip) {\n  var tooltipAxisPointerModel = baseTooltipModel.getModel('axisPointer');\n  var fields = ['type', 'snap', 'lineStyle', 'shadowStyle', 'label', 'animation', 'animationDurationUpdate', 'animationEasingUpdate', 'z'];\n  var volatileOption = {};\n  each(fields, function (field) {\n    volatileOption[field] = clone(tooltipAxisPointerModel.get(field));\n  }); // category axis do not auto snap, otherwise some tick that do not\n  // has value can not be hovered. value/time/log axis default snap if\n  // triggered from tooltip and trigger tooltip.\n\n  volatileOption.snap = axis.type !== 'category' && !!triggerTooltip; // Compatibel with previous behavior, tooltip axis do not show label by default.\n  // Only these properties can be overrided from tooltip to axisPointer.\n\n  if (tooltipAxisPointerModel.get('type') === 'cross') {\n    volatileOption.type = 'line';\n  }\n\n  var labelOption = volatileOption.label || (volatileOption.label = {}); // Follow the convention, do not show label when triggered by tooltip by default.\n\n  labelOption.show == null && (labelOption.show = false);\n\n  if (fromTooltip === 'cross') {\n    // When 'cross', both axes show labels.\n    var tooltipAxisPointerLabelShow = tooltipAxisPointerModel.get(['label', 'show']);\n    labelOption.show = tooltipAxisPointerLabelShow != null ? tooltipAxisPointerLabelShow : true; // If triggerTooltip, this is a base axis, which should better not use cross style\n    // (cross style is dashed by default)\n\n    if (!triggerTooltip) {\n      var crossStyle = volatileOption.lineStyle = tooltipAxisPointerModel.get('crossStyle');\n      crossStyle && defaults(labelOption, crossStyle.textStyle);\n    }\n  }\n\n  return axis.model.getModel('axisPointer', new Model(volatileOption, globalAxisPointerModel, ecModel));\n}\n\nfunction collectSeriesInfo(result, ecModel) {\n  // Prepare data for axis trigger\n  ecModel.eachSeries(function (seriesModel) {\n    // Notice this case: this coordSys is `cartesian2D` but not `grid`.\n    var coordSys = seriesModel.coordinateSystem;\n    var seriesTooltipTrigger = seriesModel.get(['tooltip', 'trigger'], true);\n    var seriesTooltipShow = seriesModel.get(['tooltip', 'show'], true);\n\n    if (!coordSys || seriesTooltipTrigger === 'none' || seriesTooltipTrigger === false || seriesTooltipTrigger === 'item' || seriesTooltipShow === false || seriesModel.get(['axisPointer', 'show'], true) === false) {\n      return;\n    }\n\n    each(result.coordSysAxesInfo[makeKey(coordSys.model)], function (axisInfo) {\n      var axis = axisInfo.axis;\n\n      if (coordSys.getAxis(axis.dim) === axis) {\n        axisInfo.seriesModels.push(seriesModel);\n        axisInfo.seriesDataCount == null && (axisInfo.seriesDataCount = 0);\n        axisInfo.seriesDataCount += seriesModel.getData().count();\n      }\n    });\n  });\n}\n/**\n * For example:\n * {\n *     axisPointer: {\n *         links: [{\n *             xAxisIndex: [2, 4],\n *             yAxisIndex: 'all'\n *         }, {\n *             xAxisId: ['a5', 'a7'],\n *             xAxisName: 'xxx'\n *         }]\n *     }\n * }\n */\n\n\nfunction getLinkGroupIndex(linksOption, axis) {\n  var axisModel = axis.model;\n  var dim = axis.dim;\n\n  for (var i = 0; i < linksOption.length; i++) {\n    var linkOption = linksOption[i] || {};\n\n    if (checkPropInLink(linkOption[dim + 'AxisId'], axisModel.id) || checkPropInLink(linkOption[dim + 'AxisIndex'], axisModel.componentIndex) || checkPropInLink(linkOption[dim + 'AxisName'], axisModel.name)) {\n      return i;\n    }\n  }\n}\n\nfunction checkPropInLink(linkPropValue, axisPropValue) {\n  return linkPropValue === 'all' || isArray(linkPropValue) && indexOf(linkPropValue, axisPropValue) >= 0 || linkPropValue === axisPropValue;\n}\n\nexport function fixValue(axisModel) {\n  var axisInfo = getAxisInfo(axisModel);\n\n  if (!axisInfo) {\n    return;\n  }\n\n  var axisPointerModel = axisInfo.axisPointerModel;\n  var scale = axisInfo.axis.scale;\n  var option = axisPointerModel.option;\n  var status = axisPointerModel.get('status');\n  var value = axisPointerModel.get('value'); // Parse init value for category and time axis.\n\n  if (value != null) {\n    value = scale.parse(value);\n  }\n\n  var useHandle = isHandleTrigger(axisPointerModel); // If `handle` used, `axisPointer` will always be displayed, so value\n  // and status should be initialized.\n\n  if (status == null) {\n    option.status = useHandle ? 'show' : 'hide';\n  }\n\n  var extent = scale.getExtent().slice();\n  extent[0] > extent[1] && extent.reverse();\n\n  if ( // Pick a value on axis when initializing.\n  value == null // If both `handle` and `dataZoom` are used, value may be out of axis extent,\n  // where we should re-pick a value to keep `handle` displaying normally.\n  || value > extent[1]) {\n    // Make handle displayed on the end of the axis when init, which looks better.\n    value = extent[1];\n  }\n\n  if (value < extent[0]) {\n    value = extent[0];\n  }\n\n  option.value = value;\n\n  if (useHandle) {\n    option.status = axisInfo.axis.scale.isBlank() ? 'hide' : 'show';\n  }\n}\nexport function getAxisInfo(axisModel) {\n  var coordSysAxesInfo = (axisModel.ecModel.getComponent('axisPointer') || {}).coordSysAxesInfo;\n  return coordSysAxesInfo && coordSysAxesInfo.axesInfo[makeKey(axisModel)];\n}\nexport function getAxisPointerModel(axisModel) {\n  var axisInfo = getAxisInfo(axisModel);\n  return axisInfo && axisInfo.axisPointerModel;\n}\n\nfunction isHandleTrigger(axisPointerModel) {\n  return !!axisPointerModel.get(['handle', 'show']);\n}\n/**\n * @param {module:echarts/model/Model} model\n * @return {string} unique key\n */\n\n\nexport function makeKey(model) {\n  return model.type + '||' + model.id;\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as graphic from '../../util/graphic';\nimport * as textContain from 'zrender/lib/contain/text';\nimport * as formatUtil from '../../util/format';\nimport * as matrix from 'zrender/lib/core/matrix';\nimport * as axisHelper from '../../coord/axisHelper';\nimport AxisBuilder from '../axis/AxisBuilder';\nimport { createTextStyle } from '../../label/labelStyle';\nexport function buildElStyle(axisPointerModel) {\n  var axisPointerType = axisPointerModel.get('type');\n  var styleModel = axisPointerModel.getModel(axisPointerType + 'Style');\n  var style;\n\n  if (axisPointerType === 'line') {\n    style = styleModel.getLineStyle();\n    style.fill = null;\n  } else if (axisPointerType === 'shadow') {\n    style = styleModel.getAreaStyle();\n    style.stroke = null;\n  }\n\n  return style;\n}\n/**\n * @param {Function} labelPos {align, verticalAlign, position}\n */\n\nexport function buildLabelElOption(elOption, axisModel, axisPointerModel, api, labelPos) {\n  var value = axisPointerModel.get('value');\n  var text = getValueLabel(value, axisModel.axis, axisModel.ecModel, axisPointerModel.get('seriesDataIndices'), {\n    precision: axisPointerModel.get(['label', 'precision']),\n    formatter: axisPointerModel.get(['label', 'formatter'])\n  });\n  var labelModel = axisPointerModel.getModel('label');\n  var paddings = formatUtil.normalizeCssArray(labelModel.get('padding') || 0);\n  var font = labelModel.getFont();\n  var textRect = textContain.getBoundingRect(text, font);\n  var position = labelPos.position;\n  var width = textRect.width + paddings[1] + paddings[3];\n  var height = textRect.height + paddings[0] + paddings[2]; // Adjust by align.\n\n  var align = labelPos.align;\n  align === 'right' && (position[0] -= width);\n  align === 'center' && (position[0] -= width / 2);\n  var verticalAlign = labelPos.verticalAlign;\n  verticalAlign === 'bottom' && (position[1] -= height);\n  verticalAlign === 'middle' && (position[1] -= height / 2); // Not overflow ec container\n\n  confineInContainer(position, width, height, api);\n  var bgColor = labelModel.get('backgroundColor');\n\n  if (!bgColor || bgColor === 'auto') {\n    bgColor = axisModel.get(['axisLine', 'lineStyle', 'color']);\n  }\n\n  elOption.label = {\n    // shape: {x: 0, y: 0, width: width, height: height, r: labelModel.get('borderRadius')},\n    x: position[0],\n    y: position[1],\n    style: createTextStyle(labelModel, {\n      text: text,\n      font: font,\n      fill: labelModel.getTextColor(),\n      padding: paddings,\n      backgroundColor: bgColor\n    }),\n    // Lable should be over axisPointer.\n    z2: 10\n  };\n} // Do not overflow ec container\n\nfunction confineInContainer(position, width, height, api) {\n  var viewWidth = api.getWidth();\n  var viewHeight = api.getHeight();\n  position[0] = Math.min(position[0] + width, viewWidth) - width;\n  position[1] = Math.min(position[1] + height, viewHeight) - height;\n  position[0] = Math.max(position[0], 0);\n  position[1] = Math.max(position[1], 0);\n}\n\nexport function getValueLabel(value, axis, ecModel, seriesDataIndices, opt) {\n  value = axis.scale.parse(value);\n  var text = axis.scale.getLabel({\n    value: value\n  }, {\n    // If `precision` is set, width can be fixed (like '12.00500'), which\n    // helps to debounce when when moving label.\n    precision: opt.precision\n  });\n  var formatter = opt.formatter;\n\n  if (formatter) {\n    var params_1 = {\n      value: axisHelper.getAxisRawValue(axis, {\n        value: value\n      }),\n      axisDimension: axis.dim,\n      axisIndex: axis.index,\n      seriesData: []\n    };\n    zrUtil.each(seriesDataIndices, function (idxItem) {\n      var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\n      var dataIndex = idxItem.dataIndexInside;\n      var dataParams = series && series.getDataParams(dataIndex);\n      dataParams && params_1.seriesData.push(dataParams);\n    });\n\n    if (zrUtil.isString(formatter)) {\n      text = formatter.replace('{value}', text);\n    } else if (zrUtil.isFunction(formatter)) {\n      text = formatter(params_1);\n    }\n  }\n\n  return text;\n}\nexport function getTransformedPosition(axis, value, layoutInfo) {\n  var transform = matrix.create();\n  matrix.rotate(transform, transform, layoutInfo.rotation);\n  matrix.translate(transform, transform, layoutInfo.position);\n  return graphic.applyTransform([axis.dataToCoord(value), (layoutInfo.labelOffset || 0) + (layoutInfo.labelDirection || 1) * (layoutInfo.labelMargin || 0)], transform);\n}\nexport function buildCartesianSingleLabelElOption(value, elOption, layoutInfo, axisModel, axisPointerModel, api) {\n  // @ts-ignore\n  var textLayout = AxisBuilder.innerTextLayout(layoutInfo.rotation, 0, layoutInfo.labelDirection);\n  layoutInfo.labelMargin = axisPointerModel.get(['label', 'margin']);\n  buildLabelElOption(elOption, axisModel, axisPointerModel, api, {\n    position: getTransformedPosition(axisModel.axis, value, layoutInfo),\n    align: textLayout.textAlign,\n    verticalAlign: textLayout.textVerticalAlign\n  });\n}\nexport function makeLineShape(p1, p2, xDimIndex) {\n  xDimIndex = xDimIndex || 0;\n  return {\n    x1: p1[xDimIndex],\n    y1: p1[1 - xDimIndex],\n    x2: p2[xDimIndex],\n    y2: p2[1 - xDimIndex]\n  };\n}\nexport function makeRectShape(xy, wh, xDimIndex) {\n  xDimIndex = xDimIndex || 0;\n  return {\n    x: xy[xDimIndex],\n    y: xy[1 - xDimIndex],\n    width: wh[xDimIndex],\n    height: wh[1 - xDimIndex]\n  };\n}\nexport function makeSectorShape(cx, cy, r0, r, startAngle, endAngle) {\n  return {\n    cx: cx,\n    cy: cy,\n    r0: r0,\n    r: r,\n    startAngle: startAngle,\n    endAngle: endAngle,\n    clockwise: true\n  };\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component';\n\nvar GridModel =\n/** @class */\nfunction (_super) {\n  __extends(GridModel, _super);\n\n  function GridModel() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  GridModel.type = 'grid';\n  GridModel.dependencies = ['xAxis', 'yAxis'];\n  GridModel.layoutMode = 'box';\n  GridModel.defaultOption = {\n    show: false,\n    zlevel: 0,\n    z: 0,\n    left: '10%',\n    top: 60,\n    right: '10%',\n    bottom: 70,\n    // If grid size contain label\n    containLabel: false,\n    // width: {totalWidth} - left - right,\n    // height: {totalHeight} - top - bottom,\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderWidth: 1,\n    borderColor: '#ccc'\n  };\n  return GridModel;\n}(ComponentModel);\n\nexport default GridModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport ComponentModel from '../../model/Component';\nimport { AxisModelCommonMixin } from '../axisModelCommonMixin';\nimport { SINGLE_REFERRING } from '../../util/model';\n\nvar CartesianAxisModel =\n/** @class */\nfunction (_super) {\n  __extends(CartesianAxisModel, _super);\n\n  function CartesianAxisModel() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  CartesianAxisModel.prototype.getCoordSysModel = function () {\n    return this.getReferringComponents('grid', SINGLE_REFERRING).models[0];\n  };\n\n  CartesianAxisModel.type = 'cartesian2dAxis';\n  return CartesianAxisModel;\n}(ComponentModel);\n\nexport { CartesianAxisModel };\nzrUtil.mixin(CartesianAxisModel, AxisModelCommonMixin);\nexport default CartesianAxisModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\n\nvar Cartesian =\n/** @class */\nfunction () {\n  function Cartesian(name) {\n    this.type = 'cartesian';\n    this._dimList = [];\n    this._axes = {};\n    this.name = name || '';\n  }\n\n  Cartesian.prototype.getAxis = function (dim) {\n    return this._axes[dim];\n  };\n\n  Cartesian.prototype.getAxes = function () {\n    return zrUtil.map(this._dimList, function (dim) {\n      return this._axes[dim];\n    }, this);\n  };\n\n  Cartesian.prototype.getAxesByScale = function (scaleType) {\n    scaleType = scaleType.toLowerCase();\n    return zrUtil.filter(this.getAxes(), function (axis) {\n      return axis.scale.type === scaleType;\n    });\n  };\n\n  Cartesian.prototype.addAxis = function (axis) {\n    var dim = axis.dim;\n    this._axes[dim] = axis;\n\n    this._dimList.push(dim);\n  };\n\n  return Cartesian;\n}();\n\n;\nexport default Cartesian;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport BoundingRect from 'zrender/lib/core/BoundingRect';\nimport Cartesian from './Cartesian';\nimport { invert } from 'zrender/lib/core/matrix';\nimport { applyTransform } from 'zrender/lib/core/vector';\nexport var cartesian2DDimensions = ['x', 'y'];\n\nfunction canCalculateAffineTransform(scale) {\n  return scale.type === 'interval' || scale.type === 'time';\n}\n\nvar Cartesian2D =\n/** @class */\nfunction (_super) {\n  __extends(Cartesian2D, _super);\n\n  function Cartesian2D() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = 'cartesian2d';\n    _this.dimensions = cartesian2DDimensions;\n    return _this;\n  }\n  /**\n   * Calculate an affine transform matrix if two axes are time or value.\n   * It's mainly for accelartion on the large time series data.\n   */\n\n\n  Cartesian2D.prototype.calcAffineTransform = function () {\n    this._transform = this._invTransform = null;\n    var xAxisScale = this.getAxis('x').scale;\n    var yAxisScale = this.getAxis('y').scale;\n\n    if (!canCalculateAffineTransform(xAxisScale) || !canCalculateAffineTransform(yAxisScale)) {\n      return;\n    }\n\n    var xScaleExtent = xAxisScale.getExtent();\n    var yScaleExtent = yAxisScale.getExtent();\n    var start = this.dataToPoint([xScaleExtent[0], yScaleExtent[0]]);\n    var end = this.dataToPoint([xScaleExtent[1], yScaleExtent[1]]);\n    var xScaleSpan = xScaleExtent[1] - xScaleExtent[0];\n    var yScaleSpan = yScaleExtent[1] - yScaleExtent[0];\n\n    if (!xScaleSpan || !yScaleSpan) {\n      return;\n    } // Accelerate data to point calculation on the special large time series data.\n\n\n    var scaleX = (end[0] - start[0]) / xScaleSpan;\n    var scaleY = (end[1] - start[1]) / yScaleSpan;\n    var translateX = start[0] - xScaleExtent[0] * scaleX;\n    var translateY = start[1] - yScaleExtent[0] * scaleY;\n    var m = this._transform = [scaleX, 0, 0, scaleY, translateX, translateY];\n    this._invTransform = invert([], m);\n  };\n  /**\n   * Base axis will be used on stacking.\n   */\n\n\n  Cartesian2D.prototype.getBaseAxis = function () {\n    return this.getAxesByScale('ordinal')[0] || this.getAxesByScale('time')[0] || this.getAxis('x');\n  };\n\n  Cartesian2D.prototype.containPoint = function (point) {\n    var axisX = this.getAxis('x');\n    var axisY = this.getAxis('y');\n    return axisX.contain(axisX.toLocalCoord(point[0])) && axisY.contain(axisY.toLocalCoord(point[1]));\n  };\n\n  Cartesian2D.prototype.containData = function (data) {\n    return this.getAxis('x').containData(data[0]) && this.getAxis('y').containData(data[1]);\n  };\n\n  Cartesian2D.prototype.dataToPoint = function (data, clamp, out) {\n    out = out || [];\n    var xVal = data[0];\n    var yVal = data[1]; // Fast path\n\n    if (this._transform // It's supported that if data is like `[Inifity, 123]`, where only Y pixel calculated.\n    && xVal != null && isFinite(xVal) && yVal != null && isFinite(yVal)) {\n      return applyTransform(out, data, this._transform);\n    }\n\n    var xAxis = this.getAxis('x');\n    var yAxis = this.getAxis('y');\n    out[0] = xAxis.toGlobalCoord(xAxis.dataToCoord(xVal, clamp));\n    out[1] = yAxis.toGlobalCoord(yAxis.dataToCoord(yVal, clamp));\n    return out;\n  };\n\n  Cartesian2D.prototype.clampData = function (data, out) {\n    var xScale = this.getAxis('x').scale;\n    var yScale = this.getAxis('y').scale;\n    var xAxisExtent = xScale.getExtent();\n    var yAxisExtent = yScale.getExtent();\n    var x = xScale.parse(data[0]);\n    var y = yScale.parse(data[1]);\n    out = out || [];\n    out[0] = Math.min(Math.max(Math.min(xAxisExtent[0], xAxisExtent[1]), x), Math.max(xAxisExtent[0], xAxisExtent[1]));\n    out[1] = Math.min(Math.max(Math.min(yAxisExtent[0], yAxisExtent[1]), y), Math.max(yAxisExtent[0], yAxisExtent[1]));\n    return out;\n  };\n\n  Cartesian2D.prototype.pointToData = function (point, clamp) {\n    var out = [];\n\n    if (this._invTransform) {\n      return applyTransform(out, point, this._invTransform);\n    }\n\n    var xAxis = this.getAxis('x');\n    var yAxis = this.getAxis('y');\n    out[0] = xAxis.coordToData(xAxis.toLocalCoord(point[0]), clamp);\n    out[1] = yAxis.coordToData(yAxis.toLocalCoord(point[1]), clamp);\n    return out;\n  };\n\n  Cartesian2D.prototype.getOtherAxis = function (axis) {\n    return this.getAxis(axis.dim === 'x' ? 'y' : 'x');\n  };\n  /**\n   * Get rect area of cartesian.\n   * Area will have a contain function to determine if a point is in the coordinate system.\n   */\n\n\n  Cartesian2D.prototype.getArea = function () {\n    var xExtent = this.getAxis('x').getGlobalExtent();\n    var yExtent = this.getAxis('y').getGlobalExtent();\n    var x = Math.min(xExtent[0], xExtent[1]);\n    var y = Math.min(yExtent[0], yExtent[1]);\n    var width = Math.max(xExtent[0], xExtent[1]) - x;\n    var height = Math.max(yExtent[0], yExtent[1]) - y;\n    return new BoundingRect(x, y, width, height);\n  };\n\n  return Cartesian2D;\n}(Cartesian);\n\n;\nexport default Cartesian2D;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Axis from '../Axis';\n\nvar Axis2D =\n/** @class */\nfunction (_super) {\n  __extends(Axis2D, _super);\n\n  function Axis2D(dim, scale, coordExtent, axisType, position) {\n    var _this = _super.call(this, dim, scale, coordExtent) || this;\n    /**\n     * Index of axis, can be used as key\n     * Injected outside.\n     */\n\n\n    _this.index = 0;\n    _this.type = axisType || 'value';\n    _this.position = position || 'bottom';\n    return _this;\n  }\n\n  Axis2D.prototype.isHorizontal = function () {\n    var position = this.position;\n    return position === 'top' || position === 'bottom';\n  };\n  /**\n   * Each item cooresponds to this.getExtent(), which\n   * means globalExtent[0] may greater than globalExtent[1],\n   * unless `asc` is input.\n   *\n   * @param {boolean} [asc]\n   * @return {Array.<number>}\n   */\n\n\n  Axis2D.prototype.getGlobalExtent = function (asc) {\n    var ret = this.getExtent();\n    ret[0] = this.toGlobalCoord(ret[0]);\n    ret[1] = this.toGlobalCoord(ret[1]);\n    asc && ret[0] > ret[1] && ret.reverse();\n    return ret;\n  };\n\n  Axis2D.prototype.pointToData = function (point, clamp) {\n    return this.coordToData(this.toLocalCoord(point[this.dim === 'x' ? 0 : 1]), clamp);\n  };\n  /**\n   * Set ordinalSortInfo\n   * @param info new OrdinalSortInfo\n   */\n\n\n  Axis2D.prototype.setCategorySortInfo = function (info) {\n    if (this.type !== 'category') {\n      return false;\n    }\n\n    this.model.option.categorySortInfo = info;\n    this.scale.setSortInfo(info);\n  };\n\n  return Axis2D;\n}(Axis);\n\nexport default Axis2D;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Grid is a region which contains at most 4 cartesian systems\n *\n * TODO Default cartesian\n */\nimport { isObject, each, indexOf, retrieve3 } from 'zrender/lib/core/util';\nimport { getLayoutRect } from '../../util/layout';\nimport { createScaleByModel, ifAxisCrossZero, niceScaleExtent, estimateLabelUnionRect, getDataDimensionsOnAxis } from '../../coord/axisHelper';\nimport Cartesian2D, { cartesian2DDimensions } from './Cartesian2D';\nimport Axis2D from './Axis2D';\nimport { SINGLE_REFERRING } from '../../util/model';\nimport { isCartesian2DSeries, findAxisModels } from './cartesianAxisHelper';\n\nvar Grid =\n/** @class */\nfunction () {\n  function Grid(gridModel, ecModel, api) {\n    // FIXME:TS where used (different from registered type 'cartesian2d')?\n    this.type = 'grid';\n    this._coordsMap = {};\n    this._coordsList = [];\n    this._axesMap = {};\n    this._axesList = [];\n    this.axisPointerEnabled = true;\n    this.dimensions = cartesian2DDimensions;\n\n    this._initCartesian(gridModel, ecModel, api);\n\n    this.model = gridModel;\n  }\n\n  Grid.prototype.getRect = function () {\n    return this._rect;\n  };\n\n  Grid.prototype.update = function (ecModel, api) {\n    var axesMap = this._axesMap;\n\n    this._updateScale(ecModel, this.model);\n\n    each(axesMap.x, function (xAxis) {\n      niceScaleExtent(xAxis.scale, xAxis.model);\n    });\n    each(axesMap.y, function (yAxis) {\n      niceScaleExtent(yAxis.scale, yAxis.model);\n    }); // Key: axisDim_axisIndex, value: boolean, whether onZero target.\n\n    var onZeroRecords = {};\n    each(axesMap.x, function (xAxis) {\n      fixAxisOnZero(axesMap, 'y', xAxis, onZeroRecords);\n    });\n    each(axesMap.y, function (yAxis) {\n      fixAxisOnZero(axesMap, 'x', yAxis, onZeroRecords);\n    }); // Resize again if containLabel is enabled\n    // FIXME It may cause getting wrong grid size in data processing stage\n\n    this.resize(this.model, api);\n  };\n  /**\n   * Resize the grid\n   */\n\n\n  Grid.prototype.resize = function (gridModel, api, ignoreContainLabel) {\n    var boxLayoutParams = gridModel.getBoxLayoutParams();\n    var isContainLabel = !ignoreContainLabel && gridModel.get('containLabel');\n    var gridRect = getLayoutRect(boxLayoutParams, {\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n    this._rect = gridRect;\n    var axesList = this._axesList;\n    adjustAxes(); // Minus label size\n\n    if (isContainLabel) {\n      each(axesList, function (axis) {\n        if (!axis.model.get(['axisLabel', 'inside'])) {\n          var labelUnionRect = estimateLabelUnionRect(axis);\n\n          if (labelUnionRect) {\n            var dim = axis.isHorizontal() ? 'height' : 'width';\n            var margin = axis.model.get(['axisLabel', 'margin']);\n            gridRect[dim] -= labelUnionRect[dim] + margin;\n\n            if (axis.position === 'top') {\n              gridRect.y += labelUnionRect.height + margin;\n            } else if (axis.position === 'left') {\n              gridRect.x += labelUnionRect.width + margin;\n            }\n          }\n        }\n      });\n      adjustAxes();\n    }\n\n    each(this._coordsList, function (coord) {\n      // Calculate affine matrix to accelerate the data to point transform.\n      // If all the axes scales are time or value.\n      coord.calcAffineTransform();\n    });\n\n    function adjustAxes() {\n      each(axesList, function (axis) {\n        var isHorizontal = axis.isHorizontal();\n        var extent = isHorizontal ? [0, gridRect.width] : [0, gridRect.height];\n        var idx = axis.inverse ? 1 : 0;\n        axis.setExtent(extent[idx], extent[1 - idx]);\n        updateAxisTransform(axis, isHorizontal ? gridRect.x : gridRect.y);\n      });\n    }\n  };\n\n  Grid.prototype.getAxis = function (dim, axisIndex) {\n    var axesMapOnDim = this._axesMap[dim];\n\n    if (axesMapOnDim != null) {\n      return axesMapOnDim[axisIndex || 0]; // if (axisIndex == null) {\n      //     Find first axis\n      //     for (let name in axesMapOnDim) {\n      //         if (axesMapOnDim.hasOwnProperty(name)) {\n      //             return axesMapOnDim[name];\n      //         }\n      //     }\n      // }\n      // return axesMapOnDim[axisIndex];\n    }\n  };\n\n  Grid.prototype.getAxes = function () {\n    return this._axesList.slice();\n  };\n\n  Grid.prototype.getCartesian = function (xAxisIndex, yAxisIndex) {\n    if (xAxisIndex != null && yAxisIndex != null) {\n      var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\n      return this._coordsMap[key];\n    }\n\n    if (isObject(xAxisIndex)) {\n      yAxisIndex = xAxisIndex.yAxisIndex;\n      xAxisIndex = xAxisIndex.xAxisIndex;\n    }\n\n    for (var i = 0, coordList = this._coordsList; i < coordList.length; i++) {\n      if (coordList[i].getAxis('x').index === xAxisIndex || coordList[i].getAxis('y').index === yAxisIndex) {\n        return coordList[i];\n      }\n    }\n  };\n\n  Grid.prototype.getCartesians = function () {\n    return this._coordsList.slice();\n  };\n  /**\n   * @implements\n   */\n\n\n  Grid.prototype.convertToPixel = function (ecModel, finder, value) {\n    var target = this._findConvertTarget(finder);\n\n    return target.cartesian ? target.cartesian.dataToPoint(value) : target.axis ? target.axis.toGlobalCoord(target.axis.dataToCoord(value)) : null;\n  };\n  /**\n   * @implements\n   */\n\n\n  Grid.prototype.convertFromPixel = function (ecModel, finder, value) {\n    var target = this._findConvertTarget(finder);\n\n    return target.cartesian ? target.cartesian.pointToData(value) : target.axis ? target.axis.coordToData(target.axis.toLocalCoord(value)) : null;\n  };\n\n  Grid.prototype._findConvertTarget = function (finder) {\n    var seriesModel = finder.seriesModel;\n    var xAxisModel = finder.xAxisModel || seriesModel && seriesModel.getReferringComponents('xAxis', SINGLE_REFERRING).models[0];\n    var yAxisModel = finder.yAxisModel || seriesModel && seriesModel.getReferringComponents('yAxis', SINGLE_REFERRING).models[0];\n    var gridModel = finder.gridModel;\n    var coordsList = this._coordsList;\n    var cartesian;\n    var axis;\n\n    if (seriesModel) {\n      cartesian = seriesModel.coordinateSystem;\n      indexOf(coordsList, cartesian) < 0 && (cartesian = null);\n    } else if (xAxisModel && yAxisModel) {\n      cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n    } else if (xAxisModel) {\n      axis = this.getAxis('x', xAxisModel.componentIndex);\n    } else if (yAxisModel) {\n      axis = this.getAxis('y', yAxisModel.componentIndex);\n    } // Lowest priority.\n    else if (gridModel) {\n      var grid = gridModel.coordinateSystem;\n\n      if (grid === this) {\n        cartesian = this._coordsList[0];\n      }\n    }\n\n    return {\n      cartesian: cartesian,\n      axis: axis\n    };\n  };\n  /**\n   * @implements\n   */\n\n\n  Grid.prototype.containPoint = function (point) {\n    var coord = this._coordsList[0];\n\n    if (coord) {\n      return coord.containPoint(point);\n    }\n  };\n  /**\n   * Initialize cartesian coordinate systems\n   */\n\n\n  Grid.prototype._initCartesian = function (gridModel, ecModel, api) {\n    var _this = this;\n\n    var grid = this;\n    var axisPositionUsed = {\n      left: false,\n      right: false,\n      top: false,\n      bottom: false\n    };\n    var axesMap = {\n      x: {},\n      y: {}\n    };\n    var axesCount = {\n      x: 0,\n      y: 0\n    }; /// Create axis\n\n    ecModel.eachComponent('xAxis', createAxisCreator('x'), this);\n    ecModel.eachComponent('yAxis', createAxisCreator('y'), this);\n\n    if (!axesCount.x || !axesCount.y) {\n      // Roll back when there no either x or y axis\n      this._axesMap = {};\n      this._axesList = [];\n      return;\n    }\n\n    this._axesMap = axesMap; /// Create cartesian2d\n\n    each(axesMap.x, function (xAxis, xAxisIndex) {\n      each(axesMap.y, function (yAxis, yAxisIndex) {\n        var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\n        var cartesian = new Cartesian2D(key);\n        cartesian.master = _this;\n        cartesian.model = gridModel;\n        _this._coordsMap[key] = cartesian;\n\n        _this._coordsList.push(cartesian);\n\n        cartesian.addAxis(xAxis);\n        cartesian.addAxis(yAxis);\n      });\n    });\n\n    function createAxisCreator(dimName) {\n      return function (axisModel, idx) {\n        if (!isAxisUsedInTheGrid(axisModel, gridModel)) {\n          return;\n        }\n\n        var axisPosition = axisModel.get('position');\n\n        if (dimName === 'x') {\n          // Fix position\n          if (axisPosition !== 'top' && axisPosition !== 'bottom') {\n            // Default bottom of X\n            axisPosition = axisPositionUsed.bottom ? 'top' : 'bottom';\n          }\n        } else {\n          // Fix position\n          if (axisPosition !== 'left' && axisPosition !== 'right') {\n            // Default left of Y\n            axisPosition = axisPositionUsed.left ? 'right' : 'left';\n          }\n        }\n\n        axisPositionUsed[axisPosition] = true;\n        var axis = new Axis2D(dimName, createScaleByModel(axisModel), [0, 0], axisModel.get('type'), axisPosition);\n        var isCategory = axis.type === 'category';\n        axis.onBand = isCategory && axisModel.get('boundaryGap');\n        axis.inverse = axisModel.get('inverse'); // Inject axis into axisModel\n\n        axisModel.axis = axis; // Inject axisModel into axis\n\n        axis.model = axisModel; // Inject grid info axis\n\n        axis.grid = grid; // Index of axis, can be used as key\n\n        axis.index = idx;\n\n        grid._axesList.push(axis);\n\n        axesMap[dimName][idx] = axis;\n        axesCount[dimName]++;\n      };\n    }\n  };\n  /**\n   * Update cartesian properties from series.\n   */\n\n\n  Grid.prototype._updateScale = function (ecModel, gridModel) {\n    // Reset scale\n    each(this._axesList, function (axis) {\n      axis.scale.setExtent(Infinity, -Infinity);\n\n      if (axis.type === 'category') {\n        var categorySortInfo = axis.model.get('categorySortInfo');\n        axis.scale.setSortInfo(categorySortInfo);\n      }\n    });\n    ecModel.eachSeries(function (seriesModel) {\n      if (isCartesian2DSeries(seriesModel)) {\n        var axesModelMap = findAxisModels(seriesModel);\n        var xAxisModel = axesModelMap.xAxisModel;\n        var yAxisModel = axesModelMap.yAxisModel;\n\n        if (!isAxisUsedInTheGrid(xAxisModel, gridModel) || !isAxisUsedInTheGrid(yAxisModel, gridModel)) {\n          return;\n        }\n\n        var cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n        var data = seriesModel.getData();\n        var xAxis = cartesian.getAxis('x');\n        var yAxis = cartesian.getAxis('y');\n\n        if (data.type === 'list') {\n          unionExtent(data, xAxis);\n          unionExtent(data, yAxis);\n        }\n      }\n    }, this);\n\n    function unionExtent(data, axis) {\n      each(getDataDimensionsOnAxis(data, axis.dim), function (dim) {\n        axis.scale.unionExtentFromData(data, dim);\n      });\n    }\n  };\n  /**\n   * @param dim 'x' or 'y' or 'auto' or null/undefined\n   */\n\n\n  Grid.prototype.getTooltipAxes = function (dim) {\n    var baseAxes = [];\n    var otherAxes = [];\n    each(this.getCartesians(), function (cartesian) {\n      var baseAxis = dim != null && dim !== 'auto' ? cartesian.getAxis(dim) : cartesian.getBaseAxis();\n      var otherAxis = cartesian.getOtherAxis(baseAxis);\n      indexOf(baseAxes, baseAxis) < 0 && baseAxes.push(baseAxis);\n      indexOf(otherAxes, otherAxis) < 0 && otherAxes.push(otherAxis);\n    });\n    return {\n      baseAxes: baseAxes,\n      otherAxes: otherAxes\n    };\n  };\n\n  Grid.create = function (ecModel, api) {\n    var grids = [];\n    ecModel.eachComponent('grid', function (gridModel, idx) {\n      var grid = new Grid(gridModel, ecModel, api);\n      grid.name = 'grid_' + idx; // dataSampling requires axis extent, so resize\n      // should be performed in create stage.\n\n      grid.resize(gridModel, api, true);\n      gridModel.coordinateSystem = grid;\n      grids.push(grid);\n    }); // Inject the coordinateSystems into seriesModel\n\n    ecModel.eachSeries(function (seriesModel) {\n      if (!isCartesian2DSeries(seriesModel)) {\n        return;\n      }\n\n      var axesModelMap = findAxisModels(seriesModel);\n      var xAxisModel = axesModelMap.xAxisModel;\n      var yAxisModel = axesModelMap.yAxisModel;\n      var gridModel = xAxisModel.getCoordSysModel();\n\n      if (process.env.NODE_ENV !== 'production') {\n        if (!gridModel) {\n          throw new Error('Grid \"' + retrieve3(xAxisModel.get('gridIndex'), xAxisModel.get('gridId'), 0) + '\" not found');\n        }\n\n        if (xAxisModel.getCoordSysModel() !== yAxisModel.getCoordSysModel()) {\n          throw new Error('xAxis and yAxis must use the same grid');\n        }\n      }\n\n      var grid = gridModel.coordinateSystem;\n      seriesModel.coordinateSystem = grid.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n    });\n    return grids;\n  }; // For deciding which dimensions to use when creating list data\n\n\n  Grid.dimensions = cartesian2DDimensions;\n  return Grid;\n}();\n/**\n * Check if the axis is used in the specified grid.\n */\n\n\nfunction isAxisUsedInTheGrid(axisModel, gridModel) {\n  return axisModel.getCoordSysModel() === gridModel;\n}\n\nfunction fixAxisOnZero(axesMap, otherAxisDim, axis, // Key: see `getOnZeroRecordKey`\nonZeroRecords) {\n  axis.getAxesOnZeroOf = function () {\n    // TODO: onZero of multiple axes.\n    return otherAxisOnZeroOf ? [otherAxisOnZeroOf] : [];\n  }; // onZero can not be enabled in these two situations:\n  // 1. When any other axis is a category axis.\n  // 2. When no axis is cross 0 point.\n\n\n  var otherAxes = axesMap[otherAxisDim];\n  var otherAxisOnZeroOf;\n  var axisModel = axis.model;\n  var onZero = axisModel.get(['axisLine', 'onZero']);\n  var onZeroAxisIndex = axisModel.get(['axisLine', 'onZeroAxisIndex']);\n\n  if (!onZero) {\n    return;\n  } // If target axis is specified.\n\n\n  if (onZeroAxisIndex != null) {\n    if (canOnZeroToAxis(otherAxes[onZeroAxisIndex])) {\n      otherAxisOnZeroOf = otherAxes[onZeroAxisIndex];\n    }\n  } else {\n    // Find the first available other axis.\n    for (var idx in otherAxes) {\n      if (otherAxes.hasOwnProperty(idx) && canOnZeroToAxis(otherAxes[idx]) // Consider that two Y axes on one value axis,\n      // if both onZero, the two Y axes overlap.\n      && !onZeroRecords[getOnZeroRecordKey(otherAxes[idx])]) {\n        otherAxisOnZeroOf = otherAxes[idx];\n        break;\n      }\n    }\n  }\n\n  if (otherAxisOnZeroOf) {\n    onZeroRecords[getOnZeroRecordKey(otherAxisOnZeroOf)] = true;\n  }\n\n  function getOnZeroRecordKey(axis) {\n    return axis.dim + '_' + axis.index;\n  }\n}\n\nfunction canOnZeroToAxis(axis) {\n  return axis && axis.type !== 'category' && axis.type !== 'time' && ifAxisCrossZero(axis);\n}\n\nfunction updateAxisTransform(axis, coordBase) {\n  var axisExtent = axis.getExtent();\n  var axisExtentSum = axisExtent[0] + axisExtent[1]; // Fast transform\n\n  axis.toGlobalCoord = axis.dim === 'x' ? function (coord) {\n    return coord + coordBase;\n  } : function (coord) {\n    return axisExtentSum - coord + coordBase;\n  };\n  axis.toLocalCoord = axis.dim === 'x' ? function (coord) {\n    return coord - coordBase;\n  } : function (coord) {\n    return axisExtentSum - coord + coordBase;\n  };\n}\n\nexport default Grid;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as graphic from '../../util/graphic';\nimport AxisBuilder from './AxisBuilder';\nimport AxisView from './AxisView';\nimport * as cartesianAxisHelper from '../../coord/cartesian/cartesianAxisHelper';\nimport { rectCoordAxisBuildSplitArea, rectCoordAxisHandleRemove } from './axisSplitHelper';\nvar axisBuilderAttrs = ['axisLine', 'axisTickLabel', 'axisName'];\nvar selfBuilderAttrs = ['splitArea', 'splitLine', 'minorSplitLine'];\n\nvar CartesianAxisView =\n/** @class */\nfunction (_super) {\n  __extends(CartesianAxisView, _super);\n\n  function CartesianAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CartesianAxisView.type;\n    _this.axisPointerClass = 'CartesianAxisPointer';\n    return _this;\n  }\n  /**\n   * @override\n   */\n\n\n  CartesianAxisView.prototype.render = function (axisModel, ecModel, api, payload) {\n    this.group.removeAll();\n    var oldAxisGroup = this._axisGroup;\n    this._axisGroup = new graphic.Group();\n    this.group.add(this._axisGroup);\n\n    if (!axisModel.get('show')) {\n      return;\n    }\n\n    var gridModel = axisModel.getCoordSysModel();\n    var layout = cartesianAxisHelper.layout(gridModel, axisModel);\n    var axisBuilder = new AxisBuilder(axisModel, zrUtil.extend({\n      handleAutoShown: function handleAutoShown(elementType) {\n        var cartesians = gridModel.coordinateSystem.getCartesians();\n\n        for (var i = 0; i < cartesians.length; i++) {\n          var otherAxisType = cartesians[i].getOtherAxis(axisModel.axis).type;\n\n          if (otherAxisType === 'value' || otherAxisType === 'log') {\n            // Still show axis tick or axisLine if other axis is value / log\n            return true;\n          }\n        } // Not show axisTick or axisLine if other axis is category / time\n\n\n        return false;\n      }\n    }, layout));\n    zrUtil.each(axisBuilderAttrs, axisBuilder.add, axisBuilder);\n\n    this._axisGroup.add(axisBuilder.getGroup());\n\n    zrUtil.each(selfBuilderAttrs, function (name) {\n      if (axisModel.get([name, 'show'])) {\n        axisElementBuilders[name](this, this._axisGroup, axisModel, gridModel);\n      }\n    }, this); // THIS is a special case for bar racing chart.\n    // Update the axis label from the natural initial layout to\n    // sorted layout should has no animation.\n\n    var isInitialSortFromBarRacing = payload && payload.type === 'changeAxisOrder' && payload.isInitSort;\n\n    if (!isInitialSortFromBarRacing) {\n      graphic.groupTransition(oldAxisGroup, this._axisGroup, axisModel);\n    }\n\n    _super.prototype.render.call(this, axisModel, ecModel, api, payload);\n  };\n\n  CartesianAxisView.prototype.remove = function () {\n    rectCoordAxisHandleRemove(this);\n  };\n\n  CartesianAxisView.type = 'cartesianAxis';\n  return CartesianAxisView;\n}(AxisView);\n\nvar axisElementBuilders = {\n  splitLine: function splitLine(axisView, axisGroup, axisModel, gridModel) {\n    var axis = axisModel.axis;\n\n    if (axis.scale.isBlank()) {\n      return;\n    }\n\n    var splitLineModel = axisModel.getModel('splitLine');\n    var lineStyleModel = splitLineModel.getModel('lineStyle');\n    var lineColors = lineStyleModel.get('color');\n    lineColors = zrUtil.isArray(lineColors) ? lineColors : [lineColors];\n    var gridRect = gridModel.coordinateSystem.getRect();\n    var isHorizontal = axis.isHorizontal();\n    var lineCount = 0;\n    var ticksCoords = axis.getTicksCoords({\n      tickModel: splitLineModel\n    });\n    var p1 = [];\n    var p2 = [];\n    var lineStyle = lineStyleModel.getLineStyle();\n\n    for (var i = 0; i < ticksCoords.length; i++) {\n      var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n\n      if (isHorizontal) {\n        p1[0] = tickCoord;\n        p1[1] = gridRect.y;\n        p2[0] = tickCoord;\n        p2[1] = gridRect.y + gridRect.height;\n      } else {\n        p1[0] = gridRect.x;\n        p1[1] = tickCoord;\n        p2[0] = gridRect.x + gridRect.width;\n        p2[1] = tickCoord;\n      }\n\n      var colorIndex = lineCount++ % lineColors.length;\n      var tickValue = ticksCoords[i].tickValue;\n      axisGroup.add(new graphic.Line({\n        anid: tickValue != null ? 'line_' + ticksCoords[i].tickValue : null,\n        subPixelOptimize: true,\n        autoBatch: true,\n        shape: {\n          x1: p1[0],\n          y1: p1[1],\n          x2: p2[0],\n          y2: p2[1]\n        },\n        style: zrUtil.defaults({\n          stroke: lineColors[colorIndex]\n        }, lineStyle),\n        silent: true\n      }));\n    }\n  },\n  minorSplitLine: function minorSplitLine(axisView, axisGroup, axisModel, gridModel) {\n    var axis = axisModel.axis;\n    var minorSplitLineModel = axisModel.getModel('minorSplitLine');\n    var lineStyleModel = minorSplitLineModel.getModel('lineStyle');\n    var gridRect = gridModel.coordinateSystem.getRect();\n    var isHorizontal = axis.isHorizontal();\n    var minorTicksCoords = axis.getMinorTicksCoords();\n\n    if (!minorTicksCoords.length) {\n      return;\n    }\n\n    var p1 = [];\n    var p2 = [];\n    var lineStyle = lineStyleModel.getLineStyle();\n\n    for (var i = 0; i < minorTicksCoords.length; i++) {\n      for (var k = 0; k < minorTicksCoords[i].length; k++) {\n        var tickCoord = axis.toGlobalCoord(minorTicksCoords[i][k].coord);\n\n        if (isHorizontal) {\n          p1[0] = tickCoord;\n          p1[1] = gridRect.y;\n          p2[0] = tickCoord;\n          p2[1] = gridRect.y + gridRect.height;\n        } else {\n          p1[0] = gridRect.x;\n          p1[1] = tickCoord;\n          p2[0] = gridRect.x + gridRect.width;\n          p2[1] = tickCoord;\n        }\n\n        axisGroup.add(new graphic.Line({\n          anid: 'minor_line_' + minorTicksCoords[i][k].tickValue,\n          subPixelOptimize: true,\n          autoBatch: true,\n          shape: {\n            x1: p1[0],\n            y1: p1[1],\n            x2: p2[0],\n            y2: p2[1]\n          },\n          style: lineStyle,\n          silent: true\n        }));\n      }\n    }\n  },\n  splitArea: function splitArea(axisView, axisGroup, axisModel, gridModel) {\n    rectCoordAxisBuildSplitArea(axisView, axisGroup, axisModel, gridModel);\n  }\n};\n\nvar CartesianXAxisView =\n/** @class */\nfunction (_super) {\n  __extends(CartesianXAxisView, _super);\n\n  function CartesianXAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CartesianXAxisView.type;\n    return _this;\n  }\n\n  CartesianXAxisView.type = 'xAxis';\n  return CartesianXAxisView;\n}(CartesianAxisView);\n\nexport { CartesianXAxisView };\n\nvar CartesianYAxisView =\n/** @class */\nfunction (_super) {\n  __extends(CartesianYAxisView, _super);\n\n  function CartesianYAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CartesianXAxisView.type;\n    return _this;\n  }\n\n  CartesianYAxisView.type = 'yAxis';\n  return CartesianYAxisView;\n}(CartesianAxisView);\n\nexport { CartesianYAxisView };\nexport default CartesianAxisView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentView from '../../view/Component';\nimport GridModel from '../../coord/cartesian/GridModel';\nimport { Rect } from '../../util/graphic';\nimport { defaults } from 'zrender/lib/core/util';\nimport { CartesianAxisModel } from '../../coord/cartesian/AxisModel';\nimport axisModelCreator from '../../coord/axisModelCreator';\nimport Grid from '../../coord/cartesian/Grid';\nimport { CartesianXAxisView, CartesianYAxisView } from '../axis/CartesianAxisView'; // Grid view\n\nvar GridView =\n/** @class */\nfunction (_super) {\n  __extends(GridView, _super);\n\n  function GridView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = 'grid';\n    return _this;\n  }\n\n  GridView.prototype.render = function (gridModel, ecModel) {\n    this.group.removeAll();\n\n    if (gridModel.get('show')) {\n      this.group.add(new Rect({\n        shape: gridModel.coordinateSystem.getRect(),\n        style: defaults({\n          fill: gridModel.get('backgroundColor')\n        }, gridModel.getItemStyle()),\n        silent: true,\n        z2: -1\n      }));\n    }\n  };\n\n  GridView.type = 'grid';\n  return GridView;\n}(ComponentView);\n\nvar extraOption = {\n  // gridIndex: 0,\n  // gridId: '',\n  offset: 0\n};\nexport function install(registers) {\n  registers.registerComponentView(GridView);\n  registers.registerComponentModel(GridModel);\n  registers.registerCoordinateSystem('cartesian2d', Grid);\n  axisModelCreator(registers, 'x', CartesianAxisModel, extraOption);\n  axisModelCreator(registers, 'y', CartesianAxisModel, extraOption);\n  registers.registerComponentView(CartesianXAxisView);\n  registers.registerComponentView(CartesianYAxisView);\n  registers.registerPreprocessor(function (option) {\n    // Only create grid when need\n    if (option.xAxis && option.yAxis && !option.grid) {\n      option.grid = {};\n    }\n  });\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../extension';\nimport { install } from './title/install';\nuse(install);","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as graphic from '../../util/graphic';\nimport { getECData } from '../../util/innerStore';\nimport { createTextStyle } from '../../label/labelStyle';\nimport { getLayoutRect } from '../../util/layout';\nimport ComponentModel from '../../model/Component';\nimport ComponentView from '../../view/Component';\nimport { windowOpen } from '../../util/format';\n\nvar TitleModel =\n/** @class */\nfunction (_super) {\n  __extends(TitleModel, _super);\n\n  function TitleModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = TitleModel.type;\n    _this.layoutMode = {\n      type: 'box',\n      ignoreSize: true\n    };\n    return _this;\n  }\n\n  TitleModel.type = 'title';\n  TitleModel.defaultOption = {\n    zlevel: 0,\n    z: 6,\n    show: true,\n    text: '',\n    target: 'blank',\n    subtext: '',\n    subtarget: 'blank',\n    left: 0,\n    top: 0,\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderColor: '#ccc',\n    borderWidth: 0,\n    padding: 5,\n    itemGap: 10,\n    textStyle: {\n      fontSize: 18,\n      fontWeight: 'bold',\n      color: '#464646'\n    },\n    subtextStyle: {\n      fontSize: 12,\n      color: '#6E7079'\n    }\n  };\n  return TitleModel;\n}(ComponentModel); // View\n\n\nvar TitleView =\n/** @class */\nfunction (_super) {\n  __extends(TitleView, _super);\n\n  function TitleView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = TitleView.type;\n    return _this;\n  }\n\n  TitleView.prototype.render = function (titleModel, ecModel, api) {\n    this.group.removeAll();\n\n    if (!titleModel.get('show')) {\n      return;\n    }\n\n    var group = this.group;\n    var textStyleModel = titleModel.getModel('textStyle');\n    var subtextStyleModel = titleModel.getModel('subtextStyle');\n    var textAlign = titleModel.get('textAlign');\n    var textVerticalAlign = zrUtil.retrieve2(titleModel.get('textBaseline'), titleModel.get('textVerticalAlign'));\n    var textEl = new graphic.Text({\n      style: createTextStyle(textStyleModel, {\n        text: titleModel.get('text'),\n        fill: textStyleModel.getTextColor()\n      }, {\n        disableBox: true\n      }),\n      z2: 10\n    });\n    var textRect = textEl.getBoundingRect();\n    var subText = titleModel.get('subtext');\n    var subTextEl = new graphic.Text({\n      style: createTextStyle(subtextStyleModel, {\n        text: subText,\n        fill: subtextStyleModel.getTextColor(),\n        y: textRect.height + titleModel.get('itemGap'),\n        verticalAlign: 'top'\n      }, {\n        disableBox: true\n      }),\n      z2: 10\n    });\n    var link = titleModel.get('link');\n    var sublink = titleModel.get('sublink');\n    var triggerEvent = titleModel.get('triggerEvent', true);\n    textEl.silent = !link && !triggerEvent;\n    subTextEl.silent = !sublink && !triggerEvent;\n\n    if (link) {\n      textEl.on('click', function () {\n        windowOpen(link, '_' + titleModel.get('target'));\n      });\n    }\n\n    if (sublink) {\n      subTextEl.on('click', function () {\n        windowOpen(sublink, '_' + titleModel.get('subtarget'));\n      });\n    }\n\n    getECData(textEl).eventData = getECData(subTextEl).eventData = triggerEvent ? {\n      componentType: 'title',\n      componentIndex: titleModel.componentIndex\n    } : null;\n    group.add(textEl);\n    subText && group.add(subTextEl); // If no subText, but add subTextEl, there will be an empty line.\n\n    var groupRect = group.getBoundingRect();\n    var layoutOption = titleModel.getBoxLayoutParams();\n    layoutOption.width = groupRect.width;\n    layoutOption.height = groupRect.height;\n    var layoutRect = getLayoutRect(layoutOption, {\n      width: api.getWidth(),\n      height: api.getHeight()\n    }, titleModel.get('padding')); // Adjust text align based on position\n\n    if (!textAlign) {\n      // Align left if title is on the left. center and right is same\n      textAlign = titleModel.get('left') || titleModel.get('right'); // @ts-ignore\n\n      if (textAlign === 'middle') {\n        textAlign = 'center';\n      } // Adjust layout by text align\n\n\n      if (textAlign === 'right') {\n        layoutRect.x += layoutRect.width;\n      } else if (textAlign === 'center') {\n        layoutRect.x += layoutRect.width / 2;\n      }\n    }\n\n    if (!textVerticalAlign) {\n      textVerticalAlign = titleModel.get('top') || titleModel.get('bottom'); // @ts-ignore\n\n      if (textVerticalAlign === 'center') {\n        textVerticalAlign = 'middle';\n      }\n\n      if (textVerticalAlign === 'bottom') {\n        layoutRect.y += layoutRect.height;\n      } else if (textVerticalAlign === 'middle') {\n        layoutRect.y += layoutRect.height / 2;\n      }\n\n      textVerticalAlign = textVerticalAlign || 'top';\n    }\n\n    group.x = layoutRect.x;\n    group.y = layoutRect.y;\n    group.markRedraw();\n    var alignStyle = {\n      align: textAlign,\n      verticalAlign: textVerticalAlign\n    };\n    textEl.setStyle(alignStyle);\n    subTextEl.setStyle(alignStyle); // Render background\n    // Get groupRect again because textAlign has been changed\n\n    groupRect = group.getBoundingRect();\n    var padding = layoutRect.margin;\n    var style = titleModel.getItemStyle(['color', 'opacity']);\n    style.fill = titleModel.get('backgroundColor');\n    var rect = new graphic.Rect({\n      shape: {\n        x: groupRect.x - padding[3],\n        y: groupRect.y - padding[0],\n        width: groupRect.width + padding[1] + padding[3],\n        height: groupRect.height + padding[0] + padding[2],\n        r: titleModel.get('borderRadius')\n      },\n      style: style,\n      subPixelOptimize: true,\n      silent: true\n    });\n    group.add(rect);\n  };\n\n  TitleView.type = 'title';\n  return TitleView;\n}(ComponentView);\n\nexport function install(registers) {\n  registers.registerComponentModel(TitleModel);\n  registers.registerComponentView(TitleView);\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../extension';\nimport { install } from './tooltip/install';\nuse(install);","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component';\n\nvar TooltipModel =\n/** @class */\nfunction (_super) {\n  __extends(TooltipModel, _super);\n\n  function TooltipModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = TooltipModel.type;\n    return _this;\n  }\n\n  TooltipModel.type = 'tooltip';\n  TooltipModel.dependencies = ['axisPointer'];\n  TooltipModel.defaultOption = {\n    zlevel: 0,\n    z: 60,\n    show: true,\n    // tooltip main content\n    showContent: true,\n    // 'trigger' only works on coordinate system.\n    // 'item' | 'axis' | 'none'\n    trigger: 'item',\n    // 'click' | 'mousemove' | 'none'\n    triggerOn: 'mousemove|click',\n    alwaysShowContent: false,\n    displayMode: 'single',\n    renderMode: 'auto',\n    // whether restraint content inside viewRect.\n    // If renderMode: 'richText', default true.\n    // If renderMode: 'html', defaut false (for backward compat).\n    confine: null,\n    showDelay: 0,\n    hideDelay: 100,\n    // Animation transition time, unit is second\n    transitionDuration: 0.4,\n    enterable: false,\n    backgroundColor: '#fff',\n    // box shadow\n    shadowBlur: 10,\n    shadowColor: 'rgba(0, 0, 0, .2)',\n    shadowOffsetX: 1,\n    shadowOffsetY: 2,\n    // tooltip border radius, unit is px, default is 4\n    borderRadius: 4,\n    // tooltip border width, unit is px, default is 0 (no border)\n    borderWidth: 1,\n    // Tooltip inside padding, default is 5 for all direction\n    // Array is allowed to set up, right, bottom, left, same with css\n    // The default value: See `tooltip/tooltipMarkup.ts#getPaddingFromTooltipModel`.\n    padding: null,\n    // Extra css text\n    extraCssText: '',\n    // axis indicator, trigger by axis\n    axisPointer: {\n      // default is line\n      // legal values: 'line' | 'shadow' | 'cross'\n      type: 'line',\n      // Valid when type is line, appoint tooltip line locate on which line. Optional\n      // legal values: 'x' | 'y' | 'angle' | 'radius' | 'auto'\n      // default is 'auto', chose the axis which type is category.\n      // for multiply y axis, cartesian coord chose x axis, polar chose angle axis\n      axis: 'auto',\n      animation: 'auto',\n      animationDurationUpdate: 200,\n      animationEasingUpdate: 'exponentialOut',\n      crossStyle: {\n        color: '#999',\n        width: 1,\n        type: 'dashed',\n        // TODO formatter\n        textStyle: {}\n      } // lineStyle and shadowStyle should not be specified here,\n      // otherwise it will always override those styles on option.axisPointer.\n\n    },\n    textStyle: {\n      color: '#666',\n      fontSize: 14\n    }\n  };\n  return TooltipModel;\n}(ComponentModel);\n\nexport default TooltipModel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { toCamelCase } from '../../util/format';\nimport env from 'zrender/lib/core/env';\n/* global document */\n\nexport function shouldTooltipConfine(tooltipModel) {\n  var confineOption = tooltipModel.get('confine');\n  return confineOption != null ? !!confineOption // In richText mode, the outside part can not be visible.\n  : tooltipModel.get('renderMode') === 'richText';\n}\n\nfunction testStyle(styleProps) {\n  if (!env.domSupported) {\n    return;\n  }\n\n  var style = document.documentElement.style;\n\n  for (var i = 0, len = styleProps.length; i < len; i++) {\n    if (styleProps[i] in style) {\n      return styleProps[i];\n    }\n  }\n}\n\nexport var TRANSFORM_VENDOR = testStyle(['transform', 'webkitTransform', 'OTransform', 'MozTransform', 'msTransform']);\nexport var TRANSITION_VENDOR = testStyle(['webkitTransition', 'transition', 'OTransition', 'MozTransition', 'msTransition']);\nexport function toCSSVendorPrefix(styleVendor, styleProp) {\n  if (!styleVendor) {\n    return styleProp;\n  }\n\n  styleProp = toCamelCase(styleProp, true);\n  var idx = styleVendor.indexOf(styleProp);\n  styleVendor = idx === -1 ? styleProp : \"-\" + styleVendor.slice(0, idx) + \"-\" + styleProp;\n  return styleVendor.toLowerCase();\n}\nexport function getComputedStyle(el, style) {\n  var stl = el.currentStyle || document.defaultView && document.defaultView.getComputedStyle(el);\n  return stl ? style ? stl[style] : stl : null;\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isString, indexOf, each, bind, isArray, isDom } from 'zrender/lib/core/util';\nimport { toHex } from 'zrender/lib/tool/color';\nimport { normalizeEvent } from 'zrender/lib/core/event';\nimport { transformLocalCoord } from 'zrender/lib/core/dom';\nimport env from 'zrender/lib/core/env';\nimport { convertToColorString, toCamelCase, normalizeCssArray } from '../../util/format';\nimport { shouldTooltipConfine, toCSSVendorPrefix, getComputedStyle, TRANSFORM_VENDOR, TRANSITION_VENDOR } from './helper';\nimport { getPaddingFromTooltipModel } from './tooltipMarkup';\n/* global document, window */\n\nvar CSS_TRANSITION_VENDOR = toCSSVendorPrefix(TRANSITION_VENDOR, 'transition');\nvar CSS_TRANSFORM_VENDOR = toCSSVendorPrefix(TRANSFORM_VENDOR, 'transform'); // eslint-disable-next-line\n\nvar gCssText = \"position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;\" + (env.transform3dSupported ? 'will-change:transform;' : '');\n\nfunction mirrorPos(pos) {\n  pos = pos === 'left' ? 'right' : pos === 'right' ? 'left' : pos === 'top' ? 'bottom' : 'top';\n  return pos;\n}\n\nfunction assembleArrow(tooltipModel, borderColor, arrowPosition) {\n  if (!isString(arrowPosition) || arrowPosition === 'inside') {\n    return '';\n  }\n\n  var backgroundColor = tooltipModel.get('backgroundColor');\n  var borderWidth = tooltipModel.get('borderWidth');\n  borderColor = convertToColorString(borderColor);\n  var arrowPos = mirrorPos(arrowPosition);\n  var arrowSize = Math.max(Math.round(borderWidth) * 1.5, 6);\n  var positionStyle = '';\n  var transformStyle = CSS_TRANSFORM_VENDOR + ':';\n  var rotateDeg;\n\n  if (indexOf(['left', 'right'], arrowPos) > -1) {\n    positionStyle += 'top:50%';\n    transformStyle += \"translateY(-50%) rotate(\" + (rotateDeg = arrowPos === 'left' ? -225 : -45) + \"deg)\";\n  } else {\n    positionStyle += 'left:50%';\n    transformStyle += \"translateX(-50%) rotate(\" + (rotateDeg = arrowPos === 'top' ? 225 : 45) + \"deg)\";\n  }\n\n  var rotateRadian = rotateDeg * Math.PI / 180;\n  var arrowWH = arrowSize + borderWidth;\n  var rotatedWH = arrowWH * Math.abs(Math.cos(rotateRadian)) + arrowWH * Math.abs(Math.sin(rotateRadian));\n  var arrowOffset = Math.round(((rotatedWH - Math.SQRT2 * borderWidth) / 2 + Math.SQRT2 * borderWidth - (rotatedWH - arrowWH) / 2) * 100) / 100;\n  positionStyle += \";\" + arrowPos + \":-\" + arrowOffset + \"px\";\n  var borderStyle = borderColor + \" solid \" + borderWidth + \"px;\";\n  var styleCss = [\"position:absolute;width:\" + arrowSize + \"px;height:\" + arrowSize + \"px;\", positionStyle + \";\" + transformStyle + \";\", \"border-bottom:\" + borderStyle, \"border-right:\" + borderStyle, \"background-color:\" + backgroundColor + \";\"];\n  return \"<div style=\\\"\" + styleCss.join('') + \"\\\"></div>\";\n}\n\nfunction assembleTransition(duration, onlyFade) {\n  var transitionCurve = 'cubic-bezier(0.23,1,0.32,1)';\n  var transitionOption = \" \" + duration / 2 + \"s \" + transitionCurve;\n  var transitionText = \"opacity\" + transitionOption + \",visibility\" + transitionOption;\n\n  if (!onlyFade) {\n    transitionOption = \" \" + duration + \"s \" + transitionCurve;\n    transitionText += env.transformSupported ? \",\" + CSS_TRANSFORM_VENDOR + transitionOption : \",left\" + transitionOption + \",top\" + transitionOption;\n  }\n\n  return CSS_TRANSITION_VENDOR + ':' + transitionText;\n}\n\nfunction assembleTransform(x, y, toString) {\n  // If using float on style, the final width of the dom might\n  // keep changing slightly while mouse move. So `toFixed(0)` them.\n  var x0 = x.toFixed(0) + 'px';\n  var y0 = y.toFixed(0) + 'px'; // not support transform, use `left` and `top` instead.\n\n  if (!env.transformSupported) {\n    return toString ? \"top:\" + y0 + \";left:\" + x0 + \";\" : [['top', y0], ['left', x0]];\n  } // support transform\n\n\n  var is3d = env.transform3dSupported;\n  var translate = \"translate\" + (is3d ? '3d' : '') + \"(\" + x0 + \",\" + y0 + (is3d ? ',0' : '') + \")\";\n  return toString ? 'top:0;left:0;' + CSS_TRANSFORM_VENDOR + ':' + translate + ';' : [['top', 0], ['left', 0], [TRANSFORM_VENDOR, translate]];\n}\n/**\n * @param {Object} textStyle\n * @return {string}\n * @inner\n */\n\n\nfunction assembleFont(textStyleModel) {\n  var cssText = [];\n  var fontSize = textStyleModel.get('fontSize');\n  var color = textStyleModel.getTextColor();\n  color && cssText.push('color:' + color);\n  cssText.push('font:' + textStyleModel.getFont());\n  fontSize // @ts-ignore, leave it to the tooltip refactor.\n  && cssText.push('line-height:' + Math.round(fontSize * 3 / 2) + 'px');\n  var shadowColor = textStyleModel.get('textShadowColor');\n  var shadowBlur = textStyleModel.get('textShadowBlur') || 0;\n  var shadowOffsetX = textStyleModel.get('textShadowOffsetX') || 0;\n  var shadowOffsetY = textStyleModel.get('textShadowOffsetY') || 0;\n  shadowColor && shadowBlur && cssText.push('text-shadow:' + shadowOffsetX + 'px ' + shadowOffsetY + 'px ' + shadowBlur + 'px ' + shadowColor);\n  each(['decoration', 'align'], function (name) {\n    var val = textStyleModel.get(name);\n    val && cssText.push('text-' + name + ':' + val);\n  });\n  return cssText.join(';');\n}\n\nfunction assembleCssText(tooltipModel, enableTransition, onlyFade) {\n  var cssText = [];\n  var transitionDuration = tooltipModel.get('transitionDuration');\n  var backgroundColor = tooltipModel.get('backgroundColor');\n  var shadowBlur = tooltipModel.get('shadowBlur');\n  var shadowColor = tooltipModel.get('shadowColor');\n  var shadowOffsetX = tooltipModel.get('shadowOffsetX');\n  var shadowOffsetY = tooltipModel.get('shadowOffsetY');\n  var textStyleModel = tooltipModel.getModel('textStyle');\n  var padding = getPaddingFromTooltipModel(tooltipModel, 'html');\n  var boxShadow = shadowOffsetX + \"px \" + shadowOffsetY + \"px \" + shadowBlur + \"px \" + shadowColor;\n  cssText.push('box-shadow:' + boxShadow); // Animation transition. Do not animate when transitionDuration is 0.\n\n  enableTransition && transitionDuration && cssText.push(assembleTransition(transitionDuration, onlyFade));\n\n  if (backgroundColor) {\n    if (env.canvasSupported) {\n      cssText.push('background-color:' + backgroundColor);\n    } else {\n      // for ie\n      cssText.push('background-color:#' + toHex(backgroundColor));\n      cssText.push('filter:alpha(opacity=70)');\n    }\n  } // Border style\n\n\n  each(['width', 'color', 'radius'], function (name) {\n    var borderName = 'border-' + name;\n    var camelCase = toCamelCase(borderName);\n    var val = tooltipModel.get(camelCase);\n    val != null && cssText.push(borderName + ':' + val + (name === 'color' ? '' : 'px'));\n  }); // Text style\n\n  cssText.push(assembleFont(textStyleModel)); // Padding\n\n  if (padding != null) {\n    cssText.push('padding:' + normalizeCssArray(padding).join('px ') + 'px');\n  }\n\n  return cssText.join(';') + ';';\n} // If not able to make, do not modify the input `out`.\n\n\nfunction makeStyleCoord(out, zr, appendToBody, zrX, zrY) {\n  var zrPainter = zr && zr.painter;\n\n  if (appendToBody) {\n    var zrViewportRoot = zrPainter && zrPainter.getViewportRoot();\n\n    if (zrViewportRoot) {\n      // Some APPs might use scale on body, so we support CSS transform here.\n      transformLocalCoord(out, zrViewportRoot, document.body, zrX, zrY);\n    }\n  } else {\n    out[0] = zrX;\n    out[1] = zrY; // xy should be based on canvas root. But tooltipContent is\n    // the sibling of canvas root. So padding of ec container\n    // should be considered here.\n\n    var viewportRootOffset = zrPainter && zrPainter.getViewportRootOffset();\n\n    if (viewportRootOffset) {\n      out[0] += viewportRootOffset.offsetLeft;\n      out[1] += viewportRootOffset.offsetTop;\n    }\n  }\n\n  out[2] = out[0] / zr.getWidth();\n  out[3] = out[1] / zr.getHeight();\n}\n\nvar TooltipHTMLContent =\n/** @class */\nfunction () {\n  function TooltipHTMLContent(container, api, opt) {\n    this._show = false;\n    this._styleCoord = [0, 0, 0, 0];\n    this._enterable = true;\n    this._firstShow = true;\n    this._longHide = true;\n\n    if (env.wxa) {\n      return null;\n    }\n\n    var el = document.createElement('div'); // TODO: TYPE\n\n    el.domBelongToZr = true;\n    this.el = el;\n    var zr = this._zr = api.getZr();\n    var appendToBody = this._appendToBody = opt && opt.appendToBody;\n    makeStyleCoord(this._styleCoord, zr, appendToBody, api.getWidth() / 2, api.getHeight() / 2);\n\n    if (appendToBody) {\n      document.body.appendChild(el);\n    } else {\n      container.appendChild(el);\n    }\n\n    this._container = container; // FIXME\n    // Is it needed to trigger zr event manually if\n    // the browser do not support `pointer-events: none`.\n\n    var self = this;\n\n    el.onmouseenter = function () {\n      // clear the timeout in hideLater and keep showing tooltip\n      if (self._enterable) {\n        clearTimeout(self._hideTimeout);\n        self._show = true;\n      }\n\n      self._inContent = true;\n    };\n\n    el.onmousemove = function (e) {\n      e = e || window.event;\n\n      if (!self._enterable) {\n        // `pointer-events: none` is set to tooltip content div\n        // if `enterable` is set as `false`, and `el.onmousemove`\n        // can not be triggered. But in browser that do not\n        // support `pointer-events`, we need to do this:\n        // Try trigger zrender event to avoid mouse\n        // in and out shape too frequently\n        var handler = zr.handler;\n        var zrViewportRoot = zr.painter.getViewportRoot();\n        normalizeEvent(zrViewportRoot, e, true);\n        handler.dispatch('mousemove', e);\n      }\n    };\n\n    el.onmouseleave = function () {\n      // set `_inContent` to `false` before `hideLater`\n      self._inContent = false;\n\n      if (self._enterable) {\n        if (self._show) {\n          self.hideLater(self._hideDelay);\n        }\n      }\n    };\n  }\n  /**\n   * Update when tooltip is rendered\n   */\n\n\n  TooltipHTMLContent.prototype.update = function (tooltipModel) {\n    // FIXME\n    // Move this logic to ec main?\n    var container = this._container;\n    var position = getComputedStyle(container, 'position');\n    var domStyle = container.style;\n\n    if (domStyle.position !== 'absolute' && position !== 'absolute') {\n      domStyle.position = 'relative';\n    } // move tooltip if chart resized\n\n\n    var alwaysShowContent = tooltipModel.get('alwaysShowContent');\n    alwaysShowContent && this._moveIfResized(); // update className\n\n    this.el.className = tooltipModel.get('className') || ''; // Hide the tooltip\n    // PENDING\n    // this.hide();\n  };\n\n  TooltipHTMLContent.prototype.show = function (tooltipModel, nearPointColor) {\n    clearTimeout(this._hideTimeout);\n    clearTimeout(this._longHideTimeout);\n    var el = this.el;\n    var style = el.style;\n    var styleCoord = this._styleCoord;\n\n    if (!el.innerHTML) {\n      style.display = 'none';\n    } else {\n      style.cssText = gCssText + assembleCssText(tooltipModel, !this._firstShow, this._longHide) // initial transform\n      + assembleTransform(styleCoord[0], styleCoord[1], true) + (\"border-color:\" + convertToColorString(nearPointColor) + \";\") + (tooltipModel.get('extraCssText') || '') // If mouse occasionally move over the tooltip, a mouseout event will be\n      // triggered by canvas, and cause some unexpectable result like dragging\n      // stop, \"unfocusAdjacency\". Here `pointer-events: none` is used to solve\n      // it. Although it is not supported by IE8~IE10, fortunately it is a rare\n      // scenario.\n      + (\";pointer-events:\" + (this._enterable ? 'auto' : 'none'));\n    }\n\n    this._show = true;\n    this._firstShow = false;\n    this._longHide = false;\n  };\n\n  TooltipHTMLContent.prototype.setContent = function (content, markers, tooltipModel, borderColor, arrowPosition) {\n    var el = this.el;\n\n    if (content == null) {\n      el.innerHTML = '';\n      return;\n    }\n\n    var arrow = '';\n\n    if (isString(arrowPosition) && tooltipModel.get('trigger') === 'item' && !shouldTooltipConfine(tooltipModel)) {\n      arrow = assembleArrow(tooltipModel, borderColor, arrowPosition);\n    }\n\n    if (isString(content)) {\n      el.innerHTML = content + arrow;\n    } else if (content) {\n      // Clear previous\n      el.innerHTML = '';\n\n      if (!isArray(content)) {\n        content = [content];\n      }\n\n      for (var i = 0; i < content.length; i++) {\n        if (isDom(content[i]) && content[i].parentNode !== el) {\n          el.appendChild(content[i]);\n        }\n      } // no arrow if empty\n\n\n      if (arrow && el.childNodes.length) {\n        // no need to create a new parent element, but it's not supported by IE 10 and older.\n        // const arrowEl = document.createRange().createContextualFragment(arrow);\n        var arrowEl = document.createElement('div');\n        arrowEl.innerHTML = arrow;\n        el.appendChild(arrowEl);\n      }\n    }\n  };\n\n  TooltipHTMLContent.prototype.setEnterable = function (enterable) {\n    this._enterable = enterable;\n  };\n\n  TooltipHTMLContent.prototype.getSize = function () {\n    var el = this.el;\n    return [el.offsetWidth, el.offsetHeight];\n  };\n\n  TooltipHTMLContent.prototype.moveTo = function (zrX, zrY) {\n    var styleCoord = this._styleCoord;\n    makeStyleCoord(styleCoord, this._zr, this._appendToBody, zrX, zrY);\n\n    if (styleCoord[0] != null && styleCoord[1] != null) {\n      var style_1 = this.el.style;\n      var transforms = assembleTransform(styleCoord[0], styleCoord[1]);\n      each(transforms, function (transform) {\n        style_1[transform[0]] = transform[1];\n      });\n    }\n  };\n  /**\n   * when `alwaysShowContent` is true,\n   * move the tooltip after chart resized\n   */\n\n\n  TooltipHTMLContent.prototype._moveIfResized = function () {\n    // The ratio of left to width\n    var ratioX = this._styleCoord[2]; // The ratio of top to height\n\n    var ratioY = this._styleCoord[3];\n    this.moveTo(ratioX * this._zr.getWidth(), ratioY * this._zr.getHeight());\n  };\n\n  TooltipHTMLContent.prototype.hide = function () {\n    var _this = this;\n\n    var style = this.el.style;\n    style.visibility = 'hidden';\n    style.opacity = '0';\n    env.transform3dSupported && (style.willChange = '');\n    this._show = false;\n    this._longHideTimeout = setTimeout(function () {\n      return _this._longHide = true;\n    }, 500);\n  };\n\n  TooltipHTMLContent.prototype.hideLater = function (time) {\n    if (this._show && !(this._inContent && this._enterable)) {\n      if (time) {\n        this._hideDelay = time; // Set show false to avoid invoke hideLater multiple times\n\n        this._show = false;\n        this._hideTimeout = setTimeout(bind(this.hide, this), time);\n      } else {\n        this.hide();\n      }\n    }\n  };\n\n  TooltipHTMLContent.prototype.isShow = function () {\n    return this._show;\n  };\n\n  TooltipHTMLContent.prototype.dispose = function () {\n    this.el.parentNode.removeChild(this.el);\n  };\n\n  return TooltipHTMLContent;\n}();\n\nexport default TooltipHTMLContent;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport ZRText from 'zrender/lib/graphic/Text';\nimport { getPaddingFromTooltipModel } from './tooltipMarkup';\nimport { throwError } from '../../util/log';\n\nvar TooltipRichContent =\n/** @class */\nfunction () {\n  function TooltipRichContent(api) {\n    this._show = false;\n    this._styleCoord = [0, 0, 0, 0];\n    this._enterable = true;\n    this._zr = api.getZr();\n    makeStyleCoord(this._styleCoord, this._zr, api.getWidth() / 2, api.getHeight() / 2);\n  }\n  /**\n   * Update when tooltip is rendered\n   */\n\n\n  TooltipRichContent.prototype.update = function (tooltipModel) {\n    var alwaysShowContent = tooltipModel.get('alwaysShowContent');\n    alwaysShowContent && this._moveIfResized();\n  };\n\n  TooltipRichContent.prototype.show = function () {\n    if (this._hideTimeout) {\n      clearTimeout(this._hideTimeout);\n    }\n\n    this.el.show();\n    this._show = true;\n  };\n  /**\n   * Set tooltip content\n   */\n\n\n  TooltipRichContent.prototype.setContent = function (content, markupStyleCreator, tooltipModel, borderColor, arrowPosition) {\n    if (zrUtil.isObject(content)) {\n      throwError(process.env.NODE_ENV !== 'production' ? 'Passing DOM nodes as content is not supported in richText tooltip!' : '');\n    }\n\n    if (this.el) {\n      this._zr.remove(this.el);\n    }\n\n    var textStyleModel = tooltipModel.getModel('textStyle');\n    this.el = new ZRText({\n      style: {\n        rich: markupStyleCreator.richTextStyles,\n        text: content,\n        lineHeight: 22,\n        backgroundColor: tooltipModel.get('backgroundColor'),\n        borderRadius: tooltipModel.get('borderRadius'),\n        borderWidth: 1,\n        borderColor: borderColor,\n        shadowColor: tooltipModel.get('shadowColor'),\n        shadowBlur: tooltipModel.get('shadowBlur'),\n        shadowOffsetX: tooltipModel.get('shadowOffsetX'),\n        shadowOffsetY: tooltipModel.get('shadowOffsetY'),\n        textShadowColor: textStyleModel.get('textShadowColor'),\n        textShadowBlur: textStyleModel.get('textShadowBlur') || 0,\n        textShadowOffsetX: textStyleModel.get('textShadowOffsetX') || 0,\n        textShadowOffsetY: textStyleModel.get('textShadowOffsetY') || 0,\n        fill: tooltipModel.get(['textStyle', 'color']),\n        padding: getPaddingFromTooltipModel(tooltipModel, 'richText'),\n        verticalAlign: 'top',\n        align: 'left'\n      },\n      z: tooltipModel.get('z')\n    });\n\n    this._zr.add(this.el);\n\n    var self = this;\n    this.el.on('mouseover', function () {\n      // clear the timeout in hideLater and keep showing tooltip\n      if (self._enterable) {\n        clearTimeout(self._hideTimeout);\n        self._show = true;\n      }\n\n      self._inContent = true;\n    });\n    this.el.on('mouseout', function () {\n      if (self._enterable) {\n        if (self._show) {\n          self.hideLater(self._hideDelay);\n        }\n      }\n\n      self._inContent = false;\n    });\n  };\n\n  TooltipRichContent.prototype.setEnterable = function (enterable) {\n    this._enterable = enterable;\n  };\n\n  TooltipRichContent.prototype.getSize = function () {\n    var el = this.el;\n    var bounding = this.el.getBoundingRect(); // bounding rect does not include shadow. For renderMode richText,\n    // if overflow, it will be cut. So calculate them accurately.\n\n    var shadowOuterSize = calcShadowOuterSize(el.style);\n    return [bounding.width + shadowOuterSize.left + shadowOuterSize.right, bounding.height + shadowOuterSize.top + shadowOuterSize.bottom];\n  };\n\n  TooltipRichContent.prototype.moveTo = function (x, y) {\n    var el = this.el;\n\n    if (el) {\n      var styleCoord = this._styleCoord;\n      makeStyleCoord(styleCoord, this._zr, x, y);\n      x = styleCoord[0];\n      y = styleCoord[1];\n      var style = el.style;\n      var borderWidth = mathMaxWith0(style.borderWidth || 0);\n      var shadowOuterSize = calcShadowOuterSize(style); // rich text x, y do not include border.\n\n      el.x = x + borderWidth + shadowOuterSize.left;\n      el.y = y + borderWidth + shadowOuterSize.top;\n      el.markRedraw();\n    }\n  };\n  /**\n   * when `alwaysShowContent` is true,\n   * move the tooltip after chart resized\n   */\n\n\n  TooltipRichContent.prototype._moveIfResized = function () {\n    // The ratio of left to width\n    var ratioX = this._styleCoord[2]; // The ratio of top to height\n\n    var ratioY = this._styleCoord[3];\n    this.moveTo(ratioX * this._zr.getWidth(), ratioY * this._zr.getHeight());\n  };\n\n  TooltipRichContent.prototype.hide = function () {\n    if (this.el) {\n      this.el.hide();\n    }\n\n    this._show = false;\n  };\n\n  TooltipRichContent.prototype.hideLater = function (time) {\n    if (this._show && !(this._inContent && this._enterable)) {\n      if (time) {\n        this._hideDelay = time; // Set show false to avoid invoke hideLater multiple times\n\n        this._show = false;\n        this._hideTimeout = setTimeout(zrUtil.bind(this.hide, this), time);\n      } else {\n        this.hide();\n      }\n    }\n  };\n\n  TooltipRichContent.prototype.isShow = function () {\n    return this._show;\n  };\n\n  TooltipRichContent.prototype.dispose = function () {\n    this._zr.remove(this.el);\n  };\n\n  return TooltipRichContent;\n}();\n\nfunction mathMaxWith0(val) {\n  return Math.max(0, val);\n}\n\nfunction calcShadowOuterSize(style) {\n  var shadowBlur = mathMaxWith0(style.shadowBlur || 0);\n  var shadowOffsetX = mathMaxWith0(style.shadowOffsetX || 0);\n  var shadowOffsetY = mathMaxWith0(style.shadowOffsetY || 0);\n  return {\n    left: mathMaxWith0(shadowBlur - shadowOffsetX),\n    right: mathMaxWith0(shadowBlur + shadowOffsetX),\n    top: mathMaxWith0(shadowBlur - shadowOffsetY),\n    bottom: mathMaxWith0(shadowBlur + shadowOffsetY)\n  };\n}\n\nfunction makeStyleCoord(out, zr, zrX, zrY) {\n  out[0] = zrX;\n  out[1] = zrY;\n  out[2] = out[0] / zr.getWidth();\n  out[3] = out[1] / zr.getHeight();\n}\n\nexport default TooltipRichContent;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\nimport { __extends } from \"tslib\";\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nimport * as zrUtil from 'zrender/lib/core/util';\nimport env from 'zrender/lib/core/env';\nimport TooltipHTMLContent from './TooltipHTMLContent';\nimport TooltipRichContent from './TooltipRichContent';\nimport * as formatUtil from '../../util/format';\nimport * as numberUtil from '../../util/number';\nimport * as graphic from '../../util/graphic';\nimport findPointFromSeries from '../axisPointer/findPointFromSeries';\nimport * as layoutUtil from '../../util/layout';\nimport Model from '../../model/Model';\nimport * as globalListener from '../axisPointer/globalListener';\nimport * as axisHelper from '../../coord/axisHelper';\nimport * as axisPointerViewHelper from '../axisPointer/viewHelper';\nimport { getTooltipRenderMode, preParseFinder, queryReferringComponents } from '../../util/model';\nimport ComponentView from '../../view/Component';\nimport { format as timeFormat } from '../../util/time'; // import { isDimensionStacked } from '../../data/helper/dataStackHelper';\n\nimport { getECData } from '../../util/innerStore';\nimport { shouldTooltipConfine } from './helper';\nimport { normalizeTooltipFormatResult } from '../../model/mixin/dataFormat';\nimport { createTooltipMarkup, buildTooltipMarkup, TooltipMarkupStyleCreator } from './tooltipMarkup';\nimport { findEventDispatcher } from '../../util/event';\nimport { throttle } from '../../util/throttle';\nvar bind = zrUtil.bind;\nvar each = zrUtil.each;\nvar parsePercent = numberUtil.parsePercent;\nvar proxyRect = new graphic.Rect({\n  shape: {\n    x: -1,\n    y: -1,\n    width: 2,\n    height: 2\n  }\n});\n\nvar TooltipView =\n/** @class */\nfunction (_super) {\n  __extends(TooltipView, _super);\n\n  function TooltipView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = TooltipView.type;\n    return _this;\n  }\n\n  TooltipView.prototype.init = function (ecModel, api) {\n    if (env.node) {\n      return;\n    }\n\n    var tooltipModel = ecModel.getComponent('tooltip');\n    var renderMode = tooltipModel.get('renderMode');\n    this._renderMode = getTooltipRenderMode(renderMode);\n    this._tooltipContent = this._renderMode === 'richText' ? new TooltipRichContent(api) : new TooltipHTMLContent(api.getDom(), api, {\n      appendToBody: tooltipModel.get('appendToBody', true)\n    });\n  };\n\n  TooltipView.prototype.render = function (tooltipModel, ecModel, api) {\n    if (env.node) {\n      return;\n    } // Reset\n\n\n    this.group.removeAll();\n    this._tooltipModel = tooltipModel;\n    this._ecModel = ecModel;\n    this._api = api;\n    /**\n     * @private\n     * @type {boolean}\n     */\n\n    this._alwaysShowContent = tooltipModel.get('alwaysShowContent');\n    var tooltipContent = this._tooltipContent;\n    tooltipContent.update(tooltipModel);\n    tooltipContent.setEnterable(tooltipModel.get('enterable'));\n\n    this._initGlobalListener();\n\n    this._keepShow(); // PENDING\n    // `mousemove` event will be triggered very frequently when the mouse moves fast,\n    // which causes that the updatePosition was also called very frequently.\n    // In Chrome with devtools open and Firefox, tooltip looks lagged and shaked around. See #14695.\n    // To avoid the frequent triggering,\n    // consider throttling it in 50ms. (the tested result may need to validate)\n\n\n    this._updatePosition = this._renderMode === 'html' ? throttle(bind(this._doUpdatePosition, this), 50) : this._doUpdatePosition;\n  };\n\n  TooltipView.prototype._initGlobalListener = function () {\n    var tooltipModel = this._tooltipModel;\n    var triggerOn = tooltipModel.get('triggerOn');\n    globalListener.register('itemTooltip', this._api, bind(function (currTrigger, e, dispatchAction) {\n      // If 'none', it is not controlled by mouse totally.\n      if (triggerOn !== 'none') {\n        if (triggerOn.indexOf(currTrigger) >= 0) {\n          this._tryShow(e, dispatchAction);\n        } else if (currTrigger === 'leave') {\n          this._hide(dispatchAction);\n        }\n      }\n    }, this));\n  };\n\n  TooltipView.prototype._keepShow = function () {\n    var tooltipModel = this._tooltipModel;\n    var ecModel = this._ecModel;\n    var api = this._api; // Try to keep the tooltip show when refreshing\n\n    if (this._lastX != null && this._lastY != null // When user is willing to control tooltip totally using API,\n    // self.manuallyShowTip({x, y}) might cause tooltip hide,\n    // which is not expected.\n    && tooltipModel.get('triggerOn') !== 'none') {\n      var self_1 = this;\n      clearTimeout(this._refreshUpdateTimeout);\n      this._refreshUpdateTimeout = setTimeout(function () {\n        // Show tip next tick after other charts are rendered\n        // In case highlight action has wrong result\n        // FIXME\n        !api.isDisposed() && self_1.manuallyShowTip(tooltipModel, ecModel, api, {\n          x: self_1._lastX,\n          y: self_1._lastY,\n          dataByCoordSys: self_1._lastDataByCoordSys\n        });\n      });\n    }\n  };\n  /**\n   * Show tip manually by\n   * dispatchAction({\n   *     type: 'showTip',\n   *     x: 10,\n   *     y: 10\n   * });\n   * Or\n   * dispatchAction({\n   *      type: 'showTip',\n   *      seriesIndex: 0,\n   *      dataIndex or dataIndexInside or name\n   * });\n   *\n   *  TODO Batch\n   */\n\n\n  TooltipView.prototype.manuallyShowTip = function (tooltipModel, ecModel, api, payload) {\n    if (payload.from === this.uid || env.node) {\n      return;\n    }\n\n    var dispatchAction = makeDispatchAction(payload, api); // Reset ticket\n\n    this._ticket = ''; // When triggered from axisPointer.\n\n    var dataByCoordSys = payload.dataByCoordSys;\n    var cmptRef = findComponentReference(payload, ecModel, api);\n\n    if (cmptRef) {\n      var rect = cmptRef.el.getBoundingRect().clone();\n      rect.applyTransform(cmptRef.el.transform);\n\n      this._tryShow({\n        offsetX: rect.x + rect.width / 2,\n        offsetY: rect.y + rect.height / 2,\n        target: cmptRef.el,\n        position: payload.position,\n        // When manully trigger, the mouse is not on the el, so we'd better to\n        // position tooltip on the bottom of the el and display arrow is possible.\n        positionDefault: 'bottom'\n      }, dispatchAction);\n    } else if (payload.tooltip && payload.x != null && payload.y != null) {\n      var el = proxyRect;\n      el.x = payload.x;\n      el.y = payload.y;\n      el.update();\n      getECData(el).tooltipConfig = {\n        name: null,\n        option: payload.tooltip\n      }; // Manually show tooltip while view is not using zrender elements.\n\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        target: el\n      }, dispatchAction);\n    } else if (dataByCoordSys) {\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        position: payload.position,\n        dataByCoordSys: dataByCoordSys,\n        tooltipOption: payload.tooltipOption\n      }, dispatchAction);\n    } else if (payload.seriesIndex != null) {\n      if (this._manuallyAxisShowTip(tooltipModel, ecModel, api, payload)) {\n        return;\n      }\n\n      var pointInfo = findPointFromSeries(payload, ecModel);\n      var cx = pointInfo.point[0];\n      var cy = pointInfo.point[1];\n\n      if (cx != null && cy != null) {\n        this._tryShow({\n          offsetX: cx,\n          offsetY: cy,\n          target: pointInfo.el,\n          position: payload.position,\n          // When manully trigger, the mouse is not on the el, so we'd better to\n          // position tooltip on the bottom of the el and display arrow is possible.\n          positionDefault: 'bottom'\n        }, dispatchAction);\n      }\n    } else if (payload.x != null && payload.y != null) {\n      // FIXME\n      // should wrap dispatchAction like `axisPointer/globalListener` ?\n      api.dispatchAction({\n        type: 'updateAxisPointer',\n        x: payload.x,\n        y: payload.y\n      });\n\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        position: payload.position,\n        target: api.getZr().findHover(payload.x, payload.y).target\n      }, dispatchAction);\n    }\n  };\n\n  TooltipView.prototype.manuallyHideTip = function (tooltipModel, ecModel, api, payload) {\n    var tooltipContent = this._tooltipContent;\n\n    if (!this._alwaysShowContent && this._tooltipModel) {\n      tooltipContent.hideLater(this._tooltipModel.get('hideDelay'));\n    }\n\n    this._lastX = this._lastY = this._lastDataByCoordSys = null;\n\n    if (payload.from !== this.uid) {\n      this._hide(makeDispatchAction(payload, api));\n    }\n  }; // Be compatible with previous design, that is, when tooltip.type is 'axis' and\n  // dispatchAction 'showTip' with seriesIndex and dataIndex will trigger axis pointer\n  // and tooltip.\n\n\n  TooltipView.prototype._manuallyAxisShowTip = function (tooltipModel, ecModel, api, payload) {\n    var seriesIndex = payload.seriesIndex;\n    var dataIndex = payload.dataIndex; // @ts-ignore\n\n    var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo;\n\n    if (seriesIndex == null || dataIndex == null || coordSysAxesInfo == null) {\n      return;\n    }\n\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\n\n    if (!seriesModel) {\n      return;\n    }\n\n    var data = seriesModel.getData();\n    var tooltipCascadedModel = buildTooltipModel([data.getItemModel(dataIndex), seriesModel, (seriesModel.coordinateSystem || {}).model], this._tooltipModel);\n\n    if (tooltipCascadedModel.get('trigger') !== 'axis') {\n      return;\n    }\n\n    api.dispatchAction({\n      type: 'updateAxisPointer',\n      seriesIndex: seriesIndex,\n      dataIndex: dataIndex,\n      position: payload.position\n    });\n    return true;\n  };\n\n  TooltipView.prototype._tryShow = function (e, dispatchAction) {\n    var el = e.target;\n    var tooltipModel = this._tooltipModel;\n\n    if (!tooltipModel) {\n      return;\n    } // Save mouse x, mouse y. So we can try to keep showing the tip if chart is refreshed\n\n\n    this._lastX = e.offsetX;\n    this._lastY = e.offsetY;\n    var dataByCoordSys = e.dataByCoordSys;\n\n    if (dataByCoordSys && dataByCoordSys.length) {\n      this._showAxisTooltip(dataByCoordSys, e);\n    } else if (el) {\n      this._lastDataByCoordSys = null;\n      var seriesDispatcher_1;\n      var cmptDispatcher_1;\n      findEventDispatcher(el, function (target) {\n        // Always show item tooltip if mouse is on the element with dataIndex\n        if (getECData(target).dataIndex != null) {\n          seriesDispatcher_1 = target;\n          return true;\n        } // Tooltip provided directly. Like legend.\n\n\n        if (getECData(target).tooltipConfig != null) {\n          cmptDispatcher_1 = target;\n          return true;\n        }\n      }, true);\n\n      if (seriesDispatcher_1) {\n        this._showSeriesItemTooltip(e, seriesDispatcher_1, dispatchAction);\n      } else if (cmptDispatcher_1) {\n        this._showComponentItemTooltip(e, cmptDispatcher_1, dispatchAction);\n      } else {\n        this._hide(dispatchAction);\n      }\n    } else {\n      this._lastDataByCoordSys = null;\n\n      this._hide(dispatchAction);\n    }\n  };\n\n  TooltipView.prototype._showOrMove = function (tooltipModel, cb) {\n    // showDelay is used in this case: tooltip.enterable is set\n    // as true. User intent to move mouse into tooltip and click\n    // something. `showDelay` makes it easier to enter the content\n    // but tooltip do not move immediately.\n    var delay = tooltipModel.get('showDelay');\n    cb = zrUtil.bind(cb, this);\n    clearTimeout(this._showTimout);\n    delay > 0 ? this._showTimout = setTimeout(cb, delay) : cb();\n  };\n\n  TooltipView.prototype._showAxisTooltip = function (dataByCoordSys, e) {\n    var ecModel = this._ecModel;\n    var globalTooltipModel = this._tooltipModel;\n    var point = [e.offsetX, e.offsetY];\n    var singleTooltipModel = buildTooltipModel([e.tooltipOption], globalTooltipModel);\n    var renderMode = this._renderMode;\n    var cbParamsList = [];\n    var articleMarkup = createTooltipMarkup('section', {\n      blocks: [],\n      noHeader: true\n    }); // Only for legacy: `Serise['formatTooltip']` returns a string.\n\n    var markupTextArrLegacy = [];\n    var markupStyleCreator = new TooltipMarkupStyleCreator();\n    each(dataByCoordSys, function (itemCoordSys) {\n      each(itemCoordSys.dataByAxis, function (axisItem) {\n        var axisModel = ecModel.getComponent(axisItem.axisDim + 'Axis', axisItem.axisIndex);\n        var axisValue = axisItem.value;\n\n        if (!axisModel || axisValue == null) {\n          return;\n        }\n\n        var axisValueLabel = axisPointerViewHelper.getValueLabel(axisValue, axisModel.axis, ecModel, axisItem.seriesDataIndices, axisItem.valueLabelOpt);\n        var axisSectionMarkup = createTooltipMarkup('section', {\n          header: axisValueLabel,\n          noHeader: !zrUtil.trim(axisValueLabel),\n          sortBlocks: true,\n          blocks: []\n        });\n        articleMarkup.blocks.push(axisSectionMarkup);\n        zrUtil.each(axisItem.seriesDataIndices, function (idxItem) {\n          var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\n          var dataIndex = idxItem.dataIndexInside;\n          var cbParams = series.getDataParams(dataIndex); // Can't find data.\n\n          if (cbParams.dataIndex < 0) {\n            return;\n          }\n\n          cbParams.axisDim = axisItem.axisDim;\n          cbParams.axisIndex = axisItem.axisIndex;\n          cbParams.axisType = axisItem.axisType;\n          cbParams.axisId = axisItem.axisId;\n          cbParams.axisValue = axisHelper.getAxisRawValue(axisModel.axis, {\n            value: axisValue\n          });\n          cbParams.axisValueLabel = axisValueLabel; // Pre-create marker style for makers. Users can assemble richText\n          // text in `formatter` callback and use those markers style.\n\n          cbParams.marker = markupStyleCreator.makeTooltipMarker('item', formatUtil.convertToColorString(cbParams.color), renderMode);\n          var seriesTooltipResult = normalizeTooltipFormatResult(series.formatTooltip(dataIndex, true, null));\n\n          if (seriesTooltipResult.markupFragment) {\n            axisSectionMarkup.blocks.push(seriesTooltipResult.markupFragment);\n          }\n\n          if (seriesTooltipResult.markupText) {\n            markupTextArrLegacy.push(seriesTooltipResult.markupText);\n          }\n\n          cbParamsList.push(cbParams);\n        });\n      });\n    }); // In most cases, the second axis is displays upper on the first one.\n    // So we reverse it to look better.\n\n    articleMarkup.blocks.reverse();\n    markupTextArrLegacy.reverse();\n    var positionExpr = e.position;\n    var orderMode = singleTooltipModel.get('order');\n    var builtMarkupText = buildTooltipMarkup(articleMarkup, markupStyleCreator, renderMode, orderMode, ecModel.get('useUTC'), singleTooltipModel.get('textStyle'));\n    builtMarkupText && markupTextArrLegacy.unshift(builtMarkupText);\n    var blockBreak = renderMode === 'richText' ? '\\n\\n' : '<br/>';\n    var allMarkupText = markupTextArrLegacy.join(blockBreak);\n\n    this._showOrMove(singleTooltipModel, function () {\n      if (this._updateContentNotChangedOnAxis(dataByCoordSys, cbParamsList)) {\n        this._updatePosition(singleTooltipModel, positionExpr, point[0], point[1], this._tooltipContent, cbParamsList);\n      } else {\n        this._showTooltipContent(singleTooltipModel, allMarkupText, cbParamsList, Math.random() + '', point[0], point[1], positionExpr, null, markupStyleCreator);\n      }\n    }); // Do not trigger events here, because this branch only be entered\n    // from dispatchAction.\n\n  };\n\n  TooltipView.prototype._showSeriesItemTooltip = function (e, dispatcher, dispatchAction) {\n    var ecModel = this._ecModel;\n    var ecData = getECData(dispatcher); // Use dataModel in element if possible\n    // Used when mouseover on a element like markPoint or edge\n    // In which case, the data is not main data in series.\n\n    var seriesIndex = ecData.seriesIndex;\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex); // For example, graph link.\n\n    var dataModel = ecData.dataModel || seriesModel;\n    var dataIndex = ecData.dataIndex;\n    var dataType = ecData.dataType;\n    var data = dataModel.getData(dataType);\n    var renderMode = this._renderMode;\n    var positionDefault = e.positionDefault;\n    var tooltipModel = buildTooltipModel([data.getItemModel(dataIndex), dataModel, seriesModel && (seriesModel.coordinateSystem || {}).model], this._tooltipModel, positionDefault ? {\n      position: positionDefault\n    } : null);\n    var tooltipTrigger = tooltipModel.get('trigger');\n\n    if (tooltipTrigger != null && tooltipTrigger !== 'item') {\n      return;\n    }\n\n    var params = dataModel.getDataParams(dataIndex, dataType);\n    var markupStyleCreator = new TooltipMarkupStyleCreator(); // Pre-create marker style for makers. Users can assemble richText\n    // text in `formatter` callback and use those markers style.\n\n    params.marker = markupStyleCreator.makeTooltipMarker('item', formatUtil.convertToColorString(params.color), renderMode);\n    var seriesTooltipResult = normalizeTooltipFormatResult(dataModel.formatTooltip(dataIndex, false, dataType));\n    var orderMode = tooltipModel.get('order');\n    var markupText = seriesTooltipResult.markupFragment ? buildTooltipMarkup(seriesTooltipResult.markupFragment, markupStyleCreator, renderMode, orderMode, ecModel.get('useUTC'), tooltipModel.get('textStyle')) : seriesTooltipResult.markupText;\n    var asyncTicket = 'item_' + dataModel.name + '_' + dataIndex;\n\n    this._showOrMove(tooltipModel, function () {\n      this._showTooltipContent(tooltipModel, markupText, params, asyncTicket, e.offsetX, e.offsetY, e.position, e.target, markupStyleCreator);\n    }); // FIXME\n    // duplicated showtip if manuallyShowTip is called from dispatchAction.\n\n\n    dispatchAction({\n      type: 'showTip',\n      dataIndexInside: dataIndex,\n      dataIndex: data.getRawIndex(dataIndex),\n      seriesIndex: seriesIndex,\n      from: this.uid\n    });\n  };\n\n  TooltipView.prototype._showComponentItemTooltip = function (e, el, dispatchAction) {\n    var ecData = getECData(el);\n    var tooltipConfig = ecData.tooltipConfig;\n    var tooltipOpt = tooltipConfig.option || {};\n\n    if (zrUtil.isString(tooltipOpt)) {\n      var content = tooltipOpt;\n      tooltipOpt = {\n        content: content,\n        // Fixed formatter\n        formatter: content\n      };\n    }\n\n    var tooltipModelCascade = [tooltipOpt];\n\n    var cmpt = this._ecModel.getComponent(ecData.componentMainType, ecData.componentIndex);\n\n    if (cmpt) {\n      tooltipModelCascade.push(cmpt);\n    } // In most cases, component tooltip formatter has different params with series tooltip formatter,\n    // so that they can not share the same formatter. Since the global tooltip formatter is used for series\n    // by convension, we do not use it as the default formatter for component.\n\n\n    tooltipModelCascade.push({\n      formatter: tooltipOpt.content\n    });\n    var positionDefault = e.positionDefault;\n    var subTooltipModel = buildTooltipModel(tooltipModelCascade, this._tooltipModel, positionDefault ? {\n      position: positionDefault\n    } : null);\n    var defaultHtml = subTooltipModel.get('content');\n    var asyncTicket = Math.random() + ''; // PENDING: this case do not support richText style yet.\n\n    var markupStyleCreator = new TooltipMarkupStyleCreator(); // Do not check whether `trigger` is 'none' here, because `trigger`\n    // only works on coordinate system. In fact, we have not found case\n    // that requires setting `trigger` nothing on component yet.\n\n    this._showOrMove(subTooltipModel, function () {\n      // Use formatterParams from element defined in component\n      // Avoid users modify it.\n      var formatterParams = zrUtil.clone(subTooltipModel.get('formatterParams') || {});\n\n      this._showTooltipContent(subTooltipModel, defaultHtml, formatterParams, asyncTicket, e.offsetX, e.offsetY, e.position, el, markupStyleCreator);\n    }); // If not dispatch showTip, tip may be hide triggered by axis.\n\n\n    dispatchAction({\n      type: 'showTip',\n      from: this.uid\n    });\n  };\n\n  TooltipView.prototype._showTooltipContent = function ( // Use Model<TooltipOption> insteadof TooltipModel because this model may be from series or other options.\n  // Instead of top level tooltip.\n  tooltipModel, defaultHtml, params, asyncTicket, x, y, positionExpr, el, markupStyleCreator) {\n    // Reset ticket\n    this._ticket = '';\n\n    if (!tooltipModel.get('showContent') || !tooltipModel.get('show')) {\n      return;\n    }\n\n    var tooltipContent = this._tooltipContent;\n    var formatter = tooltipModel.get('formatter');\n    positionExpr = positionExpr || tooltipModel.get('position');\n    var html = defaultHtml;\n\n    var nearPoint = this._getNearestPoint([x, y], params, tooltipModel.get('trigger'), tooltipModel.get('borderColor'));\n\n    var nearPointColor = nearPoint.color;\n\n    if (formatter) {\n      if (zrUtil.isString(formatter)) {\n        var useUTC = tooltipModel.ecModel.get('useUTC');\n        var params0 = zrUtil.isArray(params) ? params[0] : params;\n        var isTimeAxis = params0 && params0.axisType && params0.axisType.indexOf('time') >= 0;\n        html = formatter;\n\n        if (isTimeAxis) {\n          html = timeFormat(params0.axisValue, html, useUTC);\n        }\n\n        html = formatUtil.formatTpl(html, params, true);\n      } else if (zrUtil.isFunction(formatter)) {\n        var callback = bind(function (cbTicket, html) {\n          if (cbTicket === this._ticket) {\n            tooltipContent.setContent(html, markupStyleCreator, tooltipModel, nearPointColor, positionExpr);\n\n            this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n          }\n        }, this);\n        this._ticket = asyncTicket;\n        html = formatter(params, asyncTicket, callback);\n      } else {\n        html = formatter;\n      }\n    }\n\n    tooltipContent.setContent(html, markupStyleCreator, tooltipModel, nearPointColor, positionExpr);\n    tooltipContent.show(tooltipModel, nearPointColor);\n\n    this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n  };\n\n  TooltipView.prototype._getNearestPoint = function (point, tooltipDataParams, trigger, borderColor) {\n    if (trigger === 'axis' || zrUtil.isArray(tooltipDataParams)) {\n      return {\n        color: borderColor || (this._renderMode === 'html' ? '#fff' : 'none')\n      };\n    }\n\n    if (!zrUtil.isArray(tooltipDataParams)) {\n      return {\n        color: borderColor || tooltipDataParams.color || tooltipDataParams.borderColor\n      };\n    }\n  };\n\n  TooltipView.prototype._doUpdatePosition = function (tooltipModel, positionExpr, x, // Mouse x\n  y, // Mouse y\n  content, params, el) {\n    var viewWidth = this._api.getWidth();\n\n    var viewHeight = this._api.getHeight();\n\n    positionExpr = positionExpr || tooltipModel.get('position');\n    var contentSize = content.getSize();\n    var align = tooltipModel.get('align');\n    var vAlign = tooltipModel.get('verticalAlign');\n    var rect = el && el.getBoundingRect().clone();\n    el && rect.applyTransform(el.transform);\n\n    if (zrUtil.isFunction(positionExpr)) {\n      // Callback of position can be an array or a string specify the position\n      positionExpr = positionExpr([x, y], params, content.el, rect, {\n        viewSize: [viewWidth, viewHeight],\n        contentSize: contentSize.slice()\n      });\n    }\n\n    if (zrUtil.isArray(positionExpr)) {\n      x = parsePercent(positionExpr[0], viewWidth);\n      y = parsePercent(positionExpr[1], viewHeight);\n    } else if (zrUtil.isObject(positionExpr)) {\n      var boxLayoutPosition = positionExpr;\n      boxLayoutPosition.width = contentSize[0];\n      boxLayoutPosition.height = contentSize[1];\n      var layoutRect = layoutUtil.getLayoutRect(boxLayoutPosition, {\n        width: viewWidth,\n        height: viewHeight\n      });\n      x = layoutRect.x;\n      y = layoutRect.y;\n      align = null; // When positionExpr is left/top/right/bottom,\n      // align and verticalAlign will not work.\n\n      vAlign = null;\n    } // Specify tooltip position by string 'top' 'bottom' 'left' 'right' around graphic element\n    else if (zrUtil.isString(positionExpr) && el) {\n      var pos = calcTooltipPosition(positionExpr, rect, contentSize, tooltipModel.get('borderWidth'));\n      x = pos[0];\n      y = pos[1];\n    } else {\n      var pos = refixTooltipPosition(x, y, content, viewWidth, viewHeight, align ? null : 20, vAlign ? null : 20);\n      x = pos[0];\n      y = pos[1];\n    }\n\n    align && (x -= isCenterAlign(align) ? contentSize[0] / 2 : align === 'right' ? contentSize[0] : 0);\n    vAlign && (y -= isCenterAlign(vAlign) ? contentSize[1] / 2 : vAlign === 'bottom' ? contentSize[1] : 0);\n\n    if (shouldTooltipConfine(tooltipModel)) {\n      var pos = confineTooltipPosition(x, y, content, viewWidth, viewHeight);\n      x = pos[0];\n      y = pos[1];\n    }\n\n    content.moveTo(x, y);\n  }; // FIXME\n  // Should we remove this but leave this to user?\n\n\n  TooltipView.prototype._updateContentNotChangedOnAxis = function (dataByCoordSys, cbParamsList) {\n    var lastCoordSys = this._lastDataByCoordSys;\n    var lastCbParamsList = this._cbParamsList;\n    var contentNotChanged = !!lastCoordSys && lastCoordSys.length === dataByCoordSys.length;\n    contentNotChanged && each(lastCoordSys, function (lastItemCoordSys, indexCoordSys) {\n      var lastDataByAxis = lastItemCoordSys.dataByAxis || [];\n      var thisItemCoordSys = dataByCoordSys[indexCoordSys] || {};\n      var thisDataByAxis = thisItemCoordSys.dataByAxis || [];\n      contentNotChanged = contentNotChanged && lastDataByAxis.length === thisDataByAxis.length;\n      contentNotChanged && each(lastDataByAxis, function (lastItem, indexAxis) {\n        var thisItem = thisDataByAxis[indexAxis] || {};\n        var lastIndices = lastItem.seriesDataIndices || [];\n        var newIndices = thisItem.seriesDataIndices || [];\n        contentNotChanged = contentNotChanged && lastItem.value === thisItem.value && lastItem.axisType === thisItem.axisType && lastItem.axisId === thisItem.axisId && lastIndices.length === newIndices.length;\n        contentNotChanged && each(lastIndices, function (lastIdxItem, j) {\n          var newIdxItem = newIndices[j];\n          contentNotChanged = contentNotChanged && lastIdxItem.seriesIndex === newIdxItem.seriesIndex && lastIdxItem.dataIndex === newIdxItem.dataIndex;\n        }); // check is cbParams data value changed\n\n        lastCbParamsList && zrUtil.each(lastItem.seriesDataIndices, function (idxItem) {\n          var seriesIdx = idxItem.seriesIndex;\n          var cbParams = cbParamsList[seriesIdx];\n          var lastCbParams = lastCbParamsList[seriesIdx];\n\n          if (cbParams && lastCbParams && lastCbParams.data !== cbParams.data) {\n            contentNotChanged = false;\n          }\n        });\n      });\n    });\n    this._lastDataByCoordSys = dataByCoordSys;\n    this._cbParamsList = cbParamsList;\n    return !!contentNotChanged;\n  };\n\n  TooltipView.prototype._hide = function (dispatchAction) {\n    // Do not directly hideLater here, because this behavior may be prevented\n    // in dispatchAction when showTip is dispatched.\n    // FIXME\n    // duplicated hideTip if manuallyHideTip is called from dispatchAction.\n    this._lastDataByCoordSys = null;\n    dispatchAction({\n      type: 'hideTip',\n      from: this.uid\n    });\n  };\n\n  TooltipView.prototype.dispose = function (ecModel, api) {\n    if (env.node) {\n      return;\n    }\n\n    this._tooltipContent.dispose();\n\n    globalListener.unregister('itemTooltip', api);\n  };\n\n  TooltipView.type = 'tooltip';\n  return TooltipView;\n}(ComponentView);\n/**\n * From top to bottom. (the last one should be globalTooltipModel);\n */\n\n\nfunction buildTooltipModel(modelCascade, globalTooltipModel, defaultTooltipOption) {\n  // Last is always tooltip model.\n  var ecModel = globalTooltipModel.ecModel;\n  var resultModel;\n\n  if (defaultTooltipOption) {\n    resultModel = new Model(defaultTooltipOption, ecModel, ecModel);\n    resultModel = new Model(globalTooltipModel.option, resultModel, ecModel);\n  } else {\n    resultModel = globalTooltipModel;\n  }\n\n  for (var i = modelCascade.length - 1; i >= 0; i--) {\n    var tooltipOpt = modelCascade[i];\n\n    if (tooltipOpt) {\n      if (tooltipOpt instanceof Model) {\n        tooltipOpt = tooltipOpt.get('tooltip', true);\n      } // In each data item tooltip can be simply write:\n      // {\n      //  value: 10,\n      //  tooltip: 'Something you need to know'\n      // }\n\n\n      if (zrUtil.isString(tooltipOpt)) {\n        tooltipOpt = {\n          formatter: tooltipOpt\n        };\n      }\n\n      if (tooltipOpt) {\n        resultModel = new Model(tooltipOpt, resultModel, ecModel);\n      }\n    }\n  }\n\n  return resultModel;\n}\n\nfunction makeDispatchAction(payload, api) {\n  return payload.dispatchAction || zrUtil.bind(api.dispatchAction, api);\n}\n\nfunction refixTooltipPosition(x, y, content, viewWidth, viewHeight, gapH, gapV) {\n  var size = content.getSize();\n  var width = size[0];\n  var height = size[1];\n\n  if (gapH != null) {\n    // Add extra 2 pixels for this case:\n    // At present the \"values\" in defaut tooltip are using CSS `float: right`.\n    // When the right edge of the tooltip box is on the right side of the\n    // viewport, the `float` layout might push the \"values\" to the second line.\n    if (x + width + gapH + 2 > viewWidth) {\n      x -= width + gapH;\n    } else {\n      x += gapH;\n    }\n  }\n\n  if (gapV != null) {\n    if (y + height + gapV > viewHeight) {\n      y -= height + gapV;\n    } else {\n      y += gapV;\n    }\n  }\n\n  return [x, y];\n}\n\nfunction confineTooltipPosition(x, y, content, viewWidth, viewHeight) {\n  var size = content.getSize();\n  var width = size[0];\n  var height = size[1];\n  x = Math.min(x + width, viewWidth) - width;\n  y = Math.min(y + height, viewHeight) - height;\n  x = Math.max(x, 0);\n  y = Math.max(y, 0);\n  return [x, y];\n}\n\nfunction calcTooltipPosition(position, rect, contentSize, borderWidth) {\n  var domWidth = contentSize[0];\n  var domHeight = contentSize[1];\n  var offset = Math.ceil(Math.SQRT2 * borderWidth) + 8;\n  var x = 0;\n  var y = 0;\n  var rectWidth = rect.width;\n  var rectHeight = rect.height;\n\n  switch (position) {\n    case 'inside':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n      break;\n\n    case 'top':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y - domHeight - offset;\n      break;\n\n    case 'bottom':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y + rectHeight + offset;\n      break;\n\n    case 'left':\n      x = rect.x - domWidth - offset;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n      break;\n\n    case 'right':\n      x = rect.x + rectWidth + offset;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n  }\n\n  return [x, y];\n}\n\nfunction isCenterAlign(align) {\n  return align === 'center' || align === 'middle';\n}\n/**\n * Find target component by payload like:\n * ```js\n * { legendId: 'some_id', name: 'xxx' }\n * { toolboxIndex: 1, name: 'xxx' }\n * { geoName: 'some_name', name: 'xxx' }\n * ```\n * PENDING: at present only\n *\n * If not found, return null/undefined.\n */\n\n\nfunction findComponentReference(payload, ecModel, api) {\n  var queryOptionMap = preParseFinder(payload).queryOptionMap;\n  var componentMainType = queryOptionMap.keys()[0];\n\n  if (!componentMainType || componentMainType === 'series') {\n    return;\n  }\n\n  var queryResult = queryReferringComponents(ecModel, componentMainType, queryOptionMap.get(componentMainType), {\n    useDefault: false,\n    enableAll: false,\n    enableNone: false\n  });\n  var model = queryResult.models[0];\n\n  if (!model) {\n    return;\n  }\n\n  var view = api.getViewOfComponentModel(model);\n  var el;\n  view.group.traverse(function (subEl) {\n    var tooltipConfig = getECData(subEl).tooltipConfig;\n\n    if (tooltipConfig && tooltipConfig.name === payload.name) {\n      el = subEl;\n      return true; // stop\n    }\n  });\n\n  if (el) {\n    return {\n      componentMainType: componentMainType,\n      componentIndex: model.componentIndex,\n      el: el\n    };\n  }\n}\n\nexport default TooltipView;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { install as installAxisPointer } from '../axisPointer/install';\nimport { use } from '../../extension';\nimport TooltipModel from './TooltipModel';\nimport TooltipView from './TooltipView';\nexport function install(registers) {\n  use(installAxisPointer);\n  registers.registerComponentModel(TooltipModel);\n  registers.registerComponentView(TooltipView);\n  /**\n   * @action\n   * @property {string} type\n   * @property {number} seriesIndex\n   * @property {number} dataIndex\n   * @property {number} [x]\n   * @property {number} [y]\n   */\n\n  registers.registerAction({\n    type: 'showTip',\n    event: 'showTip',\n    update: 'tooltip:manuallyShowTip'\n  }, // noop\n  function () {});\n  registers.registerAction({\n    type: 'hideTip',\n    event: 'hideTip',\n    update: 'tooltip:manuallyHideTip'\n  }, // noop\n  function () {});\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport function isCoordinateSystemType(coordSys, type) {\n  return coordSys.type === type;\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nvar defaultOption = {\n  show: true,\n  zlevel: 0,\n  z: 0,\n  // Inverse the axis.\n  inverse: false,\n  // Axis name displayed.\n  name: '',\n  // 'start' | 'middle' | 'end'\n  nameLocation: 'end',\n  // By degree. By default auto rotate by nameLocation.\n  nameRotate: null,\n  nameTruncate: {\n    maxWidth: null,\n    ellipsis: '...',\n    placeholder: '.'\n  },\n  // Use global text style by default.\n  nameTextStyle: {},\n  // The gap between axisName and axisLine.\n  nameGap: 15,\n  // Default `false` to support tooltip.\n  silent: false,\n  // Default `false` to avoid legacy user event listener fail.\n  triggerEvent: false,\n  tooltip: {\n    show: false\n  },\n  axisPointer: {},\n  axisLine: {\n    show: true,\n    onZero: true,\n    onZeroAxisIndex: null,\n    lineStyle: {\n      color: '#6E7079',\n      width: 1,\n      type: 'solid'\n    },\n    // The arrow at both ends the the axis.\n    symbol: ['none', 'none'],\n    symbolSize: [10, 15]\n  },\n  axisTick: {\n    show: true,\n    // Whether axisTick is inside the grid or outside the grid.\n    inside: false,\n    // The length of axisTick.\n    length: 5,\n    lineStyle: {\n      width: 1\n    }\n  },\n  axisLabel: {\n    show: true,\n    // Whether axisLabel is inside the grid or outside the grid.\n    inside: false,\n    rotate: 0,\n    // true | false | null/undefined (auto)\n    showMinLabel: null,\n    // true | false | null/undefined (auto)\n    showMaxLabel: null,\n    margin: 8,\n    // formatter: null,\n    fontSize: 12\n  },\n  splitLine: {\n    show: true,\n    lineStyle: {\n      color: ['#E0E6F1'],\n      width: 1,\n      type: 'solid'\n    }\n  },\n  splitArea: {\n    show: false,\n    areaStyle: {\n      color: ['rgba(250,250,250,0.2)', 'rgba(210,219,238,0.2)']\n    }\n  }\n};\nvar categoryAxis = zrUtil.merge({\n  // The gap at both ends of the axis. For categoryAxis, boolean.\n  boundaryGap: true,\n  // Set false to faster category collection.\n  deduplication: null,\n  // splitArea: {\n  // show: false\n  // },\n  splitLine: {\n    show: false\n  },\n  axisTick: {\n    // If tick is align with label when boundaryGap is true\n    alignWithLabel: false,\n    interval: 'auto'\n  },\n  axisLabel: {\n    interval: 'auto'\n  }\n}, defaultOption);\nvar valueAxis = zrUtil.merge({\n  boundaryGap: [0, 0],\n  axisLine: {\n    // Not shown when other axis is categoryAxis in cartesian\n    show: 'auto'\n  },\n  axisTick: {\n    // Not shown when other axis is categoryAxis in cartesian\n    show: 'auto'\n  },\n  // TODO\n  // min/max: [30, datamin, 60] or [20, datamin] or [datamin, 60]\n  splitNumber: 5,\n  minorTick: {\n    // Minor tick, not available for cateogry axis.\n    show: false,\n    // Split number of minor ticks. The value should be in range of (0, 100)\n    splitNumber: 5,\n    // Lenght of minor tick\n    length: 3,\n    // Line style\n    lineStyle: {// Default to be same with axisTick\n    }\n  },\n  minorSplitLine: {\n    show: false,\n    lineStyle: {\n      color: '#F4F7FD',\n      width: 1\n    }\n  }\n}, defaultOption);\nvar timeAxis = zrUtil.merge({\n  scale: true,\n  splitNumber: 6,\n  axisLabel: {\n    // To eliminate labels that are not nice\n    showMinLabel: false,\n    showMaxLabel: false,\n    rich: {\n      primary: {\n        fontWeight: 'bold'\n      }\n    }\n  },\n  splitLine: {\n    show: false\n  }\n}, valueAxis);\nvar logAxis = zrUtil.defaults({\n  scale: true,\n  logBase: 10\n}, valueAxis);\nexport default {\n  category: categoryAxis,\n  value: valueAxis,\n  time: timeAxis,\n  log: logAxis\n};","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport var AXIS_TYPES = {\n  value: 1,\n  category: 1,\n  time: 1,\n  log: 1\n};","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport axisDefault from './axisDefault';\nimport { getLayoutParams, mergeLayoutParam, fetchLayoutMode } from '../util/layout';\nimport OrdinalMeta from '../data/OrdinalMeta';\nimport { AXIS_TYPES } from './axisCommonTypes';\nimport { each, merge } from 'zrender/lib/core/util';\n/**\n * Generate sub axis model class\n * @param axisName 'x' 'y' 'radius' 'angle' 'parallel' ...\n */\n\nexport default function axisModelCreator(registers, axisName, BaseAxisModelClass, extraDefaultOption) {\n  each(AXIS_TYPES, function (v, axisType) {\n    var defaultOption = merge(merge({}, axisDefault[axisType], true), extraDefaultOption, true);\n\n    var AxisModel =\n    /** @class */\n    function (_super) {\n      __extends(AxisModel, _super);\n\n      function AxisModel() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n\n        _this.type = axisName + 'Axis.' + axisType;\n        return _this;\n      }\n\n      AxisModel.prototype.mergeDefaultAndTheme = function (option, ecModel) {\n        var layoutMode = fetchLayoutMode(this);\n        var inputPositionParams = layoutMode ? getLayoutParams(option) : {};\n        var themeModel = ecModel.getTheme();\n        merge(option, themeModel.get(axisType + 'Axis'));\n        merge(option, this.getDefaultOption());\n        option.type = getAxisType(option);\n\n        if (layoutMode) {\n          mergeLayoutParam(option, inputPositionParams, layoutMode);\n        }\n      };\n\n      AxisModel.prototype.optionUpdated = function () {\n        var thisOption = this.option;\n\n        if (thisOption.type === 'category') {\n          this.__ordinalMeta = OrdinalMeta.createByAxisModel(this);\n        }\n      };\n      /**\n       * Should not be called before all of 'getInitailData' finished.\n       * Because categories are collected during initializing data.\n       */\n\n\n      AxisModel.prototype.getCategories = function (rawData) {\n        var option = this.option; // FIXME\n        // warning if called before all of 'getInitailData' finished.\n\n        if (option.type === 'category') {\n          if (rawData) {\n            return option.data;\n          }\n\n          return this.__ordinalMeta.categories;\n        }\n      };\n\n      AxisModel.prototype.getOrdinalMeta = function () {\n        return this.__ordinalMeta;\n      };\n\n      AxisModel.type = axisName + 'Axis.' + axisType;\n      AxisModel.defaultOption = defaultOption;\n      return AxisModel;\n    }(BaseAxisModelClass);\n\n    registers.registerComponentModel(AxisModel);\n  });\n  registers.registerSubTypeDefaulter(axisName + 'Axis', getAxisType);\n}\n\nfunction getAxisType(option) {\n  // Default axis with data is category axis\n  return option.type || (option.data ? 'category' : 'value');\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { SINGLE_REFERRING } from '../../util/model';\n/**\n * Can only be called after coordinate system creation stage.\n * (Can be called before coordinate system update stage).\n */\n\nexport function layout(gridModel, axisModel, opt) {\n  opt = opt || {};\n  var grid = gridModel.coordinateSystem;\n  var axis = axisModel.axis;\n  var layout = {};\n  var otherAxisOnZeroOf = axis.getAxesOnZeroOf()[0];\n  var rawAxisPosition = axis.position;\n  var axisPosition = otherAxisOnZeroOf ? 'onZero' : rawAxisPosition;\n  var axisDim = axis.dim;\n  var rect = grid.getRect();\n  var rectBound = [rect.x, rect.x + rect.width, rect.y, rect.y + rect.height];\n  var idx = {\n    left: 0,\n    right: 1,\n    top: 0,\n    bottom: 1,\n    onZero: 2\n  };\n  var axisOffset = axisModel.get('offset') || 0;\n  var posBound = axisDim === 'x' ? [rectBound[2] - axisOffset, rectBound[3] + axisOffset] : [rectBound[0] - axisOffset, rectBound[1] + axisOffset];\n\n  if (otherAxisOnZeroOf) {\n    var onZeroCoord = otherAxisOnZeroOf.toGlobalCoord(otherAxisOnZeroOf.dataToCoord(0));\n    posBound[idx.onZero] = Math.max(Math.min(onZeroCoord, posBound[1]), posBound[0]);\n  } // Axis position\n\n\n  layout.position = [axisDim === 'y' ? posBound[idx[axisPosition]] : rectBound[0], axisDim === 'x' ? posBound[idx[axisPosition]] : rectBound[3]]; // Axis rotation\n\n  layout.rotation = Math.PI / 2 * (axisDim === 'x' ? 0 : 1); // Tick and label direction, x y is axisDim\n\n  var dirMap = {\n    top: -1,\n    bottom: 1,\n    left: -1,\n    right: 1\n  };\n  layout.labelDirection = layout.tickDirection = layout.nameDirection = dirMap[rawAxisPosition];\n  layout.labelOffset = otherAxisOnZeroOf ? posBound[idx[rawAxisPosition]] - posBound[idx.onZero] : 0;\n\n  if (axisModel.get(['axisTick', 'inside'])) {\n    layout.tickDirection = -layout.tickDirection;\n  }\n\n  if (zrUtil.retrieve(opt.labelInside, axisModel.get(['axisLabel', 'inside']))) {\n    layout.labelDirection = -layout.labelDirection;\n  } // Special label rotation\n\n\n  var labelRotate = axisModel.get(['axisLabel', 'rotate']);\n  layout.labelRotate = axisPosition === 'top' ? -labelRotate : labelRotate; // Over splitLine and splitArea\n\n  layout.z2 = 1;\n  return layout;\n}\nexport function isCartesian2DSeries(seriesModel) {\n  return seriesModel.get('coordinateSystem') === 'cartesian2d';\n}\nexport function findAxisModels(seriesModel) {\n  var axisModelMap = {\n    xAxisModel: null,\n    yAxisModel: null\n  };\n  zrUtil.each(axisModelMap, function (v, key) {\n    var axisType = key.replace(/Model$/, '');\n    var axisModel = seriesModel.getReferringComponents(axisType, SINGLE_REFERRING).models[0];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (!axisModel) {\n        throw new Error(axisType + ' \"' + zrUtil.retrieve3(seriesModel.get(axisType + 'Index'), seriesModel.get(axisType + 'Id'), 0) + '\" not found');\n      }\n    }\n\n    axisModelMap[key] = axisModel;\n  });\n  return axisModelMap;\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { map } from 'zrender/lib/core/util';\nimport createRenderPlanner from '../chart/helper/createRenderPlanner';\nimport { isDimensionStacked } from '../data/helper/dataStackHelper';\nimport { createFloat32Array } from '../util/vendor';\nexport default function pointsLayout(seriesType, forceStoreInTypedArray) {\n  return {\n    seriesType: seriesType,\n    plan: createRenderPlanner(),\n    reset: function reset(seriesModel) {\n      var data = seriesModel.getData();\n      var coordSys = seriesModel.coordinateSystem;\n      var pipelineContext = seriesModel.pipelineContext;\n      var useTypedArray = forceStoreInTypedArray || pipelineContext.large;\n\n      if (!coordSys) {\n        return;\n      }\n\n      var dims = map(coordSys.dimensions, function (dim) {\n        return data.mapDimension(dim);\n      }).slice(0, 2);\n      var dimLen = dims.length;\n      var stackResultDim = data.getCalculationInfo('stackResultDimension');\n\n      if (isDimensionStacked(data, dims[0]\n      /*, dims[1]*/\n      )) {\n        dims[0] = stackResultDim;\n      }\n\n      if (isDimensionStacked(data, dims[1]\n      /*, dims[0]*/\n      )) {\n        dims[1] = stackResultDim;\n      }\n\n      var store = data.getStore();\n      var dimIdx0 = data.getDimensionIndex(dims[0]);\n      var dimIdx1 = data.getDimensionIndex(dims[1]);\n      return dimLen && {\n        progress: function progress(params, data) {\n          var segCount = params.end - params.start;\n          var points = useTypedArray && createFloat32Array(segCount * dimLen);\n          var tmpIn = [];\n          var tmpOut = [];\n\n          for (var i = params.start, offset = 0; i < params.end; i++) {\n            var point = void 0;\n\n            if (dimLen === 1) {\n              var x = store.get(dimIdx0, i); // NOTE: Make sure the second parameter is null to use default strategy.\n\n              point = coordSys.dataToPoint(x, null, tmpOut);\n            } else {\n              tmpIn[0] = store.get(dimIdx0, i);\n              tmpIn[1] = store.get(dimIdx1, i); // Let coordinate system to handle the NaN data.\n\n              point = coordSys.dataToPoint(tmpIn, null, tmpOut);\n            }\n\n            if (useTypedArray) {\n              points[offset++] = point[0];\n              points[offset++] = point[1];\n            } else {\n              data.setItemLayout(i, point.slice());\n            }\n          }\n\n          useTypedArray && data.setLayout('points', points);\n        }\n      };\n    }\n  };\n}\n;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar samplers = {\n  average: function average(frame) {\n    var sum = 0;\n    var count = 0;\n\n    for (var i = 0; i < frame.length; i++) {\n      if (!isNaN(frame[i])) {\n        sum += frame[i];\n        count++;\n      }\n    } // Return NaN if count is 0\n\n\n    return count === 0 ? NaN : sum / count;\n  },\n  sum: function sum(frame) {\n    var sum = 0;\n\n    for (var i = 0; i < frame.length; i++) {\n      // Ignore NaN\n      sum += frame[i] || 0;\n    }\n\n    return sum;\n  },\n  max: function max(frame) {\n    var max = -Infinity;\n\n    for (var i = 0; i < frame.length; i++) {\n      frame[i] > max && (max = frame[i]);\n    } // NaN will cause illegal axis extent.\n\n\n    return isFinite(max) ? max : NaN;\n  },\n  min: function min(frame) {\n    var min = Infinity;\n\n    for (var i = 0; i < frame.length; i++) {\n      frame[i] < min && (min = frame[i]);\n    } // NaN will cause illegal axis extent.\n\n\n    return isFinite(min) ? min : NaN;\n  },\n  // TODO\n  // Median\n  nearest: function nearest(frame) {\n    return frame[0];\n  }\n};\n\nvar indexSampler = function indexSampler(frame) {\n  return Math.round(frame.length / 2);\n};\n\nexport default function dataSample(seriesType) {\n  return {\n    seriesType: seriesType,\n    // FIXME:TS never used, so comment it\n    // modifyOutputEnd: true,\n    reset: function reset(seriesModel, ecModel, api) {\n      var data = seriesModel.getData();\n      var sampling = seriesModel.get('sampling');\n      var coordSys = seriesModel.coordinateSystem;\n      var count = data.count(); // Only cartesian2d support down sampling. Disable it when there is few data.\n\n      if (count > 10 && coordSys.type === 'cartesian2d' && sampling) {\n        var baseAxis = coordSys.getBaseAxis();\n        var valueAxis = coordSys.getOtherAxis(baseAxis);\n        var extent = baseAxis.getExtent();\n        var dpr = api.getDevicePixelRatio(); // Coordinste system has been resized\n\n        var size = Math.abs(extent[1] - extent[0]) * (dpr || 1);\n        var rate = Math.round(count / size);\n\n        if (rate > 1) {\n          if (sampling === 'lttb') {\n            seriesModel.setData(data.lttbDownSample(data.mapDimension(valueAxis.dim), 1 / rate));\n          }\n\n          var sampler = void 0;\n\n          if (typeof sampling === 'string') {\n            sampler = samplers[sampling];\n          } else if (typeof sampling === 'function') {\n            sampler = sampling;\n          }\n\n          if (sampler) {\n            // Only support sample the first dim mapped from value axis.\n            seriesModel.setData(data.downSample(data.mapDimension(valueAxis.dim), 1 / rate, sampler, indexSampler));\n          }\n        }\n      }\n    }\n  };\n}","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { Path } from '../graphic';\n/**\n * Sausage: similar to sector, but have half circle on both sides\n */\n\nvar SausageShape =\n/** @class */\nfunction () {\n  function SausageShape() {\n    this.cx = 0;\n    this.cy = 0;\n    this.r0 = 0;\n    this.r = 0;\n    this.startAngle = 0;\n    this.endAngle = Math.PI * 2;\n    this.clockwise = true;\n  }\n\n  return SausageShape;\n}();\n\nvar SausagePath =\n/** @class */\nfunction (_super) {\n  __extends(SausagePath, _super);\n\n  function SausagePath(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'sausage';\n    return _this;\n  }\n\n  SausagePath.prototype.getDefaultShape = function () {\n    return new SausageShape();\n  };\n\n  SausagePath.prototype.buildPath = function (ctx, shape) {\n    var x = shape.cx;\n    var y = shape.cy;\n    var r0 = Math.max(shape.r0 || 0, 0);\n    var r = Math.max(shape.r, 0);\n    var dr = (r - r0) * 0.5;\n    var rCenter = r0 + dr;\n    var startAngle = shape.startAngle;\n    var endAngle = shape.endAngle;\n    var clockwise = shape.clockwise;\n    var unitStartX = Math.cos(startAngle);\n    var unitStartY = Math.sin(startAngle);\n    var unitEndX = Math.cos(endAngle);\n    var unitEndY = Math.sin(endAngle);\n    var lessThanCircle = clockwise ? endAngle - startAngle < Math.PI * 2 : startAngle - endAngle < Math.PI * 2;\n\n    if (lessThanCircle) {\n      ctx.moveTo(unitStartX * r0 + x, unitStartY * r0 + y);\n      ctx.arc(unitStartX * rCenter + x, unitStartY * rCenter + y, dr, -Math.PI + startAngle, startAngle, !clockwise);\n    }\n\n    ctx.arc(x, y, r, startAngle, endAngle, !clockwise);\n    ctx.moveTo(unitEndX * r + x, unitEndY * r + y);\n    ctx.arc(unitEndX * rCenter + x, unitEndY * rCenter + y, dr, endAngle - Math.PI * 2, endAngle - Math.PI, !clockwise);\n\n    if (r0 !== 0) {\n      ctx.arc(x, y, r0, endAngle, startAngle, clockwise);\n      ctx.moveTo(unitStartX * r0 + x, unitEndY * r0 + y);\n    }\n\n    ctx.closePath();\n  };\n\n  return SausagePath;\n}(Path);\n\nexport default SausagePath;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isArray } from 'zrender/lib/core/util';\n/* global Float32Array */\n\nvar supportFloat32Array = typeof Float32Array !== 'undefined';\nvar Float32ArrayCtor = !supportFloat32Array ? Array : Float32Array;\nexport function createFloat32Array(arg) {\n  if (isArray(arg)) {\n    // Return self directly if don't support TypedArray.\n    return supportFloat32Array ? new Float32Array(arg) : arg;\n  } // Else is number\n\n\n  return new Float32ArrayCtor(arg);\n}","'use strict'; // do not edit .js files directly - edit src/index.jst\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n    var length, i, keys;\n\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n\n      for (i = length; i-- !== 0;) {\n        if (!equal(a[i], b[i])) return false;\n      }\n\n      return true;\n    }\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;) {\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n    }\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  } // true if both NaN, false otherwise\n\n\n  return a !== a && b !== b;\n};","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n/** Used as the internal argument placeholder. */\n\nvar PLACEHOLDER = '__lodash_placeholder__';\n/** Used to compose bitmasks for function metadata. */\n\nvar BIND_FLAG = 1,\n    BIND_KEY_FLAG = 2,\n    CURRY_BOUND_FLAG = 4,\n    CURRY_FLAG = 8,\n    CURRY_RIGHT_FLAG = 16,\n    PARTIAL_FLAG = 32,\n    PARTIAL_RIGHT_FLAG = 64,\n    ARY_FLAG = 128,\n    REARG_FLAG = 256,\n    FLIP_FLAG = 512;\n/** Used as references for various `Number` constants. */\n\nvar INFINITY = 1 / 0,\n    MAX_SAFE_INTEGER = 9007199254740991,\n    MAX_INTEGER = 1.7976931348623157e+308,\n    NAN = 0 / 0;\n/** Used to associate wrap methods with their bit flags. */\n\nvar wrapFlags = [['ary', ARY_FLAG], ['bind', BIND_FLAG], ['bindKey', BIND_KEY_FLAG], ['curry', CURRY_FLAG], ['curryRight', CURRY_RIGHT_FLAG], ['flip', FLIP_FLAG], ['partial', PARTIAL_FLAG], ['partialRight', PARTIAL_RIGHT_FLAG], ['rearg', REARG_FLAG]];\n/** `Object#toString` result references. */\n\nvar funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    symbolTag = '[object Symbol]';\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\n\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n/** Used to match leading and trailing whitespace. */\n\nvar reTrim = /^\\s+|\\s+$/g;\n/** Used to match wrap detail comments. */\n\nvar reWrapComment = /\\{(?:\\n\\/\\* \\[wrapped with .+\\] \\*\\/)?\\n?/,\n    reWrapDetails = /\\{\\n\\/\\* \\[wrapped with (.+)\\] \\*/,\n    reSplitDetails = /,? & /;\n/** Used to detect bad signed hexadecimal string values. */\n\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n/** Used to detect binary string values. */\n\nvar reIsBinary = /^0b[01]+$/i;\n/** Used to detect host constructors (Safari). */\n\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n/** Used to detect octal string values. */\n\nvar reIsOctal = /^0o[0-7]+$/i;\n/** Used to detect unsigned integer values. */\n\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n/** Built-in method references without a dependency on `root`. */\n\nvar freeParseInt = parseInt;\n/** Detect free variable `global` from Node.js. */\n\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n/** Detect free variable `self`. */\n\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n/** Used as a reference to the global object. */\n\nvar root = freeGlobal || freeSelf || Function('return this')();\n/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\n\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0:\n      return func.call(thisArg);\n\n    case 1:\n      return func.call(thisArg, args[0]);\n\n    case 2:\n      return func.call(thisArg, args[0], args[1]);\n\n    case 3:\n      return func.call(thisArg, args[0], args[1], args[2]);\n  }\n\n  return func.apply(thisArg, args);\n}\n/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\n\n\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n\n  return array;\n}\n/**\n * A specialized version of `_.includes` for arrays without support for\n * specifying an index to search from.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\n\n\nfunction arrayIncludes(array, value) {\n  var length = array ? array.length : 0;\n  return !!length && baseIndexOf(array, value, 0) > -1;\n}\n/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\n\n\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while (fromRight ? index-- : ++index < length) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n\n  return -1;\n}\n/**\n * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\n\n\nfunction baseIndexOf(array, value, fromIndex) {\n  if (value !== value) {\n    return baseFindIndex(array, baseIsNaN, fromIndex);\n  }\n\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n\n  return -1;\n}\n/**\n * The base implementation of `_.isNaN` without support for number objects.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n */\n\n\nfunction baseIsNaN(value) {\n  return value !== value;\n}\n/**\n * Gets the number of `placeholder` occurrences in `array`.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} placeholder The placeholder to search for.\n * @returns {number} Returns the placeholder count.\n */\n\n\nfunction countHolders(array, placeholder) {\n  var length = array.length,\n      result = 0;\n\n  while (length--) {\n    if (array[length] === placeholder) {\n      result++;\n    }\n  }\n\n  return result;\n}\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\n\n\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\n\n\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n\n  return result;\n}\n/**\n * Replaces all `placeholder` elements in `array` with an internal placeholder\n * and returns an array of their indexes.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {*} placeholder The placeholder to replace.\n * @returns {Array} Returns the new array of placeholder indexes.\n */\n\n\nfunction replaceHolders(array, placeholder) {\n  var index = -1,\n      length = array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n\n    if (value === placeholder || value === PLACEHOLDER) {\n      array[index] = PLACEHOLDER;\n      result[resIndex++] = index;\n    }\n  }\n\n  return result;\n}\n/** Used for built-in method references. */\n\n\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n/** Used to detect overreaching core-js shims. */\n\nvar coreJsData = root['__core-js_shared__'];\n/** Used to detect methods masquerading as native. */\n\nvar maskSrcKey = function () {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? 'Symbol(src)_1.' + uid : '';\n}();\n/** Used to resolve the decompiled source of functions. */\n\n\nvar funcToString = funcProto.toString;\n/** Used to check objects for own properties. */\n\nvar hasOwnProperty = objectProto.hasOwnProperty;\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\n\nvar objectToString = objectProto.toString;\n/** Used to detect if a method is native. */\n\nvar reIsNative = RegExp('^' + funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&').replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$');\n/** Built-in value references. */\n\nvar objectCreate = Object.create;\n/* Built-in method references for those with the same name as other `lodash` methods. */\n\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n/* Used to set `toString` methods. */\n\nvar defineProperty = function () {\n  var func = getNative(Object, 'defineProperty'),\n      name = getNative.name;\n  return name && name.length > 2 ? func : undefined;\n}();\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} prototype The object to inherit from.\n * @returns {Object} Returns the new object.\n */\n\n\nfunction baseCreate(proto) {\n  return isObject(proto) ? objectCreate(proto) : {};\n}\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\n\n\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n\n  var pattern = isFunction(value) || isHostObject(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n/**\n * Creates an array that is the composition of partially applied arguments,\n * placeholders, and provided arguments into a single array of arguments.\n *\n * @private\n * @param {Array} args The provided arguments.\n * @param {Array} partials The arguments to prepend to those provided.\n * @param {Array} holders The `partials` placeholder indexes.\n * @params {boolean} [isCurried] Specify composing for a curried function.\n * @returns {Array} Returns the new array of composed arguments.\n */\n\n\nfunction composeArgs(args, partials, holders, isCurried) {\n  var argsIndex = -1,\n      argsLength = args.length,\n      holdersLength = holders.length,\n      leftIndex = -1,\n      leftLength = partials.length,\n      rangeLength = nativeMax(argsLength - holdersLength, 0),\n      result = Array(leftLength + rangeLength),\n      isUncurried = !isCurried;\n\n  while (++leftIndex < leftLength) {\n    result[leftIndex] = partials[leftIndex];\n  }\n\n  while (++argsIndex < holdersLength) {\n    if (isUncurried || argsIndex < argsLength) {\n      result[holders[argsIndex]] = args[argsIndex];\n    }\n  }\n\n  while (rangeLength--) {\n    result[leftIndex++] = args[argsIndex++];\n  }\n\n  return result;\n}\n/**\n * This function is like `composeArgs` except that the arguments composition\n * is tailored for `_.partialRight`.\n *\n * @private\n * @param {Array} args The provided arguments.\n * @param {Array} partials The arguments to append to those provided.\n * @param {Array} holders The `partials` placeholder indexes.\n * @params {boolean} [isCurried] Specify composing for a curried function.\n * @returns {Array} Returns the new array of composed arguments.\n */\n\n\nfunction composeArgsRight(args, partials, holders, isCurried) {\n  var argsIndex = -1,\n      argsLength = args.length,\n      holdersIndex = -1,\n      holdersLength = holders.length,\n      rightIndex = -1,\n      rightLength = partials.length,\n      rangeLength = nativeMax(argsLength - holdersLength, 0),\n      result = Array(rangeLength + rightLength),\n      isUncurried = !isCurried;\n\n  while (++argsIndex < rangeLength) {\n    result[argsIndex] = args[argsIndex];\n  }\n\n  var offset = argsIndex;\n\n  while (++rightIndex < rightLength) {\n    result[offset + rightIndex] = partials[rightIndex];\n  }\n\n  while (++holdersIndex < holdersLength) {\n    if (isUncurried || argsIndex < argsLength) {\n      result[offset + holders[holdersIndex]] = args[argsIndex++];\n    }\n  }\n\n  return result;\n}\n/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\n\n\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n  array || (array = Array(length));\n\n  while (++index < length) {\n    array[index] = source[index];\n  }\n\n  return array;\n}\n/**\n * Creates a function that wraps `func` to invoke it with the optional `this`\n * binding of `thisArg`.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @param {*} [thisArg] The `this` binding of `func`.\n * @returns {Function} Returns the new wrapped function.\n */\n\n\nfunction createBind(func, bitmask, thisArg) {\n  var isBind = bitmask & BIND_FLAG,\n      Ctor = createCtor(func);\n\n  function wrapper() {\n    var fn = this && this !== root && this instanceof wrapper ? Ctor : func;\n    return fn.apply(isBind ? thisArg : this, arguments);\n  }\n\n  return wrapper;\n}\n/**\n * Creates a function that produces an instance of `Ctor` regardless of\n * whether it was invoked as part of a `new` expression or by `call` or `apply`.\n *\n * @private\n * @param {Function} Ctor The constructor to wrap.\n * @returns {Function} Returns the new wrapped function.\n */\n\n\nfunction createCtor(Ctor) {\n  return function () {\n    // Use a `switch` statement to work with class constructors. See\n    // http://ecma-international.org/ecma-262/7.0/#sec-ecmascript-function-objects-call-thisargument-argumentslist\n    // for more details.\n    var args = arguments;\n\n    switch (args.length) {\n      case 0:\n        return new Ctor();\n\n      case 1:\n        return new Ctor(args[0]);\n\n      case 2:\n        return new Ctor(args[0], args[1]);\n\n      case 3:\n        return new Ctor(args[0], args[1], args[2]);\n\n      case 4:\n        return new Ctor(args[0], args[1], args[2], args[3]);\n\n      case 5:\n        return new Ctor(args[0], args[1], args[2], args[3], args[4]);\n\n      case 6:\n        return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5]);\n\n      case 7:\n        return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5], args[6]);\n    }\n\n    var thisBinding = baseCreate(Ctor.prototype),\n        result = Ctor.apply(thisBinding, args); // Mimic the constructor's `return` behavior.\n    // See https://es5.github.io/#x13.2.2 for more details.\n\n    return isObject(result) ? result : thisBinding;\n  };\n}\n/**\n * Creates a function that wraps `func` to enable currying.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @param {number} arity The arity of `func`.\n * @returns {Function} Returns the new wrapped function.\n */\n\n\nfunction createCurry(func, bitmask, arity) {\n  var Ctor = createCtor(func);\n\n  function wrapper() {\n    var length = arguments.length,\n        args = Array(length),\n        index = length,\n        placeholder = getHolder(wrapper);\n\n    while (index--) {\n      args[index] = arguments[index];\n    }\n\n    var holders = length < 3 && args[0] !== placeholder && args[length - 1] !== placeholder ? [] : replaceHolders(args, placeholder);\n    length -= holders.length;\n\n    if (length < arity) {\n      return createRecurry(func, bitmask, createHybrid, wrapper.placeholder, undefined, args, holders, undefined, undefined, arity - length);\n    }\n\n    var fn = this && this !== root && this instanceof wrapper ? Ctor : func;\n    return apply(fn, this, args);\n  }\n\n  return wrapper;\n}\n/**\n * Creates a function that wraps `func` to invoke it with optional `this`\n * binding of `thisArg`, partial application, and currying.\n *\n * @private\n * @param {Function|string} func The function or method name to wrap.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @param {*} [thisArg] The `this` binding of `func`.\n * @param {Array} [partials] The arguments to prepend to those provided to\n *  the new function.\n * @param {Array} [holders] The `partials` placeholder indexes.\n * @param {Array} [partialsRight] The arguments to append to those provided\n *  to the new function.\n * @param {Array} [holdersRight] The `partialsRight` placeholder indexes.\n * @param {Array} [argPos] The argument positions of the new function.\n * @param {number} [ary] The arity cap of `func`.\n * @param {number} [arity] The arity of `func`.\n * @returns {Function} Returns the new wrapped function.\n */\n\n\nfunction createHybrid(func, bitmask, thisArg, partials, holders, partialsRight, holdersRight, argPos, ary, arity) {\n  var isAry = bitmask & ARY_FLAG,\n      isBind = bitmask & BIND_FLAG,\n      isBindKey = bitmask & BIND_KEY_FLAG,\n      isCurried = bitmask & (CURRY_FLAG | CURRY_RIGHT_FLAG),\n      isFlip = bitmask & FLIP_FLAG,\n      Ctor = isBindKey ? undefined : createCtor(func);\n\n  function wrapper() {\n    var length = arguments.length,\n        args = Array(length),\n        index = length;\n\n    while (index--) {\n      args[index] = arguments[index];\n    }\n\n    if (isCurried) {\n      var placeholder = getHolder(wrapper),\n          holdersCount = countHolders(args, placeholder);\n    }\n\n    if (partials) {\n      args = composeArgs(args, partials, holders, isCurried);\n    }\n\n    if (partialsRight) {\n      args = composeArgsRight(args, partialsRight, holdersRight, isCurried);\n    }\n\n    length -= holdersCount;\n\n    if (isCurried && length < arity) {\n      var newHolders = replaceHolders(args, placeholder);\n      return createRecurry(func, bitmask, createHybrid, wrapper.placeholder, thisArg, args, newHolders, argPos, ary, arity - length);\n    }\n\n    var thisBinding = isBind ? thisArg : this,\n        fn = isBindKey ? thisBinding[func] : func;\n    length = args.length;\n\n    if (argPos) {\n      args = reorder(args, argPos);\n    } else if (isFlip && length > 1) {\n      args.reverse();\n    }\n\n    if (isAry && ary < length) {\n      args.length = ary;\n    }\n\n    if (this && this !== root && this instanceof wrapper) {\n      fn = Ctor || createCtor(fn);\n    }\n\n    return fn.apply(thisBinding, args);\n  }\n\n  return wrapper;\n}\n/**\n * Creates a function that wraps `func` to invoke it with the `this` binding\n * of `thisArg` and `partials` prepended to the arguments it receives.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} partials The arguments to prepend to those provided to\n *  the new function.\n * @returns {Function} Returns the new wrapped function.\n */\n\n\nfunction createPartial(func, bitmask, thisArg, partials) {\n  var isBind = bitmask & BIND_FLAG,\n      Ctor = createCtor(func);\n\n  function wrapper() {\n    var argsIndex = -1,\n        argsLength = arguments.length,\n        leftIndex = -1,\n        leftLength = partials.length,\n        args = Array(leftLength + argsLength),\n        fn = this && this !== root && this instanceof wrapper ? Ctor : func;\n\n    while (++leftIndex < leftLength) {\n      args[leftIndex] = partials[leftIndex];\n    }\n\n    while (argsLength--) {\n      args[leftIndex++] = arguments[++argsIndex];\n    }\n\n    return apply(fn, isBind ? thisArg : this, args);\n  }\n\n  return wrapper;\n}\n/**\n * Creates a function that wraps `func` to continue currying.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @param {Function} wrapFunc The function to create the `func` wrapper.\n * @param {*} placeholder The placeholder value.\n * @param {*} [thisArg] The `this` binding of `func`.\n * @param {Array} [partials] The arguments to prepend to those provided to\n *  the new function.\n * @param {Array} [holders] The `partials` placeholder indexes.\n * @param {Array} [argPos] The argument positions of the new function.\n * @param {number} [ary] The arity cap of `func`.\n * @param {number} [arity] The arity of `func`.\n * @returns {Function} Returns the new wrapped function.\n */\n\n\nfunction createRecurry(func, bitmask, wrapFunc, placeholder, thisArg, partials, holders, argPos, ary, arity) {\n  var isCurry = bitmask & CURRY_FLAG,\n      newHolders = isCurry ? holders : undefined,\n      newHoldersRight = isCurry ? undefined : holders,\n      newPartials = isCurry ? partials : undefined,\n      newPartialsRight = isCurry ? undefined : partials;\n  bitmask |= isCurry ? PARTIAL_FLAG : PARTIAL_RIGHT_FLAG;\n  bitmask &= ~(isCurry ? PARTIAL_RIGHT_FLAG : PARTIAL_FLAG);\n\n  if (!(bitmask & CURRY_BOUND_FLAG)) {\n    bitmask &= ~(BIND_FLAG | BIND_KEY_FLAG);\n  }\n\n  var result = wrapFunc(func, bitmask, thisArg, newPartials, newHolders, newPartialsRight, newHoldersRight, argPos, ary, arity);\n  result.placeholder = placeholder;\n  return setWrapToString(result, func, bitmask);\n}\n/**\n * Creates a function that either curries or invokes `func` with optional\n * `this` binding and partially applied arguments.\n *\n * @private\n * @param {Function|string} func The function or method name to wrap.\n * @param {number} bitmask The bitmask flags.\n *  The bitmask may be composed of the following flags:\n *     1 - `_.bind`\n *     2 - `_.bindKey`\n *     4 - `_.curry` or `_.curryRight` of a bound function\n *     8 - `_.curry`\n *    16 - `_.curryRight`\n *    32 - `_.partial`\n *    64 - `_.partialRight`\n *   128 - `_.rearg`\n *   256 - `_.ary`\n *   512 - `_.flip`\n * @param {*} [thisArg] The `this` binding of `func`.\n * @param {Array} [partials] The arguments to be partially applied.\n * @param {Array} [holders] The `partials` placeholder indexes.\n * @param {Array} [argPos] The argument positions of the new function.\n * @param {number} [ary] The arity cap of `func`.\n * @param {number} [arity] The arity of `func`.\n * @returns {Function} Returns the new wrapped function.\n */\n\n\nfunction createWrap(func, bitmask, thisArg, partials, holders, argPos, ary, arity) {\n  var isBindKey = bitmask & BIND_KEY_FLAG;\n\n  if (!isBindKey && typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n\n  var length = partials ? partials.length : 0;\n\n  if (!length) {\n    bitmask &= ~(PARTIAL_FLAG | PARTIAL_RIGHT_FLAG);\n    partials = holders = undefined;\n  }\n\n  ary = ary === undefined ? ary : nativeMax(toInteger(ary), 0);\n  arity = arity === undefined ? arity : toInteger(arity);\n  length -= holders ? holders.length : 0;\n\n  if (bitmask & PARTIAL_RIGHT_FLAG) {\n    var partialsRight = partials,\n        holdersRight = holders;\n    partials = holders = undefined;\n  }\n\n  var newData = [func, bitmask, thisArg, partials, holders, partialsRight, holdersRight, argPos, ary, arity];\n  func = newData[0];\n  bitmask = newData[1];\n  thisArg = newData[2];\n  partials = newData[3];\n  holders = newData[4];\n  arity = newData[9] = newData[9] == null ? isBindKey ? 0 : func.length : nativeMax(newData[9] - length, 0);\n\n  if (!arity && bitmask & (CURRY_FLAG | CURRY_RIGHT_FLAG)) {\n    bitmask &= ~(CURRY_FLAG | CURRY_RIGHT_FLAG);\n  }\n\n  if (!bitmask || bitmask == BIND_FLAG) {\n    var result = createBind(func, bitmask, thisArg);\n  } else if (bitmask == CURRY_FLAG || bitmask == CURRY_RIGHT_FLAG) {\n    result = createCurry(func, bitmask, arity);\n  } else if ((bitmask == PARTIAL_FLAG || bitmask == (BIND_FLAG | PARTIAL_FLAG)) && !holders.length) {\n    result = createPartial(func, bitmask, thisArg, partials);\n  } else {\n    result = createHybrid.apply(undefined, newData);\n  }\n\n  return setWrapToString(result, func, bitmask);\n}\n/**\n * Gets the argument placeholder value for `func`.\n *\n * @private\n * @param {Function} func The function to inspect.\n * @returns {*} Returns the placeholder value.\n */\n\n\nfunction getHolder(func) {\n  var object = func;\n  return object.placeholder;\n}\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\n\n\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n/**\n * Extracts wrapper details from the `source` body comment.\n *\n * @private\n * @param {string} source The source to inspect.\n * @returns {Array} Returns the wrapper details.\n */\n\n\nfunction getWrapDetails(source) {\n  var match = source.match(reWrapDetails);\n  return match ? match[1].split(reSplitDetails) : [];\n}\n/**\n * Inserts wrapper `details` in a comment at the top of the `source` body.\n *\n * @private\n * @param {string} source The source to modify.\n * @returns {Array} details The details to insert.\n * @returns {string} Returns the modified source.\n */\n\n\nfunction insertWrapDetails(source, details) {\n  var length = details.length,\n      lastIndex = length - 1;\n  details[lastIndex] = (length > 1 ? '& ' : '') + details[lastIndex];\n  details = details.join(length > 2 ? ', ' : ' ');\n  return source.replace(reWrapComment, '{\\n/* [wrapped with ' + details + '] */\\n');\n}\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\n\n\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length && (typeof value == 'number' || reIsUint.test(value)) && value > -1 && value % 1 == 0 && value < length;\n}\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\n\n\nfunction isMasked(func) {\n  return !!maskSrcKey && maskSrcKey in func;\n}\n/**\n * Reorder `array` according to the specified indexes where the element at\n * the first index is assigned as the first element, the element at\n * the second index is assigned as the second element, and so on.\n *\n * @private\n * @param {Array} array The array to reorder.\n * @param {Array} indexes The arranged array indexes.\n * @returns {Array} Returns `array`.\n */\n\n\nfunction reorder(array, indexes) {\n  var arrLength = array.length,\n      length = nativeMin(indexes.length, arrLength),\n      oldArray = copyArray(array);\n\n  while (length--) {\n    var index = indexes[length];\n    array[length] = isIndex(index, arrLength) ? oldArray[index] : undefined;\n  }\n\n  return array;\n}\n/**\n * Sets the `toString` method of `wrapper` to mimic the source of `reference`\n * with wrapper details in a comment at the top of the source body.\n *\n * @private\n * @param {Function} wrapper The function to modify.\n * @param {Function} reference The reference function.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @returns {Function} Returns `wrapper`.\n */\n\n\nvar setWrapToString = !defineProperty ? identity : function (wrapper, reference, bitmask) {\n  var source = reference + '';\n  return defineProperty(wrapper, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(insertWrapDetails(source, updateWrapDetails(getWrapDetails(source), bitmask)))\n  });\n};\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\n\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n\n    try {\n      return func + '';\n    } catch (e) {}\n  }\n\n  return '';\n}\n/**\n * Updates wrapper `details` based on `bitmask` flags.\n *\n * @private\n * @returns {Array} details The details to modify.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @returns {Array} Returns `details`.\n */\n\n\nfunction updateWrapDetails(details, bitmask) {\n  arrayEach(wrapFlags, function (pair) {\n    var value = '_.' + pair[0];\n\n    if (bitmask & pair[1] && !arrayIncludes(details, value)) {\n      details.push(value);\n    }\n  });\n  return details.sort();\n}\n/**\n * Creates a function that accepts arguments of `func` and either invokes\n * `func` returning its result, if at least `arity` number of arguments have\n * been provided, or returns a function that accepts the remaining `func`\n * arguments, and so on. The arity of `func` may be specified if `func.length`\n * is not sufficient.\n *\n * The `_.curry.placeholder` value, which defaults to `_` in monolithic builds,\n * may be used as a placeholder for provided arguments.\n *\n * **Note:** This method doesn't set the \"length\" property of curried functions.\n *\n * @static\n * @memberOf _\n * @since 2.0.0\n * @category Function\n * @param {Function} func The function to curry.\n * @param {number} [arity=func.length] The arity of `func`.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {Function} Returns the new curried function.\n * @example\n *\n * var abc = function(a, b, c) {\n *   return [a, b, c];\n * };\n *\n * var curried = _.curry(abc);\n *\n * curried(1)(2)(3);\n * // => [1, 2, 3]\n *\n * curried(1, 2)(3);\n * // => [1, 2, 3]\n *\n * curried(1, 2, 3);\n * // => [1, 2, 3]\n *\n * // Curried with placeholders.\n * curried(1)(_, 3)(2);\n * // => [1, 2, 3]\n */\n\n\nfunction curry(func, arity, guard) {\n  arity = guard ? undefined : arity;\n  var result = createWrap(func, CURRY_FLAG, undefined, undefined, undefined, undefined, undefined, arity);\n  result.placeholder = curry.placeholder;\n  return result;\n}\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\n\n\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\n\n\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\n\n\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\n\n\nfunction isSymbol(value) {\n  return typeof value == 'symbol' || isObjectLike(value) && objectToString.call(value) == symbolTag;\n}\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\n\n\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n\n  value = toNumber(value);\n\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = value < 0 ? -1 : 1;\n    return sign * MAX_INTEGER;\n  }\n\n  return value === value ? value : 0;\n}\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This method is loosely based on\n * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3.2);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3.2');\n * // => 3\n */\n\n\nfunction toInteger(value) {\n  var result = toFinite(value),\n      remainder = result % 1;\n  return result === result ? remainder ? result - remainder : result : 0;\n}\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\n\n\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n\n  if (isSymbol(value)) {\n    return NAN;\n  }\n\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? other + '' : other;\n  }\n\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return isBinary || reIsOctal.test(value) ? freeParseInt(value.slice(2), isBinary ? 2 : 8) : reIsBadHex.test(value) ? NAN : +value;\n}\n/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\n\n\nfunction constant(value) {\n  return function () {\n    return value;\n  };\n}\n/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\n\n\nfunction identity(value) {\n  return value;\n} // Assign default placeholders.\n\n\ncurry.placeholder = {};\nmodule.exports = curry;","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n/** Used as references for various `Number` constants. */\n\nvar MAX_SAFE_INTEGER = 9007199254740991;\n/** `Object#toString` result references. */\n\nvar argsTag = '[object Arguments]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]';\n/** Detect free variable `global` from Node.js. */\n\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n/** Detect free variable `self`. */\n\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n/** Used as a reference to the global object. */\n\nvar root = freeGlobal || freeSelf || Function('return this')();\n/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\n\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0:\n      return func.call(thisArg);\n\n    case 1:\n      return func.call(thisArg, args[0]);\n\n    case 2:\n      return func.call(thisArg, args[0], args[1]);\n\n    case 3:\n      return func.call(thisArg, args[0], args[1], args[2]);\n  }\n\n  return func.apply(thisArg, args);\n}\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\n\n\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n\n  return array;\n}\n/** Used for built-in method references. */\n\n\nvar objectProto = Object.prototype;\n/** Used to check objects for own properties. */\n\nvar hasOwnProperty = objectProto.hasOwnProperty;\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\n\nvar objectToString = objectProto.toString;\n/** Built-in value references. */\n\nvar Symbol = root.Symbol,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n/* Built-in method references for those with the same name as other `lodash` methods. */\n\nvar nativeMax = Math.max;\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\n\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n\n  return result;\n}\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\n\n\nfunction baseRest(func, start) {\n  start = nativeMax(start === undefined ? func.length - 1 : start, 0);\n  return function () {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n\n    index = -1;\n    var otherArgs = Array(start + 1);\n\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n\n    otherArgs[start] = array;\n    return apply(func, this, otherArgs);\n  };\n}\n/**\n * Creates a `_.flow` or `_.flowRight` function.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new flow function.\n */\n\n\nfunction createFlow(fromRight) {\n  return baseRest(function (funcs) {\n    funcs = baseFlatten(funcs, 1);\n    var length = funcs.length,\n        index = length;\n\n    if (fromRight) {\n      funcs.reverse();\n    }\n\n    while (index--) {\n      if (typeof funcs[index] != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n    }\n\n    return function () {\n      var index = 0,\n          result = length ? funcs[index].apply(this, arguments) : arguments[0];\n\n      while (++index < length) {\n        result = funcs[index].call(this, result);\n      }\n\n      return result;\n    };\n  });\n}\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\n\n\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) || !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\n\n\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') && (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\n\n\nvar isArray = Array.isArray;\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\n\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\n\n\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\n\n\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\n\n\nfunction isLength(value) {\n  return typeof value == 'number' && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\n\n\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\n\n\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n/**\n * Creates a function that returns the result of invoking the given functions\n * with the `this` binding of the created function, where each successive\n * invocation is supplied the return value of the previous.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Util\n * @param {...(Function|Function[])} [funcs] The functions to invoke.\n * @returns {Function} Returns the new composite function.\n * @see _.flowRight\n * @example\n *\n * function square(n) {\n *   return n * n;\n * }\n *\n * var addSquare = _.flow([_.add, square]);\n * addSquare(1, 2);\n * // => 9\n */\n\n\nvar flow = createFlow();\nmodule.exports = flow;","import { __assign, __extends } from \"tslib\";\nimport * as React from 'react';\nimport { initializeComponentRef, classNamesFunction, getId, inputProperties, getNativeProps, warnDeprecations, warnMutuallyExclusive, FocusRects } from '../../Utilities';\nimport { Label } from '../../Label';\nimport { KeytipData } from '../../KeytipData';\nvar getClassNames = classNamesFunction();\nvar COMPONENT_NAME = 'Toggle';\n\nvar ToggleBase =\n/** @class */\nfunction (_super) {\n  __extends(ToggleBase, _super);\n\n  function ToggleBase(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this._toggleButton = React.createRef();\n\n    _this._onClick = function (ev) {\n      // eslint-disable-next-line deprecation/deprecation\n      var _a = _this.props,\n          disabled = _a.disabled,\n          checkedProp = _a.checked,\n          onChange = _a.onChange,\n          onChanged = _a.onChanged,\n          onClick = _a.onClick;\n      var checked = _this.state.checked;\n\n      if (!disabled) {\n        // Only update the state if the user hasn't provided it.\n        if (checkedProp === undefined) {\n          _this.setState({\n            checked: !checked\n          });\n        }\n\n        if (onChange) {\n          onChange(ev, !checked);\n        }\n\n        if (onChanged) {\n          onChanged(!checked);\n        }\n\n        if (onClick) {\n          onClick(ev);\n        }\n      }\n    };\n\n    initializeComponentRef(_this);\n    warnMutuallyExclusive(COMPONENT_NAME, props, {\n      checked: 'defaultChecked'\n    });\n    warnDeprecations(COMPONENT_NAME, props, {\n      onAriaLabel: 'ariaLabel',\n      offAriaLabel: undefined,\n      onChanged: 'onChange'\n    });\n    _this.state = {\n      checked: !!(props.checked || props.defaultChecked)\n    };\n    _this._id = getId('Toggle');\n    return _this;\n  }\n\n  ToggleBase.getDerivedStateFromProps = function (nextProps, prevState) {\n    if (nextProps.checked === undefined) {\n      return null;\n    }\n\n    return {\n      checked: !!nextProps.checked\n    };\n  };\n\n  Object.defineProperty(ToggleBase.prototype, \"checked\", {\n    /**\n     * Gets the current checked state of the toggle.\n     */\n    get: function get() {\n      return this.state.checked;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ToggleBase.prototype.render = function () {\n    var _this = this;\n\n    var _a = this.props,\n        _b = _a.as,\n        RootType = _b === void 0 ? 'div' : _b,\n        className = _a.className,\n        theme = _a.theme,\n        disabled = _a.disabled,\n        keytipProps = _a.keytipProps,\n        id = _a.id,\n        label = _a.label,\n        ariaLabel = _a.ariaLabel,\n\n    /* eslint-disable deprecation/deprecation */\n    onAriaLabel = _a.onAriaLabel,\n        offAriaLabel = _a.offAriaLabel,\n\n    /* eslint-enable deprecation/deprecation */\n    offText = _a.offText,\n        onText = _a.onText,\n        styles = _a.styles,\n        inlineLabel = _a.inlineLabel;\n    var checked = this.state.checked;\n    var stateText = checked ? onText : offText;\n    var badAriaLabel = checked ? onAriaLabel : offAriaLabel;\n    var toggleNativeProps = getNativeProps(this.props, inputProperties, ['defaultChecked']);\n    var classNames = getClassNames(styles, {\n      theme: theme,\n      className: className,\n      disabled: disabled,\n      checked: checked,\n      inlineLabel: inlineLabel,\n      onOffMissing: !onText && !offText\n    });\n    var toggleId = id || this._id;\n    var labelId = toggleId + \"-label\";\n    var stateTextId = toggleId + \"-stateText\"; // The following properties take priority for what Narrator should read:\n    // 1. ariaLabel\n    // 2. onAriaLabel (if checked) or offAriaLabel (if not checked)\n    // 3. label AND stateText, if existent\n\n    var labelledById = undefined;\n\n    if (!ariaLabel && !badAriaLabel) {\n      if (label) {\n        labelledById = labelId;\n      }\n\n      if (stateText) {\n        labelledById = labelledById ? labelledById + \" \" + stateTextId : stateTextId;\n      }\n    }\n\n    var ariaRole = this.props.role ? this.props.role : 'switch';\n\n    var renderPill = function renderPill(keytipAttributes) {\n      if (keytipAttributes === void 0) {\n        keytipAttributes = {};\n      }\n\n      return React.createElement(\"button\", __assign({}, toggleNativeProps, keytipAttributes, {\n        className: classNames.pill,\n        disabled: disabled,\n        id: toggleId,\n        type: \"button\",\n        role: ariaRole,\n        ref: _this._toggleButton,\n        \"aria-disabled\": disabled,\n        \"aria-checked\": checked,\n        \"aria-label\": ariaLabel ? ariaLabel : badAriaLabel,\n        \"data-is-focusable\": true,\n        onChange: _this._noop,\n        onClick: _this._onClick,\n        \"aria-labelledby\": labelledById\n      }), React.createElement(\"span\", {\n        className: classNames.thumb\n      }));\n    };\n\n    var pillContent = keytipProps ? React.createElement(KeytipData, {\n      keytipProps: keytipProps,\n      ariaDescribedBy: toggleNativeProps['aria-describedby'],\n      disabled: disabled\n    }, function (keytipAttributes) {\n      return renderPill(keytipAttributes);\n    }) : renderPill();\n    return React.createElement(RootType, {\n      className: classNames.root,\n      hidden: toggleNativeProps.hidden\n    }, label && React.createElement(Label, {\n      htmlFor: toggleId,\n      className: classNames.label,\n      id: labelId\n    }, label), React.createElement(\"div\", {\n      className: classNames.container\n    }, pillContent, stateText && // This second \"htmlFor\" property is needed to allow the\n    // toggle's stateText to also trigger a state change when clicked.\n    React.createElement(Label, {\n      htmlFor: toggleId,\n      className: classNames.text,\n      id: stateTextId\n    }, stateText)), React.createElement(FocusRects, null));\n  };\n\n  ToggleBase.prototype.focus = function () {\n    if (this._toggleButton.current) {\n      this._toggleButton.current.focus();\n    }\n  };\n\n  ToggleBase.prototype._noop = function () {\n    /* no-op */\n  };\n\n  return ToggleBase;\n}(React.Component);\n\nexport { ToggleBase };","import { styled } from '../../Utilities';\nimport { ToggleBase } from './Toggle.base';\nimport { getStyles } from './Toggle.styles';\nexport var Toggle = styled(ToggleBase, getStyles, undefined, {\n  scope: 'Toggle'\n});","import { __assign } from \"tslib\";\nimport { HighContrastSelector, getFocusStyle, FontWeights, getHighContrastNoAdjustStyle } from '../../Styling';\nvar DEFAULT_PILL_WIDTH = 40;\nvar DEFAULT_PILL_HEIGHT = 20;\nvar DEFAULT_THUMB_SIZE = 12;\nexport var getStyles = function getStyles(props) {\n  var _a, _b, _c, _d, _e, _f, _g;\n\n  var theme = props.theme,\n      className = props.className,\n      disabled = props.disabled,\n      checked = props.checked,\n      inlineLabel = props.inlineLabel,\n      onOffMissing = props.onOffMissing;\n  var semanticColors = theme.semanticColors,\n      palette = theme.palette; // Tokens\n\n  var pillUncheckedBackground = semanticColors.bodyBackground;\n  var pillCheckedBackground = semanticColors.inputBackgroundChecked;\n  var pillCheckedHoveredBackground = semanticColors.inputBackgroundCheckedHovered;\n  var thumbUncheckedHoveredBackground = palette.neutralDark;\n  var pillCheckedDisabledBackground = semanticColors.disabledBodySubtext;\n  var thumbBackground = semanticColors.smallInputBorder;\n  var thumbCheckedBackground = semanticColors.inputForegroundChecked;\n  var thumbDisabledBackground = semanticColors.disabledBodySubtext;\n  var thumbCheckedDisabledBackground = semanticColors.disabledBackground;\n  var pillBorderColor = semanticColors.smallInputBorder;\n  var pillBorderHoveredColor = semanticColors.inputBorderHovered;\n  var pillBorderDisabledColor = semanticColors.disabledBodySubtext;\n  var textDisabledColor = semanticColors.disabledText;\n  return {\n    root: ['ms-Toggle', checked && 'is-checked', !disabled && 'is-enabled', disabled && 'is-disabled', theme.fonts.medium, {\n      marginBottom: '8px'\n    }, inlineLabel && {\n      display: 'flex',\n      alignItems: 'center'\n    }, className],\n    label: ['ms-Toggle-label', {\n      display: 'inline-block'\n    }, disabled && {\n      color: textDisabledColor,\n      selectors: (_a = {}, _a[HighContrastSelector] = {\n        color: 'GrayText'\n      }, _a)\n    }, inlineLabel && !onOffMissing && {\n      marginRight: 16\n    }, onOffMissing && inlineLabel && {\n      order: 1,\n      marginLeft: 16\n    }, inlineLabel && {\n      wordBreak: 'break-all'\n    }],\n    container: ['ms-Toggle-innerContainer', {\n      display: 'flex',\n      position: 'relative'\n    }],\n    pill: ['ms-Toggle-background', getFocusStyle(theme, {\n      inset: -3\n    }), {\n      fontSize: '20px',\n      boxSizing: 'border-box',\n      width: DEFAULT_PILL_WIDTH,\n      height: DEFAULT_PILL_HEIGHT,\n      borderRadius: DEFAULT_PILL_HEIGHT / 2,\n      transition: 'all 0.1s ease',\n      border: \"1px solid \" + pillBorderColor,\n      background: pillUncheckedBackground,\n      cursor: 'pointer',\n      display: 'flex',\n      alignItems: 'center',\n      padding: '0 3px'\n    }, !disabled && [!checked && {\n      selectors: {\n        ':hover': [{\n          borderColor: pillBorderHoveredColor\n        }],\n        ':hover .ms-Toggle-thumb': [{\n          backgroundColor: thumbUncheckedHoveredBackground,\n          selectors: (_b = {}, _b[HighContrastSelector] = {\n            borderColor: 'Highlight'\n          }, _b)\n        }]\n      }\n    }, checked && [{\n      background: pillCheckedBackground,\n      borderColor: 'transparent',\n      justifyContent: 'flex-end'\n    }, {\n      selectors: (_c = {\n        ':hover': [{\n          backgroundColor: pillCheckedHoveredBackground,\n          borderColor: 'transparent',\n          selectors: (_d = {}, _d[HighContrastSelector] = {\n            backgroundColor: 'Highlight'\n          }, _d)\n        }]\n      }, _c[HighContrastSelector] = __assign({\n        backgroundColor: 'Highlight'\n      }, getHighContrastNoAdjustStyle()), _c)\n    }]], disabled && [{\n      cursor: 'default'\n    }, !checked && [{\n      borderColor: pillBorderDisabledColor\n    }], checked && [{\n      backgroundColor: pillCheckedDisabledBackground,\n      borderColor: 'transparent',\n      justifyContent: 'flex-end'\n    }]], !disabled && {\n      selectors: {\n        '&:hover': {\n          selectors: (_e = {}, _e[HighContrastSelector] = {\n            borderColor: 'Highlight'\n          }, _e)\n        }\n      }\n    }],\n    thumb: ['ms-Toggle-thumb', {\n      display: 'block',\n      width: DEFAULT_THUMB_SIZE,\n      height: DEFAULT_THUMB_SIZE,\n      borderRadius: '50%',\n      transition: 'all 0.1s ease',\n      backgroundColor: thumbBackground,\n\n      /* Border is added to handle high contrast mode for Firefox */\n      borderColor: 'transparent',\n      borderWidth: DEFAULT_THUMB_SIZE / 2,\n      borderStyle: 'solid',\n      boxSizing: 'border-box'\n    }, !disabled && checked && [{\n      backgroundColor: thumbCheckedBackground,\n      selectors: (_f = {}, _f[HighContrastSelector] = {\n        backgroundColor: 'Window',\n        borderColor: 'Window'\n      }, _f)\n    }], disabled && [!checked && [{\n      backgroundColor: thumbDisabledBackground\n    }], checked && [{\n      backgroundColor: thumbCheckedDisabledBackground\n    }]]],\n    text: ['ms-Toggle-stateText', {\n      selectors: {\n        // Workaround: make rules more specific than Label rules.\n        '&&': {\n          padding: '0',\n          margin: '0 8px',\n          userSelect: 'none',\n          fontWeight: FontWeights.regular\n        }\n      }\n    }, disabled && {\n      selectors: {\n        '&&': {\n          color: textDisabledColor,\n          selectors: (_g = {}, _g[HighContrastSelector] = {\n            color: 'GrayText'\n          }, _g)\n        }\n      }\n    }]\n  };\n};","function hsl2rgb(hsl) {\n  var h = hsl[0] / 360,\n      s = hsl[1] / 100,\n      l = hsl[2] / 100,\n      t1,\n      t2,\n      t3,\n      rgb,\n      val;\n\n  if (s == 0) {\n    val = l * 255;\n    return [val, val, val];\n  }\n\n  if (l < 0.5) t2 = l * (1 + s);else t2 = l + s - l * s;\n  t1 = 2 * l - t2;\n  rgb = [0, 0, 0];\n\n  for (var i = 0; i < 3; i++) {\n    t3 = h + 1 / 3 * -(i - 1);\n    t3 < 0 && t3++;\n    t3 > 1 && t3--;\n    if (6 * t3 < 1) val = t1 + (t2 - t1) * 6 * t3;else if (2 * t3 < 1) val = t2;else if (3 * t3 < 2) val = t1 + (t2 - t1) * (2 / 3 - t3) * 6;else val = t1;\n    rgb[i] = val * 255;\n  }\n\n  return rgb;\n}\n\nmodule.exports = hsl2rgb;","var clamp = require(\"../util/clamp\");\n\nfunction componentToHex(c) {\n  var value = Math.round(clamp(c, 0, 255));\n  var hex = value.toString(16);\n  return hex.length == 1 ? \"0\" + hex : hex;\n}\n\nfunction rgb2hex(rgb) {\n  var alpha = rgb.length === 4 ? componentToHex(rgb[3] * 255) : \"\";\n  return \"#\" + componentToHex(rgb[0]) + componentToHex(rgb[1]) + componentToHex(rgb[2]) + alpha;\n}\n\nmodule.exports = rgb2hex;","var component = /-?\\d+(\\.\\d+)?%?/g;\n\nfunction extractComponents(color) {\n  return color.match(component);\n}\n\nmodule.exports = extractComponents;","function expand(hex) {\n  var result = \"#\";\n\n  for (var i = 1; i < hex.length; i++) {\n    var val = hex.charAt(i);\n    result += val + val;\n  }\n\n  return result;\n}\n\nfunction hex(hex) {\n  // #RGB or #RGBA\n  if (hex.length === 4 || hex.length === 5) {\n    hex = expand(hex);\n  }\n\n  var rgb = [parseInt(hex.substring(1, 3), 16), parseInt(hex.substring(3, 5), 16), parseInt(hex.substring(5, 7), 16)]; // #RRGGBBAA\n\n  if (hex.length === 9) {\n    var alpha = parseFloat((parseInt(hex.substring(7, 9), 16) / 255).toFixed(2));\n    rgb.push(alpha);\n  }\n\n  return rgb;\n}\n\nmodule.exports = hex;","var extractComponents = require(\"./extractComponents\");\n\nvar clamp = require(\"../util/clamp\");\n\nfunction parseHslComponent(component, i) {\n  component = parseFloat(component);\n\n  switch (i) {\n    case 0:\n      return clamp(component, 0, 360);\n\n    case 1:\n    case 2:\n      return clamp(component, 0, 100);\n\n    case 3:\n      return clamp(component, 0, 1);\n  }\n}\n\nfunction hsl(color) {\n  return extractComponents(color).map(parseHslComponent);\n}\n\nmodule.exports = hsl;","var hsl = require(\"./hsl\");\n\nvar hex = require(\"./hex\");\n\nvar rgb = require(\"./rgb\");\n\nvar hsl2rgb = require(\"../convert/hsl2rgb\");\n\nfunction hsl2rgbParse(color) {\n  var h = hsl(color);\n  var r = hsl2rgb(h); // handle alpha since hsl2rgb doesn't know (or care!) about it\n\n  if (h.length === 4) {\n    r.push(h[3]);\n  }\n\n  return r;\n}\n\nvar space2parser = {\n  \"#\": hex,\n  \"hsl\": hsl2rgbParse,\n  \"rgb\": rgb\n};\n\nfunction parse(color) {\n  for (var scheme in space2parser) {\n    if (color.indexOf(scheme) === 0) {\n      return space2parser[scheme](color);\n    }\n  }\n}\n\nparse.rgb = rgb;\nparse.hsl = hsl;\nparse.hex = hex;\nmodule.exports = parse;","var extractComponents = require(\"./extractComponents\");\n\nvar clamp = require(\"../util/clamp\");\n\nfunction parseRgbComponent(component, i) {\n  if (i < 3) {\n    if (component.indexOf('%') != -1) {\n      return Math.round(255 * clamp(parseInt(component, 10), 0, 100) / 100);\n    } else {\n      return clamp(parseInt(component, 10), 0, 255);\n    }\n  } else {\n    return clamp(parseFloat(component), 0, 1);\n  }\n}\n\nfunction rgb(color) {\n  return extractComponents(color).map(parseRgbComponent);\n}\n\nmodule.exports = rgb;","function clamp(val, min, max) {\n  return Math.min(Math.max(val, min), max);\n}\n\nmodule.exports = clamp;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.yuv2rgb = yuv2rgb;\nexports.rgb2yuv = rgb2yuv;\n\nfunction yuv2rgb(yuv) {\n  var y = yuv[0],\n      u = yuv[1],\n      v = yuv[2],\n      r,\n      g,\n      b;\n  r = y * 1 + u * 0 + v * 1.13983;\n  g = y * 1 + u * -0.39465 + v * -0.58060;\n  b = y * 1 + u * 2.02311 + v * 0;\n  r = Math.min(Math.max(0, r), 1);\n  g = Math.min(Math.max(0, g), 1);\n  b = Math.min(Math.max(0, b), 1);\n  return [r * 255, g * 255, b * 255];\n}\n\nfunction rgb2yuv(rgb) {\n  var r = rgb[0] / 255,\n      g = rgb[1] / 255,\n      b = rgb[2] / 255;\n  var y = r * 0.299 + g * 0.587 + b * 0.114;\n  var u = r * -0.14713 + g * -0.28886 + b * 0.436;\n  var v = r * 0.615 + g * -0.51499 + b * -0.10001;\n  return [y, u, v];\n}\n\n;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getBase16Theme = exports.createStyling = exports.invertTheme = undefined;\n\nvar _typeof2 = require('babel-runtime/helpers/typeof');\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _slicedToArray2 = require('babel-runtime/helpers/slicedToArray');\n\nvar _slicedToArray3 = _interopRequireDefault(_slicedToArray2);\n\nvar _keys = require('babel-runtime/core-js/object/keys');\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nvar _lodash = require('lodash.curry');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _base = require('base16');\n\nvar base16 = _interopRequireWildcard(_base);\n\nvar _rgb2hex = require('pure-color/convert/rgb2hex');\n\nvar _rgb2hex2 = _interopRequireDefault(_rgb2hex);\n\nvar _parse = require('pure-color/parse');\n\nvar _parse2 = _interopRequireDefault(_parse);\n\nvar _lodash3 = require('lodash.flow');\n\nvar _lodash4 = _interopRequireDefault(_lodash3);\n\nvar _colorConverters = require('./colorConverters');\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar DEFAULT_BASE16 = base16.default;\nvar BASE16_KEYS = (0, _keys2.default)(DEFAULT_BASE16); // we need a correcting factor, so that a dark, but not black background color\n// converts to bright enough inversed color\n\nvar flip = function flip(x) {\n  return x < 0.25 ? 1 : x < 0.5 ? 0.9 - x : 1.1 - x;\n};\n\nvar invertColor = (0, _lodash4.default)(_parse2.default, _colorConverters.rgb2yuv, function (_ref) {\n  var _ref2 = (0, _slicedToArray3.default)(_ref, 3),\n      y = _ref2[0],\n      u = _ref2[1],\n      v = _ref2[2];\n\n  return [flip(y), u, v];\n}, _colorConverters.yuv2rgb, _rgb2hex2.default);\n\nvar merger = function merger(styling) {\n  return function (prevStyling) {\n    return {\n      className: [prevStyling.className, styling.className].filter(Boolean).join(' '),\n      style: (0, _extends3.default)({}, prevStyling.style || {}, styling.style || {})\n    };\n  };\n};\n\nvar mergeStyling = function mergeStyling(customStyling, defaultStyling) {\n  if (customStyling === undefined) {\n    return defaultStyling;\n  }\n\n  if (defaultStyling === undefined) {\n    return customStyling;\n  }\n\n  var customType = typeof customStyling === 'undefined' ? 'undefined' : (0, _typeof3.default)(customStyling);\n  var defaultType = typeof defaultStyling === 'undefined' ? 'undefined' : (0, _typeof3.default)(defaultStyling);\n\n  switch (customType) {\n    case 'string':\n      switch (defaultType) {\n        case 'string':\n          return [defaultStyling, customStyling].filter(Boolean).join(' ');\n\n        case 'object':\n          return merger({\n            className: customStyling,\n            style: defaultStyling\n          });\n\n        case 'function':\n          return function (styling) {\n            for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n              args[_key - 1] = arguments[_key];\n            }\n\n            return merger({\n              className: customStyling\n            })(defaultStyling.apply(undefined, [styling].concat(args)));\n          };\n      }\n\n    case 'object':\n      switch (defaultType) {\n        case 'string':\n          return merger({\n            className: defaultStyling,\n            style: customStyling\n          });\n\n        case 'object':\n          return (0, _extends3.default)({}, defaultStyling, customStyling);\n\n        case 'function':\n          return function (styling) {\n            for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n              args[_key2 - 1] = arguments[_key2];\n            }\n\n            return merger({\n              style: customStyling\n            })(defaultStyling.apply(undefined, [styling].concat(args)));\n          };\n      }\n\n    case 'function':\n      switch (defaultType) {\n        case 'string':\n          return function (styling) {\n            for (var _len3 = arguments.length, args = Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n              args[_key3 - 1] = arguments[_key3];\n            }\n\n            return customStyling.apply(undefined, [merger(styling)({\n              className: defaultStyling\n            })].concat(args));\n          };\n\n        case 'object':\n          return function (styling) {\n            for (var _len4 = arguments.length, args = Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n              args[_key4 - 1] = arguments[_key4];\n            }\n\n            return customStyling.apply(undefined, [merger(styling)({\n              style: defaultStyling\n            })].concat(args));\n          };\n\n        case 'function':\n          return function (styling) {\n            for (var _len5 = arguments.length, args = Array(_len5 > 1 ? _len5 - 1 : 0), _key5 = 1; _key5 < _len5; _key5++) {\n              args[_key5 - 1] = arguments[_key5];\n            }\n\n            return customStyling.apply(undefined, [defaultStyling.apply(undefined, [styling].concat(args))].concat(args));\n          };\n      }\n\n  }\n};\n\nvar mergeStylings = function mergeStylings(customStylings, defaultStylings) {\n  var keys = (0, _keys2.default)(defaultStylings);\n\n  for (var key in customStylings) {\n    if (keys.indexOf(key) === -1) keys.push(key);\n  }\n\n  return keys.reduce(function (mergedStyling, key) {\n    return mergedStyling[key] = mergeStyling(customStylings[key], defaultStylings[key]), mergedStyling;\n  }, {});\n};\n\nvar getStylingByKeys = function getStylingByKeys(mergedStyling, keys) {\n  for (var _len6 = arguments.length, args = Array(_len6 > 2 ? _len6 - 2 : 0), _key6 = 2; _key6 < _len6; _key6++) {\n    args[_key6 - 2] = arguments[_key6];\n  }\n\n  if (keys === null) {\n    return mergedStyling;\n  }\n\n  if (!Array.isArray(keys)) {\n    keys = [keys];\n  }\n\n  var styles = keys.map(function (key) {\n    return mergedStyling[key];\n  }).filter(Boolean);\n  var props = styles.reduce(function (obj, s) {\n    if (typeof s === 'string') {\n      obj.className = [obj.className, s].filter(Boolean).join(' ');\n    } else if ((typeof s === 'undefined' ? 'undefined' : (0, _typeof3.default)(s)) === 'object') {\n      obj.style = (0, _extends3.default)({}, obj.style, s);\n    } else if (typeof s === 'function') {\n      obj = (0, _extends3.default)({}, obj, s.apply(undefined, [obj].concat(args)));\n    }\n\n    return obj;\n  }, {\n    className: '',\n    style: {}\n  });\n\n  if (!props.className) {\n    delete props.className;\n  }\n\n  if ((0, _keys2.default)(props.style).length === 0) {\n    delete props.style;\n  }\n\n  return props;\n};\n\nvar invertTheme = exports.invertTheme = function invertTheme(theme) {\n  return (0, _keys2.default)(theme).reduce(function (t, key) {\n    return t[key] = /^base/.test(key) ? invertColor(theme[key]) : key === 'scheme' ? theme[key] + ':inverted' : theme[key], t;\n  }, {});\n};\n\nvar createStyling = exports.createStyling = (0, _lodash2.default)(function (getStylingFromBase16) {\n  for (var _len7 = arguments.length, args = Array(_len7 > 3 ? _len7 - 3 : 0), _key7 = 3; _key7 < _len7; _key7++) {\n    args[_key7 - 3] = arguments[_key7];\n  }\n\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var themeOrStyling = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var _options$defaultBase = options.defaultBase16,\n      defaultBase16 = _options$defaultBase === undefined ? DEFAULT_BASE16 : _options$defaultBase,\n      _options$base16Themes = options.base16Themes,\n      base16Themes = _options$base16Themes === undefined ? null : _options$base16Themes;\n  var base16Theme = getBase16Theme(themeOrStyling, base16Themes);\n\n  if (base16Theme) {\n    themeOrStyling = (0, _extends3.default)({}, base16Theme, themeOrStyling);\n  }\n\n  var theme = BASE16_KEYS.reduce(function (t, key) {\n    return t[key] = themeOrStyling[key] || defaultBase16[key], t;\n  }, {});\n  var customStyling = (0, _keys2.default)(themeOrStyling).reduce(function (s, key) {\n    return BASE16_KEYS.indexOf(key) === -1 ? (s[key] = themeOrStyling[key], s) : s;\n  }, {});\n  var defaultStyling = getStylingFromBase16(theme);\n  var mergedStyling = mergeStylings(customStyling, defaultStyling);\n  return (0, _lodash2.default)(getStylingByKeys, 2).apply(undefined, [mergedStyling].concat(args));\n}, 3);\n\nvar getBase16Theme = exports.getBase16Theme = function getBase16Theme(theme, base16Themes) {\n  if (theme && theme.extend) {\n    theme = theme.extend;\n  }\n\n  if (typeof theme === 'string') {\n    var _theme$split = theme.split(':'),\n        _theme$split2 = (0, _slicedToArray3.default)(_theme$split, 2),\n        themeName = _theme$split2[0],\n        modifier = _theme$split2[1];\n\n    theme = (base16Themes || {})[themeName] || base16[themeName];\n\n    if (modifier === 'inverted') {\n      theme = invertTheme(theme);\n    }\n  }\n\n  return theme && theme.hasOwnProperty('base00') ? theme : undefined;\n};","'use strict';\n\nexports.__esModule = true;\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _JSONArrow = require('./JSONArrow');\n\nvar _JSONArrow2 = _interopRequireDefault(_JSONArrow);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\n\nvar ItemRange = function (_React$Component) {\n  (0, _inherits3['default'])(ItemRange, _React$Component);\n\n  function ItemRange(props) {\n    (0, _classCallCheck3['default'])(this, ItemRange);\n\n    var _this = (0, _possibleConstructorReturn3['default'])(this, _React$Component.call(this, props));\n\n    _this.state = {\n      expanded: false\n    };\n    _this.handleClick = _this.handleClick.bind(_this);\n    return _this;\n  }\n\n  ItemRange.prototype.render = function render() {\n    var _props = this.props,\n        styling = _props.styling,\n        from = _props.from,\n        to = _props.to,\n        renderChildNodes = _props.renderChildNodes,\n        nodeType = _props.nodeType;\n    return this.state.expanded ? _react2['default'].createElement('div', styling('itemRange', this.state.expanded), renderChildNodes(this.props, from, to)) : _react2['default'].createElement('div', (0, _extends3['default'])({}, styling('itemRange', this.state.expanded), {\n      onClick: this.handleClick\n    }), _react2['default'].createElement(_JSONArrow2['default'], {\n      nodeType: nodeType,\n      styling: styling,\n      expanded: false,\n      onClick: this.handleClick,\n      arrowStyle: 'double'\n    }), from + ' ... ' + to);\n  };\n\n  ItemRange.prototype.handleClick = function handleClick() {\n    this.setState({\n      expanded: !this.state.expanded\n    });\n  };\n\n  return ItemRange;\n}(_react2['default'].Component);\n\nItemRange.propTypes = {\n  styling: _propTypes2['default'].func.isRequired,\n  from: _propTypes2['default'].number.isRequired,\n  to: _propTypes2['default'].number.isRequired,\n  renderChildNodes: _propTypes2['default'].func.isRequired,\n  nodeType: _propTypes2['default'].string.isRequired\n};\nexports['default'] = ItemRange;","'use strict';\n\nexports.__esModule = true;\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _objectWithoutProperties2 = require('babel-runtime/helpers/objectWithoutProperties');\n\nvar _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _JSONNestedNode = require('./JSONNestedNode');\n\nvar _JSONNestedNode2 = _interopRequireDefault(_JSONNestedNode);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n} // Returns the \"n Items\" string for this node,\n// generating and caching it if it hasn't been created yet.\n\n\nfunction createItemString(data) {\n  return data.length + ' ' + (data.length !== 1 ? 'items' : 'item');\n} // Configures <JSONNestedNode> to render an Array\n\n\nvar JSONArrayNode = function JSONArrayNode(_ref) {\n  var data = _ref.data,\n      props = (0, _objectWithoutProperties3['default'])(_ref, ['data']);\n  return _react2['default'].createElement(_JSONNestedNode2['default'], (0, _extends3['default'])({}, props, {\n    data: data,\n    nodeType: 'Array',\n    nodeTypeIndicator: '[]',\n    createItemString: createItemString,\n    expandable: data.length > 0\n  }));\n};\n\nJSONArrayNode.propTypes = {\n  data: _propTypes2['default'].array\n};\nexports['default'] = JSONArrayNode;","'use strict';\n\nexports.__esModule = true;\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\n\nvar JSONArrow = function JSONArrow(_ref) {\n  var styling = _ref.styling,\n      arrowStyle = _ref.arrowStyle,\n      expanded = _ref.expanded,\n      nodeType = _ref.nodeType,\n      onClick = _ref.onClick;\n  return _react2['default'].createElement('div', (0, _extends3['default'])({}, styling('arrowContainer', arrowStyle), {\n    onClick: onClick\n  }), _react2['default'].createElement('div', styling(['arrow', 'arrowSign'], nodeType, expanded, arrowStyle), \"\\u25B6\", arrowStyle === 'double' && _react2['default'].createElement('div', styling(['arrowSign', 'arrowSignInner']), \"\\u25B6\")));\n};\n\nJSONArrow.propTypes = {\n  styling: _propTypes2['default'].func.isRequired,\n  arrowStyle: _propTypes2['default'].oneOf(['single', 'double']),\n  expanded: _propTypes2['default'].bool.isRequired,\n  nodeType: _propTypes2['default'].string.isRequired,\n  onClick: _propTypes2['default'].func.isRequired\n};\nJSONArrow.defaultProps = {\n  arrowStyle: 'single'\n};\nexports['default'] = JSONArrow;","'use strict';\n\nexports.__esModule = true;\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _objectWithoutProperties2 = require('babel-runtime/helpers/objectWithoutProperties');\n\nvar _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);\n\nvar _getIterator2 = require('babel-runtime/core-js/get-iterator');\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nvar _isSafeInteger = require('babel-runtime/core-js/number/is-safe-integer');\n\nvar _isSafeInteger2 = _interopRequireDefault(_isSafeInteger);\n\nexports['default'] = JSONIterableNode;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _JSONNestedNode = require('./JSONNestedNode');\n\nvar _JSONNestedNode2 = _interopRequireDefault(_JSONNestedNode);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n} // Returns the \"n Items\" string for this node,\n// generating and caching it if it hasn't been created yet.\n\n\nfunction createItemString(data, limit) {\n  var count = 0;\n  var hasMore = false;\n\n  if ((0, _isSafeInteger2['default'])(data.size)) {\n    count = data.size;\n  } else {\n    // eslint-disable-next-line no-unused-vars\n    for (var _iterator = data, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : (0, _getIterator3['default'])(_iterator);;) {\n      var _ref;\n\n      if (_isArray) {\n        if (_i >= _iterator.length) break;\n        _ref = _iterator[_i++];\n      } else {\n        _i = _iterator.next();\n        if (_i.done) break;\n        _ref = _i.value;\n      }\n\n      var entry = _ref;\n\n      if (limit && count + 1 > limit) {\n        hasMore = true;\n        break;\n      }\n\n      count += 1;\n    }\n  }\n\n  return '' + (hasMore ? '>' : '') + count + ' ' + (count !== 1 ? 'entries' : 'entry');\n} // Configures <JSONNestedNode> to render an iterable\n\n\nfunction JSONIterableNode(_ref2) {\n  var props = (0, _objectWithoutProperties3['default'])(_ref2, []);\n  return _react2['default'].createElement(_JSONNestedNode2['default'], (0, _extends3['default'])({}, props, {\n    nodeType: 'Iterable',\n    nodeTypeIndicator: '()',\n    createItemString: createItemString\n  }));\n}","'use strict';\n\nexports.__esModule = true;\n\nvar _keys = require('babel-runtime/core-js/object/keys');\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _JSONArrow = require('./JSONArrow');\n\nvar _JSONArrow2 = _interopRequireDefault(_JSONArrow);\n\nvar _getCollectionEntries = require('./getCollectionEntries');\n\nvar _getCollectionEntries2 = _interopRequireDefault(_getCollectionEntries);\n\nvar _JSONNode = require('./JSONNode');\n\nvar _JSONNode2 = _interopRequireDefault(_JSONNode);\n\nvar _ItemRange = require('./ItemRange');\n\nvar _ItemRange2 = _interopRequireDefault(_ItemRange);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\n/**\n * Renders nested values (eg. objects, arrays, lists, etc.)\n */\n\n\nfunction renderChildNodes(props, from, to) {\n  var nodeType = props.nodeType,\n      data = props.data,\n      collectionLimit = props.collectionLimit,\n      circularCache = props.circularCache,\n      keyPath = props.keyPath,\n      postprocessValue = props.postprocessValue,\n      sortObjectKeys = props.sortObjectKeys;\n  var childNodes = [];\n  (0, _getCollectionEntries2['default'])(nodeType, data, sortObjectKeys, collectionLimit, from, to).forEach(function (entry) {\n    if (entry.to) {\n      childNodes.push(_react2['default'].createElement(_ItemRange2['default'], (0, _extends3['default'])({}, props, {\n        key: 'ItemRange--' + entry.from + '-' + entry.to,\n        from: entry.from,\n        to: entry.to,\n        renderChildNodes: renderChildNodes\n      })));\n    } else {\n      var key = entry.key,\n          value = entry.value;\n      var isCircular = circularCache.indexOf(value) !== -1;\n\n      var node = _react2['default'].createElement(_JSONNode2['default'], (0, _extends3['default'])({}, props, {\n        postprocessValue: postprocessValue,\n        collectionLimit: collectionLimit\n      }, {\n        key: 'Node--' + key,\n        keyPath: [key].concat(keyPath),\n        value: postprocessValue(value),\n        circularCache: [].concat(circularCache, [value]),\n        isCircular: isCircular,\n        hideRoot: false\n      }));\n\n      if (node !== false) {\n        childNodes.push(node);\n      }\n    }\n  });\n  return childNodes;\n}\n\nfunction getStateFromProps(props) {\n  // calculate individual node expansion if necessary\n  var expanded = props.shouldExpandNode && !props.isCircular ? props.shouldExpandNode(props.keyPath, props.data, props.level) : false;\n  return {\n    expanded: expanded\n  };\n}\n\nvar JSONNestedNode = function (_React$Component) {\n  (0, _inherits3['default'])(JSONNestedNode, _React$Component);\n\n  function JSONNestedNode(props) {\n    (0, _classCallCheck3['default'])(this, JSONNestedNode);\n\n    var _this = (0, _possibleConstructorReturn3['default'])(this, _React$Component.call(this, props));\n\n    _this.handleClick = function () {\n      if (_this.props.expandable) {\n        _this.setState({\n          expanded: !_this.state.expanded\n        });\n      }\n    };\n\n    _this.state = getStateFromProps(props);\n    return _this;\n  }\n\n  JSONNestedNode.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n    var nextState = getStateFromProps(nextProps);\n\n    if (getStateFromProps(this.props).expanded !== nextState.expanded) {\n      this.setState(nextState);\n    }\n  };\n\n  JSONNestedNode.prototype.shouldComponentUpdate = function shouldComponentUpdate(nextProps, nextState) {\n    var _this2 = this;\n\n    return !!(0, _keys2['default'])(nextProps).find(function (key) {\n      return key !== 'circularCache' && (key === 'keyPath' ? nextProps[key].join('/') !== _this2.props[key].join('/') : nextProps[key] !== _this2.props[key]);\n    }) || nextState.expanded !== this.state.expanded;\n  };\n\n  JSONNestedNode.prototype.render = function render() {\n    var _props = this.props,\n        getItemString = _props.getItemString,\n        nodeTypeIndicator = _props.nodeTypeIndicator,\n        nodeType = _props.nodeType,\n        data = _props.data,\n        hideRoot = _props.hideRoot,\n        createItemString = _props.createItemString,\n        styling = _props.styling,\n        collectionLimit = _props.collectionLimit,\n        keyPath = _props.keyPath,\n        labelRenderer = _props.labelRenderer,\n        expandable = _props.expandable;\n    var expanded = this.state.expanded;\n    var renderedChildren = expanded || hideRoot && this.props.level === 0 ? renderChildNodes((0, _extends3['default'])({}, this.props, {\n      level: this.props.level + 1\n    })) : null;\n\n    var itemType = _react2['default'].createElement('span', styling('nestedNodeItemType', expanded), nodeTypeIndicator);\n\n    var renderedItemString = getItemString(nodeType, data, itemType, createItemString(data, collectionLimit));\n    var stylingArgs = [keyPath, nodeType, expanded, expandable];\n    return hideRoot ? _react2['default'].createElement('li', styling.apply(undefined, ['rootNode'].concat(stylingArgs)), _react2['default'].createElement('ul', styling.apply(undefined, ['rootNodeChildren'].concat(stylingArgs)), renderedChildren)) : _react2['default'].createElement('li', styling.apply(undefined, ['nestedNode'].concat(stylingArgs)), expandable && _react2['default'].createElement(_JSONArrow2['default'], {\n      styling: styling,\n      nodeType: nodeType,\n      expanded: expanded,\n      onClick: this.handleClick\n    }), _react2['default'].createElement('label', (0, _extends3['default'])({}, styling.apply(undefined, [['label', 'nestedNodeLabel']].concat(stylingArgs)), {\n      onClick: this.handleClick\n    }), labelRenderer.apply(undefined, stylingArgs)), _react2['default'].createElement('span', (0, _extends3['default'])({}, styling.apply(undefined, ['nestedNodeItemString'].concat(stylingArgs)), {\n      onClick: this.handleClick\n    }), renderedItemString), _react2['default'].createElement('ul', styling.apply(undefined, ['nestedNodeChildren'].concat(stylingArgs)), renderedChildren));\n  };\n\n  return JSONNestedNode;\n}(_react2['default'].Component);\n\nJSONNestedNode.propTypes = {\n  getItemString: _propTypes2['default'].func.isRequired,\n  nodeTypeIndicator: _propTypes2['default'].any,\n  nodeType: _propTypes2['default'].string.isRequired,\n  data: _propTypes2['default'].any,\n  hideRoot: _propTypes2['default'].bool.isRequired,\n  createItemString: _propTypes2['default'].func.isRequired,\n  styling: _propTypes2['default'].func.isRequired,\n  collectionLimit: _propTypes2['default'].number,\n  keyPath: _propTypes2['default'].arrayOf(_propTypes2['default'].oneOfType([_propTypes2['default'].string, _propTypes2['default'].number])).isRequired,\n  labelRenderer: _propTypes2['default'].func.isRequired,\n  shouldExpandNode: _propTypes2['default'].func,\n  level: _propTypes2['default'].number.isRequired,\n  sortObjectKeys: _propTypes2['default'].oneOfType([_propTypes2['default'].func, _propTypes2['default'].bool]),\n  isCircular: _propTypes2['default'].bool,\n  expandable: _propTypes2['default'].bool\n};\nJSONNestedNode.defaultProps = {\n  data: [],\n  circularCache: [],\n  level: 0,\n  expandable: true\n};\nexports['default'] = JSONNestedNode;","'use strict';\n\nexports.__esModule = true;\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _objectWithoutProperties2 = require('babel-runtime/helpers/objectWithoutProperties');\n\nvar _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _objType = require('./objType');\n\nvar _objType2 = _interopRequireDefault(_objType);\n\nvar _JSONObjectNode = require('./JSONObjectNode');\n\nvar _JSONObjectNode2 = _interopRequireDefault(_JSONObjectNode);\n\nvar _JSONArrayNode = require('./JSONArrayNode');\n\nvar _JSONArrayNode2 = _interopRequireDefault(_JSONArrayNode);\n\nvar _JSONIterableNode = require('./JSONIterableNode');\n\nvar _JSONIterableNode2 = _interopRequireDefault(_JSONIterableNode);\n\nvar _JSONValueNode = require('./JSONValueNode');\n\nvar _JSONValueNode2 = _interopRequireDefault(_JSONValueNode);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\n\nvar JSONNode = function JSONNode(_ref) {\n  var getItemString = _ref.getItemString,\n      keyPath = _ref.keyPath,\n      labelRenderer = _ref.labelRenderer,\n      styling = _ref.styling,\n      value = _ref.value,\n      valueRenderer = _ref.valueRenderer,\n      isCustomNode = _ref.isCustomNode,\n      rest = (0, _objectWithoutProperties3['default'])(_ref, ['getItemString', 'keyPath', 'labelRenderer', 'styling', 'value', 'valueRenderer', 'isCustomNode']);\n  var nodeType = isCustomNode(value) ? 'Custom' : (0, _objType2['default'])(value);\n  var simpleNodeProps = {\n    getItemString: getItemString,\n    key: keyPath[0],\n    keyPath: keyPath,\n    labelRenderer: labelRenderer,\n    nodeType: nodeType,\n    styling: styling,\n    value: value,\n    valueRenderer: valueRenderer\n  };\n  var nestedNodeProps = (0, _extends3['default'])({}, rest, simpleNodeProps, {\n    data: value,\n    isCustomNode: isCustomNode\n  });\n\n  switch (nodeType) {\n    case 'Object':\n    case 'Error':\n    case 'WeakMap':\n    case 'WeakSet':\n      return _react2['default'].createElement(_JSONObjectNode2['default'], nestedNodeProps);\n\n    case 'Array':\n      return _react2['default'].createElement(_JSONArrayNode2['default'], nestedNodeProps);\n\n    case 'Iterable':\n    case 'Map':\n    case 'Set':\n      return _react2['default'].createElement(_JSONIterableNode2['default'], nestedNodeProps);\n\n    case 'String':\n      return _react2['default'].createElement(_JSONValueNode2['default'], (0, _extends3['default'])({}, simpleNodeProps, {\n        valueGetter: function valueGetter(raw) {\n          return '\"' + raw + '\"';\n        }\n      }));\n\n    case 'Number':\n      return _react2['default'].createElement(_JSONValueNode2['default'], simpleNodeProps);\n\n    case 'Boolean':\n      return _react2['default'].createElement(_JSONValueNode2['default'], (0, _extends3['default'])({}, simpleNodeProps, {\n        valueGetter: function valueGetter(raw) {\n          return raw ? 'true' : 'false';\n        }\n      }));\n\n    case 'Date':\n      return _react2['default'].createElement(_JSONValueNode2['default'], (0, _extends3['default'])({}, simpleNodeProps, {\n        valueGetter: function valueGetter(raw) {\n          return raw.toISOString();\n        }\n      }));\n\n    case 'Null':\n      return _react2['default'].createElement(_JSONValueNode2['default'], (0, _extends3['default'])({}, simpleNodeProps, {\n        valueGetter: function valueGetter() {\n          return 'null';\n        }\n      }));\n\n    case 'Undefined':\n      return _react2['default'].createElement(_JSONValueNode2['default'], (0, _extends3['default'])({}, simpleNodeProps, {\n        valueGetter: function valueGetter() {\n          return 'undefined';\n        }\n      }));\n\n    case 'Function':\n    case 'Symbol':\n      return _react2['default'].createElement(_JSONValueNode2['default'], (0, _extends3['default'])({}, simpleNodeProps, {\n        valueGetter: function valueGetter(raw) {\n          return raw.toString();\n        }\n      }));\n\n    case 'Custom':\n      return _react2['default'].createElement(_JSONValueNode2['default'], simpleNodeProps);\n\n    default:\n      return _react2['default'].createElement(_JSONValueNode2['default'], (0, _extends3['default'])({}, simpleNodeProps, {\n        valueGetter: function valueGetter(raw) {\n          return '<' + nodeType + '>';\n        }\n      }));\n  }\n};\n\nJSONNode.propTypes = {\n  getItemString: _propTypes2['default'].func.isRequired,\n  keyPath: _propTypes2['default'].arrayOf(_propTypes2['default'].oneOfType([_propTypes2['default'].string, _propTypes2['default'].number])).isRequired,\n  labelRenderer: _propTypes2['default'].func.isRequired,\n  styling: _propTypes2['default'].func.isRequired,\n  value: _propTypes2['default'].any,\n  valueRenderer: _propTypes2['default'].func.isRequired,\n  isCustomNode: _propTypes2['default'].func.isRequired\n};\nexports['default'] = JSONNode;","'use strict';\n\nexports.__esModule = true;\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _objectWithoutProperties2 = require('babel-runtime/helpers/objectWithoutProperties');\n\nvar _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);\n\nvar _getOwnPropertyNames = require('babel-runtime/core-js/object/get-own-property-names');\n\nvar _getOwnPropertyNames2 = _interopRequireDefault(_getOwnPropertyNames);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _JSONNestedNode = require('./JSONNestedNode');\n\nvar _JSONNestedNode2 = _interopRequireDefault(_JSONNestedNode);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n} // Returns the \"n Items\" string for this node,\n// generating and caching it if it hasn't been created yet.\n\n\nfunction createItemString(data) {\n  var len = (0, _getOwnPropertyNames2['default'])(data).length;\n  return len + ' ' + (len !== 1 ? 'keys' : 'key');\n} // Configures <JSONNestedNode> to render an Object\n\n\nvar JSONObjectNode = function JSONObjectNode(_ref) {\n  var data = _ref.data,\n      props = (0, _objectWithoutProperties3['default'])(_ref, ['data']);\n  return _react2['default'].createElement(_JSONNestedNode2['default'], (0, _extends3['default'])({}, props, {\n    data: data,\n    nodeType: 'Object',\n    nodeTypeIndicator: props.nodeType === 'Error' ? 'Error()' : '{}',\n    createItemString: createItemString,\n    expandable: (0, _getOwnPropertyNames2['default'])(data).length > 0\n  }));\n};\n\nJSONObjectNode.propTypes = {\n  data: _propTypes2['default'].object,\n  nodeType: _propTypes2['default'].string\n};\nexports['default'] = JSONObjectNode;","'use strict';\n\nexports.__esModule = true;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\n/**\n * Renders simple values (eg. strings, numbers, booleans, etc)\n */\n\n\nvar JSONValueNode = function JSONValueNode(_ref) {\n  var nodeType = _ref.nodeType,\n      styling = _ref.styling,\n      labelRenderer = _ref.labelRenderer,\n      keyPath = _ref.keyPath,\n      valueRenderer = _ref.valueRenderer,\n      value = _ref.value,\n      valueGetter = _ref.valueGetter;\n  return _react2['default'].createElement('li', styling('value', nodeType, keyPath), _react2['default'].createElement('label', styling(['label', 'valueLabel'], nodeType, keyPath), labelRenderer(keyPath, nodeType, false, false)), _react2['default'].createElement('span', styling('valueText', nodeType, keyPath), valueRenderer.apply(undefined, [valueGetter(value), value].concat(keyPath))));\n};\n\nJSONValueNode.propTypes = {\n  nodeType: _propTypes2['default'].string.isRequired,\n  styling: _propTypes2['default'].func.isRequired,\n  labelRenderer: _propTypes2['default'].func.isRequired,\n  keyPath: _propTypes2['default'].arrayOf(_propTypes2['default'].oneOfType([_propTypes2['default'].string, _propTypes2['default'].number])).isRequired,\n  valueRenderer: _propTypes2['default'].func.isRequired,\n  value: _propTypes2['default'].any,\n  valueGetter: _propTypes2['default'].func\n};\nJSONValueNode.defaultProps = {\n  valueGetter: function valueGetter(value) {\n    return value;\n  }\n};\nexports['default'] = JSONValueNode;","'use strict';\n\nexports.__esModule = true;\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _reactBase16Styling = require('react-base16-styling');\n\nvar _solarized = require('./themes/solarized');\n\nvar _solarized2 = _interopRequireDefault(_solarized);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\n\nvar colorMap = function colorMap(theme) {\n  return {\n    BACKGROUND_COLOR: theme.base00,\n    TEXT_COLOR: theme.base07,\n    STRING_COLOR: theme.base0B,\n    DATE_COLOR: theme.base0B,\n    NUMBER_COLOR: theme.base09,\n    BOOLEAN_COLOR: theme.base09,\n    NULL_COLOR: theme.base08,\n    UNDEFINED_COLOR: theme.base08,\n    FUNCTION_COLOR: theme.base08,\n    SYMBOL_COLOR: theme.base08,\n    LABEL_COLOR: theme.base0D,\n    ARROW_COLOR: theme.base0D,\n    ITEM_STRING_COLOR: theme.base0B,\n    ITEM_STRING_EXPANDED_COLOR: theme.base03\n  };\n};\n\nvar valueColorMap = function valueColorMap(colors) {\n  return {\n    String: colors.STRING_COLOR,\n    Date: colors.DATE_COLOR,\n    Number: colors.NUMBER_COLOR,\n    Boolean: colors.BOOLEAN_COLOR,\n    Null: colors.NULL_COLOR,\n    Undefined: colors.UNDEFINED_COLOR,\n    Function: colors.FUNCTION_COLOR,\n    Symbol: colors.SYMBOL_COLOR\n  };\n};\n\nvar getDefaultThemeStyling = function getDefaultThemeStyling(theme) {\n  var colors = colorMap(theme);\n  return {\n    tree: {\n      border: 0,\n      padding: 0,\n      marginTop: '0.5em',\n      marginBottom: '0.5em',\n      marginLeft: '0.125em',\n      marginRight: 0,\n      listStyle: 'none',\n      MozUserSelect: 'none',\n      WebkitUserSelect: 'none',\n      backgroundColor: colors.BACKGROUND_COLOR\n    },\n    value: function value(_ref, nodeType, keyPath) {\n      var style = _ref.style;\n      return {\n        style: (0, _extends3['default'])({}, style, {\n          paddingTop: '0.25em',\n          paddingRight: 0,\n          marginLeft: '0.875em',\n          WebkitUserSelect: 'text',\n          MozUserSelect: 'text',\n          wordWrap: 'break-word',\n          paddingLeft: keyPath.length > 1 ? '2.125em' : '1.25em',\n          textIndent: '-0.5em',\n          wordBreak: 'break-all'\n        })\n      };\n    },\n    label: {\n      display: 'inline-block',\n      color: colors.LABEL_COLOR\n    },\n    valueLabel: {\n      margin: '0 0.5em 0 0'\n    },\n    valueText: function valueText(_ref2, nodeType) {\n      var style = _ref2.style;\n      return {\n        style: (0, _extends3['default'])({}, style, {\n          color: valueColorMap(colors)[nodeType]\n        })\n      };\n    },\n    itemRange: function itemRange(styling, expanded) {\n      return {\n        style: {\n          paddingTop: expanded ? 0 : '0.25em',\n          cursor: 'pointer',\n          color: colors.LABEL_COLOR\n        }\n      };\n    },\n    arrow: function arrow(_ref3, nodeType, expanded) {\n      var style = _ref3.style;\n      return {\n        style: (0, _extends3['default'])({}, style, {\n          marginLeft: 0,\n          transition: '150ms',\n          WebkitTransition: '150ms',\n          MozTransition: '150ms',\n          WebkitTransform: expanded ? 'rotateZ(90deg)' : 'rotateZ(0deg)',\n          MozTransform: expanded ? 'rotateZ(90deg)' : 'rotateZ(0deg)',\n          transform: expanded ? 'rotateZ(90deg)' : 'rotateZ(0deg)',\n          transformOrigin: '45% 50%',\n          WebkitTransformOrigin: '45% 50%',\n          MozTransformOrigin: '45% 50%',\n          position: 'relative',\n          lineHeight: '1.1em',\n          fontSize: '0.75em'\n        })\n      };\n    },\n    arrowContainer: function arrowContainer(_ref4, arrowStyle) {\n      var style = _ref4.style;\n      return {\n        style: (0, _extends3['default'])({}, style, {\n          display: 'inline-block',\n          paddingRight: '0.5em',\n          paddingLeft: arrowStyle === 'double' ? '1em' : 0,\n          cursor: 'pointer'\n        })\n      };\n    },\n    arrowSign: {\n      color: colors.ARROW_COLOR\n    },\n    arrowSignInner: {\n      position: 'absolute',\n      top: 0,\n      left: '-0.4em'\n    },\n    nestedNode: function nestedNode(_ref5, keyPath, nodeType, expanded, expandable) {\n      var style = _ref5.style;\n      return {\n        style: (0, _extends3['default'])({}, style, {\n          position: 'relative',\n          paddingTop: '0.25em',\n          marginLeft: keyPath.length > 1 ? '0.875em' : 0,\n          paddingLeft: !expandable ? '1.125em' : 0\n        })\n      };\n    },\n    rootNode: {\n      padding: 0,\n      margin: 0\n    },\n    nestedNodeLabel: function nestedNodeLabel(_ref6, keyPath, nodeType, expanded, expandable) {\n      var style = _ref6.style;\n      return {\n        style: (0, _extends3['default'])({}, style, {\n          margin: 0,\n          padding: 0,\n          WebkitUserSelect: expandable ? 'inherit' : 'text',\n          MozUserSelect: expandable ? 'inherit' : 'text',\n          cursor: expandable ? 'pointer' : 'default'\n        })\n      };\n    },\n    nestedNodeItemString: function nestedNodeItemString(_ref7, keyPath, nodeType, expanded) {\n      var style = _ref7.style;\n      return {\n        style: (0, _extends3['default'])({}, style, {\n          paddingLeft: '0.5em',\n          cursor: 'default',\n          color: expanded ? colors.ITEM_STRING_EXPANDED_COLOR : colors.ITEM_STRING_COLOR\n        })\n      };\n    },\n    nestedNodeItemType: {\n      marginLeft: '0.3em',\n      marginRight: '0.3em'\n    },\n    nestedNodeChildren: function nestedNodeChildren(_ref8, nodeType, expanded) {\n      var style = _ref8.style;\n      return {\n        style: (0, _extends3['default'])({}, style, {\n          padding: 0,\n          margin: 0,\n          listStyle: 'none',\n          display: expanded ? 'block' : 'none'\n        })\n      };\n    },\n    rootNodeChildren: {\n      padding: 0,\n      margin: 0,\n      listStyle: 'none'\n    }\n  };\n};\n\nexports['default'] = (0, _reactBase16Styling.createStyling)(getDefaultThemeStyling, {\n  defaultBase16: _solarized2['default']\n});","'use strict';\n\nexports.__esModule = true;\n\nvar _getIterator2 = require('babel-runtime/core-js/get-iterator');\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nvar _getOwnPropertyNames = require('babel-runtime/core-js/object/get-own-property-names');\n\nvar _getOwnPropertyNames2 = _interopRequireDefault(_getOwnPropertyNames);\n\nvar _keys = require('babel-runtime/core-js/object/keys');\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nexports['default'] = getCollectionEntries;\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\n\nfunction getLength(type, collection) {\n  if (type === 'Object') {\n    return (0, _keys2['default'])(collection).length;\n  } else if (type === 'Array') {\n    return collection.length;\n  }\n\n  return Infinity;\n}\n\nfunction isIterableMap(collection) {\n  return typeof collection.set === 'function';\n}\n\nfunction getEntries(type, collection, sortObjectKeys) {\n  var from = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n  var to = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : Infinity;\n  var res = void 0;\n\n  if (type === 'Object') {\n    var keys = (0, _getOwnPropertyNames2['default'])(collection);\n\n    if (sortObjectKeys) {\n      keys.sort(sortObjectKeys === true ? undefined : sortObjectKeys);\n    }\n\n    keys = keys.slice(from, to + 1);\n    res = {\n      entries: keys.map(function (key) {\n        return {\n          key: key,\n          value: collection[key]\n        };\n      })\n    };\n  } else if (type === 'Array') {\n    res = {\n      entries: collection.slice(from, to + 1).map(function (val, idx) {\n        return {\n          key: idx + from,\n          value: val\n        };\n      })\n    };\n  } else {\n    var idx = 0;\n    var entries = [];\n    var done = true;\n    var isMap = isIterableMap(collection);\n\n    for (var _iterator = collection, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : (0, _getIterator3['default'])(_iterator);;) {\n      var _ref;\n\n      if (_isArray) {\n        if (_i >= _iterator.length) break;\n        _ref = _iterator[_i++];\n      } else {\n        _i = _iterator.next();\n        if (_i.done) break;\n        _ref = _i.value;\n      }\n\n      var item = _ref;\n\n      if (idx > to) {\n        done = false;\n        break;\n      }\n\n      if (from <= idx) {\n        if (isMap && Array.isArray(item)) {\n          if (typeof item[0] === 'string' || typeof item[0] === 'number') {\n            entries.push({\n              key: item[0],\n              value: item[1]\n            });\n          } else {\n            entries.push({\n              key: '[entry ' + idx + ']',\n              value: {\n                '[key]': item[0],\n                '[value]': item[1]\n              }\n            });\n          }\n        } else {\n          entries.push({\n            key: idx,\n            value: item\n          });\n        }\n      }\n\n      idx++;\n    }\n\n    res = {\n      hasMore: !done,\n      entries: entries\n    };\n  }\n\n  return res;\n}\n\nfunction getRanges(from, to, limit) {\n  var ranges = [];\n\n  while (to - from > limit * limit) {\n    limit = limit * limit;\n  }\n\n  for (var i = from; i <= to; i += limit) {\n    ranges.push({\n      from: i,\n      to: Math.min(to, i + limit - 1)\n    });\n  }\n\n  return ranges;\n}\n\nfunction getCollectionEntries(type, collection, sortObjectKeys, limit) {\n  var from = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n  var to = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : Infinity;\n  var getEntriesBound = getEntries.bind(null, type, collection, sortObjectKeys);\n\n  if (!limit) {\n    return getEntriesBound().entries;\n  }\n\n  var isSubset = to < Infinity;\n  var length = Math.min(to - from, getLength(type, collection));\n\n  if (type !== 'Iterable') {\n    if (length <= limit || limit < 7) {\n      return getEntriesBound(from, to).entries;\n    }\n  } else {\n    if (length <= limit && !isSubset) {\n      return getEntriesBound(from, to).entries;\n    }\n  }\n\n  var limitedEntries = void 0;\n\n  if (type === 'Iterable') {\n    var _getEntriesBound = getEntriesBound(from, from + limit - 1),\n        hasMore = _getEntriesBound.hasMore,\n        entries = _getEntriesBound.entries;\n\n    limitedEntries = hasMore ? [].concat(entries, getRanges(from + limit, from + 2 * limit - 1, limit)) : entries;\n  } else {\n    limitedEntries = isSubset ? getRanges(from, to, limit) : [].concat(getEntriesBound(0, limit - 5).entries, getRanges(limit - 4, length - 5, limit), getEntriesBound(length - 4, length - 1).entries);\n  }\n\n  return limitedEntries;\n}","'use strict';\n\nexports.__esModule = true;\n\nvar _objectWithoutProperties2 = require('babel-runtime/helpers/objectWithoutProperties');\n\nvar _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _keys = require('babel-runtime/core-js/object/keys');\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _JSONNode = require('./JSONNode');\n\nvar _JSONNode2 = _interopRequireDefault(_JSONNode);\n\nvar _createStylingFromTheme = require('./createStylingFromTheme');\n\nvar _createStylingFromTheme2 = _interopRequireDefault(_createStylingFromTheme);\n\nvar _reactBase16Styling = require('react-base16-styling');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\n\nvar identity = function identity(value) {\n  return value;\n}; // ES6 + inline style port of JSONViewer https://bitbucket.org/davevedder/react-json-viewer/\n// all credits and original code to the author\n// Dave Vedder <veddermatic@gmail.com> http://www.eskimospy.com/\n// port by Daniele Zannotti http://www.github.com/dzannotti <dzannotti@me.com>\n\n\nvar expandRootNode = function expandRootNode(keyName, data, level) {\n  return level === 0;\n};\n\nvar defaultItemString = function defaultItemString(type, data, itemType, itemString) {\n  return _react2['default'].createElement('span', null, itemType, ' ', itemString);\n};\n\nvar defaultLabelRenderer = function defaultLabelRenderer(_ref) {\n  var label = _ref[0];\n  return _react2['default'].createElement('span', null, label, ':');\n};\n\nvar noCustomNode = function noCustomNode() {\n  return false;\n};\n\nfunction checkLegacyTheming(theme, props) {\n  var deprecatedStylingMethodsMap = {\n    getArrowStyle: 'arrow',\n    getListStyle: 'nestedNodeChildren',\n    getItemStringStyle: 'nestedNodeItemString',\n    getLabelStyle: 'label',\n    getValueStyle: 'valueText'\n  };\n  var deprecatedStylingMethods = (0, _keys2['default'])(deprecatedStylingMethodsMap).filter(function (name) {\n    return props[name];\n  });\n\n  if (deprecatedStylingMethods.length > 0) {\n    if (typeof theme === 'string') {\n      theme = {\n        extend: theme\n      };\n    } else {\n      theme = (0, _extends3['default'])({}, theme);\n    }\n\n    deprecatedStylingMethods.forEach(function (name) {\n      // eslint-disable-next-line no-console\n      console.error('Styling method \"' + name + '\" is deprecated, use \"theme\" property instead');\n\n      theme[deprecatedStylingMethodsMap[name]] = function (_ref2) {\n        for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n\n        var style = _ref2.style;\n        return {\n          style: (0, _extends3['default'])({}, style, props[name].apply(props, args))\n        };\n      };\n    });\n  }\n\n  return theme;\n}\n\nfunction getStateFromProps(props) {\n  var theme = checkLegacyTheming(props.theme, props);\n\n  if (props.invertTheme) {\n    if (typeof theme === 'string') {\n      theme = theme + ':inverted';\n    } else if (theme && theme.extend) {\n      if (typeof theme === 'string') {\n        theme = (0, _extends3['default'])({}, theme, {\n          extend: theme.extend + ':inverted'\n        });\n      } else {\n        theme = (0, _extends3['default'])({}, theme, {\n          extend: (0, _reactBase16Styling.invertTheme)(theme.extend)\n        });\n      }\n    } else if (theme) {\n      theme = (0, _reactBase16Styling.invertTheme)(theme);\n    }\n  }\n\n  return {\n    styling: (0, _createStylingFromTheme2['default'])(theme)\n  };\n}\n\nvar JSONTree = function (_React$Component) {\n  (0, _inherits3['default'])(JSONTree, _React$Component);\n\n  function JSONTree(props) {\n    (0, _classCallCheck3['default'])(this, JSONTree);\n\n    var _this = (0, _possibleConstructorReturn3['default'])(this, _React$Component.call(this, props));\n\n    _this.state = getStateFromProps(props);\n    return _this;\n  }\n\n  JSONTree.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n    var _this2 = this;\n\n    if (['theme', 'invertTheme'].find(function (k) {\n      return nextProps[k] !== _this2.props[k];\n    })) {\n      this.setState(getStateFromProps(nextProps));\n    }\n  };\n\n  JSONTree.prototype.shouldComponentUpdate = function shouldComponentUpdate(nextProps) {\n    var _this3 = this;\n\n    return !!(0, _keys2['default'])(nextProps).find(function (k) {\n      return k === 'keyPath' ? nextProps[k].join('/') !== _this3.props[k].join('/') : nextProps[k] !== _this3.props[k];\n    });\n  };\n\n  JSONTree.prototype.render = function render() {\n    var _props = this.props,\n        value = _props.data,\n        keyPath = _props.keyPath,\n        postprocessValue = _props.postprocessValue,\n        hideRoot = _props.hideRoot,\n        theme = _props.theme,\n        _ = _props.invertTheme,\n        rest = (0, _objectWithoutProperties3['default'])(_props, ['data', 'keyPath', 'postprocessValue', 'hideRoot', 'theme', 'invertTheme']);\n    var styling = this.state.styling;\n    return _react2['default'].createElement('ul', styling('tree'), _react2['default'].createElement(_JSONNode2['default'], (0, _extends3['default'])({}, (0, _extends3['default'])({\n      postprocessValue: postprocessValue,\n      hideRoot: hideRoot,\n      styling: styling\n    }, rest), {\n      keyPath: hideRoot ? [] : keyPath,\n      value: postprocessValue(value)\n    })));\n  };\n\n  return JSONTree;\n}(_react2['default'].Component);\n\nJSONTree.propTypes = {\n  data: _propTypes2['default'].oneOfType([_propTypes2['default'].array, _propTypes2['default'].object]).isRequired,\n  hideRoot: _propTypes2['default'].bool,\n  theme: _propTypes2['default'].oneOfType([_propTypes2['default'].object, _propTypes2['default'].string]),\n  invertTheme: _propTypes2['default'].bool,\n  keyPath: _propTypes2['default'].arrayOf(_propTypes2['default'].oneOfType([_propTypes2['default'].string, _propTypes2['default'].number])),\n  postprocessValue: _propTypes2['default'].func,\n  sortObjectKeys: _propTypes2['default'].oneOfType([_propTypes2['default'].func, _propTypes2['default'].bool])\n};\nJSONTree.defaultProps = {\n  shouldExpandNode: expandRootNode,\n  hideRoot: false,\n  keyPath: ['root'],\n  getItemString: defaultItemString,\n  labelRenderer: defaultLabelRenderer,\n  valueRenderer: identity,\n  postprocessValue: identity,\n  isCustomNode: noCustomNode,\n  collectionLimit: 50,\n  invertTheme: true\n};\nexports['default'] = JSONTree;","'use strict';\n\nexports.__esModule = true;\n\nvar _iterator = require('babel-runtime/core-js/symbol/iterator');\n\nvar _iterator2 = _interopRequireDefault(_iterator);\n\nexports['default'] = objType;\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\n\nfunction objType(obj) {\n  var type = Object.prototype.toString.call(obj).slice(8, -1);\n\n  if (type === 'Object' && typeof obj[_iterator2['default']] === 'function') {\n    return 'Iterable';\n  }\n\n  if (type === 'Custom' && obj.constructor !== Object && obj instanceof Object) {\n    // For projects implementing objects overriding `.prototype[Symbol.toStringTag]`\n    return 'Object';\n  }\n\n  return type;\n}","'use strict';\n\nexports.__esModule = true;\nexports['default'] = {\n  scheme: 'solarized',\n  author: 'ethan schoonover (http://ethanschoonover.com/solarized)',\n  base00: '#002b36',\n  base01: '#073642',\n  base02: '#586e75',\n  base03: '#657b83',\n  base04: '#839496',\n  base05: '#93a1a1',\n  base06: '#eee8d5',\n  base07: '#fdf6e3',\n  base08: '#dc322f',\n  base09: '#cb4b16',\n  base0A: '#b58900',\n  base0B: '#859900',\n  base0C: '#2aa198',\n  base0D: '#268bd2',\n  base0E: '#6c71c4',\n  base0F: '#d33682'\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SensorTabIndex = exports.SensorClassName = exports.SizeSensorId = void 0;\n/**\n * Created by hustcc on 18/6/9.\n * Contract: i@hust.cc\n */\n\nvar SizeSensorId = 'size-sensor-id';\nexports.SizeSensorId = SizeSensorId;\nvar SensorClassName = 'size-sensor-object';\nexports.SensorClassName = SensorClassName;\nvar SensorTabIndex = '-1';\nexports.SensorTabIndex = SensorTabIndex;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n/**\n * Created by hustcc on 18/6/9.\n * Contract: i@hust.cc\n */\n\nvar _default = function _default(fn) {\n  var delay = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 60;\n  var timer = null;\n  return function () {\n    var _this = this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    clearTimeout(timer);\n    timer = setTimeout(function () {\n      fn.apply(_this, args);\n    }, delay);\n  };\n};\n\nexports[\"default\"] = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n/**\n * Created by hustcc on 18/6/9.\n * Contract: i@hust.cc\n */\n\nvar id = 1;\n/**\n * generate unique id in application\n * @return {string}\n */\n\nvar _default = function _default() {\n  return \"\".concat(id++);\n};\n\nexports[\"default\"] = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ver = exports.clear = exports.bind = void 0;\n\nvar _sensorPool = require(\"./sensorPool\");\n/**\n * Created by hustcc on 18/6/9.[]\n * Contract: i@hust.cc\n */\n\n/**\n * bind an element with resize callback function\n * @param {*} element\n * @param {*} cb\n */\n\n\nvar bind = function bind(element, cb) {\n  var sensor = (0, _sensorPool.getSensor)(element); // listen with callback\n\n  sensor.bind(cb); // return unbind function\n\n  return function () {\n    sensor.unbind(cb);\n  };\n};\n/**\n * clear all the listener and sensor of an element\n * @param element\n */\n\n\nexports.bind = bind;\n\nvar clear = function clear(element) {\n  var sensor = (0, _sensorPool.getSensor)(element);\n  (0, _sensorPool.removeSensor)(sensor);\n};\n\nexports.clear = clear;\nvar ver = \"1.0.1\";\nexports.ver = ver;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.removeSensor = exports.getSensor = void 0;\n\nvar _id = _interopRequireDefault(require(\"./id\"));\n\nvar _sensors = require(\"./sensors\");\n\nvar _constant = require(\"./constant\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n/**\n * Created by hustcc on 18/6/9.\n * Contract: i@hust.cc\n */\n\n/**\n * all the sensor objects.\n * sensor pool\n */\n\n\nvar Sensors = {};\n/**\n * get one sensor\n * @param element\n * @returns {*}\n */\n\nvar getSensor = function getSensor(element) {\n  var sensorId = element.getAttribute(_constant.SizeSensorId); // 1. if the sensor exists, then use it\n\n  if (sensorId && Sensors[sensorId]) {\n    return Sensors[sensorId];\n  } // 2. not exist, then create one\n\n\n  var newId = (0, _id[\"default\"])();\n  element.setAttribute(_constant.SizeSensorId, newId);\n  var sensor = (0, _sensors.createSensor)(element); // add sensor into pool\n\n  Sensors[newId] = sensor;\n  return sensor;\n};\n/**\n *  sensor\n * @param sensor\n */\n\n\nexports.getSensor = getSensor;\n\nvar removeSensor = function removeSensor(sensor) {\n  var sensorId = sensor.element.getAttribute(_constant.SizeSensorId); // remove attribute\n\n  sensor.element.removeAttribute(_constant.SizeSensorId); // remove event, dom of the sensor used\n\n  sensor.destroy(); // exist, then remove from pool\n\n  if (sensorId && Sensors[sensorId]) {\n    delete Sensors[sensorId];\n  }\n};\n\nexports.removeSensor = removeSensor;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createSensor = void 0;\n\nvar _object = require(\"./object\");\n\nvar _resizeObserver = require(\"./resizeObserver\");\n/**\n * Created by hustcc on 18/7/5.\n * Contract: i@hust.cc\n */\n\n/**\n * sensor strategies\n */\n// export const createSensor = createObjectSensor;\n\n\nvar createSensor = typeof ResizeObserver !== 'undefined' ? _resizeObserver.createSensor : _object.createSensor;\nexports.createSensor = createSensor;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createSensor = void 0;\n\nvar _debounce = _interopRequireDefault(require(\"../debounce\"));\n\nvar _constant = require(\"../constant\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n/**\n * Created by hustcc on 18/6/9.\n * Contract: i@hust.cc\n */\n\n\nvar createSensor = function createSensor(element) {\n  var sensor = undefined; // callback\n\n  var listeners = [];\n  /**\n   * create object DOM of sensor\n   * @returns {HTMLObjectElement}\n   */\n\n  var newSensor = function newSensor() {\n    // adjust style\n    if (getComputedStyle(element).position === 'static') {\n      element.style.position = 'relative';\n    }\n\n    var obj = document.createElement('object');\n\n    obj.onload = function () {\n      obj.contentDocument.defaultView.addEventListener('resize', resizeListener); //  resize\n\n      resizeListener();\n    };\n\n    obj.style.display = 'block';\n    obj.style.position = 'absolute';\n    obj.style.top = '0';\n    obj.style.left = '0';\n    obj.style.height = '100%';\n    obj.style.width = '100%';\n    obj.style.overflow = 'hidden';\n    obj.style.pointerEvents = 'none';\n    obj.style.zIndex = '-1';\n    obj.style.opacity = '0';\n    obj.setAttribute('class', _constant.SensorClassName);\n    obj.setAttribute('tabindex', _constant.SensorTabIndex);\n    obj.type = 'text/html'; // append into dom\n\n    element.appendChild(obj); // for ie, should set data attribute delay, or will be white screen\n\n    obj.data = 'about:blank';\n    return obj;\n  };\n  /**\n   * trigger listeners\n   */\n\n\n  var resizeListener = (0, _debounce[\"default\"])(function () {\n    // trigger all listener\n    listeners.forEach(function (listener) {\n      listener(element);\n    });\n  });\n  /**\n   * listen with one callback function\n   * @param cb\n   */\n\n  var bind = function bind(cb) {\n    // if not exist sensor, then create one\n    if (!sensor) {\n      sensor = newSensor();\n    }\n\n    if (listeners.indexOf(cb) === -1) {\n      listeners.push(cb);\n    }\n  };\n  /**\n   * destroy all\n   */\n\n\n  var destroy = function destroy() {\n    if (sensor && sensor.parentNode) {\n      if (sensor.contentDocument) {\n        // remote event\n        sensor.contentDocument.defaultView.removeEventListener('resize', resizeListener);\n      } // remove dom\n\n\n      sensor.parentNode.removeChild(sensor); // initial variable\n\n      sensor = undefined;\n      listeners = [];\n    }\n  };\n  /**\n   * cancel listener bind\n   * @param cb\n   */\n\n\n  var unbind = function unbind(cb) {\n    var idx = listeners.indexOf(cb);\n\n    if (idx !== -1) {\n      listeners.splice(idx, 1);\n    } // no listener, and sensor is exist\n    // then destroy the sensor\n\n\n    if (listeners.length === 0 && sensor) {\n      destroy();\n    }\n  };\n\n  return {\n    element: element,\n    bind: bind,\n    destroy: destroy,\n    unbind: unbind\n  };\n};\n\nexports.createSensor = createSensor;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createSensor = void 0;\n\nvar _debounce = _interopRequireDefault(require(\"../debounce\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n/**\n * Created by hustcc on 18/7/5.\n * Contract: i@hust.cc\n */\n\n\nvar createSensor = function createSensor(element) {\n  var sensor = undefined; // callback\n\n  var listeners = [];\n  /**\n   * trigger listeners\n   */\n\n  var resizeListener = (0, _debounce[\"default\"])(function () {\n    // trigger all\n    listeners.forEach(function (listener) {\n      listener(element);\n    });\n  });\n  /**\n   * create ResizeObserver sensor\n   * @returns\n   */\n\n  var newSensor = function newSensor() {\n    var s = new ResizeObserver(resizeListener); // listen element\n\n    s.observe(element); // trigger once\n\n    resizeListener();\n    return s;\n  };\n  /**\n   * listen with callback\n   * @param cb\n   */\n\n\n  var bind = function bind(cb) {\n    if (!sensor) {\n      sensor = newSensor();\n    }\n\n    if (listeners.indexOf(cb) === -1) {\n      listeners.push(cb);\n    }\n  };\n  /**\n   * destroy\n   */\n\n\n  var destroy = function destroy() {\n    sensor.disconnect();\n    listeners = [];\n    sensor = undefined;\n  };\n  /**\n   * cancel bind\n   * @param cb\n   */\n\n\n  var unbind = function unbind(cb) {\n    var idx = listeners.indexOf(cb);\n\n    if (idx !== -1) {\n      listeners.splice(idx, 1);\n    } // no listener, and sensor is exist\n    // then destroy the sensor\n\n\n    if (listeners.length === 0 && sensor) {\n      destroy();\n    }\n  };\n\n  return {\n    element: element,\n    bind: bind,\n    destroy: destroy,\n    unbind: unbind\n  };\n};\n\nexports.createSensor = createSensor;"],"names":["module","exports","__esModule","instance","Constructor","TypeError","obj","_assign","_assign2","default","target","i","arguments","length","source","key","Object","prototype","hasOwnProperty","call","_setPrototypeOf2","_interopRequireDefault","_create2","_typeof3","subClass","superClass","constructor","value","enumerable","writable","configurable","__proto__","keys","indexOf","_typeof2","self","ReferenceError","_isIterable3","_getIterator3","arr","Array","isArray","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","err","sliceIterator","_iterator2","_symbol2","_typeof","$Object","P","D","create","it","getOwnPropertyNames","isObject","toIObject","toLength","toAbsoluteIndex","IS_INCLUDES","$this","el","fromIndex","O","index","cof","TAG","ARG","T","B","e","tryGet","callee","toString","slice","core","version","__e","aFunction","fn","that","a","b","c","apply","defineProperty","get","document","is","createElement","split","getKeys","gOPS","pIE","result","getSymbols","f","symbols","isEnum","global","ctx","hide","has","$export","type","name","own","out","IS_FORCED","F","IS_GLOBAL","G","IS_STATIC","S","IS_PROTO","IS_BIND","IS_WRAP","W","expProto","C","this","Function","virtual","R","U","exec","window","Math","__g","dP","createDesc","object","documentElement","propertyIsEnumerable","arg","floor","isFinite","descriptor","setToStringTag","IteratorPrototype","NAME","LIBRARY","redefine","Iterators","$iterCreate","getPrototypeOf","ITERATOR","BUGGY","KEYS","VALUES","returnThis","Base","DEFAULT","IS_SET","FORCED","methods","getMethod","kind","proto","DEF_VALUES","VALUES_BUG","$native","$default","$entries","$anyNative","entries","values","META","setDesc","id","isExtensible","FREEZE","preventExtensions","setMeta","w","meta","KEY","NEED","fastKey","getWeak","onFreeze","DESCRIPTORS","toObject","IObject","$assign","assign","A","Symbol","K","forEach","k","join","aLen","concat","j","anObject","dPs","enumBugKeys","IE_PROTO","Empty","_createDict","iframeDocument","iframe","style","display","src","contentWindow","open","write","lt","close","Properties","IE8_DOM_DEFINE","toPrimitive","Attributes","defineProperties","gOPD","getOwnPropertyDescriptor","gOPN","windowNames","getWindowNames","$keys","hiddenKeys","getOwnPropertySymbols","ObjectProto","arrayIndexOf","names","fails","exp","bitmap","check","set","setPrototypeOf","test","buggy","def","tag","stat","shared","uid","SHARED","store","mode","copyright","toInteger","defined","TO_STRING","pos","s","String","l","charCodeAt","charAt","max","min","ceil","isNaN","val","valueOf","px","random","wksExt","$Symbol","USE_SYMBOL","classof","iterFn","addToUnscopables","step","iterated","_t","_k","Arguments","isInteger","abs","isSafeInteger","number","$at","point","$fails","wks","wksDefine","enumKeys","_create","gOPNExt","$GOPD","$GOPS","$DP","$JSON","JSON","_stringify","stringify","HIDDEN","TO_PRIMITIVE","SymbolRegistry","AllSymbols","OPSymbols","USE_NATIVE","QObject","setter","findChild","setSymbolDesc","protoDesc","wrap","sym","isSymbol","iterator","$defineProperty","$defineProperties","$propertyIsEnumerable","E","$getOwnPropertyDescriptor","$getOwnPropertyNames","$getOwnPropertySymbols","IS_OP","$set","es6Symbols","wellKnownSymbols","keyFor","useSetter","useSimple","FAILS_ON_PRIMITIVES","replacer","$replacer","args","TO_STRING_TAG","DOMIterables","Collection","scheme","author","base00","base01","base02","base03","base04","base05","base06","base07","base08","base09","base0A","base0B","base0C","base0D","base0E","base0F","_interopRequire","_threezerotwofour","threezerotwofour","_apathy","apathy","_ashes","ashes","_atelierDune","atelierDune","_atelierForest","atelierForest","_atelierHeath","atelierHeath","_atelierLakeside","atelierLakeside","_atelierSeaside","atelierSeaside","_bespin","bespin","_brewer","brewer","_bright","bright","_chalk","chalk","_codeschool","codeschool","_colors","colors","_default","_eighties","eighties","_embers","embers","_flat","flat","_google","google","_grayscale","grayscale","_greenscreen","greenscreen","_harmonic","harmonic","_hopscotch","hopscotch","_isotope","isotope","_marrakesh","marrakesh","_mocha","mocha","_monokai","monokai","_ocean","ocean","_paraiso","paraiso","_pop","pop","_railscasts","railscasts","_shapeshifter","shapeshifter","_solarized","solarized","_summerfruit","summerfruit","_tomorrow","tomorrow","_tube","tube","_twilight","twilight","createElementNS","normalizeColor","color","opacity","parse","extractCommon","basePath","newArr","oldArr","diagonalPath","equals","newLen","oldLen","newPos","oldPos","commonCount","components","count","added","removed","indices","pushComponent","last","buildValues","componentPos","componentLen","component","arrayDiff","equal","editLength","maxEditLength","bestPath","execEditLength","addPath","removePath","canAdd","canRemove","path","ret","diff","NONE","mathRound","round","mathSin","sin","mathCos","cos","PI","PI2","degree","EPSILON","round3","round4","isAroundZero","setTransform","svgEl","m","attr","setAttribute","bindStyle","fill","pathHasFill","fillOpacity","stroke","pathHasStroke","strokeWidth","lineWidth","strokeScale_1","strokeNoScale","getLineScale","strokeFirst","strokeOpacity","lineDash","lineDashOffset","map","rawVal","lineCap","lineJoin","miterLimit","SVGPathRebuilder","reset","_str","moveTo","x","y","_add","lineTo","bezierCurveTo","x2","y2","x3","y3","quadraticCurveTo","arc","cx","cy","r","startAngle","endAngle","anticlockwise","ellipse","rx","ry","psi","firstCmd","dTheta","clockwise","dThetaPositive","isCircle","unifiedTheta","large","x0","y0","rect","h","closePath","cmd","d","g","_invalid","generateStr","getStr","svgPath","brush","__svgEl","createPathProxy","shapeChanged","beginPath","buildPath","shape","pathUpdated","pathVersion","getVersion","elExt","svgPathBuilder","__svgPathBuilder","__svgPathVersion","strokePercent","rebuildPath","transform","svgImage","image","HTMLImageElement","HTMLCanvasElement","toDataURL","dw","width","dh","height","__imageSrc","setAttributeNS","attrXLink","TEXT_ALIGN_TO_ANCHOR","left","right","center","middle","svgText","text","textSvgEl","attrXML","font","textContent","lineHeight","textBaseline","adjustTextY","textAlign","Definable","zrId","svgRoot","tagNames","markLabel","domName","nextId","_domName","_zrId","_svgRoot","_tagNames","_markLabel","getDefs","isForceCreating","defs","getElementsByTagName","defs_1","insertBefore","firstChild","contains","children","doUpdate","onUpdate","dom","add","addDom","parentNode","appendChild","removeDom","removeChild","getDoms","doms","tagName","tags","markAllUnused","markDomUsed","markDomUnused","isDomUnused","removeUnused","_this","getSvgProxy","displayable","Path","TSpan","getSvgElement","isLinearGradient","isRadialGradient","isGradient","_super","GradientManager","addWithoutUpdate","svgElement","that_1","fillOrStroke","gradient","__dom","markUsed","getAttribute","updateDom","update","innerHTML","colorStops","len","stop_1","offset","hex","isPattern","patternDomMap","PatternManager","pattern","patternDom","SVGElement","svgWidth","svgHeight","img","prevImage","imageSrc","patternImage","createdImage","dirty","rotation","scaleX","scaleY","hasClipPath","clipPaths","__clipPaths","ClippathManager","_refGroups","_keyDuplicateCount","refGroups","_getClipPathGroup","prevDisplayable","keyDuplicateCount","clipPathKey","clipPath","generateClipPathsKey","clipGroup","parentEl","clipPathEl","_dom","pathEl","newRefGroupsMap","group","ShadowManager","_shadowDomMap","_shadowDomPool","_getFromPool","shadowDom","domChild","shadowBlur","shadowOffsetX","shadowOffsetY","hasShadow","shadowKey","globalScale","getGlobalScale","shadowColor","toFixed","getShadowKey","_shadowDom","remove","removeAttribute","offsetX","offsetY","blur","normalizedColor","stdDeviation","shadowDomsPool","shadowDomMap","parseInt10","parseInt","checkParentAvailable","parent","child","insertAfter","prevSibling","nextSibling","prepend","SVGPainter","root","storage","opts","refreshHover","createMethodNotSupport","pathToImage","configLayer","_opts","util","extend","svgDom","cssText","bgRoot","_gradientManager","_patternManager","_clipPathManager","_shadowManager","viewport","_svgDom","_backgroundRoot","_viewport","resize","_visibleList","getType","getViewportRoot","getSvgDom","getSvgRoot","getViewportRootOffset","viewportRoot","offsetLeft","offsetTop","refresh","list","getDisplayList","_paintList","setBackgroundColor","backgroundColor","_backgroundNode","bgNode","getWidth","getHeight","_a","createSVGElement","paintOne","svgProxy","gradientManager","patternManager","clipPathManager","shadowManager","visibleList","listLen","newVisibleList","invisible","__dirty","prevSvgElement","topPrevSvgElement","currentClipGroup","item","_getSize","_width","_height","viewportStyle","whIdx","wh","cwh","plt","prb","parseFloat","stl","defaultView","getComputedStyle","dispose","clear","viewportNode","outerHTML","encodeURIComponent","replace","method","logError","RADIAN","getViewRect","seriesModel","api","layout","getBoxLayoutParams","getBasicPieLayout","viewRect","radius","size","r0","pieLayout","seriesType","ecModel","eachSeriesByType","data","getData","valueDim","mapDimension","minAngle","validDataCount","each","sum","getSum","unitRadian","roseType","stillShowZeroSum","extent","getDataExtent","restAngle","valueSumLargerThanMinAngle","currentAngle","dir","setLayout","idx","angle","setItemLayout","NaN","angle_1","layout_1","getItemLayout","layout_2","dataFilter","legendModels","findComponents","mainType","filterSelf","getName","isSelected","adjustSingleSide","viewWidth","viewHeight","viewLeft","viewTop","farthestX","position","labelAlignTo","dx","label","linePoints","items","topSemi","maxY","bottomSemi","semi","dy","len2","rA","rB","sqrt","recalculateXOnSemiToAlignOnEllipseCurve","recalculateX","rB2","rA2","isPositionCenter","sectorShape","pieLabelLayout","labelLayoutList","hasLabelRotate","minShowLabelRadian","getLayout","setNotShow","ignore","sector","getItemGraphicEl","getTextContent","labelLine","getTextGuideLine","itemModel","getItemModel","labelModel","getModel","labelPosition","labelDistance","edgeDistance","bleedMargin","labelLineModel","labelLineLen","labelLineLen2","states","isLabelShown","textX","textY","midAngle","nx","ny","labelRotate","isLabelInside","x1","y1","rotate","radialAngle","setStyle","verticalAlign","align","selectState","select","textRect","getBoundingRect","clone","applyTransform","getComputedTransform","margin","minTurnAngle","maxSurfaceAngle","surfaceNormal","Point","setTextConfig","inside","leftList","rightList","leftmostX","Number","MAX_VALUE","rightmostX","isAlignToEdge","realTextWidth","targetTextWidth","dist","avoidOverlap","notShowLabel","setShape","points","__hostTarget","textGuideLineConfig","anchor","getSectorCornerRadius","model","zeroIfNull","cornerRadius","innerCornerRadius","PiePiece","z2","setTextContent","updateData","firstCreate","hostModel","emphasisModel","getShallow","useStyle","getItemVisual","cursorStyle","_updateLabel","ensureState","labelText","visualColor","visualOpacity","labelFetcher","labelDataIndex","inheritColor","defaultOpacity","defaultText","getFormattedLabel","removeTextGuideLine","polyline","setTextGuideLine","retrieve3","PieView","ignoreLabelLineUpdate","init","sectorGroup","_sectorGroup","render","payload","oldData","_data","_emptyCircleSector","getItemStyle","piePiece","setItemGraphicEl","newIdx","oldIdx","off","execute","containPoint","itemLayout","Chart","createSeriesDataSimply","opt","nameList","coordDimensions","encodeDefine","getEncode","getSource","dimensions","SeriesData","initData","LegendVisualProvider","getDataWithEncodedVisual","getRawData","_getDataWithEncodedVisual","_getRawData","getAllNames","rawData","mapArray","containName","indexOfName","dataIndex","PieSeriesModel","option","legendVisualProvider","_defaultLabelLine","mergeOption","getInitialData","encodeDefaulter","getDataParams","params","valueList","percent","$vars","labelLineNormalOpt","labelLineEmphasisOpt","emphasis","show","defaultOption","zlevel","z","legendHoverLink","colorBy","minShowLabelAngle","selectedOffset","percentPrecision","top","bottom","overflow","alignTo","distanceToLabelLine","length2","smooth","lineStyle","itemStyle","borderWidth","borderJoin","showEmptyCircle","emptyCircleStyle","labelLayout","hideOverlap","scale","scaleSize","avoidLabelOverlap","animationType","animationDuration","animationTypeUpdate","animationEasingUpdate","animationDurationUpdate","animationEasing","Series","radarLayout","coordSys","coordinateSystem","axes","getIndicatorAxes","axis","axisIndex","dim","dataToPoint","isValidPoint","getValueMissingPoint","firstPoint","radarBackwardCompat","polarOptArr","polar","polarNotRadar_1","polarOpt","indicator","radar","series","seriesOpt","polarIndex","radarIndex","RadarView","createSymbol","symbolType","symbolSize","symbolPath","symbolRotate","updateSymbols","oldPoints","newPoints","symbolGroup","isInit","removeAll","__dimIdx","setPosition","graphic","getInitialPoints","pt","polygon","itemGroup","childAt","eachItemGraphicEl","getLineStyle","areaStyleModel","polygonIgnore","isEmpty","parentModel","stateName","stateModel","stateIgnore","getAreaStyle","decal","itemHoverStyle","eachChild","pathStyle","setColor","getStore","getDimensionIndex","labelDimIndex","RadarSeriesModel","hasSymbolVisual","generateCoord","generateCoordCount","Infinity","formatTooltip","multipleSeries","dataType","indicatorAxes","nameToDisplay","markerColor","header","sortBlocks","blocks","markerType","sortParam","getTooltipPosition","data_1","getValues","coordToPoint","dataToCoord","dependencies","valueAxisDefault","axisDefault","defaultsShow","RadarModel","optionUpdated","boundaryGap","splitNumber","axisLine","axisTick","axisLabel","nameTextStyle","showName","nameFormatter","nameGap","triggerEvent","indicatorModels","indicatorOpt","iNameTextStyle","innerIndicatorOpt","nameLocation","indName","Model","componentIndex","_indicatorModels","getIndicatorModels","axisName","axisNameGap","splitLine","splitArea","Component","axisBuilderAttrs","radarModel","_buildAxes","_buildSplitLineAndArea","axisBuilders","indicatorAxis","AxisBuilder","labelDirection","tickDirection","nameDirection","axisBuilder","getGroup","splitLineModel","splitAreaModel","lineStyleModel","showSplitLine","showSplitArea","splitLineColors","splitAreaColors","splitLineColorsArr","splitAreaColorsArr","splitLines","splitAreas","ticksRadius","getTicksCoords","getColorIndex","coord","realSplitNumber_1","axesTicksPoints","ticksCoords","tickCoord","prevPoints","reverse","areaStyle","mergePath","silent","areaOrLine","areaOrLineColorList","colorIndex","IndicatorAxis","radiusExtent","Axis","Radar","_model","_indicatorAxes","indicatorModel","Interval","indicatorIndex","pointToData","closestAxis","radian","atan2","minRadianDiff","closestAxisIdx","coordToData","viewSize","setExtent","radarSeries","getComponent","unionExtentFromData","increaseInterval","interval","exp10","pow","log","LN10","rawExtent","axisModel","fixedMin","fixedMax","getInterval","setInterval","getTicks","convertToPixel","finder","console","warn","convertFromPixel","pixel","radarList","eachComponent","registers","registerCoordinateSystem","registerComponentModel","registerComponentView","registerVisual","setItemVisual","setVisual","ATTR","isTaken","zr","resourceKey","checkPointerAndTrigger","controller","eventName","behaviorToCheck","contollerEvent","pointerChecker","originX","originY","event","trigger","isAvailableBehavior","bind","settings","setting","isString","echarts","RoamController","_zr","mousedownHandler","_mousedownHandler","mousemoveHandler","_mousemoveHandler","mouseupHandler","_mouseupHandler","mousewheelHandler","_mousewheelHandler","pinchHandler","_pinchHandler","enable","controlType","disable","_opt","defaults","zoomOnMouseWheel","moveOnMouseMove","moveOnMouseWheel","preventDefaultMouseMove","on","isDragging","_dragging","isPinching","_pinching","setPointerChecker","draggable","_x","_y","gestureEvent","oldX","oldY","newX","newY","shouldZoom","shouldMove","wheelDelta","absWheelDeltaDelta","factor","absDelta","scrollDelta","pinchScale","pinchX","pinchY","Eventful","updateViewOnPan","controllerHost","updateViewOnZoom","zoomDelta","zoomX","zoomY","zoomLimit","newZoom","zoom","zoomMin","zoomMax","zoomScale","IRRELEVANT_EXCLUDES","onIrrelevantElement","targetCoordSysModel","getComponentByElement","topTarget","OPTION_STYLE_ENABLED_TAGS","OPTION_STYLE_ENABLED_TAG_MAP","STATE_TRIGGER_TAG_MAP","LABEL_HOST_MAP","mapLabelRaw","getFixedItemStyle","areaColor","MapDraw","_controller","getZr","_controllerHost","_regionsGroup","_svgGroup","draw","mapOrGeoModel","fromView","isGeo","subType","mapSeries","getHostGeoModel","geo","regionsGroup","transformInfo","getTransformInfo","transformInfoRaw","raw","transformInfoRoam","roam","isVisualEncodedByVisualMap","getVisual","viewBuildCtx","resourceType","_buildGeoJSON","_buildSVG","_updateController","_updateMapSelectHandler","regionsGroupByName","_regionsGroupByName","regionsInfoByName","transformPoint","regions","region","regionName","regionGroup","dataIdx","regionModel","getRegionModel","compoundPath","segmentIgnoreThreshold","paths","geometries","geometry","exterior","interiors","interior","points_1","applyOptionStyleForRegion","Displayable","culling","centerPt","getCenter","resetLabelForRegion","resetEventTriggerForRegion","resetTooltipForRegion","resetStateTriggerForRegion","mapName","_svgResourceChanged","_freeSVG","_useSVG","svgDispatcherMap","_svgDispatcherMap","focusSelf","_svgGraphicRecord","named","namedItem","svgNodeTagLower","z2EmphasisLift","namedFrom","_enableBlurEntireSVG","opacity_1","traverse","isGroup","findHighDownDispatchers","geoModel","_svgMapName","resource","geoSourceManager","svgGraphic","useGraphic","freeGraphic","getZoom","makeActionBase","action","componentType","_mouseDownFlag","dispatchAction","resetForLabelLayout","mapDraw","normalStyleModel","emphasisStyleModel","blurStyleModel","selectStyleModel","normalStyle","emphasisStyle","selectStyle","blurStyle","labelXY","isDataNaN","showLabel","query","specifiedTextOpt","normal","textEl","textConfig","layoutRect","disableLabelAnimation","removeTextContent","removeTextConfig","eventTrigger","eventData","geoIndex","setTooltipConfig","componentModel","itemName","itemTooltipOption","highDownSilentOnTouch","focus","MapView","mapModel","from","_mapDraw","seriesId","needsDrawMap","_renderSymbols","originalData","originalDataIndex","circle","fullData","mainSeries","name_1","fullIndex_1","state","onHoverStateChange","toState","MapSeries","seriesGroup","getRegion","dataNameMap","toAppendNames","name_2","geoSource","getMapType","nameMap","nameProperty","appendValues","getRawValue","seriesNames","otherIndex","noHeader","setZoom","setCenter","getLegendIcon","iconType","icon","itemWidth","itemHeight","layoutMode","aspectScale","showLegendSymbol","boundingCoords","scaleLimit","selectedMode","borderColor","mapDataStatistic","seriesGroups","hostGeoModel","seriesList","datas","statisticType","mapKey","dataStatistics","setData","cloneShallow","mapSymbolLayout","processedMapType","mapType","mapSymbolOffsets","subMapSeries","v2ApplyTransform","vector","View","_roamTransformable","Transformable","_rawTransformable","setBoundingRect","_rect","BoundingRect","setViewRect","_transformTo","_viewRect","rawTransform","calculateTransform","rawParent","decomposeTransform","_updateTransform","centerCoord","_center","_updateCenterAndZoom","_zoom","getDefaultCenter","rawRect","getRoamTransform","getLocalTransform","rawTransformMatrix","roamTransform","defaultCenter","roamTransformable","rawTransformable","updateTransform","matrix","copy","_rawTransform","invTransform","invert","dummyTransformable","getViewRectAfterRoam","noRoam","getCoordSys","contain","GEO_DEFAULT_PARAMS","invertLongitute","geo2DDimensions","Geo","_nameCoordMap","defaultParmas","_regionsMap","regionsMap","_invertLongitute","boundingRect","getRegionByCoord","addGeoCoord","geoCoord","getGeoCoord","getReferringComponents","models","resizeGeo","leftTop","rightBottom","centerOption","sizeOption","aspect","useCenterAndSize","boxLayoutOption","GeoCreator","geoList","eachSeries","mapModelGroupBySeries","nameMapList","singleMapSeries","setGeoCoords","getFilledRegions","originRegionArr","regionsArr","GeoModel","mergeDefaultAndTheme","selectedMap","_optionModelMap","optionModelMap","regionOpt","selected","status","formatter","unSelect","toggleSelected","updateCenterAndZoom","view","previousZoom","fixX","fixY","GeoView","focusBlurEnabled","_api","_handleRegionClick","updateSelectStatus","current","geoId","node","enterSelect","leaveSelect","makeAction","actionInfo","registerAction","allSelected","v","res","firstWalk","separation","isExpand","siblings","subtreeW","hierNode","n","shift","change","prelim","modifier","executeShifts","midPoint","defaultAncestor","subtreeV","ancestor","nodeOutRight","nodeInRight","nodeOutLeft","nodeInLeft","sumOutRight","sumInRight","sumOutLeft","sumInLeft","nextRight","nextLeft","moveSubtree","nextAncestor","thread","apportion","secondWalk","nodeX","cb","defaultSeparation","radialCoordinate","rad","wl","wr","node1","node2","TreeEdgeShape","parentPoint","childPoints","TreePath","getDefaultStyle","getDefaultShape","childLen","firstChildPos","lastChildPos","orient","forkDim","otherDim","forkPosition","tmpPoint","TreeView","_mainGroup","layoutInfo","_updateViewCoordSys","symbolNeedsDraw","updateNode","symbolEl","removeNode","_nodeScaleRatio","_updateNodeAndLinkScale","bbox","oldMin","_min","oldMax","_max","viewCoordSys","updateLabelLayout","nodeScale","_getNodeGlobalScale","setSymbolScale","nodeScaleRatio","groupZoom","tree","getNodeByDataIndex","symbolInnerColor","virtualRoot","sourceSymbolEl","sourceLayout","sourceOldLayout","__oldX","__oldY","rawX","__radialOldRawX","rawY","__radialOldRawY","targetLayout","useNameLabel","__radialRawX","__radialRawY","getSymbolPath","realRoot","rootLayout","length_1","isLeft","textPosition","normalLabelModel","labelRotateRadian","origin","focusDataIndices","getAncestorsIndices","getDescendantIndices","edgeShape","getOrient","curvature","edgeForkPosition","edge","__edge","getEdgeShape","childLayout","drawEdge","hoverState","removeNodeEdge","removeAnimationOpt","getSourceNode","sourceEdge","layoutOpt","removeOpt","duration","easing","fadeOut","fadeLabel","animation","childNode","cpx1","cpy1","cpx2","cpy2","radialCoor1","radialCoor2","radialCoor3","radialCoor4","inner","transferInjection","mainData","linkAll","linkSingle","changeInjection","struct","cloneShallowInjection","getLinkedData","getLinkedDataAll","structAttr","datasAttr","main","TRANSFERABLE_METHODS","methodName","wrapMethod","curry","CHANGABLE_METHODS","assert","TreeNode","hostTree","depth","viewChildren","isRemoved","eachNode","options","context","order","suppressVisitSub","updateDepthAndHeight","getNodeById","getId","getAncestors","includeSelf","ancestors","currNode","getValue","dimension","merge","getLevelModel","levelModels","getRawIndex","getChildIndex","isAncestorOf","isDescendantOf","Tree","_nodes","rawIndex","nodes","clearLayouts","clearItemLayouts","createTree","dataRoot","beforeLink","listData","dimMax","buildHierarchy","dataNode","addChild","dimensionsCount","retrieveTargetInfo","validPayloadTypes","targetNode","targetNodeId","getPathToRoot","aboveViewRoot","viewRoot","viewPath","wrapTreePathInfo","treePathInfo","nodeDataIndex","TreeSeriesModel","ignoreStyleOnData","leaves","leavesModel","nodeData","treeDepth","expandTreeDepth","expandAndCollapse","initialTreeDepth","getRawDataItem","collapsed","noValue","treeAncestors","symbol","curveness","eachBefore","callback","treeLayout","inRoot","eachAfter","left_1","right_1","bottom_1","delta","tx_1","kx_1","ky_1","coorX_1","coorY_1","finalCoor","orient_1","commonLayout","treeVisual","existsStyle","ensureUniqueItemVisual","noop","actionTypes","enableAriaDecalForTree","decalPaletteScope","TreemapSeriesModel","preventUsingHoverLayer","completeTreeValue","levels","designatedVisualItemStyle","designatedVisualModel","hasColorDefine","hasDecalDefine","globalColorList","globalDecalList","levelDefine","modelColor","modelDecal","level0","setDefault","levelModel","resetViewRoot","setLayoutInfo","mapIdToIndex","idIndexMap","_idIndexMap","_idIndexMapCount","getViewRoot","_viewRoot","enableAriaDecal","progressive","sort","clipWindow","squareRatio","leafDepth","drillDownIcon","zoomToNodeRatio","nodeClick","breadcrumb","emptyItemWidth","textStyle","distance","padding","upperLabel","colorAlpha","colorSaturation","gapWidth","borderColorSaturation","ellipsis","visualDimension","visualMin","visualMax","colorMappingBy","visibleMin","childrenVisibleMin","childValue","thisValue","makeItemPoints","head","tail","splice","packEventData","itemNode","componentSubType","seriesIndex","seriesName","selfType","Breadcrumb","containerGroup","onSelect","thisGroup","textStyleModel","layoutParam","box","totalWidth","renderList","_prepare","_renderContent","getTextRect","TEXT_PADDING","lastX","availableSize","getTextColor","getFont","onclick","AnimationWrap","_storage","_elExistsMap","delay","finished","_finishedCallback","start","checkTerminate","animateTo","setToFinal","aborted","PATH_LABEL_NOAMAL","PATH_UPPERLABEL_NORMAL","Z2_BASE","Z2_BG","Z2_CONTENT","getStateItemStyle","makeStyleMapper","getItemStyleNormal","TreemapView","_state","nodeGroup","background","content","targetInfo","payloadType","_oldTree","thisStorage","reRoot","rootNodeGroup","direction","_giveContainerGroup","hasAnimation","renderResult","_doRender","renderFinally","_doAnimation","_resetController","_renderBreadcrumb","_containerGroup","_initEvents","thisTree","oldTree","lastsForAnimation","oldStorage","willInvisibleEls","doRenderNode","thisNode","oldNode","parentGroup","thisLayout","nodeModel","isInView","thisWidth","thisHeight","thisInvisible","thisRawIndex","oldRawIndex","thisViewChildren","upperHeight","isParent","itemStyleNormalModel","itemStyleEmphasisModel","itemStyleBlurModel","itemStyleSelectModel","borderRadius","giveGraphic","markRedraw","nodeWidth","nodeHeight","isAboveViewRoot","bg","renderBackground","upperLabelHeight","blurScope","focusOrIndices","renderContent","disableMorphing","useUpperLabel","ecData","processInvisible","visualBorderColor","upperLabelWidth","prepareText","contentWidth","contentHeight","nodeStyle","element","rectEl","upperLabelRect","isShow","textPadding","normalizeCssArray","disableLabelLayout","beforeUpdate","truncateMinChar","lineOverflow","addDrillDownIcon","textEmphasisState","getState","isLeafRoot","iconChar","storageName","Ctor","lasts","prepareAnimationWhenHasOld","z2InLevel","calculateZ2","prepareAnimationWhenNoOld","lastCfg","oldShape","parentOldX","parentOldY","parentOldBg","fadein","renderNode","dualTravel","oldViewChildren","sameTree","processNode","DataDiffer","getKey","newIndex","oldIndex","willDeleteEls","delEls","willDelete","clearStorage","els","durationOption","easingOption","isFunction","animationWrap","innerStore","targetX","targetY","_onPan","_onZoom","_clearController","rootRect","mouseX","mouseY","translate","findTarget","_rootToNode","_zoomToNode","link","linkTarget","_breadcrumb","bgEl","transformCoordToLocal","CATEGORY_DEFAULT_VISUAL_INDEX","VisualMapping","mappingMethod","visualType","thisOption","_normalizeData","normalizers","visualHandler","visualHandlers","applyVisual","getColorMapper","_normalizedToVisual","normalizeVisualRange","pieceList","hasSpecialVisual","piece","originIndex","visual","preprocessForPiecewise","categories","categoryMap","cate","visualArr_1","setVisualToOption","preprocessForSpecifiedCategory","dataExtent","mapValueToVisual","normalized","getNormalizer","listVisualTypes","isValidType","eachVisual","mapVisual","isPrimary","newVisual","newVal","retrieveVisuals","hasVisual","prepareVisualTypes","visualTypes","types_1","type1","type2","dependsOn","visualType1","visualType2","findPieceIndex","findClosestWhenOutside","possibleI","pieceValue","updatePossible","close_1","littleThan","newAbs","makeApplyVisual","isNormalized","doMapCategory","returnRGBArray","parsedVisual","linear","category","piecewise","getSpecifiedVisual","fixed","doMapFixed","colorHue","makePartialColorVisualHandler","colorLightness","createNormalizedToNumericVisual","liftZ","getter","doMapToArray","isCategory","visualArr","applyValue","colorChannel","loop","sourceExtent","pieceIndex","travelTree","designatedVisual","viewRootAncestors","nodeLayout","thisNodeColor","nodeItemStyleModel","visuals","visualName","buildVisuals","modifyHSL","calculateBorderColor","calculateColor","mapping_1","rangeVisual","getRangeVisual","range","mapping","drColorMappingBy","buildVisualMapping","childVisual","childVisuals","mappingType","getValueVisualDefine","modifyAlpha","mathMax","mathMin","retrieveValue","PATH_BORDER_WIDTH","PATH_GAP_WIDTH","PATH_UPPER_LABEL_SHOW","PATH_UPPER_LABEL_HEIGHT","ecWidth","ecHeight","seriesOption","containerWidth","containerHeight","viewAbovePath","rootSize","defaultSize","viewArea","area","currNodeValue","getUpperLabelHeight","estimateRootSize","sort_1","viewRootLayout_1","squarify","treeRoot","defaultPosition","targetCenter","calculateRootPosition","prunning","hideChildren","halfGapWidth","layoutOffset","layoutOffsetUpper","totalArea","orderBy","overLeafDepth","info","statistic","orderedChildren","deletePoint","filterByThreshold","initChildren","rowFixedLength","best","row","score","worst","ratio","areaMax","areaMin","squareArea","flush","idx0WhenH","idx1WhenH","xy","rowOtherLength","rowLen","wh1","remain","modWH","wh0","clipRect","nodeInViewAbovePath","intersect","childClipRect","categoryFilter","graphSeries","categoriesData","getCategoriesData","getGraph","categoryNames","categoryVisual","paletteScope","categoryNameIdxMap","getColorFromPalette","symbolVisualList","symbolVisual","categoryIdx","categoryStyle","visualList","normalize","graphEdgeVisual","graph","edgeData","getEdgeData","getEdgeByIndex","KEY_DELIMITER","getAutoCurvenessParams","createCurveness","appendLength","autoCurvenessParmas","curvenessList","__curvenessList","getKeyOfEdges","n1","n2","getOppositeKey","getEdgeMapLengthWithKey","edgeMap","__edgeMap","getCurvenessForEdge","needReverse","autoCurvenessParams","isArrayParam","edgeArray","getEdgeFromMap","edgeIndex","totalLen","getTotalLengthBetweenNodes","curKey","parityCorrection","isForward","oppositeKey","resValue","simpleLayout","simpleLayoutEdge","eachEdge","p1","p2","graphSimpleLayout","dimensions_1","coordDim","mapDimensionsAll","hasValue","getNodeGlobalScale","getSymbolSize","_symbolRadiansHalf","circularLayout","basedOn","_layoutNodesBasedOn","cp1","x12","y12","unitAngle","radianHalf","sumRadian","symbolRadianHalf","asin","halfRemainRadian","graphCircularLayout","scaleAndAdd","graphForceLayout","preservedPoints_1","preservedPoints","graph_1","nodeData_1","forceModel","initLayout","nodeDataExtent_1","edgeDataExtent_1","repulsion","edgeLength","repulsionArr_1","edgeLengthArr_1","nodes_1","rep","p","edges","edgeModel","ignoreForceLayout","forceInstance","inNodes","inEdges","gravity","pp","beforeStepCallback","afterStepCallback","initialFriction","friction","warmUp","setFixed","setUnfixed","beforeStep","afterStep","v12","nLen","repFact","forceLayout","getNodeByIndex","stopped","createViewCoordSys","viewList","coordSysType","positions","bbWidth","bbHeight","straightLineProto","bezierCurveProto","StraightLineShape","CurveShape","isStraightLine","ECLinePath","pointAt","t","tangentAt","SYMBOL_CATEGORIES","makeSymbolTypeKey","symbolCategory","lineData","symbolOffset","symbolKeepAspect","symbolSizeArr","symbolOffsetArr","__specifiedRotation","setLinePoints","targetShape","Line","seriesScope","_createLine","line","subPixelOptimize","createLine","_updateCommonStl","childOfName","getLinePath","emphasisLineStyle","blurLineStyle","selectLineStyle","labelStatesModels","hasItemOption","lineState","lineStateStyle","stateStyle","__isEmptyBrush","labelNormalModel","__align","__verticalAlign","__position","__labelDistance","local","highlight","downplay","updateLayout","linePath","lineGroup","symbolFrom","symbolTo","invScale","fromPos","toPos","sub","setSymbolRotation","textVerticalAlign","distanceX","distanceY","halfPercent","tangent","cp","specifiedRotation","makeSeriesScope","isPointNaN","lineNeedsDraw","pts","LineDraw","LineCtor","_LineCtor","isPersistent","lineDraw","oldLineData","_lineData","_doAdd","_doUpdate","incrementalPrepareUpdate","_seriesScope","incrementalUpdate","taskParams","updateIncrementalAndHover","animators","isEffectObject","incremental","hoverLayer","end","newLineData","itemEl","v1","v2","v3","quadraticAt","curve","v2DistSquare","mathAbs","intersectCurveCircle","curvePoints","p0","radiusSquare","nextDiff","adjustEdge","tmp0","quadraticSubdivide","pts2","fromSymbol","toSymbol","__original","originalPoints","isViewCoordSys","GraphView","symbolDraw","SymbolDraw","_symbolDraw","_lineDraw","_firstRender","groupNewProp","clearTimeout","_layoutTimeout","layoutAnimation","_startForceLayoutIteration","getGraphicEl","_layouting","setDraggable","getAdjacentDataIndices","circularRotateLabel","emphasisState","setTimeout","generateNodeKey","Graph","directed","_nodesMap","_edgesMap","_directed","isDirected","addNode","nodesMap","GraphNode","hostGraph","rawIdx","addEdge","edgesMap","GraphEdge","outEdges","getEdge","breadthFirstTraverse","startNode","edgeType","__visited","queue","currentNode","otherNode","inDegree","outDegree","dataIndices","adjacentEdge","createGraphDataProxyMixin","hostName","dataName","createGraphFromNodeEdge","linkNameList","validEdges","linkCount","createSeriesData","coordSysCtor","CoordinateSystem","GraphSeriesModel","_categoriesData","fillDataTextStyle","links","_updateCategoriesData","categoryModel","_categoriesModels","oldGetModel","newGetModel","resolveParentPath","pathArr","newPathArr","oppositeEdges","createEdgeMapForCurveness","sourceName","targetName","nameArr","isAnimationEnabled","circular","rotateLabel","force","edgeSymbol","edgeSymbolSize","edgeLabel","PointerShape","PointerPath","formatLabel","labelFormatter","GaugeView","colorList","posInfo","parsePosition","_renderMain","axisLineModel","MainPath","showAxis","axisLineWidth","angleRangeSpan","prevEndAngle","getColor","tmp","_renderTicks","_renderTitleAndDetail","_renderAnchor","_renderPointer","unitX","unitY","minVal","maxVal","tickModel","subSplitNumber","splitLineLen","tickLen","subStep","splitLineStyle","tickLineStyle","splitLineDistance","autoColor","tickLine","oldProgressData","_progressEls","progressList","showPointer","progressModel","showProgress","valueExtent","angleExtent","createPointer","pointer","pointerModel","pointerWidth","pointerLength","pointerStr","pointerOffset","pointerOffsetX","pointerOffsetY","pointerKeepAspect","createProgress","ProgressPath","isOverlap","progressWidth","progress","isClip","previousPointer","previousRotate","previousProgress","symbolStyle","anchorModel","anchorSize","anchorType","offsetCenter","anchorKeepAspect","contentGroup","newTitleEls","newDetailEls","showPointerAbove","_titleEls","_detailEls","itemTitleModel","titleOffsetCenter","titleX","titleY","labelEl","itemDetailModel","detailOffsetCenter","detailX","detailY","detailColor","formatter_1","fmt","extendParams","interpolatedValue","GaugeSeriesModel","visualStyleAccessPath","roundCap","overlap","clip","fontSize","showAbove","keepAspect","title","valueAnimation","detail","fontWeight","opacityAccessPath","FunnelPiece","insideStroke","outsideFill","FunnelView","funnelPiece","FunnelSeriesModel","minSize","maxSize","gap","funnelAlign","funnelLayout","valueArr","isAscending","getSortedIndices","sizeExtent","itemSize","getLinePoints","val_1","nextIdx","ParallelView","_dataGroup","_initialized","dataGroup","newDataIndex","updateElCommon","addEl","oldDataIndex","createLinePoints","parallelModel","getRect","createGridClipShape","removeClipPath","setClipPath","incrementalPrepareRender","incrementalRender","dimName","getAxis","eqNaN","ParallelSeriesModel","visualDrawType","useEncodeDefaulter","makeDefaultEncode","getRawIndicesByActiveState","activeState","eachActiveState","theActiveState","parallelIndex","inactiveOpacity","activeOpacity","axisDim","dataDimIndex","opacityMap","active","inactive","itemOpacity","parallelPreprocessor","parallel","hasParallelSeries","createParallelIfNeeded","parallelAxis","axisOption","parallelOption","parallelAxisDefault","mergeAxisOptionFromParallel","_handlers","handlers","handler","_throttledDispatchExpand","_dispatchExpand","mousedown","checkTrigger","_mouseDownPoint","mouseup","mouseDownPoint","getSlidedAxisExpandWindow","behavior","axisExpandWindow","mousemove","debounceNextCall","triggerOn","ParallelModel","newOption","_initDimensions","setAxisExpand","parallelAxisIndex","axisModels","queryComponents","axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandRate","axisExpandDebounce","axisExpandSlideTriggerArea","axisExpandTriggerOn","ParallelAxis","coordExtent","axisType","isHorizontal","sliderMove","handleEnds","handleIndex","minSpan","maxSpan","extentSpan","restrict","handleSpan","originalDistSign","getSpanSign","currDistSign","extentMinSpan","realExtent","sign","span","mathFloor","mathCeil","Parallel","_axesMap","_axesLayout","_init","axisHelper","onBand","inverse","_updateAxesFromSeries","_makeLayoutInfo","axisBase","layoutBase","pixelDimIndex","pAxis","pLayout","axisLength","layoutLength","_layoutAxes","winSize","layoutExtent","axisCount","axisCollapseWidth","winInnerIndices","axisExpandWindow0Pos","axisExtent","layoutAxisWithExpand","layoutAxisWithoutExpand","positionTable","horizontal","vertical","rotationTable","axisNameAvailableWidth","axisLabelShow","nameTruncateMaxWidth","axisCoordToPoint","axesMap","dataDimensions","hasActiveSet","hasAxisBrushed","lenj","getActiveState","axisLayout","getAxisLayout","pointCoord","triggerArea","useJump","winSize2","coordSysList","ParallelAxisModel","activeIntervals","getAreaSelectStyle","setActiveIntervals","intervals","BRUSH_PANEL_GLOBAL","mathPow","MUTEX_RESOURCE_KEY","DIRECTION_MAP","CURSOR_MAP","ne","sw","nw","se","DEFAULT_BRUSH_OPT","brushStyle","transformable","brushMode","removeOnClick","baseUID","BrushController","_track","_covers","_uid","pointerHandlers","enableBrush","brushOption","_brushType","_doDisableBrush","brushType","_doEnableBrush","_enableGlobalPan","userKey","_brushOption","setPanels","panelOpts","panels_1","_panels","panelId","mount","enableGlobalPan","_transform","updateCovers","coverConfigList","coverConfig","oldCovers","newCovers","creatingCover","_creatingCover","cover","__brushOption","addOrUpdate","newBrushInternal","endCreating","createCover","updateCoverAfterCreation","unmount","clearCovers","coverRenderers","updateZ","coverRenderer","getCoverRenderer","updateCoverShape","updateCommon","getPanelByPoint","localCursorPoint","panel","panels","pn","isTargetByCursor","getPanelByCover","covers","originalLength","areas","isEnd","getTrackEnds","track","createBaseRectCover","rectRangeConverter","edgeNameSequences","makeStyle","cursor","drift","driftRect","ondragend","nameSequence","updateBaseRect","localRange","handleSize","xa","ya","x2a","y2a","widtha","heighta","updateRectShape","mainEl","globalDir","getGlobalDirection1","localDirNameSeq","getGlobalDirection2","xmin","ymin","xmax","ymax","pointsToRect","clipByPanel","formatRectRange","localDirName","transformDirection","getTransform","dirNameSequence","rectRange","toRectRange","localDelta","toLocalDelta","dirName","ind","fromRectRange","driftPolygon","localD","localZero","preventDefault","rawE","mainShapeContain","updateCoverByMouse","eventParams","_creatingPanel","thisBrushOption","shouldShowCover","determineBrushType","getCreatingRange","defaultBrushType","handleDragEnd","isOutsideZrArea","currPanel","setCursorStyle","resetCursor","lineX","getLineRenderer","lineY","returnInput","localTrack","ends","xyIndex","otherExtent","getLinearBrushOtherExtent","makeRectPanelClipPath","normalizeRect","localPoints","makeLinearBrushOtherExtent","specifiedXYIndex","brushWidth","base","makeRectIsTargetByCursor","targetModel","elementList","ParallelAxisView","_brushController","_onBrush","fromAxisAreaSelect","oldAxisGroup","_axisGroup","coordSysModel","getCoordSysModel","areaSelectStyle","areaWidth","builderOpt","strokeContainThreshold","_refreshBrushController","groupTransition","getExtent","extentLen","extra","getCoverInfoList","eventParam","coverInfoList","coverInfo","realtime","parallelAxisId","defaultAxisOption","registerPreprocessor","axisModelCreator","parallelAxisModel","installParallelActions","SankeyPathShape","SankeyPath","SankeyView","_focusAdjacencyDisabled","sankeyView","n1Layout","node1Model","dragX1","dragY1","n2Layout","node2Model","dragX2","dragY2","edgeLayout","sy","ty","sourceColor","targetColor","dragX","dragY","localX","localY","SankeySeriesModel","nodeDepth","setNodePosition","localPosition","dataItem","rawDataOpt","edgeValue","edgeName","nodeValue","nodeGap","layoutIterations","nodeAlign","sankeyLayout","value1","getEdgeValue","value2","nodeRawValue","computeNodeValues","iterations","remainEdges","indegreeArr","zeroIndegrees","nextTargetNode","maxNodeDepth","isItemDepth","edgeIdx","Error","maxDepth","nextSourceNode","remainNodes","skNodeHeight","isNodeDepth","moveSinksRight","adjustNodeWithNodeAlign","kx","scaleNodeBreadths","computeNodeBreadths","nodesByBreadth","keyAttr","groupResult","buckets","prepareNodesByBreadth","minKy","ky","nodeDy","edgeDy","initializeNodeDepth","resolveCollisions","alpha","relaxRightToLeft","relaxLeftToRight","computeNodeDepths","computeEdgeDepths","layoutSankey","nodeDyAttr","weightedTarget","centerTarget","nodeY","weightedSource","centerSource","array","sankeyVisual","minValue_1","maxValue_1","mapValueToColor","customColor","WhiskerBoxCommonMixin","ordinalMeta","addOrdinal","xAxisModel","yAxisModel","xAxisType","yAxisType","getOrdinalMeta","coordDims","baseAxisDimIndex","baseAxisDim","_baseAxisDim","otherAxisDim","baseAxisType","otherAxisType","newOptionData_1","newItem","unshift","defaultValueDimensions","otherDims","tooltip","dimsDef","getBaseAxis","BoxplotSeriesModel","defaultTooltip","boxWidth","mixin","BoxplotView","constDim","createNormalBox","updateNormalBoxData","BoxPathShape","BoxPath","transInit","updateMethod","initBaseline","boxplotVisual","boxplotLayout","axisList","baseAxis","seriesModels","groupSeriesByAxis","groupItem","bandWidth","seriesCount","boxWidthList","boxOffsetList","boundList","getBandWidth","maxDataCount_1","boxWidthBound","availableWidth","boxGap","calculateBase","halfWidth","cDimIdx","vDimIdx","cDim","vDims","axisDimVal","median","getPoint","end1","end2","end4","end5","addBodyEnd","layEndLine","point1","point2","endCenter","to","layoutSingleSeries","boxplotTransform","upstream","sourceFormat","boxData","outliers","boundIQR","useExtreme","ascList","Q1","Q2","Q3","bound","low","high","itemNameFormatter","outlier","prepareBoxplotData","config","SKIP_PROPS","CandlestickView","_updateDrawMode","_isLargeDraw","_renderLarge","_renderNormal","_clear","_incrementalRenderLarge","_incrementalRenderNormal","isLargeDraw","pipelineContext","isSimpleBox","needsClip","clipArea","getArea","isNormalBoxClipped","setBoxCommon","createLarge","NormalBoxPathShape","NormalBoxPath","__simpleBox","clipped","LargeBoxPathShape","LargeBoxPath","__sign","largePoints","elP","elN","setLargeStyle","CandlestickSeriesModel","getShadowDim","brushSelector","selectors","brushRect","color0","borderColor0","barMaxWidth","barMinWidth","barWidth","largeThreshold","progressiveThreshold","progressiveChunkMode","candlestickPreprocessor","seriesItem","positiveBorderColorQuery","negativeBorderColorQuery","positiveColorQuery","negativeColorQuery","plan","createRenderPlanner","performRawSeries","getBorderColor","isSeriesFiltered","LargeArr","Float32Array","candlestickLayout","candleWidth","retrieve2","calculateCandleWidth","cDimI","vDimsI","openDimI","closeDimI","lowestDimI","highestDimI","tmpIn","tmpOut","openVal","closeVal","lowestVal","highestVal","getSign","ocLow","ocHigh","ocLowPoint","ocHighPoint","lowestPoint","highestPoint","subPixelOptimizePoint","makeBrushRect","pmin","pmax","updateRipplePath","rippleGroup","effectCfg","rippleEffectColor","ripplePath","EffectSymbol","Group","stopEffectAnimation","startEffectAnimation","rippleNumber","period","effectOffset","animate","when","rippleScale","animateStyle","updateEffectAnimation","oldEffectCfg","_effectCfg","DIFFICULT_PROPS","propName","getSymbolType","setScale","showEffectOn","EffectScatterView","effectSymbolDraw","clipShape","_getClipShape","_updateGroupTransform","EffectScatterSeriesModel","effectType","rippleEffect","universalTransition","divideShape","EffectLine","_updateEffectSymbol","effectModel","_symbolType","_symbolScale","_updateEffectAnimation","constantSpeed","delayExpr","_updateAnimationPoints","_getLineLength","_period","_loop","stopAnimation","delayNum","__t","animator","during","_updateSymbolPosition","__p1","__cp1","__p2","lastPos","quadraticDerivativeAt","tx","__lastT","Polyline","_createPolyline","hoverLineStyle","EffectPolyline","_lastFrame","_lastFramePercent","_points","accLenArr","_offsets","_length","offsets","frame","lastFrame","LargeLinesPathShape","segs","LargeLinesPath","findDataIndex","quadratic","LargeLineDraw","_incremental","lineEl","rectHover","_setCommon","_clearIncremental","IncrementalDisplayable","addDisplayable","__startIndex","isIncremental","ecData_1","clearDisplaybles","linesLayout","isPolyline","isLarge","lineCoords","segCount","totalCoordsCount","getLineCoordsCount","getLineCoords","LinesView","_updateLineDraw","trailLength","isSvg","painter","getLayer","_lastZlevel","motionBlur","_showEffect","lastFrameAlpha","_finished","_clearLayer","progressiveRender","hasEffect","_hasEffet","_isPolyline","Uint32Arr","Uint32Array","Float64Arr","Float64Array","compatEc2","itemOpt","coords","fromName","toName","mergeAll","LinesSeriesModel","_processFlatCoordsArray","_flatCoords","flatCoords","_flatCoordsOffset","flatCoordsOffset","appendData","concatArray","_getCoordsFromItemModel","startOffset","coordsOffsetAndLenStorage","coordsStorage","coordsCursor","offsetCursor","dataCount","buffer","dimIndex","preventIncremental","getProgressive","getProgressiveThreshold","xAxisIndex","yAxisIndex","effect","dataEach","HeatmapLayer","blurSize","pointSize","maxOpacity","minOpacity","_gradientPixels","inRange","outOfRange","canvas","colorFunc","isInRange","_getBrush","gradientInRange","_getGradient","gradientOutOfRange","getContext","globalAlpha","drawImage","imageData","getImageData","pixels","pixelLen","diffOpacity","gradientOffset","putImageData","brushCanvas","_brushCanvas","clearRect","gradientPixels","pixelsSingleState","Uint8ClampedArray","isGeoCoordSys","HeatmapView","visualMapOfThisSeries","visualMap","eachTargetSeries","targetSeries","_incrementalDisplayable","_renderOnCartesianAndCalendar","_renderOnGeo","xAxisExtent","yAxisExtent","xAxis","yAxis","dataDims","dataDimX","dataDimY","dataToRect","contentShape","rawValue","visualMapModel","inRangeVisuals","targetVisuals","outOfRangeVisuals","hmLayer","_hmLayer","dims","lng","lat","dataSpan","getIsInContinuousRange","lastIndex","getIsInPiecewiseRange","getPieceList","HeatmapSeriesModel","coordSysCreator","BAR_BORDER_WIDTH_QUERY","LAYOUT_ATTRS","posDesc","pathForLineWidth","PictorialBarView","cartesian","coordSysRect","master","ecSize","coordSysExtent","categoryDim","symbolMeta","getSymbolMeta","bar","createBar","pictorialShapeStr","getShapeStr","__pictorialShapeStr","animationModel","bundle","__pictorialBundle","bundlePosition","symbolRepeat","createOrUpdateRepeatSymbols","createOrUpdateSingleSymbol","createOrUpdateBarRect","createOrUpdateClip","updateBar","__pictorialSymbolMeta","removeBar","symbolClip","symbolPosition","symbolPatternSize","symbolRepeatDirection","hoverScale","outputSymbolMeta","boundingLength","symbolBoundingData","valueAxis","getOtherAxis","zeroPx","toGlobalCoord","pxSignIdx","symbolBoundingExtent","convertToCoordOnAxis","repeatCutLength","pxSign","prepareBarLength","parsedSymbolSize","categorySize","symbolScale","prepareSymbolSize","valueLineWidth","prepareLineWidth","unitLength","pathLen","absBoundingLength","symbolMargin","hasEndGap","lastIndexOf","symbolMarginNumeric","uLenWithMargin","endFix","repeatSpecified","repeatTimes","toIntTimes","sizeFix","pathPosition","barRectShape","prepareLayoutInfo","createPath","isUpdate","unit","eachPath","__pictorialAnimationIndex","__pictorialRepeatTimes","updateAttr","makeTarget","mainPath","__pictorialMainPath","rectShape","barRect","__pictorialBarRect","__pictorialClipPath","getAnimationDelayParams","labelRect","pathes","immediateAttrs","animationAttrs","barPositionOutside","defaultOutsidePosition","times","roundedTimes","PictorialBarSeriesModel","defaultSymbol","stack","BaseBarSeries","barGap","ThemeRiverView","_layers","layersSeries","getLayerSeries","keyGetter","dataDiffer","_layersSeries","newLayersGroups","process","oldLayersGroups","points0","points1","textLayout","layerGroup","stackedOnPoints","stackedOnSmooth","smoothConstraint","ThemeRiverSeriesModel","fixData","rawDataLength","timeValueKeys","layerData","dataList","layerNum","timeValue","filterData","dimensionsDefine","single","lenCount","indexArr","timeDim","layerSeries","index1","index2","getAxisTooltipData","nestestValue","minDist","nearestIdx","pointNum","theValue","singleAxisIndex","themeRiverLayout","doThemeRiverLayout","baseY0","layerPoints","singleLayer","sums","temp","computeBaseline","baseLine","layerIndex","SunburstPiece","_seriesModel","_ecModel","itemStyleModel","labelMinAngle","isNormalShown","getLabelAttr","stateAttr","labelStateModel","isNormal","isShown","sectorState","labelColor","labelPadding","rotateType","dirtyStyle","ROOT_TO_NODE_ACTION","HIGHLIGHT_ACTION","SunburstView","newRoot","renderLabelForZeroData","newChildren","oldChildren","_oldChildren","newNode","virtualPiece","renderRollUp","targetFound","SunburstSeriesModel","_levelModels","borderType","sunburstLayout","rootDepth","renderRollupNode","rPerLevel","rStart","rEnd","r0_1","r_1","radius_1","siblingAngle_1","sortOrder","sortTargets","isAsc_1","sunburstVisual","treeHeight","lift","pickColor","STYLE_VISUAL_TYPE","NON_STYLE_VISUAL_PROPS","legendIcon","visualMeta","customInnerStore","CustomSeriesModel","currentZLevel","currentZ","dataToCoordSize","dataSize","dimIdx","halfSize","isEC4CompatibleStyle","elType","hasOwnTextContentOption","hasOwnTextConfig","legacy","hasOwn","convertFromEC4CompatibleStyle","hostStyle","textContentStyle","srcStyle","rich","textFill","textStroke","fontFamily","fontStyle","hasOwnPos","textOffset","textRotation","textDistance","convertEC4CompatibleRichItem","richItem","textFont","textStrokeWidth","textLineHeight","textWidth","textHeight","textBackgroundColor","textBorderColor","textBorderWidth","textBorderRadius","textBoxShadowColor","textBoxShadowBlur","textBoxShadowOffsetX","textBoxShadowOffsetY","convertToEC4StyleForCustomSerise","itemStl","txStl","txCfg","isInside","hostFill","convertToEC4RichItem","textFillNotSet","insideFill","outsideStroke","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","LEGACY_TRANSFORM_PROPS","setLegacyTransformProp","elOption","targetProps","legacyName","legacyArr","xyName","setTransformProp","allProps","setTransformPropToTransitionFrom","transitionFrom","fromTransformable","prepareShapeOrExtraTransitionFrom","mainAttr","fromEl","transFromProps","attrOpt","transFromPropsInAttr","elPropsInAttr","enterFrom","enterFromKeys","transition","transitionKeys","elVal","elPropsInAttrKeys","isNonStyleTransitionEnabled","leaveTo","leaveToProps","getOrCreateLeaveToPropsFromEl","leaveToPropsInAttr","leaveToKeys","prepareShapeOrExtraAllPropsFinal","allPropsInAttr","keysInAttr","optVal","isArrayLike","innerEl","EMPHASIS","NORMAL","BLUR","SELECT","STATES","PATH_ITEM_STYLE","PATH_LABEL","attachedTxInfoTmp","prepareCustoms","cartesian2d","singleAxis","radiusAxis","getRadiusAxis","angleAxis","getAngleAxis","dataToRadius","dataToAngle","calendar","rangeInfo","getRangeInfo","cellWidth","getCellWidth","cellHeight","getCellHeight","weeks","dayCount","allDay","clamp","isPath","isDisplayable","CustomChartView","customSeries","renderItem","makeRenderItem","createOrUpdateItem","doRemoveEl","oldEl","setIncrementalAndHoverLayer","filterForExposedEvent","eventType","targetEl","packedEvent","elementName","createEl","graphicType","pathRect","pathData","getPathData","customPathData","customImagePath","Clz","customGraphicType","z2SelectLift","updateElNormal","attachedTxInfo","isTextContent","txCfgOpt","cfg","styleOpt","textOptionStyle","decalPattern","decalObj","__decalPattern","userDuring","propsToSet","prepareTransformTransitionFrom","prepareTransformAllPropsFinal","transFromStyleProps","fromElStyle","getAnimationStyleProps","animationProps","animationStyleProps","styleKeys","leaveToStyleProps","prepareStyleTransitionFrom","allPropsFinal","elDisplayable","changeTarget","applyPropsDirectly","isFrom","duringCall","applyPropsTransition","autoBatch","applyMiscProps","tmpDuringScope","customDuringAPI","isShapeDirty","getShape","isStyleDirty","getStyle","setExtra","getExtra","scope","latestUserDuring","scopeUserDuring","dirtyShape","updateElOnState","elStateOpt","isRoot","stateObj","existingEmphasisState","updateZForEachState","retrieveStateOption","optZ2","prepareResult","currDataIndexInside","currItemModel","userAPI","getDevicePixelRatio","dataIndexInside","userProps","getItemStyleModel","getLabelModel","labelStyle","preFetchFromExtra","applyUserPropsAfter","ordinalRawValue","dimInfo","getDimensionInfo","styleEmphasis","style_1","barLayout","currentSeriesIndices","getCurrentSeriesIndices","userParams","dataInsideLength","encode","wrapEncodeDef","currItemStyleModels","currLabelModels","seriesItemStyleModels","seriesLabelModels","actionType","encodeDef","isExtraCoord","coordDimIndex","existsEl","doCreateOrUpdateEl","toBeReplacedIdx","doesElNeedRecreate","childrenRef","sourceEl","clearStates","copyTransform","morph","conOpt","isLegacy","processTxInfo","txConOptNormal","txConOptEmphasis","txConOptBlur","txConOptSelect","txConStlOptNormal","txConOptOtherState","retrieveStyleOptionOnState","doCreateOrUpdateAttachedTx","clipPathOpt","getClipPath","doCreateOrUpdateClipPath","otherStateOpt","mergeChildren","$mergeChildren","byName","diffChildrenByName","notMerge","processAddUpdate","processRemove","childCount","replaceAt","elInner","elOptionType","elOptionShape","elOptionStyle","isUniversalTransitionEnabled","stateOpt","txConOpt","convertResult","txConOptNormal_1","stateOptionNormal","stateOption","childOption","PolarAxisPointer","makeElOption","axisPointerModel","animationThreshold","coordValue","axisPointerType","elStyle","viewHelper","pointerOption","pointerShapeBuilder","graphicKey","labelPos","labelMargin","axisAngle","labelRotation","getLabelPosition","BaseAxisPointer","shadow","PolarModel","findAxisModel","foundAxisModel","PolarAxisModel","AngleAxisModel","RadiusAxisModel","RadiusAxis","radiusToData","AngleAxis","calculateCategoryInterval","ordinalScale","ordinalExtent","tickCount","tickValue","unitSpan","unitH","cache","lastAutoInterval","lastTickCount","angleToData","polarDimensions","Polar","_radiusAxis","_angleAxis","axisPointerEnabled","pointToCoord","containData","getAxes","getAxesByScale","scaleType","getTooltipAxes","baseAxes","otherAxes","maxAngle","d2","polarModel","updatePolarScale","setAxis","isAngleAxisModel","polarCreator","polarList","radiusAxisModel","angleAxisModel","parsedRadius","resizePolar","getAxisLineShape","rExtent","getRadiusIdx","fixAngleOverlap","firstItem","lastItem","AngleAxisView","axisPointerClass","ticksAngles","minorTickAngles","getMinorTicksCoords","labels","getViewLabels","labelItem","getRawOrdinalNumber","isBlank","angelAxisElementsBuilders","AxisView","rId","r0Id","lines","tickAngleItem","minorTick","tickAngles","minorTickModel","rawCategoryData","getCategories","commonLabelModel","labelTextAlign","labelTextVerticalAlign","rawCategoryItem","formattedLabel","targetType","rawLabel","lineColors","lineCount","minorSplitLine","areaColors","prevAngle","r1","selfBuilderAttrs","RadiusAxisView","newAxisGroup","minorTicksCoords","layoutAxis","axisElementBuilders","prevRadius","getSeriesStackId","getAxisKey","lastStackCoords","barWidthAndOffset","barSeries","columnsMap","axisKey","columnsOnAxis","remainedWidth","autoWidthCount","categoryGap","stacks","stackId","maxWidth","barCategoryGap","coordSysName","barGapPercent","autoWidth","column","lastColumn","widthSum","calRadialBar","getSeriesByType","columnLayoutInfo","columnOffset","columnWidth","barMinHeight","barMinAngle","baseDim","stacked","clampLayout","valueAxisStart","baseValue","baseCoord","radiusSpan","angleSpan","angleAxisExtraOption","radiusAxisExtraOption","PolarView","axisPosition","rectBound","positionMap","labelInside","SingleAxisView","axisView","axisGroup","gridRect","SingleAxisModel","SingleAxis","singleDimensions","singleModel","singleAxisModel","Single","_axis","_adjustAxis","_updateAxisTransform","coordBase","extentSum","toLocalCoord","singles","XY","WH","SingleAxisPointer","getGlobalExtent","getPointDimIndex","pixelValue","getHandleTransform","updateHandleTransform","currPosition","cursorOtherValue","cursorPoint","tooltipOption","SingleView","CalendarModel","inputPositionParams","mergeAndNormalizeLayoutParams","getCellSize","cellSize","dayLabel","firstDay","monthLabel","yearLabel","cellSizeArr","ignoreSize","hvIdx","CalendarView","calendarModel","rangeData","localeModel","getLocaleModel","_renderDayRect","_renderLines","_renderYearText","_renderMonthText","_renderWeekText","itemRectStyleModel","sh","time","getNextNDay","tl","_tlpoints","_blpoints","_firstDayOfMonth","_firstDayPoints","addPoints","formatedDate","getDateInfo","date","setMonth","getMonth","_getLinePointsOfOneWeek","_drawSplitline","_getEdgesPoints","rs","poyline","parsedDate","tmpD","day","_formatterLabel","format","_yearTextPositionControl","aligns","xc","yc","posPoints","yearText","_monthTextPositionControl","isCenter","vAlign","termPoints","firstDayPoints","yyyy","yy","MM","M","monthText","_weekTextPositionControl","isStart","firstDayOfWeek","getFirstDayOfWeek","lweek","fweek","weekText","PROXIMATE_ONE_DAY","Calendar","getDimensionsInfo","_rangeInfo","_sw","_sh","_orient","_firstDayOfWeek","getFullYear","mStr","getDate","dStr","getDay","getTime","Date","setDate","_lineWidth","_getRangeInfo","_initRangeOption","whNames","layoutParams","cellNumbers","cellSizeSpecified","whGlobal","calendarRect","dayInfo","week","nthWeek","pointToDate","tr","br","bl","nthX","nthY","_getDateByWeeksAndDay","normalizedRange","rangeStr","reversed","parsedRange","startDateNum","endDateNum","dateNum","nthDay","calendarList","calendarSeries","_nonShapeGraphicElements","preprocessor","graphicOption","elements","GraphicComponentModel","preventAutoZ","newList","existList","flattenedList","_flatten","mappingResult","elOptionsToUpdate","_elOptionsToUpdate","resultItem","newElOption","existElOption","existing","keyInfo","parentId","newElParentOption","parentOption","setKeyInfoToNewElOption","newElOptCopy","$action","mergeNewElOptionToExist","existItem","hv","isSetLoc","existingGroupOpt","newGroupOpt","setLayoutInfoToExist","optionList","useElOptionsToUpdate","GraphicComponentView","_elMap","graphicModel","_lastGraphicModel","_updateElements","_relocate","elMap","rootGroup","elExisting","targetElParent","textContentOption","elOptionCleaned","getCleanedElOption","removeEl","textContentExisting","__ecGraphicWidthOption","__ecGraphicHeightOption","setEventData","elOptions","apiWidth","apiHeight","isParentRoot","parentElInner","__ecGraphicWidth","__ecGraphicHeight","containerInfo","boundingMode","bounding","__ecGraphicId","existElParent","removeKey","props","isSet","prop","DATA_ZOOM_AXIS_DIMENSIONS","SERIES_COORDS","getAxisMainType","findEffectedDataZooms","foundNewLink","axisRecords","createHashMap","effectedModels","effectedModelMap","dataZoomModel","addToEffected","processSingle","isLink","eachTargetAxis","axisIdxArr","isLinked","dataZoom","collectReferCoordSysModelInfo","coordSysInfoWrap","infoList","infoMap","coordSysUid","coordSysInfo","DataZoomAxisInfo","indexList","indexMap","axisCmptIdx","DataZoomModel","_autoThrottle","_noTarget","_rangePropMode","inputRawOption","retrieveRawOption","settledOption","_doInit","_setDefaultThrottle","_updateRangeUse","_resetTarget","optionOrient","targetAxisIndexMap","_targetAxisInfoMap","_fillSpecifiedTargetAxis","_makeAutoOrientByTargetAxis","_fillAutoTargetAxisByOrient","axisInfo","hasAxisSpecified","refering","specified","needAuto","setParallelAxis","filter","gridModel_1","axModel","globalOption","throttle","rangePropMode","rangeModeInOption","percentSpecified","valueSpecified","noTarget","getFirstTargetAxisModel","firstAxisModel","getAxisProxy","getAxisModel","__dzAxisProxy","setRawRange","setCalculatedRange","getPercentRange","axisProxy","findRepresentativeAxisProxy","getDataPercentWindow","getValueRange","getDataValueWindow","firstProxy","axisDimList","proxy","hostedBy","getRangePropMode","filterMode","SelectDataZoomModel","DataZoomView","SelectDataZoomView","asc","AxisProxy","_dimName","_axisIndex","_dataZoomModel","_valueWindow","_percentWindow","getTargetSeriesModels","coordType","isCoordSupported","axisMainType","getMinMaxSpan","_minMaxSpan","calculateDataWindow","hasPropModeValue","_dataExtent","percentExtent","percentWindow","valueWindow","boundPercent","boundValue","spans","restrictSet","fromWindow","toWindow","fromExtent","toExtent","toValue","suffix","rawExtentResult","calculate","calculateDataExtent","_updateMinMaxSpan","dataWindow","_setAxisModel","seriesData","store_1","dataDimIndices_1","leftOut","rightOut","thisHasValue","thisLeftOut","thisRightOut","isInWindow","selectRange","setApproximateExtent","minMaxSpan","minMax","percentSpan","valueSpan","precision","rawExtentInfo","setDeterminedMinMax","freeze","getTargetSeries","eachAxisModel","proxyList","seriesModelMap","overallReset","percentRange","valueRange","startValue","endValue","installed","installCommon","registerProcessor","PRIORITY","PROCESSOR","FILTER","installDataZoomAction","registerSubTypeDefaulter","SelectZoomModel","SelectZoomView","ToolboxFeature","features","registerFeature","ctor","getFeature","ToolboxModel","feature","featureOpt","featureName","Feature","getDefaultOption","itemGap","showTitle","iconStyle","makeBackground","ToolboxView","toolboxModel","featureOpts","_features","featureNames","_featureNames","processFeature","boxLayoutParams","viewportSize","titleText","__title","emphasisTextConfig","emphasisTextState","emphasisTextStyle","needPutOnTop","topOffset","oldName","featureModel","newTitle","isUserFeatureName","isToolboxFeature","unusable","iconsMap","titlesMap","iconStyleModel","iconStyleEmphasisModel","icons","getIcons","titles","iconPaths","iconStr","iconName","createIcon","formatterParamsExtra","hoverStyle","defaultTextPosition","createIconPaths","setIconStatus","iconStatus","updateView","SaveAsImage","url","getConnectedDataURL","connectedBackgroundColor","excludeComponents","pixelRatio","MouseEvent","env","navigator","msSaveOrOpenBlob","parts","base64Encoded","bstr","decodeURIComponent","atob","filename","u8arr","Uint8Array","blob","Blob","body","cw","doc","execCommand","lang","html","tab","$a","download","href","evt","bubbles","cancelable","dispatchEvent","INNER_STACK_KEYWORD","radioTypes","MagicType","availableIcons","seriesOptGenreator","radio","newSeriesOpt","categoryAxis","currentType","tiled","markPoint","markLine","isStack","BLOCK_SPLITER","ITEM_SPLITER","assembleSeriesWithCategoryAxis","groups","tables","valueAxisDim","headers","columns","trim","str","itemSplitRegex","RegExp","parseContents","blockMetaList","block","isTSVFormat","tsv","tsvLines","parseTSVContents","blockMeta","hasName","parseListContents","DataView","container","getDom","viewMain","textarea","optionToContent","contentToOption","seriesGroupByCategoryAxis","otherSeries","eachRawSeries","other","groupSeries","vals","argLen","getContentFromModel","htmlOrDom","getOption","readOnly","buttonContainer","buttonStyle","closeButton","refreshButton","clientHeight","textColor","textareaColor","textareaBorderColor","buttonColor","buttonTextColor","tryMergeDataOption","newData","original","shouldDeleteName","newSeriesOptList","getSeriesByName","getStoreSnapshots","snapshots","RestoreOption","resetOption","INCLUDE_FINDER_MAIN_TYPES","BrushTargetManager","_targetInfoList","foundCpts","parseFinder","targetInfoBuilders","builder","include","setOutputRanges","matchOutputRanges","coordRange","coordRanges","coordConvert","__rangeOffset","diffProcessor","xyMinMax","findTargetInfo","coordSyses","setInputRanges","rangeOffset","xyMinMaxCurr","xyMinMaxOrigin","sizeCurr","getSize","sizeOrigin","scales","getScales","makePanelOpts","getDefaultBrushType","getPanelRect","controlSeries","targetInfoList","areaPanelId","targetInfoMatchers","formatMinMax","includeMainTypes","grid","xAxisModels","yAxisModels","gridModels","gridModelMap","xAxesHas","yAxesHas","gridModel","cartesians","getCartesians","panelRectBuilders","xAxisDeclared","yAxisDeclared","geoModels","axisConvert","rangeOrCoordRange","xminymin","xmaxymax","axisNameIndex","axisDiffProcessor","refer","DATA_ZOOM_ID_BASE","DataZoomFeature","zoomActive","_isZoomActive","dataZoomSelectActive","makeAxisFinder","updateZoomBtnStatus","updateBackBtnStatus","snapshot","setBatch","newSnapshot","storedSnapshots","batchItem","dataZoomId","_dispatchZoomAction","found","dzModel","findDataZoom","minValueSpan","maxValueSpan","batch","back","nextActive","dzFeatureModel","xAxisId","yAxisId","featureDataZoomPath","dzOptions","finderResult","buildInternalOptions","axisIndexPropName","newOpt","$fromToolbox","DEFAULT_TOOLBOX_BTNS","brushPreprocessor","isNew","brushComponents","brushComponentSpecifiedBtns","brushOpt","tbs","toolbox","toolboxFeature","toolboxBrush","brushTypes","flag","removeDuplicate","hasKeys","createVisualMappings","stateList","supplementVisualOption","visualMappings","mappings","Creater","__hidden","createMappings","visualData","mappingOption","__alphaForOpacity","replaceVisualOption","selector","getLineSelectors","linePolygonIntersect","inLineRange","layoutRange","STATE_LIST","DISPATCH_METHOD","DISPATCH_FLAG","layoutCovers","brushModel","brushTargetManager","brushVisual","throttleType","throttleDelay","brushSelected","setBrushOption","brushIndex","thisBrushSelected","brushId","brushName","brushLink","linkedSeriesMap","selectedDataIndexForLink","rangeInfoBySeries","hasBrushExists","boundingRectBuilders","selectableArea","makeBrushCommonSelectorForSeries","linkOthers","brushed","rangeInfoList","stepAParallel","seriesIndices","brushModelNotControll","checkInRange","stepAOthers","seriesBrushSelected","getValueState","visualTypesMap","eachItem","valueOrIndex","rawDataItem","valueState","doDispatch","isDisposed","getBoundingRectFromMinMax","rg","BrushView","updateVisual","$from","modelId","BrushModel","inBrush","outOfBrush","setAreas","generateBrushOption","BrushFeature","isBrushed","_brushMode","command","keep","TimelineModel","_initData","setCurrentIndex","currentIndex","getCurrentIndex","isIndexMax","setPlayState","autoPlay","getPlayState","processedDataArr","dataArr","_names","dimType","controlPosition","rewind","playInterval","SliderTimelineModel","checkpointStyle","controlStyle","showPlayBtn","showPrevBtn","showNextBtn","playIcon","stopIcon","nextIcon","prevIcon","prevBtnSize","nextBtnSize","TimelineView","TimelineAxis","labelDataIndexStore","SliderTimelineView","timelineModel","layoutInfo_1","_layout","mainGroup_1","_createGroup","labelGroup","axis_1","_createAxis","getLabel","noName","_renderAxisLabel","_position","_doPlayStop","_updateTicksStatus","_clearTimer","parsedLabelPos","playPosition","prevBtnPosition","nextBtnPosition","labelPosOpt","labelAlignMap","labelBaselineMap","rotationMap","mainLength","controlModel","showControl","controlSize","controlGap","sizePlusGap","xLeft","xRight","labelAlign","labelBaseline","mainGroup","_labelGroup","rotateOriginX","rotateOriginY","viewBound","getBound","mainBound","labelBound","mainPosition","labelsPosition","mainBoundIdx","toBound","setOrigin","targetGroup","boundIdx","Ordinal","Time","locale","useUTC","createScaleByModel","niceTicks","newGroup","_renderAxisLine","progressLine","_progressLine","_currentPointer","_renderAxisTick","ticks","_tickSymbols","tick","hoverStyleModel","progressStyleModel","symbolOpt","_changeTimeline","giveSymbol","dataModel","_tickLabels","hoverLabelModel","progressLabelModel","_renderControl","playState","makeBtn","willRotate","iconSize","btn","objPath","makeControlIcon","_handlePlayClick","_renderCurrentPointer","me","onCreate","_handlePointerDrag","_handlePointerDragend","pointerMoveTo","nextState","_pointerChangeTimeline","mousePos","toCoord","_toAxisCoord","targetDataIndex","_findNearestTick","_timer","vertex","trans","axisCoord","nextIndex","tickSymbols","tickLabels","toggleState","noAnimation","dragging","animationCfg","timelinePreprocessor","timelineOpt","timeline","ec2Types","transferItem","compatibleEC2","itemStyleEmphasis","labelNormal","excludeLabelAttr","checkMarkerInSeries","seriesOpts","seriesOptArr","fillLabel","MarkerModel","createdBySelf","_mergeOption","hostSeries","__hostSeries","markerOpt","markerModel","createMarkerModelFromSeries","getMarkerModelFromSeries","MarkPointModel","masterMarkerModel","markerTypeCalculatorWithExtent","otherDataDim","targetDataDim","otherCoordIndex","targetCoordIndex","coordArr","calcDataDim","getCalculationInfo","numCalculate","indicesOfNearest","coordArrValue","markerTypeCalculator","average","dataTransform","hasXAndY","getAxisInfo","coordInfo","baseDataDim","valueDataDim","valueIndex","getDimension","dataDim","dimItem","dataDimToCoordDim","hasXOrY","createMarkerDimValueGetter","inCoordSys","sum_1","count_1","getMedian","MarkerView","markerGroupMap","renderSeries","markKeep","drawGroup","blurSeries","seriesModelList","updateMarkerLayout","mpData","xPx","yPx","getMarkerPosition","MarkPointView","markPointModel","mpModel","symbolDrawMap","coordDimsInfos","dataOpt","dimValueGetter","createData","dataParams","MarkLineModel","markLineTransform","mlModel","itemArray","mlType","retrieve","baseIndex","mlFrom","mlTo","normalizedItem","isInifinity","ifMarkLineHasOnlyDim","fromCoord","otherDimIndex","markLineFilter","updateSingleMarkerEndLayout","MarkLineView","markLineModel","mlData_1","fromData_1","toData_1","lineDrawMap","mlData","fromData","toData","optData","createList","updateDataVisualAndLayout","fromSymbolKeepAspect","fromSymbolOffset","fromSymbolRotate","fromSymbolSize","toSymbolKeepAspect","toSymbolOffset","toSymbolRotate","toSymbolSize","MarkAreaModel","markAreaTransform","maModel","rb","ltCoord","rbCoord","ifMarkAreaHasOnlyDim","markAreaFilter","getSingleMarkerEndPoint","clampData","dimPermutations","MarkAreaView","markAreaModel","areaData_1","areaGroupMap","polygonGroup","areaData","coordDimsInfos_1","xAxisScale","yAxisScale","xPointExtent","yPointExtent","allClipped","LegendModel","_updateSelector","getDefaultSelectorOptions","_updateData","legendData","hasSelected","potentialData","availableNames","isPotential","_availableNames","allSelect","inverseSelect","inactiveColor","inactiveBorderColor","inactiveBorderWidth","borderCap","borderDashOffset","borderMiterLimit","inactiveWidth","cap","dashOffset","selectorLabel","selectorPosition","selectorItemGap","selectorButtonGap","LegendView","newlineDisabled","_contentGroup","_selectorGroup","_isFirstRender","getContentGroup","getSelectorGroup","legendModel","isFirstRender","resetInner","itemAlign","renderInner","positionInfo","mainRect","layoutInner","_backgroundEl","legendDrawnMap","selectMode","excludeSeriesId","legendItemModel","newline","lineVisualStyle","_createItem","dispatchSelectAction","dispatchHighlightAction","dispatchDownplayAction","provider","colorArr","_createSelector","selectorGroup","selectorItem","emphasisLabelModel","itemVisualStyle","drawType","iconRotate","legendIconType","handleCommonProps","visualStyle","propVal","iconBrushType","legendLineModel","visualHasBorder","getLegendStyle","symboType","getDefaultLegendIcon","hitRect","tooltipModel","__legendDataIndex","contentRect","contentPos","selectorRect","selectorPos","orientIdx","hw","yx","isUseHoverLayer","legendFilter","filterSeries","legendSelectActionHandler","isToggleSelect","isItemSelected","SERIES_FILTER","installLegendAction","ScrollableLegendModel","setScrollDataIndex","scrollDataIndex","pageButtonItemGap","pageButtonGap","pageButtonPosition","pageFormatter","pageIcons","pageIconColor","pageIconInactiveColor","pageIconSize","pageTextStyle","ScrollableLegendView","_currentIndex","_controllerGroup","__rectSize","controllerGroup","pageIconSizeArr","createPageButton","pageTextStyleModel","iconIdx","pageDataIndexName","_pageGo","processMaxSize","_layoutContentAndController","controllerRect","showController","_showController","containerPos","controllerPos","pageInfo","_getPageInfo","pageIndex","contentPosition","_updatePageInfoView","legendId","canJump","pageText","total","pageCount","containerRectSize","targetItemIndex","_findTargetItemIndex","targetItem","itemCount","pCount","pagePrevDataIndex","pageNextDataIndex","targetItemInfo","getItemInfo","winStartItemInfo","winEndItemInfo","currItemInfo","itemRect","itemInfo","winStart","legendDataIdx","defaultIndex","installScrollableLegendAction","InsideZoomModel","disabled","zoomLock","setViewInfoToCoordSysRecord","getRange","coordSysRecordMap","coordSysRecord","dzInfo","dataZoomInfoMap","disposeCoordSysRecord","containsPoint","installDataZoomRoamProcessor","apiInner","dzReferCoordSysWrap","dzCoordSysInfo","dzReferCoordSysInfo","createCoordSysRecord","firstDzInfo","firstDzKey","controllerParams","prefix","typePriority","dataZoomInfo","oneType","mergeControllerParams","InsideZoomView","pan","getRangeHandlers","scrollMove","coordSysKeyArr","coordSysKey","dzUid","coordSysMainType","lastRange","directionInfo","getDirectionInfo","percentPoint","signal","pixelStart","pixelLength","makeMover","getPercentDelta","oldPoint","newPoint","SliderZoomModel","dataBackground","selectedDataBackground","fillerColor","handleIcon","handleStyle","moveHandleSize","moveHandleIcon","moveHandleStyle","showDetail","showDataShadow","brushSelect","HORIZONTAL","VERTICAL","SHOW_DATA_SHADOW_SERIES_TYPE","REALTIME_ANIMATION_CONFIG","SliderZoomView","_displayables","_onBrushEnd","_buildView","_updateView","_brushing","_resetLocation","_resetInterval","barGroup","sliderGroup","_renderBackground","_renderHandle","_renderDataShadow","_positionGroup","coordRect","_findCoordRect","_location","_size","location","targetAxisModel","otherAxisInverse","_dataShadowInfo","_getViewExtent","clickPanel","_onClickPanel","_onBrushStart","_prepareDataShadowInfo","dataShadowSegs","otherDataExtent","otherOffset","lastIsEmpty","otherShadowExtent","thisShadowExtent","areaPoints","thisCoord","stride","otherCoord","createDataShadowGroup","isSelectedArea","thisAxis","thisDim","displayables","handles","handleLabels","filler","getCursor","_onDragMove","_onDragEnd","onmouseover","_showDataInfo","onmouseout","bRect","_handleHeight","_handleWidth","handleColor","actualMoveZone","moveHandleHeight","moveHandle_1","moveHandle","moveZoneExpandSize","moveZone","enterEmphasis","leaveEmphasis","ondragstart","_range","viewExtent","_handleEnds","_updateInterval","viewExtend","nonRealtime","displaybles","handleInterval","handle","handleHeight","segIntervals","segGroup","_updateDataInfo","labelTexts","dataInterval","_formatLabel","orderedHandleEnds","setLabel","barTransform","textPoint","labelPrecision","getPixelPrecision","valueStr","showOrHide","changed","localPoint","_brushStart","_brushStartTime","brushShape","_updateBrushRect","brushStart","endPoint","startPoint","coordSysInfoList","visualDefault","linearMap","VisualMapModel","replacableOptionKeys","dataBound","controllerVisuals","resetItemSize","completeVisualOption","resetVisual","getItemSymbol","getTargetSeriesIndices","optionSeriesIndex","getSeriesByIndex","isTargetSeries","formatValueText","edgeSymbols","isMinMax","textValue","resetExtent","getDataDimensionIndex","optDim","dimNames","isCalculationCoord","storeDimIndex","completeSingle","stateExist","stateAbsent","optExist","optAbsent","defa","symbolExists","symbolSizeExists","max_1","setSelected","getSelected","getVisualMeta","getColorVisual","contentColor","textGap","DEFAULT_BAR_BOUND","ContinuousModel","_resetRange","auto","findTargetDataIndices","oVals","getColorStopValues","iVals","stops","setStop","iIdx","oIdx","iLen","oLen","first","stopsLen","outerColors","calculable","hoverLink","indicatorIcon","indicatorSize","indicatorStyle","stopValues","VisualMapView","autoPositionValues","doRender","Rect","getControllerVisual","targetValue","visualCluster","forceState","visualObj","defaultColor","visualMapping","convertOpacityToAlpha","positionGroup","paramsSet","getItemAlign","modelOption","realIndex","reals","fakeValue","layoutInput","rParam","makeHighDownBatch","highlightKey","ContinuousView","_shapes","_dataInterval","_hoverLinkDataIndices","_useHandle","_renderBar","dataRangeText","_renderEndsText","_enableHoverLinkToSeries","_enableHoverLinkFromSeries","endsIndex","_applyTransform","shapes","useHandle","_createBarGroup","gradientBarGroup","createPolygon","_dragHandle","textSize","handleThumbs","handleLabelPoints","_createHandle","_createIndicator","onDrift","onDragEnd","handleThumb","onmousemove","handleLabel","stateTransition","handleLabelPoint","indicatorLabel","indicatorLabelPoint","_firstShowIndicator","_hideIndicator","visualMapId","_hovering","_clearHoverLinkToSeries","useHoverLinkOnHandle","_doHoverLinkToSeries","forSketch","outOfRangeHandleEnds","inRangeHandleEnds","visualInRange","_createBarVisual","visualOutOfRange","barColor","barPoints","_updateHandle","_makeColorGradient","symbolSizes","_createBarPoints","LinearGradient","handlesColor","currValue","_showIndicator","cursorValue","rangeSymbol","halfHoverLinkSize","oldIndicatorPos","indicatorNewProps","labelNewProps","additive","enterBlur","_hoverLinkFromSeriesMouseOver","_clearHoverLinkFromSeries","cursorPos","hoverOnBar","HOVER_LINK_SIZE","hoverLinkDataSize","getHalfHoverLinkSize","hoverRange","oldBatch","newBatch","resultBatches","_dispatchHighDown","leaveBlur","hoverLinkOnHandle","visualMapActionInfo","visualMapActionHander","visualMapEncodingHandlers","createOnAllSeries","resetDefines","visualMetaList","resultVisual","visualMapPreprocessor","pieces","splitList","VISUAL","COMPONENT","PiecewiseModel","_pieceList","_mode","_determineMode","resetMethods","_resetSelected","visualTypesInPieces","exists","getSelectedMapKey","hasSel_1","getRepresentValue","representValue","pieceInterval","curr","minOpen","maxOpen","itemSymbol","outPieceList","splitStep","normalizeReverse","pieceListItem","closeList","infinityList","useMinMax","lg","PiecewiseVisualMapView","_getItemAlign","viewData","_getViewData","endsText","viewPieceList","_onItemClick","_enableHoverLink","indexInModelPieceList","_createItemSymbol","visualState","onHoverLink","shapeParam","newKey","o","PiecewiseView","DEFAULT_OPTION","enabled","ariaVisual","ariaModel","paletteScopeGroupByType_1","isColorBySeries","decalScope","paletteDecal","getSeriesCount","specifiedDecal","mergeDecal","dataAll_1","idxMap_1","decalScope_1","dataCount_1","resultDecal","setDecal","labelLocale","ariaLabel","seriesCnt","maxDataCnt","maxSeriesCnt","displaySeriesCnt","getTitle","withTitle","seriesLabels_1","seriesLabel","withName","displayCnt","middleSeparator_1","endSeparator_1","dataLabels","dataLabel","separatorModel","middleSeparator","endSeparator","keyValues","ariaPreprocessor","aria","RELATIONAL_EXPRESSION_OP_ALIAS_MAP","RegExpEvaluator","rVal","_condVal","isRegExp","evaluate","lVal","ConstConditionInternal","AndConditionInternal","OrConditionInternal","NotConditionInternal","RelationalConditionInternal","needParse","valueParser","tarValRaw","valueGetterParam","tarValParsed","subCondList","parseOption","exprOption","getters","cond","isObjectNotArray","and","parseAndOrOption","or","not","subOption","errMsg","parseNotOption","prepareGetValue","exprKeys","parserName","parser","keyRaw","valueGetterAttrMap","op","condValueRaw","condValueParsed","evaluator","parseRelationalOption","subOptionArr","ConditionalExpressionParsed","_cond","filterTransform","rawItem","condition","dimLoose","param","retrieveValueFromItem","resultData","sortTransform","orderExprList","orderDefList","orderExpr","incomparable","comparator","item0","item1","orderDef","val0","val1","CMD","aroundEqual","pathToBezierCurves","currentSubpath","bezierArrayGroups","xi","yi","createNewSubpath","addLine","addArc","tan","c1","s1","c2","s2","x4","y4","hx","hy","isFirst","L","Q","Z","adpativeBezier","PIXEL_DISTANCE","PIXEL_DISTANCE_SQR","dx1","dy1","dx2","dy2","cp1LenSqr","cp2LenSqr","projLen1","projLen2","tmpSegX","tmpSegY","getDividingGrids","dimSize","rowDim","rowSize","columnSize","rowCount","columnCount","grids","remained","divideSector","outShapes","arcLen","deltaR","isAngleRow","newShape","crossProduct2d","lineLineIntersect","a1x","a1y","a2x","a2y","b1x","b1y","b2x","b2y","mx","my","nmCrossProduct","projPtOnLine","lineA","lineB","dir2","dot","addToPoly","poly","binaryDividePolygon","polygonShape","pt0","pt1","intersections","intersectionPt","projPt","splitPt0","splitPt1","splitPt0Arr","splitPt1Arr","newPolyA","newPolyB","splitPolygonByLine","binaryDivideRecursive","divider","mid","OutShapeCtor","isHorizontalRow","rowSizeDim","columnSizeDim","columnDim","divideRect","Sector","polygons","beziers","pathToPolygons","getUpdatedPathProxy","polygonConvert","polygonCount","totalArea_1","selfCount","Polygon","subPath","alignSubpath","subpath1","subpath2","len1","shorterPath","shorterLen","shorterBezierCount","eachCurveSubDivCount","newSubpath","actualSubDivCount","createSubpath","lastSubpathSubpath","otherSubpath","lastY","centroid","signedArea","findBestRingOffset","fromSubBeziers","toSubBeziers","fromCp","toCp","bezierCount","bestScore","bestOffset","cursorOffset","isCombineMorphing","__isCombineMorphing","SAVED_METHOD_PREFIX","saveAndModifyMethod","modifiers","savedMethodName","originalMethod","after","before","restoreMethod","applyTransformOnBeziers","bezierCurves","mm","subBeziers","prepareMorphPath","fromPath","toPath","fromPathProxy","toPathProxy","array1","array2","lastSubpath1","lastSubpath2","newArray1","newArray2","newSubpath1","newSubpath2","alignBezierCurves","fromBezierCurves","toBezierCurves","fromPathTransform","toPathTransform","morphingData","fromArr","toArr","searchAngleIteration","searchAngleRange","fromNeedsReverse","fromSubpathBezier","toSubpathBezier","newFromSubpathBezier","newToSubpathBezier","bestAngle","tmpArr","sa","ca","newX1","newY1","i_1","findBestMorphingRotation","__morphT","onet","newCp","lerp","x0_1","y0_1","morphPath","animationOpts","oldDone","oldDuring","hilbert","minX","minY","maxX","sortPaths","pathList","xMin","yMin","xMax","yMax","cps","defaultDividePath","isMultiple","prepareMorphBatches","one","many","batches","batchCount","moveFrom","pathDividers","approxOpacity","cloned","applyMorphAnimation","animateOtherProps","updateAnimationCfg","animationDelay","fromIsMany","morphBatches","animateCount","animateIndex","morphOneBatch","forceManyOne","batchMany","batchOne","separateAnimationCfg","dividePath","individualDelay","fromList","fromPathList","addFromPath","separateCount","fromIndividuals","toIndividuals","toSubPathList","error","identityTransform","addToSubPathListToZr","addSelfToZr","restoreToPath","removeSelfFromZr","toLen","animating_1","eachDone","indivdualAnimationOpts","__zr","combineMorph","toPathList","fromLen","setLocalTransform","separateMorph","individualAnimationCfg","batchFrom","batchTo","getPathList","pathList_1","getUniversalTransitionGlobalStore","flattenDataDiffItems","seriesInfo","getIndices","groupDim","itemGroupId","getGroupIdDimension","divide","fadeInElement","newEl","newSeries","computedTransform","transitionBetween","oldList","oldDiffItems","newDiffItems","updateMorphingPathProps","rawFrom","rawTo","animateFrom","findKeyDim","oldKeyDim","newKeyDim","hasMorphAnimation","createKeyGetter","isOld","onlyGetId","diffItem","dataGroupId","keyDim","dimOrdinalMeta","itemVal","groupId","useId","oldItem","isAllIdSame","isElementStillInChart","updateOneToOne","animationConfig","oldStyle","animateElementStyles","updateManyToOne","oldIndices","oldElsList","updateOneToMany","newIndices","newElsList","newSeris","updateManyToMany","getViewOfSeriesModel","getSeriesTransitionKey","seriesKey","convertArraySeriesKeyToString","getDivideShapeFromData","querySeries","registerPainter","registerChartView","registerSeriesModel","PieSeries","registerLayout","curValue","RadarSeries","STATISTIC","TreeSeries","installTreeAction","TreemapSeries","treemapVisual","treemapLayout","originViewRoot","installTreemapAction","GraphSeries","POST_CHART_LAYOUT","GaugeSeries","FunnelSeries","ParallelSeries","BRUSH","SankeySeries","BoxplotSeries","registerTransform","CandlestickSeries","EffectScatterSeries","LinesSeries","HeatmapSeries","PictorialBarSeries","ThemeRiverSeries","SunburstSeries","installSunburstAction","CustomSeries","installSimple","DataZoom","Restore","Brush","replaceMerge","installTimelineAction","markArea","ARIA","registerUpdateLifecycle","ecMOdel","seriesTransition","transOpt","updatedSeries","globalStore","oldSeries","optionChanged","transitionOpt","transitionSeriesFromOpt","updateBatches_1","updateBatches","oldDataMap","oldDataMapForSplit","transitionKey","transitionKeyStr","oldSeries_1","oldData_1","findTransitionSeriesBatches","allSeries","getSeries","savedSeries","savedData","pick","EChartsReact","EChartsReactCore","ele","isInitialResize","componentDidMount","renderNewEcharts","componentDidUpdate","prevProps","shouldSetOption","theme","onEvents","pickKeys","updateEChartsOption","className","componentWillUnmount","getEchartsInstance","getInstanceByDom","onChartReady","echartsInstance","bindEvents","events","_bindEvent","func","_b","_c","lazyUpdate","showLoading","loadingOption","echartInstance","setOption","hideLoading","newStyle","ref","PureComponent","BaseBarSeriesModel","BarSeriesModel","createInvertedIndices","showBackground","backgroundStyle","realtimeSort","adjustAngleDistanceX","adjustAngleDistanceY","_eventPos","BarView","_isFirstFrame","_removeOnRenderedListener","coordinateSystemType","_updateLargeClip","isHorizontalOrRadial","realtimeSortCfg","realtimeSortOption","otherAxis","shouldRealtimeSort","_enableRealtimeSort","coordSysClipArea","expandWidth","getClipArea","drawBackground","backgroundModel","barBorderRadius","bgEls","oldBgEls","_backgroundEls","isInitSort","isChangeOrder","createBackground","bgLayout","createBackgroundShape","createBackgroundEl","isValidLayout","isClipped","elementCreator","forceLabelAnimation","updateStyle","updateRealtimeAnimation","labelInnerStore","prevValue","bgGroup","_backgroundGroup","_removeBackground","_dispatchInitSort","orderMapping_1","_onRendered","_updateSortWithinSameData","_dataSort","orderMapping","ordinalNumber","mappedValue","ordinalNumbers","_isOrderChangedWithinSameData","ordinalDataDim","lastValue","tickNum","rawIndexOf","MIN_VALUE","indexOfRawIndex","_isOrderDifferentInView","orderInfo","tickMax","sortInfo","axisId","sortResult","coordSysBoundingRect","signWidth","signHeight","coordSysX2","coordSysY2","xClipped","yClipped","signR","__dataIndex","isRadial","ShapeClass","createPolarPositionMapping","calculateTextPosition","positionMapping","isRoundCap","mappedSectorPosition","middleR","middleAngle","extraDist","createSectorCalculateTextPosition","animateProperty","animateTarget","seriesAnimationModel","seriesTarget","axisTarget","axisAnimationModel","checkPropertiesNotValid","rectPropties","polarPropties","fixedLineWidth","rawLayout","getLineWidth","signX","signY","arcOrAngle","isPolar","labelPositionOutside","anchorAngle","setSectorTextRotation","isZeroOnPolar","LagePathShape","LargePath","__startPoint","baseDimIdx","__baseDimIdx","largeDataIndices","backgroundStartPoint","__largeDataIndices","__barWidth","setLargeBackgroundStyle","globalStyle","largePathUpdateDataIndex","largePath","valueDimIdx","barWidthHalf","startValueVal","pointerBaseVal","pointerValueVal","baseLowerBound","baseUpperBound","ii","barBaseVal","barValueVal","largePathFindDataIndex","coordLayout","install","BarSeries","LAYOUT","PROGRESSIVE_LAYOUT","dataSample","setCategorySortInfo","_createSymbol","driftSymbol","stopSymbolAnimation","toLastFrame","setZ","disableAnimation","_updateCommon","_sizeX","_sizeY","emphasisItemStyle","blurItemStyle","selectItemStyle","z2Origin","_z2","scaleRatio","animationOpt","isIgnore","normalizeUpdateOpt","SymbolCtor","_SymbolCtor","symbolUpdateOpt","getSymbolPoint","newSymbolType","oldSymbolType","_getSymbolPoint","enableAnimation","createGridClipPath","isAxisInversed","duringCb","createPolarClipPath","sectorArea","createClipPath","getDefaultLabel","labelDims","getDefaultInterpolatedLabel","LineSeriesModel","visualRotate","endLabel","smoothMonotone","showSymbol","showAllSymbol","connectNulls","sampling","hoverLayerThreshold","triggerLineEvent","prepareDataCoordInfo","valueOrigin","valueStart","getValueStart","baseDataOffset","stackResultDim","dataDimsForPoint","stackedOverDimension","getStackedOnPoint","dataCoordInfo","stackedData","isPointsSame","points2","bboxFromPoints","getBoundingDiff","min1","max1","min2","max2","getSmooth","turnPointsIntoStep","stepTurnAt","stepPoints","stepPt","nextPt","stepPt2","getVisualGradient","stop","stopLen","colorStopsInRange","prevOutOfRangeColorStop","prevInRangeColorStop","newColorStops","lerpStop","stop0","stop1","clippedCoord","coord0","clipColorStops","inRangeStopLen","minCoord","maxCoord","coordSpan","getIsIgnoreFunc","isAuto","availSize","dataLen","canShowAllSymbolForCategory","categoryDataDim","labelMap","getPointAtIndex","anyStateShowEndLabel","createLineClipPath","lineView","endLabelModel_1","valueAnimation_1","labelAnimationRecord_1","lastFrameIndex","_endLabelOnDuring","_endLabel","originalX","originalY","expandSize","LineView","_lineGroup","isCoordSysPolar","prevCoordSys","_coordSys","_polyline","_polygon","isAreaChart","getStackedOnPoints","isIgnoreFunc","__temp","clipShapeForSymbol","_clipShapeForSymbol","_step","_newPolygon","_initOrUpdateEndLabel","oldClipPath","newClipPath","_stackedOnPoints","_doUpdateAnimation","_initSymbolLabelAnimation","_newPolyline","stackedOnSeries","changePolyState","_changePolyState","_valueOrigin","symbolLabel","isAxisInverse","seriesDuration","seriesDalay","seriesDalayValue","polarClip","gridClip","endLabelModel","data_2","ignoreClip","getLastIndexNotNull","enableTextSetter","isBaseInversed","getEndLabelStateSpecified","animationRecord","xOrY","dataIndexRange","prevIndex","getIndexRange","getPointOn","setLabelText","oldStackedOnPoints","newStackedOnPoints","oldCoordSys","newCoordSys","oldValueOrigin","newValueOrigin","diffResult","idx1","diffData","currPoints","nextPoints","currStackedPoints","nextStackedPoints","sortedIndices","rawIndices","newDataOldCoordInfo","pointAdded","oldIdx2","newIdx2","currentX","currentY","nextX","nextY","newDataDimsForPoint","oldPt","stackedOnPoint","sortedCurrPoints","sortedNextPoints","sortedCurrStackedPoints","sortedNextStackedPoints","sortedStatus","i2","idx2","stackedOnCurrent","stackedOnNext","lineAnimationDiff","__points","updatedDataInfo","diffStatus","ptIdx","LineSeries","isPointNull","drawSegment","segLen","allLen","prevX","prevY","cpx0","cpy0","tmpK","ratioNextSeg","vx","vy","nextCpx0","nextCpy0","dx0","dy0","lenPrevSeg","lenNextSeg","ECPolylineShape","ECPolyline","isDimX","roots","nRoot","t_1","ECPolygonShape","ECPolygon","ScatterSeriesModel","LargeSymbolPathShape","LargeSymbolPath","symbolProxy","symbolProxyShape","_ctx","softClipShape","afterBrush","fillRect","LargeSymbolDraw","startIndex","endIndex","byteOffset","extrudeShadow","ScatterView","_updateSymbolDraw","ScatterSeries","labelOffset","handleAutoShown","transformGroup","_transformGroup","hasBuilder","builders","innerTextLayout","axisRotation","rotationDiff","makeAxisEventDataBase","isLabelSilent","tooltipOpt","shown","pt2","anid","arrows","arrowSize","arrowOffset","symbolWidth_1","symbolHeight_1","axisTickLabel","ticksEls","tickEndCoord","createTicks","buildAxisMajorTicks","labelEls","itemLabelModel","level","buildAxisLabel","tickEls","showMinLabel","showMaxLabel","firstLabel","nextLabel","lastLabel","prevLabel","firstTick","nextTick","lastTick","prevTick","ignoreEl","isTwoLabelOverlapped","fixMinMaxLabelShow","minorTickLineStyle","minorTicksEls","buildAxisMinorTicks","labelList","priority","defaultAttr","gapSignal","isNameLocationCenter","nameRotation","textRotate","onLeft","endTextLayout","truncateOpt","__fullText","firstRect","nextRect","mRotationBack","tickTransform","anidPrefix","tickEl","axisPointerClazz","_doUpdateAxisPointerClass","updateAxisPointer","axisPointer","_axisPointer","_disposeAxisPointer","forceRender","Clazz","getAxisPointerClass","registerAxisPointerClass","clazz","rectCoordAxisBuildSplitArea","areaColorsLen","lastSplitAreaColors","newSplitAreaColors","cIndex","prev","rectCoordAxisHandleRemove","_axisModel","_axisPointerModel","_lastValue","_lastStatus","_group","_handle","_lastGraphicKey","moveAnimation","_moveAnimation","determineAnimation","doUpdateProps","updateProps","updatePointerEl","updateLabelEl","createPointerEl","createLabelEl","updateMandatoryProps","isCategoryAxis","useSnap","seriesDataCount","pointerEl","updateLabelShowHide","handleModel","onmousedown","_onHandleDragMove","_onHandleDragEnd","_moveHandleToValue","getHandleTransProps","_payloadInfo","lastProp","_doDispatchAxisPointer","payloadInfo","axesInfo","doClear","buildLabel","xDimIndex","propsEqual","lastProps","newProps","equals_1","findPointFromSeries","isStacked","register","records","initialized","useHandler","dis","pendings","showTip","hideTip","pendingList","makeDispatchAction","record","actuallyPayload","showLen","hideLen","dispatchTooltipFinally","doEnter","onLeave","initGlobalListeners","currTrigger","unregister","CartesianAxisPointer","getCartesian","cartesianAxisHelper","getAxisDimIndex","AxisPointerModel","snap","triggerTooltip","shadowStyle","AxisPointerView","globalAxisPointerModel","globalTooltipModel","globalListener","axisTrigger","coordSysAxesInfo","illegalPoint","isIllegalPoint","inputAxesInfo","shouldHide","outputPayload","showValueMap","dataByCoordSys","updaters","showTooltip","coordSysMap","coordSysContainsPoint","inputAxisInfo","findInputAxisInfo","processOnAxis","linkTriggers","tarAxisInfo","tarKey","linkGroup","srcAxisInfo","srcKey","srcValItem","mapper","makeMapperParam","outputAxesInfo","valItem","seriesDataIndices","payloadBatch","updateModelActually","sampleItem","dataByAxis","escapeConnect","dispatchTooltipActually","highDownKey","lastHighlights","newHighlights","toHighlight","toDownplay","notBlur","dispatchHighDownActually","newValue","noSnap","outputFinder","involveSeries","snapToValue","minDiff","seriesNestestValue","buildPayloadsBySeries","modelHelper","coordSysItem","coordSysId","coordSysIndex","valueLabelOpt","collect","seriesInvolved","linksOption","linkGroups","getCoordinateSystems","makeKey","axesInfoInCoordSys","baseTooltipModel","saveTooltipAxisInfo","triggerAxis","cross","tooltipAxes","fromTooltip","axisPointerShow","isHandleTrigger","tooltipAxisPointerModel","fields","volatileOption","field","labelOption","tooltipAxisPointerLabelShow","crossStyle","makeAxisPointerModel","groupIndex","linkOption","checkPropInLink","getLinkGroupIndex","collectAxesInfo","seriesTooltipTrigger","seriesTooltipShow","collectSeriesInfo","linkPropValue","axisPropValue","fixValue","getAxisPointerModel","buildElStyle","styleModel","buildLabelElOption","getValueLabel","paddings","confineInContainer","bgColor","params_1","axisDimension","idxItem","getTransformedPosition","buildCartesianSingleLabelElOption","makeLineShape","makeRectShape","makeSectorShape","GridModel","containLabel","CartesianAxisModel","Cartesian","_dimList","_axes","toLowerCase","addAxis","cartesian2DDimensions","canCalculateAffineTransform","Cartesian2D","calcAffineTransform","_invTransform","xScaleExtent","yScaleExtent","xScaleSpan","yScaleSpan","translateX","translateY","axisX","axisY","xVal","yVal","xScale","yScale","xExtent","yExtent","Axis2D","categorySortInfo","setSortInfo","isAxisUsedInTheGrid","fixAxisOnZero","onZeroRecords","getAxesOnZeroOf","otherAxisOnZeroOf","onZero","onZeroAxisIndex","canOnZeroToAxis","getOnZeroRecordKey","Grid","_coordsMap","_coordsList","_axesList","_initCartesian","_updateScale","ignoreContainLabel","isContainLabel","axesList","adjustAxes","axisExtentSum","updateAxisTransform","labelUnionRect","axesMapOnDim","coordList","_findConvertTarget","coordsList","axisPositionUsed","axesCount","createAxisCreator","unionExtent","axesModelMap","CartesianAxisView","elementType","CartesianXAxisView","CartesianYAxisView","GridView","extraOption","TitleModel","subtext","subtarget","subtextStyle","TitleView","titleModel","subtextStyleModel","disableBox","subText","subTextEl","sublink","groupRect","layoutOption","alignStyle","TooltipModel","showContent","alwaysShowContent","displayMode","renderMode","confine","showDelay","hideDelay","transitionDuration","enterable","extraCssText","shouldTooltipConfine","confineOption","testStyle","styleProps","TRANSFORM_VENDOR","TRANSITION_VENDOR","toCSSVendorPrefix","styleVendor","styleProp","CSS_TRANSITION_VENDOR","CSS_TRANSFORM_VENDOR","gCssText","assembleTransform","is3d","assembleCssText","enableTransition","onlyFade","boxShadow","transitionCurve","transitionOption","transitionText","assembleTransition","toHex","borderName","camelCase","assembleFont","makeStyleCoord","appendToBody","zrX","zrY","zrPainter","zrViewportRoot","viewportRootOffset","TooltipHTMLContent","_show","_styleCoord","_enterable","_firstShow","_longHide","domBelongToZr","_appendToBody","_container","onmouseenter","_hideTimeout","_inContent","dispatch","onmouseleave","hideLater","_hideDelay","currentStyle","domStyle","_moveIfResized","nearPointColor","_longHideTimeout","styleCoord","setContent","markers","arrowPosition","arrow","rotateDeg","arrowPos","positionStyle","transformStyle","rotateRadian","arrowWH","rotatedWH","borderStyle","SQRT2","assembleArrow","isDom","childNodes","arrowEl","setEnterable","offsetWidth","offsetHeight","transforms","ratioX","ratioY","visibility","willChange","TooltipRichContent","markupStyleCreator","richTextStyles","shadowOuterSize","calcShadowOuterSize","mathMaxWith0","parsePercent","proxyRect","TooltipView","_renderMode","_tooltipContent","_tooltipModel","_alwaysShowContent","tooltipContent","_initGlobalListener","_keepShow","_updatePosition","_doUpdatePosition","_tryShow","_hide","_lastX","_lastY","self_1","_refreshUpdateTimeout","manuallyShowTip","_lastDataByCoordSys","_ticket","cmptRef","queryOptionMap","componentMainType","useDefault","enableAll","enableNone","getViewOfComponentModel","subEl","tooltipConfig","findComponentReference","positionDefault","_manuallyAxisShowTip","pointInfo","findHover","manuallyHideTip","buildTooltipModel","_showAxisTooltip","seriesDispatcher_1","cmptDispatcher_1","_showSeriesItemTooltip","_showComponentItemTooltip","_showOrMove","_showTimout","singleTooltipModel","cbParamsList","articleMarkup","markupTextArrLegacy","itemCoordSys","axisItem","axisValue","axisValueLabel","axisSectionMarkup","cbParams","marker","makeTooltipMarker","seriesTooltipResult","markupFragment","markupText","positionExpr","orderMode","builtMarkupText","blockBreak","allMarkupText","_updateContentNotChangedOnAxis","_showTooltipContent","dispatcher","tooltipTrigger","asyncTicket","tooltipModelCascade","cmpt","subTooltipModel","defaultHtml","formatterParams","_getNearestPoint","params0","cbTicket","tooltipDataParams","contentSize","boxLayoutPosition","domWidth","domHeight","rectWidth","rectHeight","calcTooltipPosition","gapH","gapV","refixTooltipPosition","isCenterAlign","confineTooltipPosition","lastCoordSys","lastCbParamsList","_cbParamsList","contentNotChanged","lastItemCoordSys","indexCoordSys","lastDataByAxis","thisDataByAxis","indexAxis","thisItem","lastIndices","lastIdxItem","newIdxItem","seriesIdx","lastCbParams","modelCascade","defaultTooltipOption","resultModel","isCoordinateSystemType","nameRotate","nameTruncate","placeholder","deduplication","alignWithLabel","timeAxis","primary","logAxis","logBase","AXIS_TYPES","BaseAxisModelClass","extraDefaultOption","AxisModel","themeModel","getTheme","getAxisType","__ordinalMeta","OrdinalMeta","rawAxisPosition","axisOffset","posBound","onZeroCoord","isCartesian2DSeries","findAxisModels","axisModelMap","pointsLayout","forceStoreInTypedArray","useTypedArray","dimLen","dimIdx0","dimIdx1","samplers","nearest","indexSampler","dpr","rate","lttbDownSample","sampler","downSample","SausageShape","SausagePath","dr","rCenter","unitStartX","unitStartY","unitEndX","unitEndY","supportFloat32Array","Float32ArrayCtor","createFloat32Array","flags","PLACEHOLDER","PARTIAL_FLAG","INFINITY","NAN","wrapFlags","funcTag","genTag","reTrim","reWrapComment","reWrapDetails","reSplitDetails","reIsBadHex","reIsBinary","reIsHostCtor","reIsOctal","reIsUint","freeParseInt","freeGlobal","freeSelf","thisArg","arrayIncludes","predicate","fromRight","baseFindIndex","baseIsNaN","baseIndexOf","countHolders","replaceHolders","resIndex","funcProto","objectProto","coreJsData","maskSrcKey","funcToString","objectToString","reIsNative","objectCreate","nativeMax","nativeMin","getNative","baseCreate","baseIsNative","isHostObject","toSource","composeArgs","partials","holders","isCurried","argsIndex","argsLength","holdersLength","leftIndex","leftLength","rangeLength","isUncurried","composeArgsRight","holdersIndex","rightIndex","rightLength","createCtor","thisBinding","createHybrid","bitmask","partialsRight","holdersRight","argPos","ary","arity","isAry","isBind","isBindKey","isFlip","wrapper","getHolder","holdersCount","newHolders","createRecurry","reorder","wrapFunc","isCurry","setWrapToString","createWrap","createCurry","createPartial","createBind","getWrapDetails","match","insertWrapDetails","details","isIndex","indexes","arrLength","oldArray","copyArray","reference","updateWrapDetails","iteratee","arrayEach","pair","guard","toFinite","isObjectLike","isBinary","toNumber","remainder","MAX_SAFE_INTEGER","argsTag","arrayPush","spreadableSymbol","isConcatSpreadable","baseFlatten","isStrict","isFlattenable","isLength","isArrayLikeObject","isArguments","flow","funcs","otherArgs","createFlow","getClassNames","classNamesFunction","COMPONENT_NAME","ToggleBase","_toggleButton","_onClick","ev","checkedProp","checked","onChange","onChanged","onClick","setState","initializeComponentRef","warnMutuallyExclusive","warnDeprecations","onAriaLabel","offAriaLabel","defaultChecked","_id","getDerivedStateFromProps","nextProps","prevState","as","RootType","keytipProps","offText","onText","styles","inlineLabel","stateText","badAriaLabel","toggleNativeProps","classNames","onOffMissing","toggleId","labelId","stateTextId","labelledById","ariaRole","role","renderPill","keytipAttributes","pill","_noop","thumb","pillContent","KeytipData","ariaDescribedBy","hidden","Label","htmlFor","Toggle","styled","_f","_g","semanticColors","palette","pillUncheckedBackground","bodyBackground","pillCheckedBackground","inputBackgroundChecked","pillCheckedHoveredBackground","inputBackgroundCheckedHovered","thumbUncheckedHoveredBackground","neutralDark","pillCheckedDisabledBackground","disabledBodySubtext","thumbBackground","smallInputBorder","thumbCheckedBackground","inputForegroundChecked","thumbDisabledBackground","thumbCheckedDisabledBackground","disabledBackground","pillBorderColor","pillBorderHoveredColor","inputBorderHovered","pillBorderDisabledColor","textDisabledColor","disabledText","fonts","medium","marginBottom","alignItems","marginRight","marginLeft","wordBreak","inset","boxSizing","DEFAULT_PILL_HEIGHT","border","justifyContent","DEFAULT_THUMB_SIZE","userSelect","hsl","t1","t2","t3","rgb","componentToHex","expand","substring","extractComponents","parseHslComponent","hsl2rgb","space2parser","parseRgbComponent","yuv2rgb","yuv","u","rgb2yuv","getBase16Theme","createStyling","invertTheme","_extends3","_slicedToArray3","_keys2","_lodash2","base16","newObj","_interopRequireWildcard","_rgb2hex2","_parse2","_lodash4","_colorConverters","DEFAULT_BASE16","BASE16_KEYS","invertColor","_ref","_ref2","merger","styling","prevStyling","Boolean","mergeStylings","customStylings","defaultStylings","reduce","mergedStyling","customStyling","defaultStyling","customType","defaultType","_len","_key","_len2","_key2","_len3","_key3","_len4","_key4","_len5","_key5","mergeStyling","getStylingByKeys","_len6","_key6","getStylingFromBase16","_len7","_key7","themeOrStyling","_options$defaultBase","defaultBase16","_options$base16Themes","base16Themes","base16Theme","_theme$split","_theme$split2","themeName","_classCallCheck3","_possibleConstructorReturn3","_inherits3","_react2","_propTypes2","_JSONArrow2","ItemRange","_React$Component","expanded","handleClick","_props","renderChildNodes","nodeType","arrowStyle","propTypes","isRequired","string","_objectWithoutProperties3","_JSONNestedNode2","createItemString","JSONArrayNode","nodeTypeIndicator","expandable","JSONArrow","oneOf","bool","defaultProps","_isSafeInteger2","limit","hasMore","_iterator","_isArray","_getCollectionEntries2","_JSONNode2","_ItemRange2","collectionLimit","circularCache","keyPath","postprocessValue","sortObjectKeys","entry","isCircular","hideRoot","getStateFromProps","shouldExpandNode","JSONNestedNode","componentWillReceiveProps","shouldComponentUpdate","_this2","find","getItemString","labelRenderer","renderedChildren","renderedItemString","stylingArgs","any","arrayOf","oneOfType","_objType2","_JSONObjectNode2","_JSONArrayNode2","_JSONIterableNode2","_JSONValueNode2","JSONNode","valueRenderer","isCustomNode","rest","simpleNodeProps","nestedNodeProps","valueGetter","toISOString","_getOwnPropertyNames2","JSONObjectNode","JSONValueNode","_reactBase16Styling","_solarized2","valueColorMap","STRING_COLOR","DATE_COLOR","NUMBER_COLOR","BOOLEAN_COLOR","Null","NULL_COLOR","Undefined","UNDEFINED_COLOR","FUNCTION_COLOR","SYMBOL_COLOR","BACKGROUND_COLOR","TEXT_COLOR","LABEL_COLOR","ARROW_COLOR","ITEM_STRING_COLOR","ITEM_STRING_EXPANDED_COLOR","colorMap","marginTop","listStyle","MozUserSelect","WebkitUserSelect","paddingTop","paddingRight","wordWrap","paddingLeft","textIndent","valueLabel","valueText","itemRange","_ref3","WebkitTransition","MozTransition","WebkitTransform","MozTransform","transformOrigin","WebkitTransformOrigin","MozTransformOrigin","arrowContainer","_ref4","arrowSign","arrowSignInner","nestedNode","_ref5","rootNode","nestedNodeLabel","_ref6","nestedNodeItemString","_ref7","nestedNodeItemType","nestedNodeChildren","_ref8","rootNodeChildren","getLength","collection","isIterableMap","getEntries","isMap","getRanges","ranges","getEntriesBound","isSubset","limitedEntries","_getEntriesBound","_createStylingFromTheme2","identity","deprecatedStylingMethodsMap","getArrowStyle","getListStyle","getItemStringStyle","getLabelStyle","getValueStyle","deprecatedStylingMethods","checkLegacyTheming","JSONTree","_this3","keyName","itemType","itemString","SensorTabIndex","SensorClassName","SizeSensorId","timer","_sensorPool","sensor","getSensor","unbind","removeSensor","_sensors","_constant","Sensors","sensorId","newId","createSensor","destroy","_object","_resizeObserver","ResizeObserver","_debounce","listeners","resizeListener","listener","contentDocument","removeEventListener","onload","addEventListener","pointerEvents","zIndex","newSensor","disconnect","observe"],"sourceRoot":""}